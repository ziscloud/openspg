(("undefined"!=typeof globalThis?globalThis:self)["makoChunk_open-semantic-graph"]=("undefined"!=typeof globalThis?globalThis:self)["makoChunk_open-semantic-graph"]||[]).push([["074e2787"],{"0b69d691":function(e,t,n){"use strict";n.d(t,"__esModule",{value:!0}),n.e(t,{getEntityDetail:function(){return r;},getEnumValues:function(){return o;},getLlmSelect:function(){return l;},getOneHopGraph:function(){return i;},getSampleData:function(){return s;},search:function(){return d;}});var a=n("05ecbb5b");async function r(e,t){return(0,a.request)("/v1/datas/getEntityDetail",{method:"POST",headers:{"Content-Type":"application/json"},data:e,...t||{}});}async function o(e,t){let{name:n}=e;return(0,a.request)(`/v1/datas/getEnumValues/${n}`,{method:"GET",params:{...e},...t||{}});}async function l(e,t){return(0,a.request)("/v1/datas/getLlmSelect",{method:"GET",params:{...e},...t||{}});}async function i(e,t){return(0,a.request)("/v1/datas/getOneHopGraph",{method:"POST",headers:{"Content-Type":"application/json"},data:e,...t||{}});}async function s(e,t){return(0,a.request)("/v1/datas/getSampleData",{method:"GET",params:{...e},...t||{}});}async function d(e,t){return(0,a.request)("/v1/datas/search",{method:"GET",params:{...e},...t||{}});}},"1a998156":function(e,t,n){"use strict";n.d(t,"__esModule",{value:!0}),n.e(t,{CONSTRAINT_TYPE:function(){return l;},INFO_COLUMN:function(){return a;},RELATION_CATEGORY:function(){return i;},RELATION_DIRECTION:function(){return o;},RULE_TYPE:function(){return r;},baseSchemePropertyNameMap:function(){return b;},infoColumnMapping:function(){return p;},relationDirectionMapping:function(){return m;},ruleTypeMapping:function(){return h;}});var a,r,o,l,i,s,d,u,c,f,g=n("777fffbe")._(n("f02131d0"));(s=a||(a={}))[s.NAME=0]="NAME",s[s.DESCRIPTION=1]="DESCRIPTION",s[s.MODIFY_TIME=2]="MODIFY_TIME",s[s.KNOWLEDGE_COUNT=3]="KNOWLEDGE_COUNT",s[s.SOURCE=4]="SOURCE",s[s.TARGET=5]="TARGET",s[s.RELATION_DIRECTION=6]="RELATION_DIRECTION";let p={0:g.default.get({id:"spg.src.constants.knowledgeBuild.Name",dm:"\u540D\u79F0"}),1:g.default.get({id:"spg.src.constants.knowledgeBuild.Description",dm:"\u63CF\u8FF0"}),2:g.default.get({id:"spg.src.constants.knowledgeBuild.LastEditTime",dm:"\u6700\u8FD1\u7F16\u8F91\u65F6\u95F4"}),3:g.default.get({id:"spg.src.constants.knowledgeBuild.CumulativeQuantityOfKnowledge",dm:"\u77E5\u8BC6\u7D2F\u79EF\u6570\u91CF"}),4:g.default.get({id:"spg.src.constants.knowledgeBuild.StartingPoint",dm:"\u8D77\u70B9"}),5:g.default.get({id:"spg.src.constants.knowledgeBuild.End",dm:"\u7EC8\u70B9"}),6:g.default.get({id:"spg.src.constants.knowledgeBuild.RelationshipType",dm:"\u5173\u7CFB\u7C7B\u578B"})};(d=r||(r={})).RELATION="RELATION",d.PROPERTY="PROPERTY",d.CONCEPT="CONCEPT";let h={RELATION:{name:"RELATION",nameZh:g.default.get({id:"spg.src.constants.knowledgeBuild.RelationshipRules",dm:"\u5173\u7CFB\u89C4\u5219"})},PROPERTY:{name:"PROPERTY",nameZh:g.default.get({id:"spg.src.constants.knowledgeBuild.AttributeRules",dm:"\u5C5E\u6027\u89C4\u5219"})},CONCEPT:{name:"CONCEPT",nameZh:g.default.get({id:"spg.src.constants.knowledgeBuild.ConceptRules",dm:"\u6982\u5FF5\u89C4\u5219"})}};(u=o||(o={})).TRANSITIVE="TRANSITIVE",u.BOTH="BOTH",u.SINGLE="SINGLE",u.NULL="NULL";let m={TRANSITIVE:g.default.get({id:"spg.src.constants.knowledgeBuild.TransferRelationship",dm:"\u4F20\u9012\u5173\u7CFB"}),BOTH:g.default.get({id:"spg.src.constants.knowledgeBuild.SymmetricRelation",dm:"\u5BF9\u79F0\u5173\u7CFB"}),SINGLE:g.default.get({id:"spg.src.constants.knowledgeBuild.OneWayRelationship",dm:"\u5355\u5411\u5173\u7CFB"}),NULL:g.default.get({id:"spg.src.constants.knowledgeBuild.None",dm:"\u65E0"})};(c=l||(l={})).UNIQUE="UNIQUE",c.REQUIRE="REQUIRE",c.ENUM="ENUM",c.MAXIMUM_LT_OE="MAXIMUM_LT_OE",c.MAXIMUM_LT="MAXIMUM_LT",c.MINIMUM_GT_OE="MINIMUM_GT_OE",c.MINIMUM_GT="MINIMUM_GT",c.REGULAR="REGULAR",c.MULTIVALUE="MULTIVALUE",(f=i||(i={})).BASIC="BASIC_TYPE",f.CONCEPT="CONCEPT_TYPE",f.ENTITY="ENTITY_TYPE",f.EVENT="EVENT_TYPE",f.STANDARD="STANDARD_TYPE",f.ONE_LEVEL="ONE_LEVEL_TYPE";let b={id:"ID",name:g.default.get({id:"spg.src.constants.knowledgeBuild.Name",dm:"\u540D\u79F0"}),description:g.default.get({id:"spg.src.constants.knowledgeBuild.Description",dm:"\u63CF\u8FF0"}),__from_id__:g.default.get({id:"spg.src.constants.knowledgeBuild.StartingPoint",dm:"\u8D77\u70B9"}),__to_id__:g.default.get({id:"spg.src.constants.knowledgeBuild.End",dm:"\u7EC8\u70B9"})};},"2caf0dfa":function(e,t,n){"use strict";n.d(t,"__esModule",{value:!0}),n.e(t,{fetchSchemaData:function(){return c;},fetchSchemaDetail:function(){return p;},fetchSchemaTree:function(){return u;},knowledgeModelDataState:function(){return d;},setSchemaInfo:function(){return f;}});var a=n("d1751d7c"),r=n("fc5eb767"),o=n("48fdd872"),l=n("5b5ed4a9"),i=n("3834a44f");a._(n("8dec2e97"),t);let s={nodes:[],edges:[]},d=(0,l.proxy)({graphData:void 0,schemaInfo:void 0,fetching:void 0,schemaDetail:void 0,dynamicConfig:void 0,schemaData:s,schemaTreeData:{},relativeProjects:[]}),u=async()=>{let e=Number((0,i.getProjectId)());d.fetching=!0;let t=await (0,o.getSchemaTreeWithProject)({projectId:e});if(t.success&&t.result){let{data:e}=(0,r.addExtraInfoToTree)(t.result,!0);d.schemaTreeData=e,d.relativeProjects=(0,r.getTreeRelativeProjects)(e);}return d.fetching=!1,t;},c=async()=>{let e=Number((0,i.getProjectId)());d.fetching=!0;let t=await (0,o.getSchemaAndRelation)({projectId:e});if(t.success&&t.result){let e=t.result,n=e.entityTypeDTOList||[],a=e.relationTypeDTOList||[],o=(0,r.transformRelationGraphData)({nodes:n.filter(e=>e.name!==r.rootNode.name),edges:a});return d.schemaData=o,d.fetching=!1,o;}return d.schemaData=s,d.fetching=!1,s;},f=e=>{d.schemaInfo=e,e||(d.dynamicConfig=void 0,d.schemaDetail=void 0,d.fetching=void 0);};async function g(e,t){return(0,l.request)("/v1/schemas/getDynamicConfig",{method:"GET",params:{...e},...t||{}});}let p=async e=>{let t;if(!e)return d.fetching=!1;d.fetching=!0;let n=null,{type:a,isSchema:r}=e;if(r){let r="TYPE";switch(a){case"node":case"combo":t=await (0,o.getSchemaEntityProperties)({id:Number(e.id)});break;case"edge":r="RELATION",t=await (0,o.getSchemaRelationProperties)({id:Number(e.id)});}let l=Number(e.id);if(isNaN(l)||(n=await g({type:r,ids:l})),n&&n.success&&n.result?d.dynamicConfig=n.result:d.dynamicConfig=void 0,t.success&&t.result)return d.schemaDetail=t.result,d.fetching=!1,t.result;}d.schemaDetail=void 0,d.dynamicConfig=void 0,d.fetching=!1;};},"3ad5aff1":function(e,t,n){n.d(t,"__esModule",{value:!0}),n.e(t,{DevTools:function(){return H;},ID:function(){return u.ID;},antlr4:function(){return $.default;},default:function(){return z;},registerOptions:function(){return h;}});var a=n("777fffbe"),r=n("852bbaa9"),o=n("cad0a1a4"),l=n("c695ccb5"),i=n("daa55c75"),s=n("f14d90dc"),d=r._(s),u=n("5d87a02b"),c=n("e6b3e60f"),f=n("55dbeba9"),g=a._(f),p=n("46c8e433");let h=e=>{i.MonacoEnvironment.container.get(i.LanguageOptionsRegistry).registerOptions(u.ID,e);},m=()=>i.MonacoEnvironment.container.get(i.LanguageOptionsRegistry).getOptions(u.ID),b=e=>i.MonacoEnvironment.container.get(i.LanguageOptionsRegistry).getOptions(e)||{};var y=this&&this.__awaiter||function(e,t,n,a){return new(n||(n=Promise))(function(r,o){function l(e){try{s(a.next(e));}catch(e){o(e);}}function i(e){try{s(a.throw(e));}catch(e){o(e);}}function s(e){var t;e.done?r(e.value):((t=e.value)instanceof n?t:new n(function(e){e(t);})).then(l,i);}s((a=a.apply(e,t||[])).next());});};let v={nodes:[],edges:[]};class T{constructor(){this.cacheContainer=new Map,this.queryFunctions=()=>y(this,void 0,void 0,function*(){return this.query("functions",m().queryFunctions,[]);}),this.querySchema=()=>y(this,void 0,void 0,function*(){return this.query("schema",m().querySchema,v);});}static GET_CACHE_INSTANCE(){return this.queryInstance||(this.queryInstance=new T),this.queryInstance;}getContainer(e){let t=this.cacheContainer.get(e);if(!t){let t=new p.LRU({max:5});return this.cacheContainer.set(e,t),t;}return t;}query(e,t,n){return y(this,void 0,void 0,function*(){let a="__default__",r=this.getContainer(e),o=r.get(a);if(o)return o;if(t)try{let e=yield t();return r.set(a,e),e;}catch(e){}return n;});}clear(){this.cacheContainer.forEach(e=>{e.clear();});}}let E=T.GET_CACHE_INSTANCE(),C={querySchema:()=>y(void 0,void 0,void 0,function*(){return yield E.querySchema();}),queryFunctions:()=>y(void 0,void 0,void 0,function*(){return yield E.queryFunctions();})};var x=this&&this.__awaiter||function(e,t,n,a){return new(n||(n=Promise))(function(r,o){function l(e){try{s(a.next(e));}catch(e){o(e);}}function i(e){try{s(a.throw(e));}catch(e){o(e);}}function s(e){var t;e.done?r(e.value):((t=e.value)instanceof n?t:new n(function(e){e(t);})).then(l,i);}s((a=a.apply(e,t||[])).next());});};class _{constructor(e){this.worker=e;}get triggerCharacters(){return[".",":","|",""];}provideCompletionItems(e,t){return x(this,void 0,void 0,function*(){let n=e.getValue(),a=e.getOffsetAt(t),r=b(e.uri.toString());try{return yield this.worker.getService().doCompletion({code:n,offset:a,lowerCaseKeyword:r.lowerCaseKeyword},C);}catch(e){return{isIncomplete:!1,suggestions:[]};}});}}var S=this&&this.__awaiter||function(e,t,n,a){return new(n||(n=Promise))(function(r,o){function l(e){try{s(a.next(e));}catch(e){o(e);}}function i(e){try{s(a.throw(e));}catch(e){o(e);}}function s(e){var t;e.done?r(e.value):((t=e.value)instanceof n?t:new n(function(e){e(t);})).then(l,i);}s((a=a.apply(e,t||[])).next());});};class w{constructor(e){this.worker=e;}provideDocumentFormattingEdits(e){return S(this,void 0,void 0,function*(){let t=e.getValue();return[{range:e.getFullModelRange(),text:yield this.worker.getService().doFormat({code:t})}];});}}class I{constructor(e){this.worker=e;}provideDocumentRangeFormattingEdits(e,t){return S(this,void 0,void 0,function*(){let n=e.getValueInRange(t);return[{range:t,text:n}];});}}var k=this&&this.__awaiter||function(e,t,n,a){return new(n||(n=Promise))(function(r,o){function l(e){try{s(a.next(e));}catch(e){o(e);}}function i(e){try{s(a.throw(e));}catch(e){o(e);}}function s(e){var t;e.done?r(e.value):((t=e.value)instanceof n?t:new n(function(e){e(t);})).then(l,i);}s((a=a.apply(e,t||[])).next());});};class N{constructor(e){this.worker=e;}provideHover(e,t){return k(this,void 0,void 0,function*(){let n=e.getValue(),a=e.getOffsetAt(t);try{return{contents:((yield this.worker.getService().doHover({code:n,offset:a},C))||[]).map(e=>({value:e,isTrusted:!0,supportHtml:!0}))};}catch(e){return{contents:[],range:void 0};}});}}var L=n("d68eb4a8"),j=this&&this.__awaiter||function(e,t,n,a){return new(n||(n=Promise))(function(r,o){function l(e){try{s(a.next(e));}catch(e){o(e);}}function i(e){try{s(a.throw(e));}catch(e){o(e);}}function s(e){var t;e.done?r(e.value):((t=e.value)instanceof n?t:new n(function(e){e(t);})).then(l,i);}s((a=a.apply(e,t||[])).next());});};class O{constructor(e){this.worker=e;}getLegend(){return L.LEGEND;}provideDocumentSemanticTokens(e,t,n){return j(this,void 0,void 0,function*(){let t=e.getValue(),n=e.getLinesContent();try{let e=(yield this.worker.getService().doCodeLens({code:t,lines:n},C))||[];return{data:new Uint32Array(e)};}catch(e){return{data:new Uint32Array([])};}});}releaseDocumentSemanticTokens(e){}}var R=this&&this.__awaiter||function(e,t,n,a){return new(n||(n=Promise))(function(r,o){function l(e){try{s(a.next(e));}catch(e){o(e);}}function i(e){try{s(a.throw(e));}catch(e){o(e);}}function s(e){var t;e.done?r(e.value):((t=e.value)instanceof n?t:new n(function(e){e(t);})).then(l,i);}s((a=a.apply(e,t||[])).next());});};class D{constructor(e){this.worker=e;}get signatureHelpTriggerCharacters(){return["(",","];}provideSignatureHelp(e,t){return R(this,void 0,void 0,function*(){let n=e.getValue(),a=e.getOffsetAt(t)+1;try{let e=yield this.worker.getService().doProvideSignature({code:n,offset:a},C);if(e)return{value:e,dispose:()=>{}};return;}catch(e){return;}});}}var A=this&&this.__decorate||function(e,t,n,a){var r,o=arguments.length,l=o<3?t:null===a?a=Object.getOwnPropertyDescriptor(t,n):a;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)l=Reflect.decorate(e,t,n,a);else for(var i=e.length-1;i>=0;i--)(r=e[i])&&(l=(o<3?r(l):o>3?r(t,n,l):r(t,n))||l);return o>3&&l&&Object.defineProperty(t,n,l),l;},M=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t);},P=this&&this.__param||function(e,t){return function(n,a){t(n,a,e);};},U=this&&this.__awaiter||function(e,t,n,a){return new(n||(n=Promise))(function(r,o){function l(e){try{s(a.next(e));}catch(e){o(e);}}function i(e){try{s(a.throw(e));}catch(e){o(e);}}function s(e){var t;e.done?r(e.value):((t=e.value)instanceof n?t:new n(function(e){e(t);})).then(l,i);}s((a=a.apply(e,t||[])).next());});};let F=class{constructor(e,t){this.listener={},this.editorValidationMap=new Map,this.modelCreate=e=>{let t;let n=e.getLanguageId();if(n!==u.ID)return;let a=e.uri.toString();this.listener[a]=e.onDidChangeContent(()=>{clearTimeout(t);let a=Math.random();this.editorValidationMap.set(e.uri,a),t=window.setTimeout(()=>{this.doValidate(e,e.getValue(),n,a);},300);}),e.onWillDispose(()=>{var e;null===(e=this.listener[a])||void 0===e||e.dispose();});},this.LanguageWorker=e,this.LanguageOptions=t;let n=this.LanguageWorker.getLanguageWorker(u.ID)||"";this.worker=new c.ServiceWorkerClient(n);}init(){this.setupRealConfig();}setupRealConfig(){(0,g.default)(),d.languages.registerCompletionItemProvider(u.ID,new _(this.worker)),d.languages.registerSignatureHelpProvider(u.ID,new D(this.worker)),d.languages.registerDocumentFormattingEditProvider(u.ID,new w(this.worker)),d.languages.registerDocumentRangeFormattingEditProvider(u.ID,new I(this.worker)),d.languages.registerHoverProvider(u.ID,new N(this.worker)),d.languages.registerDocumentSemanticTokensProvider(u.ID,new O(this.worker));}doValidate(e,t,n,a){return U(this,void 0,void 0,function*(){let r=yield this.worker.getService().doValidate({code:t},C);a===this.editorValidationMap.get(e.uri)&&n===e.getLanguageId()&&d.editor.setModelMarkers(e,n,r);});}dispose(){}};F=A([(0,o.singleton)(),P(0,(0,o.inject)(i.LanguageWorkerRegistry)),P(1,(0,o.inject)(i.LanguageOptionsRegistry)),M("design:paramtypes",[i.LanguageWorkerRegistry,i.LanguageOptionsRegistry])],F);var G=this&&this.__decorate||function(e,t,n,a){var r,o=arguments.length,l=o<3?t:null===a?a=Object.getOwnPropertyDescriptor(t,n):a;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)l=Reflect.decorate(e,t,n,a);else for(var i=e.length-1;i>=0;i--)(r=e[i])&&(l=(o<3?r(l):o>3?r(t,n,l):r(t,n))||l);return o>3&&l&&Object.defineProperty(t,n,l),l;},B=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t);},q=this&&this.__param||function(e,t){return function(n,a){t(n,a,e);};};let K=class{constructor(e){this.languageFeature=e;}onInitialize(){d.languages.register({id:u.ID}),d.editor.onDidCreateModel(this.languageFeature.modelCreate),d.languages.onLanguage(u.ID,()=>{this.languageFeature.init();});}beforeCreate(){}afterCreate(){}canHandle(e){return e===u.ID;}dispose(){this.languageFeature.dispose();}};K=G([(0,o.singleton)({contrib:[i.EditorHandlerContribution,i.InitializeContribution]}),q(0,(0,o.inject)(F)),B("design:paramtypes",[F])],K);var W=n("ff47724e"),V=n("58b55345"),H=r._(V),Y=n("b53cfbd1"),$=a._(Y),z=(0,o.Module)(e=>{e(l.WorkerContribution),e(K),e(F),e(W.LightThemeContribution),e(W.DarkThemeContribution);});},"3ba80fd7":function(e,t,n){"use strict";n.d(t,"__esModule",{value:!0}),n.d(t,"default",{enumerable:!0,get:function(){return u;}});var a=n("777fffbe"),r=n("32b7a2cf"),o=a._(n("f02131d0")),l=a._(n("a8452b87")),i=a._(n("2b798761"));n("9113bc14");var s=a._(n("02b696d0")),d=n("c3ef8c6b"),u=s.default.memo(e=>{let{text:t="",onCopy:n,children:a,iconStyle:s,showTextInMessage:u,...c}=e,f=u?`${t}  `:"";return(0,r.jsx)(d.CopyToClipboard,{text:String(t),onCopy:(e,t)=>{null==n||n(e,t),i.default.success(o.default.get({id:"spg.components.CopyToClipboard.PrefixstrCopySucceeded",dm:"{prefixStr} \u590D\u5236\u6210\u529F"},{prefixStr:f}));},...c,children:a||(0,r.jsx)(l.default,{style:{fontSize:16,marginLeft:4,...s}})});});},"48a3d804":function(e,t,n){let a;n.d(t,"__esModule",{value:!0}),n.e(t,{default:function(){return tQ;}});var r,o,l,i,s,d=n("777fffbe"),u=n("852bbaa9"),c=n("32b7a2cf"),f=n("f02131d0"),g=d._(f),p=n("c5f39a1b"),h=d._(p),m=n("3cfb9603"),b=n("73d89cde"),y=n("02b696d0"),v=u._(y),T=n("02685c8b"),E=n("a80a5b6a"),C=n("514e4948"),x=n("4999aaae"),_=n("5b5ed4a9"),S=n("b0b84ad0"),w=d._(S),I=n("d5b565e0"),k=d._(I);n("ce896539");var N=n("0c8a2b89"),L=d._(N);n("2368b7e1");var j="tabsContainer-S27-SWZa";let O=e=>{let{projectId:t}=m.URLParams,{taskInfo:n}=e,{jobName:a}=n??{};return(0,c.jsx)("header",{className:"headerContainer-rrG3qL1U",children:(0,c.jsx)(L.default,{title:g.default.get({id:"spg.KnowledgeDetails.HeaderBar.ClickMeToReturnTo",dm:"\u70B9\u51FB\u6211, \u53EF\u8FD4\u56DE\u5230\u77E5\u8BC6\u7BA1\u7406\u5217\u8868\u9875"}),children:(0,c.jsx)(k.default,{className:"goBackBtnContainer-c2sEOdvR",type:"text",icon:(0,c.jsx)(w.default,{className:"icon-jvQHp4Bq"}),onClick:()=>{_.history.push(`/knowledgeModeling/knowledgeTask?projectId=${t}`);},children:a})})});};var R=n("f86e90ef"),D=n("e6fc687f"),A=d._(D);n("74bade4e");var M=n("85d9e535"),P=d._(M);let U=e=>{let{defaultBg:t=!0,defaultPadding:n=!0,children:a}=e;return(0,c.jsx)("div",{className:(0,P.default)("cardWrapperContainer-sb4416UY",{"defaultBg-DMVZE01h":!!t,"defaultPadding-pUXZNb24":!!n}),children:a});};(r=s||(s={})).BASE="base",r.LOG="log",r.EXTRACTION_EFFECT="extractionEffect",r.EXTRACTION_KNOWLEDGE__MODEL="extractionKnowledgeModel";var F=n("7acbc698"),G=n("bcda4f95"),B=n("490840b0"),q=d._(B),K=n("22b588a5"),W=n("ffaa3da9"),V=n("4d0e37ae"),H=u._(V);let Y=()=>({renderDownloadFileLink:(e="",t)=>(0,c.jsx)("a",{onClick:()=>window.open(e,"_blank"),children:t??e})});var $=n("b2eda3a1"),z=n("4fc779c0"),X=n("80411155"),Q=d._(X);n("82c067a0");var Z=n("cc983a81"),J=d._(Z);n("5b764170");var ee=n("b916d24f"),et=d._(ee);n("5ab73bad");var en=n("7576484b"),ea=d._(en);n("dd2a96cb");var er=n("6d1765ea"),eo=d._(er);n("6175f9d0");var el=n("93b3369a");let ei=e=>{let{nodes:t=[],edges:n=[]}=e??{};if(!(!Array.isArray(t)||(0,el.isEmpty)(t)))return t.forEach(e=>{var t;(null===(t=e.properties)||void 0===t?void 0:t.status)===K.SchedulerEnumTaskStatus.TERMINATE&&(e.properties.status=K.SchedulerEnumTaskStatus.ERROR);}),{nodes:t.map(e=>({...e,label:null==e?void 0:e.name,data:null==e?void 0:e.properties})),edges:null==n?void 0:n.map(e=>({source:e.from,target:e.to,id:`${e.from}-${e.to}`}))};},es=e=>{let{dataSourceType:t}=e??{};return t??"";},ed=e=>{var t;let{parsedExtension:n}=e??{},{mappingConfig:a}=n??{},{config:r}=a??{};return null==r?void 0:null===(t=r[0])||void 0===t?void 0:t.name;},eu=e=>{let{type:t,parsedExtension:n}=e??{},{dataSourceConfig:a}=n??{};return t===K.DATA_SOURCE_TYPE_ENUM.FILE_EXTRACT&&(null==a?void 0:a.structure)||[K.DATA_SOURCE_TYPE_ENUM.BATCH,K.DATA_SOURCE_TYPE_ENUM.STREAM].includes(t)&&(null==a?void 0:a.structure)?(null==a?void 0:a.columns)??[]:[];};var ec={mappingGraphContent:"mappingGraphContent-EjaU2ZCS",mappingGraphContainer:"mappingGraphContainer-miha85u0",itemLabel:"itemLabel-sfMJFxZd",basePanelContentContainer:"basePanelContentContainer-9-RjSE99",mappingConfigContainer:"mappingConfigContainer-fiyZMQ52"};let{Title:ef,Text:eg}=eo.default,ep=e=>{let t=(0,_.getLocale)(),{taskInfo:n}=e,{jobName:a,createUser:r,gmtCreate:o,status:l,fileUrl:i,type:s,lifeCycle:d,parsedExtension:u,dataSourceType:f}=n??{},{dataSourceConfig:p,mappingConfig:m}=u??{},{columns:b}=p??{},{columns:y}=p??{},{mappingType:E,filter:C,config:x}=m??{},{s:S,p:w}=(null==C?void 0:C[0])??{},{mapping:I}=(null==x?void 0:x[0])??{},{renderDownloadFileLink:k}=Y(),{data:N=F.DEFAULT_GRAPH_DATA,isLoading:L}=(0,G.useSchemaData)(),j=(0,v.useMemo)(()=>{var e,t,n;return null===(n=b??y)||void 0===n?void 0:null===(t=n.map(e=>null==e?void 0:e.name))||void 0===t?void 0:null===(e=t.filter(Boolean))||void 0===e?void 0:e.join(", ");},[b,y]),O=(0,v.useMemo)(()=>{let e=[{itemLabel:g.default.get({id:"spg.StructuredContent.BasePanelContent.NameOfKnowledge",dm:"\u77E5\u8BC6\u540D\u79F0"}),itemValue:(0,$.renderWithDefaultText)(a)},{itemLabel:g.default.get({id:"spg.StructuredContent.BasePanelContent.Creator",dm:"\u521B\u5EFA\u4EBA"}),itemValue:(0,$.renderWithDefaultText)(r)},{itemLabel:g.default.get({id:"spg.StructuredContent.BasePanelContent.CreationTime",dm:"\u521B\u5EFA\u65F6\u95F4"}),itemValue:(0,$.renderWithDefaultText)(o)},{itemLabel:g.default.get({id:"spg.StructuredContent.BasePanelContent.Status",dm:"\u72B6\u6001"}),itemValue:(0,c.jsx)(q.default,{status:l})},{itemLabel:g.default.get({id:"spg.StructuredContent.BasePanelContent.ImportMethod",dm:"\u5BFC\u5165\u65B9\u5F0F"}),itemValue:d??""},{itemLabel:g.default.get({id:"spg.StructuredContent.BasePanelContent.DocumentType",dm:"\u6587\u6863\u7C7B\u578B"}),itemValue:(0,$.renderWithDefaultText)(K.FILE_TYPE_LOCAL_MAP[s??""]||f)}],t={itemLabel:g.default.get({id:"spg.StructuredContent.BasePanelContent.UploadDocument",dm:"\u4E0A\u4F20\u6587\u6863"}),itemValue:k(i),customTip:g.default.get({id:"spg.StructuredContent.BasePanelContent.ClickOnMeToDownload",dm:"\u70B9\u51FB\u6211\u53EF\u4E0B\u8F7D\u6587\u4EF6"})},n={itemLabel:g.default.get({id:"spg.StructuredContent.BasePanelContent.ImportFields",dm:"\u5BFC\u5165\u5B57\u6BB5"}),itemValue:(0,$.renderWithDefaultText)(j)};if(s===K.DATA_SOURCE_TYPE_ENUM.FILE_EXTRACT)return e.concat(t,n);if(s===K.DATA_SOURCE_TYPE_ENUM.BATCH){let t={dataSource:g.default.get({id:"spg.StructuredContent.BasePanelContent.AccountName",dm:"\u8D26\u53F7\u540D\u79F0"}),database:g.default.get({id:"spg.StructuredContent.BasePanelContent.NameOfProject",dm:"\u6240\u5728\u9879\u76EE\u540D\u79F0"}),table:g.default.get({id:"spg.StructuredContent.BasePanelContent.TableName",dm:"\u8868\u540D"}),partition:g.default.get({id:"spg.StructuredContent.BasePanelContent.Zoning",dm:"\u5206\u533A"})},a=["dataSource","database","table","partition"].map(e=>{if("dataSource"===e){let n=(0,$.json2Object)(null==p?void 0:p.dataSource);return{itemLabel:t[e],itemValue:(0,$.renderWithDefaultText)(null==n?void 0:n.dbName)};}return{itemLabel:t[e],itemValue:(0,$.renderWithDefaultText)(null==p?void 0:p[e])};});return e.concat(...a,n);}if(s===K.DATA_SOURCE_TYPE_ENUM.STREAM){let t=(0,$.json2Object)(null==p?void 0:p.dataSource),a={itemLabel:g.default.get({id:"spg.StructuredContent.BasePanelContent.AccountName",dm:"\u8D26\u53F7\u540D\u79F0"}),itemValue:(0,$.renderWithDefaultText)(null==t?void 0:t.dbName)};return e.concat(a,n);}return e;},[a,r,o,l,i,f,p]);return(0,c.jsxs)("div",{className:ec.basePanelContentContainer,children:[(0,c.jsxs)(Q.default,{children:[(0,c.jsx)(ef,{level:5,children:g.default.get({id:"spg.StructuredContent.BasePanelContent.BasicInformation",dm:"\u57FA\u7840\u4FE1\u606F"})}),(0,c.jsx)(ea.default,{wrap:!0,gutter:[24,12],children:O.map(({itemLabel:e,itemValue:t,customTip:n},a)=>(0,c.jsx)(J.default,{span:6,children:(0,c.jsxs)(eg,{ellipsis:{tooltip:n||t},children:[(0,c.jsx)("span",{className:(0,h.default)(ec.itemLabel),children:e}),(0,v.isValidElement)(t)?t:(0,c.jsx)("span",{children:t})]})},a))})]}),(0,c.jsxs)(Q.default,{className:ec.mappingConfigContainer,bodyStyle:{display:"flex",flexDirection:"column",height:"100%"},children:[(0,c.jsx)(ef,{level:5,children:g.default.get({id:"spg.StructuredContent.BasePanelContent.MappingConfiguration",dm:"\u6620\u5C04\u914D\u7F6E"})}),(0,el.isEmpty)(m)?(0,c.jsx)(et.default,{image:et.default.PRESENTED_IMAGE_SIMPLE}):(0,c.jsx)("div",{className:ec.mappingGraphContainer,children:(0,c.jsx)(z.MappingGraph,{className:ec.mappingGraphContent,locale:t,loading:L,sourceData:{id:"sourceNode",label:es(n),type:"sourceNode",x:120,y:70,data:{propertyDataSource:eu(n)}},targetData:{id:"targetNode",label:ed(n),type:"targetNode",x:460,y:70,data:{requiredProperty:(0,T.getRequiredProperty)(E),propertyDataSource:(0,W.getMappingPropertyList)(E,N,E===K.MAPPING_TYPE_ENUM.SCHEMA_MAPPING?S:w)}},value:I,options:{onlyPreview:!0,showFullScreenBtn:!0}})})]})]});};var eh=n("341ea61c"),em=d._(eh),eb=n("dad61df1"),ey=d._(eb);n("41933a94");var ev=n("05ecbb5b");async function eT(e,t){return(0,ev.request)("/public/v1/scheduler/instance/getById",{method:"GET",params:{...e},...t||{}});}async function eE(e,t){return(0,ev.request)("/public/v1/scheduler/instance/search",{method:"POST",headers:{"Content-Type":"application/json"},data:e,...t||{}});}async function eC(e,t){return(0,ev.request)("/public/v1/scheduler/task/search",{method:"POST",headers:{"Content-Type":"application/json"},data:e,...t||{}});}let ex=e=>{let{requestParams:t}=e??{},n=(0,_.useQuery)({queryKey:["KnowledgeModeling/job/getInstanceById",t],queryFn:async()=>{let e=await eT({...t}),{success:n,result:a}=e??{};return!n||(0,el.isEmpty)(a)?Promise.reject(e):a;},enabled:!(0,el.isNil)(null==t?void 0:t.id)}),a=n.data;return{...n,data:a};},e_=e=>{let{requestParams:t}=e??{},n=(0,_.useQuery)({queryKey:["KnowledgeModeling/job/searchTasks",t],queryFn:async()=>{let e=await eC({...t}),{success:n,result:a}=e??{};return!n||(0,el.isEmpty)(a)?Promise.reject(e):a;},enabled:!(0,el.isNil)(null==t?void 0:t.instanceId)}),a=n.data;return{...n,data:a};},eS={pageIdx:1,pageSize:20,total:20,results:[]},ew=e=>{let{requestParams:t}=e??{},n=(0,_.useQuery)({queryKey:["KnowledgeModeling/instance/searchInstances",t],queryFn:async()=>{let e=await eE({...t}),{success:n,result:a}=e??{};return!n||(0,el.isEmpty)(a)?Promise.reject(e):a;},enabled:!!t}),a=(0,el.defaults)(n.data,eS);return{...n,data:a};};var eI=n("7648835d"),ek=d._(eI);n("bef9aebb");let eN={[K.SchedulerEnumTaskStatus.WAIT]:"wait",[K.SchedulerEnumTaskStatus.RUNNING]:"process",[K.SchedulerEnumTaskStatus.SKIP]:"finish",[K.SchedulerEnumTaskStatus.TERMINATE]:"finish",[K.SchedulerEnumTaskStatus.SET_FINISH]:"finish",[K.SchedulerEnumTaskStatus.FINISH]:"success",[K.SchedulerEnumTaskStatus.ERROR]:"error"};var eL={flowStepsContainer:"flowStepsContainer-qfV_Bw1g",flowStepsContent:"flowStepsContent-YbQ0KxY8"};let ej=e=>({[K.SchedulerEnumTaskStatus.WAIT]:g.default.get({id:"spg.components.WorkFlowLog.utils.WaitForExecution",dm:"\u7B49\u5F85\u6267\u884C"}),[K.SchedulerEnumTaskStatus.RUNNING]:g.default.get({id:"spg.components.WorkFlowLog.utils.InExecution",dm:"\u6267\u884C\u4E2D"}),[K.SchedulerEnumTaskStatus.SKIP]:g.default.get({id:"spg.components.WorkFlowLog.utils.SkipExecution",dm:"\u8DF3\u8FC7\u6267\u884C"}),[K.SchedulerEnumTaskStatus.TERMINATE]:g.default.get({id:"spg.components.WorkFlowLog.utils.ManualTermination",dm:"\u624B\u52A8\u7EC8\u6B62"}),[K.SchedulerEnumTaskStatus.SET_FINISH]:g.default.get({id:"spg.components.WorkFlowLog.utils.ManualSettingSuccess",dm:"\u624B\u52A8\u7F6E\u6210\u529F"}),[K.SchedulerEnumTaskStatus.FINISH]:g.default.get({id:"spg.components.WorkFlowLog.utils.ExecutionComplete",dm:"\u6267\u884C\u5B8C\u6210"}),[K.SchedulerEnumTaskStatus.ERROR]:g.default.get({id:"spg.components.WorkFlowLog.utils.ExecutionException",dm:"\u6267\u884C\u5F02\u5E38"})})[e??""]??"",eO=e=>{let{loading:t=!1,logsData:n,logScrollId:a,afterScroll:r}=e;(0,v.useEffect)(()=>{if(!(0,el.isNil)(a)&&!(0,el.isEmpty)(n)){var e;null===(e=document.getElementById(a))||void 0===e||e.scrollIntoView(),null==r||r();}},[a,r]);let o=(0,R.useMemoizedFn)(()=>null==n?void 0:n.map((e,t)=>{var n,a;return{title:(0,c.jsxs)("span",{id:String((null==e?void 0:e.nodeId)??t),children:[null==e?void 0:e.title,(null==e?void 0:e.status)&&(0,c.jsxs)("span",{style:{fontSize:12},children:["\uFF08",ej((null==e?void 0:null===(n=e.status)||void 0===n?void 0:n.toUpperCase())??""),"\uFF09"]})]}),status:eN[(null==e?void 0:null===(a=e.status)||void 0===a?void 0:a.toUpperCase())??""],description:(0,c.jsxs)(c.Fragment,{children:[(0,c.jsxs)("p",{children:[g.default.get({id:"spg.components.WorkFlowLog.ScheduledTimes",dm:"\u5DF2\u8C03\u5EA6\u6B21\u6570 \uFF1A"}),null==e?void 0:e.executeNum]}),(0,c.jsx)("pre",{children:null==e?void 0:e.traceLog})]})};}));return(0,c.jsxs)("div",{className:eL.flowStepsContainer,children:[(0,c.jsx)(b.OverlaySpin,{spinning:t}),(0,el.isEmpty)(n)?(0,c.jsx)(et.default,{image:et.default.PRESENTED_IMAGE_SIMPLE,description:g.default.get({id:"spg.components.WorkFlowLog.NoExecutionLog",dm:"\u6682\u65E0\u6267\u884C\u65E5\u5FD7"})}):(0,c.jsx)(ek.default,{progressDot:!0,current:1,direction:"vertical",className:eL.flowStepsContent,items:o()})]});};var eR=n("1043743b"),eD=d._(eR),eA=n("6465f56d"),eM=n("4ef94126"),eP=n("5f40b615"),eU=n("3bc4ba1c"),eF=n("593c6e64"),eG=((o={}).CUSTOM_NODE="kg-workflow-node",o.CUSTOM_EDGE="kg-workflow-edge",o),eB=((l={}).ON_LOG_LOCK="onLogClick",l),eq=((i={}).WAIT="WAIT",i.RUNNING="RUNNING",i.FINISH="FINISH",i.ERROR="ERROR",i);eU.Graph.registerConnector("curveConnector",function(e,t){var n=Math.abs(t.x-e.x),a=new eU.Path;return a.appendSegment(eU.Path.createSegment("M",e.x,e.y)),a.appendSegment(eU.Path.createSegment("C",e.x+n/4,e.y,t.x-n/2,t.y,t.x,t.y)),a.serialize();},!0),eU.Edge.config({markup:[{tagName:"path",selector:"wrap",attrs:{fill:"none",cursor:"pointer",stroke:"transparent",strokeLinecap:"round"}},{tagName:"path",selector:"line",attrs:{fill:"none",pointerEvents:"none"}}],connector:{name:"curveConnector"},attrs:{wrap:{connection:!0,strokeWidth:10,strokeLinejoin:"round"},line:{connection:!0,stroke:"#d3d3d3",strokeWidth:1,targetMarker:{name:"block",size:7}}}});var eK=n("e169cea0"),eW=d._(eK),eV=n("40ebb84c"),eH=n("b1d5aac5"),eY=n("5b3ac6b1"),e$=d._(eY),ez=function(e){var t=(0,eW.default)((0,eW.default)((0,eW.default)((0,eW.default)({},eq.WAIT,(0,eM.formatMessage)({id:"work-flow-status-waiting"})),eq.RUNNING,(0,eM.formatMessage)({id:"work-flow-status-in-progress"})),eq.FINISH,(0,eM.formatMessage)({id:"work-flow-status-completed"})),eq.ERROR,(0,eM.formatMessage)({id:"work-flow-status-error"}));return e&&t[e]?t[e]:"";},eX=function(e,t){var n=e.id,a=!t.some(function(e){return e.target===n;}),r=!t.some(function(e){return e.source===n;}),o={groups:(0,eD.default)((0,eD.default)({},!a&&{in:{position:"left",attrs:{circle:{r:4,magnet:!0,stroke:"#ccc",fill:"#fff"}}}}),!r&&{out:{position:"right",attrs:{circle:{r:4,magnet:!0,stroke:"#ccc",fill:"#fff"}}}}),items:[].concat((0,e$.default)(a?[]:[{group:"in",id:"in-".concat(n)}]),(0,e$.default)(r?[]:[{group:"out",id:"out-".concat(n)}]))};return(0,eD.default)((0,eD.default)({},e),{},{shape:eG.CUSTOM_NODE,ports:o});},eQ=function(e){var t=e.source,n=e.target;return(0,eD.default)((0,eD.default)({},e),{},{shape:eG.CUSTOM_EDGE,source:{cell:t,port:"out-".concat(t)},target:{cell:n,port:"in-".concat(n)}});},eZ="akg-extension-components-work-flow-link-node",eJ=eo.default.Text,e0=function(e){var t=(0,eF.useIntl)().formatMessage,n=e.node,a=e.graph,r=n.prop(),o=r.label,l=r.data,i=null!=l?l:{},s=i.name,d=String(i.status).toUpperCase(),u=(0,P.default)((0,eW.default)((0,eW.default)((0,eW.default)((0,eW.default)({},"bg-wait",d===eq.WAIT),"bg-running",d===eq.RUNNING),"bg-finish",d===eq.FINISH),"bg-error",d===eq.ERROR)),f=function(){a.trigger(eB.ON_LOG_LOCK,r);};return(0,c.jsxs)("div",{className:(0,P.default)(eZ,u),children:[(0,c.jsxs)("div",{className:"".concat(eZ,"-content"),children:[(0,c.jsx)(eJ,{className:"".concat(eZ,"-content-title"),ellipsis:{tooltip:!0},children:null!=o?o:s}),d===eq.FINISH&&(0,c.jsx)(L.default,{title:t({id:"work-flow-link-completed-log"}),children:(0,c.jsx)("span",{className:(0,P.default)("".concat(eZ,"-content-log"),"text-finish"),onClick:f,children:t({id:"work-flow-status-log"})})}),d===eq.ERROR&&(0,c.jsx)(L.default,{title:t({id:"work-flow-link-error-log"}),children:(0,c.jsx)("span",{className:(0,P.default)("".concat(eZ,"-content-log"),"text-error"),onClick:f,children:t({id:"work-flow-status-error-details"})})})]}),d&&(0,c.jsx)("div",{className:(0,P.default)("".concat(eZ,"-result"),(0,eW.default)((0,eW.default)((0,eW.default)((0,eW.default)({},"text-wait",d===eq.WAIT),"text-running",d===eq.RUNNING),"text-finish",d===eq.FINISH),"text-error",d===eq.ERROR)),children:ez(d)})]});};(0,eH.register)({shape:eG.CUSTOM_NODE,width:210,height:65,component:function(e){var t=(0,v.useMemo)(function(){return(0,eM.getLocale)();},[]);return(0,c.jsx)(eV.IntlProvider,{locale:t,children:(0,c.jsx)(e0,(0,eD.default)({},e))});}}),eU.Graph.registerEdge(eG.CUSTOM_EDGE,eU.Edge);var e1="akg-extension-components-work-flow-link",e2=new eP.DagreLayout({type:"dagre",rankdir:"LR",nodesep:50,ranksep:70}),e5=function(e){var t,n=e.className,a=e.style,r=e.locale,o=void 0===r?eA.LanguageEnum.ZH_CN:r,l=e.autoResize,i=void 0!==l&&l,s=e.loading,d=void 0!==s&&s,u=e.graphData,f=e.graphOptions,g=e.onLogClick,p=(0,eF.useIntl)().formatMessage,h=(0,v.useRef)(null),m=(0,v.useRef)(),y=!(null!=u&&null!==(t=u.nodes)&&void 0!==t&&t.length);return(0,R.useMount)(function(){if(h.current){var e=new eU.Graph((0,eD.default)({container:h.current,autoResize:i,panning:!0},f));e.on(eB.ON_LOG_LOCK,function(e){null==g||g(e);}),m.current=e,m.current.center();}}),(0,R.useUnmount)(function(){var e;null===(e=m.current)||void 0===e||e.dispose();}),(0,v.useEffect)(function(){if(m.current){var e=null!=u?u:{},t=e.nodes,n=e.edges,a=void 0===n?[]:n,r=(void 0===t?[]:t).map(function(e){return eX(e,a);}),o=a.map(eQ),l=e2.layout({nodes:r,edges:o});m.current.fromJSON(l);}},[u]),(0,v.useEffect)(function(){o&&(0,eM.setLocale)(o);},[o]),(0,c.jsxs)("div",{className:[e1,i&&"".concat(e1,"-auto-size"),n].filter(Boolean).join(" "),style:(0,eD.default)({},a),children:[(0,c.jsx)(b.OverlaySpin,{spinning:d}),y&&(0,c.jsx)(et.default,{className:"".concat(e1,"-empty"),image:et.default.PRESENTED_IMAGE_SIMPLE,description:p(d?{id:"work-flow-status-loading"}:{id:"work-flow-status-no-progress"})}),(0,c.jsx)("div",{ref:h})]});},e3="sectionTitle-jPSugr28";let e6=e=>{let t=(0,_.getLocale)(),{fetchWorkflowConfigLoading:n=!1,fetchLogsDataLoading:a=!1,workflowConfig:r,logsData:o}=e,[l,i]=(0,v.useState)();return(0,c.jsxs)("div",{className:"runLogContainer-V6cmL_29",children:[(0,c.jsxs)("section",{className:"progressSection-4VTs-S7o",children:[(0,c.jsx)("h2",{className:e3,children:g.default.get({id:"spg.components.RunLog.ExecutionProgress",dm:"\u6267\u884C\u8FDB\u5EA6"})}),(0,c.jsx)("div",{className:"progressContent-poSQ7JWk",children:(0,c.jsx)(e5,{locale:t,autoResize:!0,loading:n,graphData:r,onLogClick:e=>{i(null==e?void 0:e.id);}})})]}),(0,c.jsxs)("section",{className:"logSection-yNRxXvFE",children:[(0,c.jsx)("h2",{className:e3,children:g.default.get({id:"spg.components.RunLog.ExecutionLog",dm:"\u6267\u884C\u65E5\u5FD7"})}),(0,c.jsx)("div",{className:"logContent-3l4dylq9",children:(0,c.jsx)(eO,{loading:a,logScrollId:l,logsData:o,afterScroll:()=>{i(void 0);}})})]})]});},e4=H.default.memo(({type:e,className:t,style:n,fontFamily:a="iconfontAkg"})=>(0,c.jsx)("span",{className:`${a} ${e} ${t}`,style:n})),e9=e=>{let{className:t,style:n,isExpand:a,onExpandClick:r}=e;return(0,c.jsx)("div",{className:(0,h.default)("expandIconContainer-_7SOjZy4",t),style:{...n},onClick:r,children:a?(0,c.jsx)(e4,{type:"iconAkg-left"}):(0,c.jsx)(e4,{type:"iconAkg-right"})});};var e7="itemValue-ltBdvj1m",e8="itemLabel-zvZr-Rhr",te=n("249809ea"),tt=d._(te);n("941d73ec");var tn=n("c7f4f8e9"),ta=d._(tn);n("983ea648");var tr=n("fc7b6873"),to=d._(tr),tl="activated-DU9Pa8zA";let{Link:ti,Text:ts}=eo.default,td=e=>{let{className:t,dataSource:n,pagination:a,onActiveTableRowClick:r,...o}=e,[l,i]=(0,R.useControllableValue)(e,{defaultValuePropName:"defaultActiveTableRowKey",valuePropName:"activeTableRowKey",trigger:"onActiveTableRowClick"}),s=[{title:g.default.get({id:"spg.LogPanelContent.TaskInstanceTable.InstanceList",dm:"\u5B9E\u4F8B\u5217\u8868"}),dataIndex:"_id",ellipsis:!0,width:150,render:(e,t)=>(0,c.jsxs)(tt.default,{direction:"vertical",className:(0,h.default)("tableCellContainer-1YfX5dAQ",{[tl]:l===(null==t?void 0:t.id)}),onClick:()=>{i(null==t?void 0:t.id);},children:[(0,c.jsx)(ti,{className:(0,h.default)("taskId-R55oFi-n",{[tl]:l===(null==t?void 0:t.id)}),children:"ID: "+(0,$.renderWithDefaultText)(null==t?void 0:t.id)}),(0,c.jsx)(ts,{className:"timeContainer-8fmFCyA-",children:(0,$.renderWithDefaultText)(null==t?void 0:t.schedulerDate)})]})}],d=null==n?void 0:n.map(e=>({...e,_id:(0,to.default)()}));return(0,c.jsx)(ta.default,{className:(0,h.default)("taskInstanceTableContainer-lLLNfVWM",t),rowKey:(e,t)=>e._id??t,scroll:{x:"max-content"},columns:s,dataSource:d,pagination:(0,el.defaults)(a,{pageSizeOptions:[20,50,100],showSizeChanger:!1}),...o});},{Title:tu}=eo.default,tc=e=>{var t;let{taskInfo:n}=e,[a,r]=(0,v.useState)(!0),[o,l]=(0,v.useState)({pageNo:1,pageSize:20}),[i,s]=(0,v.useState)(),{isLoading:d,data:u}=ew({requestParams:{jobId:null==n?void 0:n.taskId,...o},refetchOnMount:!1}),{total:f,results:p}=u,m=null==p?void 0:p.find(e=>e.id===i),{data:b,isLoading:y}=ex({requestParams:{id:null==m?void 0:m.id}}),{data:T,isLoading:E}=e_({requestParams:{instanceId:null==m?void 0:m.id}});return(0,v.useEffect)(()=>{var e;!(0,em.default)(p)&&(0,el.isNil)(i)&&s(null==p?void 0:null===(e=p[0])||void 0===e?void 0:e.id);},[i,p]),(0,c.jsxs)("div",{className:"logPanelContentContainer-l63UM80t",children:[(0,c.jsx)(td,{className:(0,h.default)("asideContainer-XjfQnDhp",{"noExpand-iVRaRo4a":!a}),loading:d,dataSource:p,pagination:{total:f,current:o.pageNo,pageSize:o.pageSize,onChange:e=>{l(t=>({...t,pageNo:e}));}},activeTableRowKey:i,onActiveTableRowClick:s}),(0,c.jsxs)("div",{className:"mainContainer-ZwuObFeW",children:[(0,c.jsx)(e9,{className:"expandIcon--3oOgFHs",isExpand:a,onExpandClick:()=>r(!a)}),(0,c.jsxs)("header",{className:"header-kP8IRibr",children:[(0,c.jsx)(tu,{level:5,children:g.default.get({id:"spg.StructuredContent.LogPanelContent.BasicInformation",dm:"\u57FA\u672C\u4FE1\u606F"})}),(0,c.jsxs)("section",{className:"content-VGXjYsb0",children:[(0,c.jsxs)("div",{children:[(0,c.jsx)("span",{className:e8,children:g.default.get({id:"spg.StructuredContent.LogPanelContent.CreationTime",dm:"\u521B\u5EFA\u65F6\u95F4"})}),(0,c.jsx)("span",{className:e7,children:(0,$.renderWithDefaultText)(null==m?void 0:m.gmtCreate)})]}),(0,c.jsxs)("div",{children:[(0,c.jsx)("span",{className:e8,children:g.default.get({id:"spg.StructuredContent.LogPanelContent.CompletionTime",dm:"\u5B8C\u6210\u65F6\u95F4"})}),(0,c.jsx)("span",{className:e7,children:(0,$.renderWithDefaultText)(null==m?void 0:m.gmtCreate)})]}),(0,c.jsxs)("div",{children:[(0,c.jsx)("span",{className:e8,children:g.default.get({id:"spg.StructuredContent.LogPanelContent.SchedulingLogic",dm:"\u8C03\u5EA6\u903B\u8F91"})}),(0,c.jsx)("span",{className:e7,children:(0,$.renderWithDefaultText)(K.JOB_MERGE_MODE_ENUM_LOCAL_MAP[(null==m?void 0:m.dependence)??""])})]}),(0,c.jsxs)("div",{children:[(0,c.jsx)("span",{className:e8,children:g.default.get({id:"spg.StructuredContent.LogPanelContent.CycleFrequency",dm:"\u5468\u671F\u9891\u6B21"})}),(0,c.jsx)("span",{className:e7,children:(null==m?void 0:m.lifeCycle)??""})]}),(0,c.jsxs)("div",{children:[(0,c.jsx)("span",{className:e8,children:g.default.get({id:"spg.StructuredContent.LogPanelContent.Status",dm:"\u72B6\u6001"})}),(0,c.jsx)("span",{className:e7,children:(0,$.renderWithDefaultText)(K.JOB_STATUS_LOCAL_MAP[(null==m?void 0:m.status)??""])})]}),(0,c.jsxs)("div",{children:[(0,c.jsx)("span",{className:e8,children:"uniqueId"}),(0,c.jsx)("span",{className:e7,children:(0,$.renderWithDefaultText)(null==m?void 0:m.uniqueId)})]})]})]}),(0,c.jsx)(ey.default,{}),(0,c.jsx)(e6,{fetchWorkflowConfigLoading:y,fetchLogsDataLoading:E,workflowConfig:ei(null==b?void 0:b.taskDag),logsData:null==T?void 0:null===(t=T.results)||void 0===t?void 0:t.reverse()})]})]});},tf=e=>{let{taskInfo:t}=e,[n,a]=(0,v.useState)(s.BASE);return(0,c.jsx)(A.default,{className:j,activeKey:n,onChange:e=>{a(e);},items:[{key:s.BASE,label:g.default.get({id:"spg.KnowledgeDetails.StructuredContent.BasicConfiguration",dm:"\u57FA\u672C\u914D\u7F6E"}),children:(0,c.jsx)(U,{defaultBg:!1,defaultPadding:!1,children:(0,c.jsx)(ep,{taskInfo:t})})},{key:s.LOG,label:g.default.get({id:"spg.KnowledgeDetails.StructuredContent.ExecutionLog",dm:"\u6267\u884C\u65E5\u5FD7"}),children:(0,c.jsx)(U,{defaultPadding:!1,children:(0,c.jsx)(tc,{taskInfo:t})})}]});};var tg=n("52fb4bb8"),tp=n("c72fc2b9"),th=n("51196c4f"),tm=n("d2704ec9");let tb=(e,t)=>{let n=(0,tm.transformRelationGraphData)({nodes:e.entityTypeDTOList||[],edges:e.relationTypeDTOList||[]}),a=t.nodes.map(e=>String(e.id)),r=n.nodes.filter(e=>!a.includes(String(e.id)))||[],o={};n.nodes.filter(e=>a.includes(String(e.id))).forEach(e=>{o[String(e.id)]=e;});let l=t.edges.map(e=>String(e.id)),i=n.edges.filter(e=>!l.includes(String(e.id)))||[],s={};n.edges.filter(e=>l.includes(String(e.id))).forEach(e=>{s[String(e.id)]=e;});let d={},u={};return{mergeSchema:{nodes:t.nodes.map(e=>{let t=o[String(e.id)];if(t){let n={...e,...t,id:String(t.id),propertyList:(e.propertyList||[]).concat((t.propertyList||[]).map(e=>({...e,isLLMExtract:!0}))),operation:"U",myDraft:!0};return d[String(e.id)]=n,n;}return e;}).concat(r.map(e=>{let t={...e,id:String(e.id),virtual:!0,isLLMExtract:!0};return d[String(e.id)]=t,t;})),edges:t.edges.map(e=>{let t=s[String(e.id)];if(t){let n={...e,...t,id:String(t.id),propertyList:(e.propertyList||[]).concat((t.propertyList||[]).map(e=>({...e,isLLMExtract:!0}))),operation:"U",myDraft:!0};return u[String(e.id)]=n,n;}return e;}).concat(i.map(e=>{let t={...e,virtual:!0,isLLMExtract:!0};return u[String(e.id)]=t,t;}))},nodeDetails:d,edgeDetails:u};};var ty=n("8e68a90d");let tv=e=>{let{record:t={}}=e,[{schemaTreeData:n,schemaData:a}]=(0,tg.useProxyState)(ty.knowledgeModelDataState),{data:r={fetchDiffErr:!1,diff:void 0,subGraph:void 0},isFetching:o}=(0,_.useQuery)(["knowledgeExtractResult",t.taskId],async()=>{let e=await (0,th.builderQuery)({request:{id:t.taskId,jobId:t.id}});if(null==e?void 0:e.success){var n,a;let r={resultNodes:(null===(n=e.result)||void 0===n?void 0:n.resultNodes)||[],resultEdges:(null===(a=e.result)||void 0===a?void 0:a.resultEdges)||[]};return{diff:(await (0,tp.schemaDiff)({subGraph:r,job:t})).result||{entityTypeDTOList:[],relationTypeDTOList:[]},subGraph:r,fetchDiffErr:!1};}return{fetchDiffErr:!0,diff:void 0,subGraph:void 0};},{enabled:!!t.taskId}),{diff:l={entityTypeDTOList:[],relationTypeDTOList:[]},subGraph:i={resultNodes:[],resultEdges:[]}}=r,{diffSchema:s}=(0,H.useMemo)(()=>{let{mergeSchema:e,nodeDetails:t,edgeDetails:n}=tb(l,a);return{diffSchema:e,hasDiff:Object.keys(t).length||Object.keys(n).length};},[a,l]);return{diffSchema:s,schemaTree:n,graphLoading:o,subGraph:i};};var tT=n("640ee7d6"),tE=n("1e70bad6"),tC=d._(tE);let tx=e=>{let{graphLoading:t,diffSchema:n,subGraph:a}=e;return(0,c.jsx)(c.Fragment,{children:(0,c.jsx)(tC.default,{spinning:t,wrapperClassName:"spin-uW47lPIb",children:(0,c.jsx)(tT.GraphView,{graphData:{nodes:a.resultNodes,edges:a.resultEdges,paths:[]},schema:n,height:"100%",isShowPropertyNode:!1})})});};var t_=n("cd8b2a5f"),tS=n("3834a44f"),tw=n("4a4bb4c2"),tI=n("a4474fd3"),tk=n("45fba892"),tN=d._(tk),tL=n("9ab824f6"),tj=n("1b2ef78d");let tO=e=>{let{diffSchema:t}=e,[n]=(0,tS.useProjectId)(),[a,r]=(0,H.useState)(null),[{focusNodeId:o}]=(0,tg.useProxyState)(ty.knowledgeModelUiState);(0,_.useQuery)({queryFn:ty.fetchSchemaData,queryKey:["fetchSchemaData",n],staleTime:0,refetchOnMount:!1}),(0,H.useEffect)(()=>{if(!a||a.destroyed)return;let e=e=>!(e.myDraft||e.isLLMExtract),t=t=>{let n=a.getElementData(t.target.id).data,r=e(n);(0,ty.setSchemaInfo)({type:"node",isSchema:!0,id:String(n.id),entityName:n.name,name:n.name,nameZh:n.nameZh,needFetch:r}),r||(ty.knowledgeModelDataState.schemaDetail=n),(0,ty.openSchemaDrawer)();},n=t=>{let n=a.getElementData(t.target.id);if((0,tI.isStandardPropertyEdge)(n))return;let r=n.data,o=e(r);(0,ty.setSchemaInfo)({type:"edge",isSchema:!0,id:String(r.originId),name:r.type,nameZh:r.typeZh,fromName:r.sourceName,toName:r.targetName,needFetch:o}),o||(ty.knowledgeModelDataState.schemaDetail=r),(0,ty.openSchemaDrawer)();},r=()=>{(0,ty.closeSchemaDrawer)();};return a.on(tL.NodeEvent.CLICK,t),a.on(tL.EdgeEvent.CLICK,n),a.on(tL.CanvasEvent.CLICK,r),()=>{a.off(tL.NodeEvent.CLICK,t),a.off(tL.EdgeEvent.CLICK,n),a.off(tL.CanvasEvent.CLICK,r);};},[a]);let l=(0,t_.useMemoizedFn)((e,t)=>{if(!a||a.destroyed)return;let{id:n}=t,r=a.getElementType(n);a.emit(`${r}:click`,{target:{id:n}});});return(0,c.jsxs)(tw.Graph,{isMergeEdge:!0,isSchema:!0,schemaData:(0,tN.default)(t),locale:(0,_.getLocale)(),focusNodeId:o,afterFirstRender:e=>{setTimeout(()=>{e.emit(tL.NodeEvent.CLICK,{target:{id:o},targetType:"node"});},16),(0,ty.setFocusNodeId)();},style:{height:"100%"},onInit:e=>r(e),children:[(0,c.jsx)(tw.Search,{allowShortcutKey:!0,alwaysShowBox:!0,onSelectFinish:l,style:{left:24,top:24}}),(0,c.jsx)(tw.Toolbar,{style:{left:24,bottom:100},items:[tw.ToolbarKey.FitView,tw.ToolbarKey.ZoomIn,tw.ToolbarKey.ZoomOut,tw.ToolbarKey.FullScreen,tw.ToolbarKey.ExportImg]}),(0,c.jsx)(tj.SchemaDrawer,{})]});};var tR=n("5e00c259");let tD=e=>{let{requestParams:t,...n}=e??{},a=(0,_.useQuery)({queryKey:["KnowledgeModeling/job/splitPreview",t],queryFn:async()=>{let e=await (0,tp.splitPreview)({...t}),{success:n,result:a}=e??{};return n&&Array.isArray(a)?a:Promise.reject(e);},enabled:!(0,el.isEmpty)(t),...n}),r=a.data;return{...a,data:r};};var tA={showAllInner:"showAllInner-iF9XSvQw",segmentContent:"segmentContent-nS5vgH2c",dividerColumn:"dividerColumn-1F3Nglze",segmentEffect:"segmentEffect-KDKs4dtX",segmentContentItem:"segmentContentItem-nHce0aRj",segmentContentItemInner:"segmentContentItemInner-btuw1s2L",segmentTip:"segmentTip-6f1Z6fFX",dividerRow:"dividerRow-GzZCV9Py",showAll:"showAll-C5eNpkfD",item:"item-FOSpYdLL",segmentPagination:"segmentPagination-dWIGULsV",leftInfo:"leftInfo-5UwsKfkS",itemText:"itemText-ZdCA2JaH",baseConfigTop:"baseConfigTop-sztvWo3k",itemOperation:"itemOperation-7wp0adqs",content:"content-Nm9_C_w5"},tM=n("2e2809ed"),tP=n("b50ba5eb"),tU=n("483403ba");let tF={[tP.DATA_SOURCE_CATEGORY.FILE]:[{label:g.default.get({id:"spg.UnstructuredContent.BaseConfig.LeftInfo.KnowledgeName",dm:"\u77E5\u8BC6\u540D\u79F0\uFF1A"}),keyIndex:"jobName"},{label:g.default.get({id:"spg.UnstructuredContent.BaseConfig.LeftInfo.Created",dm:"\u521B\u5EFA\u4EBA\uFF1A"}),keyIndex:"createUser"},{label:g.default.get({id:"spg.UnstructuredContent.BaseConfig.LeftInfo.CreationTime",dm:"\u521B\u5EFA\u65F6\u95F4\uFF1A"}),keyIndex:"gmtCreate"},{label:g.default.get({id:"spg.UnstructuredContent.BaseConfig.LeftInfo.Status",dm:"\u72B6\u6001\uFF1A"}),keyIndex:"status",render:({status:e})=>(0,c.jsx)(q.default,{status:e})},{label:g.default.get({id:"spg.KnowledgeModeling.KnowledgeTask.UploadDocument",dm:"\u4E0A\u4F20\u6587\u6863"})+"\uFF1A",keyIndex:"uploadFiles",render:e=>{var t,n;return(0,c.jsx)(k.default,{type:"link",onClick:()=>window.open(e.fileUrl,"_blank"),style:{flex:1,display:"flex",overflow:"hidden"},children:(0,c.jsx)(tU.EllipsisTextTip,{text:(null==e?void 0:null===(n=e.parsedExtension)||void 0===n?void 0:null===(t=n.dataSourceConfig)||void 0===t?void 0:t.fileName)||e.fileUrl})});}}],[tP.DATA_SOURCE_CATEGORY.YUQUE]:[{label:g.default.get({id:"spg.UnstructuredContent.BaseConfig.LeftInfo.KnowledgeName",dm:"\u77E5\u8BC6\u540D\u79F0\uFF1A"}),keyIndex:"jobName"},{label:g.default.get({id:"spg.UnstructuredContent.BaseConfig.LeftInfo.Created",dm:"\u521B\u5EFA\u4EBA\uFF1A"}),keyIndex:"createUser"},{label:g.default.get({id:"spg.UnstructuredContent.BaseConfig.LeftInfo.Modified",dm:"\u4FEE\u6539\u4EBA\uFF1A"}),keyIndex:"modifyUser"},{label:g.default.get({id:"spg.UnstructuredContent.BaseConfig.LeftInfo.CreationTime",dm:"\u521B\u5EFA\u65F6\u95F4\uFF1A"}),keyIndex:"gmtCreate"},{label:g.default.get({id:"spg.UnstructuredContent.BaseConfig.LeftInfo.Status",dm:"\u72B6\u6001\uFF1A"}),keyIndex:"status",render:({status:e})=>(0,c.jsx)(q.default,{status:e})},{label:g.default.get({id:"spg.UnstructuredContent.BaseConfig.LeftInfo.SparrowDocument",dm:"\u8BED\u96C0\u6587\u6863"})+"\uFF1A",keyIndex:"fileUrl",render:e=>{var t,n;let a=null===(n=e.parsedExtension)||void 0===n?void 0:null===(t=n.yuqueConfig)||void 0===t?void 0:t.yuQueUrl;return(0,c.jsx)(k.default,{type:"link",onClick:()=>a&&window.open(a,"_blank"),style:{flex:1,display:"flex",overflow:"hidden"},children:(0,c.jsx)(tU.EllipsisTextTip,{text:a||g.default.get({id:"spg.UnstructuredContent.BaseConfig.LeftInfo.DocumentAddress",dm:"\u6587\u6863\u5730\u5740"})})});}}],[tP.DATA_SOURCE_CATEGORY.BATCH]:[{label:g.default.get({id:"spg.UnstructuredContent.BaseConfig.LeftInfo.DocumentType",dm:"\u6587\u6863\u7C7B\u578B\uFF1A"}),keyIndex:"dataSourceType"},{label:g.default.get({id:"spg.UnstructuredContent.BaseConfig.LeftInfo.AccountName",dm:"\u8D26\u53F7\u540D\u79F0\uFF1A"}),keyIndex:"dataSource"},{label:g.default.get({id:"spg.UnstructuredContent.BaseConfig.LeftInfo.ProjectName",dm:"\u6240\u5728\u9879\u76EE\u540D\u79F0\uFF1A"}),keyIndex:"database"},{label:g.default.get({id:"spg.UnstructuredContent.BaseConfig.LeftInfo.TableName",dm:"\u8868\u540D\uFF1A"}),keyIndex:"table"},{label:g.default.get({id:"spg.UnstructuredContent.BaseConfig.LeftInfo.Zoning",dm:"\u5206\u533A\uFF1A"}),keyIndex:"partition"}],[tP.DATA_SOURCE_CATEGORY.STREAM]:[{label:g.default.get({id:"spg.UnstructuredContent.BaseConfig.LeftInfo.DocumentType",dm:"\u6587\u6863\u7C7B\u578B\uFF1A"}),keyIndex:"dataSourceType"},{label:g.default.get({id:"spg.UnstructuredContent.BaseConfig.LeftInfo.AccountName",dm:"\u8D26\u53F7\u540D\u79F0\uFF1A"}),keyIndex:"dataSource"}],segmentConfig:[{label:g.default.get({id:"spg.UnstructuredContent.BaseConfig.LeftInfo.Segmentation",dm:"\u5206\u6BB5\u65B9\u5F0F\uFF1A"}),keyIndex:"semanticSplit",render:e=>(null==e?void 0:e.semanticSplit)?g.default.get({id:"spg.UnstructuredContent.BaseConfig.LeftInfo.UsingSemanticSegmentation",dm:"\u4F7F\u7528\u8BED\u4E49\u5207\u5206"}):g.default.get({id:"spg.UnstructuredContent.BaseConfig.LeftInfo.DoNotUseSemanticSegmentation",dm:"\u4E0D\u4F7F\u7528\u8BED\u4E49\u5207\u5206"})},{label:g.default.get({id:"spg.UnstructuredContent.BaseConfig.LeftInfo.SegmentLength",dm:"\u5206\u6BB5\u957F\u5EA6\uFF1A"}),keyIndex:"splitLength"}],extractConfig:[{label:g.default.get({id:"spg.UnstructuredContent.BaseConfig.LeftInfo.ExtractionModel",dm:"\u62BD\u53D6\u6A21\u578B\uFF1A"}),keyIndex:"llm",render:e=>{var t,n;let a=(0,$.json2Object)(null==e?void 0:null===(n=e.parsedExtension)||void 0===n?void 0:null===(t=n.extractConfig)||void 0===t?void 0:t.llm),r=(null==a?void 0:a.model)||(null==a?void 0:a.scene_name);return a&&r?(0,c.jsxs)(c.Fragment,{children:[(0,c.jsx)("span",{className:"mr8",children:(0,c.jsx)(tM.ModelDetailPopover,{itemRecord:a})}),(0,c.jsx)(tU.EllipsisTextTip,{text:r+` (${a.desc})`,children:r+` (${a.desc})`})]}):"-";}},{label:g.default.get({id:"spg.UnstructuredContent.BaseConfig.LeftInfo.AdvancedConfiguration",dm:"\u9AD8\u7EA7\u914D\u7F6E\uFF1A"}),keyIndex:"computingConf"}]},tG=e=>{var t;let{type:n,record:a}=e,r=tF[n]||[],o=tF.segmentConfig,l=tF.extractConfig,i=(e,t)=>e.map(({keyIndex:e,label:n,render:a})=>{var r,o,l,i,s;let d=(null==t?void 0:t[e])||(null==t?void 0:null===(o=t.parsedExtension)||void 0===o?void 0:null===(r=o.dataSourceConfig)||void 0===r?void 0:r[e]);return"dataSource"===e&&(d=null===(l=(0,$.json2Object)(null==t?void 0:null===(s=t.parsedExtension)||void 0===s?void 0:null===(i=s.dataSourceConfig)||void 0===i?void 0:i.dataSource))||void 0===l?void 0:l.dbName),(0,c.jsxs)("div",{className:tA.item,children:[(0,c.jsx)("span",{children:n}),a?a(t):(0,c.jsx)(tU.EllipsisTextTip,{text:d||"-"})]},e);});return(0,c.jsxs)(c.Fragment,{children:[(0,c.jsxs)("div",{children:[(0,c.jsx)(tR.Title,{title:g.default.get({id:"spg.UnstructuredContent.BaseConfig.LeftInfo.BasicInformation",dm:"\u57FA\u7840\u4FE1\u606F"}),level:"block"}),i(r,a)]}),(0,c.jsx)(ey.default,{className:tA.dividerRow}),(0,c.jsxs)("div",{children:[(0,c.jsx)(tR.Title,{title:g.default.get({id:"spg.UnstructuredContent.BaseConfig.LeftInfo.SegmentConfiguration",dm:"\u5206\u6BB5\u914D\u7F6E"}),level:"block"}),i(o,null==a?void 0:null===(t=a.parsedExtension)||void 0===t?void 0:t.splitConfig)]}),(0,c.jsx)(ey.default,{className:tA.dividerRow}),(0,c.jsxs)("div",{children:[(0,c.jsx)(tR.Title,{title:g.default.get({id:"spg.UnstructuredContent.BaseConfig.LeftInfo.ExtractionConfiguration",dm:"\u62BD\u53D6\u914D\u7F6E"}),level:"block"}),i(l,a)]})]});};var tB=n("40376759"),tq=d._(tB),tK=n("0d40f263"),tW=d._(tK),tV=n("4695e06b"),tH=d._(tV);n("0484836a");let tY=e=>{let{text:t}=e,n=(0,H.useRef)(null),[a,r]=(0,H.useState)(!1),[o,l]=(0,H.useState)(!1);return(0,H.useLayoutEffect)(()=>{var e;let t=null===(e=n.current)||void 0===e?void 0:e.scrollHeight;t&&t>88&&r(!0);},[]),(0,c.jsx)("div",{className:(0,h.default)(tA.segmentContentItem,{[tA.showAll]:o}),children:(0,c.jsxs)("div",{ref:n,className:(0,h.default)(tA.segmentContentItemInner,{[tA.showAllInner]:o}),children:[(0,c.jsx)("pre",{className:tA.itemText,children:t}),a&&(0,c.jsxs)("div",{className:tA.itemOperation,children:[(0,c.jsx)("div",{}),(0,c.jsxs)(k.default,{type:"link",onClick:()=>l(!o),children:[o?g.default.get({id:"spg.UnstructuredContent.BaseConfig.Segmentation.Stow",dm:"\u6536\u8D77"}):g.default.get({id:"spg.UnstructuredContent.BaseConfig.Segmentation.ExpandAll",dm:"\u5C55\u5F00\u5168\u90E8"}),o?(0,c.jsx)(tW.default,{}):(0,c.jsx)(tq.default,{})]})]})]})});},t$=e=>{let{contentList:t}=e,n=(0,H.useMemo)(()=>t.map((e,t)=>({text:e,key:t})),[t]),a=(0,H.useRef)(null),[r,o]=(0,H.useState)(1),[l,i]=(0,H.useState)(1),s=(0,R.useMemoizedFn)(()=>{var e;let t=null===(e=a.current)||void 0===e?void 0:e.clientHeight;if(t&&t>0){let e=Math.floor((t+16)/136);if(e!==r){let t=Math.max(e,1);o(t),i(Math.min(l,Math.max(1,Math.ceil(n.length/t))));}}});return(0,H.useEffect)(()=>(s(),window.addEventListener("resize",s),()=>{window.removeEventListener("resize",s);}),[]),(0,c.jsxs)(c.Fragment,{children:[(0,c.jsx)("div",{ref:a,className:tA.segmentContent,children:n.slice(r*(l-1),r*l).map(({text:e,key:t})=>(0,c.jsx)(tY,{text:e},t))}),(0,c.jsx)("div",{className:tA.segmentPagination,children:(0,c.jsxs)("div",{children:[(0,c.jsx)("div",{className:tA.segmentTip,children:g.default.get({id:"spg.UnstructuredContent.BaseConfig.Segmentation.DisplayAMaximumOfPages",dm:"\u6700\u591A\u5C55\u793A5\u9875\u5206\u6BB5\uFF0C\u82E5\u5185\u5BB9\u8FC7\u591A\uFF0C\u53EF\u80FD\u65E0\u6CD5\u5C55\u793A\u6240\u6709\u5206\u6BB5"})}),(0,c.jsx)(tH.default,{current:l,pageSize:r,total:n.length,onChange:e=>i(e)})]})})]});},tz=e=>{let{taskInfo:t}=e,{type:n}=t??{},a=n===K.DATA_SOURCE_TYPE_ENUM.FILE_EXTRACT||n===K.DATA_SOURCE_TYPE_ENUM.YUQUE_EXTRACT,{data:r}=tD({requestParams:{projectId:Number(m.URLParams.projectId),...(0,el.omit)(t,["parsedExtension"])},enabled:!(0,el.isNil)(null==t?void 0:t.id)&&a});return(0,c.jsx)(Q.default,{className:tA.baseConfigTop,children:(0,c.jsxs)("div",{className:tA.content,children:[(0,c.jsx)("div",{className:tA.leftInfo,children:(0,c.jsx)(tG,{type:null==t?void 0:t.type,record:t})}),(0,c.jsx)(ey.default,{className:tA.dividerColumn,type:"vertical"}),a&&(0,c.jsxs)("div",{className:tA.segmentEffect,children:[(0,c.jsx)(tR.Title,{title:g.default.get({id:"spg.UnstructuredContent.BaseConfig.SegmentedEffect",dm:"\u5206\u6BB5\u6548\u679C"}),level:"block"}),(0,c.jsx)(t$,{contentList:r??[]})]})]})});},tX=e=>{let{taskInfo:t}=e,[n,a]=(0,v.useState)(s.BASE),{graphLoading:r,diffSchema:o,schemaTree:l,subGraph:i}=tv({record:t});return(0,c.jsx)(A.default,{className:j,activeKey:n,onChange:e=>{a(e);},items:[{key:s.BASE,label:g.default.get({id:"spg.KnowledgeDetails.UnstructuredContent.BasicConfiguration",dm:"\u57FA\u672C\u914D\u7F6E"}),children:(0,c.jsx)(tz,{taskInfo:t})},{key:s.LOG,label:g.default.get({id:"spg.KnowledgeDetails.UnstructuredContent.ExecutionLog",dm:"\u6267\u884C\u65E5\u5FD7"}),children:(0,c.jsx)(U,{defaultPadding:!1,children:(0,c.jsx)(tc,{taskInfo:t})})},{key:s.EXTRACTION_EFFECT,label:g.default.get({id:"spg.KnowledgeDetails.UnstructuredContent.EffectSampling",dm:"\u62BD\u53D6\u6548\u679C[\u62BD\u6837]"}),children:(0,c.jsx)(U,{children:t&&(0,c.jsx)(tx,{graphLoading:r,diffSchema:o,subGraph:i})})},{key:s.EXTRACTION_KNOWLEDGE__MODEL,label:g.default.get({id:"spg.KnowledgeDetails.UnstructuredContent.KnowledgeExtractionModel",dm:"\u62BD\u53D6\u77E5\u8BC6\u6A21\u578B"}),children:(0,c.jsx)(U,{children:(0,c.jsx)(tO,{schemaTree:l,diffSchema:o})})}]});};var tQ=(a=()=>{let{data:e,isFetching:t}=(0,C.useGetJobById)({requestParams:{id:Number(m.URLParams.jobId)}}),n=(0,x.parseBuilderJob)(e),a=(0,T.isMappingConfigRequired)((0,E.transformTaskDataToFormData)({...e}));return(0,c.jsxs)("div",{className:"knowledgeDetailsContainer-0s60ITlT",children:[(0,c.jsx)(b.OverlaySpin,{spinning:t,tip:g.default.get({id:"spg.KnowledgeModeling.KnowledgeDetails.DataLoadingIn",dm:"\u6570\u636E\u52A0\u8F7D\u4E2D..."})}),(0,c.jsx)(O,{taskInfo:n}),(0,c.jsx)("main",{className:(0,h.default)("mainContainer-j_WIWWEf"),children:a?(0,c.jsx)(tf,{taskInfo:n}):(0,c.jsx)(tX,{taskInfo:n})})]});},e=>{let t=(0,v.useRef)(null),[,{enterFullscreen:n,exitFullscreen:r}]=(0,R.useFullscreen)(t,{pageFullscreen:{zIndex:900}});return(0,R.useMount)(()=>{n();}),(0,R.useUnmount)(()=>{r();}),(0,c.jsx)("div",{style:{background:"white"},ref:t,children:(0,c.jsx)(a,{...e})});});},"490840b0":function(e,t,n){n.d(t,"__esModule",{value:!0}),n.e(t,{default:function(){return m;}});var a=n("777fffbe"),r=n("852bbaa9"),o=n("32b7a2cf"),l=n("6e1f6d03"),i=n("5b5ed4a9"),s=n("9e0828f5"),d=a._(s),u=n("02b696d0"),c=r._(u),f=n("0b69d691"),g=n("05ecbb5b"),p=n("93b3369a");let h=()=>{let e={name:"BuilderJobStatus"},t=(0,g.useQuery)({queryKey:["KnowledgeModeling/getEnumValues",e],queryFn:async()=>{let{success:t,result:n}=await (0,f.getEnumValues)(e);return t&&Array.isArray(n)?n:Promise.reject(n);},cacheTime:1/0,staleTime:1/0}),n=t.data,a=(0,c.useMemo)(()=>(0,p.keyBy)(n,"name"),[n]);return{...t,data:a};},m=e=>{var t;let{status:n=""}=e,{data:a}=h(),r=(0,i.getLocale)(),{name:s,text:u}=a[n]??{},c=(null===(t=l.TaskStatusMap[s??""])||void 0===t?void 0:t.status)??{};return(0,o.jsx)(d.default,{status:c||"default",text:("zh-CN"===r?u:s)||""});};},"4c70c3ed":function(e,t,n){"use strict";n.d(t,"__esModule",{value:!0}),n.d(t,"getMixedLocaleFieldValue",{enumerable:!0,get:function(){return r;}});let a=n("777fffbe")._(n("f02131d0")).default.getCurrentLocale(),r=(e={},t)=>{let{fileName:n="name",lang:r=a,fileNameZh:o,onlyLocale:l=!1}=t||{},i=o||n+"Zh",s=e["zh-CN"===r?i:n],d=e["zh-CN"===r?n:i];return d||s?d?s?l?s:`${s}(${d})`:d:s:"-";};},"51196c4f":function(e,t,n){"use strict";n.d(t,"__esModule",{value:!0}),n.e(t,{builderQuery:function(){return r;},list:function(){return o;},mark:function(){return l;},unMark:function(){return i;}});var a=n("05ecbb5b");async function r(e,t){return(0,a.request)("/public/v1/reasoner/task/builder/query",{method:"GET",params:{...e,request:void 0,...e.request},...t||{}});}async function o(e,t){return(0,a.request)("/public/v1/reasoner/task/list",{method:"GET",params:{...e,request:void 0,...e.request},...t||{}});}async function l(e,t){return(0,a.request)("/public/v1/reasoner/task/mark",{method:"POST",headers:{"Content-Type":"application/json"},data:e,...t||{}});}async function i(e,t){return(0,a.request)("/public/v1/reasoner/task/unmark",{method:"POST",headers:{"Content-Type":"application/json"},data:e,...t||{}});}},"5e00c259":function(e,t,n){"use strict";n.d(t,"__esModule",{value:!0}),n.d(t,"Title",{enumerable:!0,get:function(){return i;}});var a=n("32b7a2cf"),r=n("5b5ed4a9");n("4d0e37ae");var o=n("fc1f4356");let l=r.styled.div`
  .header {
    color: var(--dark-shade-85);
    font-weight: var(--font-medium);
    font-size: ${({$level:e})=>"page"===e?"var(--h1-font-size)":"var(--h3-font-size)"};
    line-height: ${({$level:e})=>"page"===e?"28px":"24px"};
  }
`,i=({className:e,style:t,level:n="page",title:i,titleExtra:s,showBack:d=!1,goBackCb:u,children:c})=>{let f=(0,r.useNavigate)();return(0,a.jsxs)(l,{$level:n,className:e,style:t,children:[(0,a.jsxs)("div",{className:"flex-row mb16",children:[(0,a.jsxs)("div",{className:"header",children:[d&&(0,a.jsx)(r.Icon,{className:"icon mr8 pointer",icon:"ant-design:arrow-left-outlined",onClick:()=>(0,o.isFunction)(u)?u():f(-1)}),i]}),(0,a.jsx)("div",{children:s})]}),(0,a.jsx)("div",{children:c})]});};},"640ee7d6":function(e,t,n){"use strict";n.d(t,"__esModule",{value:!0}),n.d(t,"GraphView",{enumerable:!0,get:function(){return b;}});var a=n("852bbaa9"),r=n("32b7a2cf"),o=n("a675bf5f"),l=n("1a998156"),i=n("52fb4bb8"),s=n("bac6942a"),d=n("8e68a90d"),u=n("5b5ed4a9"),c=a._(n("4d0e37ae")),f=n("fc1f4356"),g=n("3834a44f"),p=n("4a4bb4c2"),h=n("a4474fd3");let m=u.styled.div`
  display: ${({visible:e})=>e?"block":"none"};
  height: ${({height:e})=>e};
  .toolbar {
    .kg-toolbar-content-wrapper,
    .kg-toolbar-toggle {
      border-radius: var(--border-radius-lg);
      box-shadow: 0px 1px 4px 0px rgba(0, 0, 0, 0.15);
    }
  }

  .kg-legend-top,
  .kg-compact-legend,
  .kg-studio-draggable-modal {
    font-size: 12px;
  }
`,b=c.default.memo(({graphData:e,isShowPropertyNode:t,height:n="436px",visible:a=!0,schema:b,withGraphLegend:y=!0,withDetailDrawer:v=!0,detailDrawerProps:T={},toolBarContent:E=[p.ToolbarKey.FitView,p.ToolbarKey.FullScreen,p.ToolbarKey.ZoomIn,p.ToolbarKey.ZoomOut,p.ToolbarKey.ExportImg],toolBarStyle:C={bottom:76,left:12}})=>{var x;let[{schemaData:_}]=(0,i.useProxyState)(d.knowledgeModelDataState),[S]=(0,g.useProjectId)(),{extraStyleConfigs:w}=(0,o.useSchemaStaticConfig)();(0,u.useQuery)({queryFn:d.fetchSchemaData,queryKey:["fetchSchemaData",S],staleTime:0,refetchOnMount:!1});let{data:I={}}=(0,s.useSchemaPropertyNameMap)(),k=(0,c.useMemo)(()=>{let t=e.nodes.map(e=>{var t;return{...e,id:null===(t=e.id)||void 0===t?void 0:t.toString()};}),n=e.edges.map(e=>{var t,n,a;return{...e,type:e.label,label:(null===(t=e.label)||void 0===t?void 0:t.includes("_"))?e.label.split("_")[1]:e.label,from:null===(n=e.from)||void 0===n?void 0:n.toString(),to:null===(a=e.to)||void 0===a?void 0:a.toString()};});return{...e,nodes:t,edges:n};},[e,I,t]);if(!(null==k?void 0:null===(x=k.nodes)||void 0===x?void 0:x.length))return null;let N=[p.ContextmenuKey.ExpandNode,p.ContextmenuKey.MergeNode],L={...l.baseSchemePropertyNameMap,...I};return(0,r.jsx)(m,{height:n,visible:a,children:(0,r.jsx)("div",{style:{position:"relative",width:"100%",height:"100%"},children:(0,r.jsxs)(p.Graph,{data:(0,f.cloneDeep)(k),extraStyleConfigs:w,locale:(0,u.getLocale)(),mergeType:h.MergeTypeEnum.MERGE_SAME_RELATION,schemaData:(0,f.cloneDeep)(b||_),schemaPropertyNameMap:L,schemaTypeNameMap:L,needAddedTag:!0,children:[v&&(0,r.jsx)(p.DetailDrawer,{getContainer:!1,...T}),(0,r.jsx)(p.Toolbar,{items:E,style:{bottom:76,left:12,...C}}),(0,r.jsx)(p.Contextmenu,{items:N}),y&&(0,r.jsx)(p.GraphLegend,{style:{left:12,bottom:6}})]})})});});},"6e1f6d03":function(e,t,n){"use strict";n.d(t,"__esModule",{value:!0}),n.e(t,{TaskStatus:function(){return a;},TaskStatusMap:function(){return l;}});var a,r,o=n("777fffbe")._(n("f02131d0"));(r=a||(a={})).WAIT="WAIT",r.RUNNING="RUNNING",r.ERROR="ERROR",r.TERMINATE="TERMINATE",r.PENDING="PENDING",r.FINISH="FINISH";let l={WAIT:{status:"default",text:o.default.get({id:"spg.src.constants.knowledgeTask.Waiting",dm:"\u7B49\u5F85\u4E2D"})},RUNNING:{status:"processing",text:o.default.get({id:"spg.src.constants.knowledgeTask.InExecution",dm:"\u6267\u884C\u4E2D"})},TERMINATE:{status:"warning",text:o.default.get({id:"spg.src.constants.knowledgeTask.Termination",dm:"\u7EC8\u6B62"})},ERROR:{status:"error",text:o.default.get({id:"spg.src.constants.knowledgeTask.Exception",dm:"\u5F02\u5E38"})},PENDING:{status:"default",text:o.default.get({id:"spg.src.constants.knowledgeTask.ToBeImported",dm:"\u5F85\u5BFC\u5165"})},FINISH:{status:"success",text:o.default.get({id:"spg.src.constants.knowledgeTask.Finish",dm:"\u5B8C\u6210"})}};},"7acbc698":function(e,t,n){"use strict";n.d(t,"__esModule",{value:!0}),n.d(t,"DEFAULT_GRAPH_DATA",{enumerable:!0,get:function(){return a;}});let a={nodes:[],edges:[]};},"8dec2e97":function(e,t,n){"use strict";n.d(t,"__esModule",{value:!0}),n.d(t,"getConceptRelationDetail",{enumerable:!0,get:function(){return r;}});let a={"RpgSys.ArmorClass/abc__isA__RpgSys.ArmorClass/__ROOT__":(0,n("fc5eb767").getConceptRelationDetailMock)()},r=e=>{let{name:t,startEntity:n,endEntity:r}=e,o=`${n.type}/${n.primaryKey}`,l=`${r.type}/${r.primaryKey}`;return a[`${o}__${t}__${l}`]||a["RpgSys.ArmorClass/abc__isA__RpgSys.ArmorClass/__ROOT__"];};},"8e68a90d":function(e,t,n){"use strict";n.d(t,"__esModule",{value:!0});var a=n("d1751d7c");a._(n("2caf0dfa"),t),a._(n("c234708e"),t);},a5eab18a:function(e,t,n){"use strict";n.d(t,"__esModule",{value:!0}),n.e(t,{DrawerStyle:function(){return u;},PropertyTable:function(){return g;},PropertyTitle:function(){return p;},RadioGroup:function(){return c;},SiderBtn:function(){return y;},SiderBtnContainer:function(){return v;},SiderContainer:function(){return m;},StyleMenu:function(){return b;},StyledDescriptions:function(){return h;},TabBar:function(){return f;}});var a=n("777fffbe"),r=n("5e00c259"),o=n("5b5ed4a9"),l=a._(n("9ffd6a0f")),i=a._(n("b09e51ac")),s=a._(n("097087ae")),d=a._(n("c7f4f8e9"));let u=(0,o.createGlobalStyle)`
  .akg-components-drawer {
    .ant-drawer-header {
      border-bottom: none;
    }
    .akg-components-drawer-body{
      height: 100%;
    }
  }
`,c=(0,o.styled)(s.default.Group)`
  position: absolute;
  left: 24px;
  top: 24px;
`,f=(0,o.styled)(s.default.Group)`
  position: sticky;
  z-index: 10;
  top: 0;
  padding: 0px 24px 16px !important;
  background: #fff;
  border-bottom: 1px solid #f0f0f0;
`,g=(0,o.styled)(d.default)`
  .ant-table-tbody {
    & > tr {
      height: 40px;
      & > td {
        padding: 0;
        padding-left: 16px;
      }
      &.with-children > td:first-child {
        padding-left: 3px;
      }
    }
  }
`,p=(0,o.styled)(r.Title)`
  position: sticky;
  top: 49px;
  z-index: 6;
  padding: 8px 16px 8px 24px;
  background: #fff;

  & > div {
    margin-bottom: 0;
  }
`,h=(0,o.styled)(l.default)`
  .ant-descriptions-item-content {
    color: var(--deep-blue-68);
    &-extra {
      color: var(--deep-blue-35);
    }
  }
`,m=o.styled.div`
  background: #f0f2f500;
  box-shadow: 1px 0px 0 0px #000a1a0f;
  height: 100%;
  position: relative;
`,b=(0,o.styled)(i.default)`
  border-right: none !important;
  background-color: #f0f2f500;
  width: 168px;
  padding: 8px;
  .ant-menu-item {
    color: #000a1ae3;
    border-radius: 6px;
  }
  .ant-menu-item-selected,
  .ant-menu-submenu-selected .ant-menu-item-selected {
    color: #2f54eb;
    background-color: #00000005 !important;
  }
  .ant-menu-item-selected::after {
    display: none;
  }
`,y=o.styled.div`
  width: 80px; /* 原始宽度 */
  height: 14px; /* 原始高度 */
  background-color: #5273a80f; /* 背景颜色 */
  clip-path: polygon(20% 0%, 80% 0%, 100% 100%, 0% 100%); /* 原始裁剪路径 */
  transform-origin: center; /* 以中心点为基准进行旋转 */
  position: absolute;
  right: -40px;
  top: 50%;
  transform: rotate(90deg) translateY(-50%);
`,v=o.styled.div`
  width: 14px;
  height: 84px;
  cursor: pointer;
  filter: drop-shadow(1px 0 0 #e5e6e8);
  position: absolute;
  top: 50%;
  right: -14px;
  z-index: 10;
  transform: translateY(-50%);
  .shape {
    position: absolute;
    top: 0;
    bottom: 0;
    display: flex;
    align-items: center;
    justify-content: center;
    margin: auto 0;
    overflow: hidden;
    cursor: pointer;
    .shapeContent {
      position: relative;
      display: inline-block;
      width: 14px;
      height: 50px;
      background: #f7f8fa;
      border-radius: 6px;
    }
    .shapeContent::before {
      position: absolute;
      right: 0;
      left: -4px;
      z-index: 999;
      width: 18px;
      height: 23px;
      background: inherit;
      content: '';
      bottom: 2px;
      border-radius: 0 0 6px;
      transform: rotate(-40deg);
      transform-origin: 100% 100%;
    }
    .shapeContent::after {
      position: absolute;
      right: 0;
      left: -4px;
      z-index: 999;
      width: 18px;
      height: 23px;
      background: inherit;
      top: 2px;
      border-radius: 0 6px 0 0;
      transform: rotate(40deg);
      transform-origin: 100% 0;
      content: '';
    }
    .icon {
      position: absolute;
      top: 50%;
      left: 0;
      color: #ccc;
      font-size: 10px;
      transform: translateY(-50%);
      stroke: #ccc;
      stroke-width: 10;
    }
  }
`;},a675bf5f:function(e,t,n){n.d(t,"__esModule",{value:!0}),n.e(t,{getExtraStyleConfig:function(){return tt;},useSchemaStaticConfig:function(){return tn;}});var a=n("777fffbe"),r=n("5b5ed4a9"),o=n("fc1f4356"),l=n("3834a44f"),i=n("d2dd95e3"),s=a._(i);let d=(...e)=>new d.Color(...e);d.Color=s.default,d.version="2.6.0";var u=n("4e6f4eec"),c=a._(u),f=n("6b30f28c");let{max:g}=Math,p=(...e)=>{let[t,n,a]=(0,f.unpack)(e,"rgb"),r=1-g(t/=255,g(n/=255,a/=255)),o=r<1?1/(1-r):0;return[(1-t-r)*o,(1-n-r)*o,(1-a-r)*o,r];};s.default.prototype.cmyk=function(){return p(this._rgb);},d.cmyk=(...e)=>new s.default(...e,"cmyk"),c.default.format.cmyk=(...e)=>{let[t,n,a,r]=e=(0,f.unpack)(e,"cmyk"),o=e.length>4?e[4]:1;return 1===r?[0,0,0,o]:[t>=1?0:255*(1-t)*(1-r),n>=1?0:255*(1-n)*(1-r),a>=1?0:255*(1-a)*(1-r),o];},c.default.autodetect.push({p:2,test:(...e)=>{if(e=(0,f.unpack)(e,"cmyk"),"array"===(0,f.type)(e)&&4===e.length)return"cmyk";}});let h=e=>Math.round(100*e)/100,m=(...e)=>{let t=(0,f.unpack)(e,"hsla"),n=(0,f.last)(e)||"lsa";return t[0]=h(t[0]||0),t[1]=h(100*t[1])+"%",t[2]=h(100*t[2])+"%","hsla"===n||t.length>3&&t[3]<1?(t[3]=t.length>3?t[3]:1,n="hsla"):t.length=3,`${n}(${t.join(",")})`;},b=(...e)=>{let t,n;let[a,r,o]=e=(0,f.unpack)(e,"rgba");a/=255,r/=255,o/=255;let l=(0,f.min)(a,r,o),i=(0,f.max)(a,r,o),s=(i+l)/2;return(i===l?(t=0,n=Number.NaN):t=s<.5?(i-l)/(i+l):(i-l)/(2-i-l),a==i?n=(r-o)/(i-l):r==i?n=2+(o-a)/(i-l):o==i&&(n=4+(a-r)/(i-l)),(n*=60)<0&&(n+=360),e.length>3&&void 0!==e[3])?[n,t,s,e[3]]:[n,t,s];},{round:y}=Math,v=(...e)=>{let t=(0,f.unpack)(e,"rgba"),n=(0,f.last)(e)||"rgb";return"hsl"==n.substr(0,3)?m(b(t),n):(t[0]=y(t[0]),t[1]=y(t[1]),t[2]=y(t[2]),("rgba"===n||t.length>3&&t[3]<1)&&(t[3]=t.length>3?t[3]:1,n="rgba"),`${n}(${t.slice(0,"rgb"===n?3:4).join(",")})`);},{round:T}=Math,E=(...e)=>{let t,n,a;let[r,o,l]=e=(0,f.unpack)(e,"hsl");if(0===o)t=n=a=255*l;else{let e=[0,0,0],i=[0,0,0],s=l<.5?l*(1+o):l+o-l*o,d=2*l-s,u=r/360;e[0]=u+1/3,e[1]=u,e[2]=u-1/3;for(let t=0;t<3;t++)e[t]<0&&(e[t]+=1),e[t]>1&&(e[t]-=1),6*e[t]<1?i[t]=d+(s-d)*6*e[t]:2*e[t]<1?i[t]=s:3*e[t]<2?i[t]=d+(s-d)*(2/3-e[t])*6:i[t]=d;[t,n,a]=[T(255*i[0]),T(255*i[1]),T(255*i[2])];}return e.length>3?[t,n,a,e[3]]:[t,n,a,1];},C=/^rgb\(\s*(-?\d+),\s*(-?\d+)\s*,\s*(-?\d+)\s*\)$/,x=/^rgba\(\s*(-?\d+),\s*(-?\d+)\s*,\s*(-?\d+)\s*,\s*([01]|[01]?\.\d+)\)$/,_=/^rgb\(\s*(-?\d+(?:\.\d+)?)%,\s*(-?\d+(?:\.\d+)?)%\s*,\s*(-?\d+(?:\.\d+)?)%\s*\)$/,S=/^rgba\(\s*(-?\d+(?:\.\d+)?)%,\s*(-?\d+(?:\.\d+)?)%\s*,\s*(-?\d+(?:\.\d+)?)%\s*,\s*([01]|[01]?\.\d+)\)$/,w=/^hsl\(\s*(-?\d+(?:\.\d+)?),\s*(-?\d+(?:\.\d+)?)%\s*,\s*(-?\d+(?:\.\d+)?)%\s*\)$/,I=/^hsla\(\s*(-?\d+(?:\.\d+)?),\s*(-?\d+(?:\.\d+)?)%\s*,\s*(-?\d+(?:\.\d+)?)%\s*,\s*([01]|[01]?\.\d+)\)$/,{round:k}=Math,N=e=>{let t;if(e=e.toLowerCase().trim(),c.default.format.named)try{return c.default.format.named(e);}catch(e){}if(t=e.match(C)){let e=t.slice(1,4);for(let t=0;t<3;t++)e[t]=+e[t];return e[3]=1,e;}if(t=e.match(x)){let e=t.slice(1,5);for(let t=0;t<4;t++)e[t]=+e[t];return e;}if(t=e.match(_)){let e=t.slice(1,4);for(let t=0;t<3;t++)e[t]=k(2.55*e[t]);return e[3]=1,e;}if(t=e.match(S)){let e=t.slice(1,5);for(let t=0;t<3;t++)e[t]=k(2.55*e[t]);return e[3]=+e[3],e;}if(t=e.match(w)){let e=t.slice(1,4);e[1]*=.01,e[2]*=.01;let n=E(e);return n[3]=1,n;}if(t=e.match(I)){let e=t.slice(1,4);e[1]*=.01,e[2]*=.01;let n=E(e);return n[3]=+t[4],n;}};N.test=e=>C.test(e)||x.test(e)||_.test(e)||S.test(e)||w.test(e)||I.test(e),s.default.prototype.css=function(e){return v(this._rgb,e);},d.css=(...e)=>new s.default(...e,"css"),c.default.format.css=N,c.default.autodetect.push({p:5,test:(e,...t)=>{if(!t.length&&"string"===(0,f.type)(e)&&N.test(e))return"css";}}),c.default.format.gl=(...e)=>{let t=(0,f.unpack)(e,"rgba");return t[0]*=255,t[1]*=255,t[2]*=255,t;},d.gl=(...e)=>new s.default(...e,"gl"),s.default.prototype.gl=function(){let e=this._rgb;return[e[0]/255,e[1]/255,e[2]/255,e[3]];};let{floor:L}=Math,j=(...e)=>{let t;let[n,a,r]=(0,f.unpack)(e,"rgb"),o=(0,f.min)(n,a,r),l=(0,f.max)(n,a,r),i=l-o;return 0===i?t=Number.NaN:(n===l&&(t=(a-r)/i),a===l&&(t=2+(r-n)/i),r===l&&(t=4+(n-a)/i),(t*=60)<0&&(t+=360)),[t,100*i/255,o/(255-i)*100];};s.default.prototype.hcg=function(){return j(this._rgb);},d.hcg=(...e)=>new s.default(...e,"hcg"),c.default.format.hcg=(...e)=>{let t,n,a;let[r,o,l]=e=(0,f.unpack)(e,"hcg");l*=255;let i=255*o;if(0===o)t=n=a=l;else{360===r&&(r=0),r>360&&(r-=360),r<0&&(r+=360);let e=L(r/=60),s=r-e,d=l*(1-o),u=d+i*(1-s),c=d+i*s,f=d+i;switch(e){case 0:[t,n,a]=[f,c,d];break;case 1:[t,n,a]=[u,f,d];break;case 2:[t,n,a]=[d,f,c];break;case 3:[t,n,a]=[d,u,f];break;case 4:[t,n,a]=[c,d,f];break;case 5:[t,n,a]=[f,d,u];}}return[t,n,a,e.length>3?e[3]:1];},c.default.autodetect.push({p:1,test:(...e)=>{if(e=(0,f.unpack)(e,"hcg"),"array"===(0,f.type)(e)&&3===e.length)return"hcg";}});let O=/^#?([A-Fa-f0-9]{6}|[A-Fa-f0-9]{3})$/,R=/^#?([A-Fa-f0-9]{8}|[A-Fa-f0-9]{4})$/,D=e=>{if(e.match(O)){(4===e.length||7===e.length)&&(e=e.substr(1)),3===e.length&&(e=(e=e.split(""))[0]+e[0]+e[1]+e[1]+e[2]+e[2]);let t=parseInt(e,16);return[t>>16,t>>8&255,255&t,1];}if(e.match(R)){(5===e.length||9===e.length)&&(e=e.substr(1)),4===e.length&&(e=(e=e.split(""))[0]+e[0]+e[1]+e[1]+e[2]+e[2]+e[3]+e[3]);let t=parseInt(e,16),n=Math.round((255&t)/255*100)/100;return[t>>24&255,t>>16&255,t>>8&255,n];}throw Error(`unknown hex color: ${e}`);},{round:A}=Math,M=(...e)=>{let[t,n,a,r]=(0,f.unpack)(e,"rgba"),o=(0,f.last)(e)||"auto";void 0===r&&(r=1),"auto"===o&&(o=r<1?"rgba":"rgb");let l="000000"+((t=A(t))<<16|(n=A(n))<<8|(a=A(a))).toString(16);l=l.substr(l.length-6);let i="0"+A(255*r).toString(16);switch(i=i.substr(i.length-2),o.toLowerCase()){case"rgba":return`#${l}${i}`;case"argb":return`#${i}${l}`;default:return`#${l}`;}};s.default.prototype.hex=function(e){return M(this._rgb,e);},d.hex=(...e)=>new s.default(...e,"hex"),c.default.format.hex=D,c.default.autodetect.push({p:4,test:(e,...t)=>{if(!t.length&&"string"===(0,f.type)(e)&&[3,4,5,6,7,8,9].indexOf(e.length)>=0)return"hex";}});let{cos:P}=Math,{min:U,sqrt:F,acos:G}=Math,B=(...e)=>{let t,[n,a,r]=(0,f.unpack)(e,"rgb"),o=U(n/=255,a/=255,r/=255),l=(n+a+r)/3,i=l>0?1-o/l:0;return 0===i?t=NaN:(t=G(t=(n-a+(n-r))/2/F((n-a)*(n-a)+(n-r)*(a-r))),r>a&&(t=f.TWOPI-t),t/=f.TWOPI),[360*t,i,l];};s.default.prototype.hsi=function(){return B(this._rgb);},d.hsi=(...e)=>new s.default(...e,"hsi"),c.default.format.hsi=(...e)=>{let t,n,a;let[r,o,l]=e=(0,f.unpack)(e,"hsi");return isNaN(r)&&(r=0),isNaN(o)&&(o=0),r>360&&(r-=360),r<0&&(r+=360),(r/=360)<1/3?n=1-((a=(1-o)/3)+(t=(1+o*P(f.TWOPI*r)/P(f.PITHIRD-f.TWOPI*r))/3)):r<2/3?(r-=1/3,a=1-((t=(1-o)/3)+(n=(1+o*P(f.TWOPI*r)/P(f.PITHIRD-f.TWOPI*r))/3))):(r-=2/3,t=1-((n=(1-o)/3)+(a=(1+o*P(f.TWOPI*r)/P(f.PITHIRD-f.TWOPI*r))/3))),[255*(t=(0,f.limit)(l*t*3)),255*(n=(0,f.limit)(l*n*3)),255*(a=(0,f.limit)(l*a*3)),e.length>3?e[3]:1];},c.default.autodetect.push({p:2,test:(...e)=>{if(e=(0,f.unpack)(e,"hsi"),"array"===(0,f.type)(e)&&3===e.length)return"hsi";}}),s.default.prototype.hsl=function(){return b(this._rgb);},d.hsl=(...e)=>new s.default(...e,"hsl"),c.default.format.hsl=E,c.default.autodetect.push({p:2,test:(...e)=>{if(e=(0,f.unpack)(e,"hsl"),"array"===(0,f.type)(e)&&3===e.length)return"hsl";}});let{floor:q}=Math,{min:K,max:W}=Math,V=(...e)=>{let t,n,a;let[r,o,l]=e=(0,f.unpack)(e,"rgb"),i=K(r,o,l),s=W(r,o,l),d=s-i;return a=s/255,0===s?(t=Number.NaN,n=0):(n=d/s,r===s&&(t=(o-l)/d),o===s&&(t=2+(l-r)/d),l===s&&(t=4+(r-o)/d),(t*=60)<0&&(t+=360)),[t,n,a];};s.default.prototype.hsv=function(){return V(this._rgb);},d.hsv=(...e)=>new s.default(...e,"hsv"),c.default.format.hsv=(...e)=>{let t,n,a;let[r,o,l]=e=(0,f.unpack)(e,"hsv");if(l*=255,0===o)t=n=a=l;else{360===r&&(r=0),r>360&&(r-=360),r<0&&(r+=360);let e=q(r/=60),i=r-e,s=l*(1-o),d=l*(1-o*i),u=l*(1-o*(1-i));switch(e){case 0:[t,n,a]=[l,u,s];break;case 1:[t,n,a]=[d,l,s];break;case 2:[t,n,a]=[s,l,u];break;case 3:[t,n,a]=[s,d,l];break;case 4:[t,n,a]=[u,s,l];break;case 5:[t,n,a]=[l,s,d];}}return[t,n,a,e.length>3?e[3]:1];},c.default.autodetect.push({p:2,test:(...e)=>{if(e=(0,f.unpack)(e,"hsv"),"array"===(0,f.type)(e)&&3===e.length)return"hsv";}});var H=n("98b1f5aa"),Y=a._(H),$=n("bc7f47d0"),z=a._($);s.default.prototype.lab=function(){return(0,z.default)(this._rgb);},d.lab=(...e)=>new s.default(...e,"lab"),c.default.format.lab=Y.default,c.default.autodetect.push({p:2,test:(...e)=>{if(e=(0,f.unpack)(e,"lab"),"array"===(0,f.type)(e)&&3===e.length)return"lab";}});var X=n("126d30f6"),Q=a._(X);let Z=(...e)=>{let[t,n,a]=e=(0,f.unpack)(e,"lch"),[r,o,l]=(0,Q.default)(t,n,a),[i,s,d]=(0,Y.default)(r,o,l);return[i,s,d,e.length>3?e[3]:1];};var J=n("4f82ef41"),ee=a._(J);let et=(...e)=>{let[t,n,a]=(0,f.unpack)(e,"rgb"),[r,o,l]=(0,z.default)(t,n,a);return(0,ee.default)(r,o,l);};s.default.prototype.lch=function(){return et(this._rgb);},s.default.prototype.hcl=function(){return et(this._rgb).reverse();},d.lch=(...e)=>new s.default(...e,"lch"),d.hcl=(...e)=>new s.default(...e,"hcl"),c.default.format.lch=Z,c.default.format.hcl=(...e)=>Z(...(0,f.unpack)(e,"hcl").reverse()),["lch","hcl"].forEach(e=>c.default.autodetect.push({p:2,test:(...t)=>{if(t=(0,f.unpack)(t,e),"array"===(0,f.type)(t)&&3===t.length)return e;}}));let en={aliceblue:"#f0f8ff",antiquewhite:"#faebd7",aqua:"#00ffff",aquamarine:"#7fffd4",azure:"#f0ffff",beige:"#f5f5dc",bisque:"#ffe4c4",black:"#000000",blanchedalmond:"#ffebcd",blue:"#0000ff",blueviolet:"#8a2be2",brown:"#a52a2a",burlywood:"#deb887",cadetblue:"#5f9ea0",chartreuse:"#7fff00",chocolate:"#d2691e",coral:"#ff7f50",cornflowerblue:"#6495ed",cornsilk:"#fff8dc",crimson:"#dc143c",cyan:"#00ffff",darkblue:"#00008b",darkcyan:"#008b8b",darkgoldenrod:"#b8860b",darkgray:"#a9a9a9",darkgreen:"#006400",darkgrey:"#a9a9a9",darkkhaki:"#bdb76b",darkmagenta:"#8b008b",darkolivegreen:"#556b2f",darkorange:"#ff8c00",darkorchid:"#9932cc",darkred:"#8b0000",darksalmon:"#e9967a",darkseagreen:"#8fbc8f",darkslateblue:"#483d8b",darkslategray:"#2f4f4f",darkslategrey:"#2f4f4f",darkturquoise:"#00ced1",darkviolet:"#9400d3",deeppink:"#ff1493",deepskyblue:"#00bfff",dimgray:"#696969",dimgrey:"#696969",dodgerblue:"#1e90ff",firebrick:"#b22222",floralwhite:"#fffaf0",forestgreen:"#228b22",fuchsia:"#ff00ff",gainsboro:"#dcdcdc",ghostwhite:"#f8f8ff",gold:"#ffd700",goldenrod:"#daa520",gray:"#808080",green:"#008000",greenyellow:"#adff2f",grey:"#808080",honeydew:"#f0fff0",hotpink:"#ff69b4",indianred:"#cd5c5c",indigo:"#4b0082",ivory:"#fffff0",khaki:"#f0e68c",laserlemon:"#ffff54",lavender:"#e6e6fa",lavenderblush:"#fff0f5",lawngreen:"#7cfc00",lemonchiffon:"#fffacd",lightblue:"#add8e6",lightcoral:"#f08080",lightcyan:"#e0ffff",lightgoldenrod:"#fafad2",lightgoldenrodyellow:"#fafad2",lightgray:"#d3d3d3",lightgreen:"#90ee90",lightgrey:"#d3d3d3",lightpink:"#ffb6c1",lightsalmon:"#ffa07a",lightseagreen:"#20b2aa",lightskyblue:"#87cefa",lightslategray:"#778899",lightslategrey:"#778899",lightsteelblue:"#b0c4de",lightyellow:"#ffffe0",lime:"#00ff00",limegreen:"#32cd32",linen:"#faf0e6",magenta:"#ff00ff",maroon:"#800000",maroon2:"#7f0000",maroon3:"#b03060",mediumaquamarine:"#66cdaa",mediumblue:"#0000cd",mediumorchid:"#ba55d3",mediumpurple:"#9370db",mediumseagreen:"#3cb371",mediumslateblue:"#7b68ee",mediumspringgreen:"#00fa9a",mediumturquoise:"#48d1cc",mediumvioletred:"#c71585",midnightblue:"#191970",mintcream:"#f5fffa",mistyrose:"#ffe4e1",moccasin:"#ffe4b5",navajowhite:"#ffdead",navy:"#000080",oldlace:"#fdf5e6",olive:"#808000",olivedrab:"#6b8e23",orange:"#ffa500",orangered:"#ff4500",orchid:"#da70d6",palegoldenrod:"#eee8aa",palegreen:"#98fb98",paleturquoise:"#afeeee",palevioletred:"#db7093",papayawhip:"#ffefd5",peachpuff:"#ffdab9",peru:"#cd853f",pink:"#ffc0cb",plum:"#dda0dd",powderblue:"#b0e0e6",purple:"#800080",purple2:"#7f007f",purple3:"#a020f0",rebeccapurple:"#663399",red:"#ff0000",rosybrown:"#bc8f8f",royalblue:"#4169e1",saddlebrown:"#8b4513",salmon:"#fa8072",sandybrown:"#f4a460",seagreen:"#2e8b57",seashell:"#fff5ee",sienna:"#a0522d",silver:"#c0c0c0",skyblue:"#87ceeb",slateblue:"#6a5acd",slategray:"#708090",slategrey:"#708090",snow:"#fffafa",springgreen:"#00ff7f",steelblue:"#4682b4",tan:"#d2b48c",teal:"#008080",thistle:"#d8bfd8",tomato:"#ff6347",turquoise:"#40e0d0",violet:"#ee82ee",wheat:"#f5deb3",white:"#ffffff",whitesmoke:"#f5f5f5",yellow:"#ffff00",yellowgreen:"#9acd32"};s.default.prototype.name=function(){let e=M(this._rgb,"rgb");for(let t of Object.keys(en))if(en[t]===e)return t.toLowerCase();return e;},c.default.format.named=e=>{if(en[e=e.toLowerCase()])return D(en[e]);throw Error("unknown color name: "+e);},c.default.autodetect.push({p:5,test:(e,...t)=>{if(!t.length&&"string"===(0,f.type)(e)&&en[e.toLowerCase()])return"named";}});let ea=(...e)=>{let[t,n,a]=(0,f.unpack)(e,"rgb");return(t<<16)+(n<<8)+a;};s.default.prototype.num=function(){return ea(this._rgb);},d.num=(...e)=>new s.default(...e,"num"),c.default.format.num=e=>{if("number"==(0,f.type)(e)&&e>=0&&e<=16777215)return[e>>16,e>>8&255,255&e,1];throw Error("unknown num color: "+e);},c.default.autodetect.push({p:5,test:(...e)=>{if(1===e.length&&"number"===(0,f.type)(e[0])&&e[0]>=0&&e[0]<=16777215)return"num";}});let{round:er}=Math;s.default.prototype.rgb=function(e=!0){return!1===e?this._rgb.slice(0,3):this._rgb.slice(0,3).map(er);},s.default.prototype.rgba=function(e=!0){return this._rgb.slice(0,4).map((t,n)=>n<3?!1===e?t:er(t):t);},d.rgb=(...e)=>new s.default(...e,"rgb"),c.default.format.rgb=(...e)=>{let t=(0,f.unpack)(e,"rgba");return void 0===t[3]&&(t[3]=1),t;},c.default.autodetect.push({p:3,test:(...e)=>{if(e=(0,f.unpack)(e,"rgba"),"array"===(0,f.type)(e)&&(3===e.length||4===e.length&&"number"==(0,f.type)(e[3])&&e[3]>=0&&e[3]<=1))return"rgb";}});let{log:eo}=Math,el=e=>{let t,n,a;let r=e/100;return r<66?(t=255,n=r<6?0:-155.25485562709179-.44596950469579133*(n=r-2)+104.49216199393888*eo(n),a=r<20?0:-254.76935184120902+.8274096064007395*(a=r-10)+115.67994401066147*eo(a)):(t=351.97690566805693+.114206453784165*(t=r-55)-40.25366309332127*eo(t),n=325.4494125711974+.07943456536662342*(n=r-50)-28.0852963507957*eo(n),a=255),[t,n,a,1];},{round:ei}=Math,es=(...e)=>{let t;let n=(0,f.unpack)(e,"rgb"),a=n[0],r=n[2],o=1e3,l=4e4;for(;l-o>.4;){let e=el(t=(l+o)*.5);e[2]/e[0]>=r/a?l=t:o=t;}return ei(t);};s.default.prototype.temp=s.default.prototype.kelvin=s.default.prototype.temperature=function(){return es(this._rgb);},d.temp=d.kelvin=d.temperature=(...e)=>new s.default(...e,"temp"),c.default.format.temp=c.default.format.kelvin=c.default.format.temperature=el;var ed=n("2d8b945d"),eu=a._(ed),ec=n("7f9df5e3"),ef=a._(ec);s.default.prototype.oklab=function(){return(0,ef.default)(this._rgb);},d.oklab=(...e)=>new s.default(...e,"oklab"),c.default.format.oklab=eu.default,c.default.autodetect.push({p:3,test:(...e)=>{if(e=(0,f.unpack)(e,"oklab"),"array"===(0,f.type)(e)&&3===e.length)return"oklab";}});let eg=(...e)=>{let[t,n,a]=(0,f.unpack)(e,"rgb"),[r,o,l]=(0,ef.default)(t,n,a);return(0,ee.default)(r,o,l);};s.default.prototype.oklch=function(){return eg(this._rgb);},d.oklch=(...e)=>new s.default(...e,"oklch"),c.default.format.oklch=(...e)=>{let[t,n,a]=e=(0,f.unpack)(e,"lch"),[r,o,l]=(0,Q.default)(t,n,a),[i,s,d]=(0,eu.default)(r,o,l);return[i,s,d,e.length>3?e[3]:1];},c.default.autodetect.push({p:3,test:(...e)=>{if(e=(0,f.unpack)(e,"oklch"),"array"===(0,f.type)(e)&&3===e.length)return"oklch";}}),s.default.prototype.alpha=function(e,t=!1){return void 0!==e&&"number"===(0,f.type)(e)?t?(this._rgb[3]=e,this):new s.default([this._rgb[0],this._rgb[1],this._rgb[2],e],"rgb"):this._rgb[3];},s.default.prototype.clipped=function(){return this._rgb._clipped||!1;};var ep=n("95f38a02"),eh=a._(ep);s.default.prototype.darken=function(e=1){let t=this.lab();return t[0]-=eh.default.Kn*e,new s.default(t,"lab").alpha(this.alpha(),!0);},s.default.prototype.brighten=function(e=1){return this.darken(-e);},s.default.prototype.darker=s.default.prototype.darken,s.default.prototype.brighter=s.default.prototype.brighten,s.default.prototype.get=function(e){let[t,n]=e.split("."),a=this[t]();if(!n)return a;{let e=t.indexOf(n)-("ok"===t.substr(0,2)?2:0);if(e>-1)return a[e];throw Error(`unknown channel ${n} in mode ${t}`);}};let{pow:em}=Math;s.default.prototype.luminance=function(e,t="rgb"){if(void 0!==e&&"number"===(0,f.type)(e)){if(0===e)return new s.default([0,0,0,this._rgb[3]],"rgb");if(1===e)return new s.default([255,255,255,this._rgb[3]],"rgb");let n=this.luminance(),a=20,r=(n,o)=>{let l=n.interpolate(o,.5,t),i=l.luminance();return!(1e-7>Math.abs(e-i))&&a--?i>e?r(n,l):r(l,o):l;},o=(n>e?r(new s.default([0,0,0]),this):r(this,new s.default([255,255,255]))).rgb();return new s.default([...o,this._rgb[3]]);}return eb(...this._rgb.slice(0,3));};let eb=(e,t,n)=>.2126*(e=ey(e))+.7152*(t=ey(t))+.0722*(n=ey(n)),ey=e=>(e/=255)<=.03928?e/12.92:em((e+.055)/1.055,2.4);var ev={},eT=(e,t,n=.5,...a)=>{let r=a[0]||"lrgb";if(ev[r]||a.length||(r=Object.keys(ev)[0]),!ev[r])throw Error(`interpolation mode ${r} is not defined`);return"object"!==(0,f.type)(e)&&(e=new s.default(e)),"object"!==(0,f.type)(t)&&(t=new s.default(t)),ev[r](e,t,n).alpha(e.alpha()+n*(t.alpha()-e.alpha()));};s.default.prototype.mix=s.default.prototype.interpolate=function(e,t=.5,...n){return eT(this,e,t,...n);},s.default.prototype.premultiply=function(e=!1){let t=this._rgb,n=t[3];return e?(this._rgb=[t[0]*n,t[1]*n,t[2]*n,n],this):new s.default([t[0]*n,t[1]*n,t[2]*n,n],"rgb");},s.default.prototype.saturate=function(e=1){let t=this.lch();return t[1]+=eh.default.Kn*e,t[1]<0&&(t[1]=0),new s.default(t,"lch").alpha(this.alpha(),!0);},s.default.prototype.desaturate=function(e=1){return this.saturate(-e);},s.default.prototype.set=function(e,t,n=!1){let[a,r]=e.split("."),o=this[a]();if(!r)return o;{let e=a.indexOf(r)-("ok"===a.substr(0,2)?2:0);if(e>-1){if("string"==(0,f.type)(t))switch(t.charAt(0)){case"+":case"-":o[e]+=+t;break;case"*":o[e]*=+t.substr(1);break;case"/":o[e]/=+t.substr(1);break;default:o[e]=+t;}else if("number"===(0,f.type)(t))o[e]=t;else throw Error("unsupported value for Color.set");let r=new s.default(o,a);return n?(this._rgb=r._rgb,this):r;}throw Error(`unknown channel ${r} in mode ${a}`);}},s.default.prototype.tint=function(e=.5,...t){return eT(this,"white",e,...t);},s.default.prototype.shade=function(e=.5,...t){return eT(this,"black",e,...t);},ev.rgb=(e,t,n)=>{let a=e._rgb,r=t._rgb;return new s.default(a[0]+n*(r[0]-a[0]),a[1]+n*(r[1]-a[1]),a[2]+n*(r[2]-a[2]),"rgb");};let{sqrt:eE,pow:eC}=Math;ev.lrgb=(e,t,n)=>{let[a,r,o]=e._rgb,[l,i,d]=t._rgb;return new s.default(eE(eC(a,2)*(1-n)+eC(l,2)*n),eE(eC(r,2)*(1-n)+eC(i,2)*n),eE(eC(o,2)*(1-n)+eC(d,2)*n),"rgb");},ev.lab=(e,t,n)=>{let a=e.lab(),r=t.lab();return new s.default(a[0]+n*(r[0]-a[0]),a[1]+n*(r[1]-a[1]),a[2]+n*(r[2]-a[2]),"lab");};var ex=(e,t,n,a)=>{let r,o,l,i,d,u,c,f,g,p,h,m;return"hsl"===a?(r=e.hsl(),o=t.hsl()):"hsv"===a?(r=e.hsv(),o=t.hsv()):"hcg"===a?(r=e.hcg(),o=t.hcg()):"hsi"===a?(r=e.hsi(),o=t.hsi()):"lch"===a||"hcl"===a?(a="hcl",r=e.hcl(),o=t.hcl()):"oklch"===a&&(r=e.oklch().reverse(),o=t.oklch().reverse()),("h"===a.substr(0,1)||"oklch"===a)&&([l,d,c]=r,[i,u,f]=o),isNaN(l)||isNaN(i)?isNaN(l)?isNaN(i)?p=Number.NaN:(p=i,(1==c||0==c)&&"hsv"!=a&&(g=u)):(p=l,(1==f||0==f)&&"hsv"!=a&&(g=d)):(m=i>l&&i-l>180?i-(l+360):i<l&&l-i>180?i+360-l:i-l,p=l+n*m),void 0===g&&(g=d+n*(u-d)),h=c+n*(f-c),"oklch"===a?new s.default([h,g,p],a):new s.default([p,g,h],a);};let e_=(e,t,n)=>ex(e,t,n,"lch");ev.lch=e_,ev.hcl=e_,ev.num=(e,t,n)=>{let a=e.num(),r=t.num();return new s.default(a+n*(r-a),"num");},ev.hcg=(e,t,n)=>ex(e,t,n,"hcg"),ev.hsi=(e,t,n)=>ex(e,t,n,"hsi"),ev.hsl=(e,t,n)=>ex(e,t,n,"hsl"),ev.hsv=(e,t,n)=>ex(e,t,n,"hsv"),ev.oklab=(e,t,n)=>{let a=e.oklab(),r=t.oklab();return new s.default(a[0]+n*(r[0]-a[0]),a[1]+n*(r[1]-a[1]),a[2]+n*(r[2]-a[2]),"oklab");},ev.oklch=(e,t,n)=>ex(e,t,n,"oklch");let{pow:eS,sqrt:ew,PI:eI,cos:ek,sin:eN,atan2:eL}=Math,ej=(e,t)=>{let n=e.length,a=[0,0,0,0];for(let r=0;r<e.length;r++){let o=e[r],l=t[r]/n,i=o._rgb;a[0]+=eS(i[0],2)*l,a[1]+=eS(i[1],2)*l,a[2]+=eS(i[2],2)*l,a[3]+=i[3]*l;}return a[0]=ew(a[0]),a[1]=ew(a[1]),a[2]=ew(a[2]),a[3]>.9999999&&(a[3]=1),new s.default((0,f.clip_rgb)(a));},{pow:eO}=Math;var eR=function(e){let t="rgb",n=d("#ccc"),a=0,r=[0,1],o=[],l=[0,0],i=!1,s=[],u=!1,c=0,g=1,p=!1,h={},m=!0,b=1,y=function(e){if(e=e||["#fff","#000"],"string"===(0,f.type)(e)&&d.brewer&&d.brewer[e.toLowerCase()]&&(e=d.brewer[e.toLowerCase()]),"array"===(0,f.type)(e)){1===e.length&&(e=[e[0],e[0]]),e=e.slice(0);for(let t=0;t<e.length;t++)e[t]=d(e[t]);o.length=0;for(let t=0;t<e.length;t++)o.push(t/(e.length-1));}return x(),s=e;},v=function(e){if(null!=i){let t=i.length-1,n=0;for(;n<t&&e>=i[n];)n++;return n-1;}return 0;},T=e=>e,E=e=>e,C=function(e,a){let r,u;if(null==a&&(a=!1),isNaN(e)||null===e)return n;u=a?e:i&&i.length>2?v(e)/(i.length-2):g!==c?(e-c)/(g-c):1,u=E(u),a||(u=T(u)),1!==b&&(u=eO(u,b)),u=l[0]+u*(1-l[0]-l[1]);let p=Math.floor(1e4*(u=(0,f.limit)(u,0,1)));if(m&&h[p])r=h[p];else{if("array"===(0,f.type)(s))for(let e=0;e<o.length;e++){let n=o[e];if(u<=n||u>=n&&e===o.length-1){r=s[e];break;}if(u>n&&u<o[e+1]){u=(u-n)/(o[e+1]-n),r=d.interpolate(s[e],s[e+1],u,t);break;}}else"function"===(0,f.type)(s)&&(r=s(u));m&&(h[p]=r);}return r;};var x=()=>h={};y(e);let _=function(e){let t=d(C(e));return u&&t[u]?t[u]():t;};return _.classes=function(e){if(null!=e){if("array"===(0,f.type)(e))i=e,r=[e[0],e[e.length-1]];else{let t=d.analyze(r);i=0===e?[t.min,t.max]:d.limits(t,"e",e);}return _;}return i;},_.domain=function(e){if(!arguments.length)return r;c=e[0],g=e[e.length-1],o=[];let t=s.length;if(e.length===t&&c!==g)for(let t of Array.from(e))o.push((t-c)/(g-c));else{for(let e=0;e<t;e++)o.push(e/(t-1));if(e.length>2){let t=e.map((t,n)=>n/(e.length-1)),n=e.map(e=>(e-c)/(g-c));n.every((e,n)=>t[n]===e)||(E=e=>{if(e<=0||e>=1)return e;let a=0;for(;e>=n[a+1];)a++;let r=(e-n[a])/(n[a+1]-n[a]);return t[a]+r*(t[a+1]-t[a]);});}}return r=[c,g],_;},_.mode=function(e){return arguments.length?(t=e,x(),_):t;},_.range=function(e,t){return y(e,t),_;},_.out=function(e){return u=e,_;},_.spread=function(e){return arguments.length?(a=e,_):a;},_.correctLightness=function(e){return null==e&&(e=!0),p=e,x(),T=p?function(e){let t=C(0,!0).lab()[0],n=C(1,!0).lab()[0],a=t>n,r=C(e,!0).lab()[0],o=t+(n-t)*e,l=r-o,i=0,s=1,d=20;for(;Math.abs(l)>.01&&d-- >0;)a&&(l*=-1),l<0?(i=e,e+=(s-e)*.5):(s=e,e+=(i-e)*.5),l=(r=C(e,!0).lab()[0])-o;return e;}:e=>e,_;},_.padding=function(e){return null!=e?("number"===(0,f.type)(e)&&(e=[e,e]),l=e,_):l;},_.colors=function(t,n){arguments.length<2&&(n="hex");let a=[];if(0==arguments.length)a=s.slice(0);else if(1===t)a=[_(.5)];else if(t>1){let e=r[0],n=r[1]-e;a=(function(e,t,n){let a=[],r=0<t,o=n?r?t+1:t-1:t;for(let e=0;r?e<o:e>o;r?e++:e--)a.push(e);return a;})(0,t,!1).map(a=>_(e+a/(t-1)*n));}else{e=[];let t=[];if(i&&i.length>2)for(let e=1,n=i.length,a=1<=n;a?e<n:e>n;a?e++:e--)t.push((i[e-1]+i[e])*.5);else t=r;a=t.map(e=>_(e));}return d[n]&&(a=a.map(e=>e[n]())),a;},_.cache=function(e){return null!=e?(m=e,_):m;},_.gamma=function(e){return null!=e?(b=e,_):b;},_.nodata=function(e){return null!=e?(n=d(e),_):n;},_;};let eD=function(e){let t=[1,1];for(let n=1;n<e;n++){let e=[1];for(let n=1;n<=t.length;n++)e[n]=(t[n]||0)+t[n-1];t=e;}return t;},eA=function(e){let t,n,a,r;if(2===(e=e.map(e=>new s.default(e))).length)[n,a]=e.map(e=>e.lab()),t=function(e){let t=[0,1,2].map(t=>n[t]+e*(a[t]-n[t]));return new s.default(t,"lab");};else if(3===e.length)[n,a,r]=e.map(e=>e.lab()),t=function(e){let t=[0,1,2].map(t=>(1-e)*(1-e)*n[t]+2*(1-e)*e*a[t]+e*e*r[t]);return new s.default(t,"lab");};else if(4===e.length){let o;[n,a,r,o]=e.map(e=>e.lab()),t=function(e){let t=[0,1,2].map(t=>(1-e)*(1-e)*(1-e)*n[t]+3*(1-e)*(1-e)*e*a[t]+3*(1-e)*e*e*r[t]+e*e*e*o[t]);return new s.default(t,"lab");};}else if(e.length>=5){let n,a,r;n=e.map(e=>e.lab()),a=eD(r=e.length-1),t=function(e){let t=1-e,o=[0,1,2].map(o=>n.reduce((n,l,i)=>n+a[i]*t**(r-i)*e**i*l[o],0));return new s.default(o,"lab");};}else throw RangeError("No point in running bezier with only one color.");return t;},eM=(e,t,n)=>{if(!eM[n])throw Error("unknown blend mode "+n);return eM[n](e,t);},eP=e=>(t,n)=>{let a=d(n).rgb(),r=d(t).rgb();return d.rgb(e(a,r));},eU=e=>(t,n)=>{let a=[];return a[0]=e(t[0],n[0]),a[1]=e(t[1],n[1]),a[2]=e(t[2],n[2]),a;};eM.normal=eP(eU(e=>e)),eM.multiply=eP(eU((e,t)=>e*t/255)),eM.screen=eP(eU((e,t)=>255*(1-(1-e/255)*(1-t/255)))),eM.overlay=eP(eU((e,t)=>t<128?2*e*t/255:255*(1-2*(1-e/255)*(1-t/255)))),eM.darken=eP(eU((e,t)=>e>t?t:e)),eM.lighten=eP(eU((e,t)=>e>t?e:t)),eM.dodge=eP(eU((e,t)=>255===e?255:(e=t/255*255/(1-e/255))>255?255:e)),eM.burn=eP(eU((e,t)=>255*(1-(1-t/255)/(e/255))));let{pow:eF,sin:eG,cos:eB}=Math,{floor:eq,random:eK}=Math;var eW=n("649dc35c"),eV=a._(eW);let{log:eH,pow:eY,floor:e$,abs:ez}=Math;function eX(e,t=null){let n={min:Number.MAX_VALUE,max:-1*Number.MAX_VALUE,sum:0,values:[],count:0};return"object"===(0,eV.default)(e)&&(e=Object.values(e)),e.forEach(e=>{t&&"object"===(0,eV.default)(e)&&(e=e[t]),null==e||isNaN(e)||(n.values.push(e),n.sum+=e,e<n.min&&(n.min=e),e>n.max&&(n.max=e),n.count+=1);}),n.domain=[n.min,n.max],n.limits=(e,t)=>eQ(n,e,t),n;}function eQ(e,t="equal",n=7){"array"==(0,eV.default)(e)&&(e=eX(e));let{min:a,max:r}=e,o=e.values.sort((e,t)=>e-t);if(1===n)return[a,r];let l=[];if("c"===t.substr(0,1)&&(l.push(a),l.push(r)),"e"===t.substr(0,1)){l.push(a);for(let e=1;e<n;e++)l.push(a+e/n*(r-a));l.push(r);}else if("l"===t.substr(0,1)){if(a<=0)throw Error("Logarithmic scales are only possible for values > 0");let e=Math.LOG10E*eH(a),t=Math.LOG10E*eH(r);l.push(a);for(let a=1;a<n;a++)l.push(eY(10,e+a/n*(t-e)));l.push(r);}else if("q"===t.substr(0,1)){l.push(a);for(let e=1;e<n;e++){let t=(o.length-1)*e/n,a=e$(t);if(a===t)l.push(o[a]);else{let e=t-a;l.push(o[a]*(1-e)+o[a+1]*e);}}l.push(r);}else if("k"===t.substr(0,1)){let e;let t=o.length,i=Array(t),s=Array(n),d=!0,u=0,c=null;(c=[]).push(a);for(let e=1;e<n;e++)c.push(a+e/n*(r-a));for(c.push(r);d;){for(let e=0;e<n;e++)s[e]=0;for(let e=0;e<t;e++){let t;let a=o[e],r=Number.MAX_VALUE;for(let o=0;o<n;o++){let n=ez(c[o]-a);n<r&&(r=n,t=o),s[t]++,i[e]=t;}}let a=Array(n);for(let e=0;e<n;e++)a[e]=null;for(let n=0;n<t;n++)null===a[e=i[n]]?a[e]=o[n]:a[e]+=o[n];for(let e=0;e<n;e++)a[e]*=1/s[e];d=!1;for(let e=0;e<n;e++)if(a[e]!==c[e]){d=!0;break;}c=a,++u>200&&(d=!1);}let f={};for(let e=0;e<n;e++)f[e]=[];for(let n=0;n<t;n++)f[e=i[n]].push(o[n]);let g=[];for(let e=0;e<n;e++)g.push(f[e][0]),g.push(f[e][f[e].length-1]);g=g.sort((e,t)=>e-t),l.push(g[0]);for(let e=1;e<g.length;e+=2){let t=g[e];isNaN(t)||-1!==l.indexOf(t)||l.push(t);}}return l;}let{sqrt:eZ,pow:eJ,min:e0,max:e1,atan2:e2,abs:e5,cos:e3,sin:e6,exp:e4,PI:e9}=Math,e7={OrRd:["#fff7ec","#fee8c8","#fdd49e","#fdbb84","#fc8d59","#ef6548","#d7301f","#b30000","#7f0000"],PuBu:["#fff7fb","#ece7f2","#d0d1e6","#a6bddb","#74a9cf","#3690c0","#0570b0","#045a8d","#023858"],BuPu:["#f7fcfd","#e0ecf4","#bfd3e6","#9ebcda","#8c96c6","#8c6bb1","#88419d","#810f7c","#4d004b"],Oranges:["#fff5eb","#fee6ce","#fdd0a2","#fdae6b","#fd8d3c","#f16913","#d94801","#a63603","#7f2704"],BuGn:["#f7fcfd","#e5f5f9","#ccece6","#99d8c9","#66c2a4","#41ae76","#238b45","#006d2c","#00441b"],YlOrBr:["#ffffe5","#fff7bc","#fee391","#fec44f","#fe9929","#ec7014","#cc4c02","#993404","#662506"],YlGn:["#ffffe5","#f7fcb9","#d9f0a3","#addd8e","#78c679","#41ab5d","#238443","#006837","#004529"],Reds:["#fff5f0","#fee0d2","#fcbba1","#fc9272","#fb6a4a","#ef3b2c","#cb181d","#a50f15","#67000d"],RdPu:["#fff7f3","#fde0dd","#fcc5c0","#fa9fb5","#f768a1","#dd3497","#ae017e","#7a0177","#49006a"],Greens:["#f7fcf5","#e5f5e0","#c7e9c0","#a1d99b","#74c476","#41ab5d","#238b45","#006d2c","#00441b"],YlGnBu:["#ffffd9","#edf8b1","#c7e9b4","#7fcdbb","#41b6c4","#1d91c0","#225ea8","#253494","#081d58"],Purples:["#fcfbfd","#efedf5","#dadaeb","#bcbddc","#9e9ac8","#807dba","#6a51a3","#54278f","#3f007d"],GnBu:["#f7fcf0","#e0f3db","#ccebc5","#a8ddb5","#7bccc4","#4eb3d3","#2b8cbe","#0868ac","#084081"],Greys:["#ffffff","#f0f0f0","#d9d9d9","#bdbdbd","#969696","#737373","#525252","#252525","#000000"],YlOrRd:["#ffffcc","#ffeda0","#fed976","#feb24c","#fd8d3c","#fc4e2a","#e31a1c","#bd0026","#800026"],PuRd:["#f7f4f9","#e7e1ef","#d4b9da","#c994c7","#df65b0","#e7298a","#ce1256","#980043","#67001f"],Blues:["#f7fbff","#deebf7","#c6dbef","#9ecae1","#6baed6","#4292c6","#2171b5","#08519c","#08306b"],PuBuGn:["#fff7fb","#ece2f0","#d0d1e6","#a6bddb","#67a9cf","#3690c0","#02818a","#016c59","#014636"],Viridis:["#440154","#482777","#3f4a8a","#31678e","#26838f","#1f9d8a","#6cce5a","#b6de2b","#fee825"],Spectral:["#9e0142","#d53e4f","#f46d43","#fdae61","#fee08b","#ffffbf","#e6f598","#abdda4","#66c2a5","#3288bd","#5e4fa2"],RdYlGn:["#a50026","#d73027","#f46d43","#fdae61","#fee08b","#ffffbf","#d9ef8b","#a6d96a","#66bd63","#1a9850","#006837"],RdBu:["#67001f","#b2182b","#d6604d","#f4a582","#fddbc7","#f7f7f7","#d1e5f0","#92c5de","#4393c3","#2166ac","#053061"],PiYG:["#8e0152","#c51b7d","#de77ae","#f1b6da","#fde0ef","#f7f7f7","#e6f5d0","#b8e186","#7fbc41","#4d9221","#276419"],PRGn:["#40004b","#762a83","#9970ab","#c2a5cf","#e7d4e8","#f7f7f7","#d9f0d3","#a6dba0","#5aae61","#1b7837","#00441b"],RdYlBu:["#a50026","#d73027","#f46d43","#fdae61","#fee090","#ffffbf","#e0f3f8","#abd9e9","#74add1","#4575b4","#313695"],BrBG:["#543005","#8c510a","#bf812d","#dfc27d","#f6e8c3","#f5f5f5","#c7eae5","#80cdc1","#35978f","#01665e","#003c30"],RdGy:["#67001f","#b2182b","#d6604d","#f4a582","#fddbc7","#ffffff","#e0e0e0","#bababa","#878787","#4d4d4d","#1a1a1a"],PuOr:["#7f3b08","#b35806","#e08214","#fdb863","#fee0b6","#f7f7f7","#d8daeb","#b2abd2","#8073ac","#542788","#2d004b"],Set2:["#66c2a5","#fc8d62","#8da0cb","#e78ac3","#a6d854","#ffd92f","#e5c494","#b3b3b3"],Accent:["#7fc97f","#beaed4","#fdc086","#ffff99","#386cb0","#f0027f","#bf5b17","#666666"],Set1:["#e41a1c","#377eb8","#4daf4a","#984ea3","#ff7f00","#ffff33","#a65628","#f781bf","#999999"],Set3:["#8dd3c7","#ffffb3","#bebada","#fb8072","#80b1d3","#fdb462","#b3de69","#fccde5","#d9d9d9","#bc80bd","#ccebc5","#ffed6f"],Dark2:["#1b9e77","#d95f02","#7570b3","#e7298a","#66a61e","#e6ab02","#a6761d","#666666"],Paired:["#a6cee3","#1f78b4","#b2df8a","#33a02c","#fb9a99","#e31a1c","#fdbf6f","#ff7f00","#cab2d6","#6a3d9a","#ffff99","#b15928"],Pastel2:["#b3e2cd","#fdcdac","#cbd5e8","#f4cae4","#e6f5c9","#fff2ae","#f1e2cc","#cccccc"],Pastel1:["#fbb4ae","#b3cde3","#ccebc5","#decbe4","#fed9a6","#ffffcc","#e5d8bd","#fddaec","#f2f2f2"]};for(let e of Object.keys(e7))e7[e.toLowerCase()]=e7[e];Object.assign(d,{average:(e,t="lrgb",n=null)=>{let a=e.length;n||(n=Array.from(Array(a)).map(()=>1));let r=a/n.reduce(function(e,t){return e+t;});if(n.forEach((e,t)=>{n[t]*=r;}),e=e.map(e=>new s.default(e)),"lrgb"===t)return ej(e,n);let o=e.shift(),l=o.get(t),i=[],d=0,u=0;for(let e=0;e<l.length;e++)if(l[e]=(l[e]||0)*n[0],i.push(isNaN(l[e])?0:n[0]),"h"===t.charAt(e)&&!isNaN(l[e])){let t=l[e]/180*eI;d+=ek(t)*n[0],u+=eN(t)*n[0];}let c=o.alpha()*n[0];e.forEach((e,a)=>{let r=e.get(t);c+=e.alpha()*n[a+1];for(let e=0;e<l.length;e++)if(!isNaN(r[e])){if(i[e]+=n[a+1],"h"===t.charAt(e)){let t=r[e]/180*eI;d+=ek(t)*n[a+1],u+=eN(t)*n[a+1];}else l[e]+=r[e]*n[a+1];}});for(let e=0;e<l.length;e++)if("h"===t.charAt(e)){let t=eL(u/i[e],d/i[e])/eI*180;for(;t<0;)t+=360;for(;t>=360;)t-=360;l[e]=t;}else l[e]=l[e]/i[e];return c/=a,new s.default(l,t).alpha(c>.99999?1:c,!0);},bezier:e=>{let t=eA(e);return t.scale=()=>eR(t),t;},blend:eM,cubehelix:function(e=300,t=-1.5,n=1,a=1,r=[0,1]){let o=0,l;"array"===(0,f.type)(r)?l=r[1]-r[0]:(l=0,r=[r,r]);let i=function(i){let s=f.TWOPI*((e+120)/360+t*i),u=eF(r[0]+l*i,a),c=(0!==o?n[0]+i*o:n)*u*(1-u)/2,g=eB(s),p=eG(s);return d((0,f.clip_rgb)([255*(u+c*(-.14861*g+1.78277*p)),255*(u+c*(-.29227*g-.90649*p)),255*(u+1.97294*g*c),1]));};return i.start=function(t){return null==t?e:(e=t,i);},i.rotations=function(e){return null==e?t:(t=e,i);},i.gamma=function(e){return null==e?a:(a=e,i);},i.hue=function(e){return null==e?n:(n=e,"array"===(0,f.type)(n)?0==(o=n[1]-n[0])&&(n=n[1]):o=0,i);},i.lightness=function(e){return null==e?r:("array"===(0,f.type)(e)?(r=e,l=e[1]-e[0]):(r=[e,e],l=0),i);},i.scale=()=>d.scale(i),i.hue(n),i;},mix:eT,interpolate:eT,random:()=>{let e="#";for(let t=0;t<6;t++)e+="0123456789abcdef".charAt(eq(16*eK()));return new s.default(e,"hex");},scale:eR,analyze:eX,contrast:(e,t)=>{e=new s.default(e),t=new s.default(t);let n=e.luminance(),a=t.luminance();return n>a?(n+.05)/(a+.05):(a+.05)/(n+.05);},deltaE:function(e,t,n=1,a=1,r=1){var o=function(e){return 360*e/(2*e9);},l=function(e){return 2*e9*e/360;};e=new s.default(e),t=new s.default(t);let[i,d,u]=Array.from(e.lab()),[c,f,g]=Array.from(t.lab()),p=(i+c)/2,h=(eZ(eJ(d,2)+eJ(u,2))+eZ(eJ(f,2)+eJ(g,2)))/2,m=.5*(1-eZ(eJ(h,7)/(eJ(h,7)+eJ(25,7)))),b=d*(1+m),y=f*(1+m),v=eZ(eJ(b,2)+eJ(u,2)),T=eZ(eJ(y,2)+eJ(g,2)),E=(v+T)/2,C=o(e2(u,b)),x=o(e2(g,y)),_=C>=0?C:C+360,S=x>=0?x:x+360,w=e5(_-S)>180?(_+S+360)/2:(_+S)/2,I=1-.17*e3(l(w-30))+.24*e3(l(2*w))+.32*e3(l(3*w+6))-.2*e3(l(4*w-63)),k=S-_;k=180>=e5(k)?k:S<=_?k+360:k-360,k=2*eZ(v*T)*e6(l(k)/2);let N=T-v,L=1+.015*eJ(p-50,2)/eZ(20+eJ(p-50,2)),j=1+.045*E,O=1+.015*E*I,R=30*e4(-eJ((w-275)/25,2)),D=-(2*eZ(eJ(E,7)/(eJ(E,7)+eJ(25,7))))*e6(2*l(R));return e1(0,e0(100,eZ(eJ((c-i)/(n*L),2)+eJ(N/(a*j),2)+eJ(k/(r*O),2)+N/(a*j)*D*(k/(r*O)))));},distance:function(e,t,n="lab"){e=new s.default(e),t=new s.default(t);let a=e.get(n),r=t.get(n),o=0;for(let e in a){let t=(a[e]||0)-(r[e]||0);o+=t*t;}return Math.sqrt(o);},limits:eQ,valid:(...e)=>{try{return new s.default(...e),!0;}catch(e){return!1;}},scales:{cool:()=>eR([d.hsl(180,1,.9),d.hsl(250,.7,.4)]),hot:()=>eR(["#000","#f00","#ff0","#fff"],[0,.25,.75,1]).mode("rgb")},input:c.default,colors:en,brewer:e7});var e8=n("02b696d0");let te=e=>({result:{desc:"",errCode:"",errMessage:"",success:!0,value:{entityType_2022081909929860:{storeType:["GEABASE","OFFLINE"],style:{color:"#7dd4a9",icon:"earth"},propertyImportConfig:{}},entityType_2022081909937545:{storeType:["GEABASE","OFFLINE"],style:{color:"#7dd4a9",icon:"earth"},propertyImportConfig:{}},entityType_707000094:{storeType:["OFFLINE"],style:{color:"#773b84",icon:"icon-location"},propertyImportConfig:{}},relationType_2022081909940654:{importConfig:{channels:["DSL","EXT_DATA_SOURCE","GRAPH_FEATURE","KNOWLEDGE_EDIT"],updateLogic:"LATEST"},style:{color:"#7dd4a9"}},entityType_707000091:{storeType:["OFFLINE"],style:{color:"default",icon:"icon-location"},propertyImportConfig:{}},entityType_2022042707115987:{storeType:["OFFLINE"],style:{color:"default",icon:"icon-location"},propertyImportConfig:{}},entityType_2022090210254685:{storeType:["OFFLINE"],style:{color:"default",icon:"icon-time-circle"},propertyImportConfig:{}},entityType_707000096:{storeType:["GEABASE","OFFLINE"],style:{color:"#d95084",icon:"trophy"},propertyImportConfig:{}},entityType_2023011786622911:{storeType:["OFFLINE"],style:{color:"default",icon:"icon-douyin"},propertyImportConfig:{}},entityType_2023031674179591:{storeType:["OFFLINE"],style:{color:"default",icon:"icon-time-circle"},propertyImportConfig:{}},entityType_707000128:{storeType:["OFFLINE"],style:{color:"#4997cc",icon:"icon-time-circle"},propertyImportConfig:{}},entityType_717001915:{storeType:["OFFLINE"],style:{color:"default",icon:"default"},propertyImportConfig:{}},relationType_310002166:{importConfig:{channels:["DSL","EXT_DATA_SOURCE","GRAPH_FEATURE","KNOWLEDGE_EDIT"],updateLogic:"LATEST"},style:{color:"#f19fc2"}},relationType_310002168:{importConfig:{channels:["DSL","EXT_DATA_SOURCE","GRAPH_FEATURE","KNOWLEDGE_EDIT"],updateLogic:"LATEST"},style:{color:"#61708f"}},entityType_2022062708201663:{storeType:["OFFLINE"],style:{color:"#d96c59",icon:"bell"},propertyImportConfig:{}},entityType_709000249:{storeType:["OFFLINE"],style:{color:"default",icon:"earth"},propertyImportConfig:{}},entityType_2022051307408527:{storeType:["OFFLINE"],style:{color:"#82c7e8",icon:"time-circle"},propertyImportConfig:{}},entityType_2021041201591615:{storeType:["OFFLINE"],style:{color:"#d96c59",icon:"default"},propertyImportConfig:{}},entityType_2022051007306817:{storeType:["GEABASE","OFFLINE"],style:{color:"#773b84",icon:"alert"},propertyImportConfig:{}},entityType_2022051007306819:{storeType:["OFFLINE"],style:{color:"default",icon:"error"},propertyImportConfig:{}},relationType_2022071908940364:{importConfig:{channels:["DSL","EXT_DATA_SOURCE","GRAPH_FEATURE","KNOWLEDGE_EDIT"],updateLogic:"LATEST"},style:{color:"#f19fc2"}},entityType_2020051900117533:{storeType:["OFFLINE"],style:{color:"#61708f",icon:"icon-YUAN"},propertyImportConfig:{}},entityType_2021080904358262:{storeType:["OFFLINE"],style:{color:"#edbe45",icon:"default"},propertyImportConfig:{}},entityType_2022101311255736:{storeType:["OFFLINE"],style:{color:"#d96c59",icon:"layout"},propertyImportConfig:{}},entityType_2020051400082972:{storeType:["OFFLINE"],style:{color:"default",icon:"default"},propertyImportConfig:{}},entityType_2022102611489478:{storeType:["OFFLINE"],style:{color:"#6590f2",icon:"default"},propertyImportConfig:{}},relationType_2021050601726121:{importConfig:{channels:["DSL","EXT_DATA_SOURCE","GRAPH_FEATURE","KNOWLEDGE_EDIT"],updateLogic:"LATEST"},style:{color:"#f19fc2"}},entityType_2022041106835958:{storeType:["OFFLINE"],style:{color:"#61708f",icon:"user"},propertyImportConfig:{}},relationType_2020120900865231:{importConfig:{channels:["DSL","EXT_DATA_SOURCE","GRAPH_FEATURE","KNOWLEDGE_EDIT"],updateLogic:"LATEST"},style:{color:"#bbbee3"}},entityType_2023031763460212:{storeType:["OFFLINE"],style:{color:"default",icon:"icon-location"},propertyImportConfig:{}},entityType_2022110911855814:{storeType:["OFFLINE"],style:{color:"default",icon:"default"},propertyImportConfig:{}},relationType_2022081909940651:{importConfig:{channels:["DSL","EXT_DATA_SOURCE","GRAPH_FEATURE","KNOWLEDGE_EDIT"],updateLogic:"LATEST"},style:{color:"#f7c44e"}},relationType_310002171:{importConfig:{channels:["DSL","EXT_DATA_SOURCE","GRAPH_FEATURE","KNOWLEDGE_EDIT"],updateLogic:"LATEST"},style:{color:"#4592f7"}},entityType_2021050501720293:{storeType:["OFFLINE"],style:{color:"default",icon:"icon-time-circle"},propertyImportConfig:{}},entityType_2022110911855813:{storeType:["OFFLINE"],style:{color:"default",icon:"default"},propertyImportConfig:{}}}},traceId:"0b451bfb17098112239636746e58a8"}),tt=e=>{let t={entityType:{},relationType:{}};return e&&Object.keys(e).forEach(n=>{let[a,r=""]=n.split("_");if("entityType"!==a&&"relationType"!==a)return;t[a][r]={...e[n].style||{}};let{icon:o,color:l}=t[a][r];"default"===o&&delete t[a][r].icon,"default"!==l&&d.valid(l)||delete t[a][r].color;}),t;},tn=e=>{let{params:t,defaultExtraStyleConfigs:n,...a}=e??{},i={projectId:(0,l.getProjectId)(),...t},s=(0,r.useQuery)({queryFn:async()=>{let{result:e}=await te(i);if(e.success&&e.value)return e.value;},queryKey:["getStaticConfig",i],staleTime:1/0,...a}),d=(0,e8.useMemo)(()=>tt(s.data),[s.data]);return{staticConfigList:s.data,extraStyleConfigs:(0,o.merge)(n,d),...s};};},b2eda3a1:function(e,t,n){"use strict";n.d(t,"__esModule",{value:!0}),n.e(t,{json2Object:function(){return o;},json2String:function(){return l;},renderWithDefaultText:function(){return i;}});var a=n("fc1f4356"),r=n("02b696d0");function o(e,t={}){if((0,a.isNil)(e))return t;try{if((0,a.isObject)(e))return e;if((0,a.isString)(e)){let t=e.replace(/\r/gi,"").replace(/\n/gi,""),n=JSON.parse(t);if((0,a.isObject)(n))return n;}throw Error();}catch(n){return console.warn(`${e} is not a valid Object`),t;}}function l(e){return"string"==typeof e?e:JSON.stringify(e);}function i(e){return(0,r.isValidElement)(e)?e:(0,a.isNil)(e)?"-":l(e)||"-";}},b50ba5eb:function(e,t,n){"use strict";var a,r;n.d(t,"__esModule",{value:!0}),n.d(t,"DATA_SOURCE_CATEGORY",{enumerable:!0,get:function(){return a;}}),(r=a||(a={})).BATCH="BATCH",r.STREAM="STREAM",r.FILE="FILE_EXTRACT",r.YUQUE="YUQUE_EXTRACT";},bac6942a:function(e,t,n){"use strict";n.d(t,"__esModule",{value:!0}),n.d(t,"useSchemaPropertyNameMap",{enumerable:!0,get:function(){return l;}});var a=n("48fdd872"),r=n("5b5ed4a9"),o=n("3834a44f");let l=e=>{let{params:t,...n}=e??{},l={projectId:Number((0,o.getProjectId)()),...t};return(0,r.useQuery)({queryFn:async()=>{let e=await (0,a.getSchemaNameMap)(l);return(null==e?void 0:e.success)&&e.result?e.result:Promise.reject(e);},queryKey:["hooks/useSchemaPropertyNameMap",l],enabled:!!l.projectId,staleTime:1/0,...n});};},bc7b36fe:function(e,t,n){e.exports="";},bcda4f95:function(e,t,n){"use strict";n.d(t,"__esModule",{value:!0}),n.d(t,"useSchemaData",{enumerable:!0,get:function(){return s;}});var a=n("fc5eb767"),r=n("48fdd872"),o=n("5b5ed4a9"),l=n("3834a44f");let i=async e=>{let t=await (0,r.getSchemaAndRelation)(e);if(!t.success||!t.result)return Promise.reject(t);{let e=t.result,n=e.entityTypeDTOList||[],r=e.relationTypeDTOList||[];return(0,a.transformRelationGraphData)({nodes:n.filter(e=>e.name!==a.rootNode.name),edges:r});}},s=e=>{let{params:t,...n}=e??{},a={projectId:Number((0,l.getProjectId)()),...t};return(0,o.useQuery)({queryFn:()=>i(a),queryKey:["hooks/useSchemaData",a],enabled:!!(null==a?void 0:a.projectId),...n});};},c234708e:function(e,t,n){n.d(t,"__esModule",{value:!0}),n.e(t,{closeSchemaDrawer:function(){return l;},knowledgeModelUiState:function(){return r;},openSchemaDrawer:function(){return i;},schemaScriptUiState:function(){return u;},setAdvancedPropertyData:function(){return o;},setFocusNodeId:function(){return s;},setGraphInitValue:function(){return d;}});var a=n("5b5ed4a9");let r=(0,a.proxy)({schemaDrawerOpen:!1,advancedPropertyData:void 0}),o=e=>{r.advancedPropertyData=e;},l=()=>{r.schemaDrawerOpen=!1,r.advancedPropertyData=void 0;},i=()=>r.schemaDrawerOpen=!0,s=e=>r.focusNodeId=e,d=e=>{if(e){r.graphInitValue={focusId:String(e)};return;}r.graphInitValue=void 0;},u=(0,a.proxy)({saving:!1});},c5f39a1b:function(e,t,n){"use strict";n.d(t,"__esModule",{value:!0}),n.d(t,"default",{enumerable:!0,get:function(){return a;}});var a=n("777fffbe")._(n("85d9e535")).default;},c72fc2b9:function(e,t,n){"use strict";n.d(t,"__esModule",{value:!0}),n.e(t,{deleteUsingGET:function(){return r;},getById:function(){return o;},list:function(){return l;},schemaDiff:function(){return i;},splitPreview:function(){return s;},submit:function(){return d;}});var a=n("05ecbb5b");async function r(e,t){return(0,a.request)("/public/v1/builder/job/delete",{method:"GET",params:{...e},...t||{}});}async function o(e,t){return(0,a.request)("/public/v1/builder/job/get",{method:"GET",params:{...e},...t||{}});}async function l(e,t){return(0,a.request)("/public/v1/builder/job/list",{method:"GET",params:{...e},...t||{}});}async function i(e,t){return(0,a.request)("/public/v1/builder/job/schema/diff",{method:"POST",headers:{"Content-Type":"application/json"},data:e,...t||{}});}async function s(e,t){return(0,a.request)("/public/v1/builder/job/split/preview",{method:"POST",headers:{"Content-Type":"application/json"},data:e,...t||{}});}async function d(e,t){return(0,a.request)("/public/v1/builder/job/submit",{method:"POST",headers:{"Content-Type":"application/json"},data:e,...t||{}});}}}]);
