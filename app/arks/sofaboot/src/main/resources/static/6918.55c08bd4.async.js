"use strict";(self.webpackChunkcognik_web_app=self.webpackChunkcognik_web_app||[]).push([[6918],{66918:function(we,ge,s){s.d(ge,{U9:function(){return X},L0:function(){return K},bg:function(){return U}});var H=s(35576),u=s(55443),W=s(94162),te=s(84964),oe=s(35979),J=s(52521),se=s(38334),ae=s(70661),Ze=s(23565),Fe=s(75880),V=s(40545),Y=s(46057),B=s(68151),Se=s(39050),xe=s(34223),ie=s(9881),G=s(68658),ye=s(46056),ue=s(28320),Re=s(82187),le=s.n(Re),Ce=s(81626),Pe=s(93954),o=s(75271),je=s(18051),Me=s(4449),De=s(96570),i=s(52676),Ae=["onFinish","step","formRef","title","stepProps"];function be(a){var v=(0,o.useRef)(),r=(0,o.useContext)(U),f=(0,o.useContext)(X),h=(0,u.Z)((0,u.Z)({},a),f),j=h.onFinish,F=h.step,A=h.formRef,Ne=h.title,n=h.stepProps,d=(0,se.Z)(h,Ae);return(0,Me.ET)(!d.submitter,"StepForm \u4E0D\u5305\u542B\u63D0\u4EA4\u6309\u94AE\uFF0C\u8BF7\u5728 StepsForm \u4E0A"),(0,o.useImperativeHandle)(A,function(){return v.current},[A==null?void 0:A.current]),(0,o.useEffect)(function(){if(h.name||h.step){var y=(h.name||h.step).toString();return r==null||r.regForm(y,h),function(){r==null||r.unRegForm(y)}}},[]),r&&r!==null&&r!==void 0&&r.formArrayRef&&(r.formArrayRef.current[F||0]=v),(0,i.jsx)(De.I,(0,u.Z)({formRef:v,onFinish:function(){var y=(0,te.Z)((0,W.Z)().mark(function C(g){var S;return(0,W.Z)().wrap(function(x){for(;;)switch(x.prev=x.next){case 0:if(d.name&&(r==null||r.onFormFinish(d.name,g)),!j){x.next=9;break}return r==null||r.setLoading(!0),x.next=5,j==null?void 0:j(g);case 5:return S=x.sent,S&&(r==null||r.next()),r==null||r.setLoading(!1),x.abrupt("return");case 9:r!=null&&r.lastStep||r==null||r.next();case 10:case"end":return x.stop()}},C)}));return function(C){return y.apply(this,arguments)}}(),onInit:function(C,g){var S;v.current=g,r&&r!==null&&r!==void 0&&r.formArrayRef&&(r.formArrayRef.current[F||0]=v),d==null||(S=d.onInit)===null||S===void 0||S.call(d,C,g)},layout:"vertical"},(0,je.Z)(d,["layoutType","columns"])))}var Ie=be,$e=s(30383),Le=function(v){return(0,H.Z)({},v.componentCls,{"&-container":{width:"max-content",minWidth:"420px",maxWidth:"100%",margin:"auto"},"&-steps-container":(0,H.Z)({maxWidth:"1160px",margin:"auto"},"".concat(v.antCls,"-steps-vertical"),{height:"100%"}),"&-step":{display:"none",marginBlockStart:"32px","&-active":{display:"block"},"> form":{maxWidth:"100%"}}})};function We(a){return(0,$e.Xj)("StepsForm",function(v){var r=(0,u.Z)((0,u.Z)({},v),{},{componentCls:".".concat(a)});return[Le(r)]})}var Be=["current","onCurrentChange","submitter","stepsFormRender","stepsRender","stepFormRender","stepsProps","onFinish","formProps","containerStyle","formRef","formMapRef","layoutRender"],U=o.createContext(void 0),Te={horizontal:function(v){var r=v.stepsDom,f=v.formDom;return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(Y.Z,{gutter:{xs:8,sm:16,md:24},children:(0,i.jsx)(B.Z,{span:24,children:r})}),(0,i.jsx)(Y.Z,{gutter:{xs:8,sm:16,md:24},children:(0,i.jsx)(B.Z,{span:24,children:f})})]})},vertical:function(v){var r=v.stepsDom,f=v.formDom;return(0,i.jsxs)(Y.Z,{align:"stretch",wrap:!0,gutter:{xs:8,sm:16,md:24},children:[(0,i.jsx)(B.Z,{xxl:4,xl:6,lg:7,md:8,sm:10,xs:12,children:o.cloneElement(r,{style:{height:"100%"}})}),(0,i.jsx)(B.Z,{children:(0,i.jsx)("div",{style:{display:"flex",alignItems:"center",width:"100%",height:"100%"},children:f})})]})}},X=o.createContext(null);function Ee(a){var v=(0,o.useContext)(Se.ZP.ConfigContext),r=v.getPrefixCls,f=r("pro-steps-form"),h=We(f),j=h.wrapSSR,F=h.hashId,A=a.current,Ne=a.onCurrentChange,n=a.submitter,d=a.stepsFormRender,y=a.stepsRender,C=a.stepFormRender,g=a.stepsProps,S=a.onFinish,O=a.formProps,x=a.containerStyle,ze=a.formRef,He=a.formMapRef,b=a.layoutRender,Je=(0,se.Z)(a,Be),Q=(0,o.useRef)(new Map),P=(0,o.useRef)(new Map),R=(0,o.useRef)([]),Ve=(0,o.useState)([]),me=(0,J.Z)(Ve,2),Z=me[0],ve=me[1],Ye=(0,o.useState)(!1),ce=(0,J.Z)(Ye,2),I=ce[0],T=ce[1],M=(0,ae.YB)(),Ge=(0,Pe.Z)(0,{value:a.current,onChange:a.onCurrentChange}),fe=(0,J.Z)(Ge,2),c=fe[0],E=fe[1],k=(0,o.useMemo)(function(){return Te[(g==null?void 0:g.direction)||"horizontal"]},[g==null?void 0:g.direction]),w=(0,o.useMemo)(function(){return c===Z.length-1},[Z.length,c]),Ue=(0,o.useCallback)(function(e,t){P.current.has(e)||ve(function(m){return[].concat((0,oe.Z)(m),[e])}),P.current.set(e,t)},[]),Xe=(0,o.useCallback)(function(e){ve(function(t){return t.filter(function(m){return m!==e})}),P.current.delete(e),Q.current.delete(e)},[]);(0,o.useImperativeHandle)(He,function(){return R.current},[R.current]),(0,o.useImperativeHandle)(ze,function(){var e;return(e=R.current[c||0])===null||e===void 0?void 0:e.current},[c,R.current]);var Ke=(0,o.useCallback)(function(){var e=(0,te.Z)((0,W.Z)().mark(function t(m,l){var L,z;return(0,W.Z)().wrap(function(p){for(;;)switch(p.prev=p.next){case 0:if(Q.current.set(m,l),!(!w||!S)){p.next=3;break}return p.abrupt("return");case 3:return T(!0),L=Ze.T.apply(void 0,[{}].concat((0,oe.Z)(Array.from(Q.current.values())))),p.prev=5,p.next=8,S(L);case 8:z=p.sent,z&&(E(0),R.current.forEach(function(ke){var ne;return(ne=ke.current)===null||ne===void 0?void 0:ne.resetFields()})),p.next=15;break;case 12:p.prev=12,p.t0=p.catch(5),console.log(p.t0);case 15:return p.prev=15,T(!1),p.finish(15);case 18:case"end":return p.stop()}},t,null,[[5,12,15,18]])}));return function(t,m){return e.apply(this,arguments)}}(),[w,S,T,E]),q=(0,o.useMemo)(function(){var e=(0,Fe.n)(xe.Z,"4.24.0")>-1,t=e?{items:Z.map(function(m){var l=P.current.get(m);return(0,u.Z)({key:m,title:l==null?void 0:l.title},l==null?void 0:l.stepProps)})}:{};return(0,i.jsx)("div",{className:"".concat(f,"-steps-container ").concat(F).trim(),style:{maxWidth:Math.min(Z.length*320,1160)},children:(0,i.jsx)(ie.Z,(0,u.Z)((0,u.Z)((0,u.Z)({},g),t),{},{current:c,onChange:void 0,children:!e&&Z.map(function(m){var l=P.current.get(m);return(0,i.jsx)(ie.Z.Step,(0,u.Z)({title:l==null?void 0:l.title},l==null?void 0:l.stepProps),m)})}))})},[Z,F,f,c,g]),D=(0,V.J)(function(){var e,t=R.current[c];(e=t.current)===null||e===void 0||e.submit()}),N=(0,V.J)(function(){c<1||E(c-1)}),_=(0,o.useMemo)(function(){return n!==!1&&(0,i.jsx)(G.ZP,(0,u.Z)((0,u.Z)({type:"primary",loading:I},n==null?void 0:n.submitButtonProps),{},{onClick:function(){var t;n==null||(t=n.onSubmit)===null||t===void 0||t.call(n),D()},children:M.getMessage("stepsForm.next","\u4E0B\u4E00\u6B65")}),"next")},[M,I,D,n]),ee=(0,o.useMemo)(function(){return n!==!1&&(0,i.jsx)(G.ZP,(0,u.Z)((0,u.Z)({},n==null?void 0:n.resetButtonProps),{},{onClick:function(){var t;N(),n==null||(t=n.onReset)===null||t===void 0||t.call(n)},children:M.getMessage("stepsForm.prev","\u4E0A\u4E00\u6B65")}),"pre")},[M,N,n]),re=(0,o.useMemo)(function(){return n!==!1&&(0,i.jsx)(G.ZP,(0,u.Z)((0,u.Z)({type:"primary",loading:I},n==null?void 0:n.submitButtonProps),{},{onClick:function(){var t;n==null||(t=n.onSubmit)===null||t===void 0||t.call(n),D()},children:M.getMessage("stepsForm.submit","\u63D0\u4EA4")}),"submit")},[M,I,D,n]),Oe=(0,V.J)(function(){c>Z.length-2||E(c+1)}),$=(0,o.useMemo)(function(){var e=[],t=c||0;if(t<1?Z.length===1?e.push(re):e.push(_):t+1===Z.length?e.push(ee,re):e.push(ee,_),e=e.filter(o.isValidElement),n&&n.render){var m,l={form:(m=R.current[c])===null||m===void 0?void 0:m.current,onSubmit:D,step:c,onPre:N};return n.render(l,e)}return n&&(n==null?void 0:n.render)===!1?null:e},[Z.length,_,D,ee,N,c,re,n]),de=(0,o.useMemo)(function(){return(0,Ce.Z)(a.children).map(function(e,t){var m=e.props,l=m.name||"".concat(t),L=c===t,z=L?{contentRender:C,submitter:!1}:{};return(0,i.jsx)("div",{className:le()("".concat(f,"-step"),F,(0,H.Z)({},"".concat(f,"-step-active"),L)),children:(0,i.jsx)(X.Provider,{value:(0,u.Z)((0,u.Z)((0,u.Z)((0,u.Z)({},z),O),m),{},{name:l,step:t}),children:e})},l)})},[O,F,f,a.children,c,C]),pe=(0,o.useMemo)(function(){return y?y(Z.map(function(e){var t;return{key:e,title:(t=P.current.get(e))===null||t===void 0?void 0:t.title}}),q):q},[Z,q,y]),he=(0,o.useMemo)(function(){return(0,i.jsxs)("div",{className:"".concat(f,"-container ").concat(F).trim(),style:x,children:[de,d?null:(0,i.jsx)(ye.Z,{children:$})]})},[x,de,F,f,d,$]),Qe=(0,o.useMemo)(function(){var e={stepsDom:pe,formDom:he};return d?d(b?b(e):k(e),$):b?b(e):k(e)},[pe,he,k,d,$,b]);return j((0,i.jsx)("div",{className:le()(f,F),children:(0,i.jsx)(ue.Z.Provider,(0,u.Z)((0,u.Z)({},Je),{},{children:(0,i.jsx)(U.Provider,{value:{loading:I,setLoading:T,regForm:Ue,keyArray:Z,next:Oe,formArrayRef:R,formMapRef:P,lastStep:w,unRegForm:Xe,onFormFinish:Ke},children:Qe})}))}))}function K(a){return(0,i.jsx)(ae._Y,{needDeps:!0,children:(0,i.jsx)(Ee,(0,u.Z)({},a))})}K.StepForm=Ie,K.useForm=ue.Z.useForm}}]);
