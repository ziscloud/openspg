"use strict";(self.webpackChunkcognik_web_app=self.webpackChunkcognik_web_app||[]).push([[2525],{26598:function(H,I){var e={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M512 64C264.6 64 64 264.6 64 512s200.6 448 448 448 448-200.6 448-448S759.4 64 512 64zm0 820c-205.4 0-372-166.6-372-372s166.6-372 372-372 372 166.6 372 372-166.6 372-372 372z"}},{tag:"path",attrs:{d:"M464 336a48 48 0 1096 0 48 48 0 10-96 0zm72 112h-48c-4.4 0-8 3.6-8 8v272c0 4.4 3.6 8 8 8h48c4.4 0 8-3.6 8-8V456c0-4.4-3.6-8-8-8z"}}]},name:"info-circle",theme:"outlined"};I.Z=e},37520:function(H,I,e){var n=e(55443),d=e(38334),f=e(86757),s=e(75380),A=e(75271),m=e(35262),W=e(20451),R=e(52676),M=["fieldProps","options","radioType","layout","proFieldProps","valueEnum"],L=A.forwardRef(function(p,O){var y=p.fieldProps,v=p.options,K=p.radioType,b=p.layout,t=p.proFieldProps,h=p.valueEnum,N=(0,d.Z)(p,M);return(0,R.jsx)(W.Z,(0,n.Z)((0,n.Z)({valueType:K==="button"?"radioButton":"radio",ref:O,valueEnum:(0,f.h)(h,void 0)},N),{},{fieldProps:(0,n.Z)({options:v,layout:b},y),proFieldProps:t,filedConfig:{customLightMode:!0}}))}),G=A.forwardRef(function(p,O){var y=p.fieldProps,v=p.children;return(0,R.jsx)(s.ZP,(0,n.Z)((0,n.Z)({},y),{},{ref:O,children:v}))}),c=(0,m.G)(G,{valuePropName:"checked",ignoreWidth:!0}),z=c;z.Group=L,z.Button=s.ZP.Button,z.displayName="ProFormComponent",I.Z=z},16331:function(H,I,e){var n=e(55443),d=e(38334),f=e(75271),s=e(20451),A=e(52676),m=["fieldProps","proFieldProps"],W=function(M,L){var G=M.fieldProps,c=M.proFieldProps,z=(0,d.Z)(M,m);return(0,A.jsx)(s.Z,(0,n.Z)({ref:L,valueType:"textarea",fieldProps:G,proFieldProps:c},z))};I.Z=f.forwardRef(W)},27318:function(H,I,e){e.d(I,{A:function(){return E}});var n=e(55443),d=e(28320),f=e(75271),s=e(96570),A=e(83734),m=e(35576),W=e(52521),R=e(22278),M=e(93954),L=e(48760),G=e(39050),c=e(46056),z=e(82187),p=e.n(z),O=e(5594),y=e(79347),v=e(30383),K=function(u){return(0,m.Z)({},u.componentCls,{"&-title":{marginBlockEnd:u.marginXL,fontWeight:"bold"},"&-container":(0,m.Z)({flexWrap:"wrap",maxWidth:"100%"},"> div".concat(u.antCls,"-space-item"),{maxWidth:"100%"}),"&-twoLine":(0,m.Z)((0,m.Z)((0,m.Z)((0,m.Z)({display:"block",width:"100%"},"".concat(u.componentCls,"-title"),{width:"100%",margin:"8px 0"}),"".concat(u.componentCls,"-container"),{paddingInlineStart:16}),"".concat(u.antCls,"-space-item,").concat(u.antCls,"-form-item"),{width:"100%"}),"".concat(u.antCls,"-form-item"),{"&-control":{display:"flex",alignItems:"center",justifyContent:"flex-end","&-input":{alignItems:"center",justifyContent:"flex-end","&-content":{flex:"none"}}}})})};function b(j){return(0,v.Xj)("ProFormGroup",function(u){var r=(0,n.Z)((0,n.Z)({},u),{},{componentCls:".".concat(j)});return[K(r)]})}var t=e(52676),h=f.forwardRef(function(j,u){var r=f.useContext(O.Z),J=r.groupProps,i=(0,n.Z)((0,n.Z)({},J),j),g=i.children,Z=i.collapsible,D=i.defaultCollapsed,S=i.style,w=i.labelLayout,P=i.title,$=P===void 0?j.label:P,F=i.tooltip,se=i.align,ue=se===void 0?"start":se,Q=i.direction,C=i.size,le=C===void 0?32:C,pe=i.titleStyle,Y=i.titleRender,x=i.spaceProps,_=i.extra,k=i.autoFocus,ve=(0,M.Z)(function(){return D||!1},{value:j.collapsed,onChange:j.onCollapse}),q=(0,W.Z)(ve,2),ee=q[0],re=q[1],me=(0,f.useContext)(G.ZP.ConfigContext),fe=me.getPrefixCls,ie=(0,y.zx)(j),he=ie.ColWrapper,te=ie.RowWrapper,o=fe("pro-form-group"),de=b(o),ge=de.wrapSSR,l=de.hashId,T=Z&&(0,t.jsx)(R.Z,{style:{marginInlineEnd:8},rotate:ee?void 0:90}),a=(0,t.jsx)(L.G,{label:T?(0,t.jsxs)("div",{children:[T,$]}):$,tooltip:F}),B=(0,f.useCallback)(function(X){var ne=X.children;return(0,t.jsx)(c.Z,(0,n.Z)((0,n.Z)({},x),{},{className:p()("".concat(o,"-container ").concat(l),x==null?void 0:x.className),size:le,align:ue,direction:Q,style:(0,n.Z)({rowGap:0},x==null?void 0:x.style),children:ne}))},[ue,o,Q,l,le,x]),oe=Y?Y(a,j):a,ce=(0,f.useMemo)(function(){var X=[],ne=f.Children.toArray(g).map(function(U,Ce){var Pe;return f.isValidElement(U)&&U!==null&&U!==void 0&&(Pe=U.props)!==null&&Pe!==void 0&&Pe.hidden?(X.push(U),null):Ce===0&&f.isValidElement(U)&&k?f.cloneElement(U,(0,n.Z)((0,n.Z)({},U.props),{},{autoFocus:k})):U});return[(0,t.jsx)(te,{Wrapper:B,children:ne},"children"),X.length>0?(0,t.jsx)("div",{style:{display:"none"},children:X}):null]},[g,te,B,k]),ye=(0,W.Z)(ce,2),ae=ye[0],Fe=ye[1];return ge((0,t.jsx)(he,{children:(0,t.jsxs)("div",{className:p()(o,l,(0,m.Z)({},"".concat(o,"-twoLine"),w==="twoLine")),style:S,ref:u,children:[Fe,($||F||_)&&(0,t.jsx)("div",{className:"".concat(o,"-title ").concat(l).trim(),style:pe,onClick:function(){re(!ee)},children:_?(0,t.jsxs)("div",{style:{display:"flex",width:"100%",alignItems:"center",justifyContent:"space-between"},children:[oe,(0,t.jsx)("span",{onClick:function(ne){return ne.stopPropagation()},children:_})]}):oe}),(0,t.jsx)("div",{style:{display:Z&&ee?"none":void 0},children:ae})]})}))});h.displayName="ProForm-Group";var N=h,V=e(99292);function E(j){return(0,t.jsx)(s.I,(0,n.Z)({layout:"vertical",contentRender:function(r,J){return(0,t.jsxs)(t.Fragment,{children:[r,J]})}},j))}E.Group=N,E.useForm=d.Z.useForm,E.Item=V.Z,E.useWatch=d.Z.useWatch,E.ErrorList=d.Z.ErrorList,E.Provider=d.Z.Provider,E.useFormInstance=d.Z.useFormInstance,E.EditOrReadOnlyContext=A.A},48760:function(H,I,e){e.d(I,{G:function(){return K}});var n=e(55443),d=e(35576),f=e(55824),s=e(75271),A=e(26598),m=e(35244),W=function(t,h){return s.createElement(m.Z,(0,f.Z)({},t,{ref:h,icon:A.Z}))},R=s.forwardRef(W),M=R,L=e(39050),G=e(92422),c=e(82187),z=e.n(c),p=e(30383),O=function(t){return(0,d.Z)({},t.componentCls,{display:"inline-flex",alignItems:"center",maxWidth:"100%","&-icon":{display:"block",marginInlineStart:"4px",cursor:"pointer","&:hover":{color:t.colorPrimary}},"&-title":{display:"inline-flex",flex:"1"},"&-subtitle ":{marginInlineStart:8,color:t.colorTextSecondary,fontWeight:"normal",fontSize:t.fontSize,whiteSpace:"nowrap"},"&-title-ellipsis":{overflow:"hidden",whiteSpace:"nowrap",textOverflow:"ellipsis",wordBreak:"keep-all"}})};function y(b){return(0,p.Xj)("LabelIconTip",function(t){var h=(0,n.Z)((0,n.Z)({},t),{},{componentCls:".".concat(b)});return[O(h)]})}var v=e(52676),K=s.memo(function(b){var t=b.label,h=b.tooltip,N=b.ellipsis,V=b.subTitle,E=(0,s.useContext)(L.ZP.ConfigContext),j=E.getPrefixCls,u=j("pro-core-label-tip"),r=y(u),J=r.wrapSSR,i=r.hashId;if(!h&&!V)return(0,v.jsx)(v.Fragment,{children:t});var g=typeof h=="string"||s.isValidElement(h)?{title:h}:h,Z=(g==null?void 0:g.icon)||(0,v.jsx)(M,{});return J((0,v.jsxs)("div",{className:z()(u,i),onMouseDown:function(S){return S.stopPropagation()},onMouseLeave:function(S){return S.stopPropagation()},onMouseMove:function(S){return S.stopPropagation()},children:[(0,v.jsx)("div",{className:z()("".concat(u,"-title"),i,(0,d.Z)({},"".concat(u,"-title-ellipsis"),N)),children:t}),V&&(0,v.jsx)("div",{className:"".concat(u,"-subtitle ").concat(i).trim(),children:V}),h&&(0,v.jsx)(G.Z,(0,n.Z)((0,n.Z)({},g),{},{children:(0,v.jsx)("span",{className:"".concat(u,"-icon ").concat(i).trim(),children:Z})}))]}))})},76958:function(H,I,e){e.r(I),e.d(I,{default:function(){return i}});var n=e(90228),d=e.n(n),f=e(26068),s=e.n(f),A=e(87999),m=e.n(A),W=e(48305),R=e.n(W),M=e(41045),L=e(67709),G=e(27318),c=e(14378),z=e(16331),p=e(37520),O=e(27054),y=e(86487),v=e(69230),K=e(68658),b=e(77758),t=e(75271);function h(g,Z,D){return N.apply(this,arguments)}function N(){return N=m()(d()().mark(function g(Z,D,S){return d()().wrap(function(P){for(;;)switch(P.prev=P.next){case 0:return P.abrupt("return",(0,y.request)("/api/v1/projects/".concat(Z),s()({method:"PUT",data:D},S||{})));case 1:case"end":return P.stop()}},g)})),N.apply(this,arguments)}function V(g,Z){return E.apply(this,arguments)}function E(){return E=m()(d()().mark(function g(Z,D){return d()().wrap(function(w){for(;;)switch(w.prev=w.next){case 0:return w.abrupt("return",(0,y.request)("/api/v1/projects/".concat(Z),s()({method:"DELETE"},D||{})).then(function(P){if(!P.result)throw new Error("delete project failed")}));case 1:case"end":return w.stop()}},g)})),E.apply(this,arguments)}function j(g,Z){return u.apply(this,arguments)}function u(){return u=m()(d()().mark(function g(Z,D){var S;return d()().wrap(function(P){for(;;)switch(P.prev=P.next){case 0:return S=Z.projectId,P.abrupt("return",(0,y.request)("/api/v1/projects/".concat(S),s()({method:"GET"},D||{})).then(function($){return{data:s()({},$.result)}}));case 3:case"end":return P.stop()}},g)})),u.apply(this,arguments)}var r=e(52676),J=function(){var Z=(0,y.useSearchParams)(),D=R()(Z,2),S=D[0],w=D[1],P=(0,t.useState)(),$=R()(P,2),F=$[0],se=$[1],ue=(0,t.useState)(),Q=R()(ue,2),C=Q[0],le=Q[1],pe=(0,t.useState)(),Y=R()(pe,2),x=Y[0],_=Y[1],k=(0,y.useNavigate)(),ve=(0,t.useState)(!1),q=R()(ve,2),ee=q[0],re=q[1],me=(0,y.useRequest)(h,{manual:!0,onSuccess:function(){v.ZP.success("\u63D0\u4EA4\u6210\u529F"),re(!1)},onError:function(){v.ZP.error("\u63D0\u4EA4\u5931\u8D25\uFF0C\u8BF7\u91CD\u8BD5"),re(!1)}}),fe=me.run,ie=(0,y.useRequest)(V,{manual:!0,onSuccess:function(){v.ZP.success("\u63D0\u4EA4\u6210\u529F"),k("/knowledgebase/kb-list")},onError:function(){v.ZP.error("\u63D0\u4EA4\u5931\u8D25\uFF0C\u8BF7\u91CD\u8BD5")}}),he=ie.run,te=(0,y.useRequest)(function(){return j({projectId:Number.parseInt(S.get("projectId")||"0")})}),o=te.data,de=te.loading;(0,t.useEffect)(function(){if(o!=null&&o.config){var l=JSON.parse(o==null?void 0:o.config);l!=null&&l.graph_store&&se(l.graph_store),l.vectorizer&&le(l.vectorizer),l.prompt&&_(l.prompt)}},[o]);var ge=function(){var l=m()(d()().mark(function T(a){var B,oe,ce;return d()().wrap(function(ae){for(;;)switch(ae.prev=ae.next){case 0:B=JSON.parse((o==null?void 0:o.config)||"{}"),oe={graph_store:s()(s()({},B==null?void 0:B.graph_store),{},{source_type:a.graph_store_source_type,database:a.graph_store_database,password:a.graph_store_password,uri:a.graph_store_uri,user:a.graph_store_user}),vectorizer:s()(s()({},B==null?void 0:B.vectorizer),{},{source_type:a.vectorizer_source_type,model:a.vectorizer_model,type:a.vectorizer_type,api_key:a.vectorizer_api_key,base_url:a.vectorizer_base_url}),prompt:s()(s()({},B==null?void 0:B.prompt),{},{source_type:a.prompt_source_type,biz_scene:a.prompt_biz_scene,language:a.prompt_language}),llm_select:[s()({},B.llm_select)],llm:s()({},B.llm)},ce={id:o==null?void 0:o.id,name:a.name,description:a.description,namespace:a.namespace,config:JSON.stringify(oe)},re(!0),fe((o==null?void 0:o.id)||0,ce);case 5:case"end":return ae.stop()}},T)}));return function(a){return l.apply(this,arguments)}}();return de||!F||!C||!x?(0,r.jsx)(M.uk,{type:"descriptions"}):(0,r.jsx)(L._z,{content:"\u8868\u5355\u9875\u7528\u4E8E\u5411\u7528\u6237\u6536\u96C6\u6216\u9A8C\u8BC1\u4FE1\u606F\uFF0C\u57FA\u7840\u8868\u5355\u5E38\u89C1\u4E8E\u6570\u636E\u9879\u8F83\u5C11\u7684\u8868\u5355\u573A\u666F\u3002",extra:(0,r.jsx)(K.ZP,{type:"primary",danger:!0,onClick:function(){return he((o==null?void 0:o.id)||0)},children:"\u5220\u9664\u9879\u76EE"}),children:(0,r.jsx)(b.Z,{variant:"outlined",children:(0,r.jsxs)(G.A,{loading:ee,style:{margin:"auto",marginTop:8,maxWidth:600},name:"basic",layout:"vertical",initialValues:{name:o==null?void 0:o.name,namespace:o==null?void 0:o.namespace,description:o==null?void 0:o.description,graph_store_source_type:"default",graph_store_database:F==null?void 0:F.database,graph_store_password:F==null?void 0:F.password,graph_store_uri:F==null?void 0:F.uri,graph_store_user:F==null?void 0:F.user,prompt_source_type:"default",prompt_biz_scene:x==null?void 0:x.biz_scene,prompt_language:x==null?void 0:x.language,vectorizer_source_type:"default",vectorizer_model:C==null?void 0:C.model,vectorizer_type:C==null?void 0:C.type,vectorizer_api_key:C==null?void 0:C.api_key,vectorizer_base_url:C==null?void 0:C.base_url},onFinish:ge,children:[(0,r.jsx)(c.Z,{width:"md",label:"\u77E5\u8BC6\u5E93\u4E2D\u6587\u540D\u79F0",name:"name",rules:[{required:!0,message:"\u8BF7\u8F93\u5165\u77E5\u8BC6\u5E93\u4E2D\u6587\u540D\u79F0"}],placeholder:"\u8BF7\u8F93\u5165\u77E5\u8BC6\u5E93\u4E2D\u6587\u540D\u79F0"}),(0,r.jsx)(c.Z,{width:"md",label:"\u77E5\u8BC6\u5E93\u82F1\u6587\u540D\u79F0",name:"namespace",rules:[{required:!0,message:"\u8BF7\u8F93\u5165\u77E5\u8BC6\u5E93\u82F1\u6587\u540D\u79F0"},{pattern:/^[A-Z][A-Za-z0-9]{2,}$/,message:"\u5FC5\u987B\u4EE5\u5927\u5199\u5B57\u6BCD\u5F00\u5934\uFF0C\u4E14\u4EC5\u652F\u6301\u5B57\u6BCD\u548C\u6570\u5B57\u7EC4\u5408\uFF0C\u81F3\u5C11\u4E09\u4E2A\u5B57\u7B26"}],placeholder:"\u8BF7\u8F93\u5165\u77E5\u8BC6\u5E93\u82F1\u6587\u540D\u79F0",disabled:!0}),(0,r.jsx)(z.Z,{label:"\u77E5\u8BC6\u5E93\u63CF\u8FF0",width:"xl",name:"description",placeholder:"\u8BF7\u8F93\u5165\u77E5\u8BC6\u5E93\u63CF\u8FF0\uFF0C\u5728\u77E5\u8BC6\u62BD\u53D6\u548C\u77E5\u8BC6\u95EE\u7B54\u65F6\u4F5C\u4E3APrompt\uFF1B\u4F8B\u5982\uFF1A\u8FD9\u662F\u4E00\u4E2A\u6CD5\u5B66\u77E5\u8BC6\u5E93\uFF0C\u4E3B\u8981\u63CF\u8FF0\u6CD5\u5F8B\u76F8\u5173\u7684\u77E5\u8BC6\u3002"}),(0,r.jsx)(p.Z.Group,{name:"graph_store_source_type",label:"\u56FE\u50A8\u5B58\u914D\u7F6E",options:[{label:"\u9ED8\u8BA4\u914D\u7F6E",value:"default"},{label:"\u81EA\u5B9A\u4E49\u914D\u7F6E",value:"custom"}]}),(0,r.jsx)(c.Z,{width:"md",label:"database",name:"graph_store_database",rules:[{required:!0,message:"\u8BF7\u8F93\u5165database"}],placeholder:"\u8BF7\u8F93\u5165database",disabled:!0}),(0,r.jsx)(O.Z,{name:["graph_store_source_type"],children:function(T){var a=T.graph_store_source_type;return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(c.Z.Password,{width:"md",label:"password",name:"graph_store_password",rules:[{required:!0,message:"\u8BF7\u8F93\u5165password"}],placeholder:"\u8BF7\u8F93\u5165password",disabled:a==="default"}),(0,r.jsx)(c.Z,{width:"md",label:"uri",name:"graph_store_uri",rules:[{required:!0,message:"\u8BF7\u8F93\u5165uri"}],placeholder:"\u8BF7\u8F93\u5165uri",disabled:a==="default"}),(0,r.jsx)(c.Z,{width:"md",label:"user",name:"graph_store_user",rules:[{required:!0,message:"\u8BF7\u8F93\u5165user"}],placeholder:"\u8BF7\u8F93\u5165user",disabled:a==="default"})]})}}),(0,r.jsx)(p.Z.Group,{name:"vectorizer_source_type",label:"\u5411\u91CF\u914D\u7F6E",options:[{label:"\u9ED8\u8BA4\u914D\u7F6E",value:"default"},{label:"\u81EA\u5B9A\u4E49\u914D\u7F6E",value:"custom"}]}),(0,r.jsx)(c.Z,{width:"md",label:"type",name:"vectorizer_type",rules:[{required:!0,message:"\u8BF7\u8F93\u5165type"}],placeholder:"\u8BF7\u8F93\u5165type",disabled:!0}),(0,r.jsx)(O.Z,{name:["vectorizer_source_type"],children:function(T){var a=T.vectorizer_source_type;return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(c.Z.Password,{width:"md",label:"model",name:"vectorizer_model",rules:[{required:!0,message:"\u8BF7\u8F93\u5165model"}],placeholder:"\u8BF7\u8F93\u5165model",disabled:a==="default"}),(0,r.jsx)(c.Z,{width:"md",label:"base_url",name:"vectorizer_base_url",rules:[{required:!0,message:"\u8BF7\u8F93\u5165base_url"}],placeholder:"\u8BF7\u8F93\u5165base_url",disabled:a==="default"}),(0,r.jsx)(c.Z.Password,{width:"md",label:"api_key",name:"vectorizer_api_key",rules:[{required:!0,message:"\u8BF7\u8F93\u5165api_key"}],placeholder:"\u8BF7\u8F93\u5165api_key",disabled:a==="default"})]})}}),(0,r.jsx)(p.Z.Group,{name:"prompt_source_type",label:"\u63D0\u793A\u8BCD\u4E2D\u82F1\u6587\u914D\u7F6E",options:[{label:"\u9ED8\u8BA4\u914D\u7F6E",value:"default"},{label:"\u81EA\u5B9A\u4E49\u914D\u7F6E",value:"custom"}]}),(0,r.jsx)(O.Z,{name:["prompt_source_type"],children:function(T){var a=T.prompt_source_type;return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(c.Z,{width:"md",label:"biz_scene",name:"prompt_biz_scene",rules:[{required:!0,message:"\u8BF7\u8F93\u5165biz_scene"}],placeholder:"\u8BF7\u8F93\u5165biz_scene",disabled:a==="default"}),(0,r.jsx)(c.Z,{width:"md",label:"language",name:"prompt_language",rules:[{required:!0,message:"\u8BF7\u8F93\u5165language"}],placeholder:"\u8BF7\u8F93\u5165language",disabled:a==="default"})]})}})]})})})},i=J}}]);
