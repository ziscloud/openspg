!(function(){var FR=Object.defineProperty,NR=Object.defineProperties;var zR=Object.getOwnPropertyDescriptors;var X2=Object.getOwnPropertySymbols;var BR=Object.prototype.hasOwnProperty,$R=Object.prototype.propertyIsEnumerable;var Op=(Kt,Gt)=>(Gt=Symbol[Kt])?Gt:Symbol.for("Symbol."+Kt),YR=Kt=>{throw TypeError(Kt)},mn=Math.pow,G2=(Kt,Gt,Q)=>Gt in Kt?FR(Kt,Gt,{enumerable:!0,configurable:!0,writable:!0,value:Q}):Kt[Gt]=Q,Dl=(Kt,Gt)=>{for(var Q in Gt||(Gt={}))BR.call(Gt,Q)&&G2(Kt,Q,Gt[Q]);if(X2)for(var Q of X2(Gt))$R.call(Gt,Q)&&G2(Kt,Q,Gt[Q]);return Kt},U2=(Kt,Gt)=>NR(Kt,zR(Gt));var WR=function(Kt,Gt){this[0]=Kt,this[1]=Gt};var V2=Kt=>{var Gt=Kt[Op("asyncIterator")],Q=!1,Zt,ct={};return Gt==null?(Gt=Kt[Op("iterator")](),Zt=ce=>ct[ce]=He=>Gt[ce](He)):(Gt=Gt.call(Kt),Zt=ce=>ct[ce]=He=>{if(Q){if(Q=!1,ce==="throw")throw He;return He}return Q=!0,{done:!1,value:new WR(new Promise(ee=>{var pn=Gt[ce](He);pn instanceof Object||YR("Object expected"),ee(pn)}),1)}}),ct[Op("iterator")]=()=>ct,Zt("next"),"throw"in Gt?Zt("throw"):ct.throw=ce=>{throw ce},"return"in Gt&&Zt("return"),ct};(self.webpackChunkcognik_web_app=self.webpackChunkcognik_web_app||[]).push([[4130],{93425:function(Kt,Gt,Q){"use strict";Q.d(Gt,{P:function(){return CR}});var Zt={};Q.r(Zt),Q.d(Zt,{area:function(){return eS},bottom:function(){return Pr},bottomLeft:function(){return Pr},bottomRight:function(){return Pr},inside:function(){return Pr},left:function(){return Pr},outside:function(){return oS},right:function(){return Pr},spider:function(){return cS},surround:function(){return uS},top:function(){return Pr},topLeft:function(){return Pr},topRight:function(){return Pr}});var ct={};Q.r(ct),Q.d(ct,{interpolateBlues:function(){return Hj},interpolateBrBG:function(){return Sj},interpolateBuGn:function(){return Lj},interpolateBuPu:function(){return Rj},interpolateCividis:function(){return Kj},interpolateCool:function(){return r5},interpolateCubehelixDefault:function(){return e5},interpolateGnBu:function(){return Dj},interpolateGreens:function(){return Xj},interpolateGreys:function(){return Gj},interpolateInferno:function(){return f5},interpolateMagma:function(){return u5},interpolateOrRd:function(){return Ij},interpolateOranges:function(){return qj},interpolatePRGn:function(){return jj},interpolatePiYG:function(){return Ej},interpolatePlasma:function(){return d5},interpolatePuBu:function(){return Nj},interpolatePuBuGn:function(){return Fj},interpolatePuOr:function(){return Aj},interpolatePuRd:function(){return zj},interpolatePurples:function(){return Uj},interpolateRainbow:function(){return o5},interpolateRdBu:function(){return Mj},interpolateRdGy:function(){return kj},interpolateRdPu:function(){return Bj},interpolateRdYlBu:function(){return Pj},interpolateRdYlGn:function(){return Tj},interpolateReds:function(){return Vj},interpolateSinebow:function(){return s5},interpolateSpectral:function(){return Cj},interpolateTurbo:function(){return c5},interpolateViridis:function(){return l5},interpolateWarm:function(){return n5},interpolateYlGn:function(){return Yj},interpolateYlGnBu:function(){return $j},interpolateYlOrBr:function(){return Wj},interpolateYlOrRd:function(){return Zj},schemeAccent:function(){return KS},schemeBlues:function(){return I0},schemeBrBG:function(){return y0},schemeBuGn:function(){return S0},schemeBuPu:function(){return j0},schemeCategory10:function(){return qS},schemeDark2:function(){return QS},schemeGnBu:function(){return E0},schemeGreens:function(){return F0},schemeGreys:function(){return N0},schemeObservable10:function(){return JS},schemeOrRd:function(){return A0},schemeOranges:function(){return $0},schemePRGn:function(){return g0},schemePaired:function(){return tj},schemePastel1:function(){return ej},schemePastel2:function(){return nj},schemePiYG:function(){return m0},schemePuBu:function(){return k0},schemePuBuGn:function(){return M0},schemePuOr:function(){return b0},schemePuRd:function(){return P0},schemePurples:function(){return z0},schemeRdBu:function(){return v0},schemeRdGy:function(){return O0},schemeRdPu:function(){return T0},schemeRdYlBu:function(){return x0},schemeRdYlGn:function(){return _0},schemeReds:function(){return B0},schemeSet1:function(){return rj},schemeSet2:function(){return oj},schemeSet3:function(){return ij},schemeSpectral:function(){return w0},schemeTableau10:function(){return aj},schemeYlGn:function(){return L0},schemeYlGnBu:function(){return C0},schemeYlOrBr:function(){return R0},schemeYlOrRd:function(){return D0}});var ce={};Q.r(ce),Q.d(ce,{geoAlbers:function(){return Fx},geoAlbersUsa:function(){return AT},geoAzimuthalEqualArea:function(){return MT},geoAzimuthalEqualAreaRaw:function(){return Id},geoAzimuthalEquidistant:function(){return kT},geoAzimuthalEquidistantRaw:function(){return Fd},geoConicConformal:function(){return TT},geoConicConformalRaw:function(){return Bx},geoConicEqualArea:function(){return ml},geoConicEqualAreaRaw:function(){return Ix},geoConicEquidistant:function(){return LT},geoConicEquidistantRaw:function(){return $x},geoEqualEarth:function(){return DT},geoEqualEarthRaw:function(){return Nd},geoEquirectangular:function(){return CT},geoEquirectangularRaw:function(){return rs},geoGnomonic:function(){return IT},geoGnomonicRaw:function(){return zd},geoIdentity:function(){return FT},geoMercator:function(){return PT},geoMercatorRaw:function(){return ns},geoNaturalEarth1:function(){return NT},geoNaturalEarth1Raw:function(){return Bd},geoOrthographic:function(){return zT},geoOrthographicRaw:function(){return $d},geoProjection:function(){return Ar},geoProjectionMutator:function(){return Rd},geoStereographic:function(){return BT},geoStereographicRaw:function(){return Yd},geoTransverseMercator:function(){return $T},geoTransverseMercatorRaw:function(){return Wd}});var He={};Q.r(He),Q.d(He,{frequency:function(){return l9},id:function(){return u9},name:function(){return f9},weight:function(){return c9}});var ee=Q(75271),pn=Q(30967),rn=Q.t(pn,2),ie=function(){return ie=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++){e=arguments[n];for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])}return t},ie.apply(this,arguments)},Ht=function(t,e,n,r){function o(i){return i instanceof n?i:new n(function(a){a(i)})}return new(n||(n=Promise))(function(i,a){function s(u){try{c(r.next(u))}catch(f){a(f)}}function l(u){try{c(r.throw(u))}catch(f){a(f)}}function c(u){u.done?i(u.value):o(u.value).then(s,l)}c((r=r.apply(t,e||[])).next())})},Te=function(t,e){var n={label:0,sent:function(){if(i[0]&1)throw i[1];return i[1]},trys:[],ops:[]},r,o,i,a=Object.create((typeof Iterator=="function"?Iterator:Object).prototype);return a.next=s(0),a.throw=s(1),a.return=s(2),typeof Symbol=="function"&&(a[Symbol.iterator]=function(){return this}),a;function s(c){return function(u){return l([c,u])}}function l(c){if(r)throw new TypeError("Generator is already executing.");for(;a&&(a=0,c[0]&&(n=0)),n;)try{if(r=1,o&&(i=c[0]&2?o.return:c[0]?o.throw||((i=o.return)&&i.call(o),0):o.next)&&!(i=i.call(o,c[1])).done)return i;switch(o=0,i&&(c=[c[0]&2,i.value]),c[0]){case 0:case 1:i=c;break;case 4:return n.label++,{value:c[1],done:!1};case 5:n.label++,o=c[1],c=[0];continue;case 7:c=n.ops.pop(),n.trys.pop();continue;default:if(i=n.trys,!(i=i.length>0&&i[i.length-1])&&(c[0]===6||c[0]===2)){n=0;continue}if(c[0]===3&&(!i||c[1]>i[0]&&c[1]<i[3])){n.label=c[1];break}if(c[0]===6&&n.label<i[1]){n.label=i[1],i=c;break}if(i&&n.label<i[2]){n.label=i[2],n.ops.push(c);break}i[2]&&n.ops.pop(),n.trys.pop();continue}c=e.call(t,n)}catch(u){c=[6,u],o=0}finally{r=i=0}if(c[0]&5)throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}},ae=ie({},rn),Fe=ae.version,Ct=ae.render,At=ae.unmountComponentAtNode,pt;try{var mt=Number((Fe||"").split(".")[0]);mt>=18&&(pt=ae.createRoot)}catch(t){}function Rt(t){var e=ae.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED;e&&typeof e=="object"&&(e.usingClientEntryPoint=t)}var Yt="__rc_react_root__";function de(t,e){Rt(!0);var n=e[Yt]||pt(e);Rt(!1),n.render(t),e[Yt]=n}function Ae(t,e){Ct(t,e)}function ge(t,e){}function me(t,e){if(pt){de(t,e);return}Ae(t,e)}function Ce(t){return Ht(this,void 0,void 0,function(){return Te(this,function(e){return[2,Promise.resolve().then(function(){var n;(n=t[Yt])===null||n===void 0||n.unmount(),delete t[Yt]})]})})}function le(t){At(t)}function ze(t){}function Le(t){return Ht(this,void 0,void 0,function(){return Te(this,function(e){return pt!==void 0?[2,Ce(t)]:(le(t),[2])})})}var Dt=new Map;typeof document!="undefined"&&Dt.set("tooltip",document.createElement("div"));var Nt=function(t,e){e===void 0&&(e=!1);var n=null;if(e)n=Dt.get("tooltip");else if(n=document.createElement("div"),t!=null&&t.key){var r=Dt.get(t.key);r?n=r:Dt.set(t.key,n)}return me(t,n),n},en=function(t){if(typeof document=="undefined")return"loading";var e=t.attachShadow({mode:"open"}),n=document.createElement("div"),r=document.createElement("style");r.innerHTML=`.loading {
    display: inline-block;
    position: relative;
    width: 80px;
    height: 80px;
  }
  .loading div {
    position: absolute;
    top: 33px;
    width: 13px;
    height: 13px;
    border-radius: 50%;
    background: #ccc;
    animation-timing-function: cubic-bezier(0, 1, 1, 0);
  }
  .loading div:nth-child(1) {
    left: 8px;
    animation: loading1 0.6s infinite;
  }
  .loading div:nth-child(2) {
    left: 8px;
    animation: loading2 0.6s infinite;
  }
  .loading div:nth-child(3) {
    left: 32px;
    animation: loading2 0.6s infinite;
  }
  .loading div:nth-child(4) {
    left: 56px;
    animation: loading3 0.6s infinite;
  }
  @keyframes loading1 {
    0% {
      transform: scale(0);
    }
    100% {
      transform: scale(1);
    }
  }
  @keyframes loading3 {
    0% {
      transform: scale(1);
    }
    100% {
      transform: scale(0);
    }
  }
  @keyframes loading2 {
    0% {
      transform: translate(0, 0);
    }
    100% {
      transform: translate(24px, 0);
    }
  }
  `,n.classList.add("loading"),n.innerHTML="<div></div><div></div><div></div><div></div>",e.appendChild(r),e.appendChild(n)},jn=function(t){var e=t.loadingTemplate,n=t.theme,r=n===void 0?"light":n,o=ee.useRef(null);ee.useEffect(function(){!e&&o.current&&en(o.current)},[]);var i=function(){return e||ee.createElement("div",{ref:o})};return ee.createElement("div",{className:"charts-loading-container",style:{position:"absolute",width:"100%",height:"100%",display:"flex",alignItems:"center",justifyContent:"center",left:0,top:0,zIndex:99,backgroundColor:r==="dark"?"rgb(20, 20, 20)":"rgb(255, 255, 255)"}},i())},Tn=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,o){r.__proto__=o}||function(r,o){for(var i in o)Object.prototype.hasOwnProperty.call(o,i)&&(r[i]=o[i])},t(e,n)};return function(e,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");t(e,n);function r(){this.constructor=e}e.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),bn=function(t){Tn(e,t);function e(){var n=t!==null&&t.apply(this,arguments)||this;return n.state={hasError:!1},n.renderError=function(r){var o=n.props.errorTemplate;switch(r){default:return typeof o=="function"?o(r):o||ee.createElement("h5",null,"\u7EC4\u4EF6\u51FA\u9519\u4E86\uFF0C\u8BF7\u6838\u67E5\u540E\u91CD\u8BD5\uFF1A ",r.message)}},n}return e.getDerivedStateFromError=function(n){return{hasError:!0,error:n}},e.getDerivedStateFromProps=function(n,r){return r.children!==n.children?{children:n.children,hasError:!1,error:void 0}:null},e.prototype.render=function(){return this.state.hasError?this.renderError(this.state.error):ee.createElement(ee.Fragment,null,this.props.children)},e}(ee.Component),G=Q(32699),on,nr=function(){return on||(on=document.createElement("canvas").getContext("2d")),on},rr=function(t,e,n){if(n||arguments.length===2)for(var r=0,o=e.length,i;r<o;r++)(i||!(r in e))&&(i||(i=Array.prototype.slice.call(e,0,r)),i[r]=e[r]);return t.concat(i||Array.prototype.slice.call(e))},or=(0,G.memoize)(function(t,e){e===void 0&&(e={});var n=e.fontSize,r=e.fontFamily,o=r===void 0?"sans-serif":r,i=e.fontWeight,a=e.fontStyle,s=e.fontVariant,l=nr();return l.font=[a,i,s,"".concat(n,"px"),o].join(" "),l.measureText((0,G.isString)(t)?t:"")},function(t,e){return e===void 0&&(e={}),rr([t],(0,G.values)(e),!0).join("")}),pr=function(t,e){return e===void 0&&(e={}),or(t,e).width},Nn=function(t,e){e===void 0&&(e={});var n=or(t,e);return n.actualBoundingBoxAscent+n.actualBoundingBoxDescent},Yr=function(t){var e=/react|\.jsx|children:\[\(|return\s+[A-Za-z0-9].createElement\((?!['"][g|circle|ellipse|image|rect|line|polyline|polygon|text|path|html|mesh]['"])([^\)])*,/i;return e.test(t)},an=function(){return an=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++){e=arguments[n];for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])}return t},an.apply(this,arguments)};function _e(t,e){var n=(0,ee.useRef)(),r=(0,ee.useRef)(),o=(0,ee.useRef)(null),i=e.onReady,a=e.onEvent,s=function(u,f){var d;u===void 0&&(u="image/png");var p=(d=o.current)===null||d===void 0?void 0:d.getElementsByTagName("canvas")[0];return p==null?void 0:p.toDataURL(u,f)},l=function(u,f,d){u===void 0&&(u="download"),f===void 0&&(f="image/png");var p=u;u.indexOf(".")===-1&&(p="".concat(u,".").concat(f.split("/")[1]));var h=s(f,d),y=document.createElement("a");return y.href=h,y.download=p,document.body.appendChild(y),y.click(),document.body.removeChild(y),y=null,p},c=function(u,f){f===void 0&&(f=!1);var d=Object.keys(u),p=f;d.forEach(function(h){var y=u[h];h==="tooltip"&&(p=!0),(0,G.isFunction)(y)&&Yr("".concat(y))?u[h]=function(){for(var g=[],m=0;m<arguments.length;m++)g[m]=arguments[m];return Nt(y.apply(void 0,g),p)}:(0,G.isArray)(y)?y.forEach(function(g){c(g,p)}):(0,G.isObject)(y)?c(y,p):p=f})};return(0,ee.useEffect)(function(){n.current&&!(0,G.isEqual)(r.current,e)&&(r.current=(0,G.cloneDeep)(e),c(e),n.current.update(e),n.current.render())},[e]),(0,ee.useEffect)(function(){if(!o.current)return function(){return null};r.current||(r.current=(0,G.cloneDeep)(e)),c(e);var u=new t(o.current,an({},e));u.toDataURL=s,u.downloadImage=l,u.render(),n.current=u,i&&i(u);var f=function(d){a&&a(u,d)};return u.on("*",f),function(){n.current&&(n.current.destroy(),n.current.off("*",f),n.current=void 0)}},[]),{chart:n,container:o}}var Zn=Q(80216);const ho="main-layer",Ni="label-layer",zn="element",Ho="view",Bn="plot",bs="component",zi="label",Bi="area",xp="mask";var ht=Q(1478),vs=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,r=Object.getOwnPropertySymbols(t);o<r.length;o++)e.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(t,r[o])&&(n[r[o]]=t[r[o]]);return n};const Wr=(t,e,n)=>[["M",t-n,e],["A",n,n,0,1,0,t+n,e],["A",n,n,0,1,0,t-n,e],["Z"]];Wr.style=["fill"];const $i=Wr.bind(void 0);$i.style=["stroke","lineWidth"];const yo=(t,e,n)=>[["M",t-n,e-n],["L",t+n,e-n],["L",t+n,e+n],["L",t-n,e+n],["Z"]];yo.style=["fill"];const Yi=yo.bind(void 0);Yi.style=["fill"];const Xo=yo.bind(void 0);Xo.style=["stroke","lineWidth"];const Wi=(t,e,n)=>{const r=n*.618;return[["M",t-r,e],["L",t,e-n],["L",t+r,e],["L",t,e+n],["Z"]]};Wi.style=["fill"];const Go=Wi.bind(void 0);Go.style=["stroke","lineWidth"];const go=(t,e,n)=>{const r=n*Math.sin(.3333333333333333*Math.PI);return[["M",t-n,e+r],["L",t,e-r],["L",t+n,e+r],["Z"]]};go.style=["fill"];const Os=go.bind(void 0);Os.style=["stroke","lineWidth"];const Zi=(t,e,n)=>{const r=n*Math.sin(.3333333333333333*Math.PI);return[["M",t-n,e-r],["L",t+n,e-r],["L",t,e+r],["Z"]]};Zi.style=["fill"];const Hi=Zi.bind(void 0);Hi.style=["stroke","lineWidth"];const Xi=(t,e,n)=>{const r=n/2*Math.sqrt(3);return[["M",t,e-n],["L",t+r,e-n/2],["L",t+r,e+n/2],["L",t,e+n],["L",t-r,e+n/2],["L",t-r,e-n/2],["Z"]]};Xi.style=["fill"];const Qe=Xi.bind(void 0);Qe.style=["stroke","lineWidth"];const mo=(t,e,n)=>{const r=n-1.5;return[["M",t-n,e-r],["L",t+n,e+r],["L",t+n,e-r],["L",t-n,e+r],["Z"]]};mo.style=["fill"];const Gi=mo.bind(void 0);Gi.style=["stroke","lineWidth"];const Uo=(t,e,n)=>[["M",t,e+n],["L",t,e-n]];Uo.style=["stroke","lineWidth"];const hr=(t,e,n)=>[["M",t-n,e-n],["L",t+n,e+n],["M",t+n,e-n],["L",t-n,e+n]];hr.style=["stroke","lineWidth"];const hn=(t,e,n)=>[["M",t-n/2,e-n],["L",t+n/2,e-n],["M",t,e-n],["L",t,e+n],["M",t-n/2,e+n],["L",t+n/2,e+n]];hn.style=["stroke","lineWidth"];const Vo=(t,e,n)=>[["M",t-n,e],["L",t+n,e],["M",t,e-n],["L",t,e+n]];Vo.style=["stroke","lineWidth"];const qo=(t,e,n)=>[["M",t-n,e],["L",t+n,e]];qo.style=["stroke","lineWidth"];const Ko=(t,e,n)=>[["M",t-n,e],["L",t+n,e]];Ko.style=["stroke","lineWidth"];const Ui=Ko.bind(void 0);Ui.style=["stroke","lineWidth"];const xs=(t,e,n)=>[["M",t-n,e],["A",n/2,n/2,0,1,1,t,e],["A",n/2,n/2,0,1,0,t+n,e]];xs.style=["stroke","lineWidth"];const _s=(t,e,n)=>[["M",t-n-1,e-2.5],["L",t,e-2.5],["L",t,e+2.5],["L",t+n+1,e+2.5]];_s.style=["stroke","lineWidth"];const ws=(t,e,n)=>[["M",t-n-1,e+2.5],["L",t,e+2.5],["L",t,e-2.5],["L",t+n+1,e-2.5]];ws.style=["stroke","lineWidth"];const Ss=(t,e,n)=>[["M",t-(n+1),e+2.5],["L",t-n/2,e+2.5],["L",t-n/2,e-2.5],["L",t+n/2,e-2.5],["L",t+n/2,e+2.5],["L",t+n+1,e+2.5]];Ss.style=["stroke","lineWidth"];const js=(t,e,n)=>[["M",t-5,e+2.5],["L",t-5,e],["L",t,e],["L",t,e-3],["L",t,e+3],["L",t+6.5,e+3]];js.style=["stroke","lineWidth"];const Zr=new Map([["bowtie",mo],["cross",hr],["dash",Ui],["diamond",Wi],["dot",Ko],["hexagon",Xi],["hollowBowtie",Gi],["hollowDiamond",Go],["hollowHexagon",Qe],["hollowPoint",$i],["hollowSquare",Xo],["hollowTriangle",Os],["hollowTriangleDown",Hi],["hv",_s],["hvh",Ss],["hyphen",qo],["line",Uo],["plus",Vo],["point",Wr],["rect",Yi],["smooth",xs],["square",yo],["tick",hn],["triangleDown",Zi],["triangle",go],["vh",ws],["vhv",js]]);function Il(t,e){var{d:n,fill:r,lineWidth:o,path:i,stroke:a,color:s}=e,l=vs(e,["d","fill","lineWidth","path","stroke","color"]);const c=Zr.get(t)||Zr.get("point");return(...u)=>new ht.y$({style:Object.assign(Object.assign({},l),{d:c(...u),stroke:c.style.includes("stroke")?s||a:"",fill:c.style.includes("fill")?s||r:"",lineWidth:c.style.includes("lineWidth")?o||o||2:0})})}function Fl(t,e){Zr.set(t,e)}function _p(t){Zr.delete(t)}const Es={};function As(t,e){t.startsWith("symbol.")?Fl(t.split(".").pop(),e):Object.assign(Es,{[t]:e})}var bo=Q(31211),Vi=Q(74768),Nl=Q(99860),et=Q(11051);class vo extends Map{constructor(e,n=Ps){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:n}}),e!=null)for(const[r,o]of e)this.set(r,o)}get(e){return super.get(Hr(this,e))}has(e){return super.has(Hr(this,e))}set(e,n){return super.set(Ms(this,e),n)}delete(e){return super.delete(ks(this,e))}}class Qo extends null{constructor(e,n=Ps){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:n}}),e!=null)for(const r of e)this.add(r)}has(e){return super.has(Hr(this,e))}add(e){return super.add(Ms(this,e))}delete(e){return super.delete(ks(this,e))}}function Hr({_intern:t,_key:e},n){const r=e(n);return t.has(r)?t.get(r):n}function Ms({_intern:t,_key:e},n){const r=e(n);return t.has(r)?t.get(r):(t.set(r,n),n)}function ks({_intern:t,_key:e},n){const r=e(n);return t.has(r)&&(n=t.get(r),t.delete(r)),n}function Ps(t){return t!==null&&typeof t=="object"?t.valueOf():t}function Oo(t){return t}function ve(t,...e){return H(t,Oo,Oo,e)}function Jo(t,...e){return H(t,Array.from,Oo,e)}function Ts(t,e){for(let n=1,r=e.length;n<r;++n)t=t.flatMap(o=>o.pop().map(([i,a])=>[...o,i,a]));return t}function wp(t,...e){return Ts(Jo(t,...e),e)}function En(t,e,...n){return Ts(_(t,e,...n),n)}function sn(t,e,...n){return H(t,Oo,e,n)}function _(t,e,...n){return H(t,Array.from,e,n)}function S(t,...e){return H(t,identity,N,e)}function L(t,...e){return H(t,Array.from,N,e)}function N(t){if(t.length!==1)throw new Error("duplicate key");return t[0]}function H(t,e,n,r){return function o(i,a){if(a>=r.length)return n(i);const s=new vo,l=r[a++];let c=-1;for(const u of i){const f=l(u,++c,i),d=s.get(f);d?d.push(u):s.set(f,[u])}for(const[u,f]of s)s.set(u,o(f,a));return e(s)}(t,0)}var U=Q(76109),$=Q(37090),B=Q(42109),V=Q(22355),q=Q(77341),lt=Q(39429);class ft extends lt.X{getDefaultOptions(){return{range:[0],domain:[0,1],unknown:void 0,tickCount:5,tickMethod:q.Z}}map(e){const[n]=this.options.range;return n!==void 0?n:this.options.unknown}invert(e){const[n]=this.options.range;return e===n&&n!==void 0?this.options.domain:[]}getTicks(){const{tickMethod:e,domain:n,tickCount:r}=this.options,[o,i]=n;return!(0,V.Z)(o)||!(0,V.Z)(i)?[]:e(o,i,r)}clone(){return new ft(this.options)}}var St=function(t,e,n,r){function o(i){return i instanceof n?i:new n(function(a){a(i)})}return new(n||(n=Promise))(function(i,a){function s(u){try{c(r.next(u))}catch(f){a(f)}}function l(u){try{c(r.throw(u))}catch(f){a(f)}}function c(u){u.done?i(u.value):o(u.value).then(s,l)}c((r=r.apply(t,e||[])).next())})};function ut(t){var e;let n=t;for(;n;){if(((e=n.attributes)===null||e===void 0?void 0:e.class)==="view")return n;n=n.parentNode}return null}function Ot(t,e){const n=e!=null?e:ut(t).__data__,r=t.__data__,{markKey:o,index:i,seriesIndex:a}=r,{markState:s}=n,l=Array.from(s.keys()).find(c=>c.key===o);if(l)return a?a.map(c=>l.data[c]):l.data[i]}function bt(t){const e=ut(t).__data__,{scale:n}=e;return it(n,t.__data__)}function it(t,e){const{color:n,series:r,facet:o=!1}=t,{color:i,series:a}=e,s=l=>l&&l.invert&&!(l instanceof B.t)&&!(l instanceof ft);if(s(r))return r.clone().invert(a);if(a&&r instanceof B.t&&r.invert(a)!==i&&!o)return r.invert(a);if(s(n)){const l=n.invert(i);return Array.isArray(l)?null:l}return null}function Pt(t){return t}function _t(t){return t.reduce((e,n)=>(r,...o)=>n(e(r,...o),...o),Pt)}function Lt(t){return t.reduce((e,n)=>r=>St(this,void 0,void 0,function*(){const o=yield e(r);return n(o)}),Pt)}function gt(t){return t.replace(/( |^)[a-z]/g,e=>e.toUpperCase())}function kt(t=""){throw new Error(t)}function Xt(t,e){const{attributes:n}=e,r=new Set(["id","className"]);for(const[o,i]of Object.entries(n))r.has(o)||t.attr(o,i)}function Ut(t){return t!=null&&!Number.isNaN(t)}function $n(t,e){return t+(e-t)*Math.random()}function yn(t){const e=new Map;return n=>{if(e.has(n))return e.get(n);const r=t(n);return e.set(n,r),r}}function An(t,e){const{transform:n}=t.style,o=(i=>i==="none"||i===void 0)(n)?"":n;t.style.transform=`${o} ${e}`.trimStart()}function at(t,e){return Re(t,e)||{}}function Re(t,e){const n=Object.entries(t||{}).filter(([r])=>r.startsWith(e)).map(([r,o])=>[(0,U.Z)(r.replace(e,"").trim()),o]).filter(([r])=>!!r);return n.length===0?null:Object.fromEntries(n)}function De(t,e){return Object.fromEntries(Object.entries(t).map(([n,r])=>[`${e}${upperFirst(n)}`,r]))}function ti(t,e){return Object.fromEntries(Object.entries(t).filter(([n])=>e.find(r=>n.startsWith(r))))}function qi(t,...e){return Object.fromEntries(Object.entries(t).filter(([n])=>e.every(r=>!n.startsWith(r))))}function Xr(t,e){if(t===void 0)return null;if(typeof t=="number")return t;const n=+t.replace("%","");return Number.isNaN(n)?null:n/100*e}function vn(t){return typeof t=="object"&&!(t instanceof Date)&&t!==null&&!Array.isArray(t)}function Se(t){return t===null||t===!1}function Gr(t,e,n=5,r=0){if(!(r>=n)){for(const o of Object.keys(e)){const i=e[o];!(0,$.Z)(i)||!(0,$.Z)(t[o])?t[o]=i:Gr(t[o],i,n,r+1)}return t}}function Tt(t){return new je([t],null,t,t.ownerDocument)}class je{constructor(e=null,n=null,r=null,o=null,i=[null,null,null,null,null],a=[],s=[]){this._elements=Array.from(e),this._data=n,this._parent=r,this._document=o,this._enter=i[0],this._update=i[1],this._exit=i[2],this._merge=i[3],this._split=i[4],this._transitions=a,this._facetElements=s}selectAll(e){const n=typeof e=="string"?this._parent.querySelectorAll(e):e;return new je(n,null,this._elements[0],this._document)}selectFacetAll(e){const n=typeof e=="string"?this._parent.querySelectorAll(e):e;return new je(this._elements,null,this._parent,this._document,void 0,void 0,n)}select(e){const n=typeof e=="string"?this._parent.querySelectorAll(e)[0]||null:e;return new je([n],null,n,this._document)}append(e){const n=typeof e=="function"?e:()=>this.createElement(e),r=[];if(this._data!==null){for(let o=0;o<this._data.length;o++){const i=this._data[o],[a,s]=Array.isArray(i)?i:[i,null],l=n(a,o);l.__data__=a,s!==null&&(l.__fromElements__=s),this._parent.appendChild(l),r.push(l)}return new je(r,null,this._parent,this._document)}else{for(let o=0;o<this._elements.length;o++){const i=this._elements[o],a=i.__data__,s=n(a,o);i.appendChild(s),r.push(s)}return new je(r,null,r[0],this._document)}}maybeAppend(e,n,r){const o=this._elements[0],i=o.getElementById(e);if(i)return new je([i],null,this._parent,this._document);const a=typeof n=="string"?this.createElement(n):n();return a.id=e,r&&(a.className=r),o.appendChild(a),new je([a],null,this._parent,this._document)}data(e,n=o=>o,r=()=>null){const o=[],i=[],a=new Set(this._elements),s=[],l=new Set,c=new Map(this._elements.map((p,h)=>[n(p.__data__,h),p])),u=new Map(this._facetElements.map((p,h)=>[n(p.__data__,h),p])),f=ve(this._elements,p=>r(p.__data__));for(let p=0;p<e.length;p++){const h=e[p],y=n(h,p),g=r(h,p);if(c.has(y)){const m=c.get(y);m.__data__=h,m.__facet__=!1,i.push(m),a.delete(m),c.delete(y)}else if(u.has(y)){const m=u.get(y);m.__data__=h,m.__facet__=!0,i.push(m),u.delete(y)}else if(f.has(y)){const m=f.get(y);s.push([h,m]);for(const b of m)a.delete(b);f.delete(y)}else if(c.has(g)){const m=c.get(g);m.__toData__?m.__toData__.push(h):m.__toData__=[h],l.add(m),a.delete(m)}else o.push(h)}const d=[new je([],o,this._parent,this._document),new je(i,null,this._parent,this._document),new je(a,null,this._parent,this._document),new je([],s,this._parent,this._document),new je(l,null,this._parent,this._document)];return new je(this._elements,null,this._parent,this._document,d)}merge(e){const n=[...this._elements,...e._elements],r=[...this._transitions,...e._transitions];return new je(n,null,this._parent,this._document,void 0,r)}createElement(e){if(this._document)return this._document.createElement(e,{});const n=je.registry[e];return n?new n:kt(`Unknown node type: ${e}`)}join(e=a=>a,n=a=>a,r=a=>a.remove(),o=a=>a,i=a=>a.remove()){const a=e(this._enter),s=n(this._update),l=r(this._exit),c=o(this._merge),u=i(this._split);return s.merge(a).merge(l).merge(c).merge(u)}remove(){for(let e=0;e<this._elements.length;e++){const n=this._transitions[e];if(n){const r=Array.isArray(n)?n:[n];Promise.all(r.map(o=>o.finished)).then(()=>{this._elements[e].remove()})}else this._elements[e].remove()}return new je([],null,this._parent,this._document,void 0,this._transitions)}each(e){for(let n=0;n<this._elements.length;n++){const r=this._elements[n],o=r.__data__;e(o,n,r)}return this}attr(e,n){const r=typeof n!="function"?()=>n:n;return this.each(function(o,i,a){n!==void 0&&(a[e]=r(o,i,a))})}style(e,n){const r=typeof n!="function"?()=>n:n;return this.each(function(o,i,a){n!==void 0&&(a.style[e]=r(o,i,a))})}transition(e){const n=typeof e!="function"?()=>e:e,{_transitions:r}=this;return this.each(function(o,i,a){r[i]=n(o,i,a)})}on(e,n){return this.each(function(r,o,i){i.addEventListener(e,n)}),this}call(e,...n){return e(this,...n),this}node(){return this._elements[0]}nodes(){return this._elements}transitions(){return this._transitions}parent(){return this._parent}}je.registry={g:ht.ZA,rect:ht.UL,circle:ht.Cd,path:ht.y$,text:ht.xv,ellipse:ht.Pj,image:ht.Ee,line:ht.x1,polygon:ht.mg,polyline:ht.aH,html:ht.k9};const Jt={BEFORE_RENDER:"beforerender",AFTER_RENDER:"afterrender",BEFORE_PAINT:"beforepaint",AFTER_PAINT:"afterpaint",BEFORE_CHANGE_DATA:"beforechangedata",AFTER_CHANGE_DATA:"afterchangedata",BEFORE_CLEAR:"beforeclear",AFTER_CLEAR:"afterclear",BEFORE_DESTROY:"beforedestroy",AFTER_DESTROY:"afterdestroy",BEFORE_CHANGE_SIZE:"beforechangesize",AFTER_CHANGE_SIZE:"afterchangesize",POINTER_TAP:"pointertap",POINTER_DOWN:"pointerdown",POINTER_UP:"pointerup",POINTER_OVER:"pointerover",POINTER_OUT:"pointerout",POINTER_MOVE:"pointermove",POINTER_ENTER:"pointerenter",POINTER_LEAVE:"pointerleave",POINTER_UPOUTSIDE:"pointerupoutside",DRAG_START:"dragstart",DRAG:"drag",DRAG_END:"dragend",DRAG_ENTER:"dragenter",DRAG_LEAVE:"dragleave",DRAG_OVER:"dragover",DROP:"DROP",CLICK:"click",DBLCLICK:"dblclick"},Sp={abs:Math.abs,ceil:Math.ceil,floor:Math.floor,max:Math.max,min:Math.min,round:Math.round,sqrt:Math.sqrt,pow:Math.pow};function ZR(t,e){Sp[t]=e}class Je extends Error{constructor(e,n,r){super(e),this.position=n,this.token=r,this.name="ExpressionError"}}var $t;(function(t){t[t.STRING=0]="STRING",t[t.NUMBER=1]="NUMBER",t[t.BOOLEAN=2]="BOOLEAN",t[t.NULL=3]="NULL",t[t.IDENTIFIER=4]="IDENTIFIER",t[t.OPERATOR=5]="OPERATOR",t[t.FUNCTION=6]="FUNCTION",t[t.DOT=7]="DOT",t[t.BRACKET_LEFT=8]="BRACKET_LEFT",t[t.BRACKET_RIGHT=9]="BRACKET_RIGHT",t[t.PAREN_LEFT=10]="PAREN_LEFT",t[t.PAREN_RIGHT=11]="PAREN_RIGHT",t[t.COMMA=12]="COMMA",t[t.QUESTION=13]="QUESTION",t[t.COLON=14]="COLON",t[t.DOLLAR=15]="DOLLAR"})($t||($t={}));const q2=new Set([32,9,10,13]),K2=new Set([43,45,42,47,37,33,38,124,61,60,62]),Q2=new Map([["true",$t.BOOLEAN],["false",$t.BOOLEAN],["null",$t.NULL]]),zl=new Map([["===",!0],["!==",!0],["<=",!0],[">=",!0],["&&",!0],["||",!0],["+",!0],["-",!0],["*",!0],["/",!0],["%",!0],["!",!0],["<",!0],[">",!0]]),J2=new Map([[46,$t.DOT],[91,$t.BRACKET_LEFT],[93,$t.BRACKET_RIGHT],[40,$t.PAREN_LEFT],[41,$t.PAREN_RIGHT],[44,$t.COMMA],[63,$t.QUESTION],[58,$t.COLON],[36,$t.DOLLAR]]),jp=new Map;for(const[t,e]of J2.entries())jp.set(t,{type:e,value:String.fromCharCode(t)});function Ki(t){return t>=48&&t<=57}function Bl(t){return t>=97&&t<=122||t>=65&&t<=90||t===95}function Ep(t){return Bl(t)||Ki(t)}function t_(t){return K2.has(t)}var Be;(function(t){t[t.Program=0]="Program",t[t.Literal=1]="Literal",t[t.Identifier=2]="Identifier",t[t.MemberExpression=3]="MemberExpression",t[t.CallExpression=4]="CallExpression",t[t.BinaryExpression=5]="BinaryExpression",t[t.UnaryExpression=6]="UnaryExpression",t[t.ConditionalExpression=7]="ConditionalExpression"})(Be||(Be={}));const e_=new Map([["||",2],["&&",3],["===",4],["!==",4],[">",5],[">=",5],["<",5],["<=",5],["+",6],["-",6],["*",7],["/",7],["%",7],["!",8]]),n_={type:Be.Literal,value:null},r_={type:Be.Literal,value:!0},o_={type:Be.Literal,value:!1},i_=t=>{let e=0;const n=t.length,r=()=>e>=n?null:t[e],o=()=>t[e++],i=f=>{const d=r();return d!==null&&d.type===f},a=f=>f.type===$t.OPERATOR?e_.get(f.value)||-1:f.type===$t.DOT||f.type===$t.BRACKET_LEFT?9:f.type===$t.QUESTION?1:-1,s=f=>{let d,p;if(o().type===$t.DOT){if(!i($t.IDENTIFIER)){const y=r();throw new Je("Expected property name",e,y?y.value:"<end of input>")}const h=o();d={type:Be.Identifier,name:h.value},p=!1}else{if(d=c(0),!i($t.BRACKET_RIGHT)){const h=r();throw new Je("Expected closing bracket",e,h?h.value:"<end of input>")}o(),p=!0}return{type:Be.MemberExpression,object:f,property:d,computed:p}},l=()=>{const f=r();if(!f)throw new Je("Unexpected end of input",e,"<end of input>");if(f.type===$t.OPERATOR&&(f.value==="!"||f.value==="-")){o();const d=l();return{type:Be.UnaryExpression,operator:f.value,argument:d,prefix:!0}}switch(f.type){case $t.NUMBER:return o(),{type:Be.Literal,value:Number(f.value)};case $t.STRING:return o(),{type:Be.Literal,value:f.value};case $t.BOOLEAN:return o(),f.value==="true"?r_:o_;case $t.NULL:return o(),n_;case $t.IDENTIFIER:return o(),{type:Be.Identifier,name:f.value};case $t.FUNCTION:return(()=>{const d=o(),p=[];if(!i($t.PAREN_LEFT)){const h=r();throw new Je("Expected opening parenthesis after function name",e,h?h.value:"<end of input>")}for(o();;){if(i($t.PAREN_RIGHT)){o();break}if(!r()){const y=r();throw new Je("Expected closing parenthesis",e,y?y.value:"<end of input>")}if(p.length>0){if(!i($t.COMMA)){const y=r();throw new Je("Expected comma between function arguments",e,y?y.value:"<end of input>")}o()}const h=c(0);p.push(h)}return{type:Be.CallExpression,callee:{type:Be.Identifier,name:d.value},arguments:p}})();case $t.PAREN_LEFT:{o();const d=c(0);if(!i($t.PAREN_RIGHT)){const p=r();throw new Je("Expected closing parenthesis",e,p?p.value:"<end of input>")}return o(),d}default:throw new Je(`Unexpected token: ${f.type}`,e,f.value)}},c=(f=0)=>{let d=l();for(;e<n;){const p=t[e],h=a(p);if(h<=f)break;if(p.type!==$t.QUESTION)if(p.type!==$t.OPERATOR){if(p.type!==$t.DOT&&p.type!==$t.BRACKET_LEFT)break;d=s(d)}else{o();const y=c(h);d={type:Be.BinaryExpression,operator:p.value,left:d,right:y}}else{o();const y=c(0);if(!i($t.COLON)){const m=r();throw new Je("Expected : in conditional expression",e,m?m.value:"<end of input>")}o();const g=c(0);d={type:Be.ConditionalExpression,test:d,consequent:y,alternate:g}}}return d},u=c();return{type:Be.Program,body:u}},a_=(t,e,n)=>{let r=e;n&&(r=U2(Dl({},e),{context:Dl(Dl({},e.context),n)}));const o=i=>{switch(i.type){case Be.Literal:return(a=>a.value)(i);case Be.Identifier:return(a=>{if(!(a.name in r.context))throw new Je(`Undefined variable: ${a.name}`);return r.context[a.name]})(i);case Be.MemberExpression:return(a=>{const s=o(a.object);if(s==null)throw new Je("Cannot access property of null or undefined");return s[a.computed?o(a.property):a.property.name]})(i);case Be.CallExpression:return(a=>{const s=r.functions[a.callee.name];if(!s)throw new Je(`Undefined function: ${a.callee.name}`);return s(...a.arguments.map(l=>o(l)))})(i);case Be.BinaryExpression:return(a=>{if(a.operator==="&&"){const c=o(a.left);return c&&o(a.right)}if(a.operator==="||")return o(a.left)||o(a.right);const s=o(a.left),l=o(a.right);switch(a.operator){case"+":return s+l;case"-":return s-l;case"*":return s*l;case"/":return s/l;case"%":return s%l;case"===":return s===l;case"!==":return s!==l;case">":return s>l;case">=":return s>=l;case"<":return s<l;case"<=":return s<=l;default:throw new Je(`Unknown operator: ${a.operator}`)}})(i);case Be.UnaryExpression:return(a=>{const s=o(a.argument);if(a.prefix)switch(a.operator){case"!":return!s;case"-":if(typeof s!="number")throw new Je(`Cannot apply unary - to non-number: ${s}`);return-s;default:throw new Je(`Unknown operator: ${a.operator}`)}throw new Je(`Postfix operators are not supported: ${a.operator}`)})(i);case Be.ConditionalExpression:return(a=>{const s=o(a.test);return o(s?a.consequent:a.alternate)})(i);default:throw new Je(`Evaluation error: Unsupported node type: ${i.type}`)}};return o(t.body)};function Ap(t){const e=(o=>{const i=o,a=i.length,s=new Array(Math.ceil(a/3));let l=0,c=0;function u(g){const m=c+1;c++;let b="",v=!1;for(;c<a;){const O=i.charCodeAt(c);if(O===g)return v||(b=i.substring(m,c)),c++,{type:$t.STRING,value:b};O===92?(v||(b=i.substring(m,c),v=!0),c++,b+=i[c]):v&&(b+=i[c]),c++}throw new Je(`Unterminated string starting with ${String.fromCharCode(g)}`,c,i.substring(Math.max(0,c-10),c))}function f(){const g=c;for(i.charCodeAt(c)===45&&c++;c<a&&Ki(i.charCodeAt(c));)c++;if(c<a&&i.charCodeAt(c)===46)for(c++;c<a&&Ki(i.charCodeAt(c));)c++;const m=i.slice(g,c);return{type:$t.NUMBER,value:m}}function d(){c++;const g=c;if(c<a&&Bl(i.charCodeAt(c)))for(c++;c<a&&Ep(i.charCodeAt(c));)c++;const m=i.slice(g,c);return{type:$t.FUNCTION,value:m}}function p(){const g=c++;for(;c<a&&Ep(i.charCodeAt(c));)c++;const m=i.slice(g,c),b=Q2.get(m);return b?{type:b,value:m}:{type:$t.IDENTIFIER,value:m}}function h(){if(c+2<a){const m=i.substring(c,c+3);if(zl.has(m))return c+=3,{type:$t.OPERATOR,value:m}}if(c+1<a){const m=i.substring(c,c+2);if(zl.has(m))return c+=2,{type:$t.OPERATOR,value:m}}const g=i[c];if(zl.has(g))return c++,{type:$t.OPERATOR,value:g};throw new Je(`Unknown operator at position ${c}: ${i.substring(c,c+1)}`,c,i.substring(Math.max(0,c-10),c))}for(;c<a;){const g=i.charCodeAt(c);if(y=g,q2.has(y)){c++;continue}const m=jp.get(g);if(m)s[l++]=m,c++;else if(g!==34&&g!==39)if(Ki(g)||g===45&&c+1<a&&Ki(i.charCodeAt(c+1)))s[l++]=f();else if(g!==64)if(Bl(g))s[l++]=p();else{if(!t_(g))throw new Je(`Unexpected character: ${i[c]}`,c,i.substring(Math.max(0,c-10),c));s[l++]=h()}else s[l++]=d();else s[l++]=u(g)}var y;return l===s.length?s:s.slice(0,l)})(t),n=i_(e),r=((o={},i={})=>({context:o,functions:i}))({},Sp);return(o={})=>a_(n,r,o)}function HR(t,e={}){return Ap(t)(e)}var $l=Q(54663),s_=Q(48758),c_=function(t){return t},l_=function(t,e){e===void 0&&(e=c_);var n={};return(0,s_.Z)(t)&&!(0,$l.Z)(t)&&Object.keys(t).forEach(function(r){n[r]=e(t[r],r)}),n};function Mp(t){var e,n,r,o=t||1;function i(s,l){++e>o&&(r=n,a(1),++e),n[s]=l}function a(s){e=0,n=Object.create(null),s||(r=Object.create(null))}return a(),{clear:a,has:function(s){return n[s]!==void 0||r[s]!==void 0},get:function(s){var l=n[s];if(l!==void 0)return l;if((l=r[s])!==void 0)return i(s,l),l},set:function(s,l){n[s]!==void 0?n[s]=l:i(s,l)}}}const XR=Mp(3);function kp(t,e=(...r)=>`${r[0]}`,n=16){const r=Mp(n);return(...o)=>{const i=e(...o);let a=r.get(i);return r.has(i)?r.get(i):(a=t(...o),r.set(i,a),a)}}const u_=["style","encode","labels","children"],f_=kp(t=>{const e=Ap(t);return(...n)=>{const r=Array.from({length:n.length},(i,a)=>String.fromCharCode(97+a)),o=Object.fromEntries(n.map((i,a)=>[r[a],i]));return e(Object.assign(Object.assign({},o),{global:Object.assign({},o)}))}},t=>t,128);function Cs(t,e=!0){if(Array.isArray(t))return t.map((n,r)=>Cs(t[r],e));if(typeof t=="object"&&t)return l_(t,(n,r)=>e&&u_.includes(r)?Cs(n,r==="children"):e?n:Cs(n,!1));if(typeof t=="string"){const n=t.trim();if(n.startsWith("{")&&n.endsWith("}"))return f_(n.slice(1,-1))}return t}var Ur=Q(18814),Vr=Q(70373);function d_(t){return Math.abs(t=Math.round(t))>=1e21?t.toLocaleString("en").replace(/,/g,""):t.toString(10)}function Ls(t,e){if((n=(t=e?t.toExponential(e-1):t.toExponential()).indexOf("e"))<0)return null;var n,r=t.slice(0,n);return[r.length>1?r[0]+r.slice(2):r,+t.slice(n+1)]}function p_(t){return t=Ls(Math.abs(t)),t?t[1]:NaN}function h_(t,e){return function(n,r){for(var o=n.length,i=[],a=0,s=t[0],l=0;o>0&&s>0&&(l+s+1>r&&(s=Math.max(1,r-l)),i.push(n.substring(o-=s,o+s)),!((l+=s+1)>r));)s=t[a=(a+1)%t.length];return i.reverse().join(e)}}function y_(t){return function(e){return e.replace(/[0-9]/g,function(n){return t[+n]})}}var g_=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function Yl(t){if(!(e=g_.exec(t)))throw new Error("invalid format: "+t);var e;return new Wl({fill:e[1],align:e[2],sign:e[3],symbol:e[4],zero:e[5],width:e[6],comma:e[7],precision:e[8]&&e[8].slice(1),trim:e[9],type:e[10]})}Yl.prototype=Wl.prototype;function Wl(t){this.fill=t.fill===void 0?" ":t.fill+"",this.align=t.align===void 0?">":t.align+"",this.sign=t.sign===void 0?"-":t.sign+"",this.symbol=t.symbol===void 0?"":t.symbol+"",this.zero=!!t.zero,this.width=t.width===void 0?void 0:+t.width,this.comma=!!t.comma,this.precision=t.precision===void 0?void 0:+t.precision,this.trim=!!t.trim,this.type=t.type===void 0?"":t.type+""}Wl.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===void 0?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision===void 0?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type};function m_(t){t:for(var e=t.length,n=1,r=-1,o;n<e;++n)switch(t[n]){case".":r=o=n;break;case"0":r===0&&(r=n),o=n;break;default:if(!+t[n])break t;r>0&&(r=0);break}return r>0?t.slice(0,r)+t.slice(o+1):t}var Pp;function b_(t,e){var n=Ls(t,e);if(!n)return t+"";var r=n[0],o=n[1],i=o-(Pp=Math.max(-8,Math.min(8,Math.floor(o/3)))*3)+1,a=r.length;return i===a?r:i>a?r+new Array(i-a+1).join("0"):i>0?r.slice(0,i)+"."+r.slice(i):"0."+new Array(1-i).join("0")+Ls(t,Math.max(0,e+i-1))[0]}function Tp(t,e){var n=Ls(t,e);if(!n)return t+"";var r=n[0],o=n[1];return o<0?"0."+new Array(-o).join("0")+r:r.length>o+1?r.slice(0,o+1)+"."+r.slice(o+1):r+new Array(o-r.length+2).join("0")}var Cp={"%":(t,e)=>(t*100).toFixed(e),b:t=>Math.round(t).toString(2),c:t=>t+"",d:d_,e:(t,e)=>t.toExponential(e),f:(t,e)=>t.toFixed(e),g:(t,e)=>t.toPrecision(e),o:t=>Math.round(t).toString(8),p:(t,e)=>Tp(t*100,e),r:Tp,s:b_,X:t=>Math.round(t).toString(16).toUpperCase(),x:t=>Math.round(t).toString(16)};function Lp(t){return t}var Rp=Array.prototype.map,Dp=["y","z","a","f","p","n","\xB5","m","","k","M","G","T","P","E","Z","Y"];function v_(t){var e=t.grouping===void 0||t.thousands===void 0?Lp:h_(Rp.call(t.grouping,Number),t.thousands+""),n=t.currency===void 0?"":t.currency[0]+"",r=t.currency===void 0?"":t.currency[1]+"",o=t.decimal===void 0?".":t.decimal+"",i=t.numerals===void 0?Lp:y_(Rp.call(t.numerals,String)),a=t.percent===void 0?"%":t.percent+"",s=t.minus===void 0?"\u2212":t.minus+"",l=t.nan===void 0?"NaN":t.nan+"";function c(f){f=Yl(f);var d=f.fill,p=f.align,h=f.sign,y=f.symbol,g=f.zero,m=f.width,b=f.comma,v=f.precision,O=f.trim,x=f.type;x==="n"?(b=!0,x="g"):Cp[x]||(v===void 0&&(v=12),O=!0,x="g"),(g||d==="0"&&p==="=")&&(g=!0,d="0",p="=");var w=y==="$"?n:y==="#"&&/[boxX]/.test(x)?"0"+x.toLowerCase():"",j=y==="$"?r:/[%p]/.test(x)?a:"",E=Cp[x],M=/[defgprs%]/.test(x);v=v===void 0?6:/[gprs]/.test(x)?Math.max(1,Math.min(21,v)):Math.max(0,Math.min(20,v));function R(D){var F=w,A=j,T,P,k;if(x==="c")A=E(D)+A,D="";else{D=+D;var z=D<0||1/D<0;if(D=isNaN(D)?l:E(Math.abs(D),v),O&&(D=m_(D)),z&&+D==0&&h!=="+"&&(z=!1),F=(z?h==="("?h:s:h==="-"||h==="("?"":h)+F,A=(x==="s"?Dp[8+Pp/3]:"")+A+(z&&h==="("?")":""),M){for(T=-1,P=D.length;++T<P;)if(k=D.charCodeAt(T),48>k||k>57){A=(k===46?o+D.slice(T+1):D.slice(T))+A,D=D.slice(0,T);break}}}b&&!g&&(D=e(D,1/0));var C=F.length+D.length+A.length,I=C<m?new Array(m-C+1).join(d):"";switch(b&&g&&(D=e(I+D,I.length?m-A.length:1/0),I=""),p){case"<":D=F+D+A+I;break;case"=":D=F+I+D+A;break;case"^":D=I.slice(0,C=I.length>>1)+F+D+A+I.slice(C);break;default:D=I+F+D+A;break}return i(D)}return R.toString=function(){return f+""},R}function u(f,d){var p=c((f=Yl(f),f.type="f",f)),h=Math.max(-8,Math.min(8,Math.floor(p_(d)/3)))*3,y=Math.pow(10,-h),g=Dp[8+h/3];return function(m){return p(y*m)+g}}return{format:c,formatPrefix:u}}var Rs,qr,O_;x_({thousands:",",grouping:[3],currency:["$",""]});function x_(t){return Rs=v_(t),qr=Rs.format,O_=Rs.formatPrefix,Rs}function yr(t,e){return Object.entries(t).reduce((n,[r,o])=>(n[r]=e(o,r,t),n),{})}function xo(t){return t.map((e,n)=>n)}function GR(t){const e=t.length,n=t[0].length,r=new Array(n).fill(0).map(()=>new Array(e));for(let o=0;o<n;o++)for(let i=0;i<e;i++)r[o][i]=t[i][o];return r}function __(t){return t[0]}function Ip(t){return t[t.length-1]}function UR(t){return!t.some(Array.isArray)}function w_(t){return Array.from(new Set(t))}function Fp(t,e){const n=[[],[]];return t.forEach(r=>{n[e(r)?0:1].push(r)}),n}function Np(t,e=t.length){if(e===1)return t.map(r=>[r]);const n=[];for(let r=0;r<t.length;r++){const o=t.slice(r+1);Np(o,e-1).forEach(a=>{n.push([t[r],...a])})}return n}function S_(t){if(t.length===1)return[t];const e=[];for(let n=1;n<=t.length;n++)e.push(...Np(t,n));return e}var j_=Q(87314);function Hn(t,e){let n=0;if(e===void 0)for(let r of t)(r=+r)&&(n+=r);else{let r=-1;for(let o of t)(o=+e(o,++r,t))&&(n+=o)}return n}function he(t,e){let n;if(e===void 0)for(const r of t)r!=null&&(n<r||n===void 0&&r>=r)&&(n=r);else{let r=-1;for(let o of t)(o=e(o,++r,t))!=null&&(n<o||n===void 0&&o>=o)&&(n=o)}return n}function VR(t){return t*Math.PI/180}function qR(t){return t*180/Math.PI}function E_(t,e){return t=t%(2*Math.PI),e=e%(2*Math.PI),t<0&&(t=2*Math.PI+t),e<0&&(e=2*Math.PI+e),t>=e&&(e=e+2*Math.PI),{startAngle:t,endAngle:e}}const zp=(t={})=>{const e={startAngle:-Math.PI/2,endAngle:Math.PI*3/2,innerRadius:0,outerRadius:1},n=Object.assign(Object.assign({},e),t);return Object.assign(Object.assign({},n),E_(n.startAngle,n.endAngle))},Qi=t=>{const{startAngle:e,endAngle:n,innerRadius:r,outerRadius:o}=zp(t);return[["translate",0,.5],["reflect.y"],["translate",0,-.5],["polar",e,n,r,o]]};Qi.props={};const Bp=(t={})=>{const e={startAngle:-Math.PI/2,endAngle:Math.PI*3/2,innerRadius:0,outerRadius:1};return Object.assign(Object.assign({},e),t)},Zl=t=>{const{startAngle:e,endAngle:n,innerRadius:r,outerRadius:o}=Bp(t);return[["transpose"],["translate",.5,.5],["reflect"],["translate",-.5,-.5],...Qi({startAngle:e,endAngle:n,innerRadius:r,outerRadius:o})]};Zl.props={};function Ds(t,e,n){return Math.max(e,Math.min(t,n))}function Is(t,e=10){return typeof t!="number"||Math.abs(t)<1e-15?t:parseFloat(t.toFixed(e))}const A_=[["legendCategory",[[["color","discrete"],["opacity","discrete"],["shape","discrete"],["size","constant"]],[["color","discrete"],["opacity","constant"],["shape","discrete"],["size","constant"]],[["color","discrete"],["opacity","discrete"],["shape","constant"],["size","constant"]],[["color","discrete"],["opacity","constant"],["shape","constant"],["size","constant"]],[["color","constant"],["opacity","discrete"],["shape","discrete"],["size","constant"]],[["color","constant"],["opacity","constant"],["shape","discrete"],["size","constant"]],[["color","constant"],["opacity","discrete"],["shape","constant"],["size","constant"]],[["color","discrete"],["shape","discrete"],["size","constant"]],[["color","discrete"],["opacity","discrete"],["shape","discrete"]],[["color","discrete"],["opacity","discrete"],["size","constant"]],[["color","discrete"],["opacity","constant"],["shape","discrete"]],[["color","discrete"],["opacity","constant"],["size","constant"]],[["color","discrete"],["shape","constant"],["size","constant"]],[["color","discrete"],["opacity","discrete"],["shape","constant"]],[["color","discrete"],["opacity","constant"],["shape","constant"]],[["color","constant"],["shape","discrete"],["size","constant"]],[["color","constant"],["opacity","discrete"],["shape","discrete"]],[["color","constant"],["opacity","discrete"],["size","constant"]],[["color","constant"],["opacity","constant"],["shape","discrete"]],[["color","constant"],["opacity","discrete"],["shape","constant"]],[["color","discrete"],["shape","discrete"]],[["color","discrete"],["size","constant"]],[["color","discrete"],["opacity","discrete"]],[["color","discrete"],["opacity","constant"]],[["color","discrete"],["shape","constant"]],[["color","constant"],["shape","discrete"]],[["color","constant"],["size","constant"]],[["color","constant"],["opacity","discrete"]],[["color","discrete"]]]],["legendContinuousSize",[[["color","continuous"],["opacity","continuous"],["size","continuous"]],[["color","constant"],["opacity","continuous"],["size","continuous"]],[["color","continuous"],["size","continuous"]],[["color","constant"],["size","continuous"]],[["size","continuous"],["opacity","continuous"]],[["size","continuous"]]]],["legendContinuousBlockSize",[[["color","distribution"],["opacity","distribution"],["size","distribution"]],[["color","distribution"],["size","distribution"]]]],["legendContinuousBlock",[[["color","distribution"],["opacity","continuous"]],[["color","distribution"]]]],["legendContinuous",[[["color","continuous"],["opacity","continuous"]],[["color","continuous"]],[["opacity","continuous"]]]]];var $p=Q(16290);function Me(t){const{transformations:e}=t.getOptions();return e.map(([r])=>r).filter(r=>r==="transpose").length%2!==0}function be(t){const{transformations:e}=t.getOptions();return e.some(([n])=>n==="polar")}function Ji(t){const{transformations:e}=t.getOptions();return e.some(([n])=>n==="reflect")&&e.some(([n])=>n.startsWith("transpose"))}function Yp(t){const{transformations:e}=t.getOptions();return e.some(([n])=>n==="helix")}function ta(t){const{transformations:e}=t.getOptions();return e.some(([n])=>n==="parallel")}function Wp(t){const{transformations:e}=t.getOptions();return e.some(([n])=>n==="fisheye")}function M_(t){return ta(t)&&be(t)}function ei(t){return Yp(t)||be(t)}function Zp(t){return be(t)&&Me(t)}function KR(t){return be(t)||ta(t)||Ji(t)||Zp(t)}function k_(t){if(ei(t)){const[e,n]=t.getSize(),r=t.getOptions().transformations.find(o=>o[0]==="polar");if(r)return Math.max(e,n)/2*r[4]}return 0}function Fs(t){const{transformations:e}=t.getOptions(),[,,,n,r]=e.find(o=>o[0]==="polar");return[+n,+r]}function Hl(t,e=!0){const{transformations:n}=t.getOptions(),[,r,o]=n.find(i=>i[0]==="polar");return e?[+r*180/Math.PI,+o*180/Math.PI]:[r,o]}function P_(t,e){const{transformations:n}=t.getOptions(),[,...r]=n.find(o=>o[0]===e);return r}var Xl=Q(6234),ir=Q(12454),Gl=Q(73959);function Mr(t,e){let n,r;if(e===void 0)for(const o of t)o!=null&&(n===void 0?o>=o&&(n=r=o):(n>o&&(n=o),r<o&&(r=o)));else{let o=-1;for(let i of t)(i=e(i,++o,t))!=null&&(n===void 0?i>=i&&(n=r=i):(n>i&&(n=i),r<i&&(r=i)))}return[n,r]}var Mt=Q(15767),Cn=Q(69210);function Hp(t){for(var e=1/0,n=1/0,r=-1/0,o=-1/0,i=0;i<t.length;i++){var a=t[i],s=a.x,l=a.y,c=a.width,u=a.height,f=(0,Mt.CR)([s+c,l+u],2),d=f[0],p=f[1];s<e&&(e=s),l<n&&(n=l),d>r&&(r=d),p>o&&(o=p)}return new Cn.b(e,n,r-e,o-n)}var T_=function(t,e,n){var r=t.width,o=t.height,i=n.flexDirection,a=i===void 0?"row":i,s=n.flexWrap,l=s===void 0?"nowrap":s,c=n.justifyContent,u=c===void 0?"flex-start":c,f=n.alignContent,d=f===void 0?"flex-start":f,p=n.alignItems,h=p===void 0?"flex-start":p,y=a==="row",g=a==="row"||a==="column",m=y?g?[1,0]:[-1,0]:g?[0,1]:[0,-1],b=(0,Mt.CR)([0,0],2),v=b[0],O=b[1],x=e.map(function(A){var T,P=A.width,k=A.height,z=(0,Mt.CR)([v,O],2),C=z[0],I=z[1];return T=(0,Mt.CR)([v+P*m[0],O+k*m[1]],2),v=T[0],O=T[1],new Cn.b(C,I,P,k)}),w=Hp(x),j={"flex-start":0,"flex-end":y?r-w.width:o-w.height,center:y?(r-w.width)/2:(o-w.height)/2},E=x.map(function(A){var T=A.x,P=A.y,k=Cn.b.fromRect(A);return k.x=y?T+j[u]:T,k.y=y?P:P+j[u],k}),M=Hp(E),R=function(A){var T=(0,Mt.CR)(y?["height",o]:["width",r],2),P=T[0],k=T[1];switch(h){case"flex-start":return 0;case"flex-end":return k-A[P];case"center":return k/2-A[P]/2;default:return 0}},D=E.map(function(A){var T=A.x,P=A.y,k=Cn.b.fromRect(A);return k.x=y?T:T+R(k),k.y=y?P+R(k):P,k}),F=D.map(function(A){var T,P,k=Cn.b.fromRect(A);return k.x+=(T=t.x)!==null&&T!==void 0?T:0,k.y+=(P=t.y)!==null&&P!==void 0?P:0,k});return F},C_=function(t,e,n){return[]},L_=function(t,e,n){if(e.length===0)return[];var r={flex:T_,grid:C_},o=n.display in r?r[n.display]:null;return(o==null?void 0:o.call(null,t,e,n))||[]},ea=Q(27475),R_=function(t){(0,Mt.ZT)(e,t);function e(n){var r=t.call(this,n)||this;r.layoutEvents=[ht.Dk.BOUNDS_CHANGED,ht.Dk.INSERTED,ht.Dk.REMOVED],r.$margin=(0,ea.j)(0),r.$padding=(0,ea.j)(0);var o=n.style||{},i=o.margin,a=i===void 0?0:i,s=o.padding,l=s===void 0?0:s;return r.margin=a,r.padding=l,r.isMutationObserved=!0,r.bindEvents(),r}return Object.defineProperty(e.prototype,"margin",{get:function(){return this.$margin},set:function(n){this.$margin=(0,ea.j)(n)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"padding",{get:function(){return this.$padding},set:function(n){this.$padding=(0,ea.j)(n)},enumerable:!1,configurable:!0}),e.prototype.getBBox=function(){var n=this.attributes,r=n.x,o=r===void 0?0:r,i=n.y,a=i===void 0?0:i,s=n.width,l=n.height,c=(0,Mt.CR)(this.$margin,4),u=c[0],f=c[1],d=c[2],p=c[3];return new Cn.b(o-p,a-u,s+p+f,l+u+d)},e.prototype.appendChild=function(n,r){return n.isMutationObserved=!0,t.prototype.appendChild.call(this,n,r),n},e.prototype.getAvailableSpace=function(){var n=this.attributes,r=n.width,o=n.height,i=(0,Mt.CR)(this.$padding,4),a=i[0],s=i[1],l=i[2],c=i[3],u=(0,Mt.CR)(this.$margin,4),f=u[0],d=u[3];return new Cn.b(c+d,a+f,r-c-s,o-a-l)},e.prototype.layout=function(){if(!(!this.attributes.display||!this.isConnected)&&!this.children.some(function(a){return!a.isConnected}))try{var n=this.attributes,r=n.x,o=n.y;this.style.transform="translate(".concat(r,", ").concat(o,")");var i=L_(this.getAvailableSpace(),this.children.map(function(a){return a.getBBox()}),this.attributes);this.children.forEach(function(a,s){var l=i[s],c=l.x,u=l.y;a.style.transform="translate(".concat(c,", ").concat(u,")")})}catch(a){}},e.prototype.bindEvents=function(){var n=this;this.layoutEvents.forEach(function(r){n.addEventListener(r,function(o){o.target&&(o.target.isMutationObserved=!0,n.layout())})})},e.prototype.attributeChangedCallback=function(n,r,o){n==="margin"?this.margin=o:n==="padding"&&(this.padding=o),this.layout()},e}(ht.ZA),D_=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,r=Object.getOwnPropertySymbols(t);o<r.length;o++)e.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(t,r[o])&&(n[r[o]]=t[r[o]]);return n};function I_(t){return class extends ht.b_{constructor(e){super(e),this.descriptor=t}connectedCallback(){var e,n;(n=(e=this.descriptor).render)===null||n===void 0||n.call(e,this.attributes,this)}update(e={}){var n,r;this.attr((0,et.Z)({},this.attributes,e)),(r=(n=this.descriptor).render)===null||r===void 0||r.call(n,this.attributes,this)}}}function Xp(t,e,n){return t.querySelector(e)?Tt(t).select(e):Tt(t).append(n)}function Ns(t){return Array.isArray(t)?t.join(", "):`${t||""}`}function Gp(t,e){const n={display:"flex",flexDirection:"row",justifyContent:"flex-start",alignItems:"center"};let{flexDirection:r,justifyContent:o,alignItems:i}=n;const a={top:["row","flex-start","center"],bottom:["row","flex-start","center"],left:["column","flex-start","center"],right:["column","flex-start","center"],center:["column","center","center"]};return t in a&&([r,o,i]=a[t]),Object.assign({display:"flex",flexDirection:r,justifyContent:o,alignItems:i},e)}class Up extends R_{get child(){var e;return(e=this.children)===null||e===void 0?void 0:e[0]}update(e){var n;this.attr(e);const{subOptions:r}=e;(n=this.child)===null||n===void 0||n.update(r)}}class F_ extends Up{update(e){var n;const{subOptions:r}=e;this.attr(e),(n=this.child)===null||n===void 0||n.update(r)}}function gr(t,e){var n;return(n=t.filter(r=>r.getOptions().name===e))===null||n===void 0?void 0:n[0]}function N_(t){return t==="horizontal"||t===0}function z_(t){return t==="vertical"||t===-Math.PI/2}function Vp(t,e,n){const{bbox:r}=t,{position:o="top",size:i,length:a}=e,s=["top","bottom","center"].includes(o),[l,c]=s?[r.height,r.width]:[r.width,r.height],{defaultSize:u,defaultLength:f}=n.props,d=i||u||l,p=a||f||c,h=s?"horizontal":"vertical",[y,g]=s?[p,d]:[d,p];return{orientation:h,width:y,height:g,size:d,length:p}}function B_(t){return t.find(e=>e.getOptions().domain.length>0).getOptions().domain}function zs(t){const e=["arrow","crosshairs","grid","handle","handleLabel","indicator","label","line","tick","tip","title","trunc"],{style:n}=t,r=D_(t,["style"]),o={};return Object.entries(r).forEach(([i,a])=>{e.includes(i)?o[`show${(0,Vr.Z)(i)}`]=a:o[i]=a}),Object.assign(Object.assign({},o),n)}var qp=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,r=Object.getOwnPropertySymbols(t);o<r.length;o++)e.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(t,r[o])&&(n[r[o]]=t[r[o]]);return n};function Kp(t,e){const{eulerAngles:n,origin:r}=e;r&&t.setOrigin(r),n&&t.rotate(n[0],n[1],n[2])}function Qp(t){const{innerWidth:e,innerHeight:n,depth:r}=t.getOptions();return[e,n,r]}function $_(t,e){const{width:n,height:r}=e.getOptions();return o=>{if(!Wp(e))return o;const i=t==="bottom"?[o,1]:[0,o],a=e.map(i);if(t==="bottom"){const s=a[0];return new ir.b({domain:[0,n],range:[0,1]}).map(s)}else if(t==="left"){const s=a[1];return new ir.b({domain:[0,r],range:[0,1]}).map(s)}return o}}function Y_(t,e,n){if(t.getTicks)return t.getTicks();if(!n)return e;const[r,o]=Mr(e,a=>+a),{tickCount:i}=t.getOptions();return n(r,o,i)}function W_(t,e){if(be(e))return p=>p;const n=e.getOptions(),{innerWidth:r,innerHeight:o,insetTop:i,insetBottom:a,insetLeft:s,insetRight:l}=n,[c,u,f]=t==="left"||t==="right"?[i,a,o]:[s,l,r],d=new ir.b({domain:[0,1],range:[c/f,1-u/f]});return p=>d.map(p)}function Jp(t,e,n,r,o,i,a,s){var l;(n!==void 0||i!==void 0)&&t.update(Object.assign(Object.assign({},n&&{tickCount:n}),i&&{tickMethod:i}));const c=Y_(t,e,i),u=o?c.filter(o):c,f=m=>m instanceof Date?String(m):typeof m=="object"&&m?m:String(m),d=r||((l=t.getFormatter)===null||l===void 0?void 0:l.call(t))||f,p=W_(a,s),h=$_(a,s),y=m=>["top","bottom","center","outer"].includes(m),g=m=>["left","right"].includes(m);return be(s)||Me(s)?u.map((m,b,v)=>{var O,x;const w=((O=t.getBandWidth)===null||O===void 0?void 0:O.call(t,m))/2||0,j=p(t.map(m)+w);return{value:Ji(s)&&a==="center"||Me(s)&&((x=t.getTicks)===null||x===void 0?void 0:x.call(t))&&y(a)||Me(s)&&g(a)?1-j:j,label:f(d(Is(m),b,v)),id:String(b)}}):u.map((m,b,v)=>{var O;const x=((O=t.getBandWidth)===null||O===void 0?void 0:O.call(t,m))/2||0,w=h(p(t.map(m)+x));return{value:g(a)?1-w:w,label:f(d(Is(m),b,v)),id:String(b)}})}function Z_(t,e,n="xy"){const[r,o,i]=Qp(e);return n==="xy"?t.includes("bottom")||t.includes("top")?o:r:n==="xz"?t.includes("bottom")||t.includes("top")?i:r:t.includes("bottom")||t.includes("top")?o:i}function H_(t=[],e){if(t.length>0)return t;const{labelAutoRotate:n,labelAutoHide:r,labelAutoEllipsis:o,labelAutoWrap:i}=e,a=[],s=(l,c)=>{c&&a.push(Object.assign(Object.assign({},l),c))};return s({type:"rotate",optionalAngles:[0,15,30,45,60,90]},n),s({type:"ellipsis",minLength:20},o),s({type:"hide"},r),s({type:"wrap",wordWrapWidth:100,maxLines:3,recoveryWhenFail:!0},i),a}function X_(t,e,n,r,o){const{x:i,y:a,width:s,height:l}=e,c=[i+s/2,a+l/2],u=Math.min(s,l)/2,[f,d]=Hl(o),[p,h]=Qp(o),y=Math.min(p,h)/2,g={center:c,radius:u,startAngle:f,endAngle:d,gridLength:(r-n)*y};if(t==="inner"){const{insetLeft:m,insetTop:b}=o.getOptions();return Object.assign(Object.assign({},g),{center:[c[0]-m,c[1]-b],labelAlign:"perpendicular",labelDirection:"positive",tickDirection:"positive",gridDirection:"negative"})}return Object.assign(Object.assign({},g),{labelAlign:"parallel",labelDirection:"negative",tickDirection:"negative",gridDirection:"positive"})}function G_(t,e,n){return Zp(e)||ta(e)?!1:t===void 0?!!n.getTicks:t}function U_(t){const{depth:e}=t.getOptions();return e?{tickIsBillboard:!0,lineIsBillboard:!0,labelIsBillboard:!0,titleIsBillboard:!0,gridIsBillboard:!0}:{}}function V_(t,e,n,r,o){const{x:i,y:a,width:s,height:l}=n;if(t==="bottom")return{startPos:[i,a],endPos:[i+s,a]};if(t==="left")return{startPos:[i+s,a+l],endPos:[i+s,a]};if(t==="right")return{startPos:[i,a+l],endPos:[i,a]};if(t==="top")return{startPos:[i,a+l],endPos:[i+s,a+l]};if(t==="center"){if(e==="vertical")return{startPos:[i,a],endPos:[i,a+l]};if(e==="horizontal")return{startPos:[i,a],endPos:[i+s,a]};if(typeof e=="number"){const[c,u]=r.getCenter(),[f,d]=Fs(r),[p,h]=Hl(r),y=Math.min(s,l)/2,{insetLeft:g,insetTop:m}=r.getOptions(),b=f*y,v=d*y,[O,x]=[c+i-g,u+a-m],[w,j]=[Math.cos(e),Math.sin(e)],E=[O+v*w,x+v*j],M=[O+b*w,x+b*j],R=()=>{const{domain:F}=o.getOptions();return F.length},D=be(r)&&o?R():3;return{startPos:E,endPos:M,gridClosed:Math.abs(h-p-360)<1e-6,gridCenter:[O,x],gridControlAngles:new Array(D).fill(0).map((F,A,T)=>(h-p)/D*A)}}}return{}}const q_=t=>{const{order:e,size:n,position:r,orientation:o,labelFormatter:i,tickFilter:a,tickCount:s,tickMethod:l,important:c={},style:u={},indexBBox:f,title:d,grid:p=!1}=t,h=qp(t,["order","size","position","orientation","labelFormatter","tickFilter","tickCount","tickMethod","important","style","indexBBox","title","grid"]);return({scales:[y],value:g,coordinate:m,theme:b})=>{const{bbox:v}=g,{domain:O}=y.getOptions(),x=Jp(y,O,s,i,a,l,r,m),w=f?x.map((A,T)=>{const P=f.get(T);return!P||P[0]!==A.label?A:Object.assign(Object.assign({},A),{bbox:P[1]})}):x,[j,E]=Fs(m),M=X_(r,v,j,E,m),{axis:R,axisArc:D={}}=b,F=zs((0,et.Z)({},R,D,M,Object.assign(Object.assign({type:"arc",data:w,titleText:Ns(d),grid:p},h),c)));return new Xl.R({style:(0,Gl.Z)(F,["transform"])})}};function K_(t,e,n,r,o,i){const a=n.axis,s=["top","right","bottom","left"].includes(o)?n[`axis${gt(o)}`]:n.axisLinear,l=t.getOptions().name,c=n[`axis${(0,Vr.Z)(l)}`]||{};return Object.assign({},a,s,c)}function Q_(t,e,n,r,o,i){const a=K_(t,e,n,r,o,i);return o==="center"?Object.assign(Object.assign(Object.assign(Object.assign({},a),{labelDirection:r==="right"?"negative":"positive"}),r==="center"?{labelTransform:"translate(50%,0)"}:null),{tickDirection:r==="right"?"negative":"positive",labelSpacing:r==="center"?0:4,titleSpacing:z_(i)?10:0,tick:r==="center"?!1:void 0}):a}const J_=t=>{const{direction:e="left",important:n={},labelFormatter:r,order:o,orientation:i,actualPosition:a,position:s,size:l,style:c={},title:u,tickCount:f,tickFilter:d,tickMethod:p,transform:h,indexBBox:y}=t,g=qp(t,["direction","important","labelFormatter","order","orientation","actualPosition","position","size","style","title","tickCount","tickFilter","tickMethod","transform","indexBBox"]);return({scales:m,value:b,coordinate:v,theme:O})=>{const{bbox:x}=b,[w]=m,{domain:j,xScale:E}=w.getOptions(),M=Q_(w,v,O,e,s,i),R=Object.assign(Object.assign(Object.assign({},M),c),g),D=Z_(a||s,v,t.plane),F=V_(s,i,x,v,E),A=U_(v),T=Jp(w,j,f,r,d,p,s,v),P=y?T.map((C,I)=>{const Y=y.get(I);return!Y||Y[0]!==C.label?C:Object.assign(Object.assign({},C),{bbox:Y[1]})}):T,k=Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},R),{type:"linear",data:P,crossSize:l,titleText:Ns(u),labelOverlap:H_(h,R),grid:G_(R.grid,v,w),gridLength:D,line:!0,indexBBox:y}),R.line?null:{lineOpacity:0}),F),A),n);return k.labelOverlap.find(C=>C.type==="hide")&&(k.crossSize=!1),new Xl.R({className:"axis",style:zs(k)})}},th=t=>e=>{const{labelFormatter:n,labelFilter:r=()=>!0}=e;return o=>{var i;const{scales:[a]}=o,s=((i=a.getTicks)===null||i===void 0?void 0:i.call(a))||a.getOptions().domain,l=typeof n=="string"?qr(n):n,c=(f,d,p)=>r(s[d],d,s),u=Object.assign(Object.assign({},e),{labelFormatter:l,labelFilter:c,scale:a});return t(u)(o)}},Kr=th(J_),eh=th(q_);Kr.props={defaultPosition:"center",defaultSize:45,defaultOrder:0,defaultCrossPadding:[12,12],defaultPadding:[12,12]},eh.props={defaultPosition:"outer",defaultOrientation:"vertical",defaultSize:45,defaultOrder:0,defaultCrossPadding:[12,12],defaultPadding:[12,12]};var tw=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,r=Object.getOwnPropertySymbols(t);o<r.length;o++)e.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(t,r[o])&&(n[r[o]]=t[r[o]]);return n};function ew(t){const e=t%(Math.PI*2);return e===Math.PI/2?{titleTransform:"translate(0, 50%)"}:e>-Math.PI/2&&e<Math.PI/2?{titleTransform:"translate(50%, 0)"}:e>Math.PI/2&&e<Math.PI*3/2?{titleTransform:"translate(-50%, 0)"}:{}}function nw(t,e,n,r){const{radar:o}=t,[i]=r,a=i.getOptions().name,[s,l]=Hl(n),{axisRadar:c={}}=e;return Object.assign(Object.assign({},c),{grid:a==="position",gridConnect:"line",gridControlAngles:new Array(o.count).fill(0).map((u,f)=>(l-s)/o.count*f)})}const nh=t=>{const{important:e={}}=t,n=tw(t,["important"]);return r=>{const{theme:o,coordinate:i,scales:a}=r;return Kr(Object.assign(Object.assign(Object.assign({},n),ew(t.orientation)),{important:Object.assign(Object.assign({},nw(t,o,i,a)),e)}))(r)}};nh.props=Object.assign(Object.assign({},Kr.props),{defaultPosition:"center"});var Bs=Q(63777),Ul=Q(49025),Vl=Q(71350),na=Q(50885),rw=Q(22397),Ln=Q(20949),rh=Q(97289),oh=Q(64820),ow=Q(27604),ih=Q(25889),iw=Q(60817),aw=Q(91715),sw=Q(72807),cw=Q(2412),Rn=Q(50664),lw=Q(43489),$s=Q(90079),uw=Q(58420),kr=Q(35433);function fw(t,e){for(var n=1;n<t.length;n+=1){var r=t[n-1],o=t[n];if(e>=r&&e<=o)return[r,o]}return[e,e]}function dw(t,e,n){var r=Array.from(e),o=t.length;return new Array(o).fill(0).reduce(function(i,a,s){var l=r[s%r.length];return i+=" ".concat(t[s],":").concat(l).concat(s<o-1?" ".concat(t[s+1],":").concat(l):"")},"l(".concat(n==="horizontal"?"0":"270",")"))}function ah(t,e){var n=(0,Mt.CR)(fw(t,e),2),r=n[0],o=n[1];return{tick:e>(r+o)/2?o:r,range:[r,o]}}var ra=(0,uw.A)({trackGroup:"background-group",track:"background",selectionGroup:"ribbon-group",selection:"ribbon",clipPath:"clip-path"},"ribbon");function sh(t){var e=t.orientation,n=t.size,r=t.length;return(0,kr._h)(e,[r,n],[n,r])}function ch(t){var e=t.type,n=(0,Mt.CR)(sh(t),2),r=n[0],o=n[1];return e==="size"?[["M",0,o],["L",0+r,0],["L",0+r,o],["Z"]]:[["M",0,o],["L",0,0],["L",0+r,0],["L",0+r,o],["Z"]]}function pw(t){return ch(t)}function hw(t){var e=t.orientation,n=t.color,r=t.block,o=t.partition,i;if((0,$s.Z)(n)){var a=20;i=new Array(a).fill(0).map(function(c,u,f){return n(u/(f.length-1))})}else i=n;var s=i.length,l=i.map(function(c){return(0,ht.lu)(c).toString()});return s?s===1?l[0]:r?dw(o,l,e):l.reduce(function(c,u,f){return c+=" ".concat(f/(s-1),":").concat(u)},"l(".concat((0,kr._h)(e,"0","270"),")")):""}function yw(t){var e=t.orientation,n=t.range;if(!n)return[];var r=(0,Mt.CR)(sh(t),2),o=r[0],i=r[1],a=(0,Mt.CR)(n,2),s=a[0],l=a[1],c=(0,kr._h)(e,s*o,0),u=(0,kr._h)(e,0,s*i),f=(0,kr._h)(e,l*o,o),d=(0,kr._h)(e,i,l*i);return[["M",c,u],["L",c,d],["L",f,d],["L",f,u],["Z"]]}function gw(t,e){var n=(0,Ln.zs)(e,"track");t.maybeAppendByClassName(ra.track,"path").styles((0,Mt.pi)({d:ch(e)},n))}function mw(t,e){var n=(0,Ln.zs)(e,"selection"),r=hw(e),o=t.maybeAppendByClassName(ra.selection,"path").styles((0,Mt.pi)({d:pw(e),fill:r},n)),i=o.maybeAppendByClassName(ra.clipPath,"path").styles({d:yw(e)}).node();o.style("clipPath",i)}var bw=function(t){(0,Mt.ZT)(e,t);function e(n){return t.call(this,n,{type:"color",orientation:"horizontal",size:30,range:[0,1],length:200,block:!1,partition:[],color:["#fff","#000"],trackFill:"#e5e5e5"})||this}return e.prototype.render=function(n,r){var o=(0,na.Ys)(r).maybeAppendByClassName(ra.trackGroup,"g");gw(o,n);var i=(0,na.Ys)(r).maybeAppendByClassName(ra.selectionGroup,"g");mw(i,n)},e}(Vl.w);function vw(t){return{min:Math.min.apply(Math,(0,Mt.ev)([],(0,Mt.CR)(t.map(function(e){return e.value})),!1)),max:Math.max.apply(Math,(0,Mt.ev)([],(0,Mt.CR)(t.map(function(e){return e.value})),!1))}}var Ow=function(t){(0,Mt.ZT)(e,t);function e(n){var r=t.call(this,n,Rn.B0)||this;return r.eventToOffsetScale=new ir.b({}),r.innerRibbonScale=new ir.b({}),r.cacheLabelBBox=null,r.cacheHandleBBox=null,r.onHovering=function(o){var i=r.attributes,a=i.data,s=i.block;o.stopPropagation();var l=r.getValueByCanvasPoint(o);if(s){var c=ah(a.map(function(d){var p=d.value;return p}),l).range,u=r.getRealSelection(c);r.showIndicator((c[0]+c[1])/2,"".concat(u[0],"-").concat(u[1])),r.dispatchIndicated(l,c)}else{var f=r.getTickValue(l);r.showIndicator(f,"".concat(r.getRealValue(f))),r.dispatchIndicated(f)}},r.onDragStart=function(o){return function(i){i.stopPropagation(),r.attributes.slidable&&(r.target=o,r.prevValue=r.getTickValue(r.getValueByCanvasPoint(i)),document.addEventListener("mousemove",r.onDragging),document.addEventListener("touchmove",r.onDragging),document.addEventListener("mouseleave",r.onDragEnd),document.addEventListener("mouseup",r.onDragEnd),document.addEventListener("mouseup",r.onDragEnd),document.addEventListener("touchend",r.onDragEnd))}},r.onDragging=function(o){var i=r.target;r.updateMouse();var a=(0,Mt.CR)(r.selection,2),s=a[0],l=a[1],c=r.getTickValue(r.getValueByCanvasPoint(o)),u=c-r.prevValue;i==="start"?s!==c&&r.updateSelection(c,l):i==="end"?l!==c&&r.updateSelection(s,c):i==="ribbon"&&u!==0&&(r.prevValue=c,r.updateSelection(u,u,!0))},r.onDragEnd=function(){r.style.cursor="pointer",document.removeEventListener("mousemove",r.onDragging),document.removeEventListener("touchmove",r.onDragging),document.removeEventListener("mouseup",r.onDragEnd),document.removeEventListener("touchend",r.onDragEnd)},r}return Object.defineProperty(e.prototype,"handleOffsetRatio",{get:function(){return this.ifHorizontal(.5,.5)},enumerable:!1,configurable:!0}),e.prototype.getBBox=function(){var n=this.attributes,r=n.width,o=n.height;return new Cn.b(0,0,r,o)},e.prototype.render=function(n,r){var o=this,i=n.showLabel;this.renderTitle((0,na.Ys)(r));var a=this.availableSpace,s=a.x,l=a.y,c=(0,na.Ys)(r).maybeAppendByClassName(Rn.Ec.contentGroup,"g").styles({transform:"translate(".concat(s,", ").concat(l,")")}),u=c.maybeAppendByClassName(Rn.Ec.labelGroup,"g").styles({zIndex:1});(0,rw.z)(!!i,u,function(d){o.renderLabel(d)});var f=c.maybeAppendByClassName(Rn.Ec.ribbonGroup,"g").styles({zIndex:0});this.handlesGroup=c.maybeAppendByClassName(Rn.Ec.handlesGroup,"g").styles({zIndex:2}),this.renderHandles(),this.renderRibbon(f),this.renderIndicator(c),this.adjustLabel(),this.adjustHandles()},Object.defineProperty(e.prototype,"range",{get:function(){var n=this.attributes,r=n.data,o=n.domain;return o?{min:o[0],max:o[1]}:vw(r)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"ribbonScale",{get:function(){var n=this.range,r=n.min,o=n.max;return this.innerRibbonScale.update({domain:[r,o],range:[0,1]}),this.innerRibbonScale},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"ribbonRange",{get:function(){var n=(0,Mt.CR)(this.selection,2),r=n[0],o=n[1],i=this.ribbonScale;return[i.map(r),i.map(o)]},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"selection",{get:function(){var n=this.range,r=n.min,o=n.max,i=this.attributes.defaultValue,a=i===void 0?[r,o]:i,s=(0,Mt.CR)(a,2),l=s[0],c=s[1];return[l,c]},enumerable:!1,configurable:!0}),e.prototype.ifHorizontal=function(n,r){return(0,kr._h)(this.attributes.orientation,typeof n=="function"?n():n,typeof r=="function"?r():r)},e.prototype.renderTitle=function(n){var r=this.attributes,o=r.showTitle,i=r.titleText,a=r.width,s=r.height,l=(0,Ln.zs)(this.attributes,"title"),c=(0,Mt.pi)((0,Mt.pi)({},l),{width:a,height:s,text:i}),u=this;n.selectAll(Rn.Ec.title.class).data(o?[i]:[]).join(function(f){return f.append(function(){return new cw.Dx({style:c})}).attr("className",Rn.Ec.title.name).each(function(){u.title=this})},function(f){return f.update(c)},function(f){return f.each(function(){u.title=void 0}).remove()})},Object.defineProperty(e.prototype,"availableSpace",{get:function(){if(this.title)return this.title.getAvailableSpace();var n=this.attributes,r=n.width,o=n.height;return new Cn.b(0,0,r,o)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"labelFixedSpacing",{get:function(){var n=this.attributes.showTick;return n?5:0},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"labelPosition",{get:function(){var n=this.attributes,r=n.orientation,o=n.labelDirection,i={vertical:{positive:"right",negative:"left"},horizontal:{positive:"bottom",negative:"top"}};return i[r][o]},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"labelBBox",{get:function(){var n,r=this.attributes.showLabel;if(!r)return new Cn.b(0,0,0,0);if(this.cacheLabelBBox)return this.cacheLabelBBox;var o=((n=this.label.querySelector(iw.Ec.labelGroup.class))===null||n===void 0?void 0:n.children.slice(-1)[0]).getBBox(),i=o.width,a=o.height;return this.cacheLabelBBox=new Cn.b(0,0,i,a),this.cacheLabelBBox},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"labelShape",{get:function(){var n=this.attributes,r=n.showLabel,o=n.labelSpacing,i=o===void 0?0:o;if(!r)return{width:0,height:0,size:0,length:0};var a=this.labelBBox,s=a.width,l=a.height,c=this.ifHorizontal(l,s)+i+this.labelFixedSpacing,u=this.ifHorizontal(s,l);return{width:s,height:l,size:c,length:u}},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"ribbonBBox",{get:function(){var n=this.attributes,r=n.showHandle,o=n.ribbonSize,i=this.availableSpace,a=i.width,s=i.height,l=this.labelShape,c=l.size,u=l.length,f=(0,Mt.CR)(this.ifHorizontal([s,a],[a,s]),2),d=f[0],p=f[1],h=r?this.handleShape:{size:0,length:0},y=h.size,g=h.length,m=this.handleOffsetRatio,b=0,v=this.labelPosition;o?b=o:["bottom","right"].includes(v)?b=Math.min(d-c,(d-y)/m):d*(1-m)>y?b=Math.max(d-c,0):b=Math.max((d-c-y)/m,0);var O=Math.max(g,u),x=p-O,w=(0,Mt.CR)(this.ifHorizontal([x,b],[b,x]),2),j=w[0],E=w[1],M=["top","left"].includes(v)?c:0,R=(0,Mt.CR)(this.ifHorizontal([O/2,M],[M,O/2]),2),D=R[0],F=R[1];return new Cn.b(D,F,j,E)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"ribbonShape",{get:function(){var n=this.ribbonBBox,r=n.width,o=n.height;return this.ifHorizontal({size:o,length:r},{size:r,length:o})},enumerable:!1,configurable:!0}),e.prototype.renderRibbon=function(n){var r=this.attributes,o=r.data,i=r.type,a=r.orientation,s=r.color,l=r.block,c=(0,Ln.zs)(this.attributes,"ribbon"),u=this.range,f=u.min,d=u.max,p=this.ribbonBBox,h=p.x,y=p.y,g=this.ribbonShape,m=g.length,b=g.size,v=(0,rh.n)({transform:"translate(".concat(h,", ").concat(y,")"),length:m,size:b,type:i,orientation:a,color:s,block:l,partition:o.map(function(O){return(O.value-f)/(d-f)}),range:this.ribbonRange},c);this.ribbon=n.maybeAppendByClassName(Rn.Ec.ribbon,function(){return new bw({style:v})}).update(v)},e.prototype.getHandleClassName=function(n){return"".concat(Rn.Ec.prefix("".concat(n,"-handle")))},e.prototype.renderHandles=function(){var n=this.attributes,r=n.showHandle,o=n.orientation,i=(0,Ln.zs)(this.attributes,"handle"),a=(0,Mt.CR)(this.selection,2),s=a[0],l=a[1],c=(0,Mt.pi)((0,Mt.pi)({},i),{orientation:o}),u=i.shape,f=u===void 0?"slider":u,d=f==="basic"?lw.H:sw.H,p=this;this.handlesGroup.selectAll(Rn.Ec.handle.class).data(r?[{value:s,type:"start"},{value:l,type:"end"}]:[],function(h){return h.type}).join(function(h){return h.append(function(){return new d({style:c})}).attr("className",function(y){var g=y.type;return"".concat(Rn.Ec.handle," ").concat(p.getHandleClassName(g))}).each(function(y){var g=y.type,m=y.value;this.update({labelText:m});var b="".concat(g,"Handle");p[b]=this,this.addEventListener("pointerdown",p.onDragStart(g))})},function(h){return h.update(c).each(function(y){var g=y.value;this.update({labelText:g})})},function(h){return h.each(function(y){var g=y.type,m="".concat(g,"Handle");p[m]=void 0}).remove()})},e.prototype.adjustHandles=function(){var n=(0,Mt.CR)(this.selection,2),r=n[0],o=n[1];this.setHandlePosition("start",r),this.setHandlePosition("end",o)},Object.defineProperty(e.prototype,"handleBBox",{get:function(){if(this.cacheHandleBBox)return this.cacheHandleBBox;if(!this.attributes.showHandle)return new Cn.b(0,0,0,0);var n=this.startHandle.getBBox(),r=n.width,o=n.height,i=this.endHandle.getBBox(),a=i.width,s=i.height,l=(0,Mt.CR)([Math.max(r,a),Math.max(o,s)],2),c=l[0],u=l[1];return this.cacheHandleBBox=new Cn.b(0,0,c,u),this.cacheHandleBBox},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"handleShape",{get:function(){var n=this.handleBBox,r=n.width,o=n.height,i=(0,Mt.CR)(this.ifHorizontal([o,r],[r,o]),2),a=i[0],s=i[1];return{width:r,height:o,size:a,length:s}},enumerable:!1,configurable:!0}),e.prototype.setHandlePosition=function(n,r){var o=this.attributes.handleFormatter,i=this.ribbonBBox,a=i.x,s=i.y,l=this.ribbonShape.size,c=this.getOffset(r),u=(0,Mt.CR)(this.ifHorizontal([a+c,s+l*this.handleOffsetRatio],[a+l*this.handleOffsetRatio,s+c]),2),f=u[0],d=u[1],p=this.handlesGroup.select(".".concat(this.getHandleClassName(n))).node();p==null||p.update({transform:"translate(".concat(f,", ").concat(d,")"),formatter:o})},e.prototype.renderIndicator=function(n){var r=(0,Ln.zs)(this.attributes,"indicator");this.indicator=n.maybeAppendByClassName(Rn.Ec.indicator,function(){return new aw.z({})}).update(r)},Object.defineProperty(e.prototype,"labelData",{get:function(){var n=this,r=this.attributes.data;return r.reduce(function(o,i,a,s){var l,c,u=(l=i==null?void 0:i.id)!==null&&l!==void 0?l:a.toString();if(o.push((0,Mt.pi)((0,Mt.pi)({},i),{id:u,index:a,type:"value",label:(c=i==null?void 0:i.label)!==null&&c!==void 0?c:i.value.toString(),value:n.ribbonScale.map(i.value)})),a<s.length-1){var f=s[a+1],d=(0,Mt.CR)([i.value,f.value],2),p=d[0],h=d[1],y=(p+h)/2;o.push((0,Mt.pi)((0,Mt.pi)({},i),{id:u,index:a,type:"range",range:[p,h],label:[p,h].join("~"),value:n.ribbonScale.map(y)}))}return o},[])},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"labelStyle",{get:function(){var n=(0,Mt.CR)(["center","middle"],2),r=n[0],o=n[1],i=this.labelPosition;return i==="top"?o="bottom":i==="bottom"?o="top":i==="left"?r="end":i==="right"&&(r="start"),{labelTextAlign:r,labelTextBaseline:o}},enumerable:!1,configurable:!0}),e.prototype.renderLabel=function(n){var r=this.attributes,o=r.showTick,i=o===void 0?!1:o,a=r.labelFilter,s=r.labelFormatter,l=(0,Ln.zs)(this.attributes,"tick"),c=(0,Ln.zs)(this.attributes,"label"),u=c.align,f=(0,rh.n)((0,Mt.pi)({showLine:!1,showGrid:!1,showTick:i,type:"linear",startPos:[0,0],endPos:[0,0],tickDirection:"negative",labelTransform:"rotate(0)"},this.labelStyle),(0,Ln.dq)(l,"tick"),(0,Ln.dq)(c,"label"),{data:this.labelData}),d={tickFilter:function(h,y,g){return(h==null?void 0:h.type)!=="value"?!1:a?a(h,h.index,g.filter(function(m){return m.type!=="value"})):!0},labelFilter:function(h,y,g){return(h==null?void 0:h.type)!==u?!1:a?a(h,h.index,g.filter(function(m){return m.type===u})):!0},labelFormatter:s},p=(0,Mt.pi)((0,Mt.pi)((0,Mt.pi)({},f),d),{labelOverlap:[{type:"hide"}]});this.label=n.maybeAppendByClassName(Rn.Ec.label,function(){return new Xl.R({style:p})}).node(),this.label.update(p,!1)},Object.defineProperty(e.prototype,"labelAxisStyle",{get:function(){var n=this.attributes,r=n.showTick,o=n.labelDirection,i=n.labelSpacing,a=n.tickLength,s=this.ribbonShape.size,l=this.labelPosition,c=this.labelFixedSpacing,u=(0,Mt.CR)([0,0,0],3),f=u[0],d=u[1],p=u[2],h=a!=null?a:s;return r?(p=h,d=c,o==="positive"?l==="right"?(f=h,p=h):l==="bottom"&&(f=p):o==="negative"&&(l==="top"||l==="left")&&(f=s)):o==="positive"?l==="right"?d=h:l==="bottom"&&(f=s+c,d=i):o==="negative"&&(l==="left"||l==="top")&&(d=i),{offset:f,spacing:d,tickLength:p}},enumerable:!1,configurable:!0}),e.prototype.adjustLabel=function(){var n=this.attributes.showLabel;if(n){var r=this.ribbonBBox,o=r.x,i=r.y,a=r.width,s=r.height,l=this.labelAxisStyle,c=l.offset,u=l.spacing,f=l.tickLength,d=(0,Mt.CR)(this.ifHorizontal([[o,i+c],[o+a,i+c]],[[o+c,i+s],[o+c,i]]),2),p=d[0],h=d[1];this.label.update({startPos:p,endPos:h,tickLength:f,labelSpacing:u},!1)}},e.prototype.bindEvents=function(){this.style.cursor="pointer",this.ribbon.on("pointerdown",this.onDragStart("ribbon")),this.ribbon.on("pointermove",this.onHovering),this.addEventListener("pointerout",this.hideIndicator)},e.prototype.showIndicator=function(n,r){r===void 0&&(r="".concat(n));var o=this.attributes.showIndicator;if(!o||typeof n!="number"){this.hideIndicator();return}var i=this.range,a=i.min,s=i.max,l=this.ribbonBBox,c=l.x,u=l.y,f=(0,Bs.Z)(n,a,s),d=this.getOffset(f),p=this.ifHorizontal([d+c,u],[c,d+u]);this.indicator.update({x:p[0],y:p[1],position:this.ifHorizontal("top","left"),labelText:r}),(0,oh.$Z)(this.indicator.node())},e.prototype.hideIndicator=function(){(0,oh.Cp)(this.indicator.node())},e.prototype.updateMouse=function(){this.attributes.slidable&&(this.style.cursor="grabbing")},e.prototype.setSelection=function(n,r){this.updateSelection(n,r)},e.prototype.updateSelection=function(n,r,o){var i;o===void 0&&(o=!1);var a=(0,Mt.CR)(this.selection,2),s=a[0],l=a[1],c=(0,Mt.CR)([n,r],2),u=c[0],f=c[1];o&&(u+=s,f+=l);var d=this.range,p=d.min,h=d.max;i=(0,Mt.CR)((0,kr.GU)([p,h],[u,f],this.selection),2),u=i[0],f=i[1],this.update({defaultValue:[u,f]}),this.dispatchSelection()},Object.defineProperty(e.prototype,"step",{get:function(){var n=this.attributes.step,r=n===void 0?1:n,o=this.range,i=o.min,a=o.max;return(0,Ul.Z)(r)?(0,ow.Zd)((a-i)*Rn.D_,0):r},enumerable:!1,configurable:!0}),e.prototype.getTickValue=function(n){var r=this.attributes,o=r.data,i=r.block,a=this.range.min;return i?ah(o.map(function(s){var l=s.value;return l}),n).tick:(0,kr.jN)(n,this.step,a)},e.prototype.getValueByCanvasPoint=function(n){var r=this.range,o=r.min,i=r.max,a=(0,Mt.CR)(this.ribbon.node().getPosition(),2),s=a[0],l=a[1],c=this.ifHorizontal(s,l),u=this.ifHorizontal.apply(this,(0,Mt.ev)([],(0,Mt.CR)((0,ih.s)(n)),!1)),f=u-c,d=(0,Bs.Z)(this.getOffset(f,!0),o,i);return d},e.prototype.getOffset=function(n,r){r===void 0&&(r=!1);var o=this.range,i=o.min,a=o.max,s=this.ribbonShape.length,l=this.eventToOffsetScale;return l.update({domain:[i,a],range:[0,s]}),r?l.invert(n):l.map(n)},e.prototype.getRealSelection=function(n){var r=this.range.max,o=(0,Mt.CR)(n,2),i=o[0],a=o[1];return this.ifHorizontal([i,a],[r-a,r-i])},e.prototype.getRealValue=function(n){var r=this.range.max;return this.ifHorizontal(n,r-n)},e.prototype.dispatchSelection=function(){var n=this.getRealSelection(this.selection),r=new ht.Aw("valuechange",{detail:{value:n}});this.dispatchEvent(r)},e.prototype.dispatchIndicated=function(n,r){var o=this,i=this.range.max,a=this.ifHorizontal(function(){return{value:n,range:r}},function(){return{value:i-n,range:r?o.getRealSelection(r):void 0}}),s=new ht.Aw("indicate",{detail:a});this.dispatchEvent(s)},e}(Vl.w),lh=Q(48478),uh=Q(88784);class ni extends lt.X{getDefaultOptions(){return{domain:[.5],range:[0,1]}}constructor(e){super(e)}map(e){if(!(0,lh.J)(e))return this.options.unknown;const n=(0,uh.b)(this.thresholds,e,0,this.n);return this.options.range[n]}invert(e){const{range:n}=this.options,r=n.indexOf(e),o=this.thresholds;return[o[r-1],o[r]]}clone(){return new ni(this.options)}rescale(){const{domain:e,range:n}=this.options;this.n=Math.min(e.length,n.length-1),this.thresholds=e}}var ql=Q(65443);function oa(t){return(0,$l.Z)(t)?0:(0,ql.Z)(t)?t.length:Object.keys(t).length}var xw=function(t,e){if(!(0,ql.Z)(t))return-1;var n=Array.prototype.indexOf;if(n)return n.call(t,e);for(var r=-1,o=0;o<t.length;o++)if(t[o]===e){r=o;break}return r},fh=xw;function ia(t){return Math.abs(t)<1e-14?t:parseFloat(t.toFixed(14))}const _w=[1,5,2,2.5,4,3],QR=null,dh=Number.EPSILON*100;function ww(t,e){return(t%e+e)%e}function Sw(t){return Math.round(t*1e12)/1e12}function jw(t,e,n,r,o,i){const a=oa(e),s=fh(e,t);let l=0;const c=ww(r,i);return(c<dh||i-c<dh)&&r<=0&&o>=0&&(l=1),1-s/(a-1)-n+l}function Ew(t,e,n){const r=oa(e);return 1-fh(e,t)/(r-1)-n+1}function Aw(t,e,n,r,o,i){const a=(t-1)/(i-o),s=(e-1)/(Math.max(i,r)-Math.min(n,o));return 2-Math.max(a/s,s/a)}function Mw(t,e){return t>=e?2-(t-1)/(e-1):1}function kw(t,e,n,r){const o=e-t;return 1-.5*(mn(e-r,2)+mn(t-n,2))/mn(.1*o,2)}function Pw(t,e,n){const r=e-t;if(n>r){const o=(n-r)/2;return 1-mn(o,2)/mn(.1*r,2)}return 1}function Tw(){return 1}const Kl=(t,e,n=5,r=!0,o=_w,i=[.25,.2,.5,.05])=>{const a=n<0?0:Math.round(n);if(Number.isNaN(t)||Number.isNaN(e)||typeof t!="number"||typeof e!="number"||!a)return[];if(e-t<1e-15||a===1)return[t];const s={score:-2,lmin:0,lmax:0,lstep:0};let l=1;for(;l<1/0;){for(let h=0;h<o.length;h+=1){const y=o[h],g=Ew(y,o,l);if(i[0]*g+i[1]+i[2]+i[3]<s.score){l=1/0;break}let m=2;for(;m<1/0;){const b=Mw(m,a);if(i[0]*g+i[1]+i[2]*b+i[3]<s.score)break;const v=(e-t)/(m+1)/l/y;let O=Math.ceil(Math.log10(v));for(;O<1/0;){const x=l*y*mn(10,O),w=Pw(t,e,x*(m-1));if(i[0]*g+i[1]*w+i[2]*b+i[3]<s.score)break;const j=Math.floor(e/x)*l-(m-1)*l,E=Math.ceil(t/x)*l;if(j<=E){const M=E-j;for(let R=0;R<=M;R+=1){const F=(j+R)*(x/l),A=F+x*(m-1),T=x,P=jw(y,o,l,F,A,T),k=kw(t,e,F,A),z=Aw(m,a,t,e,F,A),C=Tw(),I=i[0]*P+i[1]*k+i[2]*z+i[3]*C;I>s.score&&(!r||F<=t&&A>=e)&&(s.lmin=F,s.lmax=A,s.lstep=T,s.score=I)}}O+=1}m+=1}}l+=1}const c=ia(s.lmax),u=ia(s.lmin),f=ia(s.lstep),d=Math.floor(Sw((c-u)/f))+1,p=new Array(d);p[0]=ia(u);for(let h=1;h<d;h+=1)p[h]=ia(p[h-1]+f);return p};var Cw=Q(91915);class Ys extends ni{getDefaultOptions(){return{domain:[0,1],range:[.5],nice:!1,tickCount:5,tickMethod:Kl}}constructor(e){super(e)}nice(){const{nice:e}=this.options;if(e){const[n,r,o]=this.getTickMethodOptions();this.options.domain=(0,Cw.n)(n,r,o)}}getTicks(){const{tickMethod:e}=this.options,[n,r,o]=this.getTickMethodOptions();return e(n,r,o)}getTickMethodOptions(){const{domain:e,tickCount:n}=this.options,r=e[0],o=e[e.length-1];return[r,o,n]}rescale(){this.nice();const{range:e,domain:n}=this.options,[r,o]=n;this.n=e.length-1,this.thresholds=new Array(this.n);for(let i=0;i<this.n;i+=1)this.thresholds[i]=((i+1)*o-(i-this.n)*r)/(this.n+1)}invert(e){const[n,r]=super.invert(e),[o,i]=this.options.domain;return n===void 0&&r===void 0?[n,r]:[n||o,r||i]}getThresholds(){return this.thresholds}clone(){return new Ys(this.options)}}function Lw(t,e){const n=t.length;if(!n)return;if(n<2)return t[n-1];const r=(n-1)*e,o=Math.floor(r),i=t[o],a=t[o+1];return i+(a-i)*(r-o)}function Rw(t,e,n=!1){const r=t;n||r.sort((i,a)=>i-a);const o=[];for(let i=1;i<e;i+=1)o.push(Lw(r,i/e));return o}class Ws extends ni{getDefaultOptions(){return{domain:[],range:[],tickCount:5,unknown:void 0,tickMethod:Kl}}constructor(e){super(e)}rescale(){const{domain:e,range:n}=this.options;this.n=n.length-1,this.thresholds=Rw(e,this.n+1,!1)}invert(e){const[n,r]=super.invert(e),{domain:o}=this.options,i=o[0],a=o[o.length-1];return n===void 0&&r===void 0?[n,r]:[n||i,r||a]}getThresholds(){return this.thresholds}clone(){return new Ws(this.options)}getTicks(){const{tickCount:e,domain:n,tickMethod:r}=this.options,o=n.length-1,i=n[0],a=n[o];return r(i,a,e)}}var Dw=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,r=Object.getOwnPropertySymbols(t);o<r.length;o++)e.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(t,r[o])&&(n[r[o]]=t[r[o]]);return n};function Iw(t,e,n){return t.size=e,N_(n)?t.height=e:t.width=e,t}function Fw(t,e,n){const{size:r}=e,o=Vp(t,e,n);return Iw(o,r,o.orientation)}function Nw(t){return e=>({value:e/t,label:String(e)})}function zw(t,e,n,r,o){const i=e.thresholds,a=Nw(r);return Object.assign(Object.assign({},t),{color:o,data:[n,...i,r].map(a)})}function Bw(t,e,n){const o=[-1/0,...e.thresholds,1/0].map((i,a)=>({value:a,label:i}));return Object.assign(Object.assign({},t),{data:o,color:n,labelFilter:(i,a)=>a>0&&a<o.length-1})}function Ql(t){const{domain:e}=t.getOptions(),[n,r]=[e[0],Ip(e)];return[n,r]}function $w(t,e){const n=t.getOptions(),r=t.clone();return r.update(Object.assign(Object.assign({},n),{range:[(0,ht.lu)(e).toString()]})),r}function Yw(t,e,n,r,o,i){const{length:a}=t,s=n||r,l=o.color?i.legendContinuous.ribbonFill||"black":i.color,c=e||$w(s,l),[u,f]=Ql(c),[d,p]=Ql([e,n,r].filter(h=>h!==void 0).find(h=>!(h instanceof ft)));return Object.assign(Object.assign({},t),{domain:[d,p],data:c.getTicks().map(h=>({value:h})),color:new Array(Math.floor(a)).fill(0).map((h,y)=>{const g=(f-u)/(a-1)*y+u,m=c.map(g)||l,b=r?r.map(g):1;return m.replace(/rgb[a]*\(([\d]{1,3}) *, *([\d]{1,3}) *, *([\d]{1,3})[\S\s]*\)/,(v,O,x,w)=>`rgba(${O}, ${x}, ${w}, ${b})`)})})}function Ww(t,e,n,r,o,i){const a=gr(t,"color"),s=Fw(n,r,o);if(a instanceof ni){const{range:u}=a.getOptions(),[f,d]=Ql(a);return a instanceof Ys||a instanceof Ws?zw(s,a,f,d,u):Bw(s,a,u)}const l=gr(t,"size"),c=gr(t,"opacity");return Yw(s,a,l,c,e,i)}const Qr=t=>{const{labelFormatter:e,layout:n,order:r,orientation:o,position:i,size:a,title:s,style:l,crossPadding:c,padding:u}=t,f=Dw(t,["labelFormatter","layout","order","orientation","position","size","title","style","crossPadding","padding"]);return({scales:d,value:p,theme:h,scale:y})=>{const{bbox:g}=p,{x:m,y:b,width:v,height:O}=g,x=Gp(i,n),{legendContinuous:w={}}=h,j=zs(Object.assign({},w,Object.assign(Object.assign({titleText:Ns(s),labelAlign:"value",labelFormatter:typeof e=="string"?M=>qr(e)(M.label):e},Ww(d,y,p,t,Qr,h)),l),f)),E=new Up({style:Object.assign(Object.assign({x:m,y:b,width:v,height:O},x),{subOptions:j})});return E.appendChild(new Ow({className:"legend-continuous",style:j})),E}};Qr.props={defaultPosition:"top",defaultOrientation:"vertical",defaultOrder:1,defaultSize:60,defaultLength:200,defaultLegendSize:60,defaultPadding:[20,10],defaultCrossPadding:[12,12]};const ph=t=>(...e)=>Qr(Object.assign({},{block:!0},t))(...e);ph.props=Object.assign(Object.assign({},Qr.props),{defaultPosition:"top",defaultOrientation:"horizontal"});const Jl=t=>e=>{const{scales:n}=e,r=gr(n,"size");return Qr(Object.assign({},{type:"size",data:r.getTicks().map((o,i)=>({value:o,label:String(o)}))},t))(e)};Jl.props=Object.assign(Object.assign({},Qr.props),{defaultPosition:"top",defaultOrientation:"horizontal"});const hh=t=>Jl(Object.assign({},{block:!0},t));hh.props=Object.assign(Object.assign({},Qr.props),{defaultPosition:"top",defaultOrientation:"horizontal"});var Zw=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,r=Object.getOwnPropertySymbols(t);o<r.length;o++)e.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(t,r[o])&&(n[r[o]]=t[r[o]]);return n};const yh=({static:t=!1}={})=>e=>{const{width:n,height:r,depth:o,paddingLeft:i,paddingRight:a,paddingTop:s,paddingBottom:l,padding:c,inset:u,insetLeft:f,insetTop:d,insetRight:p,insetBottom:h,margin:y,marginLeft:g,marginBottom:m,marginTop:b,marginRight:v,data:O,coordinate:x,theme:w,component:j,interaction:E,x:M,y:R,z:D,key:F,frame:A,labelTransform:T,parentKey:P,clip:k,viewStyle:z,title:C}=e,I=Zw(e,["width","height","depth","paddingLeft","paddingRight","paddingTop","paddingBottom","padding","inset","insetLeft","insetTop","insetRight","insetBottom","margin","marginLeft","marginBottom","marginTop","marginRight","data","coordinate","theme","component","interaction","x","y","z","key","frame","labelTransform","parentKey","clip","viewStyle","title"]);return[Object.assign(Object.assign({type:"standardView",x:M,y:R,z:D,key:F,width:n,height:r,depth:o,padding:c,paddingLeft:i,paddingRight:a,paddingTop:s,inset:u,insetLeft:f,insetTop:d,insetRight:p,insetBottom:h,paddingBottom:l,theme:w,coordinate:x,component:j,interaction:E,frame:A,labelTransform:T,margin:y,marginLeft:g,marginBottom:m,marginTop:b,marginRight:v,parentKey:P,clip:k,style:z},!t&&{title:C}),{marks:[Object.assign(Object.assign(Object.assign({},I),{key:`${F}-0`,data:O}),t&&{title:C})]})]};yh.props={};var Hw=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,r=Object.getOwnPropertySymbols(t);o<r.length;o++)e.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(t,r[o])&&(n[r[o]]=t[r[o]]);return n};function aa(t){return(e,...n)=>(0,et.Z)({},t(e,...n),e)}function _o(t){return(e,...n)=>(0,et.Z)({},e,t(e,...n))}function Xw(t){return t instanceof Date?!1:typeof t=="object"}function tu(t,e){if(!t)return e;if(Array.isArray(t))return t;if(Xw(t)){const{value:n=e}=t,r=Hw(t,["value"]);return Object.assign(Object.assign({},r),{value:n})}return t}var eu=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,r=Object.getOwnPropertySymbols(t);o<r.length;o++)e.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(t,r[o])&&(n[r[o]]=t[r[o]]);return n};const gh=()=>t=>{const{children:e}=t,n=eu(t,["children"]);if(!Array.isArray(e))return[];const{data:r,scale:o={},axis:i={},legend:a={},encode:s={},transform:l=[]}=n,c=eu(n,["data","scale","axis","legend","encode","transform"]),u=e.map(f=>{var{data:d,scale:p={},axis:h={},legend:y={},encode:g={},transform:m=[]}=f,b=eu(f,["data","scale","axis","legend","encode","transform"]);return Object.assign({data:tu(d,r),scale:(0,et.Z)({},o,p),encode:(0,et.Z)({},s,g),transform:[...l,...m],axis:h&&i?(0,et.Z)({},i,h):!1,legend:y&&a?(0,et.Z)({},a,y):!1},b)});return[Object.assign(Object.assign({},c),{marks:u,type:"standardView"})]};gh.props={};function $e([t,e],[n,r]){return[t-n,e-r]}function Zs([t,e],[n,r]){return[t+n,e+r]}function Ne([t,e],[n,r]){return Math.sqrt(Math.pow(t-n,2)+Math.pow(e-r,2))}function Xn([t,e]){return Math.atan2(e,t)}function ri([t,e]){return Xn([t,e])+Math.PI/2}function mh(t,e){const n=Xn(t),r=Xn(e);return n<r?r-n:Math.PI*2-(n-r)}function nu(t){let e=1/0,n=-1/0,r=1/0,o=-1/0;for(const[s,l]of t)e=Math.min(s,e),n=Math.max(s,n),r=Math.min(l,r),o=Math.max(l,o);const i=n-e,a=o-r;return[e,r,i,a]}function bh([t,e],[n,r]){return[(t+n)/2,(e+r)/2]}function jt(t,e){for(const[n,r]of Object.entries(e))t.style(n,r)}function Gw(t,e){return e.forEach((n,r)=>r===0?t.moveTo(n[0],n[1]):t.lineTo(n[0],n[1])),t.closePath(),t}function Uw(t,e,n){const{arrowSize:r}=n,o=typeof r=="string"?+parseFloat(r)/100*Ne(t,e):r,i=Math.PI/6,a=Math.atan2(e[1]-t[1],e[0]-t[0]),s=Math.PI/2-a-i,l=[e[0]-o*Math.sin(s),e[1]-o*Math.cos(s)],c=a-i,u=[e[0]-o*Math.cos(c),e[1]-o*Math.sin(c)];return[l,u]}function sa(t,e,n,r,o){const i=Xn($e(r,e))+Math.PI,a=Xn($e(r,n))+Math.PI;return t.arc(r[0],r[1],o,i,a,a-i<0),t}function vh(t,e,n,r="y",o="between",i=!1){const a=(g,m)=>g==="y"||g===!0?m?180:90:m?90:0,s=r==="y"||r===!0?n:e,l=a(r,i),c=xo(s),[u,f]=Mr(c,g=>s[g]),d=new ir.b({domain:[u,f],range:[0,100]}),p=g=>(0,V.Z)(s[g])&&!Number.isNaN(s[g])?d.map(s[g]):0,h={between:g=>`${t[g]} ${p(g)}%`,start:g=>g===0?`${t[g]} ${p(g)}%`:`${t[g-1]} ${p(g)}%, ${t[g]} ${p(g)}%`,end:g=>g===t.length-1?`${t[g]} ${p(g)}%`:`${t[g]} ${p(g)}%, ${t[g+1]} ${p(g)}%`},y=c.sort((g,m)=>p(g)-p(m)).map(h[o]||h.between).join(",");return`linear-gradient(${l}deg, ${y})`}function Hs(t){const[e,n,r,o]=t;return[o,e,n,r]}function wo(t,e,n){const[r,o,,i]=Me(t)?Hs(e):e,[a,s]=n,l=t.getCenter(),c=ri($e(r,l)),u=ri($e(o,l)),f=u===c&&a!==s?u+Math.PI*2:u;return{startAngle:c,endAngle:f-c>=0?f:Math.PI*2+f,innerRadius:Ne(i,l),outerRadius:Ne(r,l)}}function JR(t){const e="connect";return Object.fromEntries(Object.entries(t).filter(([n])=>n.startsWith(e)).map(([n,r])=>[lowerFirst(n.replace(e,"").trim()),r]).filter(([n])=>n!==void 0))}function ru(t){const{colorAttribute:e,opacityAttribute:n=e}=t;return`${n}Opacity`}function Oh(t,e){if(!be(t))return"";const n=t.getCenter(),{transform:r}=e;return`translate(${n[0]}, ${n[1]}) ${r||""}`}function ou(t){if(t.length===1)return t[0];const[[e,n,r=0],[o,i,a=0]]=t;return[(e+o)/2,(n+i)/2,(r+a)/2]}function iu(t){return t.replace(/-(\w)/g,function(e,n){return n.toUpperCase()})}function Vw(t){return t.replace(/([A-Z])/g,"-$1").toLowerCase()}var Xs=Q(23271),tD=Array.prototype.slice;function xh(t){return typeof t=="object"&&"length"in t?t:Array.from(t)}function ke(t){return function(){return t}}function _h(t){this._context=t}_h.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;default:this._context.lineTo(t,e);break}}};function ca(t){return new _h(t)}const au=Math.PI,su=2*au,So=1e-6,qw=su-So;function wh(t){this._+=t[0];for(let e=1,n=t.length;e<n;++e)this._+=arguments[e]+t[e]}function Kw(t){let e=Math.floor(t);if(!(e>=0))throw new Error(`invalid digits: ${t}`);if(e>15)return wh;const n=mn(10,e);return function(r){this._+=r[0];for(let o=1,i=r.length;o<i;++o)this._+=Math.round(arguments[o]*n)/n+r[o]}}class Gs{constructor(e){this._x0=this._y0=this._x1=this._y1=null,this._="",this._append=e==null?wh:Kw(e)}moveTo(e,n){this._append`M${this._x0=this._x1=+e},${this._y0=this._y1=+n}`}closePath(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._append`Z`)}lineTo(e,n){this._append`L${this._x1=+e},${this._y1=+n}`}quadraticCurveTo(e,n,r,o){this._append`Q${+e},${+n},${this._x1=+r},${this._y1=+o}`}bezierCurveTo(e,n,r,o,i,a){this._append`C${+e},${+n},${+r},${+o},${this._x1=+i},${this._y1=+a}`}arcTo(e,n,r,o,i){if(e=+e,n=+n,r=+r,o=+o,i=+i,i<0)throw new Error(`negative radius: ${i}`);let a=this._x1,s=this._y1,l=r-e,c=o-n,u=a-e,f=s-n,d=u*u+f*f;if(this._x1===null)this._append`M${this._x1=e},${this._y1=n}`;else if(d>So)if(!(Math.abs(f*l-c*u)>So)||!i)this._append`L${this._x1=e},${this._y1=n}`;else{let p=r-a,h=o-s,y=l*l+c*c,g=p*p+h*h,m=Math.sqrt(y),b=Math.sqrt(d),v=i*Math.tan((au-Math.acos((y+d-g)/(2*m*b)))/2),O=v/b,x=v/m;Math.abs(O-1)>So&&this._append`L${e+O*u},${n+O*f}`,this._append`A${i},${i},0,0,${+(f*p>u*h)},${this._x1=e+x*l},${this._y1=n+x*c}`}}arc(e,n,r,o,i,a){if(e=+e,n=+n,r=+r,a=!!a,r<0)throw new Error(`negative radius: ${r}`);let s=r*Math.cos(o),l=r*Math.sin(o),c=e+s,u=n+l,f=1^a,d=a?o-i:i-o;this._x1===null?this._append`M${c},${u}`:(Math.abs(this._x1-c)>So||Math.abs(this._y1-u)>So)&&this._append`L${c},${u}`,r&&(d<0&&(d=d%su+su),d>qw?this._append`A${r},${r},0,1,${f},${e-s},${n-l}A${r},${r},0,1,${f},${this._x1=c},${this._y1=u}`:d>So&&this._append`A${r},${r},0,${+(d>=au)},${f},${this._x1=e+r*Math.cos(i)},${this._y1=n+r*Math.sin(i)}`)}rect(e,n,r,o){this._append`M${this._x0=this._x1=+e},${this._y0=this._y1=+n}h${r=+r}v${+o}h${-r}Z`}toString(){return this._}}function Gn(){return new Gs}Gn.prototype=Gs.prototype;function eD(t=3){return new Gs(+t)}function cu(t){let e=3;return t.digits=function(n){if(!arguments.length)return e;if(n==null)e=null;else{const r=Math.floor(n);if(!(r>=0))throw new RangeError(`invalid digits: ${n}`);e=r}return t},()=>new Gs(e)}function Sh(t){return t[0]}function jh(t){return t[1]}function jo(t,e){var n=ke(!0),r=null,o=ca,i=null,a=cu(s);t=typeof t=="function"?t:t===void 0?Sh:ke(t),e=typeof e=="function"?e:e===void 0?jh:ke(e);function s(l){var c,u=(l=xh(l)).length,f,d=!1,p;for(r==null&&(i=o(p=a())),c=0;c<=u;++c)!(c<u&&n(f=l[c],c,l))===d&&((d=!d)?i.lineStart():i.lineEnd()),d&&i.point(+t(f,c,l),+e(f,c,l));if(p)return i=null,p+""||null}return s.x=function(l){return arguments.length?(t=typeof l=="function"?l:ke(+l),s):t},s.y=function(l){return arguments.length?(e=typeof l=="function"?l:ke(+l),s):e},s.defined=function(l){return arguments.length?(n=typeof l=="function"?l:ke(!!l),s):n},s.curve=function(l){return arguments.length?(o=l,r!=null&&(i=o(r)),s):o},s.context=function(l){return arguments.length?(l==null?r=i=null:i=o(r=l),s):r},s}function oi(t){const e=typeof t=="function"?t:t.render;return class extends ht.b_{connectedCallback(){this.draw()}attributeChangedCallback(){this.draw()}draw(){e(this)}}}var lu=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,r=Object.getOwnPropertySymbols(t);o<r.length;o++)e.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(t,r[o])&&(n[r[o]]=t[r[o]]);return n};function Qw(t){const{min:[e,n],max:[r,o]}=t.getLocalBounds();let i=0,a=0;return e>0&&(i=e),r<0&&(i=r),n>0&&(a=n),o<0&&(a=o),[i,a]}function Jw(t,e=[]){const[n=0,r=0,o=n,i=r]=e,a=t.parentNode,s=a.getEulerAngles();a.setEulerAngles(0);const{min:l,halfExtents:c}=t.getLocalBounds(),[u,f]=l,[d,p]=c;return a.setEulerAngles(s),{x:u-i,y:f-n,width:d*2+i+r,height:p*2+n+o}}const nD=(t,e,n)=>{const r=dist(t,e),o=dist(e,n),i=dist(n,t);return(Math.pow(r,2)+Math.pow(o,2)-Math.pow(i,2))/(2*r*o)};function tS(t,e,n,r,o=!0,i=!0){const a=f=>jo()(f);if(!e[0]&&!e[1])return a([Qw(t),e]);if(!n.length)return a([[0,0],e]);const[s,l]=n,c=[...l],u=[...s];if(l[0]!==s[0]){const f=o?-4:4;c[1]=l[1],i&&!o&&(c[0]=Math.max(s[0],l[0]-f),l[1]<s[1]?u[1]=c[1]:(u[1]=s[1],u[0]=Math.max(u[0],c[0]-f))),!i&&!o&&(c[0]=Math.max(s[0],l[0]-f),l[1]>s[1]?u[1]=c[1]:(u[1]=s[1],u[0]=Math.max(u[0],c[0]-f))),!i&&o&&(c[0]=Math.min(s[0],l[0]-f),l[1]>s[1]?u[1]=c[1]:(u[1]=s[1],u[0]=Math.min(u[0],c[0]-f))),i&&o&&(c[0]=Math.min(s[0],l[0]-f),l[1]<s[1]?u[1]=c[1]:(u[1]=s[1],u[0]=Math.min(u[0],c[0]-f)))}return a([l,c,u,s,e])}const Eh=oi(t=>{const e=t.attributes,{className:n,class:r,transform:o,rotate:i,labelTransform:a,labelTransformOrigin:s,x:l,y:c,x0:u=l,y0:f=c,text:d,background:p,connector:h,startMarker:y,endMarker:g,coordCenter:m,innerHTML:b}=e,v=lu(e,["className","class","transform","rotate","labelTransform","labelTransformOrigin","x","y","x0","y0","text","background","connector","startMarker","endMarker","coordCenter","innerHTML"]);if(t.style.transform=`translate(${l}, ${c})`,[l,c,u,f].some(C=>!(0,V.Z)(C))){t.children.forEach(C=>C.remove());return}const O=at(v,"background"),{padding:x}=O,w=lu(O,["padding"]),j=at(v,"connector"),{points:E=[]}=j,M=lu(j,["points"]);let R;b?R=Tt(t).maybeAppend("html","html",n).style("zIndex",0).style("innerHTML",b).call(jt,Object.assign({transform:a,transformOrigin:s},v)).node():R=Tt(t).maybeAppend("text","text").style("zIndex",0).style("text",d).call(jt,Object.assign({textBaseline:"middle",transform:a,transformOrigin:s},v)).node();const D=Tt(t).maybeAppend("background","rect").style("zIndex",-1).call(jt,Jw(R,x)).call(jt,p?w:{}).node(),F=+u<m[0],A=+f<m[1],T=[+u-+l,+f-+c],P=tS(D,T,E,m,F,A),k=y&&new Xs.J({id:"startMarker",style:Object.assign({x:0,y:0},at(v,"startMarker"))}),z=g&&new Xs.J({id:"endMarker",style:Object.assign({x:0,y:0},at(v,"endMarker"))});Tt(t).maybeAppend("connector","path").style("zIndex",0).style("d",P).style("markerStart",k).style("markerEnd",z).call(jt,h?M:{})});function ii(t,e){let n,r=-1,o=-1;if(e===void 0)for(const i of t)++o,i!=null&&(n<i||n===void 0&&i>=i)&&(n=i,r=o);else for(let i of t)(i=e(i,++o,t))!=null&&(n<i||n===void 0&&i>=i)&&(n=i,r=o);return r}function eS(t,e,n,r){const o=e.length/2,i=e.slice(0,o),a=e.slice(o);let s=ii(i,(p,h)=>Math.abs(p[1]-a[h][1]));s=Math.max(Math.min(s,o-2),1);const l=p=>[i[p][0],(i[p][1]+a[p][1])/2],c=l(s),u=l(s-1),f=l(s+1),d=Xn($e(f,u))/Math.PI*180;return{x:c[0],y:c[1],transform:`rotate(${d})`,textAlign:"center",textBaseline:"middle"}}function Ah(t,e,n,r){const{bounds:o}=n,[[i,a],[s,l]]=o,c=s-i,u=l-a,f=d=>{const{x:p,y:h}=d,y=Xr(n.x,c),g=Xr(n.y,u);return Object.assign(Object.assign({},d),{x:(y||p)+i,y:(g||h)+a})};return f(t==="left"?{x:0,y:u/2,textAlign:"start",textBaseline:"middle"}:t==="right"?{x:c,y:u/2,textAlign:"end",textBaseline:"middle"}:t==="top"?{x:c/2,y:0,textAlign:"center",textBaseline:"top"}:t==="bottom"?{x:c/2,y:u,textAlign:"center",textBaseline:"bottom"}:t==="top-left"?{x:0,y:0,textAlign:"start",textBaseline:"top"}:t==="top-right"?{x:c,y:0,textAlign:"end",textBaseline:"top"}:t==="bottom-left"?{x:0,y:u,textAlign:"start",textBaseline:"bottom"}:t==="bottom-right"?{x:c,y:u,textAlign:"end",textBaseline:"bottom"}:{x:c/2,y:u/2,textAlign:"center",textBaseline:"middle"})}function Mh(t,e,n,r){const{y:o,y1:i,autoRotate:a,rotateToAlignArc:s}=n,l=r.getCenter(),c=wo(r,e,[o,i]),{innerRadius:u,outerRadius:f,startAngle:d,endAngle:p}=c,h=t==="inside"?(d+p)/2:p,y=uu(h,a,s),g=(()=>{const[m,b]=e,v=u+(f-u)*.5,[O,x]=t==="inside"?la(l,h,v):bh(m,b);return{x:O,y:x}})();return Object.assign(Object.assign({},g),{textAlign:t==="inside"?"center":"start",textBaseline:"middle",rotate:y})}function la(t,e,n){return[t[0]+Math.sin(e)*n,t[1]-Math.cos(e)*n]}function uu(t,e,n){if(!e)return 0;const r=n?0:Math.sin(t)<0?90:-90;return t/Math.PI*180+r}function nS(t,e,n,r){const{y:o,y1:i,autoRotate:a,rotateToAlignArc:s,radius:l=.5,offset:c=0}=n,u=wo(r,e,[o,i]),{startAngle:f,endAngle:d}=u,p=r.getCenter(),h=(f+d)/2,g={textAlign:"center",textBaseline:"middle",rotate:uu(h,a,s)},{innerRadius:m,outerRadius:b}=u,O=m+(b-m)*l+c,[x,w]=la(p,h,O);return Object.assign({x,y:w},g)}function kh(t){return t===void 0?null:t}function Ph(t,e,n,r){const{bounds:o}=n,[i]=o;return{x:kh(i[0]),y:kh(i[1])}}function Pr(t,e,n,r){const{bounds:o}=n;return o.length===1?Ph(t,e,n,r):(Ji(r)?Mh:ei(r)?nS:Ah)(t,e,n,r)}function rS(t,e,n,r,o){const[i,a]=la(t,e,n),[s,l]=la(t,e,r),c=Math.sin(e)>0?1:-1;return[[i,a],[s,l],[s+c*o,l]]}function Th(t,e,n){const r=wo(n,t,[e.y,e.y1]),{innerRadius:o,outerRadius:i}=r;return o+(i-o)}function Ch(t,e,n){const r=wo(n,t,[e.y,e.y1]),{startAngle:o,endAngle:i}=r;return(o+i)/2}function fu(t,e,n,r){const{autoRotate:o,rotateToAlignArc:i,offset:a=0,connector:s=!0,connectorLength:l=a,connectorLength2:c=0,connectorDistance:u=0}=n,f=r.getCenter(),d=Ch(e,n,r),p=Math.sin(d)>0?1:-1,h=uu(d,o,i),y={textAlign:p>0||Ji(r)?"start":"end",textBaseline:"middle",rotate:h},g=Th(e,n,r),m=g+(s?l:a),[[b,v],[O,x],[w,j]]=rS(f,d,g,m,s?c:0),E=s?+u*p:0,M=w+E,R=j,D={connector:s,connectorPoints:[[O-M,x-R],[w-M,j-R]]};return Object.assign(Object.assign({x0:b,y0:v,x:w+E,y:j},y),D)}function oS(t,e,n,r){const{bounds:o}=n;return o.length===1?Ph(t,e,n,r):(Ji(r)?Mh:ei(r)?fu:Ah)(t,e,n,r)}function Ye(t,e){return t==null||e==null?NaN:t<e?-1:t>e?1:t>=e?0:NaN}function iS(t,e){return Array.from(e,n=>t[n])}function ar(t,...e){if(typeof t[Symbol.iterator]!="function")throw new TypeError("values is not iterable");t=Array.from(t);let[n]=e;if(n&&n.length!==2||e.length>1){const r=Uint32Array.from(t,(o,i)=>i);return e.length>1?(e=e.map(o=>t.map(o)),r.sort((o,i)=>{for(const a of e){const s=ua(a[o],a[i]);if(s)return s}})):(n=t.map(n),r.sort((o,i)=>ua(n[o],n[i]))),iS(t,r)}return t.sort(Lh(n))}function Lh(t=Ye){if(t===Ye)return ua;if(typeof t!="function")throw new TypeError("compare is not a function");return(e,n)=>{const r=t(e,n);return r||r===0?r:(t(n,n)===0)-(t(e,e)===0)}}function ua(t,e){return(t==null||!(t>=t))-(e==null||!(e>=e))||(t<e?-1:t>e?1:0)}function Rh(t,e={}){const{labelHeight:n=14,height:r}=e,o=ar(t,c=>c.y),i=o.length,a=new Array(i);for(let c=0;c<i;c++){const u=o[c],{y:f}=u;a[c]={y:f,y1:f+n,labels:[f]}}let s=!0;for(;s;){s=!1;for(let c=a.length-1;c>0;c--){const u=a[c],f=a[c-1];if(f.y1>u.y){s=!0,f.labels.push(...u.labels),a.splice(c,1),f.y1+=u.y1-u.y;const d=f.y1-f.y;f.y1=Math.max(Math.min(f.y1,r),d),f.y=f.y1-d}}}let l=0;for(const c of a){const{y:u,labels:f}=c;let d=u-n;for(const p of f){const h=o[l++],g=d+n-p;h.connectorPoints[0][1]-=g,h.y=d+n,d+=n}}}function Dh(t,e){const n=ar(t,s=>s.y),{height:r,labelHeight:o=14}=e,i=Math.ceil(r/o);if(n.length<=i)return Rh(n,e);const a=[];for(let s=0;s<n.length;s++)s<n.length-i?(n[s].opacity=0,n[s].connector=!1):a.push(n[s]);Rh(a,e)}var aS=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,r=Object.getOwnPropertySymbols(t);o<r.length;o++)e.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(t,r[o])&&(n[r[o]]=t[r[o]]);return n};const Us=new WeakMap;function sS(t,e,n){const{connectorLength:r,connectorLength2:o,connectorDistance:i}=e,a=aS(fu("outside",t,e,n),[]),s=n.getCenter(),l=Th(t,e,n),c=Ch(t,e,n),u=l+r+o,f=Math.sin(c)>0?1:-1,d=s[0]+(u+ +i)*f,{x:p}=a,h=d-p;return a.x+=h,a.connectorPoints[0][0]-=h,a}function cS(t,e,n,r,o,i){if(!ei(r))return{};if(Us.has(e))return Us.get(e);const a=i.map(d=>sS(d,n,r)),{width:s,height:l}=r.getOptions(),c=a.filter(d=>d.x<s/2),u=a.filter(d=>d.x>=s/2),f=Object.assign(Object.assign({},o),{height:l});return Dh(c,f),Dh(u,f),a.forEach((d,p)=>Us.set(i[p],d)),Us.get(e)}var lS=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,r=Object.getOwnPropertySymbols(t);o<r.length;o++)e.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(t,r[o])&&(n[r[o]]=t[r[o]]);return n};function uS(t,e,n,r){if(!ei(r))return{};const{connectorLength:o,connectorLength2:i,connectorDistance:a}=n,s=lS(fu("outside",e,n,r),[]),{x0:l,y0:c}=s,u=r.getCenter(),d=k_(r)+o,p=ri([l-u[0],c-u[1]]),h=Math.sin(p)>0?1:-1,[y,g]=la(u,p,d);return s.x=y+(i+a)*h,s.y=g,s}var Ih=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,r=Object.getOwnPropertySymbols(t);o<r.length;o++)e.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(t,r[o])&&(n[r[o]]=t[r[o]]);return n};function fS(t,e){return t!==void 0?t:ei(e)?"inside":Me(e)?"right":"top"}function dS(t,e,n,r,o,i){const{position:a}=e,{render:s}=o,l=fS(a,n),u=r[s?"htmlLabel":l==="inside"?"innerLabel":"label"],f=Object.assign({},u,e),d=Zt[iu(l)];if(!d)throw new Error(`Unknown position: ${l}`);return Object.assign(Object.assign({},u),d(l,t,f,n,o,i))}const Fh=(t,e)=>{const{coordinate:n,theme:r}=e,{render:o}=t;return(i,a,s,l)=>{const{text:c,x:u,y:f,transform:d="",transformOrigin:p,className:h=""}=a,y=Ih(a,["text","x","y","transform","transformOrigin","className"]),g=dS(i,a,n,r,t,l),{rotate:m=0,transform:b=""}=g,v=Ih(g,["rotate","transform"]);return Tt(new Eh).call(jt,v).style("text",`${c}`).style("className",`${h} g2-label`).style("innerHTML",o?o(c,a.datum,a.index):void 0).style("labelTransform",`${b} rotate(${+m}) ${d}`.trim()).style("labelTransformOrigin",p).style("coordCenter",n.getCenter()).call(jt,y).node()}};Fh.props={defaultMarker:"point"};function pS(t,e){return t==null||e==null?NaN:e<t?-1:e>t?1:e>=t?0:NaN}function Tr(t){let e,n,r;t.length!==2?(e=Ye,n=(s,l)=>Ye(t(s),l),r=(s,l)=>t(s)-l):(e=t===Ye||t===pS?t:hS,n=t,r=t);function o(s,l,c=0,u=s.length){if(c<u){if(e(l,l)!==0)return u;do{const f=c+u>>>1;n(s[f],l)<0?c=f+1:u=f}while(c<u)}return c}function i(s,l,c=0,u=s.length){if(c<u){if(e(l,l)!==0)return u;do{const f=c+u>>>1;n(s[f],l)<=0?c=f+1:u=f}while(c<u)}return c}function a(s,l,c=0,u=s.length){const f=o(s,l,c,u-1);return f>c&&r(s[f-1],l)>-r(s[f],l)?f-1:f}return{left:o,center:a,right:i}}function hS(){return 0}var Nh=Q(13639);function du(t){return t===null?NaN:+t}function*yS(t,e){if(e===void 0)for(let n of t)n!=null&&(n=+n)>=n&&(yield n);else{let n=-1;for(let r of t)(r=e(r,++n,t))!=null&&(r=+r)>=r&&(yield r)}}const zh=Tr(Ye),gS=zh.right,mS=zh.left,bS=Tr(du).center;var vS=gS;function OS(t,e,n){return Math.min(n,Math.max(e,t))}function fa(t){return!!t.getBandWidth}function ai(t,e,n){if(!fa(t))return t.invert(e);const{adjustedRange:r}=t,{domain:o}=t.getOptions(),i=n?-1:0,a=t.getStep(),s=n?r:r.map(u=>u+a),l=mS(s,e),c=OS(l+i,0,o.length-1);return o[c]}function Jr(t,e,n){if(!e)return t.getOptions().domain;if(!fa(t)){const l=ar(e);if(!n)return l;const[c]=l,{range:u}=t.getOptions(),[f,d]=u,p=f>d?-1:1,h=t.invert(t.map(c)+p*n);return[c,h]}const{domain:r}=t.getOptions(),o=e[0],i=r.indexOf(o);if(n){const l=i+Math.round(r.length*n);return r.slice(i,l)}const a=e[e.length-1],s=r.indexOf(a);return r.slice(i,s+1)}function Vs(t,e,n,r,o,i){const{x:a,y:s}=o,l=(p,h)=>{const[y,g]=i.invert(p);return[ai(a,y,h),ai(s,g,h)]},c=l([t,e],!0),u=l([n,r],!1),f=Jr(a,[c[0],u[0]]),d=Jr(s,[c[1],u[1]]);return[f,d]}function qs(t,e){const[n,r]=t,o=i=>i.getStep?i.getStep():0;return[e.map(n),e.map(r)+o(e)]}function xS(t,e,n){const{x:r,y:o}=e,[i,a]=t,s=qs(i,r),l=qs(a,o),c=[s[0],l[0]],u=[s[1],l[1]],[f,d]=n.map(c),[p,h]=n.map(u);return[f,d,p,h]}const Bh=Math.abs,On=Math.atan2,Eo=Math.cos,_S=Math.max,pu=Math.min,mr=Math.sin,si=Math.sqrt,xn=1e-12,da=Math.PI,Ks=da/2,wS=2*da;function SS(t){return t>1?0:t<-1?da:Math.acos(t)}function $h(t){return t>=1?Ks:t<=-1?-Ks:Math.asin(t)}function jS(t){return t.innerRadius}function ES(t){return t.outerRadius}function AS(t){return t.startAngle}function MS(t){return t.endAngle}function kS(t){return t&&t.padAngle}function PS(t,e,n,r,o,i,a,s){var l=n-t,c=r-e,u=a-o,f=s-i,d=f*l-u*c;if(!(d*d<xn))return d=(u*(e-i)-f*(t-o))/d,[t+d*l,e+d*c]}function Qs(t,e,n,r,o,i,a){var s=t-n,l=e-r,c=(a?i:-i)/si(s*s+l*l),u=c*l,f=-c*s,d=t+u,p=e+f,h=n+u,y=r+f,g=(d+h)/2,m=(p+y)/2,b=h-d,v=y-p,O=b*b+v*v,x=o-i,w=d*y-h*p,j=(v<0?-1:1)*si(_S(0,x*x*O-w*w)),E=(w*v-b*j)/O,M=(-w*b-v*j)/O,R=(w*v+b*j)/O,D=(-w*b+v*j)/O,F=E-g,A=M-m,T=R-g,P=D-m;return F*F+A*A>T*T+P*P&&(E=R,M=D),{cx:E,cy:M,x01:-u,y01:-f,x11:E*(o/x-1),y11:M*(o/x-1)}}function hu(){var t=jS,e=ES,n=ke(0),r=null,o=AS,i=MS,a=kS,s=null,l=cu(c);function c(){var u,f,d=+t.apply(this,arguments),p=+e.apply(this,arguments),h=o.apply(this,arguments)-Ks,y=i.apply(this,arguments)-Ks,g=Bh(y-h),m=y>h;if(s||(s=u=l()),p<d&&(f=p,p=d,d=f),!(p>xn))s.moveTo(0,0);else if(g>wS-xn)s.moveTo(p*Eo(h),p*mr(h)),s.arc(0,0,p,h,y,!m),d>xn&&(s.moveTo(d*Eo(y),d*mr(y)),s.arc(0,0,d,y,h,m));else{var b=h,v=y,O=h,x=y,w=g,j=g,E=a.apply(this,arguments)/2,M=E>xn&&(r?+r.apply(this,arguments):si(d*d+p*p)),R=pu(Bh(p-d)/2,+n.apply(this,arguments)),D=R,F=R,A,T;if(M>xn){var P=$h(M/d*mr(E)),k=$h(M/p*mr(E));(w-=P*2)>xn?(P*=m?1:-1,O+=P,x-=P):(w=0,O=x=(h+y)/2),(j-=k*2)>xn?(k*=m?1:-1,b+=k,v-=k):(j=0,b=v=(h+y)/2)}var z=p*Eo(b),C=p*mr(b),I=d*Eo(x),Y=d*mr(x);if(R>xn){var X=p*Eo(v),W=p*mr(v),Z=d*Eo(O),K=d*mr(O),J;if(g<da)if(J=PS(z,C,Z,K,X,W,I,Y)){var rt=z-J[0],nt=C-J[1],tt=X-J[0],yt=W-J[1],st=1/mr(SS((rt*tt+nt*yt)/(si(rt*rt+nt*nt)*si(tt*tt+yt*yt)))/2),ot=si(J[0]*J[0]+J[1]*J[1]);D=pu(R,(d-ot)/(st-1)),F=pu(R,(p-ot)/(st+1))}else D=F=0}j>xn?F>xn?(A=Qs(Z,K,z,C,p,F,m),T=Qs(X,W,I,Y,p,F,m),s.moveTo(A.cx+A.x01,A.cy+A.y01),F<R?s.arc(A.cx,A.cy,F,On(A.y01,A.x01),On(T.y01,T.x01),!m):(s.arc(A.cx,A.cy,F,On(A.y01,A.x01),On(A.y11,A.x11),!m),s.arc(0,0,p,On(A.cy+A.y11,A.cx+A.x11),On(T.cy+T.y11,T.cx+T.x11),!m),s.arc(T.cx,T.cy,F,On(T.y11,T.x11),On(T.y01,T.x01),!m))):(s.moveTo(z,C),s.arc(0,0,p,b,v,!m)):s.moveTo(z,C),!(d>xn)||!(w>xn)?s.lineTo(I,Y):D>xn?(A=Qs(I,Y,X,W,d,-D,m),T=Qs(z,C,Z,K,d,-D,m),s.lineTo(A.cx+A.x01,A.cy+A.y01),D<R?s.arc(A.cx,A.cy,D,On(A.y01,A.x01),On(T.y01,T.x01),!m):(s.arc(A.cx,A.cy,D,On(A.y01,A.x01),On(A.y11,A.x11),!m),s.arc(0,0,d,On(A.cy+A.y11,A.cx+A.x11),On(T.cy+T.y11,T.cx+T.x11),m),s.arc(T.cx,T.cy,D,On(T.y11,T.x11),On(T.y01,T.x01),!m))):s.arc(0,0,d,x,O,m)}if(s.closePath(),u)return s=null,u+""||null}return c.centroid=function(){var u=(+t.apply(this,arguments)+ +e.apply(this,arguments))/2,f=(+o.apply(this,arguments)+ +i.apply(this,arguments))/2-da/2;return[Eo(f)*u,mr(f)*u]},c.innerRadius=function(u){return arguments.length?(t=typeof u=="function"?u:ke(+u),c):t},c.outerRadius=function(u){return arguments.length?(e=typeof u=="function"?u:ke(+u),c):e},c.cornerRadius=function(u){return arguments.length?(n=typeof u=="function"?u:ke(+u),c):n},c.padRadius=function(u){return arguments.length?(r=u==null?null:typeof u=="function"?u:ke(+u),c):r},c.startAngle=function(u){return arguments.length?(o=typeof u=="function"?u:ke(+u),c):o},c.endAngle=function(u){return arguments.length?(i=typeof u=="function"?u:ke(+u),c):i},c.padAngle=function(u){return arguments.length?(a=typeof u=="function"?u:ke(+u),c):a},c.context=function(u){return arguments.length?(s=u==null?null:u,c):s},c}var Js=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,r=Object.getOwnPropertySymbols(t);o<r.length;o++)e.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(t,r[o])&&(n[r[o]]=t[r[o]]);return n};function Yh(t,e,n,r,o={}){const{inset:i=0,radius:a=0,insetLeft:s=i,insetTop:l=i,insetRight:c=i,insetBottom:u=i,radiusBottomLeft:f=a,radiusBottomRight:d=a,radiusTopLeft:p=a,radiusTopRight:h=a,minWidth:y=-1/0,maxWidth:g=1/0,minHeight:m=-1/0}=o,b=Js(o,["inset","radius","insetLeft","insetTop","insetRight","insetBottom","radiusBottomLeft","radiusBottomRight","radiusTopLeft","radiusTopRight","minWidth","maxWidth","minHeight"]);if(!be(r)&&!Yp(r)){const E=!!Me(r),[M,,R]=E?Hs(e):e,[D,F]=M,[A,T]=$e(R,M),P=A>0?D:D+A,k=T>0?F:F+T,z=Math.abs(A),C=Math.abs(T),I=P+s,Y=k+l,X=z-(s+c),W=C-(l+u),Z=E?Ds(X,m,1/0):Ds(X,y,g),K=E?Ds(W,y,g):Ds(W,m,1/0),J=E?I:I-(Z-X)/2,rt=E?Y-(K-W)/2:Y-(K-W);return Tt(t.createElement("rect",{})).style("x",J).style("y",rt).style("width",Z).style("height",K).style("radius",[p,h,d,f]).call(jt,b).node()}const{y:v,y1:O}=n,x=r.getCenter(),w=wo(r,e,[v,O]),j=hu().cornerRadius(a).padAngle(i*Math.PI/180);return Tt(t.createElement("path",{})).style("d",j(w)).style("transform",`translate(${x[0]}, ${x[1]})`).style("radius",a).style("inset",i).call(jt,b).node()}const pa=(t,e)=>{const{colorAttribute:n,opacityAttribute:r="fill",first:o=!0,last:i=!0}=t,a=Js(t,["colorAttribute","opacityAttribute","first","last"]),{coordinate:s,document:l}=e;return(c,u,f)=>{const{color:d,radius:p=0}=f,h=Js(f,["color","radius"]),y=h.lineWidth||1,{stroke:g,radius:m=p,radiusTopLeft:b=m,radiusTopRight:v=m,radiusBottomRight:O=m,radiusBottomLeft:x=m,innerRadius:w=0,innerRadiusTopLeft:j=w,innerRadiusTopRight:E=w,innerRadiusBottomRight:M=w,innerRadiusBottomLeft:R=w,lineWidth:D=n==="stroke"||g?y:0,inset:F=0,insetLeft:A=F,insetRight:T=F,insetBottom:P=F,insetTop:k=F,minWidth:z,maxWidth:C,minHeight:I}=a,Y=Js(a,["stroke","radius","radiusTopLeft","radiusTopRight","radiusBottomRight","radiusBottomLeft","innerRadius","innerRadiusTopLeft","innerRadiusTopRight","innerRadiusBottomRight","innerRadiusBottomLeft","lineWidth","inset","insetLeft","insetRight","insetBottom","insetTop","minWidth","maxWidth","minHeight"]),{color:X=d,opacity:W}=u,Z=[o?b:j,o?v:E,i?O:M,i?x:R],K=["radiusTopLeft","radiusTopRight","radiusBottomRight","radiusBottomLeft"];Me(s)&&K.push(K.shift());const J=Object.assign(Object.assign({radius:m},Object.fromEntries(K.map((rt,nt)=>[rt,Z[nt]]))),{inset:F,insetLeft:A,insetRight:T,insetBottom:P,insetTop:k,minWidth:z,maxWidth:C,minHeight:I});return Tt(Yh(l,c,u,s,J)).call(jt,h).style("fill","transparent").style(n,X).style(ru(t),W).style("lineWidth",D).style("stroke",g===void 0?X:g).call(jt,Y).node()}};pa.props={defaultEnterAnimation:"scaleInY",defaultUpdateAnimation:"morphing",defaultExitAnimation:"fadeOut"};const TS={visibility:"visible",opacity:1,fillOpacity:1,strokeOpacity:1};function CS(t,e){var n;return(n=t.style[e])!==null&&n!==void 0?n:TS[e]}function yu(t,e,n,r){t.style[e]=n,r&&t.children.forEach(o=>yu(o,e,n,r))}function gu(t){yu(t,"visibility","hidden",!0)}function tc(t){yu(t,"visibility","visible",!0)}var ha=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,r=Object.getOwnPropertySymbols(t);o<r.length;o++)e.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(t,r[o])&&(n[r[o]]=t[r[o]]);return n};function to(t){return Tt(t).selectAll(`.${zn}`).nodes().filter(e=>!e.__removed__)}function Wh(t,e){return mu(t,e).flatMap(({container:n})=>to(n))}function mu(t,e){return e.filter(n=>n!==t&&n.options.parentKey===t.options.key)}function br(t){return Tt(t).select(`.${Bn}`).node()}function Zh(t){if(t.tagName==="g")return t.getRenderBounds();const e=t.getGeometryBounds(),n=new ht.mN;return n.setFromTransformedAABB(e,t.getWorldTransform()),n}function ci(t,e){const{offsetX:n,offsetY:r}=e,o=Zh(t),{min:[i,a],max:[s,l]}=o,c=n<i||n>s,u=r<a||r>l;return c||u?null:[n-i,r-a]}function bu(t,e){const{offsetX:n,offsetY:r}=e,[o,i,a,s]=LS(t);return[Math.min(a,Math.max(o,n))-o,Math.min(s,Math.max(i,r))-i]}function LS(t){const e=t.getRenderBounds(),{min:[n,r],max:[o,i]}=e;return[n,r,o,i]}function Hh(t){return e=>e.__data__.color}function ec(t){return e=>e.__data__.x}function Ao(t){const e=Array.isArray(t)?t:[t],n=new Map(e.flatMap(r=>Array.from(r.markState.keys()).map(i=>[nc(r.key,i.key),i.data])));return r=>{const{index:o,markKey:i,viewKey:a}=r.__data__;return n.get(nc(a,i))[o]}}function Cr(t,e=(r,o)=>r,n=(r,o,i)=>r.setAttribute(o,i)){const r="__states__",o="__ordinal__",i=u=>{const{[r]:f=[],[o]:d={}}=u,p=f.reduce((h,y)=>Object.assign(Object.assign({},h),t[y]),d);if(Object.keys(p).length!==0){for(const[h,y]of Object.entries(p)){const g=CS(u,h),m=e(y,u);n(u,h,m),h in d||(d[h]=g)}u[o]=d}},a=u=>{u[r]||(u[r]=[])};return{setState:(u,...f)=>{a(u),u[r]=[...f],i(u)},removeState:(u,...f)=>{a(u);for(const d of f){const p=u[r].indexOf(d);p!==-1&&u[r].splice(p,1)}i(u)},hasState:(u,f)=>(a(u),u[r].indexOf(f)!==-1)}}function RS(t){return t===void 0?!0:typeof t!="object"?!1:Object.keys(t).length===0}function nc(t,e){return`${t},${e}`}function li(t,e){const r=(Array.isArray(t)?t:[t]).flatMap(i=>i.marks.map(a=>[nc(i.key,a.key),a.state])),o={};for(const i of e){const[a,s]=Array.isArray(i)?i:[i,{}];o[a]=r.reduce((l,c)=>{const[u,f={}]=c,d=RS(f[a])?s:f[a];for(const[p,h]of Object.entries(d)){const y=l[p],g=(m,b,v,O)=>{const x=nc(O.__data__.viewKey,O.__data__.markKey);return u!==x?y==null?void 0:y(m,b,v,O):typeof h!="function"?h:h(m,b,v,O)};l[p]=g}return l},{})}return o}function ya(t,e){const n=new Map(t.map((o,i)=>[o,i])),r=e?t.map(e):t;return(o,i)=>{if(typeof o!="function")return o;const a=n.get(i),s=e?e(i):i;return o(s,a,r,i)}}function Xh(t){var{link:e=!1,valueof:n=(u,f)=>u,coordinate:r}=t,o=ha(t,["link","valueof","coordinate"]);const i="element-link";if(!e)return[()=>{},()=>{}];const a=u=>u.__data__.points,s=(u,f)=>{const[,d,p]=u,[h,,,y]=f;return[d,h,y,p]};return[u=>{var f;if(u.length<=1)return;const d=ar(u,(p,h)=>{const{x:y}=p.__data__,{x:g}=h.__data__;return y-g});for(let p=1;p<d.length;p++){const h=Gn(),y=d[p-1],g=d[p],[m,b,v,O]=s(a(y),a(g));h.moveTo(...m),h.lineTo(...b),h.lineTo(...v),h.lineTo(...O),h.closePath();const x=yr(o,M=>n(M,y)),{fill:w=y.getAttribute("fill")}=x,j=ha(x,["fill"]),E=new ht.y$({className:i,style:Object.assign({d:h.toString(),fill:w,zIndex:-2},j)});(f=y.link)===null||f===void 0||f.remove(),y.parentNode.appendChild(E),y.link=E}},u=>{var f;(f=u.link)===null||f===void 0||f.remove(),u.link=null}]}function Gh(t,e,n){const r=o=>{const{transform:i}=t.style;return i?`${i} ${o}`:o};if(be(n)){const{points:o}=t.__data__,[i,a]=Me(n)?Hs(o):o,s=n.getCenter(),l=$e(i,s),c=$e(a,s),u=Xn(l),f=mh(l,c),d=u+f/2,p=e*Math.cos(d),h=e*Math.sin(d);return r(`translate(${p}, ${h})`)}return Me(n)?r(`translate(${e}, 0)`):r(`translate(0, ${-e})`)}function Uh(t){var{document:e,background:n,scale:r,coordinate:o,valueof:i}=t,a=ha(t,["document","background","scale","coordinate","valueof"]);const s="element-background";if(!n)return[()=>{},()=>{}];const l=(m,b,v)=>{const O=m.invert(b),x=b+m.getBandWidth(O)/2,w=m.getStep(O)/2,j=w*v;return[x-w+j,x+w-j]},c=(m,b)=>{const{x:v}=r;if(!fa(v))return[0,1];const{__data__:O}=m,{x}=O,[w,j]=l(v,x,b);return[w,j]},u=(m,b)=>{const{y:v}=r;if(!fa(v))return[0,1];const{__data__:O}=m,{y:x}=O,[w,j]=l(v,x,b);return[w,j]},f=(m,b)=>{const{padding:v}=b,[O,x]=c(m,v),[w,j]=u(m,v),E=[[O,w],[x,w],[x,j],[O,j]].map(F=>o.map(F)),{__data__:M}=m,{y:R,y1:D}=M;return Yh(e,E,{y:R,y1:D},o,b)},d=(m,b)=>{const{transform:v="scale(1.2, 1.2)",transformOrigin:O="center center",stroke:x=""}=b,w=ha(b,["transform","transformOrigin","stroke"]),j=Object.assign({transform:v,transformOrigin:O,stroke:x},w),E=m.cloneNode(!0);for(const[M,R]of Object.entries(j))E.style[M]=R;return E},p=()=>{const{x:m,y:b}=r;return[m,b].some(fa)};return[m=>{m.background&&m.background.remove();const b=yr(a,F=>i(F,m)),{fill:v="#CCD6EC",fillOpacity:O=.3,zIndex:x=-2,padding:w=.001,lineWidth:j=0}=b,E=ha(b,["fill","fillOpacity","zIndex","padding","lineWidth"]),M=Object.assign(Object.assign({},E),{fill:v,fillOpacity:O,zIndex:x,padding:w,lineWidth:j}),D=(p()?f:d)(m,M);D.className=s,m.parentNode.parentNode.appendChild(D),m.background=D},m=>{var b;(b=m.background)===null||b===void 0||b.remove(),m.background=null},m=>m.className===s]}function eo(t,e){const r=t.getRootNode().defaultView.getContextService().getDomElement();r!=null&&r.style&&(t.cursor=r.style.cursor,r.style.cursor=e)}function DS(t){eo(t,t.cursor)}function vu(t,e,n){return t.find(r=>Object.entries(e).every(([o,i])=>n(r)[o]===i))}function rc(t,e){return Math.sqrt(Math.pow(t[0]-e[0],2)+Math.pow(t[1]-e[1],2))}function ga(t,e=!1){const n=(0,Nh.Z)(t,r=>!!r).map((r,o)=>[o===0?"M":"L",...r]);return e&&n.push(["Z"]),n}function Vh(t){return t.querySelectorAll(".element")}function IS(t,e,n=0){const r=[["M",...e[1]]],o=rc(t,e[1]),i=rc(t,e[0]);return o===0?r.push(["L",...e[3]],["A",i,i,0,n,1,...e[0]],["Z"]):r.push(["A",o,o,0,n,0,...e[2]],["L",...e[3]],["A",i,i,0,n,1,...e[0]],["Z"]),r}function ma(t,e){if(e(t))return t;let n=t.parent;for(;n&&!e(n);)n=n.parent;return n}const qh=["interval","point","density"];function FS({elementsof:t,root:e,coordinate:n,scale:r,validFindByXMarks:o=qh}){var i,a;let s=t(e);const l=u=>o.includes(u.markType);if(s.find(l)){s=s.filter(l);const u=r.x,f=r.series,d=(a=(i=u==null?void 0:u.getBandWidth)===null||i===void 0?void 0:i.call(u))!==null&&a!==void 0?a:0,p=f?h=>{const y=Math.round(1/f.valueBandWidth);return h.__data__.x+h.__data__.series*d+d/(y*2)}:h=>h.__data__.x+d/2;return s.sort((h,y)=>p(h)-p(y)),h=>{const y=ci(e,h);if(!y)return;const[g]=n.invert(y),m=Tr(p).center,b=m(s,g);return s[b]}}return u=>{const{target:f}=u;return ma(f,d=>d.classList?d.classList.includes("element"):!1)}}function NS(t){return ma(t,e=>e.className==="component")}function zS(t){return ma(t,e=>e.className==="element")}function BS(t){return ma(t,e=>e.className==="label")}function cn(t,e,n,r=o=>!0){return o=>{if(!r(o))return;n.emit(`plot:${t}`,o);const{target:i}=o;if(!i)return;const{className:a}=i;if(a==="plot")return;const s=zS(i),l=NS(i),c=BS(i),u=s||l||c;if(!u)return;const{className:f,markType:d}=u,p=Object.assign(Object.assign({},o),{nativeEvent:!0});f==="element"?(p.data={data:Ot(u,e)},n.emit(`element:${t}`,p),n.emit(`${d}:${t}`,p)):f==="label"?(p.data={data:u.attributes.datum},n.emit(`label:${t}`,p),n.emit(`${a}:${t}`,p)):(n.emit(`component:${t}`,p),n.emit(`${a}:${t}`,p))}}function Kh(){return(t,e,n)=>{const{container:r,view:o}=t,i=cn(Jt.CLICK,o,n,j=>j.detail===1),a=cn(Jt.DBLCLICK,o,n,j=>j.detail===2),s=cn(Jt.POINTER_TAP,o,n),l=cn(Jt.POINTER_DOWN,o,n),c=cn(Jt.POINTER_UP,o,n),u=cn(Jt.POINTER_OVER,o,n),f=cn(Jt.POINTER_OUT,o,n),d=cn(Jt.POINTER_MOVE,o,n),p=cn(Jt.POINTER_ENTER,o,n),h=cn(Jt.POINTER_LEAVE,o,n),y=cn(Jt.POINTER_UPOUTSIDE,o,n),g=cn(Jt.DRAG_START,o,n),m=cn(Jt.DRAG,o,n),b=cn(Jt.DRAG_END,o,n),v=cn(Jt.DRAG_ENTER,o,n),O=cn(Jt.DRAG_LEAVE,o,n),x=cn(Jt.DRAG_OVER,o,n),w=cn(Jt.DROP,o,n);return r.addEventListener("click",i),r.addEventListener("click",a),r.addEventListener("pointertap",s),r.addEventListener("pointerdown",l),r.addEventListener("pointerup",c),r.addEventListener("pointerover",u),r.addEventListener("pointerout",f),r.addEventListener("pointermove",d),r.addEventListener("pointerenter",p),r.addEventListener("pointerleave",h),r.addEventListener("pointerupoutside",y),r.addEventListener("dragstart",g),r.addEventListener("drag",m),r.addEventListener("dragend",b),r.addEventListener("dragenter",v),r.addEventListener("dragleave",O),r.addEventListener("dragover",x),r.addEventListener("drop",w),()=>{r.removeEventListener("click",i),r.removeEventListener("click",a),r.removeEventListener("pointertap",s),r.removeEventListener("pointerdown",l),r.removeEventListener("pointerup",c),r.removeEventListener("pointerover",u),r.removeEventListener("pointerout",f),r.removeEventListener("pointermove",d),r.removeEventListener("pointerenter",p),r.removeEventListener("pointerleave",h),r.removeEventListener("pointerupoutside",y),r.removeEventListener("dragstart",g),r.removeEventListener("drag",m),r.removeEventListener("dragend",b),r.removeEventListener("dragenter",v),r.removeEventListener("dragleave",O),r.removeEventListener("dragover",x),r.removeEventListener("drop",w)}}}Kh.props={reapplyWhenUpdate:!0};function $S(){return{"component.axisRadar":nh,"component.axisLinear":Kr,"component.axisArc":eh,"component.legendContinuousBlock":ph,"component.legendContinuousBlockSize":hh,"component.legendContinuousSize":Jl,"interaction.event":Kh,"composition.mark":yh,"composition.view":gh,"shape.label.label":Fh}}var YS=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,r=Object.getOwnPropertySymbols(t);o<r.length;o++)e.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(t,r[o])&&(n[r[o]]=t[r[o]]);return n};function Pe(t,e){const n=Object.assign(Object.assign({},$S()),e),r=i=>{if(typeof i!="string")return i;const a=`${t}.${i}`;return n[a]||kt(`Unknown Component: ${a}`)};return[(i,a)=>{const{type:s}=i,l=YS(i,["type"]);s||kt("Plot type is required!");const c=r(s);return c==null?void 0:c(l,a)},r]}function Qh(t){const{canvas:e,group:n}=t;return(e==null?void 0:e.document)||(n==null?void 0:n.ownerDocument)||kt("Cannot find library document")}var Jh=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,r=Object.getOwnPropertySymbols(t);o<r.length;o++)e.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(t,r[o])&&(n[r[o]]=t[r[o]]);return n};function WS(t,e,n){const[r]=Pe("coordinate",n),{innerHeight:o,innerWidth:i,insetLeft:a,insetTop:s,insetRight:l,insetBottom:c}=t,{coordinates:u=[]}=e,f=VS(u),d=f[0].type==="cartesian3D",p=Object.assign(Object.assign({},t),{x:a,y:s,width:i-a-l,height:o-c-s,transformations:f.flatMap(r)});return d?new $p.Coordinate3D(p):new $p.Coordinate(p)}function t0(t,e){const{coordinate:n={},coordinates:r}=t,o=Jh(t,["coordinate","coordinates"]);if(r)return t;const{type:i,transform:a=[]}=n,s=Jh(n,["type","transform"]);if(!i)return Object.assign(Object.assign({},o),{coordinates:a});const[,l]=Pe("coordinate",e),{transform:c=!1}=l(i).props||{};if(c)throw new Error(`Unknown coordinate: ${i}.`);return Object.assign(Object.assign({},o),{coordinates:[Object.assign({type:i},s),...a]})}function sr(t,e){return t.filter(n=>n.type===e)}function Mo(t){return sr(t,"polar").length>0}function ZS(t){return sr(t,"helix").length>0}function ui(t){return sr(t,"transpose").length%2===1}function HS(t){return sr(t,"parallel").length>0}function e0(t){return sr(t,"theta").length>0}function XS(t){return sr(t,"reflect").length>0}function ba(t){return sr(t,"radial").length>0}function GS(t){return sr(t,"radar").length>0}function US(t){return sr(t,"reflectY").length>0}function VS(t){return t.find(e=>e.type==="cartesian"||e.type==="cartesian3D")?t:[...t,{type:"cartesian"}]}var fi=Q(43552);function Vt(t){for(var e=t.length/6|0,n=new Array(e),r=0;r<e;)n[r]="#"+t.slice(r*6,++r*6);return n}var qS=Vt("1f77b4ff7f0e2ca02cd627289467bd8c564be377c27f7f7fbcbd2217becf"),KS=Vt("7fc97fbeaed4fdc086ffff99386cb0f0027fbf5b17666666"),QS=Vt("1b9e77d95f027570b3e7298a66a61ee6ab02a6761d666666"),JS=Vt("4269d0efb118ff725c6cc5b03ca951ff8ab7a463f297bbf59c6b4e9498a0"),tj=Vt("a6cee31f78b4b2df8a33a02cfb9a99e31a1cfdbf6fff7f00cab2d66a3d9affff99b15928"),ej=Vt("fbb4aeb3cde3ccebc5decbe4fed9a6ffffcce5d8bdfddaecf2f2f2"),nj=Vt("b3e2cdfdcdaccbd5e8f4cae4e6f5c9fff2aef1e2cccccccc"),rj=Vt("e41a1c377eb84daf4a984ea3ff7f00ffff33a65628f781bf999999"),oj=Vt("66c2a5fc8d628da0cbe78ac3a6d854ffd92fe5c494b3b3b3"),ij=Vt("8dd3c7ffffb3bebadafb807280b1d3fdb462b3de69fccde5d9d9d9bc80bdccebc5ffed6f"),aj=Vt("4e79a7f28e2ce1575976b7b259a14fedc949af7aa1ff9da79c755fbab0ab");function oc(t,e,n){t.prototype=e.prototype=n,n.constructor=t}function Ou(t,e){var n=Object.create(t.prototype);for(var r in e)n[r]=e[r];return n}function di(){}var ko=.7,pi=1/ko,hi="\\s*([+-]?\\d+)\\s*",va="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",vr="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",sj=/^#([0-9a-f]{3,8})$/,cj=new RegExp("^rgb\\(".concat(hi,",").concat(hi,",").concat(hi,"\\)$")),lj=new RegExp("^rgb\\(".concat(vr,",").concat(vr,",").concat(vr,"\\)$")),uj=new RegExp("^rgba\\(".concat(hi,",").concat(hi,",").concat(hi,",").concat(va,"\\)$")),fj=new RegExp("^rgba\\(".concat(vr,",").concat(vr,",").concat(vr,",").concat(va,"\\)$")),dj=new RegExp("^hsl\\(".concat(va,",").concat(vr,",").concat(vr,"\\)$")),pj=new RegExp("^hsla\\(".concat(va,",").concat(vr,",").concat(vr,",").concat(va,"\\)$")),n0={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};oc(di,xu,{copy:function(e){return Object.assign(new this.constructor,this,e)},displayable:function(){return this.rgb().displayable()},hex:r0,formatHex:r0,formatHex8:hj,formatHsl:yj,formatRgb:o0,toString:o0});function r0(){return this.rgb().formatHex()}function hj(){return this.rgb().formatHex8()}function yj(){return u0(this).formatHsl()}function o0(){return this.rgb().formatRgb()}function xu(t){var e,n;return t=(t+"").trim().toLowerCase(),(e=sj.exec(t))?(n=e[1].length,e=parseInt(e[1],16),n===6?i0(e):n===3?new _n(e>>8&15|e>>4&240,e>>4&15|e&240,(e&15)<<4|e&15,1):n===8?ic(e>>24&255,e>>16&255,e>>8&255,(e&255)/255):n===4?ic(e>>12&15|e>>8&240,e>>8&15|e>>4&240,e>>4&15|e&240,((e&15)<<4|e&15)/255):null):(e=cj.exec(t))?new _n(e[1],e[2],e[3],1):(e=lj.exec(t))?new _n(e[1]*255/100,e[2]*255/100,e[3]*255/100,1):(e=uj.exec(t))?ic(e[1],e[2],e[3],e[4]):(e=fj.exec(t))?ic(e[1]*255/100,e[2]*255/100,e[3]*255/100,e[4]):(e=dj.exec(t))?l0(e[1],e[2]/100,e[3]/100,1):(e=pj.exec(t))?l0(e[1],e[2]/100,e[3]/100,e[4]):n0.hasOwnProperty(t)?i0(n0[t]):t==="transparent"?new _n(NaN,NaN,NaN,0):null}function i0(t){return new _n(t>>16&255,t>>8&255,t&255,1)}function ic(t,e,n,r){return r<=0&&(t=e=n=NaN),new _n(t,e,n,r)}function a0(t){return t instanceof di||(t=xu(t)),t?(t=t.rgb(),new _n(t.r,t.g,t.b,t.opacity)):new _n}function Oa(t,e,n,r){return arguments.length===1?a0(t):new _n(t,e,n,r==null?1:r)}function _n(t,e,n,r){this.r=+t,this.g=+e,this.b=+n,this.opacity=+r}oc(_n,Oa,Ou(di,{brighter:function(e){return e=e==null?pi:Math.pow(pi,e),new _n(this.r*e,this.g*e,this.b*e,this.opacity)},darker:function(e){return e=e==null?ko:Math.pow(ko,e),new _n(this.r*e,this.g*e,this.b*e,this.opacity)},rgb:function(){return this},clamp:function(){return new _n(Po(this.r),Po(this.g),Po(this.b),ac(this.opacity))},displayable:function(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:s0,formatHex:s0,formatHex8:gj,formatRgb:c0,toString:c0}));function s0(){return"#".concat(To(this.r)).concat(To(this.g)).concat(To(this.b))}function gj(){return"#".concat(To(this.r)).concat(To(this.g)).concat(To(this.b)).concat(To((isNaN(this.opacity)?1:this.opacity)*255))}function c0(){var t=ac(this.opacity);return"".concat(t===1?"rgb(":"rgba(").concat(Po(this.r),", ").concat(Po(this.g),", ").concat(Po(this.b)).concat(t===1?")":", ".concat(t,")"))}function ac(t){return isNaN(t)?1:Math.max(0,Math.min(1,t))}function Po(t){return Math.max(0,Math.min(255,Math.round(t)||0))}function To(t){return t=Po(t),(t<16?"0":"")+t.toString(16)}function l0(t,e,n,r){return r<=0?t=e=n=NaN:n<=0||n>=1?t=e=NaN:e<=0&&(t=NaN),new cr(t,e,n,r)}function u0(t){if(t instanceof cr)return new cr(t.h,t.s,t.l,t.opacity);if(t instanceof di||(t=xu(t)),!t)return new cr;if(t instanceof cr)return t;t=t.rgb();var e=t.r/255,n=t.g/255,r=t.b/255,o=Math.min(e,n,r),i=Math.max(e,n,r),a=NaN,s=i-o,l=(i+o)/2;return s?(e===i?a=(n-r)/s+(n<r)*6:n===i?a=(r-e)/s+2:a=(e-n)/s+4,s/=l<.5?i+o:2-i-o,a*=60):s=l>0&&l<1?0:a,new cr(a,s,l,t.opacity)}function mj(t,e,n,r){return arguments.length===1?u0(t):new cr(t,e,n,r==null?1:r)}function cr(t,e,n,r){this.h=+t,this.s=+e,this.l=+n,this.opacity=+r}oc(cr,mj,Ou(di,{brighter:function(e){return e=e==null?pi:Math.pow(pi,e),new cr(this.h,this.s,this.l*e,this.opacity)},darker:function(e){return e=e==null?ko:Math.pow(ko,e),new cr(this.h,this.s,this.l*e,this.opacity)},rgb:function(){var e=this.h%360+(this.h<0)*360,n=isNaN(e)||isNaN(this.s)?0:this.s,r=this.l,o=r+(r<.5?r:1-r)*n,i=2*r-o;return new _n(_u(e>=240?e-240:e+120,i,o),_u(e,i,o),_u(e<120?e+240:e-120,i,o),this.opacity)},clamp:function(){return new cr(f0(this.h),sc(this.s),sc(this.l),ac(this.opacity))},displayable:function(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl:function(){var e=ac(this.opacity);return"".concat(e===1?"hsl(":"hsla(").concat(f0(this.h),", ").concat(sc(this.s)*100,"%, ").concat(sc(this.l)*100,"%").concat(e===1?")":", ".concat(e,")"))}}));function f0(t){return t=(t||0)%360,t<0?t+360:t}function sc(t){return Math.max(0,Math.min(1,t||0))}function _u(t,e,n){return(t<60?e+(n-e)*t/60:t<180?n:t<240?e+(n-e)*(240-t)/60:e)*255}function d0(t,e,n,r,o){var i=t*t,a=i*t;return((1-3*t+3*i-a)*e+(4-6*i+3*a)*n+(1+3*t+3*i-3*a)*r+a*o)/6}function bj(t){var e=t.length-1;return function(n){var r=n<=0?n=0:n>=1?(n=1,e-1):Math.floor(n*e),o=t[r],i=t[r+1],a=r>0?t[r-1]:2*o-i,s=r<e-1?t[r+2]:2*i-o;return d0((n-r/e)*e,a,o,i,s)}}function vj(t){var e=t.length;return function(n){var r=Math.floor(((n%=1)<0?++n:n)*e),o=t[(r+e-1)%e],i=t[r%e],a=t[(r+1)%e],s=t[(r+2)%e];return d0((n-r/e)*e,o,i,a,s)}}var wu=function(t){return function(){return t}};function p0(t,e){return function(n){return t+n*e}}function Oj(t,e,n){return t=Math.pow(t,n),e=Math.pow(e,n)-t,n=1/n,function(r){return Math.pow(t+r*e,n)}}function xj(t,e){var n=e-t;return n?p0(t,n>180||n<-180?n-360*Math.round(n/360):n):wu(isNaN(t)?e:t)}function _j(t){return(t=+t)==1?yi:function(e,n){return n-e?Oj(e,n,t):wu(isNaN(e)?n:e)}}function yi(t,e){var n=e-t;return n?p0(t,n):wu(isNaN(t)?e:t)}var rD=function t(e){var n=_j(e);function r(o,i){var a=n((o=Oa(o)).r,(i=Oa(i)).r),s=n(o.g,i.g),l=n(o.b,i.b),c=yi(o.opacity,i.opacity);return function(u){return o.r=a(u),o.g=s(u),o.b=l(u),o.opacity=c(u),o+""}}return r.gamma=t,r}(1);function h0(t){return function(e){var n=e.length,r=new Array(n),o=new Array(n),i=new Array(n),a,s;for(a=0;a<n;++a)s=Oa(e[a]),r[a]=s.r||0,o[a]=s.g||0,i[a]=s.b||0;return r=t(r),o=t(o),i=t(i),s.opacity=1,function(l){return s.r=r(l),s.g=o(l),s.b=i(l),s+""}}}var wj=h0(bj),oD=h0(vj),Ee=t=>wj(t[t.length-1]),y0=new Array(3).concat("d8b365f5f5f55ab4ac","a6611adfc27d80cdc1018571","a6611adfc27df5f5f580cdc1018571","8c510ad8b365f6e8c3c7eae55ab4ac01665e","8c510ad8b365f6e8c3f5f5f5c7eae55ab4ac01665e","8c510abf812ddfc27df6e8c3c7eae580cdc135978f01665e","8c510abf812ddfc27df6e8c3f5f5f5c7eae580cdc135978f01665e","5430058c510abf812ddfc27df6e8c3c7eae580cdc135978f01665e003c30","5430058c510abf812ddfc27df6e8c3f5f5f5c7eae580cdc135978f01665e003c30").map(Vt),Sj=Ee(y0),g0=new Array(3).concat("af8dc3f7f7f77fbf7b","7b3294c2a5cfa6dba0008837","7b3294c2a5cff7f7f7a6dba0008837","762a83af8dc3e7d4e8d9f0d37fbf7b1b7837","762a83af8dc3e7d4e8f7f7f7d9f0d37fbf7b1b7837","762a839970abc2a5cfe7d4e8d9f0d3a6dba05aae611b7837","762a839970abc2a5cfe7d4e8f7f7f7d9f0d3a6dba05aae611b7837","40004b762a839970abc2a5cfe7d4e8d9f0d3a6dba05aae611b783700441b","40004b762a839970abc2a5cfe7d4e8f7f7f7d9f0d3a6dba05aae611b783700441b").map(Vt),jj=Ee(g0),m0=new Array(3).concat("e9a3c9f7f7f7a1d76a","d01c8bf1b6dab8e1864dac26","d01c8bf1b6daf7f7f7b8e1864dac26","c51b7de9a3c9fde0efe6f5d0a1d76a4d9221","c51b7de9a3c9fde0eff7f7f7e6f5d0a1d76a4d9221","c51b7dde77aef1b6dafde0efe6f5d0b8e1867fbc414d9221","c51b7dde77aef1b6dafde0eff7f7f7e6f5d0b8e1867fbc414d9221","8e0152c51b7dde77aef1b6dafde0efe6f5d0b8e1867fbc414d9221276419","8e0152c51b7dde77aef1b6dafde0eff7f7f7e6f5d0b8e1867fbc414d9221276419").map(Vt),Ej=Ee(m0),b0=new Array(3).concat("998ec3f7f7f7f1a340","5e3c99b2abd2fdb863e66101","5e3c99b2abd2f7f7f7fdb863e66101","542788998ec3d8daebfee0b6f1a340b35806","542788998ec3d8daebf7f7f7fee0b6f1a340b35806","5427888073acb2abd2d8daebfee0b6fdb863e08214b35806","5427888073acb2abd2d8daebf7f7f7fee0b6fdb863e08214b35806","2d004b5427888073acb2abd2d8daebfee0b6fdb863e08214b358067f3b08","2d004b5427888073acb2abd2d8daebf7f7f7fee0b6fdb863e08214b358067f3b08").map(Vt),Aj=Ee(b0),v0=new Array(3).concat("ef8a62f7f7f767a9cf","ca0020f4a58292c5de0571b0","ca0020f4a582f7f7f792c5de0571b0","b2182bef8a62fddbc7d1e5f067a9cf2166ac","b2182bef8a62fddbc7f7f7f7d1e5f067a9cf2166ac","b2182bd6604df4a582fddbc7d1e5f092c5de4393c32166ac","b2182bd6604df4a582fddbc7f7f7f7d1e5f092c5de4393c32166ac","67001fb2182bd6604df4a582fddbc7d1e5f092c5de4393c32166ac053061","67001fb2182bd6604df4a582fddbc7f7f7f7d1e5f092c5de4393c32166ac053061").map(Vt),Mj=Ee(v0),O0=new Array(3).concat("ef8a62ffffff999999","ca0020f4a582bababa404040","ca0020f4a582ffffffbababa404040","b2182bef8a62fddbc7e0e0e09999994d4d4d","b2182bef8a62fddbc7ffffffe0e0e09999994d4d4d","b2182bd6604df4a582fddbc7e0e0e0bababa8787874d4d4d","b2182bd6604df4a582fddbc7ffffffe0e0e0bababa8787874d4d4d","67001fb2182bd6604df4a582fddbc7e0e0e0bababa8787874d4d4d1a1a1a","67001fb2182bd6604df4a582fddbc7ffffffe0e0e0bababa8787874d4d4d1a1a1a").map(Vt),kj=Ee(O0),x0=new Array(3).concat("fc8d59ffffbf91bfdb","d7191cfdae61abd9e92c7bb6","d7191cfdae61ffffbfabd9e92c7bb6","d73027fc8d59fee090e0f3f891bfdb4575b4","d73027fc8d59fee090ffffbfe0f3f891bfdb4575b4","d73027f46d43fdae61fee090e0f3f8abd9e974add14575b4","d73027f46d43fdae61fee090ffffbfe0f3f8abd9e974add14575b4","a50026d73027f46d43fdae61fee090e0f3f8abd9e974add14575b4313695","a50026d73027f46d43fdae61fee090ffffbfe0f3f8abd9e974add14575b4313695").map(Vt),Pj=Ee(x0),_0=new Array(3).concat("fc8d59ffffbf91cf60","d7191cfdae61a6d96a1a9641","d7191cfdae61ffffbfa6d96a1a9641","d73027fc8d59fee08bd9ef8b91cf601a9850","d73027fc8d59fee08bffffbfd9ef8b91cf601a9850","d73027f46d43fdae61fee08bd9ef8ba6d96a66bd631a9850","d73027f46d43fdae61fee08bffffbfd9ef8ba6d96a66bd631a9850","a50026d73027f46d43fdae61fee08bd9ef8ba6d96a66bd631a9850006837","a50026d73027f46d43fdae61fee08bffffbfd9ef8ba6d96a66bd631a9850006837").map(Vt),Tj=Ee(_0),w0=new Array(3).concat("fc8d59ffffbf99d594","d7191cfdae61abdda42b83ba","d7191cfdae61ffffbfabdda42b83ba","d53e4ffc8d59fee08be6f59899d5943288bd","d53e4ffc8d59fee08bffffbfe6f59899d5943288bd","d53e4ff46d43fdae61fee08be6f598abdda466c2a53288bd","d53e4ff46d43fdae61fee08bffffbfe6f598abdda466c2a53288bd","9e0142d53e4ff46d43fdae61fee08be6f598abdda466c2a53288bd5e4fa2","9e0142d53e4ff46d43fdae61fee08bffffbfe6f598abdda466c2a53288bd5e4fa2").map(Vt),Cj=Ee(w0),S0=new Array(3).concat("e5f5f999d8c92ca25f","edf8fbb2e2e266c2a4238b45","edf8fbb2e2e266c2a42ca25f006d2c","edf8fbccece699d8c966c2a42ca25f006d2c","edf8fbccece699d8c966c2a441ae76238b45005824","f7fcfde5f5f9ccece699d8c966c2a441ae76238b45005824","f7fcfde5f5f9ccece699d8c966c2a441ae76238b45006d2c00441b").map(Vt),Lj=Ee(S0),j0=new Array(3).concat("e0ecf49ebcda8856a7","edf8fbb3cde38c96c688419d","edf8fbb3cde38c96c68856a7810f7c","edf8fbbfd3e69ebcda8c96c68856a7810f7c","edf8fbbfd3e69ebcda8c96c68c6bb188419d6e016b","f7fcfde0ecf4bfd3e69ebcda8c96c68c6bb188419d6e016b","f7fcfde0ecf4bfd3e69ebcda8c96c68c6bb188419d810f7c4d004b").map(Vt),Rj=Ee(j0),E0=new Array(3).concat("e0f3dba8ddb543a2ca","f0f9e8bae4bc7bccc42b8cbe","f0f9e8bae4bc7bccc443a2ca0868ac","f0f9e8ccebc5a8ddb57bccc443a2ca0868ac","f0f9e8ccebc5a8ddb57bccc44eb3d32b8cbe08589e","f7fcf0e0f3dbccebc5a8ddb57bccc44eb3d32b8cbe08589e","f7fcf0e0f3dbccebc5a8ddb57bccc44eb3d32b8cbe0868ac084081").map(Vt),Dj=Ee(E0),A0=new Array(3).concat("fee8c8fdbb84e34a33","fef0d9fdcc8afc8d59d7301f","fef0d9fdcc8afc8d59e34a33b30000","fef0d9fdd49efdbb84fc8d59e34a33b30000","fef0d9fdd49efdbb84fc8d59ef6548d7301f990000","fff7ecfee8c8fdd49efdbb84fc8d59ef6548d7301f990000","fff7ecfee8c8fdd49efdbb84fc8d59ef6548d7301fb300007f0000").map(Vt),Ij=Ee(A0),M0=new Array(3).concat("ece2f0a6bddb1c9099","f6eff7bdc9e167a9cf02818a","f6eff7bdc9e167a9cf1c9099016c59","f6eff7d0d1e6a6bddb67a9cf1c9099016c59","f6eff7d0d1e6a6bddb67a9cf3690c002818a016450","fff7fbece2f0d0d1e6a6bddb67a9cf3690c002818a016450","fff7fbece2f0d0d1e6a6bddb67a9cf3690c002818a016c59014636").map(Vt),Fj=Ee(M0),k0=new Array(3).concat("ece7f2a6bddb2b8cbe","f1eef6bdc9e174a9cf0570b0","f1eef6bdc9e174a9cf2b8cbe045a8d","f1eef6d0d1e6a6bddb74a9cf2b8cbe045a8d","f1eef6d0d1e6a6bddb74a9cf3690c00570b0034e7b","fff7fbece7f2d0d1e6a6bddb74a9cf3690c00570b0034e7b","fff7fbece7f2d0d1e6a6bddb74a9cf3690c00570b0045a8d023858").map(Vt),Nj=Ee(k0),P0=new Array(3).concat("e7e1efc994c7dd1c77","f1eef6d7b5d8df65b0ce1256","f1eef6d7b5d8df65b0dd1c77980043","f1eef6d4b9dac994c7df65b0dd1c77980043","f1eef6d4b9dac994c7df65b0e7298ace125691003f","f7f4f9e7e1efd4b9dac994c7df65b0e7298ace125691003f","f7f4f9e7e1efd4b9dac994c7df65b0e7298ace125698004367001f").map(Vt),zj=Ee(P0),T0=new Array(3).concat("fde0ddfa9fb5c51b8a","feebe2fbb4b9f768a1ae017e","feebe2fbb4b9f768a1c51b8a7a0177","feebe2fcc5c0fa9fb5f768a1c51b8a7a0177","feebe2fcc5c0fa9fb5f768a1dd3497ae017e7a0177","fff7f3fde0ddfcc5c0fa9fb5f768a1dd3497ae017e7a0177","fff7f3fde0ddfcc5c0fa9fb5f768a1dd3497ae017e7a017749006a").map(Vt),Bj=Ee(T0),C0=new Array(3).concat("edf8b17fcdbb2c7fb8","ffffcca1dab441b6c4225ea8","ffffcca1dab441b6c42c7fb8253494","ffffccc7e9b47fcdbb41b6c42c7fb8253494","ffffccc7e9b47fcdbb41b6c41d91c0225ea80c2c84","ffffd9edf8b1c7e9b47fcdbb41b6c41d91c0225ea80c2c84","ffffd9edf8b1c7e9b47fcdbb41b6c41d91c0225ea8253494081d58").map(Vt),$j=Ee(C0),L0=new Array(3).concat("f7fcb9addd8e31a354","ffffccc2e69978c679238443","ffffccc2e69978c67931a354006837","ffffccd9f0a3addd8e78c67931a354006837","ffffccd9f0a3addd8e78c67941ab5d238443005a32","ffffe5f7fcb9d9f0a3addd8e78c67941ab5d238443005a32","ffffe5f7fcb9d9f0a3addd8e78c67941ab5d238443006837004529").map(Vt),Yj=Ee(L0),R0=new Array(3).concat("fff7bcfec44fd95f0e","ffffd4fed98efe9929cc4c02","ffffd4fed98efe9929d95f0e993404","ffffd4fee391fec44ffe9929d95f0e993404","ffffd4fee391fec44ffe9929ec7014cc4c028c2d04","ffffe5fff7bcfee391fec44ffe9929ec7014cc4c028c2d04","ffffe5fff7bcfee391fec44ffe9929ec7014cc4c02993404662506").map(Vt),Wj=Ee(R0),D0=new Array(3).concat("ffeda0feb24cf03b20","ffffb2fecc5cfd8d3ce31a1c","ffffb2fecc5cfd8d3cf03b20bd0026","ffffb2fed976feb24cfd8d3cf03b20bd0026","ffffb2fed976feb24cfd8d3cfc4e2ae31a1cb10026","ffffccffeda0fed976feb24cfd8d3cfc4e2ae31a1cb10026","ffffccffeda0fed976feb24cfd8d3cfc4e2ae31a1cbd0026800026").map(Vt),Zj=Ee(D0),I0=new Array(3).concat("deebf79ecae13182bd","eff3ffbdd7e76baed62171b5","eff3ffbdd7e76baed63182bd08519c","eff3ffc6dbef9ecae16baed63182bd08519c","eff3ffc6dbef9ecae16baed64292c62171b5084594","f7fbffdeebf7c6dbef9ecae16baed64292c62171b5084594","f7fbffdeebf7c6dbef9ecae16baed64292c62171b508519c08306b").map(Vt),Hj=Ee(I0),F0=new Array(3).concat("e5f5e0a1d99b31a354","edf8e9bae4b374c476238b45","edf8e9bae4b374c47631a354006d2c","edf8e9c7e9c0a1d99b74c47631a354006d2c","edf8e9c7e9c0a1d99b74c47641ab5d238b45005a32","f7fcf5e5f5e0c7e9c0a1d99b74c47641ab5d238b45005a32","f7fcf5e5f5e0c7e9c0a1d99b74c47641ab5d238b45006d2c00441b").map(Vt),Xj=Ee(F0),N0=new Array(3).concat("f0f0f0bdbdbd636363","f7f7f7cccccc969696525252","f7f7f7cccccc969696636363252525","f7f7f7d9d9d9bdbdbd969696636363252525","f7f7f7d9d9d9bdbdbd969696737373525252252525","fffffff0f0f0d9d9d9bdbdbd969696737373525252252525","fffffff0f0f0d9d9d9bdbdbd969696737373525252252525000000").map(Vt),Gj=Ee(N0),z0=new Array(3).concat("efedf5bcbddc756bb1","f2f0f7cbc9e29e9ac86a51a3","f2f0f7cbc9e29e9ac8756bb154278f","f2f0f7dadaebbcbddc9e9ac8756bb154278f","f2f0f7dadaebbcbddc9e9ac8807dba6a51a34a1486","fcfbfdefedf5dadaebbcbddc9e9ac8807dba6a51a34a1486","fcfbfdefedf5dadaebbcbddc9e9ac8807dba6a51a354278f3f007d").map(Vt),Uj=Ee(z0),B0=new Array(3).concat("fee0d2fc9272de2d26","fee5d9fcae91fb6a4acb181d","fee5d9fcae91fb6a4ade2d26a50f15","fee5d9fcbba1fc9272fb6a4ade2d26a50f15","fee5d9fcbba1fc9272fb6a4aef3b2ccb181d99000d","fff5f0fee0d2fcbba1fc9272fb6a4aef3b2ccb181d99000d","fff5f0fee0d2fcbba1fc9272fb6a4aef3b2ccb181da50f1567000d").map(Vt),Vj=Ee(B0),$0=new Array(3).concat("fee6cefdae6be6550d","feeddefdbe85fd8d3cd94701","feeddefdbe85fd8d3ce6550da63603","feeddefdd0a2fdae6bfd8d3ce6550da63603","feeddefdd0a2fdae6bfd8d3cf16913d948018c2d04","fff5ebfee6cefdd0a2fdae6bfd8d3cf16913d948018c2d04","fff5ebfee6cefdd0a2fdae6bfd8d3cf16913d94801a636037f2704").map(Vt),qj=Ee($0);function Kj(t){return t=Math.max(0,Math.min(1,t)),"rgb("+Math.max(0,Math.min(255,Math.round(-4.54-t*(35.34-t*(2381.73-t*(6402.7-t*(7024.72-t*2710.57)))))))+", "+Math.max(0,Math.min(255,Math.round(32.49+t*(170.73+t*(52.82-t*(131.46-t*(176.58-t*67.37)))))))+", "+Math.max(0,Math.min(255,Math.round(81.24+t*(442.36-t*(2482.43-t*(6167.24-t*(6614.94-t*2475.67)))))))+")"}var Qj=Math.PI/180,Jj=180/Math.PI,Y0=-.14861,Su=1.78277,ju=-.29227,cc=-.90649,xa=1.97294,W0=xa*cc,Z0=xa*Su,H0=Su*ju-cc*Y0;function t5(t){if(t instanceof Co)return new Co(t.h,t.s,t.l,t.opacity);t instanceof _n||(t=a0(t));var e=t.r/255,n=t.g/255,r=t.b/255,o=(H0*r+W0*e-Z0*n)/(H0+W0-Z0),i=r-o,a=(xa*(n-o)-ju*i)/cc,s=Math.sqrt(a*a+i*i)/(xa*o*(1-o)),l=s?Math.atan2(a,i)*Jj-120:NaN;return new Co(l<0?l+360:l,s,o,t.opacity)}function Or(t,e,n,r){return arguments.length===1?t5(t):new Co(t,e,n,r==null?1:r)}function Co(t,e,n,r){this.h=+t,this.s=+e,this.l=+n,this.opacity=+r}oc(Co,Or,Ou(di,{brighter:function(e){return e=e==null?pi:Math.pow(pi,e),new Co(this.h,this.s,this.l*e,this.opacity)},darker:function(e){return e=e==null?ko:Math.pow(ko,e),new Co(this.h,this.s,this.l*e,this.opacity)},rgb:function(){var e=isNaN(this.h)?0:(this.h+120)*Qj,n=+this.l,r=isNaN(this.s)?0:this.s*n*(1-n),o=Math.cos(e),i=Math.sin(e);return new _n(255*(n+r*(Y0*o+Su*i)),255*(n+r*(ju*o+cc*i)),255*(n+r*(xa*o)),this.opacity)}}));function X0(t){return function e(n){n=+n;function r(o,i){var a=t((o=Or(o)).h,(i=Or(i)).h),s=yi(o.s,i.s),l=yi(o.l,i.l),c=yi(o.opacity,i.opacity);return function(u){return o.h=a(u),o.s=s(u),o.l=l(Math.pow(u,n)),o.opacity=c(u),o+""}}return r.gamma=e,r}(1)}var iD=X0(xj),Eu=X0(yi),e5=Eu(Or(300,.5,0),Or(-240,.5,1)),n5=Eu(Or(-100,.75,.35),Or(80,1.5,.8)),r5=Eu(Or(260,.75,.35),Or(80,1.5,.8)),lc=Or();function o5(t){(t<0||t>1)&&(t-=Math.floor(t));var e=Math.abs(t-.5);return lc.h=360*t-100,lc.s=1.5-1.5*e,lc.l=.8-.9*e,lc+""}var uc=Oa(),i5=Math.PI/3,a5=Math.PI*2/3;function s5(t){var e;return t=(.5-t)*Math.PI,uc.r=255*(e=Math.sin(t))*e,uc.g=255*(e=Math.sin(t+i5))*e,uc.b=255*(e=Math.sin(t+a5))*e,uc+""}function c5(t){return t=Math.max(0,Math.min(1,t)),"rgb("+Math.max(0,Math.min(255,Math.round(34.61+t*(1172.33-t*(10793.56-t*(33300.12-t*(38394.49-t*14825.05)))))))+", "+Math.max(0,Math.min(255,Math.round(23.31+t*(557.33+t*(1225.33-t*(3574.96-t*(1073.77+t*707.56)))))))+", "+Math.max(0,Math.min(255,Math.round(27.2+t*(3211.1-t*(15327.97-t*(27814-t*(22569.18-t*6838.66)))))))+")"}function fc(t){var e=t.length;return function(n){return t[Math.max(0,Math.min(e-1,Math.floor(n*e)))]}}var l5=fc(Vt("44015444025645045745055946075a46085c460a5d460b5e470d60470e6147106347116447136548146748166848176948186a481a6c481b6d481c6e481d6f481f70482071482173482374482475482576482677482878482979472a7a472c7a472d7b472e7c472f7d46307e46327e46337f463480453581453781453882443983443a83443b84433d84433e85423f854240864241864142874144874045884046883f47883f48893e49893e4a893e4c8a3d4d8a3d4e8a3c4f8a3c508b3b518b3b528b3a538b3a548c39558c39568c38588c38598c375a8c375b8d365c8d365d8d355e8d355f8d34608d34618d33628d33638d32648e32658e31668e31678e31688e30698e306a8e2f6b8e2f6c8e2e6d8e2e6e8e2e6f8e2d708e2d718e2c718e2c728e2c738e2b748e2b758e2a768e2a778e2a788e29798e297a8e297b8e287c8e287d8e277e8e277f8e27808e26818e26828e26828e25838e25848e25858e24868e24878e23888e23898e238a8d228b8d228c8d228d8d218e8d218f8d21908d21918c20928c20928c20938c1f948c1f958b1f968b1f978b1f988b1f998a1f9a8a1e9b8a1e9c891e9d891f9e891f9f881fa0881fa1881fa1871fa28720a38620a48621a58521a68522a78522a88423a98324aa8325ab8225ac8226ad8127ad8128ae8029af7f2ab07f2cb17e2db27d2eb37c2fb47c31b57b32b67a34b67935b77937b87838b9773aba763bbb753dbc743fbc7340bd7242be7144bf7046c06f48c16e4ac16d4cc26c4ec36b50c46a52c56954c56856c66758c7655ac8645cc8635ec96260ca6063cb5f65cb5e67cc5c69cd5b6ccd5a6ece5870cf5773d05675d05477d1537ad1517cd2507fd34e81d34d84d44b86d54989d5488bd6468ed64590d74393d74195d84098d83e9bd93c9dd93ba0da39a2da37a5db36a8db34aadc32addc30b0dd2fb2dd2db5de2bb8de29bade28bddf26c0df25c2df23c5e021c8e020cae11fcde11dd0e11cd2e21bd5e21ad8e219dae319dde318dfe318e2e418e5e419e7e419eae51aece51befe51cf1e51df4e61ef6e620f8e621fbe723fde725")),u5=fc(Vt("00000401000501010601010802010902020b02020d03030f03031204041405041606051806051a07061c08071e0907200a08220b09240c09260d0a290e0b2b100b2d110c2f120d31130d34140e36150e38160f3b180f3d19103f1a10421c10441d11471e114920114b21114e22115024125325125527125829115a2a115c2c115f2d11612f116331116533106734106936106b38106c390f6e3b0f703d0f713f0f72400f74420f75440f764510774710784910784a10794c117a4e117b4f127b51127c52137c54137d56147d57157e59157e5a167e5c167f5d177f5f187f601880621980641a80651a80671b80681c816a1c816b1d816d1d816e1e81701f81721f817320817521817621817822817922827b23827c23827e24828025828125818326818426818627818827818928818b29818c29818e2a81902a81912b81932b80942c80962c80982d80992d809b2e7f9c2e7f9e2f7fa02f7fa1307ea3307ea5317ea6317da8327daa337dab337cad347cae347bb0357bb2357bb3367ab5367ab73779b83779ba3878bc3978bd3977bf3a77c03a76c23b75c43c75c53c74c73d73c83e73ca3e72cc3f71cd4071cf4070d0416fd2426fd3436ed5446dd6456cd8456cd9466bdb476adc4869de4968df4a68e04c67e24d66e34e65e44f64e55064e75263e85362e95462ea5661eb5760ec5860ed5a5fee5b5eef5d5ef05f5ef1605df2625df2645cf3655cf4675cf4695cf56b5cf66c5cf66e5cf7705cf7725cf8745cf8765cf9785df9795df97b5dfa7d5efa7f5efa815ffb835ffb8560fb8761fc8961fc8a62fc8c63fc8e64fc9065fd9266fd9467fd9668fd9869fd9a6afd9b6bfe9d6cfe9f6dfea16efea36ffea571fea772fea973feaa74feac76feae77feb078feb27afeb47bfeb67cfeb77efeb97ffebb81febd82febf84fec185fec287fec488fec68afec88cfeca8dfecc8ffecd90fecf92fed194fed395fed597fed799fed89afdda9cfddc9efddea0fde0a1fde2a3fde3a5fde5a7fde7a9fde9aafdebacfcecaefceeb0fcf0b2fcf2b4fcf4b6fcf6b8fcf7b9fcf9bbfcfbbdfcfdbf")),f5=fc(Vt("00000401000501010601010802010a02020c02020e03021004031204031405041706041907051b08051d09061f0a07220b07240c08260d08290e092b10092d110a30120a32140b34150b37160b39180c3c190c3e1b0c411c0c431e0c451f0c48210c4a230c4c240c4f260c51280b53290b552b0b572d0b592f0a5b310a5c320a5e340a5f3609613809623909633b09643d09653e0966400a67420a68440a68450a69470b6a490b6a4a0c6b4c0c6b4d0d6c4f0d6c510e6c520e6d540f6d550f6d57106e59106e5a116e5c126e5d126e5f136e61136e62146e64156e65156e67166e69166e6a176e6c186e6d186e6f196e71196e721a6e741a6e751b6e771c6d781c6d7a1d6d7c1d6d7d1e6d7f1e6c801f6c82206c84206b85216b87216b88226a8a226a8c23698d23698f24699025689225689326679526679727669827669a28659b29649d29649f2a63a02a63a22b62a32c61a52c60a62d60a82e5fa92e5eab2f5ead305dae305cb0315bb1325ab3325ab43359b63458b73557b93556ba3655bc3754bd3853bf3952c03a51c13a50c33b4fc43c4ec63d4dc73e4cc83f4bca404acb4149cc4248ce4347cf4446d04545d24644d34743d44842d54a41d74b3fd84c3ed94d3dda4e3cdb503bdd513ade5238df5337e05536e15635e25734e35933e45a31e55c30e65d2fe75e2ee8602de9612bea632aeb6429eb6628ec6726ed6925ee6a24ef6c23ef6e21f06f20f1711ff1731df2741cf3761bf37819f47918f57b17f57d15f67e14f68013f78212f78410f8850ff8870ef8890cf98b0bf98c0af98e09fa9008fa9207fa9407fb9606fb9706fb9906fb9b06fb9d07fc9f07fca108fca309fca50afca60cfca80dfcaa0ffcac11fcae12fcb014fcb216fcb418fbb61afbb81dfbba1ffbbc21fbbe23fac026fac228fac42afac62df9c72ff9c932f9cb35f8cd37f8cf3af7d13df7d340f6d543f6d746f5d949f5db4cf4dd4ff4df53f4e156f3e35af3e55df2e661f2e865f2ea69f1ec6df1ed71f1ef75f1f179f2f27df2f482f3f586f3f68af4f88ef5f992f6fa96f8fb9af9fc9dfafda1fcffa4")),d5=fc(Vt("0d088710078813078916078a19068c1b068d1d068e20068f2206902406912605912805922a05932c05942e05952f059631059733059735049837049938049a3a049a3c049b3e049c3f049c41049d43039e44039e46039f48039f4903a04b03a14c02a14e02a25002a25102a35302a35502a45601a45801a45901a55b01a55c01a65e01a66001a66100a76300a76400a76600a76700a86900a86a00a86c00a86e00a86f00a87100a87201a87401a87501a87701a87801a87a02a87b02a87d03a87e03a88004a88104a78305a78405a78606a68707a68808a68a09a58b0aa58d0ba58e0ca48f0da4910ea3920fa39410a29511a19613a19814a099159f9a169f9c179e9d189d9e199da01a9ca11b9ba21d9aa31e9aa51f99a62098a72197a82296aa2395ab2494ac2694ad2793ae2892b02991b12a90b22b8fb32c8eb42e8db52f8cb6308bb7318ab83289ba3388bb3488bc3587bd3786be3885bf3984c03a83c13b82c23c81c33d80c43e7fc5407ec6417dc7427cc8437bc9447aca457acb4679cc4778cc4977cd4a76ce4b75cf4c74d04d73d14e72d24f71d35171d45270d5536fd5546ed6556dd7566cd8576bd9586ada5a6ada5b69db5c68dc5d67dd5e66de5f65de6164df6263e06363e16462e26561e26660e3685fe4695ee56a5de56b5de66c5ce76e5be76f5ae87059e97158e97257ea7457eb7556eb7655ec7754ed7953ed7a52ee7b51ef7c51ef7e50f07f4ff0804ef1814df1834cf2844bf3854bf3874af48849f48948f58b47f58c46f68d45f68f44f79044f79143f79342f89441f89540f9973ff9983ef99a3efa9b3dfa9c3cfa9e3bfb9f3afba139fba238fca338fca537fca636fca835fca934fdab33fdac33fdae32fdaf31fdb130fdb22ffdb42ffdb52efeb72dfeb82cfeba2cfebb2bfebd2afebe2afec029fdc229fdc328fdc527fdc627fdc827fdca26fdcb26fccd25fcce25fcd025fcd225fbd324fbd524fbd724fad824fada24f9dc24f9dd25f8df25f8e125f7e225f7e425f6e626f6e826f5e926f5eb27f4ed27f3ee27f3f027f2f227f1f426f1f525f0f724f0f921"));function p5(t,e,n,r,o,i){const{guide:a={}}=n,s=w5(t,e,n);if(typeof s!="string")return n;const l=S5(s,t,e,n),c=O5(s,l,n);return Object.assign(Object.assign(Object.assign({},n),E5(s,t,e,n,r)),{domain:c,range:j5(s,t,e,n,c,o,i),expectedDomain:l,guide:a,name:t,type:s})}function h5(t,e){const n={};for(const r of t){const{values:o,name:i}=r,a=e[i];for(const s of o){const{name:l,value:c}=s;n[l]=c.map(u=>a.map(u))}}return n}function y5(t,e){const n=Array.from(t.values()).flatMap(o=>o.channels);_(n,o=>o.map(i=>e.get(i.scale.uid)),o=>o.name).filter(([,o])=>o.some(i=>typeof i.getOptions().groupTransform=="function")&&o.every(i=>i.getTicks)).map(o=>o[1]).forEach(o=>{const i=o.map(a=>a.getOptions().groupTransform)[0];i(o)})}function g5(t,e){var n;const{components:r=[]}=e,o=["scale","encode","axis","legend","data","transform"],i=Array.from(new Set(t.flatMap(s=>s.channels.map(l=>l.scale)))),a=new Map(i.map(s=>[s.name,s]));for(const s of r){const l=v5(s);for(const c of l){const u=a.get(c),f=((n=s.scale)===null||n===void 0?void 0:n[c])||{},{independent:d=!1}=f;if(u&&!d){const{guide:p}=u,h=typeof p=="boolean"?{}:p;u.guide=(0,et.Z)({},h,s),Object.assign(u,f)}else{const p=Object.assign(Object.assign({},f),{expectedDomain:f.domain,name:c,guide:(0,Gl.Z)(s,o)});i.push(p)}}}return i}function m5(t){if(!t||!Array.isArray(t))return[Pt,Pt];let e,n;return[i=>{var a;e=i.map.bind(i),n=(a=i.invert)===null||a===void 0?void 0:a.bind(i);const s=t.filter(([d])=>typeof d=="function"),l=t.filter(([d])=>typeof d!="function"),c=new Map(l);if(i.map=d=>{for(const[p,h]of s)if(p(d))return h;return c.has(d)?c.get(d):e(d)},!n)return i;const u=new Map(l.map(([d,p])=>[p,d])),f=new Map(s.map(([d,p])=>[p,d]));return i.invert=d=>f.has(d)?d:u.has(d)?u.get(d):n(d),i},i=>(e!==null&&(i.map=e),n!==null&&(i.invert=n),i)]}function G0(t,e){const n=Object.keys(t);for(const r of Object.values(e)){const{name:o}=r.getOptions();if(!(o in t))t[o]=r;else{const i=n.filter(l=>l.startsWith(o)).map(l=>+(l.replace(o,"")||0)),a=he(i)+1,s=`${o}${a}`;t[s]=r,r.getOptions().key=s}}return t}function U0(t,e){const[n]=Pe("scale",e),{relations:r}=t,[o]=m5(r),i=n(t);return o(i)}function b5(t){const e=t.flatMap(n=>Array.from(n.values())).flatMap(n=>n.channels.map(r=>r.scale));V0(e,"x"),V0(e,"y")}function v5(t){const{channels:e=[],type:n,scale:r={}}=t,o=["shape","color","opacity","size"];return e.length!==0?e:n==="axisX"?["x"]:n==="axisY"?["y"]:n==="legends"?Object.keys(r).filter(i=>o.includes(i)):[]}function V0(t,e){const n=t.filter(({name:i,facet:a=!0})=>a&&i===e),r=n.flatMap(i=>i.domain),o=n.every(q0)?Mr(r):n.every(K0)?Array.from(new Set(r)):null;if(o!==null)for(const i of n)i.domain=o}function O5(t,e,n){const{ratio:r}=n;return r==null?e:q0({type:t})?x5(e,r,t):K0({type:t})?_5(e,r):e}function x5(t,e,n){const r=t.map(Number),o=new ir.b({domain:r,range:[r[0],r[0]+(r[r.length-1]-r[0])*e]});return n==="time"?t.map(i=>new Date(o.map(i))):t.map(i=>o.map(i))}function _5(t,e){const n=Math.round(t.length*e);return t.slice(0,n)}function q0(t){const{type:e}=t;return typeof e!="string"?!1:["linear","log","pow","time"].includes(e)}function K0(t){const{type:e}=t;return typeof e!="string"?!1:["band","point","ordinal"].includes(e)}function w5(t,e,n){const{type:r,domain:o,range:i,quantitative:a,ordinal:s}=n;return r!==void 0?r:N5(e)?"identity":typeof i=="string"?"linear":(o||i||[]).length>2?Au(t,s):o!==void 0?ey([o])?Au(t,s):ny(e)?"time":J0(t,i,a):ey(e)?Au(t,s):ny(e)?"time":J0(t,i,a)}function S5(t,e,n,r){const{domain:o}=r;if(o!==void 0)return o;switch(t){case"linear":case"time":case"log":case"pow":case"sqrt":case"quantize":case"threshold":return ty(L5(n,r),r);case"band":case"ordinal":case"point":return R5(n);case"quantile":return D5(n);case"sequential":return ty(I5(n),r);default:return[]}}function j5(t,e,n,r,o,i,a){const{range:s}=r;if(typeof s=="string")return A5(s);if(s!==void 0)return s;const{rangeMin:l,rangeMax:c}=r;switch(t){case"linear":case"time":case"log":case"pow":case"sqrt":{const u=Q0(n,r,o,i,a),[f,d]=F5(e,u);return[l!=null?l:f,c!=null?c:d]}case"band":case"point":{const u=e==="size"?5:0,f=e==="size"?10:1;return[l!=null?l:u,c!=null?c:f]}case"ordinal":return Q0(n,r,o,i,a);case"sequential":return;case"constant":return[n[0][0]];default:return[]}}function E5(t,e,n,r,o){switch(t){case"linear":case"time":case"log":case"pow":case"sqrt":return P5(o,r);case"band":case"point":return T5(t,e,o,r);case"sequential":return k5(r);default:return r}}function Q0(t,e,n,r,o){const[i]=Pe("palette",o),{category10:a,category20:s}=r,l=w_(n).length<=a.length?a:s,{palette:c=l,offset:u}=e;if(Array.isArray(c))return c;try{return i({type:c})}catch(f){const d=M5(c,n,u);if(d)return d;throw new Error(`Unknown Component: ${c} `)}}function A5(t){return t.split("-")}function M5(t,e,n=r=>r){if(!t)return null;const r=(0,Vr.Z)(t),o=ct[`scheme${r}`],i=ct[`interpolate${r}`];if(!o&&!i)return null;if(o){if(!o.some(Array.isArray))return o;const a=o[e.length];if(a)return a}return e.map((a,s)=>i(n(s/e.length)))}function k5(t){const{palette:e="ylGnBu",offset:n}=t,r=(0,Vr.Z)(e),o=ct[`interpolate${r}`];if(!o)throw new Error(`Unknown palette: ${r}`);return{interpolator:n?i=>o(n(i)):o}}function P5(t,e){const{interpolate:n=fi.wp,nice:r=!1,tickCount:o=5}=e;return Object.assign(Object.assign({},e),{interpolate:n,nice:r,tickCount:o})}function T5(t,e,n,r){if(r.padding!==void 0||r.paddingInner!==void 0||r.paddingOuter!==void 0)return Object.assign(Object.assign({},r),{unknown:NaN});const o=C5(t,e,n),{paddingInner:i=o,paddingOuter:a=o}=r;return Object.assign(Object.assign({},r),{paddingInner:i,paddingOuter:a,padding:o,unknown:NaN})}function C5(t,e,n){return e==="enterDelay"||e==="enterDuration"||e==="size"?0:t==="band"?e0(n)?0:.1:t==="point"?.5:0}function Au(t,e){return e||(z5(t)?"point":"ordinal")}function J0(t,e,n){return n||(t!=="color"||e?"linear":"sequential")}function ty(t,e){if(t.length===0)return t;const{domainMin:n,domainMax:r}=e,[o,i]=t;return[n!=null?n:o,r!=null?r:i]}function L5(t,e){const{zero:n=!1}=e;let r=1/0,o=-1/0;for(const i of t)for(const a of i)Ut(a)&&(r=Math.min(r,+a),o=Math.max(o,+a));return r===1/0?[]:n?[Math.min(0,r),o]:[r,o]}function R5(t){return Array.from(new Set(t.flat()))}function D5(t){return t.flat().sort()}function I5(t){let e=1/0,n=-1/0;for(const r of t)for(const o of r)Ut(o)&&(e=Math.min(e,+o),n=Math.max(n,+o));return e===1/0?[]:[e<0?-n:e,n]}function F5(t,e){return t==="enterDelay"?[0,1e3]:t=="enterDuration"?[300,1e3]:t.startsWith("y")||t.startsWith("position")?[1,0]:t==="color"?[__(e),Ip(e)]:t==="opacity"?[0,1]:t==="size"?[1,10]:[0,1]}function ey(t){return Mu(t,e=>{const n=typeof e;return n==="string"||n==="boolean"})}function ny(t){return Mu(t,e=>e instanceof Date)}function N5(t){return Mu(t,vn)}function Mu(t,e){for(const n of t)if(n.some(e))return!0;return!1}function z5(t){return t.startsWith("x")||t.startsWith("y")||t.startsWith("position")||t.startsWith("size")}function B5(t){return t.startsWith("x")||t.startsWith("y")||t.startsWith("position")||t==="enterDelay"||t==="enterDuration"||t==="updateDelay"||t==="updateDuration"||t==="exitDelay"||t==="exitDuration"}function $5(t){if(!t||!t.type)return!1;if(typeof t.type=="function")return!0;const{type:e,domain:n,range:r,interpolator:o}=t,i=n&&n.length>0,a=r&&r.length>0;return!!(["linear","sqrt","log","time","pow","threshold","quantize","quantile","ordinal","band","point"].includes(e)&&i&&a||["sequential"].includes(e)&&i&&(a||o)||["constant","identity"].includes(e)&&a)}const Y5={linear:"linear",identity:"identity",log:"log",pow:"pow",sqrt:"sqrt",sequential:"sequential"},W5={threshold:"threshold",quantize:"quantize",quantile:"quantile"},Z5={ordinal:"ordinal",band:"band",point:"point"},H5={constant:"constant"};var no=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,r=Object.getOwnPropertySymbols(t);o<r.length;o++)e.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(t,r[o])&&(n[r[o]]=t[r[o]]);return n};function X5(t,e,n){const{coordinates:r=[],title:o}=e,[,i]=Pe("component",n),a=t.filter(({guide:u})=>u!==null),s=[],l=nE(e,t,n);if(s.push(...l),o){const{props:u}=i("title"),{defaultPosition:f,defaultOrientation:d,defaultOrder:p,defaultSize:h,defaultCrossPadding:y}=u,g=typeof o=="string"?{title:o}:o;s.push(Object.assign({type:"title",position:f,orientation:d,order:p,crossPadding:y[0],defaultSize:h},g))}return K5(a,r).forEach(([u,f])=>{const{props:d}=i(u),{defaultPosition:p,defaultPlane:h="xy",defaultOrientation:y,defaultSize:g,defaultOrder:m,defaultLength:b,defaultPadding:v=[0,0],defaultCrossPadding:O=[0,0]}=d,x=(0,et.Z)({},...f),{guide:w,field:j}=x,E=Array.isArray(w)?w:[w];for(const M of E){const[R,D]=tE(u,p,y,M,f,a,r);if(!R&&!D)continue;const F=R==="left"||R==="right",A=F?v[1]:v[0],T=F?O[1]:O[0],{size:P,order:k=m,length:z=b,padding:C=A,crossPadding:I=T}=M;s.push(Object.assign(Object.assign({title:j},M),{defaultSize:g,length:z,position:R,plane:h,orientation:D,padding:C,order:k,crossPadding:I,size:P,type:u,scales:f}))}}),s}function ry(t,e,n,r,o){const[i]=Pe("component",r),{scaleInstances:a,scale:s,bbox:l}=t,c=no(t,["scaleInstances","scale","bbox"]),u={bbox:l,library:r};return i(c)({coordinate:e,library:r,markState:o,scales:a,theme:n,value:u,scale:s})}function G5(t){return t.map(e=>{const n=(0,et.Z)(e,e.style);return delete n.style,n})}function aD(t){return t.flatMap(e=>e.type=="group"?e.children:e)}function oy(t,e){const n=["left","right","bottom","top"];return Jo(t,({type:i,position:a,group:s})=>n.includes(a)?s===void 0?i.startsWith("legend")?`legend-${a}`:Symbol("independent"):s==="independent"?Symbol("independent"):s:Symbol("independent")).flatMap(([,i])=>{if(i.length===1)return i[0];if(e!==void 0){const u=i.filter(y=>y.length!==void 0).map(y=>y.length),f=Hn(u);if(f>e)return i.forEach(y=>y.group=Symbol("independent")),i;const d=e-f,p=i.length-u.length,h=d/p;i.forEach(y=>{y.length===void 0&&(y.length=h)})}const a=he(i,u=>u.size),s=he(i,u=>u.order),l=he(i,u=>u.crossPadding),c=i[0].position;return{type:"group",size:a,order:s,position:c,children:i,crossPadding:l}})}function U5(t,e){const n=["shape","size","color","opacity"],r=(d,p)=>d==="constant"&&p==="size",o=t.filter(({type:d,name:p})=>typeof d=="string"&&n.includes(p)&&!r(d,p)),i=o.filter(({type:d})=>d==="constant"),a=o.filter(({type:d})=>d!=="constant"),l=Jo(a,d=>d.field?d.field:Symbol("independent")).map(([d,p])=>[d,[...p,...i]]).filter(([,d])=>d.some(p=>p.type!=="constant")),c=new Map(l);if(c.size===0)return[];const u=d=>d.sort(([p],[h])=>p.localeCompare(h));return Array.from(c).map(([,d])=>{const h=S_(d).sort((y,g)=>g.length-y.length).map(y=>({combination:y,option:y.map(g=>[g.name,V5(g)])}));for(const{option:y,combination:g}of h)if(!y.every(m=>m[1]==="constant")&&y.every(m=>m[1]==="discrete"||m[1]==="constant"))return["legendCategory",g];for(const[y,g]of A_)for(const{option:m,combination:b}of h)if(g.some(v=>(0,j_.Z)(u(v),u(m))))return[y,b];return null}).filter(Ut)}function V5(t){const{type:e}=t;return typeof e!="string"?null:e in Y5?"continuous":e in Z5?"discrete":e in W5?"distribution":e in H5?"constant":null}function q5(t,e){return t.map(n=>{const{name:r}=n;if(ZS(e)||e0(e)||ui(e)&&(Mo(e)||ba(e)))return null;if(r.startsWith("x"))return Mo(e)?["axisArc",[n]]:ba(e)?["axisLinear",[n]]:[ui(e)?"axisY":"axisX",[n]];if(r.startsWith("y"))return Mo(e)?["axisLinear",[n]]:ba(e)?["axisArc",[n]]:[ui(e)?"axisX":"axisY",[n]];if(r.startsWith("z"))return["axisZ",[n]];if(r.startsWith("position")){if(GS(e))return["axisRadar",[n]];if(!Mo(e))return["axisY",[n]]}return null}).filter(Ut)}function K5(t,e){const n=t.filter(r=>$5(r));return[...U5(n,e),...q5(n,e)]}function ku(t){const e=sr(t,"polar");if(e.length){const r=e[e.length-1],{startAngle:o,endAngle:i}=zp(r);return[o,i]}const n=sr(t,"radial");if(n.length){const r=n[n.length-1],{startAngle:o,endAngle:i}=Bp(r);return[o,i]}return[-Math.PI/2,Math.PI/2*3]}function Q5(t){const e=/position(\d*)/g.exec(t);return e?+e[1]:null}function J5(t,e,n,r,o){const{name:i}=n[0];if(t==="axisRadar"){const a=r.filter(f=>f.name.startsWith("position")),s=Q5(i);if(i===a.slice(-1)[0].name||s===null)return[null,null];const[l,c]=ku(o);return["center",(c-l)/(a.length-1)*s+l]}if(t==="axisY"&&HS(o))return ui(o)?["center","horizontal"]:["center","vertical"];if(t==="axisLinear"){const[a]=ku(o);return["center",a]}return t==="axisArc"?e[0]==="inner"?["inner",null]:["outer",null]:Mo(o)?["center",null]:ba(o)?["center",null]:t==="axisX"&&XS(o)||t==="axisX"&&US(o)?["top",null]:e}function tE(t,e,n,r,o,i,a){const[s]=ku(a),l=[r.position||e,s!=null?s:n];return typeof t=="string"&&t.startsWith("axis")?J5(t,l,o,i,a):typeof t=="string"&&t.startsWith("legend")&&Mo(a)&&r.position==="center"?["center","vertical"]:l}function eE(t,e,n=[]){return t==="x"?ui(n)?`${e}Y`:`${e}X`:t==="y"?ui(n)?`${e}X`:`${e}Y`:null}function nE(t,e,n){const[,r]=Pe("component",n),{coordinates:o}=t;function i(a,s,l,c){const u=eE(s,a,o);if(!c||!u)return;const{props:f}=r(u),{defaultPosition:d,defaultSize:p,defaultOrder:h,defaultCrossPadding:[y]}=f;return Object.assign(Object.assign({position:d,defaultSize:p,order:h,type:u,crossPadding:y},c),{scales:[l]})}return e.filter(a=>a.slider||a.scrollbar).flatMap(a=>{const{slider:s,scrollbar:l,name:c}=a;return[i("slider",c,a,s),i("scrollbar",c,a,l)]}).filter(a=>!!a)}function iy(t,e,n,r,o,i){const{type:a}=t;if(!["left","right","bottom","top"].includes(r)||typeof a!="string")return;const l=a;return(l.startsWith("axis")?sE:l.startsWith("group")?rE:l.startsWith("legendContinuous")?cE:l==="legendCategory"?lE:l.startsWith("slider")?aE:l==="title"?iE:l.startsWith("scrollbar")?oE:()=>{})(t,e,n,r,o,i)}function rE(t,e,n,r,o,i){const{children:a}=t,s=he(a,c=>c.crossPadding);a.forEach(c=>c.crossPadding=s),a.forEach(c=>iy(c,e,n,r,o,i));const l=he(a,c=>c.size);t.size=l,a.forEach(c=>c.size=l)}function oE(t,e,n,r,o,i){const{trackSize:a=6}=(0,et.Z)({},o.scrollbar,t);t.size=a}function iE(t,e,n,r,o,i){const a=(0,et.Z)({},o.title,t),{title:s,subtitle:l,spacing:c=0}=a,u=no(a,["title","subtitle","spacing"]);if(s){const f=at(u,"title"),d=yc(s,f);t.size=d.height}if(l){const f=at(u,"subtitle"),d=yc(l,f);t.size+=c+d.height}}function aE(t,e,n,r,o,i){const a=()=>{const{slider:u}=o;return(0,et.Z)({},u,t)},{trackSize:s,handleIconSize:l}=a(),c=Math.max(s,l*2.4);t.size=c}function sE(t,e,n,r,o,i){var a;t.transform=t.transform||[{type:"hide"}];const s=r==="left"||r==="right",l=ay(t,r,o),{tickLength:c=0,labelSpacing:u=0,titleSpacing:f=0,labelAutoRotate:d}=l,p=no(l,["tickLength","labelSpacing","titleSpacing","labelAutoRotate"]),h=dc(t,i),y=pc(p,h),g=c+u;if(y&&y.length){const b=he(y,O=>O.width),v=he(y,O=>O.height);if(s)t.size=b+g;else{const{tickFilter:O,labelTransform:x}=t;dE(h,y,e,n,O)&&!x&&d!==!1&&d!==null?(t.labelTransform="rotate(90)",t.size=b+g):(t.labelTransform=(a=t.labelTransform)!==null&&a!==void 0?a:"rotate(0)",t.size=v+g)}}else t.size=c;const m=hc(p);m&&(s?t.size+=f+m.width:t.size+=f+m.height)}function cE(t,e,n,r,o,i){const s=(()=>{const{legendContinuous:O}=o;return(0,et.Z)({},O,t)})(),{labelSpacing:l=0,titleSpacing:c=0}=s,u=no(s,["labelSpacing","titleSpacing"]),f=r==="left"||r==="right",d=at(u,"ribbon"),{size:p}=d,h=at(u,"handleIcon"),{size:y}=h,g=Math.max(p,y*2.4);t.size=g;const m=dc(t,i),b=pc(u,m);if(b){const O=f?"width":"height",x=he(b,w=>w[O]);t.size+=x+l}const v=hc(u);v&&(f?t.size=Math.max(t.size,v.width):t.size+=c+v.height)}function lE(t,e,n,r,o,i){const s=(()=>{const{legendCategory:T}=o,{title:P}=t,[k,z]=Array.isArray(P)?[P,void 0]:[void 0,P];return(0,et.Z)({title:k},T,Object.assign(Object.assign({},t),{title:z}))})(),{itemSpacing:l,itemMarkerSize:c,titleSpacing:u,rowPadding:f,colPadding:d,maxCols:p=1/0,maxRows:h=1/0}=s,y=no(s,["itemSpacing","itemMarkerSize","titleSpacing","rowPadding","colPadding","maxCols","maxRows"]),{cols:g,length:m}=t,b=T=>Math.min(T,h),v=T=>Math.min(T,p),O=r==="left"||r==="right",x=m===void 0?e+(O?0:n[0]+n[1]):m,w=hc(y),j=dc(t,i),E=pc(y,j,"itemLabel"),M=Math.max(E[0].height,c)+f,R=(T,P=0)=>c+T+l[0]+P;O?(()=>{let T=-1/0,P=0,k=1,z=0,C=-1/0,I=-1/0;const Y=w?w.height:0,X=x-Y;for(const{width:W}of E){const Z=R(W,d);T=Math.max(T,Z),P+M>X?(k++,C=Math.max(C,z),I=Math.max(I,P),z=1,P=M):(P+=M,z++)}k<=1&&(C=z,I=P),t.size=T*v(k),t.length=I+Y,(0,et.Z)(t,{cols:v(k),gridRow:C})})():typeof g=="number"?(()=>{const T=Math.ceil(E.length/g),P=he(E,k=>R(k.width))*g;t.size=M*b(T)-f,t.length=Math.min(P,x)})():(()=>{let T=1,P=0,k=-1/0;for(const{width:z}of E){const C=R(z,d);P+C>x?(k=Math.max(k,P),P=C,T++):P+=C}T===1&&(k=P),t.size=M*b(T)-f,t.length=k})(),w&&(O?t.size=Math.max(t.size,w.width):t.size+=u+w.height)}function dc(t,e){const[n]=Pe("scale",e),{scales:r,tickCount:o,tickMethod:i}=t,a=r.find(s=>s.type!=="constant"&&s.type!=="identity");return o!==void 0&&(a.tickCount=o),i!==void 0&&(a.tickMethod=i),n(a)}function pc(t,e,n="label"){const{labelFormatter:r,tickFilter:o,label:i=!0}=t,a=no(t,["labelFormatter","tickFilter","label"]);if(!i)return null;const s=uE(e,r,o),l=at(a,n),c=s.map((d,p)=>Object.fromEntries(Object.entries(l).map(([h,y])=>[h,typeof y=="function"?y(d,p):y]))),u=s.map((d,p)=>{const h=c[p];return yc(d,h)});if(!c.some(d=>d.transform)){const d=s.map((p,h)=>h);t.indexBBox=new Map(d.map(p=>[p,[s[p],u[p]]]))}return u}function hc(t){const e=c=>c===!1||c===null,{title:n}=t,r=no(t,["title"]);if(e(n)||n===void 0)return null;const o=at(r,"title"),{direction:i,transform:a}=o,s=Array.isArray(n)?n.join(","):n;return typeof s!="string"?null:yc(s,Object.assign(Object.assign({},o),{transform:a||(i==="vertical"?"rotate(-90)":"")}))}function ay(t,e,n){const{title:r}=t,[o,i]=Array.isArray(r)?[r,void 0]:[void 0,r],{axis:a,[`axis${gt(e)}`]:s}=n;return(0,et.Z)({title:o},a,s,Object.assign(Object.assign({},t),{title:i}))}function sy(t,e){const n=t.getTicks?t.getTicks():t.getOptions().domain;return e?n.filter(e):n}function uE(t,e,n){const o=sy(t,n).map(a=>typeof a=="number"?Is(a):a),i=e?typeof e=="string"?qr(e):e:t.getFormatter?t.getFormatter():a=>`${a}`;return o.map(i)}function fE(t,e){return t.getBandWidth?t.getBandWidth(e)/2:0}function dE(t,e,n,r,o){if(Hn(e,p=>p.width)>n)return!0;const a=t.clone();a.update({range:[0,n]});const s=sy(t,o),l=s.map(p=>a.map(p)+fE(a,p)),c=s.map((p,h)=>h),u=-r[0],f=n+r[1],d=(p,h)=>{const{width:y}=h;return[p-y/2,p+y/2]};for(let p=0;p<c.length;p++){const h=l[p],[y,g]=d(h,e[p]);if(y<u||g>f)return!0;const m=l[p+1];if(m){const[b]=d(m,e[p+1]);if(g>b)return!0}}return!1}function yc(t,e){const n=pE(t),{filter:r}=e,o=no(e,["filter"]);return n.attr(Object.assign(Object.assign({},o),{visibility:"none"})),n.getBBox()}function pE(t){return t instanceof ht.s$?t:new ht.xv({style:{text:`${t}`}})}function Yn(t,e){let n;if(e===void 0)for(const r of t)r!=null&&(n>r||n===void 0&&r>=r)&&(n=r);else{let r=-1;for(let o of t)(o=e(o,++r,t))!=null&&(n>o||n===void 0&&o>=o)&&(n=o)}return n}function hE(t){const e=t.find(({type:o})=>o==="axisX"),n=t.find(({type:o})=>o==="axisY"),r=t.find(({type:o})=>o==="axisZ");e&&n&&r&&(e.plane="xy",n.plane="xy",r.plane="yz",r.origin=[e.bbox.x,e.bbox.y,0],r.eulerAngles=[0,-90,0],r.bbox.x=e.bbox.x,r.bbox.y=e.bbox.y,t.push(Object.assign(Object.assign({},e),{plane:"xz",showLabel:!1,showTitle:!1,origin:[e.bbox.x,e.bbox.y,0],eulerAngles:[-90,0,0]})),t.push(Object.assign(Object.assign({},n),{plane:"yz",showLabel:!1,showTitle:!1,origin:[n.bbox.x+n.bbox.width,n.bbox.y,0],eulerAngles:[0,-90,0]})),t.push(Object.assign(Object.assign({},r),{plane:"xz",actualPosition:"left",showLabel:!1,showTitle:!1,eulerAngles:[90,-90,0]})))}function yE(t,e,n,r){var o,i;const{width:a,height:s,depth:l,x:c=0,y:u=0,z:f=0,inset:d=(o=n.inset)!==null&&o!==void 0?o:0,insetLeft:p=d,insetTop:h=d,insetBottom:y=d,insetRight:g=d,margin:m=(i=n.margin)!==null&&i!==void 0?i:0,marginLeft:b=m,marginBottom:v=m,marginTop:O=m,marginRight:x=m,padding:w=n.padding,paddingBottom:j=w,paddingLeft:E=w,paddingRight:M=w,paddingTop:R=w}=mE(t,e,n,r),D=1/4,F=(st,ot,dt,xt,vt)=>{const{marks:wt}=e;if(wt.length===0)return[xt,vt];if(st-xt-vt-st*D>0)return[xt,vt];const Bt=st*(1-D);return[ot==="auto"?Bt*xt/(xt+vt):xt,dt==="auto"?Bt*vt/(xt+vt):vt]},A=st=>st==="auto"?20:st!=null?st:20,T=A(R),P=A(j),k=cy(t,s-T-P,[T+O,P+v],["left","right"],e,n,r),{paddingLeft:z,paddingRight:C}=k,I=a-b-x,[Y,X]=F(I,E,M,z,C),W=I-Y-X,Z=cy(t,W,[Y+b,X+x],["bottom","top"],e,n,r),{paddingTop:K,paddingBottom:J}=Z,rt=s-v-O,[nt,tt]=F(rt,j,R,J,K),yt=rt-nt-tt;return{width:a,height:s,depth:l,insetLeft:p,insetTop:h,insetBottom:y,insetRight:g,innerWidth:W,innerHeight:yt,paddingLeft:Y,paddingRight:X,paddingTop:tt,paddingBottom:nt,marginLeft:b,marginBottom:v,marginTop:O,marginRight:x,x:c,y:u,z:f}}function gE(t){const{height:e,width:n,padding:r=0,paddingLeft:o=r,paddingRight:i=r,paddingTop:a=r,paddingBottom:s=r,margin:l=16,marginLeft:c=l,marginRight:u=l,marginTop:f=l,marginBottom:d=l,inset:p=0,insetLeft:h=p,insetRight:y=p,insetTop:g=p,insetBottom:m=p}=t,b=x=>x==="auto"?20:x,v=n-b(o)-b(i)-c-u-h-y,O=e-b(a)-b(s)-f-d-g-m;return{width:v,height:O}}function mE(t,e,n,r){const{coordinates:o}=e;if(!Mo(o)&&!ba(o))return e;const i=t.filter(m=>typeof m.type=="string"&&m.type.startsWith("axis"));if(i.length===0)return e;const a=i.map(m=>{const b=m.type==="axisArc"?"arc":"linear";return ay(m,b,n)}),s=he(a,m=>{var b;return(b=m.labelSpacing)!==null&&b!==void 0?b:0}),l=i.flatMap((m,b)=>{const v=a[b],O=dc(m,r);return pc(v,O)}).filter(Ut),c=he(l,m=>m.height)+s,u=i.flatMap((m,b)=>{const v=a[b];return hc(v)}).filter(m=>m!==null),f=u.length===0?0:he(u,m=>m.height),{inset:d=c,insetLeft:p=d,insetBottom:h=d,insetTop:y=d+f,insetRight:g=d}=e;return Object.assign(Object.assign({},e),{insetLeft:p,insetBottom:h,insetTop:y,insetRight:g})}function cy(t,e,n,r,o,i,a){const s=ve(t,h=>h.position),{padding:l=i.padding,paddingLeft:c=l,paddingRight:u=l,paddingBottom:f=l,paddingTop:d=l}=o,p={paddingBottom:f,paddingLeft:c,paddingTop:d,paddingRight:u};for(const h of r){const y=`padding${gt(iu(h))}`,g=s.get(h)||[],m=p[y],b=M=>{M.size===void 0&&(M.size=M.defaultSize)},v=M=>{M.type==="group"?(M.children.forEach(b),M.size=he(M.children,R=>R.size)):M.size=M.defaultSize},O=M=>{M.size||(m!=="auto"?v(M):(iy(M,e,n,h,i,a),b(M)))},x=M=>{M.type.startsWith("axis")&&M.labelAutoHide===void 0&&(M.labelAutoHide=!0)},w=h==="bottom"||h==="top",j=Yn(g,M=>M.order),E=g.filter(M=>M.type.startsWith("axis")&&M.order==j);if(E.length&&(E[0].crossPadding=0),typeof m=="number")g.forEach(b),g.forEach(x);else if(g.length===0)p[y]=0;else{const M=w?e+n[0]+n[1]:e,R=oy(g,M);R.forEach(O);const D=R.reduce((F,{size:A,crossPadding:T=12})=>F+A+T,0);p[y]=D}}return p}function bE(t,e,n){const r=ve(t,w=>`${w.plane||"xy"}-${w.position}`),{paddingLeft:o,paddingRight:i,paddingTop:a,paddingBottom:s,marginLeft:l,marginTop:c,marginBottom:u,marginRight:f,innerHeight:d,innerWidth:p,insetBottom:h,insetLeft:y,insetRight:g,insetTop:m,height:b,width:v,depth:O}=n,x={xy:Pu({width:v,height:b,paddingLeft:o,paddingRight:i,paddingTop:a,paddingBottom:s,marginLeft:l,marginTop:c,marginBottom:u,marginRight:f,innerHeight:d,innerWidth:p,insetBottom:h,insetLeft:y,insetRight:g,insetTop:m}),yz:Pu({width:O,height:b,paddingLeft:0,paddingRight:0,paddingTop:0,paddingBottom:0,marginLeft:0,marginTop:0,marginBottom:0,marginRight:0,innerWidth:O,innerHeight:b,insetBottom:0,insetLeft:0,insetRight:0,insetTop:0}),xz:Pu({width:v,height:O,paddingLeft:0,paddingRight:0,paddingTop:0,paddingBottom:0,marginLeft:0,marginTop:0,marginBottom:0,marginRight:0,innerWidth:v,innerHeight:O,insetBottom:0,insetLeft:0,insetRight:0,insetTop:0})};for(const[w,j]of r.entries()){const[E,M]=w.split("-"),R=x[E][M],[D,F]=Fp(j,A=>typeof A.type!="string"?!1:!!(M==="center"||A.type.startsWith("axis")&&["inner","outer"].includes(M)));D.length&&vE(D,e,R,M),F.length&&ME(j,e,R)}}function Pu({width:t,height:e,paddingLeft:n,paddingRight:r,paddingTop:o,paddingBottom:i,marginLeft:a,marginTop:s,marginBottom:l,marginRight:c,innerHeight:u,innerWidth:f,insetBottom:d,insetLeft:p,insetRight:h,insetTop:y}){const g=n+a,m=o+s,b=r+c,v=i+l,O=t-a-c,x=[g+p,m+y,f-p-h,u-y-d,"center",null,null];return{top:[g,0,f,m,"vertical",!0,Ye,a,O],right:[t-b,m,b,u,"horizontal",!1,Ye],bottom:[g,e-v,f,v,"vertical",!1,Ye,a,O],left:[0,m,g,u,"horizontal",!0,Ye],"top-left":[g,0,f,m,"vertical",!0,Ye],"top-right":[g,0,f,m,"vertical",!0,Ye],"bottom-left":[g,e-v,f,v,"vertical",!1,Ye],"bottom-right":[g,e-v,f,v,"vertical",!1,Ye],center:x,inner:x,outer:x}}function vE(t,e,n,r){const[o,i]=Fp(t,a=>!!(typeof a.type=="string"&&a.type.startsWith("axis")));OE(o,e,n,r),kE(i,e,n)}function OE(t,e,n,r){r==="center"?M_(e)?AE(t,e,n,r):be(e)?wE(t,e,n):ta(e)&&SE(t,e,n,t[0].orientation):r==="inner"?xE(t,e,n):r==="outer"&&_E(t,e,n)}function xE(t,e,n){const[r,o,,i]=n,[a,s]=e.getCenter(),[l]=Fs(e),c=i/2,u=l*c,f=a-u,d=s-u;for(let p=0;p<t.length;p++){const h=t[p];h.bbox={x:r+f,y:o+d,width:u*2,height:u*2}}}function _E(t,e,n){const[r,o,i,a]=n;for(const s of t)s.bbox={x:r,y:o,width:i,height:a}}function wE(t,e,n){const[r,o,i,a]=n;for(const s of t)s.bbox={x:r,y:o,width:i,height:a}}function SE(t,e,n,r){r==="horizontal"?EE(t,e,n):r==="vertical"&&jE(t,e,n)}function jE(t,e,n){const[r,o,,i]=n,a=new Array(t.length).fill(0),l=e.map(a).filter((c,u)=>u%2===0).map(c=>c+r);for(let c=0;c<t.length;c++){const u=t[c],f=l[c],d=l[c+1]-f;u.bbox={x:f,y:o,width:d,height:i}}}function EE(t,e,n){const[r,o,i]=n,a=new Array(t.length).fill(0),l=e.map(a).filter((c,u)=>u%2===1).map(c=>c+o);for(let c=0;c<t.length;c++){const u=t[c],f=l[c],d=l[c+1]-f;u.bbox={x:r,y:f,width:i,height:d}}}function AE(t,e,n,r){const[o,i,a,s]=n;for(const l of t)l.bbox={x:o,y:i,width:a,height:s},l.radar={index:t.indexOf(l),count:t.length}}function ME(t,e,n){const[r,o,i,a,s,l,c,u,f]=n,[d,p,h,y,g,m,b,v]=s==="vertical"?["y",o,"x",r,"height",a,"width",i]:["x",r,"y",o,"width",i,"height",a];t.sort((M,R)=>c==null?void 0:c(M.order,R.order));const O=M=>M==="title"||M==="group"||M.startsWith("legend"),x=(M,R,D)=>D===void 0?R:O(M)?D:R,w=(M,R,D)=>D===void 0?R:O(M)?D:R,j=l?p+m:p;for(let M=0,R=j;M<t.length;M++){const D=t[M],{crossPadding:F=0,type:A}=D,{size:T}=D;D.bbox={[d]:l?R-T-F:R+F,[h]:w(A,y,u),[g]:T,[b]:x(A,v,f)},R+=(T+F)*(l?-1:1)}const E=t.filter(M=>M.type==="group");for(const M of E){const{bbox:R,children:D}=M,F=R[b],A=F/D.length,T=D.reduce((I,Y)=>{var X;const W=(X=Y.layout)===null||X===void 0?void 0:X.justifyContent;return W||I},"flex-start"),P=D.map((I,Y)=>{const{length:X=A,padding:W=0}=I;return X+(Y===D.length-1?0:W)}),k=Hn(P),z=F-k,C=T==="flex-start"?0:T==="center"?z/2:z;for(let I=0,Y=R[h]+C;I<D.length;I++){const X=D[I],{padding:W=0}=X,Z=I===D.length-1?0:W;X.bbox={[g]:R[g],[d]:R[d],[h]:Y,[b]:P[I]-Z},(0,et.Z)(X,{layout:{justifyContent:T}}),Y+=P[I]}}}function kE(t,e,n){if(t.length===0)return;const[r,o,i,a]=n,[s]=Fs(e),l=a/2*s/Math.sqrt(2),c=r+i/2,u=o+a/2;for(let f=0;f<t.length;f++){const d=t[f];d.bbox={x:c-l,y:u-l,width:l*2,height:l*2}}}function xr(t,e,n={},r=!1){if(Se(t)||Array.isArray(t)&&r)return t;const o=at(t,e);return(0,et.Z)(n,o)}function gc(t,e={}){return Se(t)||Array.isArray(t)||!ly(t)?t:(0,et.Z)(e,t)}function ly(t){if(Object.keys(t).length===0)return!0;const{title:e,items:n}=t;return e!==void 0||n!==void 0}function _r(t,e){return typeof t=="object"?at(t,e):t}var PE=function(t,e,n,r){function o(i){return i instanceof n?i:new n(function(a){a(i)})}return new(n||(n=Promise))(function(i,a){function s(u){try{c(r.next(u))}catch(f){a(f)}}function l(u){try{c(r.throw(u))}catch(f){a(f)}}function c(u){u.done?i(u.value):o(u.value).then(s,l)}c((r=r.apply(t,e||[])).next())})},gi=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,r=Object.getOwnPropertySymbols(t);o<r.length;o++)e.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(t,r[o])&&(n[r[o]]=t[r[o]]);return n};const uy=Symbol("CALLBACK_ITEM");function TE(t,e,n){const{encode:r={},scale:o={},transform:i=[]}=e,a=gi(e,["encode","scale","transform"]);return[t,Object.assign(Object.assign({},a),{encode:r,scale:o,transform:i})]}function fy(t,e,n){return PE(this,void 0,void 0,function*(){const{library:r}=n,{data:o}=e,[i]=Pe("data",r),a=ZE(o),{transform:s=[]}=a,u=[gi(a,["transform"]),...s].map(p=>i(p,n)),f=yield Lt(u)(o),d=o&&!Array.isArray(o)&&!Array.isArray(f)?{value:f}:f;return[Array.isArray(f)?xo(f):[],Object.assign(Object.assign({},e),{data:d})]})}function CE(t,e,n){const{encode:r}=e;if(!r)return[t,e];const o={};for(const[i,a]of Object.entries(r))if(Array.isArray(a))for(let s=0;s<a.length;s++){const l=`${i}${s===0?"":s}`;o[l]=a[s]}else o[i]=a;return[t,Object.assign(Object.assign({},e),{encode:o})]}function LE(t,e,n){const{encode:r,data:o}=e;if(!r)return[t,e];const i=yr(r,a=>$E(a)?a:{type:YE(o,a),value:a});return[t,Object.assign(Object.assign({},e),{encode:i})]}function RE(t,e,n){const{encode:r}=e;if(!r)return[t,e];const o=yr(r,(i,a)=>{const{type:s}=i;return s!=="constant"||B5(a)?i:Object.assign(Object.assign({},i),{constant:!0})});return[t,Object.assign(Object.assign({},e),{encode:o})]}function DE(t,e,n){const{encode:r,data:o}=e;if(!r)return[t,e];const{library:i}=n,a=GE(i),s=yr(r,l=>a(o,l));return[t,Object.assign(Object.assign({},e),{encode:s})]}function IE(t,e,n){const{tooltip:r={}}=e;return Se(r)?[t,e]:Array.isArray(r)?[t,Object.assign(Object.assign({},e),{tooltip:{items:r}})]:vn(r)&&ly(r)?[t,Object.assign(Object.assign({},e),{tooltip:r})]:[t,Object.assign(Object.assign({},e),{tooltip:{items:[r]}})]}function FE(t,e,n){const{data:r,encode:o,tooltip:i={}}=e;if(Se(i))return[t,e];const a=f=>{if(!f)return f;if(typeof f=="string")return t.map(d=>({name:f,value:r[d][f]}));if(vn(f)){const{field:d,channel:p,color:h,name:y=d,valueFormatter:g=w=>w}=f,m=typeof g=="string"?qr(g):g,b=p&&o[p],v=b&&o[p].field,O=y||v||p,x=[];for(const w of t){const j=d?r[w][d]:b?o[p].value[w]:null;x[w]={name:O,color:h,value:m(j)}}return x}if(typeof f=="function"){const d=[];for(const p of t){const h=f(r[p],p,r,o);vn(h)?d[p]=Object.assign(Object.assign({},h),{[uy]:!0}):d[p]={value:h}}return d}return f},{title:s,items:l=[]}=i,c=gi(i,["title","items"]),u=Object.assign({title:a(s),items:Array.isArray(l)?l.map(a):[]},c);return[t,Object.assign(Object.assign({},e),{tooltip:u})]}function NE(t,e,n){const{encode:r}=e,o=gi(e,["encode"]);if(!r)return[t,e];const i=Object.entries(r),a=i.filter(([,l])=>{const{value:c}=l;return Array.isArray(c[0])}).flatMap(([l,c])=>{const u=[[l,new Array(t.length).fill(void 0)]],{value:f}=c,d=gi(c,["value"]);for(let p=0;p<f.length;p++){const h=f[p];if(Array.isArray(h))for(let y=0;y<h.length;y++){const g=u[y]||[`${l}${y}`,new Array(t).fill(void 0)];g[1][p]=h[y],u[y]=g}}return u.map(([p,h])=>[p,Object.assign({type:"column",value:h},d)])}),s=Object.fromEntries([...i,...a]);return[t,Object.assign(Object.assign({},o),{encode:s})]}function zE(t,e,n){const{axis:r={},legend:o={},slider:i={},scrollbar:a={}}=e,s=(c,u)=>{if(typeof c=="boolean")return c?{}:null;const f=c[u];return f===void 0||f?f:null},l=typeof r=="object"?Array.from(new Set(["x","y","z",...Object.keys(r)])):["x","y","z"];return(0,et.Z)(e,{scale:Object.assign(Object.assign({},Object.fromEntries(l.map(c=>{const u=s(a,c);return[c,Object.assign({guide:s(r,c),slider:s(i,c),scrollbar:u},u&&{ratio:u.ratio===void 0?.5:u.ratio})]}))),{color:{guide:s(o,"color")},size:{guide:s(o,"size")},shape:{guide:s(o,"shape")},opacity:{guide:s(o,"opacity")}})}),[t,e]}function BE(t,e,n){const{animate:r}=e;return r||r===void 0?[t,e]:((0,et.Z)(e,{animate:{enter:{type:null},exit:{type:null},update:{type:null}}}),[t,e])}function $E(t){if(typeof t!="object"||t instanceof Date||t===null)return!1;const{type:e}=t;return Ut(e)}function YE(t,e){return typeof e=="function"?"transform":typeof e=="string"&&WE(t,e)?"field":"constant"}function WE(t,e){return Array.isArray(t)?t.some(n=>n[e]!==void 0):!1}function ZE(t){if((0,V.Z)(t))return{type:"inline",value:t};if(!t)return{type:"inline",value:null};if(Array.isArray(t))return{type:"inline",value:t};const{type:e="inline"}=t,n=gi(t,["type"]);return Object.assign(Object.assign({},n),{type:e})}var dy=function(t,e,n,r){function o(i){return i instanceof n?i:new n(function(a){a(i)})}return new(n||(n=Promise))(function(i,a){function s(u){try{c(r.next(u))}catch(f){a(f)}}function l(u){try{c(r.throw(u))}catch(f){a(f)}}function c(u){u.done?i(u.value):o(u.value).then(s,l)}c((r=r.apply(t,e||[])).next())})},HE=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,r=Object.getOwnPropertySymbols(t);o<r.length;o++)e.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(t,r[o])&&(n[r[o]]=t[r[o]]);return n};function XE(t,e,n){return dy(this,void 0,void 0,function*(){const[r,o]=yield UE(t,e,n),{encode:i,scale:a,data:s,tooltip:l}=o;if(Array.isArray(s)===!1)return null;const{channels:c}=e,u=_(Object.entries(i).filter(([,d])=>Ut(d)),d=>d.map(([p,h])=>Object.assign({name:p},h)),([d])=>{var p;const h=(p=/([^\d]+)\d*$/.exec(d))===null||p===void 0?void 0:p[1],y=c.find(g=>g.name===h);return y!=null&&y.independent?d:h}),f=c.filter(d=>{const{name:p,required:h}=d;if(u.find(([y])=>y===p))return!0;if(h)throw new Error(`Missing encoding for channel: ${p}.`);return!1}).flatMap(d=>{const{name:p,scale:h,scaleKey:y,range:g,quantitative:m,ordinal:b}=d;return u.filter(([O])=>O.startsWith(p)).map(([O,x],w)=>{const j=x.some(k=>k.visual),E=x.some(k=>k.constant),M=a[O]||{},{independent:R=!1,key:D=y||O,type:F=E?"constant":j?"identity":h}=M,A=HE(M,["independent","key","type"]),T=F==="constant",P=T?void 0:g;return{name:O,values:x,scaleKey:R||T?Symbol("independent"):D,scale:Object.assign(Object.assign({type:F,range:P},A),{quantitative:m,ordinal:b})}})});return[o,Object.assign(Object.assign({},e),{index:r,channels:f,tooltip:l})]})}function GE(t){const[e]=Pe("encode",t);return(n,r)=>r===void 0||n===void 0?null:Object.assign(Object.assign({},r),{type:"column",value:e(r)(n),field:VE(r)})}function UE(t,e,n){return dy(this,void 0,void 0,function*(){const{library:r}=n,[o]=Pe("transform",r),{preInference:i=[],postInference:a=[]}=e,{transform:s=[]}=t,l=[TE,fy,CE,LE,RE,DE,NE,BE,zE,IE,...i.map(o),...s.map(o),...a.map(o),FE];let c=[],u=t;for(const f of l)[c,u]=yield f(c,u,n);return[c,u]})}function VE(t){const{type:e,value:n}=t;return e==="field"&&typeof n=="string"?n:null}var Lr=function(t,e,n,r){function o(i){return i instanceof n?i:new n(function(a){a(i)})}return new(n||(n=Promise))(function(i,a){function s(u){try{c(r.next(u))}catch(f){a(f)}}function l(u){try{c(r.throw(u))}catch(f){a(f)}}function c(u){u.done?i(u.value):o(u.value).then(s,l)}c((r=r.apply(t,e||[])).next())})},ro=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,r=Object.getOwnPropertySymbols(t);o<r.length;o++)e.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(t,r[o])&&(n[r[o]]=t[r[o]]);return n};function Tu(t,e,n){var r;return Lr(this,void 0,void 0,function*(){const{library:o}=n,[i]=Pe("composition",o),[a]=Pe("interaction",o),s=new Set(Object.keys(o).map(A=>{var T;return(T=/mark\.(.*)/.exec(A))===null||T===void 0?void 0:T[1]}).filter(Ut)),l=new Set(Object.keys(o).map(A=>{var T;return(T=/component\.(.*)/.exec(A))===null||T===void 0?void 0:T[1]}).filter(Ut)),c=A=>{const{type:T}=A;if(typeof T=="function"){const{props:P={}}=T,{composite:k=!0}=P;if(k)return"mark"}return typeof T!="string"?T:s.has(T)||l.has(T)?"mark":T},u=A=>c(A)==="mark",f=A=>c(A)==="standardView",d=A=>{const{type:T}=A;return typeof T!="string"?!1:!!l.has(T)},p=A=>{if(f(A))return[A];const T=c(A);return i({type:T,static:d(A)})(A)},h=[],y=new Map,g=new Map,m=[t],b=[];for(;m.length;){const A=m.shift();if(f(A)){const T=g.get(A),[P,k]=T?gy(T,A,o):yield hy(A,n);y.set(P,A),h.push(P);const z=k.flatMap(p).map(C=>t0(C,o));if(m.push(...z),z.every(f)){const C=yield Promise.all(z.map(I=>yy(I,n)));b5(C);for(let I=0;I<z.length;I++){const Y=z[I],X=C[I];g.set(Y,X)}}}else{const T=u(A)?A:yield Oy(A,n),P=p(T);Array.isArray(P)?m.push(...P):typeof P=="function"&&b.push(P())}}n.emitter.emit(Jt.BEFORE_PAINT);const v=new Map,O=new Map,x=[];e.selectAll(wr(Ho)).data(h,A=>A.key).join(A=>A.append("g").attr("className",Ho).attr("id",T=>T.key).call(py).each(function(T,P,k){Lu(T,Tt(k),x,n),v.set(T,k)}),A=>A.call(py).each(function(T,P,k){Lu(T,Tt(k),x,n),O.set(T,k)}),A=>A.each(function(T,P,k){const z=k.nameInteraction.values();for(const C of z)C.destroy()}).remove());const w=(A,T,P)=>Array.from(A.entries()).map(([k,z])=>{const C=P||new Map,I=(W,Z=K=>K)=>C.set(W,Z),Y=y.get(k),X=KE(Tt(z),Y,n);return{view:k,container:z,options:Y,setState:I,update:(W,Z)=>Lr(this,void 0,void 0,function*(){const J=_t(Array.from(C.values()))(Y);return yield X(J,W,()=>{(0,Ur.Z)(Z)&&T(A,Z,C)})})}}),j=(A=O,T,P)=>{var k;const z=w(A,j,P);for(const C of z){const{options:I,container:Y}=C,X=Y.nameInteraction;let W=mc(I);T&&(W=W.filter(Z=>T.includes(Z[0])));for(const Z of W){const[K,J]=Z,rt=X.get(K);if(rt&&((k=rt.destroy)===null||k===void 0||k.call(rt)),J){const tt=Cu(C.view,K,J,a)(C,z,n.emitter);X.set(K,{destroy:tt})}}}},E=w(v,j);for(const A of E){const{options:T}=A,P=new Map;A.container.nameInteraction=P;for(const k of mc(T)){const[z,C]=k;if(C){const Y=Cu(A.view,z,C,a)(A,E,n.emitter);P.set(z,{destroy:Y})}}}j();const{width:M,height:R}=t,D=[];for(const A of b){const T=new Promise(P=>Lr(this,void 0,void 0,function*(){for(const k of A){const z=Object.assign({width:M,height:R},k);yield Tu(z,e,n)}P()}));D.push(T)}n.views=h,(r=n.animations)===null||r===void 0||r.forEach(A=>A==null?void 0:A.cancel()),n.animations=x,n.emitter.emit(Jt.AFTER_PAINT);const F=x.filter(Ut).map(dA).map(A=>A.finished);return Promise.all([...F,...D])})}function py(t){t.style("transform",e=>`translate(${e.layout.x}, ${e.layout.y})`)}function qE(t){const[,e]=Pe("interaction",t);return n=>{const[r,o]=n;try{return[r,e(r)]}catch(i){return[r,o.type]}}}function KE(t,e,n){const{library:r}=n,o=qE(r),i=l=>l[1]&&l[1].props&&l[1].props.reapplyWhenUpdate,s=mc(e).map(o).filter(i).map(l=>l[0]);return(l,c,u)=>Lr(this,void 0,void 0,function*(){const f=[],[d,p]=yield hy(l,n);Lu(d,t,f,n);for(const h of s.filter(y=>y!==c))QE(h,t,l,d,n);for(const h of p)Tu(h,t,n);return u(),{options:l,view:d}})}function QE(t,e,n,r,o){var i;const{library:a}=o,[s]=Pe("interaction",a),c=e.node().nameInteraction,u=mc(n).find(([y])=>y===t),f=c.get(t);if(!f||((i=f.destroy)===null||i===void 0||i.call(f),!u[1]))return;const d=Cu(r,t,u[1],s),p={options:n,view:r,container:e.node(),update:y=>Promise.resolve(y)},h=d(p,[],o.emitter);c.set(t,{destroy:h})}function hy(t,e){return Lr(this,void 0,void 0,function*(){const{library:n}=e,r=yield tA(t,e),o=JE(r);t.interaction=o.interaction,t.coordinate=o.coordinate,t.marks=[...o.marks,...o.components];const i=t0(o,n),a=yield yy(i,e);return gy(a,i,n)})}function JE(t){const{coordinate:e={},interaction:n={},style:r={},marks:o}=t,i=ro(t,["coordinate","interaction","style","marks"]),a=o.map(d=>d.coordinate||{}),s=o.map(d=>d.interaction||{}),l=o.map(d=>d.viewStyle||{}),c=[...a,e].reduceRight((d,p)=>(0,et.Z)(d,p),{}),u=[n,...s].reduce((d,p)=>(0,et.Z)(d,p),{}),f=[...l,r].reduce((d,p)=>(0,et.Z)(d,p),{});return Object.assign(Object.assign({},i),{marks:o,coordinate:c,interaction:u,style:f})}function tA(t,e){return Lr(this,void 0,void 0,function*(){const{library:n}=e,[r,o]=Pe("mark",n),i=new Set(Object.keys(n).map(p=>{var h;return(h=/component\.(.*)/.exec(p))===null||h===void 0?void 0:h[1]}).filter(Ut)),{marks:a}=t,s=[],l=[],c=[...a],{width:u,height:f}=gE(t),d={options:t,width:u,height:f};for(;c.length;){const[p]=c.splice(0,1),h=yield Oy(p,e),{type:y=kt("G2Mark type is required."),key:g}=h;if(i.has(y))l.push(h);else{const{props:m={}}=o(y),{composite:b=!0}=m;if(!b)s.push(h);else{const{data:v}=h,O=Object.assign(Object.assign({},h),{data:v&&(Array.isArray(v)?v:v.value)}),x=yield r(O,d),w=Array.isArray(x)?x:[x];c.unshift(...w.map((j,E)=>Object.assign(Object.assign({},j),{key:`${g}-${E}`})))}}}return Object.assign(Object.assign({},t),{marks:s,components:l})})}function yy(t,e){return Lr(this,void 0,void 0,function*(){const{library:n}=e,[r]=Pe("theme",n),[,o]=Pe("mark",n),{theme:i,marks:a,coordinates:s=[]}=t,l=r(vy(i)),c=new Map;for(const f of a){const{type:d}=f,{props:p={}}=o(d),h=yield XE(f,p,e);if(h){const[y,g]=h;c.set(y,g)}}const u=ve(Array.from(c.values()).flatMap(f=>f.channels),({scaleKey:f})=>f);for(const f of u.values()){const d=f.reduce((O,{scale:x})=>(0,et.Z)(O,x),{}),{scaleKey:p}=f[0],{values:h}=f[0],y=Array.from(new Set(h.map(O=>O.field).filter(Ut))),g=(0,et.Z)({guide:{title:y.length===0?void 0:y},field:y[0]},d),{name:m}=f[0],b=f.flatMap(({values:O})=>O.map(x=>x.value)),v=Object.assign(Object.assign({},p5(m,b,g,s,l,n)),{uid:Symbol("scale"),key:p});f.forEach(O=>O.scale=v)}return c})}function Cu(t,e,n,r){const o=t.theme,i=typeof e=="string"?o[e]||{}:{};return r((0,et.Z)(i,Object.assign({type:e},n)))}function gy(t,e,n){var r;const[o]=Pe("mark",n),[i]=Pe("theme",n),[a]=Pe("labelTransform",n),{key:s,frame:l=!1,theme:c,clip:u,style:f={},labelTransform:d=[]}=e,p=i(vy(c)),h=Array.from(t.values()),y=g5(h,e),g=G5(X5(gA(Array.from(y),h,t),e,n)),m=yE(g,e,p,n),b=WS(m,e,n),v=l?(0,et.Z)({mainLineWidth:1,mainStroke:"#000"},f):f;bE(oy(g),b,m),hE(g);const O=new Map(Array.from(t.values()).flatMap(E=>{const{channels:M}=E;return M.map(({scale:R})=>[R.uid,U0(R,n)])}));y5(t,O);const x={};for(const E of g){const{scales:M=[]}=E,R=[];for(const D of M){const{name:F,uid:A}=D,T=(r=O.get(A))!==null&&r!==void 0?r:U0(D,n);R.push(T),F==="y"&&T.update(Object.assign(Object.assign({},T.getOptions()),{xScale:x.x})),G0(x,{[F]:T})}E.scaleInstances=R}const w=[];for(const[E,M]of t.entries()){const{children:R,dataDomain:D,modifier:F,key:A}=E,{index:T,channels:P,tooltip:k}=M,z=Object.fromEntries(P.map(({name:st,scale:ot})=>[st,ot])),C=yr(z,({uid:st})=>O.get(st));G0(x,C);const I=h5(P,C),Y=o(E),[X,W,Z]=rA(Y(T,C,I,b)),K=D||X.length,J=F?F(W,K,m):[],rt=st=>{var ot,dt;return(dt=(ot=k.title)===null||ot===void 0?void 0:ot[st])===null||dt===void 0?void 0:dt.value},nt=st=>k.items.map(ot=>ot[st]),tt=X.map((st,ot)=>{const dt=Object.assign({points:W[ot],transform:J[ot],index:st,markKey:A,viewKey:s},k&&{title:rt(st),items:nt(st)});for(const[xt,vt]of Object.entries(I))dt[xt]=vt[st],Z&&(dt[`series${(0,Vr.Z)(xt)}`]=Z[ot].map(wt=>vt[wt]));return Z&&(dt.seriesIndex=Z[ot]),Z&&k&&(dt.seriesItems=Z[ot].map(xt=>nt(xt)),dt.seriesTitle=Z[ot].map(xt=>rt(xt))),dt});M.data=tt,M.index=X;const yt=R==null?void 0:R(tt,C,m);w.push(...yt||[])}return[{layout:m,theme:p,coordinate:b,markState:t,key:s,clip:u,scale:x,style:v,components:g,labelTransform:_t(d.map(a))},w]}function Lu(t,e,n,r){return Lr(this,void 0,void 0,function*(){const{library:o}=r,{components:i,theme:a,layout:s,markState:l,coordinate:c,key:u,style:f,clip:d,scale:p}=t,{x:h,y,width:g,height:m}=s,b=ro(s,["x","y","width","height"]),v=["view","plot","main","content"],O=v.map((C,I)=>I),x=["a","margin","padding","inset"],w=v.map(C=>Re(Object.assign({},a.view,f),C)),j=x.map(C=>at(b,C)),E=C=>C.style("x",I=>A[I].x).style("y",I=>A[I].y).style("width",I=>A[I].width).style("height",I=>A[I].height).each(function(I,Y,X){mA(Tt(X),w[I])});let M=0,R=0,D=g,F=m;const A=O.map(C=>{const I=j[C],{left:Y=0,top:X=0,bottom:W=0,right:Z=0}=I;return M+=Y,R+=X,D-=Y+Z,F-=X+W,{x:M,y:R,width:D,height:F}});e.selectAll(wr(Bi)).data(O.filter(C=>Ut(w[C])),C=>v[C]).join(C=>C.append("rect").attr("className",Bi).style("zIndex",-2).call(E),C=>C.call(E),C=>C.remove());const T=sA(l),P=T?{duration:T[1]}:!1;for(const[,C]of Jo(i,I=>`${I.type}-${I.position}`))C.forEach((I,Y)=>I.index=Y);const k=e.selectAll(wr(bs)).data(i,C=>`${C.type}-${C.position}-${C.index}`).join(C=>C.append("g").style("zIndex",({zIndex:I})=>I||-1).attr("className",bs).append(I=>ry((0,et.Z)({animate:P,scale:p},I),c,a,o,l)),C=>C.transition(function(I,Y,X){const{preserve:W=!1}=I;if(W)return;const Z=ry((0,et.Z)({animate:P,scale:p},I),c,a,o,l),{attributes:K}=Z,[J]=X.childNodes;return J.update(K,!1)})).transitions();n.push(...k.flat().filter(Ut));const z=e.selectAll(wr(Bn)).data([s],()=>u).join(C=>C.append("rect").style("zIndex",0).style("fill","transparent").attr("className",Bn).call(xy).call(wy,Array.from(l.keys())).call(Sy,d),C=>C.call(wy,Array.from(l.keys())).call(I=>T?yA(I,T):xy(I)).call(Sy,d)).transitions();n.push(...z.flat());for(const[C,I]of l.entries()){const{data:Y}=I,{key:X,class:W,type:Z}=C,K=e.select(`#${X}`),J=uA(C,I,t,r),rt=fA(C,I,t,o),nt=pA(C,I,t,o),tt=hA(C,I,t,o),yt=cA(e,K,W,"element"),st=K.selectAll(wr(zn)).selectFacetAll(yt).data(Y,ot=>ot.key,ot=>ot.groupKey).join(ot=>ot.append(J).attr("className",zn).attr("markType",Z).transition(function(dt,xt,vt){return rt(dt,[vt])}),ot=>ot.call(dt=>{const xt=dt.parent(),vt=yn(wt=>{const[re,It]=wt.getBounds().min;return[re,It]});dt.transition(function(wt,re,It){lA(It,xt,vt);const Bt=J(wt,re),xe=nt(wt,[It],[Bt]);return xe!=null&&xe.length||(It.nodeName===Bt.nodeName&&Bt.nodeName!=="g"?Xt(It,Bt):(It.parentNode.replaceChild(Bt,It),Bt.className=zn,Bt.markType=Z,Bt.__data__=It.__data__)),xe}).attr("markType",Z).attr("className",zn)}),ot=>ot.each(function(dt,xt,vt){vt.__removed__=!0}).transition(function(dt,xt,vt){return tt(dt,[vt])}).remove(),ot=>ot.append(J).attr("className",zn).attr("markType",Z).transition(function(dt,xt,vt){const{__fromElements__:wt}=vt,re=nt(dt,wt,[vt]);return new je(wt,null,vt.parentNode).transition(re).remove(),re}),ot=>ot.transition(function(dt,xt,vt){const re=new je([],vt.__toData__,vt.parentNode).append(J).attr("className",zn).attr("markType",Z).nodes();return nt(dt,[vt],re)}).remove()).transitions();n.push(...st.flat())}eA(t,e,n,o,r)})}function eA(t,e,n,r,o){const[i]=Pe("labelTransform",r),{markState:a,labelTransform:s}=t,l=e.select(wr(Ni)).node(),c=new Map,u=new Map,f=Array.from(a.entries()).flatMap(([m,b])=>{const{labels:v=[],key:O}=m,x=aA(m,b,t,r,o),w=e.select(`#${O}`).selectAll(wr(zn)).nodes().filter(j=>!j.__removed__);return v.flatMap((j,E)=>{const{transform:M=[]}=j,R=ro(j,["transform"]);return w.flatMap(D=>{const F=nA(R,E,D);return F.forEach(A=>{c.set(A,T=>x(Object.assign(Object.assign({},T),{element:D}))),u.set(A,j)}),F})})}),d=Tt(l).selectAll(wr(zi)).data(f,m=>m.key).join(m=>m.append(b=>c.get(b)(b)).attr("className",zi),m=>m.each(function(b,v,O){const w=c.get(b)(b);Xt(O,w)}),m=>m.remove()).nodes(),p=ve(d,m=>u.get(m.__data__)),{coordinate:h,layout:y}=t,g={canvas:o.canvas,coordinate:h,layout:y};for(const[m,b]of p){const{transform:v=[]}=m;_t(v.map(i))(b,g)}s&&s(d,g)}function nA(t,e,n){const{seriesIndex:r,seriesKey:o,points:i,key:a,index:s}=n.__data__,l=iA(n);if(!r)return[Object.assign(Object.assign({},t),{key:`${a}-${e}`,bounds:l,index:s,points:i,dependentElement:n})];const c=oA(t),u=r.map((f,d)=>Object.assign(Object.assign({},t),{key:`${o[d]}-${e}`,bounds:[i[d]],index:f,points:i,dependentElement:n}));return c?c(u):u}function rA([t,e,n]){if(n)return[t,e,n];const r=[],o=[];for(let i=0;i<t.length;i++){const a=t[i],s=e[i];s.every(([l,c])=>Ut(l)&&Ut(c))&&(r.push(a),o.push(s))}return[r,o]}function oA(t){const{selector:e}=t;if(!e)return null;if(typeof e=="function")return e;if(e==="first")return n=>[n[0]];if(e==="last")return n=>[n[n.length-1]];throw new Error(`Unknown selector: ${e}`)}function iA(t){const e=t.cloneNode(),n=t.getAnimations();e.style.visibility="hidden",n.forEach(a=>{const s=a.effect.getKeyframes();e.attr(s[s.length-1])}),t.parentNode.appendChild(e);const r=e.getLocalBounds();e.destroy();const{min:o,max:i}=r;return[o,i]}function aA(t,e,n,r,o){const[i]=Pe("shape",r),{data:a,encode:s}=t,{data:l,defaultLabelShape:c}=e,u=l.map(y=>y.points),f=yr(s,y=>y.value),{theme:d,coordinate:p}=n,h=Object.assign(Object.assign({},o),{document:Qh(o),theme:d,coordinate:p});return y=>{const{index:g,points:m}=y,b=a[g],{formatter:v=I=>`${I}`,transform:O,style:x,render:w,selector:j,element:E}=y,M=ro(y,["formatter","transform","style","render","selector","element"]),R=yr(Object.assign(Object.assign({},M),x),I=>my(I,b,g,a,{channel:f,element:E})),{shape:D=c,text:F}=R,A=ro(R,["shape","text"]),T=typeof v=="string"?qr(v):v,P=Object.assign(Object.assign({},A),{text:T(F,b,g,a),datum:b}),k=Object.assign({type:`label.${D}`,render:w},A),z=i(k,h),C=by(d,"label",D,"label");return z(m,P,C,u)}}function my(t,e,n,r,o){return typeof t=="function"?t(e,n,r,o):typeof t!="string"?t:vn(e)&&e[t]!==void 0?e[t]:t}function sA(t){let e=-1/0,n=1/0;for(const[r,o]of t){const{animate:i={}}=r,{data:a}=o,{enter:s={},update:l={},exit:c={}}=i,{type:u,duration:f=300,delay:d=0}=l,{type:p,duration:h=300,delay:y=0}=s,{type:g,duration:m=300,delay:b=0}=c;for(const v of a){const{updateType:O=u,updateDuration:x=f,updateDelay:w=d,enterType:j=p,enterDuration:E=h,enterDelay:M=y,exitDuration:R=m,exitDelay:D=b,exitType:F=g}=v;(O===void 0||O)&&(e=Math.max(e,x+w),n=Math.min(n,w)),(F===void 0||F)&&(e=Math.max(e,R+D),n=Math.min(n,D)),(j===void 0||j)&&(e=Math.max(e,E+M),n=Math.min(n,M))}}return e===-1/0?null:[n,e-n]}function cA(t,e,n,r){return t.node().parentElement.findAll(i=>i.style.facet!==void 0&&i.style.facet===n&&i!==e.node()).flatMap(i=>i.getElementsByClassName(r))}function lA(t,e,n){if(!t.__facet__)return;const r=t.parentNode.parentNode,o=e.parentNode,[i,a]=n(r),[s,l]=n(o),c=`translate(${i-s}, ${a-l})`;An(t,c),e.append(t)}function uA(t,e,n,r){const{library:o}=r,[i]=Pe("shape",o),{data:a,encode:s}=t,{defaultShape:l,data:c,shape:u}=e,f=yr(s,b=>b.value),d=c.map(b=>b.points),{theme:p,coordinate:h}=n,{type:y,style:g={}}=t,m=Object.assign(Object.assign({},r),{document:Qh(r),coordinate:h,theme:p});return b=>{const{shape:v=l}=g,{shape:O=v,points:x,seriesIndex:w,index:j}=b,E=ro(b,["shape","points","seriesIndex","index"]),M=Object.assign(Object.assign({},E),{index:j}),R=w?w.map(P=>a[P]):a[j],D=w||j,F=yr(g,P=>my(P,R,D,a,{channel:f})),A=u[O]?u[O](F,m):i(Object.assign(Object.assign({},F),{type:_y(t,O)}),m),T=by(p,y,O,l);return A(x,M,T,d)}}function by(t,e,n,r){if(typeof e!="string")return;const{color:o}=t,i=t[e]||{},a=i[n]||i[r];return Object.assign({color:o},a)}function Ru(t,e,n,r,o){var i,a;const[,s]=Pe("shape",o),[l]=Pe("animation",o),{defaultShape:c,shape:u}=n,{theme:f,coordinate:d}=r,h=`default${(0,Vr.Z)(t)}Animation`,{[h]:y}=((i=u[c])===null||i===void 0?void 0:i.props)||s(_y(e,c)).props,{[t]:g={}}=f,m=((a=e.animate)===null||a===void 0?void 0:a[t])||{},b={coordinate:d};return(v,O,x)=>{const{[`${t}Type`]:w,[`${t}Delay`]:j,[`${t}Duration`]:E,[`${t}Easing`]:M}=v,R=Object.assign({type:w||y},m);if(!R.type)return null;const D=l(R,b),F={delay:j,duration:E,easing:M},A=D(O,x,(0,et.Z)(g,F));let T=[];return Array.isArray(A)?T=A:T=[A],T.filter(Boolean)}}function fA(t,e,n,r){return Ru("enter",t,e,n,r)}function dA(t){return t.finished.then(()=>{t.cancel()}),t}function pA(t,e,n,r){return Ru("update",t,e,n,r)}function hA(t,e,n,r){return Ru("exit",t,e,n,r)}function vy(t={}){if(typeof t=="string")return{type:t};const{type:e="light"}=t,n=ro(t,["type"]);return Object.assign(Object.assign({},n),{type:e})}function mc(t){const e={event:!0,tooltip:!0,sliderFilter:!0,legendFilter:!0,scrollbarFilter:!0},{interaction:n={}}=t;return Object.entries((0,et.Z)(e,n)).reverse()}function Oy(t,e){return Lr(this,void 0,void 0,function*(){const{data:n}=t,r=ro(t,["data"]);if(n==null)return t;const[,{data:o}]=yield fy([],{data:n},e);return Object.assign({data:o},r)})}function xy(t){t.style("transform",e=>`translate(${e.paddingLeft+e.marginLeft}, ${e.paddingTop+e.marginTop})`).style("width",e=>e.innerWidth).style("height",e=>e.innerHeight)}function yA(t,e){const[n,r]=e;t.transition(function(o,i,a){const{transform:s,width:l,height:c}=a.style,{paddingLeft:u,paddingTop:f,innerWidth:d,innerHeight:p,marginLeft:h,marginTop:y}=o,g=[{transform:s,width:l,height:c},{transform:`translate(${u+h}, ${f+y})`,width:d,height:p}];return a.animate(g,{delay:n,duration:r,fill:"both"})})}function _y(t,e){const{type:n}=t;return typeof e=="string"?`${n}.${e}`:e}function wy(t,e){const n=i=>i.class!==void 0?`${i.class}`:"";t.nodes().length===0||(t.selectAll(wr(ho)).data(e,i=>i.key).join(i=>i.append("g").attr("className",ho).attr("id",a=>a.key).style("facet",n).style("fill","transparent").style("zIndex",a=>{var s;return(s=a.zIndex)!==null&&s!==void 0?s:0}),i=>i.style("facet",n).style("fill","transparent").style("zIndex",a=>{var s;return(s=a.zIndex)!==null&&s!==void 0?s:0}),i=>i.remove()),t.select(wr(Ni)).node())||t.append("g").attr("className",Ni).style("zIndex",0)}function wr(...t){return t.map(e=>`.${e}`).join("")}function Sy(t,e){t.node()&&t.style("clipPath",n=>{if(!e)return null;const{paddingTop:r,paddingLeft:o,marginLeft:i,marginTop:a,innerWidth:s,innerHeight:l}=n;return new ht.UL({style:{x:o+i,y:r+a,width:s,height:l}})})}function gA(t,e,n){var r;for(const[c]of n.entries())if(c.type==="cell")return t.filter(u=>u.name!=="shape");if(e.length!==1||t.some(c=>c.name==="shape"))return t;const{defaultShape:o}=e[0];if(!["point","line","rect","hollow"].includes(o))return t;const a={point:"point",line:"hyphen",rect:"square",hollow:"hollow"},l={field:((r=t.find(c=>c.name==="color"))===null||r===void 0?void 0:r.field)||null,name:"shape",type:"constant",domain:[],range:[a[o]]};return[...t,l]}function mA(t,e){for(const[n,r]of Object.entries(e))t.style(n,r)}function bA(...t){return e=>t.reduce((n,r)=>r(n),e)}var ue=Q(85695);function vA(t){const{style:e,scale:n,type:r}=t,o={},i=(0,ue.Z)(e,"columnWidthRatio");return i&&r==="interval"&&(o.x=Object.assign(Object.assign({},n==null?void 0:n.x),{padding:1-i})),Object.assign(Object.assign({},t),{scale:Object.assign(Object.assign({},n),o)})}function jy(t){const e=OA(t);return e.children&&Array.isArray(e.children)&&(e.children=e.children.map(n=>jy(n))),e}function OA(t){return bA(vA)(t)}function Ey(t){const e=(0,et.Z)({},t),n=new Map([[e,null]]),r=new Map([[null,-1]]),o=[e];for(;o.length;){const i=o.shift();if(i.key===void 0){const s=n.get(i),l=r.get(i),c=s===null?"0":`${s.key}-${l}`;i.key=c}const{children:a=[]}=i;if(Array.isArray(a))for(let s=0;s<a.length;s++){const l=(0,et.Z)({},a[s]);a[s]=l,n.set(l,i),r.set(l,s),o.push(l)}}return e}function xA(t,e){const n=new bo.Th;return n.registerPlugin(new Vi.S),new ht.Xz({width:t,height:e,container:document.createElement("div"),renderer:n})}function _A(t,e={},n=()=>{},r=o=>{throw o}){const o=Cs(t),{width:i=640,height:a=480,depth:s=0}=o,l=jy(o),c=Ey(l),{canvas:u=xA(i,a),emitter:f=new Zn.Z,library:d}=e;e.canvas=u,e.emitter=f;const{width:p,height:h}=u.getConfig();(p!==i||h!==a)&&u.resize(i,a),f.emit(Jt.BEFORE_RENDER);const y=Tt(u.document.documentElement);return u.ready.then(()=>Tu(Object.assign(Object.assign({},c),{width:i,height:a,depth:s}),y,e)).then(()=>{if(s){const[g,m]=u.document.documentElement.getPosition();u.document.documentElement.setPosition(g,m,-s/2)}u.requestAnimationFrame(()=>{u.requestAnimationFrame(()=>{f.emit(Jt.AFTER_RENDER),n==null||n()})})}).catch(g=>{r==null||r(g)}),SA(u.getConfig().container)}function sD(t,e={},n=()=>{},r=o=>{throw o}){var o;const{width:i=640,height:a=480}=t,s=Ey(t),{group:l=new Group,emitter:c=new EventEmitter,library:u}=e;l!=null&&l.parentElement||error("renderToMountedElement can't render chart to unmounted group.");const f=select(l);return e.group=l,e.emitter=c,e.canvas=e.canvas||((o=l==null?void 0:l.ownerDocument)===null||o===void 0?void 0:o.defaultView),c.emit(ChartEvent.BEFORE_RENDER),plot(Object.assign(Object.assign({},s),{width:i,height:a}),f,e).then(()=>{var d;(d=e.canvas)===null||d===void 0||d.requestAnimationFrame(()=>{c.emit(ChartEvent.AFTER_RENDER),n==null||n()})}).catch(d=>{r==null||r(d)}),l}function Ay(t,e={},n=!1){const{canvas:r,emitter:o}=e;r&&(wA(r),n?r.destroy():r.destroyChildren()),o.off()}function wA(t){const e=t.getRoot().querySelectorAll(`.${Ho}`);e==null||e.forEach(n=>{const{nameInteraction:r=new Map}=n;(r==null?void 0:r.size)>0&&Array.from(r==null?void 0:r.values()).forEach(o=>{o==null||o.destroy()})})}function SA(t){return typeof t=="string"?document.getElementById(t):t}const mi=t=>t?parseInt(t):0;function jA(t){const e=getComputedStyle(t),n=t.clientWidth||mi(e.width),r=t.clientHeight||mi(e.height),o=mi(e.paddingLeft)+mi(e.paddingRight),i=mi(e.paddingTop)+mi(e.paddingBottom);return{width:n-o,height:r-i}}function cD(t){const{height:e,width:n,padding:r=0,paddingLeft:o=r,paddingRight:i=r,paddingTop:a=r,paddingBottom:s=r,margin:l=0,marginLeft:c=l,marginRight:u=l,marginTop:f=l,marginBottom:d=l,inset:p=0,insetLeft:h=p,insetRight:y=p,insetTop:g=p,insetBottom:m=p}=t,b=x=>x==="auto"?20:x,v=n-b(o)-b(i)-c-u-h-y,O=e-b(a)-b(s)-f-d-g-m;return{width:v,height:O}}function Du(t,e){const n=[t];for(;n.length;){const r=n.shift();e&&e(r);const o=r.children||[];for(const i of o)n.push(i)}}class Iu{constructor(e={},n){this.parentNode=null,this.children=[],this.index=0,this.type=n,this.value=e}map(e=n=>n){const n=e(this.value);return this.value=n,this}attr(e,n){return arguments.length===1?this.value[e]:this.map(r=>(r[e]=n,r))}append(e){const n=new e({});return n.children=[],this.push(n),n}push(e){return e.parentNode=this,e.index=this.children.length,this.children.push(e),this}remove(){const e=this.parentNode;if(e){const{children:n}=e,r=n.findIndex(o=>o===this);n.splice(r,1)}return this}getNodeByKey(e){let n=null;return Du(this,o=>{e===o.attr("key")&&(n=o)}),n}getNodesByType(e){const n=[];return Du(this,o=>{e===o.type&&n.push(o)}),n}getNodeByType(e){let n=null;return Du(this,r=>{n||e===r.type&&(n=r)}),n}call(e,...n){return e(this.map(),...n),this}getRoot(){let e=this;for(;e&&e.parentNode;)e=e.parentNode;return e}}var My=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,r=Object.getOwnPropertySymbols(t);o<r.length;o++)e.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(t,r[o])&&(n[r[o]]=t[r[o]]);return n};const Fu=["width","height","depth","padding","paddingLeft","paddingRight","paddingBottom","paddingTop","inset","insetLeft","insetRight","insetTop","insetBottom","margin","marginLeft","marginRight","marginTop","marginBottom","autoFit","theme","title","interaction"],ky="__remove__",Py="__callback__",Ty=1,Cy=1;function EA(t){if(t===void 0){const e=document.createElement("div");return e[ky]=!0,e}return typeof t=="string"?document.getElementById(t):t}function AA(t){const e=t.parentNode;e&&e.removeChild(t)}function MA(t){if(t.type!==null)return t;const e=t.children[t.children.length-1];for(const n of Fu)e.attr(n,t.attr(n));return e}function Ly(t){return Object.assign(Object.assign({},t.value),{type:t.type})}function Nu(t,e){const{width:n,height:r,autoFit:o,depth:i=0}=t;let a=640,s=480;if(o){const{width:l,height:c}=jA(e);a=l||a,s=c||s}return a=n||a,s=r||s,{width:Math.max((0,V.Z)(a)?a:Ty,Ty),height:Math.max((0,V.Z)(s)?s:Cy,Cy),depth:i}}function kA(t){const e=MA(t),n=[e],r=new Map;for(r.set(e,Ly(e));n.length;){const o=n.pop(),i=r.get(o),{children:a=[]}=o;for(const s of a)if(s.type===Py)i.children=s.value;else{const l=Ly(s),{children:c=[]}=i;c.push(l),n.push(s),r.set(s,l),i.children=c}}return r.get(e)}function PA(t,e){return typeof t=="function"?!0:new Set(Object.keys(e)).has(t)}function TA(t,e){return typeof t!="function"&&new Set(Object.keys(e)).has(t)}function CA(t,e,n,r,o){const{type:i}=t,{type:a=n||i}=e;if(TA(a,o)){for(const s of Fu)t.attr(s)!==void 0&&e[s]===void 0&&(e[s]=t.attr(s));return e}if(PA(a,r)){const s={type:"view"},l=Object.assign({},e);for(const c of Fu)l[c]!==void 0&&(s[c]=l[c],delete l[c]);return Object.assign(Object.assign({},s),{children:[l]})}return e}function LA(t,e,n){if(typeof t=="function")return e.mark;const o=Object.assign(Object.assign({},e),n)[t];if(!o)throw new Error(`Unknown mark: ${t}.`);return o}function RA(t,e,n){if(typeof t=="function"){const l=new Iu;return l.value=t,l.type=Py,l}const{type:r,children:o}=t,i=My(t,["type","children"]),a=LA(r,e,n),s=new a;return s.value=i,s.type=r,s}function DA(t,e){const{type:n,children:r}=e,o=My(e,["type","children"]);t.type===n||n===void 0?Gr(t.value,o):typeof n=="string"&&(t.type=n,t.value=o)}function IA(t,e,n,r){if(!t)return;const o=[[t,e]];for(;o.length;){const[i,a]=o.shift(),s=RA(a,n,r);Array.isArray(i.children)&&i.push(s);const{children:l}=a;if(Array.isArray(l))for(const c of l)o.push([s,c]);else typeof l=="function"&&o.push([s,l])}}function FA(t,e,n,r,o){const i=CA(t,e,n,r,o),a=[[null,t,i]];for(;a.length;){const[s,l,c]=a.shift();if(!l)IA(s,c,r,o);else if(!c)l.remove();else{DA(l,c);const{children:u}=c,{children:f}=l;if(Array.isArray(u)&&Array.isArray(f)){const d=Math.max(u.length,f.length);for(let p=0;p<d;p++){const h=u[p],y=f[p];a.push([l,y,h])}}else typeof u=="function"&&a.push([l,null,u])}}}function NA(){let t,e;return[new Promise((r,o)=>{e=r,t=o}),e,t]}function zA(t,e,{key:n=e}){t.prototype[e]=function(r){return arguments.length===0?this.attr(n):this.attr(n,r)}}function BA(t,e,{key:n=e}){t.prototype[e]=function(r){if(arguments.length===0)return this.attr(n);if(Array.isArray(r))return this.attr(n,r);const o=[...this.attr(n)||[],r];return this.attr(n,o)}}function $A(t,e,{key:n=e}){t.prototype[e]=function(r,o){if(arguments.length===0)return this.attr(n);if(arguments.length===1&&typeof r!="string")return this.attr(n,r);const i=this.attr(n)||{};return i[r]=arguments.length===1?!0:o,this.attr(n,i)}}function YA(t,e,n){t.prototype[e]=function(r){if(arguments.length===0)return this.attr(e);if(Array.isArray(r))return this.attr(e,{items:r});if(vn(r)&&(r.title!==void 0||r.items!==void 0))return this.attr(e,r);if(r===null||r===!1)return this.attr(e,r);const o=this.attr(e)||{},{items:i=[]}=o;return i.push(r),o.items=i,this.attr(e,o)}}function WA(t,e,{ctor:n}){t.prototype[e]=function(r){const o=this.append(n);return e==="mark"&&(o.type=r),o}}function ZA(t,e,{ctor:n}){t.prototype[e]=function(){return this.type=null,this.append(n)}}function bc(t){return e=>{for(const[n,r]of Object.entries(t)){const{type:o}=r;o==="value"?zA(e,n,r):o==="array"?BA(e,n,r):o==="object"?$A(e,n,r):o==="node"?WA(e,n,r):o==="container"?ZA(e,n,r):o==="mix"&&YA(e,n,r)}return e}}function Ry(t){return Object.fromEntries(Object.entries(t).map(([e,n])=>[e,{type:"node",ctor:n}]))}const Dy={encode:{type:"object"},scale:{type:"object"},data:{type:"value"},transform:{type:"array"},style:{type:"object"},animate:{type:"object"},coordinate:{type:"object"},interaction:{type:"object"},label:{type:"array",key:"labels"},axis:{type:"object"},legend:{type:"object"},slider:{type:"object"},scrollbar:{type:"object"},state:{type:"object"},layout:{type:"object"},theme:{type:"object"},title:{type:"value"}},HA=Object.assign(Object.assign({},Dy),{tooltip:{type:"mix"},viewStyle:{type:"object"}}),XA=Object.assign(Object.assign({},Dy),{labelTransform:{type:"array"}});var GA=function(t,e,n,r){var o=arguments.length,i=o<3?e:r===null?r=Object.getOwnPropertyDescriptor(e,n):r,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")i=Reflect.decorate(t,e,n,r);else for(var s=t.length-1;s>=0;s--)(a=t[s])&&(i=(o<3?a(i):o>3?a(e,n,i):a(e,n))||i);return o>3&&i&&Object.defineProperty(e,n,i),i};let vc=class extends Iu{changeData(e){var n;const r=this.getRoot();if(r)return this.attr("data",e),!((n=this.children)===null||n===void 0)&&n.length&&this.children.forEach(o=>{o.attr("data",e)}),r==null?void 0:r.render()}getView(){const e=this.getRoot(),{views:n}=e.getContext();if(n!=null&&n.length)return n.find(r=>r.key===this._key)}getScale(){var e;return(e=this.getView())===null||e===void 0?void 0:e.scale}getScaleByChannel(e){const n=this.getScale();if(n)return n[e]}getCoordinate(){var e;return(e=this.getView())===null||e===void 0?void 0:e.coordinate}getTheme(){var e;return(e=this.getView())===null||e===void 0?void 0:e.theme}getGroup(){const e=this._key;return e?this.getRoot().getContext().canvas.getRoot().getElementById(e):void 0}show(){const e=this.getGroup();e&&!e.isVisible()&&tc(e)}hide(){const e=this.getGroup();e&&e.isVisible()&&gu(e)}};vc=GA([bc(XA)],vc);var UA=function(t,e,n,r){var o=arguments.length,i=o<3?e:r===null?r=Object.getOwnPropertyDescriptor(e,n):r,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")i=Reflect.decorate(t,e,n,r);else for(var s=t.length-1;s>=0;s--)(a=t[s])&&(i=(o<3?a(i):o>3?a(e,n,i):a(e,n))||i);return o>3&&i&&Object.defineProperty(e,n,i),i};let zu=class extends Iu{changeData(e){const n=this.getRoot();if(n)return this.attr("data",e),n==null?void 0:n.render()}getMark(){var e;const n=(e=this.getRoot())===null||e===void 0?void 0:e.getView();if(!n)return;const{markState:r}=n,o=Array.from(r.keys()).find(i=>i.key===this.attr("key"));return r.get(o)}getScale(){var e;const n=(e=this.getRoot())===null||e===void 0?void 0:e.getView();if(n)return n==null?void 0:n.scale}getScaleByChannel(e){var n,r;const o=(n=this.getRoot())===null||n===void 0?void 0:n.getView();if(o)return(r=o==null?void 0:o.scale)===null||r===void 0?void 0:r[e]}getGroup(){const e=this.attr("key");return e?this.getRoot().getContext().canvas.getRoot().getElementById(e):void 0}};zu=UA([bc(HA)],zu);var VA=function(t,e,n,r){var o=arguments.length,i=o<3?e:r===null?r=Object.getOwnPropertyDescriptor(e,n):r,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")i=Reflect.decorate(t,e,n,r);else for(var s=t.length-1;s>=0;s--)(a=t[s])&&(i=(o<3?a(i):o>3?a(e,n,i):a(e,n))||i);return o>3&&i&&Object.defineProperty(e,n,i),i},qA=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,r=Object.getOwnPropertySymbols(t);o<r.length;o++)e.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(t,r[o])&&(n[r[o]]=t[r[o]]);return n};const KA="G2_CHART_KEY";class QA extends vc{constructor(e){const{container:n,canvas:r,renderer:o,plugins:i,lib:a,createCanvas:s}=e,l=qA(e,["container","canvas","renderer","plugins","lib","createCanvas"]);super(l,"view"),this._hasBindAutoFit=!1,this._rendering=!1,this._trailing=!1,this._trailingResolve=null,this._trailingReject=null,this._previousDefinedType=null,this._onResize=(0,Nl.Z)(()=>{this.forceFit()},300),this._renderer=o||new bo.Th,this._plugins=i||[],this._container=EA(n),this._emitter=new Zn.Z,this._context={library:Object.assign(Object.assign({},a),Es),emitter:this._emitter,canvas:r,createCanvas:s},this._create()}render(){if(this._rendering)return this._addToTrailing();this._context.canvas||this._createCanvas(),this._bindAutoFit(),this._rendering=!0;const e=new Promise((i,a)=>_A(this._computedOptions(),this._context,this._createResolve(i),this._createReject(a))),[n,r,o]=NA();return e.then(r).catch(o).then(()=>this._renderTrailing()),n}options(e){if(arguments.length===0)return kA(this);const{type:n}=e;return n&&(this._previousDefinedType=n),FA(this,e,this._previousDefinedType,this._marks,this._compositions),this}getContainer(){return this._container}getContext(){return this._context}on(e,n,r){return this._emitter.on(e,n,r),this}once(e,n){return this._emitter.once(e,n),this}emit(e,...n){return this._emitter.emit(e,...n),this}off(e,n){return this._emitter.off(e,n),this}clear(){const e=this.options();this.emit(Jt.BEFORE_CLEAR),this._reset(),Ay(e,this._context,!1),this.emit(Jt.AFTER_CLEAR)}destroy(){const e=this.options();this.emit(Jt.BEFORE_DESTROY),this._unbindAutoFit(),this._reset(),Ay(e,this._context,!0),this._container[ky]&&AA(this._container),this.emit(Jt.AFTER_DESTROY)}forceFit(){this.options.autoFit=!0;const{width:e,height:n}=Nu(this.options(),this._container);if(e===this._width&&n===this._height)return Promise.resolve(this);this.emit(Jt.BEFORE_CHANGE_SIZE);const r=this.render();return r.then(()=>{this.emit(Jt.AFTER_CHANGE_SIZE)}),r}changeSize(e,n){if(e===this._width&&n===this._height)return Promise.resolve(this);this.emit(Jt.BEFORE_CHANGE_SIZE),this.attr("width",e),this.attr("height",n);const r=this.render();return r.then(()=>{this.emit(Jt.AFTER_CHANGE_SIZE)}),r}_create(){const{library:e}=this._context,n=i=>i.startsWith("mark.")||i==="component.axisX"||i==="component.axisY"||i==="component.legends",r=["mark.mark",...Object.keys(e).filter(n)];this._marks={};for(const i of r){const a=i.split(".").pop();class s extends zu{constructor(){super({},a)}}this._marks[a]=s,this[a]=function(l){const c=this.append(s);return a==="mark"&&(c.type=l),c}}const o=["composition.view",...Object.keys(e).filter(i=>i.startsWith("composition.")&&i!=="composition.mark")];this._compositions=Object.fromEntries(o.map(i=>{const a=i.split(".").pop();let s=class extends vc{constructor(){super({},a)}};return s=VA([bc(Ry(this._marks))],s),[a,s]}));for(const i of Object.values(this._compositions))bc(Ry(this._compositions))(i);for(const i of o){const a=i.split(".").pop();this[a]=function(){const s=this._compositions[a];return this.type=null,this.append(s)}}}_reset(){const e=["theme","type","width","height","autoFit"];this.type="view",this.value=Object.fromEntries(Object.entries(this.value).filter(([n])=>n.startsWith("margin")||n.startsWith("padding")||n.startsWith("inset")||e.includes(n))),this.children=[]}_renderTrailing(){this._trailing&&(this._trailing=!1,this.render().then(()=>{const e=this._trailingResolve.bind(this);this._trailingResolve=null,e(this)}).catch(e=>{const n=this._trailingReject.bind(this);this._trailingReject=null,n(e)}))}_createResolve(e){return()=>{this._rendering=!1,e(this)}}_createReject(e){return n=>{this._rendering=!1,e(n)}}_computedOptions(){const e=this.options(),{key:n=KA}=e,{width:r,height:o,depth:i}=Nu(e,this._container);return this._width=r,this._height=o,this._key=n,Object.assign(Object.assign({key:this._key},e),{width:r,height:o,depth:i})}_createCanvas(){const{width:e,height:n}=Nu(this.options(),this._container);this._plugins.push(new Vi.S),this._plugins.forEach(r=>this._renderer.registerPlugin(r)),this._context.canvas=new ht.Xz({container:this._container,width:e,height:n,renderer:this._renderer})}_addToTrailing(){var e;return(e=this._trailingResolve)===null||e===void 0||e.call(this,this),this._trailing=!0,new Promise((r,o)=>{this._trailingResolve=r,this._trailingReject=o})}_bindAutoFit(){const e=this.options(),{autoFit:n}=e;if(this._hasBindAutoFit){n||this._unbindAutoFit();return}n&&(this._hasBindAutoFit=!0,window.addEventListener("resize",this._onResize))}_unbindAutoFit(){this._hasBindAutoFit&&(this._hasBindAutoFit=!1,window.removeEventListener("resize",this._onResize))}}function JA(t,e){class n extends t{constructor(o){super(Object.assign(Object.assign({},o),{lib:e}))}}return n}var Bu=Q(1819);function Iy(t){t.x0=Math.round(t.x0),t.y0=Math.round(t.y0),t.x1=Math.round(t.x1),t.y1=Math.round(t.y1)}function _a(t,e,n,r,o){for(var i=t.children,a,s=-1,l=i.length,c=t.value&&(r-e)/t.value;++s<l;)a=i[s],a.y0=n,a.y1=o,a.x0=e,a.x1=e+=a.value*c}function tM(){var t=1,e=1,n=0,r=!1;function o(a){var s=a.height+1;return a.x0=a.y0=n,a.x1=t,a.y1=e/s,a.eachBefore(i(e,s)),r&&a.eachBefore(Iy),a}function i(a,s){return function(l){l.children&&_a(l,l.x0,a*(l.depth+1)/s,l.x1,a*(l.depth+2)/s);var c=l.x0,u=l.y0,f=l.x1-n,d=l.y1-n;f<c&&(c=f=(c+f)/2),d<u&&(u=d=(u+d)/2),l.x0=c,l.y0=u,l.x1=f,l.y1=d}}return o.round=function(a){return arguments.length?(r=!!a,o):r},o.size=function(a){return arguments.length?(t=+a[0],e=+a[1],o):[t,e]},o.padding=function(a){return arguments.length?(n=+a,o):n},o}var eM=Q(82092);function nM(t){var e=0,n=t.children,r=n&&n.length;if(!r)e=1;else for(;--r>=0;)e+=n[r].value;t.value=e}function rM(){return this.eachAfter(nM)}var $u=Q(335);function oM(t,e){var n=-1,r=$u(this),o;try{for(r.s();!(o=r.n()).done;){var i=o.value;t.call(e,i,++n,this)}}catch(a){r.e(a)}finally{r.f()}return this}function iM(t,e){for(var n=this,r=[n],o,i,a=-1;n=r.pop();)if(t.call(e,n,++a,this),o=n.children)for(i=o.length-1;i>=0;--i)r.push(o[i]);return this}function aM(t,e){for(var n=this,r=[n],o=[],i,a,s,l=-1;n=r.pop();)if(o.push(n),i=n.children)for(a=0,s=i.length;a<s;++a)r.push(i[a]);for(;n=o.pop();)t.call(e,n,++l,this);return this}function sM(t,e){var n=-1,r=$u(this),o;try{for(r.s();!(o=r.n()).done;){var i=o.value;if(t.call(e,i,++n,this))return i}}catch(a){r.e(a)}finally{r.f()}}function cM(t){return this.eachAfter(function(e){for(var n=+t(e.data)||0,r=e.children,o=r&&r.length;--o>=0;)n+=r[o].value;e.value=n})}function lM(t){return this.eachBefore(function(e){e.children&&e.children.sort(t)})}function uM(t){for(var e=this,n=fM(e,t),r=[e];e!==n;)e=e.parent,r.push(e);for(var o=r.length;t!==n;)r.splice(o,0,t),t=t.parent;return r}function fM(t,e){if(t===e)return t;var n=t.ancestors(),r=e.ancestors(),o=null;for(t=n.pop(),e=r.pop();t===e;)o=t,t=n.pop(),e=r.pop();return o}function dM(){for(var t=this,e=[t];t=t.parent;)e.push(t);return e}function pM(){return Array.from(this)}function hM(){var t=[];return this.eachBefore(function(e){e.children||t.push(e)}),t}function yM(){var t=this,e=[];return t.each(function(n){n!==t&&e.push({source:n.parent,target:n})}),e}var Fy=Q(90228),gM=Fy().mark(Ny);function Ny(){var t,e,n,r,o,i;return Fy().wrap(function(s){for(;;)switch(s.prev=s.next){case 0:t=this,n=[t];case 1:e=n.reverse(),n=[];case 2:if(!(t=e.pop())){s.next=8;break}return s.next=5,t;case 5:if(r=t.children)for(o=0,i=r.length;o<i;++o)n.push(r[o]);s.next=2;break;case 8:if(n.length){s.next=1;break}case 9:case"end":return s.stop()}},gM,this)}function bi(t,e){t instanceof Map?(t=[void 0,t],e===void 0&&(e=vM)):e===void 0&&(e=bM);for(var n=new vi(t),r,o=[n],i,a,s,l;r=o.pop();)if((a=e(r.data))&&(l=(a=Array.from(a)).length))for(r.children=a,s=l-1;s>=0;--s)o.push(i=a[s]=new vi(a[s])),i.parent=r,i.depth=r.depth+1;return n.eachBefore(zy)}function mM(){return bi(this).eachBefore(OM)}function bM(t){return t.children}function vM(t){return Array.isArray(t)?t[1]:null}function OM(t){t.data.value!==void 0&&(t.value=t.data.value),t.data=t.data.data}function zy(t){var e=0;do t.height=e;while((t=t.parent)&&t.height<++e)}function vi(t){this.data=t,this.depth=this.height=0,this.parent=null}vi.prototype=bi.prototype=eM({constructor:vi,count:rM,each:oM,eachAfter:aM,eachBefore:iM,find:sM,sum:cM,sort:lM,path:uM,ancestors:dM,descendants:pM,leaves:hM,links:yM,copy:mM},Symbol.iterator,Ny);var By=Q(43706);function Yu(t,e){for(var n in e)e.hasOwnProperty(n)&&n!=="constructor"&&e[n]!==void 0&&(t[n]=e[n])}function xM(t,e,n,r){return e&&Yu(t,e),n&&Yu(t,n),r&&Yu(t,r),t}var _M=Q(44591);const wM={field:"value",size:[1,1],round:!1,padding:0,sort:(t,e)=>e.value-t.value,as:["x","y"],ignoreParentValue:!0},SM="nodeIndex",wa="childNodeCount",jM="nodeAncestor",Wu="Invalid field: it must be a string!";function EM(t,e){const{field:n,fields:r}=t;if((0,By.Z)(n))return n;if((0,Ur.Z)(n))return console.warn(Wu),n[0];if(console.warn(`${Wu} will try to get fields instead.`),(0,By.Z)(r))return r;if((0,Ur.Z)(r)&&r.length)return r[0];if(e)return e;throw new TypeError(Wu)}function AM(t){const e=[];if(t&&t.each){let n,r;t.each(o=>{var i,a;o.parent!==n?(n=o.parent,r=0):r+=1;const s=(0,Nh.Z)((((i=o.ancestors)===null||i===void 0?void 0:i.call(o))||[]).map(l=>e.find(c=>c.name===l.name)||l),({depth:l})=>l>0&&l<o.depth);o[jM]=s,o[wa]=((a=o.children)===null||a===void 0?void 0:a.length)||0,o[SM]=r,e.push(o)})}else t&&t.eachNode&&t.eachNode(n=>{e.push(n)});return e}function MM(t,e){e=xM({},wM,e);const n=e.as;if(!(0,Ur.Z)(n)||n.length!==2)throw new TypeError('Invalid as: it must be an array with 2 strings (e.g. [ "x", "y" ])!');let r;try{r=EM(e)}catch(l){console.warn(l)}const i=(l=>tM().size(e.size).round(e.round).padding(e.padding)(bi(l).sum(c=>oa(c.children)?e.ignoreParentValue?0:c[r]-(0,_M.Z)(c.children,(u,f)=>u+f[r],0):c[r]).sort(e.sort)))(t),a=n[0],s=n[1];return i.each(l=>{var c,u;l[a]=[l.x0,l.x1,l.x1,l.x0],l[s]=[l.y1,l.y1,l.y0,l.y0],l.name=l.name||((c=l.data)===null||c===void 0?void 0:c.name)||((u=l.data)===null||u===void 0?void 0:u.label),l.data.name=l.name,["x0","x1","y0","y1"].forEach(f=>{n.indexOf(f)===-1&&delete l[f]})}),AM(i)}var kM=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,r=Object.getOwnPropertySymbols(t);o<r.length;o++)e.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(t,r[o])&&(n[r[o]]=t[r[o]]);return n};const Oi="sunburst",Zu="markType",lD="value",$y="path",Oc="ancestor-node";function PM(t){const{data:e,encode:n}=t,{color:r,value:o}=n,a=MM(e,{field:o,type:"hierarchy.partition",as:["x","y"]}),s=[];return a.forEach(l=>{var c,u,f,d;if(l.depth===0)return null;let p=l.data.name;const h=[p];let y=Object.assign({},l);for(;y.depth>1;)p=`${(c=y.parent.data)===null||c===void 0?void 0:c.name} / ${p}`,h.unshift((u=y.parent.data)===null||u===void 0?void 0:u.name),y=y.parent;const g=Object.assign(Object.assign(Object.assign({},(0,Bu.Z)(l.data,[o])),{[$y]:p,[Oc]:y.data.name}),l);r&&r!==Oc&&(g[r]=l.data[r]||((d=(f=l.parent)===null||f===void 0?void 0:f.data)===null||d===void 0?void 0:d[r])),s.push(g)}),s.map(l=>{const c=l.x.slice(0,2),u=[l.y[2],l.y[0]];return c[0]===c[1]&&(u[0]=u[1]=(l.y[2]+l.y[0])/2),Object.assign(Object.assign({},l),{x:c,y:u,fillOpacity:Math.pow(.85,l.depth)})})}const Yy={id:Oi,encode:{x:"x",y:"y",key:$y,color:Oc,value:"value"},axis:{x:!1,y:!1},style:{[Zu]:Oi,stroke:"#fff",lineWidth:.5,fillOpacity:"fillOpacity",[wa]:wa,depth:"depth"},state:{active:{zIndex:2,stroke:"#000"},inactive:{zIndex:1,stroke:"#fff"}},legend:!1,interaction:{drillDown:!0},coordinate:{type:"polar",innerRadius:.2}},Wy=t=>{const{encode:e,data:n=[]}=t,r=kM(t,["encode","data"]),o=Object.assign(Object.assign({},r.coordinate),{innerRadius:Math.max((0,ue.Z)(r,["coordinate","innerRadius"],.2),1e-5)}),i=Object.assign(Object.assign({},Yy.encode),e),{value:a}=i,s=PM({encode:i,data:n});return[(0,et.Z)({},Yy,Object.assign(Object.assign({type:"rect",data:s,encode:i,tooltip:{title:"path",items:[l=>({name:a,value:l[a]})]}},r),{coordinate:o}))]};Wy.props={};var TM=Q(80821),CM=Object.keys?function(t){return Object.keys(t)}:function(t){var e=[];return(0,TM.Z)(t,function(n,r){(0,$s.Z)(t)&&r==="prototype"||e.push(r)}),e},Hu=CM,LM=function(t,e,n,r){function o(i){return i instanceof n?i:new n(function(a){a(i)})}return new(n||(n=Promise))(function(i,a){function s(u){try{c(r.next(u))}catch(f){a(f)}}function l(u){try{c(r.throw(u))}catch(f){a(f)}}function c(u){u.done?i(u.value):o(u.value).then(s,l)}c((r=r.apply(t,e||[])).next())})};const RM=t=>t.querySelectorAll(".element").filter(e=>(0,ue.Z)(e,["style",Zu])===Oi);function DM(t){return Tt(t).select(`.${Bn}`).node()}const IM={rootText:"root",style:{fill:"rgba(0, 0, 0, 0.85)",fontSize:12,y:1},active:{fill:"rgba(0, 0, 0, 0.5)"}};function FM(t={}){const{breadCrumb:e={},isFixedColor:n=!1}=t,r=(0,et.Z)({},IM,e);return o=>{const{update:i,setState:a,container:s,view:l,options:c}=o,u=s.ownerDocument,f=DM(s),d=c.marks.find(({id:v})=>v===Oi),{state:p}=d,h=u.createElement("g");f.appendChild(h);const y=(v,O)=>LM(this,void 0,void 0,function*(){if(h.removeChildren(),v){const x=u.createElement("text",{style:Object.assign({x:0,text:r.rootText,depth:0},r.style)});h.appendChild(x);let w="";const j=v==null?void 0:v.split(" / ");let E=r.style.y,M=h.getBBox().width;const R=f.getBBox().width,D=j.map((F,A)=>{const T=u.createElement("text",{style:Object.assign(Object.assign({x:M,text:" / "},r.style),{y:E})});h.appendChild(T),M+=T.getBBox().width,w=`${w}${F} / `;const P=u.createElement("text",{name:w.replace(/\s\/\s$/,""),style:Object.assign(Object.assign({text:F,x:M,depth:A+1},r.style),{y:E})});return h.appendChild(P),M+=P.getBBox().width,M>R&&(E=h.getBBox().height,M=0,T.attr({x:M,y:E}),M+=T.getBBox().width,P.attr({x:M,y:E}),M+=P.getBBox().width),P});[x,...D].forEach((F,A)=>{if(A===D.length)return;const T=Object.assign({},F.attributes);F.attr("cursor","pointer"),F.addEventListener("mouseenter",()=>{F.attr(r.active)}),F.addEventListener("mouseleave",()=>{F.attr(T)}),F.addEventListener("click",()=>{y(F.name,(0,ue.Z)(F,["style","depth"]))})})}a("drillDown",x=>{const{marks:w}=x,j=w.map(E=>{if(E.id!==Oi&&E.type!=="rect")return E;const{data:M}=E,R=Object.fromEntries(["color"].map(F=>[F,{domain:l.scale[F].getOptions().domain}])),D=M.filter(F=>{const A=F.path;return n||(F[Oc]=A.split(" / ")[O]),v?new RegExp(`^${v}.+`).test(A):!0});return(0,et.Z)({},E,n?{data:D,scale:R}:{data:D})});return Object.assign(Object.assign({},x),{marks:j})}),yield i()}),g=v=>{const O=v.target;if((0,ue.Z)(O,["style",Zu])!==Oi||(0,ue.Z)(O,["markType"])!=="rect"||!(0,ue.Z)(O,["style",wa]))return;const x=(0,ue.Z)(O,["__data__","key"]),w=(0,ue.Z)(O,["style","depth"]);O.style.cursor="pointer",y(x,w)};f.addEventListener("click",g);const m=Hu(Object.assign(Object.assign({},p.active),p.inactive)),b=()=>{RM(f).forEach(O=>{const x=(0,ue.Z)(O,["style",wa]);if((0,ue.Z)(O,["style","cursor"])!=="pointer"&&x){O.style.cursor="pointer";const j=(0,Bu.Z)(O.attributes,m);O.addEventListener("mouseenter",()=>{O.attr(p.active)}),O.addEventListener("mouseleave",()=>{O.attr((0,et.Z)(j,p.inactive))})}})};return f.addEventListener("mousemove",b),()=>{h.remove(),f.removeEventListener("click",g),f.removeEventListener("mousemove",b)}}}function NM(){return{"interaction.drillDown":FM,"mark.sunburst":Wy}}const Zy=()=>[["cartesian"]];Zy.props={};const Xu=()=>[["transpose"],["translate",.5,.5],["reflect.x"],["translate",-.5,-.5]];Xu.props={transform:!0};const zM=(t={})=>{const e={startAngle:-Math.PI/2,endAngle:Math.PI*3/2,innerRadius:0,outerRadius:1};return Object.assign(Object.assign({},e),t)},Hy=t=>{const{startAngle:e,endAngle:n,innerRadius:r,outerRadius:o}=zM(t);return[...Xu(),...Qi({startAngle:e,endAngle:n,innerRadius:r,outerRadius:o})]};Hy.props={};const Gu=()=>[["parallel",0,1,0,1]];Gu.props={};const Xy=({focusX:t=0,focusY:e=0,distortionX:n=2,distortionY:r=2,visual:o=!1})=>[["fisheye",t,e,n,r,o]];Xy.props={transform:!0};const Gy=t=>{const{startAngle:e=-Math.PI/2,endAngle:n=Math.PI*3/2,innerRadius:r=0,outerRadius:o=1}=t;return[...Gu(),...Qi({startAngle:e,endAngle:n,innerRadius:r,outerRadius:o})]};Gy.props={};const Uy=({startAngle:t=0,endAngle:e=Math.PI*6,innerRadius:n=0,outerRadius:r=1})=>[["translate",.5,.5],["reflect.y"],["translate",-.5,-.5],["helix",t,e,n,r]];Uy.props={};const Vy=({value:t})=>e=>e.map(()=>t);Vy.props={};const qy=({value:t})=>e=>e.map(n=>n[t]);qy.props={};const Ky=({value:t})=>e=>e.map(t);Ky.props={};const Qy=({value:t})=>()=>t;Qy.props={};function Oe(t,e){if(t!==null)return{type:"column",value:t,field:e}}function Sa(t,e){const n=Oe(t,e);return Object.assign(Object.assign({},n),{inferred:!0})}function xc(t,e){if(t!==null)return{type:"column",value:t,field:e,visual:!0}}function BM(t,e){const n=Oe(t,e);return Object.assign(Object.assign({},n),{constant:!1})}function oo(t,e){const n=[];for(const r of t)n[r]=e;return n}function se(t,e){const n=t[e];if(!n)return[null,null];const{value:r,field:o=null}=n;return[r,o]}function _c(t,...e){for(const n of e)if(typeof n=="string"){const[r,o]=se(t,n);if(r!==null)return[r,o]}else return[n,null];return[null,null]}function ja(t){return t instanceof Date?!1:typeof t=="object"}const Ea=()=>(t,e)=>{const{encode:n}=e,{y1:r}=n;return r!==void 0?[t,e]:[t,(0,et.Z)({},e,{encode:{y1:Sa(oo(t,0))}})]};Ea.props={};const Lo=()=>(t,e)=>{const{encode:n}=e,{x:r}=n;return r!==void 0?[t,e]:[t,(0,et.Z)({},e,{encode:{x:Sa(oo(t,0))},scale:{x:{guide:null}}})]};Lo.props={};const Ro=(t,e)=>pa(Object.assign({colorAttribute:"fill"},t),e);Ro.props=Object.assign(Object.assign({},pa.props),{defaultMarker:"square"});const wc=(t,e)=>pa(Object.assign({colorAttribute:"stroke"},t),e);wc.props=Object.assign(Object.assign({},pa.props),{defaultMarker:"hollowSquare"});function xi(){}function Jy(t){this._context=t}Jy.prototype={areaStart:xi,areaEnd:xi,lineStart:function(){this._point=0},lineEnd:function(){this._point&&this._context.closePath()},point:function(t,e){t=+t,e=+e,this._point?this._context.lineTo(t,e):(this._point=1,this._context.moveTo(t,e))}};function Uu(t){return new Jy(t)}var tg=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,r=Object.getOwnPropertySymbols(t);o<r.length;o++)e.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(t,r[o])&&(n[r[o]]=t[r[o]]);return n};function $M(t,e,n){const[r,o,i,a]=t;if(Me(n)){const c=[e?e[0][0]:o[0],o[1]],u=[e?e[3][0]:i[0],i[1]];return[r,c,u,a]}const s=[o[0],e?e[0][1]:o[1]],l=[i[0],e?e[3][1]:i[1]];return[r,s,l,a]}const Vu=(t,e)=>{const{adjustPoints:n=$M}=t,r=tg(t,["adjustPoints"]),{coordinate:o,document:i}=e;return(a,s,l,c)=>{const{index:u}=s,{color:f}=l,d=tg(l,["color"]),p=c[u+1],h=n(a,p,o),y=!!Me(o),[g,m,b,v]=y?Hs(h):h,{color:O=f,opacity:x}=s,w=jo().curve(Uu)([g,m,b,v]);return Tt(i.createElement("path",{})).call(jt,d).style("d",w).style("fill",O).style("fillOpacity",x).call(jt,r).node()}};Vu.props={defaultMarker:"square"};function YM(t,e,n){const[r,o,i,a]=t;if(Me(n)){const c=[e?e[0][0]:(o[0]+i[0])/2,o[1]],u=[e?e[3][0]:(o[0]+i[0])/2,i[1]];return[r,c,u,a]}const s=[o[0],e?e[0][1]:(o[1]+i[1])/2],l=[i[0],e?e[3][1]:(o[1]+i[1])/2];return[r,s,l,a]}const eg=(t,e)=>Vu(Object.assign({adjustPoints:YM},t),e);eg.props={defaultMarker:"square"};function Aa(t){return Math.abs(t)>10?String(t):t.toString().padStart(2,"0")}function WM(t){const e=t.getFullYear(),n=Aa(t.getMonth()+1),r=Aa(t.getDate()),o=`${e}-${n}-${r}`,i=t.getHours(),a=t.getMinutes(),s=t.getSeconds();return i||a||s?`${o} ${Aa(i)}:${Aa(a)}:${Aa(s)}`:o}const Sc=(t={})=>{const{channel:e="x"}=t;return(n,r)=>{const{encode:o}=r,{tooltip:i}=r;if(Se(i))return[n,r];const{title:a}=i;if(a!==void 0)return[n,r];const s=Object.keys(o).filter(c=>c.startsWith(e)).filter(c=>!o[c].inferred).map(c=>se(o,c)).filter(([c])=>c).map(c=>c[0]);if(s.length===0)return[n,r];const l=[];for(const c of n)l[c]={value:s.map(u=>u[c]instanceof Date?WM(u[c]):u[c]).join(", ")};return[n,(0,et.Z)({},r,{tooltip:{title:l}})]}};Sc.props={};const jc=t=>{const{channel:e}=t;return(n,r)=>{const{encode:o,tooltip:i}=r;if(Se(i))return[n,r];const{items:a=[]}=i;if(!a||a.length>0)return[n,r];const l=(Array.isArray(e)?e:[e]).flatMap(c=>Object.keys(o).filter(u=>u.startsWith(c)).map(u=>{const{field:f,value:d,inferred:p=!1,aggregate:h}=o[u];return p?null:h&&d?{channel:u}:f?{field:f}:d?{channel:u}:null}).filter(u=>u!==null));return[n,(0,et.Z)({},r,{tooltip:{items:l}})]}};jc.props={};var ZM=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,r=Object.getOwnPropertySymbols(t);o<r.length;o++)e.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(t,r[o])&&(n[r[o]]=t[r[o]]);return n};const ng=()=>(t,e)=>{const{encode:n}=e,{key:r}=n,o=ZM(n,["key"]);if(r!==void 0)return[t,e];const i=Object.values(o).map(({value:s})=>s),a=t.map(s=>i.filter(Array.isArray).map(l=>l[s]).join("-"));return[t,(0,et.Z)({},e,{encode:{key:Oe(a)}})]};ng.props={};function rg(t={}){const{shapes:e}=t;return[{name:"color"},{name:"opacity"},{name:"shape",range:e},{name:"enterType"},{name:"enterDelay",scaleKey:"enter"},{name:"enterDuration",scaleKey:"enter"},{name:"enterEasing"},{name:"key",scale:"identity"},{name:"groupKey",scale:"identity"},{name:"label",scale:"identity"}]}function Mn(t={}){return[...rg(t),{name:"title",scale:"identity"}]}function uD(){return[{type:MaybeTitle,channel:"color"},{type:MaybeTooltip,channel:["x","y","z"]}]}function io(){return[{type:Sc,channel:"color"},{type:jc,channel:["x","y"]}]}function _i(){return[{type:Sc,channel:"x"},{type:jc,channel:["y"]}]}function HM(){return[{type:Sc,channel:"color"},{type:jc,channel:["position"]}]}function wi(t={}){return rg(t)}function Xe(){return[{type:ng}]}function qe(){return[]}function qu(t,e){return t.getBandWidth(t.invert(e))}function Do(t,e,n={}){const{x:r,y:o,series:i}=e,{x:a,y:s,series:l}=t,{style:{bandOffset:c=l?0:.5,bandOffsetX:u=c,bandOffsetY:f=c}={}}=n,d=!!(a!=null&&a.getBandWidth),p=!!(s!=null&&s.getBandWidth),h=!!(l!=null&&l.getBandWidth);return!d&&!p?y=>y:(y,g)=>{const m=d?qu(a,r[g]):0,b=p?qu(s,o[g]):0,O=h&&i?(qu(l,i[g])/2+ +i[g])*m:0,[x,w]=y;return[x+u*m+O,w+f*b]}}function Ec(t){return parseFloat(t)/100}function Ku(t,e,n,r){const{x:o,y:i}=n,{innerWidth:a,innerHeight:s}=r.getOptions(),l=Array.from(t,c=>{const u=o[c],f=i[c],d=typeof u=="string"?Ec(u)*a:+u,p=typeof f=="string"?Ec(f)*s:+f;return[[d,p]]});return[t,l]}function Sr(t){return typeof t=="function"?t:e=>e[t]}function Qu(t,e){return Array.from(t,Sr(e))}function Ju(t,e){const{source:n=u=>u.source,target:r=u=>u.target,value:o=u=>u.value}=e,{links:i,nodes:a}=t,s=Qu(i,n),l=Qu(i,r),c=Qu(i,o);return{links:i.map((u,f)=>({target:l[f],source:s[f],value:c[f]})),nodes:a||Array.from(new Set([...s,...l]),u=>({key:u}))}}function og(t,e){return t.getBandWidth(t.invert(e))}const ig={rect:Ro,hollow:wc,funnel:Vu,pyramid:eg},ag=()=>(t,e,n,r)=>{const{x:o,y:i,y1:a,series:s,size:l}=n,c=e.x,u=e.series,[f]=r.getSize(),d=l?l.map(y=>+y/f):null,p=l?(y,g,m)=>{const b=y+g/2,v=d[m];return[b-v/2,b+v/2]}:(y,g,m)=>[y,y+g],h=Array.from(t,y=>{const g=og(c,o[y]),m=u?og(u,s==null?void 0:s[y]):1,b=g*m,v=(+(s==null?void 0:s[y])||0)*g,O=+o[y]+v,[x,w]=p(O,b,y),j=+i[y],E=+a[y];return[[x,j],[w,j],[w,E],[x,E]].map(A=>r.map(A))});return[t,h]};ag.props={defaultShape:"rect",defaultLabelShape:"label",composite:!1,shape:ig,channels:[...Mn({shapes:Object.keys(ig)}),{name:"x",scale:"band",required:!0},{name:"y",required:!0},{name:"series",scale:"band"},{name:"size"}],preInference:[...Xe(),{type:Ea},{type:Lo}],postInference:[...qe(),..._i()],interaction:{shareTooltip:!0}};const sg={rect:Ro,hollow:wc},cg=()=>(t,e,n,r)=>{const{x:o,x1:i,y:a,y1:s}=n,l=Array.from(t,c=>{const u=[+o[c],+a[c]],f=[+i[c],+a[c]],d=[+i[c],+s[c]],p=[+o[c],+s[c]];return[u,f,d,p].map(h=>r.map(h))});return[t,l]};cg.props={defaultShape:"rect",defaultLabelShape:"label",composite:!1,shape:sg,channels:[...Mn({shapes:Object.keys(sg)}),{name:"x",required:!0},{name:"y",required:!0}],preInference:[...Xe(),{type:Ea}],postInference:[...qe(),..._i()],interaction:{shareTooltip:!0}};var lg=tf(ca);function ug(t){this._curve=t}ug.prototype={areaStart:function(){this._curve.areaStart()},areaEnd:function(){this._curve.areaEnd()},lineStart:function(){this._curve.lineStart()},lineEnd:function(){this._curve.lineEnd()},point:function(t,e){this._curve.point(e*Math.sin(t),e*-Math.cos(t))}};function tf(t){function e(n){return new ug(t(n))}return e._curve=t,e}function Ma(t){var e=t.curve;return t.angle=t.x,delete t.x,t.radius=t.y,delete t.y,t.curve=function(n){return arguments.length?e(tf(n)):e()._curve},t}function XM(){return Ma(jo().curve(lg))}var fg=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,r=Object.getOwnPropertySymbols(t);o<r.length;o++)e.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(t,r[o])&&(n[r[o]]=t[r[o]]);return n};const GM=oi(t=>{const{d1:e,d2:n,style1:r,style2:o}=t.attributes,i=t.ownerDocument;Tt(t).maybeAppend("line",()=>i.createElement("path",{})).style("d",e).call(jt,r),Tt(t).maybeAppend("line1",()=>i.createElement("path",{})).style("d",n).call(jt,o)});function UM(t,e){const n=[],r=[];let o=!1,i=null;for(const a of t)!e(a[0])||!e(a[1])?o=!0:(n.push(a),o&&(o=!1,r.push([i,a])),i=a);return[n,r]}const Un=(t,e)=>{const{curve:n,gradient:r=!1,gradientColor:o="between",defined:i=u=>!Number.isNaN(u)&&u!==void 0&&u!==null,connect:a=!1}=t,s=fg(t,["curve","gradient","gradientColor","defined","connect"]),{coordinate:l,document:c}=e;return(u,f,d)=>{const{color:p,lineWidth:h}=d,y=fg(d,["color","lineWidth"]),{color:g=p,size:m=h,seriesColor:b,seriesX:v,seriesY:O}=f,x=Oh(l,f),w=Me(l),j=r&&b?vh(b,v,O,r,o,w):g,E=Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},y),j&&{stroke:j}),m&&{lineWidth:m}),x&&{transform:x}),s);let M;if(be(l)){const P=l.getCenter();M=k=>XM().angle((z,C)=>ri($e(k[C],P))).radius((z,C)=>Ne(k[C],P)).defined(([z,C])=>i(z)&&i(C)).curve(n)(k)}else M=jo().x(P=>P[0]).y(P=>P[1]).defined(([P,k])=>i(P)&&i(k)).curve(n);const[R,D]=UM(u,i),F=at(E,"connect"),A=!!D.length;if(!A||a&&!Object.keys(F).length)return Tt(c.createElement("path",{})).style("d",M(R)||[]).call(jt,E).node();if(A&&!a)return Tt(c.createElement("path",{})).style("d",M(u)).call(jt,E).node();const T=P=>P.map(M).join(",");return Tt(new GM).style("style1",Object.assign(Object.assign({},E),F)).style("style2",E).style("d1",T(D)).style("d2",M(u)).node()}};Un.props={defaultMarker:"smooth",defaultEnterAnimation:"fadeIn",defaultUpdateAnimation:"morphing",defaultExitAnimation:"fadeOut"};const dg=(t,e)=>{const{coordinate:n}=e;return(...r)=>{const o=be(n)?Uu:ca;return Un(Object.assign({curve:o},t),e)(...r)}};dg.props=Object.assign(Object.assign({},Un.props),{defaultMarker:"line"});function ef(t,e,n){t._context.bezierCurveTo(t._x1+t._k*(t._x2-t._x0),t._y1+t._k*(t._y2-t._y0),t._x2+t._k*(t._x1-e),t._y2+t._k*(t._y1-n),t._x2,t._y2)}function nf(t,e){this._context=t,this._k=(1-e)/6}nf.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x2,this._y2);break;case 3:ef(this,this._x1,this._y1);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2,this._x1=t,this._y1=e;break;case 2:this._point=3;default:ef(this,t,e);break}this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=e}};var fD=function t(e){function n(r){return new nf(r,e)}return n.tension=function(r){return t(+r)},n}(0);function rf(t,e){this._context=t,this._k=(1-e)/6}rf.prototype={areaStart:xi,areaEnd:xi,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._x5=this._y0=this._y1=this._y2=this._y3=this._y4=this._y5=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x3,this._y3),this._context.closePath();break}case 2:{this._context.lineTo(this._x3,this._y3),this._context.closePath();break}case 3:{this.point(this._x3,this._y3),this.point(this._x4,this._y4),this.point(this._x5,this._y5);break}}},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._x3=t,this._y3=e;break;case 1:this._point=2,this._context.moveTo(this._x4=t,this._y4=e);break;case 2:this._point=3,this._x5=t,this._y5=e;break;default:ef(this,t,e);break}this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=e}};var dD=function t(e){function n(r){return new rf(r,e)}return n.tension=function(r){return t(+r)},n}(0);function pg(t,e,n){var r=t._x1,o=t._y1,i=t._x2,a=t._y2;if(t._l01_a>xn){var s=2*t._l01_2a+3*t._l01_a*t._l12_a+t._l12_2a,l=3*t._l01_a*(t._l01_a+t._l12_a);r=(r*s-t._x0*t._l12_2a+t._x2*t._l01_2a)/l,o=(o*s-t._y0*t._l12_2a+t._y2*t._l01_2a)/l}if(t._l23_a>xn){var c=2*t._l23_2a+3*t._l23_a*t._l12_a+t._l12_2a,u=3*t._l23_a*(t._l23_a+t._l12_a);i=(i*c+t._x1*t._l23_2a-e*t._l12_2a)/u,a=(a*c+t._y1*t._l23_2a-n*t._l12_2a)/u}t._context.bezierCurveTo(r,o,i,a,t._x2,t._y2)}function hg(t,e){this._context=t,this._alpha=e}hg.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x2,this._y2);break;case 3:this.point(this._x2,this._y2);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){if(t=+t,e=+e,this._point){var n=this._x2-t,r=this._y2-e;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(n*n+r*r,this._alpha))}switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;break;case 2:this._point=3;default:pg(this,t,e);break}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=e}};var pD=function t(e){function n(r){return e?new hg(r,e):new nf(r,0)}return n.alpha=function(r){return t(+r)},n}(.5);function yg(t,e){this._context=t,this._alpha=e}yg.prototype={areaStart:xi,areaEnd:xi,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._x5=this._y0=this._y1=this._y2=this._y3=this._y4=this._y5=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x3,this._y3),this._context.closePath();break}case 2:{this._context.lineTo(this._x3,this._y3),this._context.closePath();break}case 3:{this.point(this._x3,this._y3),this.point(this._x4,this._y4),this.point(this._x5,this._y5);break}}},point:function(t,e){if(t=+t,e=+e,this._point){var n=this._x2-t,r=this._y2-e;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(n*n+r*r,this._alpha))}switch(this._point){case 0:this._point=1,this._x3=t,this._y3=e;break;case 1:this._point=2,this._context.moveTo(this._x4=t,this._y4=e);break;case 2:this._point=3,this._x5=t,this._y5=e;break;default:pg(this,t,e);break}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=e}};var gg=function t(e){function n(r){return e?new yg(r,e):new rf(r,0)}return n.alpha=function(r){return t(+r)},n}(.5);function mg(t){return t<0?-1:1}function bg(t,e,n){var r=t._x1-t._x0,o=e-t._x1,i=(t._y1-t._y0)/(r||o<0&&-0),a=(n-t._y1)/(o||r<0&&-0),s=(i*o+a*r)/(r+o);return(mg(i)+mg(a))*Math.min(Math.abs(i),Math.abs(a),.5*Math.abs(s))||0}function vg(t,e){var n=t._x1-t._x0;return n?(3*(t._y1-t._y0)/n-e)/2:e}function of(t,e,n){var r=t._x0,o=t._y0,i=t._x1,a=t._y1,s=(i-r)/3;t._context.bezierCurveTo(r+s,o+s*e,i-s,a-s*n,i,a)}function Ac(t){this._context=t}Ac.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x1,this._y1);break;case 3:of(this,this._t0,vg(this,this._t0));break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){var n=NaN;if(t=+t,e=+e,!(t===this._x1&&e===this._y1)){switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;break;case 2:this._point=3,of(this,vg(this,n=bg(this,t,e)),n);break;default:of(this,this._t0,n=bg(this,t,e));break}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e,this._t0=n}}};function Og(t){this._context=new xg(t)}(Og.prototype=Object.create(Ac.prototype)).point=function(t,e){Ac.prototype.point.call(this,e,t)};function xg(t){this._context=t}xg.prototype={moveTo:function(t,e){this._context.moveTo(e,t)},closePath:function(){this._context.closePath()},lineTo:function(t,e){this._context.lineTo(e,t)},bezierCurveTo:function(t,e,n,r,o,i){this._context.bezierCurveTo(e,t,r,n,i,o)}};function _g(t){return new Ac(t)}function wg(t){return new Og(t)}var VM=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,r=Object.getOwnPropertySymbols(t);o<r.length;o++)e.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(t,r[o])&&(n[r[o]]=t[r[o]]);return n};const Sg=(t,e)=>{const n=VM(t,[]),{coordinate:r}=e;return(...o)=>{const i=be(r)?gg:Me(r)?wg:_g;return Un(Object.assign({curve:i},n),e)(...o)}};Sg.props=Object.assign(Object.assign({},Un.props),{defaultMarker:"smooth"});function Mc(t,e){this._context=t,this._t=e}Mc.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=this._y=NaN,this._point=0},lineEnd:function(){0<this._t&&this._t<1&&this._point===2&&this._context.lineTo(this._x,this._y),(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line>=0&&(this._t=1-this._t,this._line=1-this._line)},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;default:{if(this._t<=0)this._context.lineTo(this._x,e),this._context.lineTo(t,e);else{var n=this._x*(1-this._t)+t*this._t;this._context.lineTo(n,this._y),this._context.lineTo(n,e)}break}}this._x=t,this._y=e}};function jg(t){return new Mc(t,.5)}function Eg(t){return new Mc(t,0)}function Ag(t){return new Mc(t,1)}const Mg=(t,e)=>Un(Object.assign({curve:Ag},t),e);Mg.props=Object.assign(Object.assign({},Un.props),{defaultMarker:"hv"});const kg=(t,e)=>Un(Object.assign({curve:Eg},t),e);kg.props=Object.assign(Object.assign({},Un.props),{defaultMarker:"vh"});const Pg=(t,e)=>Un(Object.assign({curve:jg},t),e);Pg.props=Object.assign(Object.assign({},Un.props),{defaultMarker:"hvh"});var qM=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,r=Object.getOwnPropertySymbols(t);o<r.length;o++)e.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(t,r[o])&&(n[r[o]]=t[r[o]]);return n};function KM(t,e,n,r,o){const i=$e(n,e),a=Xn(i),s=a+Math.PI/2,l=[r/2*Math.cos(s),r/2*Math.sin(s)],c=[o/2*Math.cos(s),o/2*Math.sin(s)],u=[o/2*Math.cos(a),o/2*Math.sin(a)],f=[r/2*Math.cos(a),r/2*Math.sin(a)],d=Zs(e,l),p=Zs(n,c),h=Zs(p,u),y=Zs(n,u),g=$e(y,c),m=$e(n,c),b=$e(e,l),v=$e(b,f),O=$e(e,f),x=$e(d,f);t.moveTo(...d),t.lineTo(...p),t.arcTo(...h,...y,o/2),t.arcTo(...g,...m,o/2),t.lineTo(...b),t.arcTo(...v,...O,r/2),t.arcTo(...x,...d,r/2),t.closePath()}const Tg=(t,e)=>{const{document:n}=e;return(r,o,i)=>{const{seriesSize:a,color:s}=o,{color:l}=i,c=qM(i,["color"]),u=Gn();for(let f=0;f<r.length-1;f++){const d=r[f],p=r[f+1],h=a[f],y=a[f+1];[...d,...p].every(Ut)&&KM(u,d,p,h,y)}return Tt(n.createElement("path",{})).call(jt,c).style("fill",s||l).style("d",u.toString()).call(jt,t).node()}};Tg.props=Object.assign(Object.assign({},Un.props),{defaultMarker:"line"});const Cg=()=>(t,e)=>{const{style:n={},encode:r}=e,{series:o}=r,{gradient:i}=n;return!i||o?[t,e]:[t,(0,et.Z)({},e,{encode:{series:xc(oo(t,void 0))}})]};Cg.props={};const af=()=>(t,e)=>{const{encode:n}=e,{series:r,color:o}=n;if(r!==void 0||o===void 0)return[t,e];const[i,a]=se(n,"color");return[t,(0,et.Z)({},e,{encode:{series:Oe(i,a)}})]};af.props={};const Lg={line:dg,smooth:Sg,hv:Mg,vh:kg,hvh:Pg,trail:Tg},QM=(t,e,n,r)=>{var o,i;const{series:a,x:s,y:l}=n,{x:c,y:u}=e;if(s===void 0||l===void 0)throw new Error("Missing encode for x or y channel.");const f=a?Array.from(ve(t,g=>a[g]).values()):[t],d=f.map(g=>g[0]).filter(g=>g!==void 0),p=(((o=c==null?void 0:c.getBandWidth)===null||o===void 0?void 0:o.call(c))||0)/2,h=(((i=u==null?void 0:u.getBandWidth)===null||i===void 0?void 0:i.call(u))||0)/2,y=Array.from(f,g=>g.map(m=>r.map([+s[m]+p,+l[m]+h])));return[d,y,f]},JM=(t,e,n,r)=>{const o=Object.entries(n).filter(([a])=>a.startsWith("position")).map(([,a])=>a);if(o.length===0)throw new Error("Missing encode for position channel.");const i=Array.from(t,a=>{const s=o.map(u=>+u[a]),l=r.map(s),c=[];for(let u=0;u<l.length;u+=2)c.push([l[u],l[u+1]]);return c});return[t,i]},Rg=()=>(t,e,n,r)=>(ta(r)?JM:QM)(t,e,n,r);Rg.props={defaultShape:"line",defaultLabelShape:"label",composite:!1,shape:Lg,channels:[...Mn({shapes:Object.keys(Lg)}),{name:"x"},{name:"y"},{name:"position",independent:!0},{name:"size"},{name:"series",scale:"band"}],preInference:[...Xe(),{type:Cg},{type:af}],postInference:[...qe(),..._i(),...HM()],interaction:{shareTooltip:!0,seriesTooltip:!0,crosshairs:!0}};var t3=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,r=Object.getOwnPropertySymbols(t);o<r.length;o++)e.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(t,r[o])&&(n[r[o]]=t[r[o]]);return n};function Dg(t,e,n,r){if(e.length===1)return;const{size:o}=n;if(t==="fixed")return o;if(t==="normal"||Wp(r)){const[[i,a],[s,l]]=e,c=Math.abs((s-i)/2),u=Math.abs((l-a)/2);return Math.max(0,(c+u)/2)}return o}const ne=(t,e)=>{const{colorAttribute:n,symbol:r,mode:o="auto"}=t,i=t3(t,["colorAttribute","symbol","mode"]),a=Zr.get(iu(r))||Zr.get("point"),{coordinate:s,document:l}=e;return(c,u,f)=>{const{lineWidth:d,color:p}=f,h=i.stroke?d||1:d,{color:y=p,transform:g,opacity:m}=u,[b,v]=ou(c),x=Dg(o,c,u,s)||i.r||f.r;return Tt(l.createElement("path",{})).call(jt,f).style("fill","transparent").style("d",a(b,v,x)).style("lineWidth",h).style("transform",g).style("transformOrigin",`${b-x} ${v-x}`).style("stroke",y).style(ru(t),m).style(n,y).call(jt,i).node()}};ne.props={defaultEnterAnimation:"fadeIn",defaultUpdateAnimation:"morphing",defaultExitAnimation:"fadeOut"};const Ig=(t,e)=>ne(Object.assign({colorAttribute:"stroke",symbol:"point"},t),e);Ig.props=Object.assign({defaultMarker:"hollowPoint"},ne.props);const Fg=(t,e)=>ne(Object.assign({colorAttribute:"stroke",symbol:"diamond"},t),e);Fg.props=Object.assign({defaultMarker:"hollowDiamond"},ne.props);const Ng=(t,e)=>ne(Object.assign({colorAttribute:"stroke",symbol:"hexagon"},t),e);Ng.props=Object.assign({defaultMarker:"hollowHexagon"},ne.props);const zg=(t,e)=>ne(Object.assign({colorAttribute:"stroke",symbol:"square"},t),e);zg.props=Object.assign({defaultMarker:"hollowSquare"},ne.props);const Bg=(t,e)=>ne(Object.assign({colorAttribute:"stroke",symbol:"triangle-down"},t),e);Bg.props=Object.assign({defaultMarker:"hollowTriangleDown"},ne.props);const $g=(t,e)=>ne(Object.assign({colorAttribute:"stroke",symbol:"triangle"},t),e);$g.props=Object.assign({defaultMarker:"hollowTriangle"},ne.props);const Yg=(t,e)=>ne(Object.assign({colorAttribute:"stroke",symbol:"bowtie"},t),e);Yg.props=Object.assign({defaultMarker:"hollowBowtie"},ne.props);var e3=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,r=Object.getOwnPropertySymbols(t);o<r.length;o++)e.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(t,r[o])&&(n[r[o]]=t[r[o]]);return n};const Wg=(t,e)=>{const{colorAttribute:n,mode:r="auto"}=t,o=e3(t,["colorAttribute","mode"]),{coordinate:i,document:a}=e;return(s,l,c)=>{const{lineWidth:u,color:f}=c,d=o.stroke?u||1:u,{color:p=f,transform:h,opacity:y}=l,[g,m]=ou(s),v=Dg(r,s,l,i)||o.r||c.r;return Tt(a.createElement("circle",{})).call(jt,c).style("fill","transparent").style("cx",g).style("cy",m).style("r",v).style("lineWidth",d).style("transform",h).style("transformOrigin",`${g} ${m}`).style("stroke",p).style(ru(t),y).style(n,p).call(jt,o).node()}},sf=(t,e)=>Wg(Object.assign({colorAttribute:"fill"},t),e);sf.props={defaultMarker:"circle",defaultEnterAnimation:"fadeIn",defaultExitAnimation:"fadeOut"};const Zg=(t,e)=>Wg(Object.assign({colorAttribute:"stroke"},t),e);Zg.props=Object.assign({defaultMarker:"hollowPoint"},sf.props);const Hg=(t,e)=>ne(Object.assign({colorAttribute:"fill",symbol:"point"},t),e);Hg.props=Object.assign({defaultMarker:"point"},ne.props);const Xg=(t,e)=>ne(Object.assign({colorAttribute:"stroke",symbol:"plus"},t),e);Xg.props=Object.assign({defaultMarker:"plus"},ne.props);const Gg=(t,e)=>ne(Object.assign({colorAttribute:"fill",symbol:"diamond"},t),e);Gg.props=Object.assign({defaultMarker:"diamond"},ne.props);const Ug=(t,e)=>ne(Object.assign({colorAttribute:"fill",symbol:"square"},t),e);Ug.props=Object.assign({defaultMarker:"square"},ne.props);const Vg=(t,e)=>ne(Object.assign({colorAttribute:"fill",symbol:"triangle"},t),e);Vg.props=Object.assign({defaultMarker:"triangle"},ne.props);const qg=(t,e)=>ne(Object.assign({colorAttribute:"fill",symbol:"hexagon"},t),e);qg.props=Object.assign({defaultMarker:"hexagon"},ne.props);const Kg=(t,e)=>ne(Object.assign({colorAttribute:"stroke",symbol:"cross"},t),e);Kg.props=Object.assign({defaultMarker:"cross"},ne.props);const Qg=(t,e)=>ne(Object.assign({colorAttribute:"fill",symbol:"bowtie"},t),e);Qg.props=Object.assign({defaultMarker:"bowtie"},ne.props);const Jg=(t,e)=>ne(Object.assign({colorAttribute:"stroke",symbol:"hyphen"},t),e);Jg.props=Object.assign({defaultMarker:"hyphen"},ne.props);const tm=(t,e)=>ne(Object.assign({colorAttribute:"stroke",symbol:"line"},t),e);tm.props=Object.assign({defaultMarker:"line"},ne.props);const em=(t,e)=>ne(Object.assign({colorAttribute:"stroke",symbol:"tick"},t),e);em.props=Object.assign({defaultMarker:"tick"},ne.props);const nm=(t,e)=>ne(Object.assign({colorAttribute:"fill",symbol:"triangle-down"},t),e);nm.props=Object.assign({defaultMarker:"triangleDown"},ne.props);const kc=()=>(t,e)=>{const{encode:n}=e,{y:r}=n;return r!==void 0?[t,e]:[t,(0,et.Z)({},e,{encode:{y:Sa(oo(t,0))},scale:{y:{guide:null}}})]};kc.props={};const rm=()=>(t,e)=>{const{encode:n}=e,{size:r}=n;return r!==void 0?[t,e]:[t,(0,et.Z)({},e,{encode:{size:xc(oo(t,3))}})]};rm.props={};const om={hollow:Ig,hollowDiamond:Fg,hollowHexagon:Ng,hollowSquare:zg,hollowTriangleDown:Bg,hollowTriangle:$g,hollowBowtie:Yg,hollowCircle:Zg,point:Hg,plus:Xg,diamond:Gg,square:Ug,triangle:Vg,hexagon:qg,cross:Kg,bowtie:Qg,hyphen:Jg,line:tm,tick:em,triangleDown:nm,circle:sf},im=t=>(e,n,r,o)=>{const{x:i,y:a,x1:s,y1:l,size:c,dx:u,dy:f}=r,[d,p]=o.getSize(),h=Do(n,r,t),y=m=>{const b=+((u==null?void 0:u[m])||0),v=+((f==null?void 0:f[m])||0),O=s?(+i[m]+ +s[m])/2:+i[m],x=l?(+a[m]+ +l[m])/2:+a[m],w=O+b,j=x+v;return[w,j]},g=c?Array.from(e,m=>{const[b,v]=y(m),O=+c[m],x=O/d,w=O/p,j=[b-x,v-w],E=[b+x,v+w];return[o.map(h(j,m)),o.map(h(E,m))]}):Array.from(e,m=>[o.map(h(y(m),m))]);return[e,g]};im.props={defaultShape:"hollow",defaultLabelShape:"label",composite:!1,shape:om,channels:[...Mn({shapes:Object.keys(om)}),{name:"x",required:!0},{name:"y",required:!0},{name:"series",scale:"band"},{name:"size",quantitative:"sqrt"},{name:"dx",scale:"identity"},{name:"dy",scale:"identity"}],preInference:[...Xe(),{type:Lo},{type:kc}],postInference:[...qe(),{type:rm},...io()]};const am=(t,e)=>{const{coordinate:n}=e;return(r,o,i)=>{const{color:a,text:s="",fontSize:l,rotate:c=0,transform:u=""}=o,f={text:String(s),stroke:a,fill:a,fontSize:l},[[d,p]]=r;return Tt(new Eh).style("x",d).style("y",p).call(jt,i).style("transform",`${u}rotate(${+c})`).style("coordCenter",n.getCenter()).call(jt,f).call(jt,t).node()}};am.props={defaultMarker:"point",defaultEnterAnimation:"fadeIn",defaultUpdateAnimation:"morphing",defaultExitAnimation:"fadeOut"};var cf=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,r=Object.getOwnPropertySymbols(t);o<r.length;o++)e.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(t,r[o])&&(n[r[o]]=t[r[o]]);return n};function n3(t){const e=t/Math.sqrt(2),n=t*Math.sqrt(2),[r,o]=[-e,e-n],[i,a]=[0,0],[s,l]=[e,e-n];return[["M",r,o],["A",t,t,0,1,1,s,l],["L",i,a],["Z"]]}function r3(t){const{min:e,max:n}=t.getLocalBounds();return[(e[0]+n[0])*.5,(e[1]+n[1])*.5]}const o3=oi(t=>{const e=t.attributes,{class:n,x:r,y:o,transform:i}=e,a=cf(e,["class","x","y","transform"]),s=at(a,"marker"),{size:l=24}=s,c=()=>n3(l/2),u=Tt(t).maybeAppend("marker",()=>new Xs.J({})).call(p=>p.node().update(Object.assign({symbol:c},s))).node(),[f,d]=r3(u);Tt(t).maybeAppend("text","text").style("x",f).style("y",d).call(jt,a)}),sm=(t,e)=>{const n=cf(t,[]);return(r,o,i)=>{const{color:a}=i,s=cf(i,["color"]),{color:l=a,text:c=""}=o,u={text:String(c),stroke:l,fill:l},[[f,d]]=r;return Tt(new o3).call(jt,s).style("transform",`translate(${f},${d})`).call(jt,u).call(jt,n).node()}};sm.props={defaultMarker:"point",defaultEnterAnimation:"fadeIn",defaultUpdateAnimation:"morphing",defaultExitAnimation:"fadeOut"};const cm=(t,e)=>{const{coordinate:n}=e;return(r,o,i)=>{const{color:a,text:s="",fontSize:l,rotate:c=0,transform:u=""}=o,f={text:String(s),stroke:a,fill:a,fontSize:l,textAlign:"center",textBaseline:"middle"},[[d,p]]=r;return Tt(new ht.xv).style("x",d).style("y",p).call(jt,i).style("transformOrigin","center center").style("transform",`${u}rotate(${c}deg)`).style("coordCenter",n.getCenter()).call(jt,f).call(jt,t).node()}};cm.props={defaultMarker:"point",defaultEnterAnimation:"fadeIn",defaultUpdateAnimation:"morphing",defaultExitAnimation:"fadeOut"};const Pc=()=>(t,e)=>{const{data:n}=e;if(!Array.isArray(n)||n.some(ja))return[t,e];const r=Array.isArray(n[0])?n:[n],o=r.map(a=>a[0]),i=r.map(a=>a[1]);return[t,(0,et.Z)({},e,{encode:{x:Oe(o),y:Oe(i)}})]};Pc.props={};var lm=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,r=Object.getOwnPropertySymbols(t);o<r.length;o++)e.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(t,r[o])&&(n[r[o]]=t[r[o]]);return n};const Tc=()=>(t,e)=>{const{data:n,style:r={}}=e,o=lm(e,["data","style"]),{x:i,y:a}=r,s=lm(r,["x","y"]);if(i==null||a==null)return[t,e];const l=i||0,c=a||0;return[[0],(0,et.Z)({},o,{data:[0],cartesian:!0,encode:{x:Oe([l]),y:Oe([c])},scale:{x:{type:"identity",independent:!0,guide:null},y:{type:"identity",independent:!0,guide:null}},style:s})]};Tc.props={};const um={text:am,badge:sm,tag:cm},fm=t=>{const{cartesian:e=!1}=t;return e?Ku:(n,r,o,i)=>{const{x:a,y:s}=o,l=Do(r,o,t),c=Array.from(n,u=>{const f=[+a[u],+s[u]];return[i.map(l(f,u))]});return[n,c]}};fm.props={defaultShape:"text",defaultLabelShape:"label",composite:!1,shape:um,channels:[...Mn({shapes:Object.keys(um)}),{name:"x",required:!0},{name:"y",required:!0},{name:"text",scale:"identity"},{name:"fontSize",scale:"identity"},{name:"rotate",scale:"identity"}],preInference:[...Xe(),{type:Pc},{type:Tc}],postInference:[...qe(),...io()]};const lf=()=>(t,e)=>[t,(0,et.Z)({scale:{x:{padding:0},y:{padding:0}}},e)];lf.props={};const dm={cell:Ro,hollow:wc},pm=()=>(t,e,n,r)=>{const{x:o,y:i}=n,a=e.x,s=e.y,l=Array.from(t,c=>{const u=a.getBandWidth(a.invert(+o[c])),f=s.getBandWidth(s.invert(+i[c])),d=+o[c],p=+i[c],h=[d,p],y=[d+u,p],g=[d+u,p+f],m=[d,p+f];return[h,y,g,m].map(b=>r.map(b))});return[t,l]};pm.props={defaultShape:"cell",defaultLabelShape:"label",shape:dm,composite:!1,channels:[...Mn({shapes:Object.keys(dm)}),{name:"x",required:!0,scale:"band"},{name:"y",required:!0,scale:"band"}],preInference:[...Xe(),{type:Lo},{type:kc},{type:lf}],postInference:[...qe(),...io()]};function uf(t,e,n){var r=null,o=ke(!0),i=null,a=ca,s=null,l=cu(c);t=typeof t=="function"?t:t===void 0?Sh:ke(+t),e=typeof e=="function"?e:ke(e===void 0?0:+e),n=typeof n=="function"?n:n===void 0?jh:ke(+n);function c(f){var d,p,h,y=(f=xh(f)).length,g,m=!1,b,v=new Array(y),O=new Array(y);for(i==null&&(s=a(b=l())),d=0;d<=y;++d){if(!(d<y&&o(g=f[d],d,f))===m)if(m=!m)p=d,s.areaStart(),s.lineStart();else{for(s.lineEnd(),s.lineStart(),h=d-1;h>=p;--h)s.point(v[h],O[h]);s.lineEnd(),s.areaEnd()}m&&(v[d]=+t(g,d,f),O[d]=+e(g,d,f),s.point(r?+r(g,d,f):v[d],n?+n(g,d,f):O[d]))}if(b)return s=null,b+""||null}function u(){return jo().defined(o).curve(a).context(i)}return c.x=function(f){return arguments.length?(t=typeof f=="function"?f:ke(+f),r=null,c):t},c.x0=function(f){return arguments.length?(t=typeof f=="function"?f:ke(+f),c):t},c.x1=function(f){return arguments.length?(r=f==null?null:typeof f=="function"?f:ke(+f),c):r},c.y=function(f){return arguments.length?(e=typeof f=="function"?f:ke(+f),n=null,c):e},c.y0=function(f){return arguments.length?(e=typeof f=="function"?f:ke(+f),c):e},c.y1=function(f){return arguments.length?(n=f==null?null:typeof f=="function"?f:ke(+f),c):n},c.lineX0=c.lineY0=function(){return u().x(t).y(e)},c.lineY1=function(){return u().x(t).y(n)},c.lineX1=function(){return u().x(r).y(e)},c.defined=function(f){return arguments.length?(o=typeof f=="function"?f:ke(!!f),c):o},c.curve=function(f){return arguments.length?(a=f,i!=null&&(s=a(i)),c):a},c.context=function(f){return arguments.length?(f==null?i=s=null:s=a(i=f),c):i},c}function i3(){var t=uf().curve(lg),e=t.curve,n=t.lineX0,r=t.lineX1,o=t.lineY0,i=t.lineY1;return t.angle=t.x,delete t.x,t.startAngle=t.x0,delete t.x0,t.endAngle=t.x1,delete t.x1,t.radius=t.y,delete t.y,t.innerRadius=t.y0,delete t.y0,t.outerRadius=t.y1,delete t.y1,t.lineStartAngle=function(){return Ma(n())},delete t.lineX0,t.lineEndAngle=function(){return Ma(r())},delete t.lineX1,t.lineInnerRadius=function(){return Ma(o())},delete t.lineY0,t.lineOuterRadius=function(){return Ma(i())},delete t.lineY1,t.curve=function(a){return arguments.length?e(tf(a)):e()._curve},t}var a3=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,r=Object.getOwnPropertySymbols(t);o<r.length;o++)e.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(t,r[o])&&(n[r[o]]=t[r[o]]);return n};function s3(t,e){const n=[],r=[],o=[];let i=!1,a=null;const s=t.length/2;for(let l=0;l<s;l++){const c=t[l],u=t[l+s];if([...c,...u].some(f=>!e(f)))i=!0;else{if(n.push(c),r.push(u),i&&a){i=!1;const[f,d]=a;o.push([f,c,d,u])}a=[c,u]}}return[n.concat(r),o]}const hm=oi(t=>{const{areaPath:e,connectPath:n,areaStyle:r,connectStyle:o}=t.attributes,i=t.ownerDocument;Tt(t).maybeAppend("connect-path",()=>i.createElement("path",{})).style("d",n).call(jt,o),Tt(t).maybeAppend("area-path",()=>i.createElement("path",{})).style("d",e).call(jt,r)}),lr=(t,e)=>{const{curve:n,gradient:r=!1,defined:o=c=>!Number.isNaN(c)&&c!==void 0&&c!==null,connect:i=!1}=t,a=a3(t,["curve","gradient","defined","connect"]),{coordinate:s,document:l}=e;return(c,u,f)=>{const{color:d}=f,{color:p=d,seriesColor:h,seriesX:y,seriesY:g}=u,m=Me(s),b=Oh(s,u),v=r&&h?vh(h,y,g,r,void 0,m):p,O=Object.assign(Object.assign(Object.assign(Object.assign({},f),{stroke:v,fill:v}),b&&{transform:b}),a),[x,w]=s3(c,o),j=at(O,"connect"),E=!!w.length,M=R=>Tt(l.createElement("path",{})).style("d",R||"").call(jt,O).node();if(be(s)){const R=D=>{const F=s.getCenter(),A=D.slice(0,D.length/2),T=D.slice(D.length/2);return i3().angle((P,k)=>ri($e(A[k],F))).outerRadius((P,k)=>Ne(A[k],F)).innerRadius((P,k)=>Ne(T[k],F)).defined((P,k)=>[...A[k],...T[k]].every(o)).curve(n)(T)};return!E||i&&!Object.keys(j).length?M(R(x)):E&&!i?M(R(c)):Tt(new hm).style("areaStyle",O).style("connectStyle",Object.assign(Object.assign({},j),a)).style("areaPath",R(c)).style("connectPath",w.map(R).join("")).node()}else{const R=D=>{const F=D.slice(0,D.length/2),A=D.slice(D.length/2);return m?uf().y((T,P)=>F[P][1]).x1((T,P)=>F[P][0]).x0((T,P)=>A[P][0]).defined((T,P)=>[...F[P],...A[P]].every(o)).curve(n)(F):uf().x((T,P)=>F[P][0]).y1((T,P)=>F[P][1]).y0((T,P)=>A[P][1]).defined((T,P)=>[...F[P],...A[P]].every(o)).curve(n)(F)};return!E||i&&!Object.keys(j).length?M(R(x)):E&&!i?M(R(c)):Tt(new hm).style("areaStyle",O).style("connectStyle",Object.assign(Object.assign({},j),a)).style("areaPath",R(c)).style("connectPath",w.map(R).join("")).node()}}};lr.props={defaultMarker:"smooth",defaultEnterAnimation:"fadeIn",defaultUpdateAnimation:"morphing",defaultExitAnimation:"fadeOut"};const ym=(t,e)=>{const{coordinate:n}=e;return(...r)=>{const o=be(n)?Uu:ca;return lr(Object.assign({curve:o},t),e)(...r)}};ym.props=Object.assign(Object.assign({},lr.props),{defaultMarker:"square"});var c3=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,r=Object.getOwnPropertySymbols(t);o<r.length;o++)e.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(t,r[o])&&(n[r[o]]=t[r[o]]);return n};const gm=(t,e)=>{const n=c3(t,[]),{coordinate:r}=e;return(...o)=>{const i=be(r)?gg:Me(r)?wg:_g;return lr(Object.assign({curve:i},n),e)(...o)}};gm.props=Object.assign(Object.assign({},lr.props),{defaultMarker:"smooth"});const mm=(t,e)=>(...n)=>lr(Object.assign({curve:jg},t),e)(...n);mm.props=Object.assign(Object.assign({},lr.props),{defaultMarker:"hvh"});const bm=(t,e)=>(...n)=>lr(Object.assign({curve:Eg},t),e)(...n);bm.props=Object.assign(Object.assign({},lr.props),{defaultMarker:"vh"});const vm=(t,e)=>(...n)=>lr(Object.assign({curve:Ag},t),e)(...n);vm.props=Object.assign(Object.assign({},lr.props),{defaultMarker:"hv"});const Om={area:ym,smooth:gm,hvh:mm,vh:bm,hv:vm},xm=()=>(t,e,n,r)=>{var o,i;const{x:a,y:s,y1:l,series:c}=n,{x:u,y:f}=e,d=c?Array.from(ve(t,m=>c[m]).values()):[t],p=d.map(m=>m[0]).filter(m=>m!==void 0),h=(((o=u==null?void 0:u.getBandWidth)===null||o===void 0?void 0:o.call(u))||0)/2,y=(((i=f==null?void 0:f.getBandWidth)===null||i===void 0?void 0:i.call(f))||0)/2,g=Array.from(d,m=>{const b=m.length,v=new Array(b*2);for(let O=0;O<m.length;O++){const x=m[O];v[O]=r.map([+a[x]+h,+s[x]+y]),v[b+O]=r.map([+a[x]+h,+l[x]+y])}return v});return[p,g,d]};xm.props={defaultShape:"area",defaultLabelShape:"label",composite:!1,shape:Om,channels:[...Mn({shapes:Object.keys(Om)}),{name:"x",required:!0},{name:"y",required:!0},{name:"size"},{name:"series",scale:"band"}],preInference:[...Xe(),{type:af},{type:Ea},{type:lf}],postInference:[...qe(),..._i()],interaction:{shareTooltip:!0,seriesTooltip:!0,crosshairs:!0}};const _m=()=>(t,e)=>{const{encode:n}=e,{y1:r}=n;if(r)return[t,e];const[o]=se(n,"y");return[t,(0,et.Z)({},e,{encode:{y1:Oe([...o])}})]};_m.props={};const wm=()=>(t,e)=>{const{encode:n}=e,{x1:r}=n;if(r)return[t,e];const[o]=se(n,"x");return[t,(0,et.Z)({},e,{encode:{x1:Oe([...o])}})]};wm.props={};var Sm=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,r=Object.getOwnPropertySymbols(t);o<r.length;o++)e.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(t,r[o])&&(n[r[o]]=t[r[o]]);return n};const ff=(t,e)=>{const{arrow:n=!0,arrowSize:r="40%"}=t,o=Sm(t,["arrow","arrowSize"]),{document:i}=e;return(a,s,l)=>{const{defaultColor:c}=l,u=Sm(l,["defaultColor"]),{color:f=c,transform:d}=s,[p,h]=a,y=Gn();if(y.moveTo(...p),y.lineTo(...h),n){const[g,m]=Uw(p,h,{arrowSize:r});y.moveTo(...g),y.lineTo(...h),y.lineTo(...m)}return Tt(i.createElement("path",{})).call(jt,u).style("d",y.toString()).style("stroke",f).style("transform",d).call(jt,o).node()}};ff.props={defaultMarker:"line",defaultEnterAnimation:"fadeIn",defaultUpdateAnimation:"morphing",defaultExitAnimation:"fadeOut"};const jm=(t,e)=>{const{arrow:n=!1}=t;return(...r)=>ff(Object.assign(Object.assign({},t),{arrow:n}),e)(...r)};jm.props={defaultMarker:"line",defaultEnterAnimation:"fadeIn",defaultUpdateAnimation:"morphing",defaultExitAnimation:"fadeOut"};var Em=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,r=Object.getOwnPropertySymbols(t);o<r.length;o++)e.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(t,r[o])&&(n[r[o]]=t[r[o]]);return n};const Am=(t,e)=>{const n=Em(t,[]),{coordinate:r,document:o}=e;return(i,a,s)=>{const{color:l}=s,c=Em(s,["color"]),{color:u=l,transform:f}=a,[d,p]=i,h=Gn();if(h.moveTo(d[0],d[1]),be(r)){const y=r.getCenter();h.quadraticCurveTo(y[0],y[1],p[0],p[1])}else{const y=bh(d,p),g=Ne(d,p)/2;sa(h,d,p,y,g)}return Tt(o.createElement("path",{})).call(jt,c).style("d",h.toString()).style("stroke",u).style("transform",f).call(jt,n).node()}};Am.props={defaultMarker:"smooth",defaultEnterAnimation:"fadeIn",defaultUpdateAnimation:"morphing",defaultExitAnimation:"fadeOut"};var Mm=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,r=Object.getOwnPropertySymbols(t);o<r.length;o++)e.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(t,r[o])&&(n[r[o]]=t[r[o]]);return n};const km=(t,e)=>{const n=Mm(t,[]),{document:r}=e;return(o,i,a)=>{const{color:s}=a,l=Mm(a,["color"]),{color:c=s,transform:u}=i,[f,d]=o,p=Gn();return p.moveTo(f[0],f[1]),p.bezierCurveTo(f[0]/2+d[0]/2,f[1],f[0]/2+d[0]/2,d[1],d[0],d[1]),Tt(r.createElement("path",{})).call(jt,l).style("d",p.toString()).style("stroke",c).style("transform",u).call(jt,n).node()}};km.props={defaultMarker:"smooth",defaultEnterAnimation:"fadeIn",defaultUpdateAnimation:"morphing",defaultExitAnimation:"fadeOut"};var Pm=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,r=Object.getOwnPropertySymbols(t);o<r.length;o++)e.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(t,r[o])&&(n[r[o]]=t[r[o]]);return n};function l3(t,e,n,r){const o=Gn();if(be(n)){const i=n.getCenter(),a=Ne(t,i),l=(Ne(e,i)-a)*r+a;return o.moveTo(t[0],t[1]),sa(o,t,e,i,l),o.lineTo(e[0],e[1]),o}return Me(n)?(o.moveTo(t[0],t[1]),o.lineTo(t[0]+(e[0]-t[0])*r,t[1]),o.lineTo(t[0]+(e[0]-t[0])*r,e[1]),o.lineTo(e[0],e[1]),o):(o.moveTo(t[0],t[1]),o.lineTo(t[0],t[1]+(e[1]-t[1])*r),o.lineTo(e[0],t[1]+(e[1]-t[1])*r),o.lineTo(e[0],e[1]),o)}const Tm=(t,e)=>{const{cornerRatio:n=1/3}=t,r=Pm(t,["cornerRatio"]),{coordinate:o,document:i}=e;return(a,s,l)=>{const{defaultColor:c}=l,u=Pm(l,["defaultColor"]),{color:f=c,transform:d}=s,[p,h]=a,y=l3(p,h,o,n);return Tt(i.createElement("path",{})).call(jt,u).style("d",y.toString()).style("stroke",f).style("transform",d).call(jt,r).node()}};Tm.props={defaultMarker:"vhv",defaultEnterAnimation:"fadeIn",defaultUpdateAnimation:"morphing",defaultExitAnimation:"fadeOut"};const Cm={link:jm,arc:Am,smooth:km,vhv:Tm},df=t=>(e,n,r,o)=>{const{x:i,y:a,x1:s=i,y1:l=a}=r,c=Do(n,r,t),u=e.map(f=>[o.map(c([+i[f],+a[f]],f)),o.map(c([+s[f],+l[f]],f))]);return[e,u]};df.props={defaultShape:"link",defaultLabelShape:"label",composite:!1,shape:Cm,channels:[...Mn({shapes:Object.keys(Cm)}),{name:"x",required:!0},{name:"y",required:!0}],preInference:[...Xe(),{type:_m},{type:wm}],postInference:[...qe(),...io()]};var u3=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,r=Object.getOwnPropertySymbols(t);o<r.length;o++)e.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(t,r[o])&&(n[r[o]]=t[r[o]]);return n};const Lm=(t,e)=>{const{coordinate:n,document:r}=e;return(o,i,a)=>{const{color:s}=a,l=u3(a,["color"]),{color:c=s,src:u="",size:f=32,transform:d=""}=i;let{width:p=f,height:h=f}=t;const[[y,g]]=o,[m,b]=n.getSize();p=typeof p=="string"?Ec(p)*m:p,h=typeof h=="string"?Ec(h)*b:h;const v=y-Number(p)/2,O=g-Number(h)/2;return Tt(r.createElement("image",{})).call(jt,l).style("x",v).style("y",O).style("src",u).style("stroke",c).style("transform",d).call(jt,t).style("width",p).style("height",h).node()}};Lm.props={defaultEnterAnimation:"fadeIn",defaultUpdateAnimation:"morphing",defaultExitAnimation:"fadeOut"};const Rm={image:Lm},Dm=t=>{const{cartesian:e}=t;return e?Ku:(n,r,o,i)=>{const{x:a,y:s}=o,l=Do(r,o,t),c=Array.from(n,u=>{const f=[+a[u],+s[u]];return[i.map(l(f,u))]});return[n,c]}};Dm.props={defaultShape:"image",defaultLabelShape:"label",composite:!1,shape:Rm,channels:[...Mn({shapes:Object.keys(Rm)}),{name:"x",required:!0},{name:"y",required:!0},{name:"src",scale:"identity"},{name:"size"}],preInference:[...Xe(),{type:Pc},{type:Tc}],postInference:[...qe(),...io()]};var f3=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,r=Object.getOwnPropertySymbols(t);o<r.length;o++)e.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(t,r[o])&&(n[r[o]]=t[r[o]]);return n};function d3(t,e){const n=Gn();if(be(e)){const r=e.getCenter(),o=[...t,t[0]],i=o.map(a=>Ne(a,r));return o.forEach((a,s)=>{if(s===0){n.moveTo(a[0],a[1]);return}const l=i[s],c=t[s-1],u=i[s-1];u!==void 0&&Math.abs(l-u)<1e-10?sa(n,c,a,r,l):n.lineTo(a[0],a[1])}),n.closePath(),n}return Gw(n,t)}const Im=(t,e)=>{const{coordinate:n,document:r}=e;return(o,i,a)=>{const{color:s}=a,l=f3(a,["color"]),{color:c=s,transform:u}=i,f=d3(o,n);return Tt(r.createElement("path",{})).call(jt,l).style("d",f.toString()).style("stroke",c).style("fill",c).style("transform",u).call(jt,t).node()}};Im.props={defaultMarker:"square",defaultEnterAnimation:"fadeIn",defaultUpdateAnimation:"morphing",defaultExitAnimation:"fadeOut"};var Fm=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,r=Object.getOwnPropertySymbols(t);o<r.length;o++)e.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(t,r[o])&&(n[r[o]]=t[r[o]]);return n};function p3(t,e){const[n,r,o,i]=t,a=Gn();if(be(e)){const s=e.getCenter(),l=Ne(s,n);return a.moveTo(n[0],n[1]),a.quadraticCurveTo(s[0],s[1],o[0],o[1]),sa(a,o,i,s,l),a.quadraticCurveTo(s[0],s[1],r[0],r[1]),sa(a,r,n,s,l),a.closePath(),a}return a.moveTo(n[0],n[1]),a.bezierCurveTo(n[0]/2+o[0]/2,n[1],n[0]/2+o[0]/2,o[1],o[0],o[1]),a.lineTo(i[0],i[1]),a.bezierCurveTo(i[0]/2+r[0]/2,i[1],i[0]/2+r[0]/2,r[1],r[0],r[1]),a.lineTo(n[0],n[1]),a.closePath(),a}const Nm=(t,e)=>{const n=Fm(t,[]),{coordinate:r,document:o}=e;return(i,a,s)=>{const{color:l}=s,c=Fm(s,["color"]),{color:u=l,transform:f}=a,d=p3(i,r);return Tt(o.createElement("path",{})).call(jt,c).style("d",d.toString()).style("fill",u||l).style("stroke",u||l).style("transform",f).call(jt,n).node()}};Nm.props={defaultMarker:"square",defaultEnterAnimation:"fadeIn",defaultUpdateAnimation:"morphing",defaultExitAnimation:"fadeOut"};const zm={polygon:Im,ribbon:Nm},Bm=()=>(t,e,n,r)=>{const o=Object.entries(n).filter(([s])=>s.startsWith("x")).map(([,s])=>s),i=Object.entries(n).filter(([s])=>s.startsWith("y")).map(([,s])=>s),a=t.map(s=>{const l=[];for(let c=0;c<o.length;c++){const u=o[c][s];if(u===void 0)break;const f=i[c][s];l.push(r.map([+u,+f]))}return l});return[t,a]};Bm.props={defaultShape:"polygon",defaultLabelShape:"label",composite:!1,shape:zm,channels:[...Mn({shapes:Object.keys(zm)}),{name:"x",required:!0},{name:"y",required:!0}],preInference:[...Xe()],postInference:[...qe(),...io()]};var h3=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,r=Object.getOwnPropertySymbols(t);o<r.length;o++)e.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(t,r[o])&&(n[r[o]]=t[r[o]]);return n};function y3(t,e){const n=Gn();if(!be(e))n.moveTo(...t[0]),n.lineTo(...t[1]),n.moveTo(...t[2]),n.lineTo(...t[3]),n.moveTo(...t[4]),n.lineTo(...t[5]),n.lineTo(...t[6]),n.lineTo(...t[7]),n.closePath(),n.moveTo(...t[8]),n.lineTo(...t[9]),n.moveTo(...t[10]),n.lineTo(...t[11]),n.moveTo(...t[12]),n.lineTo(...t[13]);else{const r=e.getCenter(),[o,i]=r,a=Xn($e(t[0],r)),s=Xn($e(t[1],r)),l=Ne(r,t[2]),c=Ne(r,t[3]),u=Ne(r,t[8]),f=Ne(r,t[10]),d=Ne(r,t[11]);n.moveTo(...t[0]),n.arc(o,i,l,a,s),n.arc(o,i,l,s,a,!0),n.moveTo(...t[2]),n.lineTo(...t[3]),n.moveTo(...t[4]),n.arc(o,i,c,a,s),n.lineTo(...t[6]),n.arc(o,i,f,s,a,!0),n.closePath(),n.moveTo(...t[8]),n.arc(o,i,u,a,s),n.arc(o,i,u,s,a,!0),n.moveTo(...t[10]),n.lineTo(...t[11]),n.moveTo(...t[12]),n.arc(o,i,d,a,s),n.arc(o,i,d,s,a,!0)}return n}const $m=(t,e)=>{const{coordinate:n,document:r}=e;return(o,i,a)=>{const{color:s,transform:l}=i,{color:c,fill:u=c,stroke:f=c}=a,d=h3(a,["color","fill","stroke"]),p=y3(o,n);return Tt(r.createElement("path",{})).call(jt,d).style("d",p.toString()).style("stroke",f).style("fill",s||u).style("transform",l).call(jt,t).node()}};$m.props={defaultMarker:"point",defaultEnterAnimation:"fadeIn",defaultUpdateAnimation:"morphing",defaultExitAnimation:"fadeOut"};var g3=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,r=Object.getOwnPropertySymbols(t);o<r.length;o++)e.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(t,r[o])&&(n[r[o]]=t[r[o]]);return n};function m3(t,e,n=4){const r=Gn();if(!be(e))return r.moveTo(...t[2]),r.lineTo(...t[3]),r.lineTo(t[3][0]-n,t[3][1]),r.lineTo(t[10][0]-n,t[10][1]),r.lineTo(t[10][0]+n,t[10][1]),r.lineTo(t[3][0]+n,t[3][1]),r.lineTo(...t[3]),r.closePath(),r.moveTo(...t[10]),r.lineTo(...t[11]),r.moveTo(t[3][0]+n/2,t[8][1]),r.arc(t[3][0],t[8][1],n/2,0,Math.PI*2),r.closePath(),r;const o=e.getCenter(),[i,a]=o,s=Ne(o,t[3]),l=Ne(o,t[8]),c=Ne(o,t[10]),u=Xn($e(t[2],o)),f=Math.asin(n/l),d=u-f,p=u+f;r.moveTo(...t[2]),r.lineTo(...t[3]),r.moveTo(Math.cos(d)*s+i,Math.sin(d)*s+a),r.arc(i,a,s,d,p),r.lineTo(Math.cos(p)*c+i,Math.sin(p)*c+a),r.arc(i,a,c,p,d,!0),r.lineTo(Math.cos(d)*s+i,Math.sin(d)*s+a),r.closePath(),r.moveTo(...t[10]),r.lineTo(...t[11]);const h=(d+p)/2;return r.moveTo(Math.cos(h)*(l+n/2)+i,Math.sin(h)*(l+n/2)+a),r.arc(Math.cos(h)*l+i,Math.sin(h)*l+a,n/2,h,Math.PI*2+h),r.closePath(),r}const Ym=(t,e)=>{const{coordinate:n,document:r}=e;return(o,i,a)=>{const{color:s,transform:l}=i,c=4,{color:u,fill:f=u,stroke:d=u}=a,p=g3(a,["color","fill","stroke"]),h=m3(o,n,c);return Tt(r.createElement("path",{})).call(jt,p).style("d",h.toString()).style("stroke",d).style("fill",s||f).style("transform",l).call(jt,t).node()}};Ym.props={defaultMarker:"point",defaultEnterAnimation:"fadeIn",defaultUpdateAnimation:"morphing",defaultExitAnimation:"fadeOut"};const Wm={box:$m,violin:Ym},Zm=()=>(t,e,n,r)=>{const{x:o,y:i,y1:a,y2:s,y3:l,y4:c,series:u}=n,f=e.x,d=e.series,p=Array.from(t,h=>{const y=f.getBandWidth(f.invert(+o[h])),g=d?d.getBandWidth(d.invert(+(u==null?void 0:u[h]))):1,m=y*g,b=(+(u==null?void 0:u[h])||0)*y,v=+o[h]+b+m/2,[O,x,w,j,E]=[+i[h],+a[h],+s[h],+l[h],+c[h]];return[[v-m/2,E],[v+m/2,E],[v,E],[v,j],[v-m/2,j],[v+m/2,j],[v+m/2,x],[v-m/2,x],[v-m/2,w],[v+m/2,w],[v,x],[v,O],[v-m/2,O],[v+m/2,O]].map(R=>r.map(R))});return[t,p]};Zm.props={defaultShape:"box",defaultLabelShape:"label",composite:!1,shape:Wm,channels:[...Mn({shapes:Object.keys(Wm)}),{name:"x",scale:"band",required:!0},{name:"y",required:!0},{name:"series",scale:"band"}],preInference:[...Xe(),{type:Lo}],postInference:[...qe(),..._i()],interaction:{shareTooltip:!0}};const Hm={vector:ff},Xm=()=>(t,e,n,r)=>{const{x:o,y:i,size:a,rotate:s}=n,[l,c]=r.getSize(),u=t.map(f=>{const d=+s[f]/180*Math.PI,p=+a[f],h=p/l,y=p/c,g=h*Math.cos(d),m=-y*Math.sin(d);return[r.map([+o[f]-g/2,+i[f]-m/2]),r.map([+o[f]+g/2,+i[f]+m/2])]});return[t,u]};Xm.props={defaultShape:"vector",defaultLabelShape:"label",composite:!1,shape:Hm,channels:[...Mn({shapes:Object.keys(Hm)}),{name:"x",required:!0},{name:"y",required:!0},{name:"rotate",required:!0,scale:"identity"},{name:"size",required:!0}],preInference:[...Xe()],postInference:[...qe(),...io()]};var Gm=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,r=Object.getOwnPropertySymbols(t);o<r.length;o++)e.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(t,r[o])&&(n[r[o]]=t[r[o]]);return n};function b3(t,e,n){return t.createElement("path",{style:Object.assign({d:`M ${e},${e} L -${e},0 L ${e},-${e} L 0,0 Z`,transformOrigin:"center"},n)})}function v3(t,e){if(!be(e))return jo().x(r=>r[0]).y(r=>r[1])(t);const n=e.getCenter();return hu()({startAngle:0,endAngle:Math.PI*2,outerRadius:Ne(t[0],n),innerRadius:Ne(t[1],n)})}function O3(t,e){if(!be(t))return e;const[n,r]=t.getCenter();return`translate(${n}, ${r}) ${e||""}`}const pf=(t,e)=>{const{arrow:n,arrowSize:r=4}=t,o=Gm(t,["arrow","arrowSize"]),{coordinate:i,document:a}=e;return(s,l,c)=>{const{color:u,lineWidth:f}=c,d=Gm(c,["color","lineWidth"]),{color:p=u,size:h=f}=l,y=n?b3(a,r,Object.assign({fill:o.stroke||p,stroke:o.stroke||p},at(o,"arrow"))):null,g=v3(s,i),m=O3(i,l.transform);return Tt(a.createElement("path",{})).call(jt,d).style("d",g).style("stroke",p).style("lineWidth",h).style("transform",m).style("markerEnd",y).call(jt,o).node()}};pf.props={defaultMarker:"line",defaultEnterAnimation:"fadeIn",defaultUpdateAnimation:"morphing",defaultExitAnimation:"fadeOut"};const Um=()=>(t,e)=>{const{data:n}=e;return!Array.isArray(n)||n.some(ja)?[t,e]:[t,(0,et.Z)({},e,{encode:{x:Oe(n)}})]};Um.props={};const Vm={line:pf},qm=t=>(e,n,r,o)=>{const{x:i}=r,a=Do(n,r,(0,et.Z)({style:{bandOffset:0}},t)),s=Array.from(e,l=>{const c=[i[l],1],u=[i[l],0];return[c,u].map(f=>o.map(a(f,l)))});return[e,s]};qm.props={defaultShape:"line",defaultLabelShape:"label",composite:!1,shape:Vm,channels:[...wi({shapes:Object.keys(Vm)}),{name:"x",required:!0}],preInference:[...Xe(),{type:Um}],postInference:[...qe()]};const Km=()=>(t,e)=>{const{data:n}=e;return!Array.isArray(n)||n.some(ja)?[t,e]:[t,(0,et.Z)({},e,{encode:{y:Oe(n)}})]};Km.props={};const Qm={line:pf},Jm=t=>(e,n,r,o)=>{const{y:i}=r,a=Do(n,r,(0,et.Z)({style:{bandOffset:0}},t)),s=Array.from(e,l=>{const c=[0,i[l]],u=[1,i[l]];return[c,u].map(f=>o.map(a(f,l)))});return[e,s]};Jm.props={defaultShape:"line",defaultLabelShape:"label",composite:!1,shape:Qm,channels:[...wi({shapes:Object.keys(Qm)}),{name:"y",required:!0}],preInference:[...Xe(),{type:Km}],postInference:[...qe()]};var tb=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,r=Object.getOwnPropertySymbols(t);o<r.length;o++)e.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(t,r[o])&&(n[r[o]]=t[r[o]]);return n};function x3(t,e,n){return[["M",t,e],["L",t+2*n,e-n],["L",t+2*n,e+n],["Z"]]}function _3(t){return jo().x(e=>e[0]).y(e=>e[1])(t)}function w3(t,e,n,r,o=0){const[[i,a],[s,l]]=e;if(Me(t)){const d=i+n,p=s+r,h=d+o;return[[d,a],[h,a],[h,l],[p,l]]}const c=a-n,u=l-r,f=c-o;return[[i,c],[i,f],[s,f],[s,u]]}const eb=(t,e)=>{const{offset:n=0,offset1:r=n,offset2:o=n,connectLength1:i,endMarker:a=!0}=t,s=tb(t,["offset","offset1","offset2","connectLength1","endMarker"]),{coordinate:l}=e;return(c,u,f)=>{const{color:d,connectLength1:p}=f,h=tb(f,["color","connectLength1"]),{color:y,transform:g}=u,m=w3(l,c,r,o,i!=null?i:p),b=at(Object.assign(Object.assign({},s),f),"endMarker");return Tt(new ht.y$).call(jt,h).style("d",_3(m)).style("stroke",y||d).style("transform",g).style("markerEnd",a?new Xs.J({className:"marker",style:Object.assign(Object.assign({},b),{symbol:x3})}):null).call(jt,s).node()}};eb.props={defaultMarker:"line",defaultEnterAnimation:"fadeIn",defaultUpdateAnimation:"morphing",defaultExitAnimation:"fadeOut"};const nb={connector:eb},rb=(...t)=>df(...t);rb.props={defaultShape:"connector",defaultLabelShape:"label",composite:!1,shape:nb,channels:[...wi({shapes:Object.keys(nb)}),{name:"x",required:!0},{name:"y",required:!0}],preInference:[...Xe()],postInference:[...qe()]};function ob(t,e,n,r){if(e)return()=>[0,1];const{[t]:o,[`${t}1`]:i}=n;return a=>{var s;const l=((s=r.getBandWidth)===null||s===void 0?void 0:s.call(r,r.invert(+i[a])))||0;return[o[a],i[a]+l]}}function hf(t={}){const{extendX:e=!1,extendY:n=!1}=t;return(r,o,i,a)=>{const s=ob("x",e,i,o.x),l=ob("y",n,i,o.y),c=Array.from(r,u=>{const[f,d]=s(u),[p,h]=l(u);return[[f,p],[d,p],[d,h],[f,h]].map(v=>a.map(v))});return[r,c]}}const ib={range:Ro},ab=()=>hf();ab.props={defaultShape:"range",defaultLabelShape:"label",composite:!1,shape:ib,channels:[...wi({shapes:Object.keys(ib)}),{name:"x",required:!0},{name:"y",required:!0}],preInference:[...Xe()],postInference:[...qe()]};const sb=()=>(t,e)=>{const{data:n}=e;if(Array.isArray(n)&&(n.every(Array.isArray)||!n.some(ja))){const r=(o,i)=>Array.isArray(o[0])?o.map(a=>a[i]):[o[i]];return[t,(0,et.Z)({},e,{encode:{x:Oe(r(n,0)),x1:Oe(r(n,1))}})]}return[t,e]};sb.props={};const cb={range:Ro},lb=()=>hf({extendY:!0});lb.props={defaultShape:"range",defaultLabelShape:"label",composite:!1,shape:cb,channels:[...wi({shapes:Object.keys(cb)}),{name:"x",required:!0}],preInference:[...Xe(),{type:sb}],postInference:[...qe()]};const ub=()=>(t,e)=>{const{data:n}=e;if(Array.isArray(n)&&(n.every(Array.isArray)||!n.some(ja))){const r=(o,i)=>Array.isArray(o[0])?o.map(a=>a[i]):[o[i]];return[t,(0,et.Z)({},e,{encode:{y:Oe(r(n,0)),y1:Oe(r(n,1))}})]}return[t,e]};ub.props={};const fb={range:Ro},db=()=>hf({extendX:!0});db.props={defaultShape:"range",defaultLabelShape:"label",composite:!1,shape:fb,channels:[...wi({shapes:Object.keys(fb)}),{name:"y",required:!0}],preInference:[...Xe(),{type:ub}],postInference:[...qe()]};var pb=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,r=Object.getOwnPropertySymbols(t);o<r.length;o++)e.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(t,r[o])&&(n[r[o]]=t[r[o]]);return n};const yf=(t,e)=>{const{arrow:n,colorAttribute:r}=t,o=pb(t,["arrow","colorAttribute"]),{coordinate:i,document:a}=e;return(s,l,c)=>{const{color:u,stroke:f}=c,d=pb(c,["color","stroke"]),{d:p,color:h=u}=l,[y,g]=i.getSize();return Tt(a.createElement("path",{})).call(jt,d).style("d",typeof p=="function"?p({width:y,height:g}):p).style(r,h).call(jt,o).node()}};yf.props={defaultEnterAnimation:"fadeIn",defaultUpdateAnimation:"morphing",defaultExitAnimation:"fadeOut"};const hb=(t,e)=>yf(Object.assign({colorAttribute:"fill"},t),e);hb.props={defaultMarker:"hvh",defaultEnterAnimation:"fadeIn",defaultUpdateAnimation:"morphing",defaultExitAnimation:"fadeOut"};const yb=(t,e)=>yf(Object.assign({fill:"none",colorAttribute:"stroke"},t),e);yb.props={defaultMarker:"hvh",defaultEnterAnimation:"fadeIn",defaultUpdateAnimation:"morphing",defaultExitAnimation:"fadeOut"};const gb={path:hb,hollow:yb},mb=t=>(e,n,r,o)=>[e,e.map(()=>[[0,0]])];mb.props={defaultShape:"path",defaultLabelShape:"label",shape:gb,composite:!1,channels:[...Mn({shapes:Object.keys(gb)}),{name:"d",scale:"identity"}],preInference:[...Xe()],postInference:[...qe()]};var S3=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,r=Object.getOwnPropertySymbols(t);o<r.length;o++)e.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(t,r[o])&&(n[r[o]]=t[r[o]]);return n};const bb=(t,e)=>{const{render:n}=t,r=S3(t,["render"]);return o=>{const[[i,a]]=o;return n(Object.assign(Object.assign({},r),{x:i,y:a}),e)}};bb.props={defaultMarker:"point",defaultEnterAnimation:"fadeIn",defaultUpdateAnimation:"morphing",defaultExitAnimation:"fadeOut"};const vb=()=>(t,e)=>{const{style:n={}}=e;return[t,(0,et.Z)({},e,{style:Object.assign(Object.assign({},n),Object.fromEntries(Object.entries(n).filter(([,r])=>typeof r=="function").map(([r,o])=>[r,()=>o])))})]};vb.props={};const j3={shape:bb},Ob=t=>{const{cartesian:e}=t;return e?Ku:(n,r,o,i)=>{const{x:a,y:s}=o,l=Do(r,o,t),c=Array.from(n,u=>{const f=[+a[u],+s[u]];return[i.map(l(f,u))]});return[n,c]}};Ob.props={defaultShape:"shape",defaultLabelShape:"label",composite:!1,shape:j3,channels:[{name:"x",required:!0},{name:"y",required:!0}],preInference:[...Xe(),{type:Pc},{type:Tc},{type:vb}]};var E3=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,r=Object.getOwnPropertySymbols(t);o<r.length;o++)e.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(t,r[o])&&(n[r[o]]=t[r[o]]);return n};const xb=(t,e)=>{const{document:n}=e;return(r,o,i)=>{const{transform:a}=o,{color:s}=i,l=E3(i,["color"]),{color:c=s}=o,[u,...f]=r,d=Gn();return d.moveTo(...u),f.forEach(([p,h])=>{d.lineTo(p,h)}),d.closePath(),Tt(n.createElement("path",{})).call(jt,l).style("d",d.toString()).style("stroke",c||s).style("fill",c||s).style("fillOpacity",.4).style("transform",a).call(jt,t).node()}};xb.props={defaultMarker:"square",defaultEnterAnimation:"fadeIn",defaultUpdateAnimation:"morphing",defaultExitAnimation:"fadeOut"};const _b={density:xb},wb=()=>(t,e,n,r)=>{const{x:o,series:i}=n,a=Object.entries(n).filter(([f])=>f.startsWith("y")).map(([,f])=>f),s=Object.entries(n).filter(([f])=>f.startsWith("size")).map(([,f])=>f);if(o===void 0||a===void 0||s===void 0)throw new Error("Missing encode for x or y or size channel.");const l=e.x,c=e.series,u=Array.from(t,f=>{const d=l.getBandWidth(l.invert(+o[f])),p=c?c.getBandWidth(c.invert(+(i==null?void 0:i[f]))):1,h=d*p,y=(+(i==null?void 0:i[f])||0)*d,g=+o[f]+y+h/2;return[...a.map((b,v)=>[g+ +s[v][f]/t.length,+a[v][f]]),...a.map((b,v)=>[g-+s[v][f]/t.length,+a[v][f]]).reverse()].map(b=>r.map(b))});return[t,u]};wb.props={defaultShape:"density",defaultLabelShape:"label",composite:!1,shape:_b,channels:[...Mn({shapes:Object.keys(_b)}),{name:"x",scale:"band",required:!0},{name:"y",required:!0},{name:"size",required:!0},{name:"series",scale:"band"},{name:"size",required:!0,scale:"identity"}],preInference:[...Xe(),{type:Ea},{type:Lo}],postInference:[...qe(),..._i()],interaction:{shareTooltip:!0}};function A3(t){return typeof t=="string"?t.split(" ").map(e=>{const[n,r]=e.split(":");return[+n,r]}):t}function Cc(t,e,n){const r=t?t():document.createElement("canvas");return r.width=e,r.height=n,r}const M3=kp((t,e,n)=>{const r=Cc(n,t*2,t*2),o=r.getContext("2d"),i=t,a=t;if(e===1)o.beginPath(),o.arc(i,a,t,0,2*Math.PI,!1),o.fillStyle="rgba(0,0,0,1)",o.fill();else{const s=o.createRadialGradient(i,a,t*e,i,a,t);s.addColorStop(0,"rgba(0,0,0,1)"),s.addColorStop(1,"rgba(0,0,0,0)"),o.fillStyle=s,o.fillRect(0,0,2*t,2*t)}return r},t=>`${t}`);function k3(t,e){const r=Cc(e,256,1).getContext("2d"),o=r.createLinearGradient(0,0,256,1);return A3(t).forEach(([i,a])=>{o.addColorStop(i,a)}),r.fillStyle=o,r.fillRect(0,0,256,1),r.getImageData(0,0,256,1).data}function P3(t,e,n,r,o,i){const{blur:a}=o;let s=r.length;for(;s--;){const{x:l,y:c,value:u,radius:f}=r[s],d=Math.min(u,n),p=l-f,h=c-f,y=M3(f,1-a,i),g=(d-e)/(n-e);t.globalAlpha=Math.max(g,.001),t.drawImage(y,p,h)}return t}function T3(t,e,n,r,o){const{minOpacity:i,opacity:a,maxOpacity:s,useGradientOpacity:l}=o,c=0,u=0,f=e,d=n,p=t.getImageData(c,u,f,d),h=p.data,y=h.length;for(let g=3;g<y;g+=4){const m=h[g],b=m*4;if(!b)continue;const v=a||Math.max(0,Math.min(s,Math.max(i,m)));h[g-3]=r[b],h[g-2]=r[b+1],h[g-1]=r[b+2],h[g]=l?r[b+3]:v}return p}function C3(t,e,n,r,o,i,a){const s=Object.assign({blur:.85,minOpacity:0,opacity:.6,maxOpacity:1,gradient:[[.25,"rgb(0,0,255)"],[.55,"rgb(0,255,0)"],[.85,"yellow"],[1,"rgb(255,0,0)"]]},i);s.minOpacity*=255,s.opacity*=255,s.maxOpacity*=255;const c=Cc(a,t,e).getContext("2d"),u=k3(s.gradient,a);c.clearRect(0,0,t,e),P3(c,n,r,o,s,a);const f=T3(c,t,e,u,s),p=Cc(a,t,e).getContext("2d");return p.putImageData(f,0,0),p}var L3=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,r=Object.getOwnPropertySymbols(t);o<r.length;o++)e.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(t,r[o])&&(n[r[o]]=t[r[o]]);return n};function R3(t,e){return Object.keys(t).reduce((n,r)=>{const o=t[r];return e(o,r)||(n[r]=o),n},{})}const Sb=(t,e)=>{const{gradient:n,opacity:r,maxOpacity:o,minOpacity:i,blur:a,useGradientOpacity:s}=t,l=L3(t,["gradient","opacity","maxOpacity","minOpacity","blur","useGradientOpacity"]),{coordinate:c,createCanvas:u,document:f}=e;return(d,p,h)=>{const{transform:y}=p,[g,m]=c.getSize(),b=d.map(j=>({x:j[0],y:j[1],value:j[2],radius:j[3]})),v=Yn(d,j=>j[2]),O=he(d,j=>j[2]),w=g&&m?C3(g,m,v,O,b,R3({gradient:n,opacity:r,minOpacity:i,maxOpacity:o,blur:a,useGradientOpacity:s},j=>j===void 0),u):{canvas:null};return Tt(f.createElement("image",{})).call(jt,h).style("x",0).style("y",0).style("width",g).style("height",m).style("src",w.canvas.toDataURL()).style("transform",y).call(jt,l).node()}};Sb.props={defaultMarker:"point",defaultEnterAnimation:"fadeIn",defaultUpdateAnimation:"morphing",defaultExitAnimation:"fadeOut"};const jb={heatmap:Sb},Eb=t=>(e,n,r,o)=>{const{x:i,y:a,size:s,color:l}=r,c=Array.from(e,u=>{const f=s?+s[u]:40;return[...o.map([+i[u],+a[u]]),l[u],f]});return[[0],[c]]};Eb.props={defaultShape:"heatmap",defaultLabelShape:"label",composite:!1,shape:jb,channels:[...Mn({shapes:Object.keys(jb)}),{name:"x",required:!0},{name:"y",required:!0},{name:"color",scale:"identity",required:!0},{name:"size"}],preInference:[...Xe(),{type:Lo},{type:kc}],postInference:[...qe(),...io()]};var D3=function(t,e,n,r){function o(i){return i instanceof n?i:new n(function(a){a(i)})}return new(n||(n=Promise))(function(i,a){function s(u){try{c(r.next(u))}catch(f){a(f)}}function l(u){try{c(r.throw(u))}catch(f){a(f)}}function c(u){u.done?i(u.value):o(u.value).then(s,l)}c((r=r.apply(t,e||[])).next())})},I3=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,r=Object.getOwnPropertySymbols(t);o<r.length;o++)e.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(t,r[o])&&(n[r[o]]=t[r[o]]);return n};function F3(t,e){const{text:n="text",value:r="value"}=e;return t.map(o=>Object.assign(Object.assign({},o),{text:o[n],value:o[r]}))}const N3=()=>({axis:!1,type:"text",encode:{x:"x",y:"y",text:"text",rotate:"rotate",fontSize:"size",shape:"tag"},scale:{x:{range:[0,1]},y:{range:[0,1]}},style:{fontFamily:t=>t.fontFamily}}),gf=(t,e)=>D3(void 0,void 0,void 0,function*(){const{width:n,height:r}=e,{data:o,encode:i={},scale:a,style:s={},layout:l={}}=t,c=I3(t,["data","encode","scale","style","layout"]),u=F3(o,i);return(0,et.Z)({},N3(),Object.assign(Object.assign({data:{value:u,transform:[Object.assign({type:"wordCloud",size:[n,r]},l)]},encode:i,scale:a,style:s},c),{axis:!1}))});gf.props={};const Ab=()=>["#5B8FF9","#5AD8A6","#5D7092","#F6BD16","#6F5EF9","#6DC8EC","#945FB9","#FF9845","#1E9493","#FF99C3"];Ab.props={};const Mb=()=>["#5B8FF9","#CDDDFD","#5AD8A6","#CDF3E4","#5D7092","#CED4DE","#F6BD16","#FCEBB9","#6F5EF9","#D3CEFD","#6DC8EC","#D3EEF9","#945FB9","#DECFEA","#FF9845","#FFE0C7","#1E9493","#BBDEDE","#FF99C3","#FFE0ED"];Mb.props={};const kb=t=>new ir.b(t);kb.props={};var Pb=Q(5733);const Tb=t=>new Pb.r(t);Tb.props={};const Cb=t=>new B.t(t);Cb.props={};class Lc extends lt.X{getDefaultOptions(){return{domain:[0,1],range:[0,1],tickCount:5,unknown:void 0,tickMethod:Kl}}map(e){return(0,lh.J)(e)?e:this.options.unknown}invert(e){return this.map(e)}clone(){return new Lc(this.options)}getTicks(){const{domain:e,tickCount:n,tickMethod:r}=this.options,[o,i]=e;return!(0,V.Z)(o)||!(0,V.Z)(i)?[]:r(o,i,n)}}const Lb=t=>new Lc(t);Lb.props={};class mf extends B.t{getDefaultOptions(){return{domain:[],range:[0,1],align:.5,round:!1,padding:0,unknown:Pb.z,paddingInner:1,paddingOuter:0}}constructor(e){super(e)}getPaddingInner(){return 1}clone(){return new mf(this.options)}update(e){super.update(e)}getPaddingOuter(){return this.options.padding}}const Rb=t=>new mf(t);Rb.props={};var Rc=Q(96673),Db=/d{1,4}|M{1,4}|YY(?:YY)?|S{1,3}|Do|ZZ|Z|([HhMsDm])\1?|[aA]|"[^"]*"|'[^']*'/g,ao="\\d\\d?",so="\\d\\d",z3="\\d{3}",B3="\\d{4}",ka="[^\\s]+",Ib=/\[([^]*?)\]/gm;function Fb(t,e){for(var n=[],r=0,o=t.length;r<o;r++)n.push(t[r].substr(0,e));return n}var Nb=function(t){return function(e,n){var r=n[t].map(function(i){return i.toLowerCase()}),o=r.indexOf(e.toLowerCase());return o>-1?o:null}};function Io(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];for(var r=0,o=e;r<o.length;r++){var i=o[r];for(var a in i)t[a]=i[a]}return t}var zb=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],Bb=["January","February","March","April","May","June","July","August","September","October","November","December"],$3=Fb(Bb,3),Y3=Fb(zb,3),$b={dayNamesShort:Y3,dayNames:zb,monthNamesShort:$3,monthNames:Bb,amPm:["am","pm"],DoFn:function(t){return t+["th","st","nd","rd"][t%10>3?0:(t-t%10!==10?1:0)*t%10]}},Dc=Io({},$b),W3=function(t){return Dc=Io(Dc,t)},Yb=function(t){return t.replace(/[|\\{()[^$+*?.-]/g,"\\$&")},Dn=function(t,e){for(e===void 0&&(e=2),t=String(t);t.length<e;)t="0"+t;return t},Z3={D:function(t){return String(t.getDate())},DD:function(t){return Dn(t.getDate())},Do:function(t,e){return e.DoFn(t.getDate())},d:function(t){return String(t.getDay())},dd:function(t){return Dn(t.getDay())},ddd:function(t,e){return e.dayNamesShort[t.getDay()]},dddd:function(t,e){return e.dayNames[t.getDay()]},M:function(t){return String(t.getMonth()+1)},MM:function(t){return Dn(t.getMonth()+1)},MMM:function(t,e){return e.monthNamesShort[t.getMonth()]},MMMM:function(t,e){return e.monthNames[t.getMonth()]},YY:function(t){return Dn(String(t.getFullYear()),4).substr(2)},YYYY:function(t){return Dn(t.getFullYear(),4)},h:function(t){return String(t.getHours()%12||12)},hh:function(t){return Dn(t.getHours()%12||12)},H:function(t){return String(t.getHours())},HH:function(t){return Dn(t.getHours())},m:function(t){return String(t.getMinutes())},mm:function(t){return Dn(t.getMinutes())},s:function(t){return String(t.getSeconds())},ss:function(t){return Dn(t.getSeconds())},S:function(t){return String(Math.round(t.getMilliseconds()/100))},SS:function(t){return Dn(Math.round(t.getMilliseconds()/10),2)},SSS:function(t){return Dn(t.getMilliseconds(),3)},a:function(t,e){return t.getHours()<12?e.amPm[0]:e.amPm[1]},A:function(t,e){return t.getHours()<12?e.amPm[0].toUpperCase():e.amPm[1].toUpperCase()},ZZ:function(t){var e=t.getTimezoneOffset();return(e>0?"-":"+")+Dn(Math.floor(Math.abs(e)/60)*100+Math.abs(e)%60,4)},Z:function(t){var e=t.getTimezoneOffset();return(e>0?"-":"+")+Dn(Math.floor(Math.abs(e)/60),2)+":"+Dn(Math.abs(e)%60,2)}},Wb=function(t){return+t-1},Zb=[null,ao],Hb=[null,ka],Xb=["isPm",ka,function(t,e){var n=t.toLowerCase();return n===e.amPm[0]?0:n===e.amPm[1]?1:null}],Gb=["timezoneOffset","[^\\s]*?[\\+\\-]\\d\\d:?\\d\\d|[^\\s]*?Z?",function(t){var e=(t+"").match(/([+-]|\d\d)/gi);if(e){var n=+e[1]*60+parseInt(e[2],10);return e[0]==="+"?n:-n}return 0}],H3={D:["day",ao],DD:["day",so],Do:["day",ao+ka,function(t){return parseInt(t,10)}],M:["month",ao,Wb],MM:["month",so,Wb],YY:["year",so,function(t){var e=new Date,n=+(""+e.getFullYear()).substr(0,2);return+(""+(+t>68?n-1:n)+t)}],h:["hour",ao,void 0,"isPm"],hh:["hour",so,void 0,"isPm"],H:["hour",ao],HH:["hour",so],m:["minute",ao],mm:["minute",so],s:["second",ao],ss:["second",so],YYYY:["year",B3],S:["millisecond","\\d",function(t){return+t*100}],SS:["millisecond",so,function(t){return+t*10}],SSS:["millisecond",z3],d:Zb,dd:Zb,ddd:Hb,dddd:Hb,MMM:["month",ka,Nb("monthNamesShort")],MMMM:["month",ka,Nb("monthNames")],a:Xb,A:Xb,ZZ:Gb,Z:Gb},Ic={default:"ddd MMM DD YYYY HH:mm:ss",shortDate:"M/D/YY",mediumDate:"MMM D, YYYY",longDate:"MMMM D, YYYY",fullDate:"dddd, MMMM D, YYYY",isoDate:"YYYY-MM-DD",isoDateTime:"YYYY-MM-DDTHH:mm:ssZ",shortTime:"HH:mm",mediumTime:"HH:mm:ss",longTime:"HH:mm:ss.SSS"},X3=function(t){return Io(Ic,t)},Ub=function(t,e,n){if(e===void 0&&(e=Ic.default),n===void 0&&(n={}),typeof t=="number"&&(t=new Date(t)),Object.prototype.toString.call(t)!=="[object Date]"||isNaN(t.getTime()))throw new Error("Invalid Date pass to format");e=Ic[e]||e;var r=[];e=e.replace(Ib,function(i,a){return r.push(a),"@@@"});var o=Io(Io({},Dc),n);return e=e.replace(Db,function(i){return Z3[i](t,o)}),e.replace(/@@@/g,function(){return r.shift()})};function G3(t,e,n){if(n===void 0&&(n={}),typeof e!="string")throw new Error("Invalid format in fecha parse");if(e=Ic[e]||e,t.length>1e3)return null;var r=new Date,o={year:r.getFullYear(),month:0,day:1,hour:0,minute:0,second:0,millisecond:0,isPm:null,timezoneOffset:null},i=[],a=[],s=e.replace(Ib,function(O,x){return a.push(Yb(x)),"@@@"}),l={},c={};s=Yb(s).replace(Db,function(O){var x=H3[O],w=x[0],j=x[1],E=x[3];if(l[w])throw new Error("Invalid format. "+w+" specified twice in format");return l[w]=!0,E&&(c[E]=!0),i.push(x),"("+j+")"}),Object.keys(c).forEach(function(O){if(!l[O])throw new Error("Invalid format. "+O+" is required in specified format")}),s=s.replace(/@@@/g,function(){return a.shift()});var u=t.match(new RegExp(s,"i"));if(!u)return null;for(var f=Io(Io({},Dc),n),d=1;d<u.length;d++){var p=i[d-1],h=p[0],y=p[2],g=y?y(u[d],f):+u[d];if(g==null)return null;o[h]=g}o.isPm===1&&o.hour!=null&&+o.hour!=12?o.hour=+o.hour+12:o.isPm===0&&+o.hour==12&&(o.hour=0);var m;if(o.timezoneOffset==null){m=new Date(o.year,o.month,o.day,o.hour,o.minute,o.second,o.millisecond);for(var b=[["month","getMonth"],["day","getDate"],["hour","getHours"],["minute","getMinutes"],["second","getSeconds"]],d=0,v=b.length;d<v;d++)if(l[b[d][0]]&&o[b[d][0]]!==m[b[d][1]]())return null}else if(m=new Date(Date.UTC(o.year,o.month,o.day,o.hour,o.minute-o.timezoneOffset,o.second,o.millisecond)),o.month>11||o.month<0||o.day>31||o.day<1||o.hour>23||o.hour<0||o.minute>59||o.minute<0||o.second>59||o.second<0)return null;return m}var hD={format:Ub,parse:G3,defaultI18n:$b,setGlobalDateI18n:W3,setGlobalDateMasks:X3},yD=null,bf=Q(29785);const Pa=1e3,Ta=Pa*60,Ca=Ta*60,Fo=Ca*24,La=Fo*7,Vb=Fo*30,qb=Fo*365;function wn(t,e,n,r){const o=(c,u)=>{const f=p=>r(p)%u===0;let d=u;for(;d&&!f(c);)n(c,-1),d-=1;return c},i=(c,u)=>{u&&o(c,u),e(c)},a=(c,u)=>{const f=new Date(+c);return i(f,u),f},s=(c,u)=>{const f=new Date(+c-1);return i(f,u),n(f,u),i(f),f};return{ceil:s,floor:a,range:(c,u,f,d)=>{const p=[],h=Math.floor(f),y=d?s(c,f):s(c);for(let g=y;g<u;n(g,h),i(g))p.push(new Date(+g));return p},duration:t}}const U3=wn(1,t=>t,(t,e=1)=>{t.setTime(+t+e)},t=>t.getTime()),V3=wn(Pa,t=>{t.setMilliseconds(0)},(t,e=1)=>{t.setTime(+t+Pa*e)},t=>t.getSeconds()),q3=wn(Ta,t=>{t.setSeconds(0,0)},(t,e=1)=>{t.setTime(+t+Ta*e)},t=>t.getMinutes()),K3=wn(Ca,t=>{t.setMinutes(0,0,0)},(t,e=1)=>{t.setTime(+t+Ca*e)},t=>t.getHours()),Q3=wn(Fo,t=>{t.setHours(0,0,0,0)},(t,e=1)=>{t.setTime(+t+Fo*e)},t=>t.getDate()-1),Kb=wn(Vb,t=>{t.setDate(1),t.setHours(0,0,0,0)},(t,e=1)=>{const n=t.getMonth();t.setMonth(n+e)},t=>t.getMonth()),J3=wn(La,t=>{t.setDate(t.getDate()-t.getDay()%7),t.setHours(0,0,0,0)},(t,e=1)=>{t.setDate(t.getDate()+7*e)},t=>{const e=Kb.floor(t),n=new Date(+t);return Math.floor((+n-+e)/La)}),tk=wn(qb,t=>{t.setMonth(0,1),t.setHours(0,0,0,0)},(t,e=1)=>{const n=t.getFullYear();t.setFullYear(n+e)},t=>t.getFullYear()),Qb={millisecond:U3,second:V3,minute:q3,hour:K3,day:Q3,week:J3,month:Kb,year:tk},ek=wn(1,t=>t,(t,e=1)=>{t.setTime(+t+e)},t=>t.getTime()),nk=wn(Pa,t=>{t.setUTCMilliseconds(0)},(t,e=1)=>{t.setTime(+t+Pa*e)},t=>t.getUTCSeconds()),rk=wn(Ta,t=>{t.setUTCSeconds(0,0)},(t,e=1)=>{t.setTime(+t+Ta*e)},t=>t.getUTCMinutes()),ok=wn(Ca,t=>{t.setUTCMinutes(0,0,0)},(t,e=1)=>{t.setTime(+t+Ca*e)},t=>t.getUTCHours()),ik=wn(Fo,t=>{t.setUTCHours(0,0,0,0)},(t,e=1)=>{t.setTime(+t+Fo*e)},t=>t.getUTCDate()-1),Jb=wn(Vb,t=>{t.setUTCDate(1),t.setUTCHours(0,0,0,0)},(t,e=1)=>{const n=t.getUTCMonth();t.setUTCMonth(n+e)},t=>t.getUTCMonth()),ak=wn(La,t=>{t.setUTCDate(t.getUTCDate()-(t.getUTCDay()+7)%7),t.setUTCHours(0,0,0,0)},(t,e=1)=>{t.setTime(+t+La*e)},t=>{const e=Jb.floor(t),n=new Date(+t);return Math.floor((+n-+e)/La)}),sk=wn(qb,t=>{t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0)},(t,e=1)=>{const n=t.getUTCFullYear();t.setUTCFullYear(n+e)},t=>t.getUTCFullYear()),tv={millisecond:ek,second:nk,minute:rk,hour:ok,day:ik,week:ak,month:Jb,year:sk};var ev=Q(5097);function ck(t){const e=t?tv:Qb,{year:n,month:r,week:o,day:i,hour:a,minute:s,second:l,millisecond:c}=e;return{tickIntervals:[[l,1],[l,5],[l,15],[l,30],[s,1],[s,5],[s,15],[s,30],[a,1],[a,3],[a,6],[a,12],[i,1],[i,2],[o,1],[r,1],[r,3],[n,1]],year:n,millisecond:c}}function nv(t,e,n,r,o){const i=+t,a=+e,{tickIntervals:s,year:l,millisecond:c}=ck(o),u=([g,m])=>g.duration*m,f=r?(a-i)/r:n||5,d=r||(a-i)/f,p=s.length,h=(0,uh.b)(s,d,0,p,u);let y;if(h===p){const g=(0,ev.l)(i/l.duration,a/l.duration,f);y=[l,g]}else if(h){const g=d/u(s[h-1])<u(s[h])/d,[m,b]=g?s[h-1]:s[h],v=r?Math.ceil(r/m.duration):b;y=[m,v]}else{const g=Math.max((0,ev.l)(i,a,f),1);y=[c,g]}return y}const lk=(t,e,n,r,o)=>{const i=t>e,a=i?e:t,s=i?t:e,[l,c]=nv(a,s,n,r,o),u=l.range(a,new Date(+s+1),c,!0);return i?u.reverse():u},uk=(t,e,n,r,o)=>{const i=t>e,a=i?e:t,s=i?t:e,[l,c]=nv(a,s,n,r,o),u=[l.floor(a,c),l.ceil(s,c)];return i?u.reverse():u};function fk(t,e){const{second:n,minute:r,hour:o,day:i,week:a,month:s,year:l}=e;return n.floor(t)<t?".SSS":r.floor(t)<t?":ss":o.floor(t)<t?"hh:mm":i.floor(t)<t?"hh A":s.floor(t)<t?a.floor(t)<t?"MMM DD":"ddd DD":l.floor(t)<t?"MMMM":"YYYY"}function dk(t){const e=t.getTimezoneOffset(),n=new Date(t);return n.setMinutes(n.getMinutes()+e,n.getSeconds(),n.getMilliseconds()),n}class vf extends bf.V{getDefaultOptions(){return{domain:[new Date(2e3,0,1),new Date(2e3,0,2)],range:[0,1],nice:!1,tickCount:5,tickInterval:void 0,unknown:void 0,clamp:!1,tickMethod:lk,interpolate:fi.fv,mask:void 0,utc:!1}}chooseTransforms(){return[r=>+r,r=>new Date(r)]}chooseNice(){return uk}getTickMethodOptions(){const{domain:e,tickCount:n,tickInterval:r,utc:o}=this.options,i=e[0],a=e[e.length-1];return[i,a,n,r,o]}getFormatter(){const{mask:e,utc:n}=this.options,r=n?tv:Qb,o=n?dk:Rc.Z;return i=>Ub(o(i),e||fk(i,r))}clone(){return new vf(this.options)}}const rv=t=>new vf(t);rv.props={};const ov=t=>e=>-t(-e),Of=(t,e)=>{const n=Math.log(t),r=t===Math.E?Math.log:t===10?Math.log10:t===2?Math.log2:o=>Math.log(o)/n;return e?ov(r):r},xf=(t,e)=>{const n=t===Math.E?Math.exp:r=>mn(t,r);return e?ov(n):n},pk=(t,e,n,r=10)=>{const o=t<0,i=xf(r,o),a=Of(r,o),s=e<t,l=s?e:t,c=s?t:e;let u=a(l),f=a(c),d=[];if(!(r%1)&&f-u<n){if(u=Math.floor(u),f=Math.ceil(f),o)for(;u<=f;u+=1){const p=i(u);for(let h=r-1;h>=1;h-=1){const y=p*h;if(y>c)break;y>=l&&d.push(y)}}else for(;u<=f;u+=1){const p=i(u);for(let h=1;h<r;h+=1){const y=p*h;if(y>c)break;y>=l&&d.push(y)}}d.length*2<n&&(d=(0,q.Z)(l,c,n))}else{const p=n===-1?f-u:Math.min(f-u,n);d=(0,q.Z)(u,f,p).map(i)}return s?d.reverse():d},hk=(t,e,n,r)=>{const o=t<0,i=Of(r,o),a=xf(r,o),s=t>e,l=s?e:t,c=s?t:e,u=[a(Math.floor(i(l))),a(Math.ceil(i(c)))];return s?u.reverse():u};class _f extends bf.V{getDefaultOptions(){return{domain:[1,10],range:[0,1],base:10,interpolate:fi.wp,tickMethod:pk,tickCount:5}}chooseNice(){return hk}getTickMethodOptions(){const{domain:e,tickCount:n,base:r}=this.options,o=e[0],i=e[e.length-1];return[o,i,n,r]}chooseTransforms(){const{base:e,domain:n}=this.options,r=n[0]<0;return[Of(e,r),xf(e,r)]}clone(){return new _f(this.options)}}const iv=t=>new _f(t);iv.props={};const yk=t=>e=>e<0?-mn(-e,t):mn(e,t),gk=t=>e=>e<0?-mn(-e,1/t):mn(e,1/t),mk=t=>t<0?-Math.sqrt(-t):Math.sqrt(t);class Fc extends bf.V{getDefaultOptions(){return{domain:[0,1],range:[0,1],nice:!1,clamp:!1,round:!1,exponent:2,interpolate:fi.wp,tickMethod:q.Z,tickCount:5}}constructor(e){super(e)}chooseTransforms(){const{exponent:e}=this.options;if(e===1)return[Rc.Z,Rc.Z];const n=e===.5?mk:yk(e),r=gk(e);return[n,r]}clone(){return new Fc(this.options)}}const av=t=>new Fc(t);av.props={};class wf extends Fc{getDefaultOptions(){return{domain:[0,1],range:[0,1],nice:!1,clamp:!1,round:!1,interpolate:fi.wp,tickMethod:q.Z,tickCount:5,exponent:.5}}constructor(e){super(e)}update(e){super.update(e)}clone(){return new wf(this.options)}}const sv=t=>new wf(t);sv.props={};const cv=t=>new ni(t);cv.props={};const lv=t=>new Ws(t);lv.props={};const uv=t=>new Ys(t);uv.props={};var fv=Q(98882),bk=Q(79572);const vk=t=>e=>{const n=t(e);return(0,V.Z)(n)?Math.round(n):n};function Ok(t,e){return n=>{n.prototype.rescale=function(){this.initRange(),this.nice();const[r]=this.chooseTransforms();this.composeOutput(r,this.chooseClamp(r))},n.prototype.initRange=function(){const{interpolator:r}=this.options;this.options.range=t(r)},n.prototype.composeOutput=function(r,o){const{domain:i,interpolator:a,round:s}=this.getOptions(),l=e(i.map(r)),c=s?vk(a):a;this.output=(0,fv.q)(c,l,o,r)},n.prototype.invert=void 0}}var xk=function(t,e,n,r){var o=arguments.length,i=o<3?e:r===null?r=Object.getOwnPropertyDescriptor(e,n):r,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")i=Reflect.decorate(t,e,n,r);else for(var s=t.length-1;s>=0;s--)(a=t[s])&&(i=(o<3?a(i):o>3?a(e,n,i):a(e,n))||i);return o>3&&i&&Object.defineProperty(e,n,i),i},Sf;function _k(t){return[t(0),t(1)]}const wk=t=>{const[e,n]=t;return(0,fv.q)((0,fi.fv)(0,1),(0,bk.I)(e,n))};let jf=Sf=class extends ir.b{getDefaultOptions(){return{domain:[0,1],unknown:void 0,nice:!1,clamp:!1,round:!1,interpolator:Rc.Z,tickMethod:q.Z,tickCount:5}}constructor(e){super(e)}clone(){return new Sf(this.options)}};jf=Sf=xk([Ok(_k,wk)],jf);const dv=t=>new jf(t);dv.props={};const pv=t=>new ft(t);pv.props={};function Ef({colorDefault:t,colorBlack:e,colorWhite:n,colorStroke:r,colorBackground:o,padding1:i,padding2:a,padding3:s,alpha90:l,alpha65:c,alpha45:u,alpha25:f,alpha10:d,category10:p,category20:h,sizeDefault:y=1,padding:g="auto",margin:m=16}){return{padding:g,margin:m,size:y,color:t,category10:p,category20:h,enter:{duration:300,fill:"both",delay:0},update:{duration:300,fill:"both",delay:0},exit:{duration:300,fill:"both",delay:0},view:{viewFill:o,plotFill:"transparent",mainFill:"transparent",contentFill:"transparent"},line:{line:{fill:"",strokeOpacity:1,lineWidth:1,lineCap:"round"}},point:{point:{r:3,fillOpacity:.95,lineWidth:0},hollow:{r:3,strokeOpacity:.95,lineWidth:1},plus:{r:3,strokeOpacity:.95,lineWidth:3},diamond:{r:3,strokeOpacity:.95,lineWidth:1}},interval:{rect:{fillOpacity:.95},hollow:{fill:"",strokeOpacity:1,lineWidth:2}},area:{area:{fillOpacity:.85,lineWidth:0}},polygon:{polygon:{fillOpacity:.95}},cell:{cell:{fillOpacity:.95},hollow:{fill:"",strokeOpacity:1,lineWidth:2}},rect:{rect:{fillOpacity:.95},hollow:{fill:"",strokeOpacity:1,lineWidth:2}},link:{link:{fill:"",strokeOpacity:1}},vector:{vector:{fillOpacity:1}},box:{box:{fillOpacity:.95,stroke:e,lineWidth:1}},text:{text:{fill:"#1D2129",fontSize:12,lineWidth:0,connectorStroke:r,connectorStrokeOpacity:.45,connectorLineWidth:1,backgroundFill:r,backgroundFillOpacity:.15,backgroundPadding:[2,4],startMarkerSymbol:"circle",startMarkerSize:4,endMarkerSymbol:"circle",endMarkerSize:4},badge:{fill:"#1D2129",fillOpacity:.65,lineWidth:0,fontSize:10,textAlign:"center",textBaseline:"middle",markerFill:r,markerFillOpacity:.25,markerStrokeOpacity:0}},lineX:{line:{stroke:r,strokeOpacity:.45,lineWidth:1}},lineY:{line:{stroke:r,strokeOpacity:.45,lineWidth:1}},rangeX:{range:{fill:r,fillOpacity:.15,lineWidth:0}},rangeY:{range:{fill:r,fillOpacity:.15,lineWidth:0}},connector:{connector:{stroke:r,strokeOpacity:.45,lineWidth:1,connectLength1:12,endMarker:!0,endMarkerSize:6,endMarkerFill:r,endMarkerFillOpacity:.95}},axis:{arrow:!1,gridLineDash:[3,4],gridLineWidth:.5,gridStroke:e,gridStrokeOpacity:d,labelAlign:"horizontal",labelFill:e,labelOpacity:u,labelFontSize:12,labelFontWeight:"normal",labelSpacing:i,line:!1,lineLineWidth:.5,lineStroke:e,lineStrokeOpacity:u,tickLength:4,tickLineWidth:1,tickStroke:e,tickOpacity:u,titleFill:e,titleOpacity:l,titleFontSize:12,titleFontWeight:"normal",titleSpacing:12,titleTransformOrigin:"center",lineArrowOffset:6,lineArrowSize:6},axisTop:{gridDirection:"positive",labelDirection:"negative",tickDirection:"negative",titlePosition:"top",titleSpacing:12,labelSpacing:4,titleTextBaseline:"middle"},axisBottom:{gridDirection:"negative",labelDirection:"positive",tickDirection:"positive",titlePosition:"bottom",titleSpacing:12,labelSpacing:4,titleTextBaseline:"bottom",titleTransform:"translate(0, 8)"},axisLeft:{gridDirection:"positive",labelDirection:"negative",labelSpacing:4,tickDirection:"negative",titlePosition:"left",titleSpacing:12,titleTextBaseline:"middle",titleDirection:"vertical",titleTransform:"rotate(-90) translate(0, -8)",titleTransformOrigin:"center"},axisRight:{gridDirection:"negative",labelDirection:"positive",labelSpacing:4,tickDirection:"positive",titlePosition:"right",titleSpacing:12,titleTextBaseline:"top",titleDirection:"vertical",titleTransformOrigin:"center"},axisLinear:{girdClosed:!0,gridConnect:"arc",gridDirection:"negative",gridType:"surround",titlePosition:"top",titleSpacing:0},axisArc:{title:!1,titlePosition:"inner",line:!1,tick:!0,labelSpacing:4},axisRadar:{girdClosed:!0,gridStrokeOpacity:.3,gridType:"surround",label:!1,tick:!1,titlePosition:"start"},legendCategory:{backgroundFill:"transparent",itemBackgroundFill:"transparent",itemLabelFill:e,itemLabelFillOpacity:l,itemLabelFontSize:12,itemLabelFontWeight:"normal",itemMarkerFillOpacity:1,itemMarkerSize:8,itemSpacing:[i,i],itemValueFill:e,itemValueFillOpacity:.65,itemValueFontSize:12,itemValueFontWeight:"normal",navButtonFill:e,navButtonFillOpacity:.65,navPageNumFill:e,navPageNumFillOpacity:.45,navPageNumFontSize:12,padding:8,title:!1,titleFill:e,titleFillOpacity:.65,titleFontSize:12,titleFontWeight:"normal",titleSpacing:4,tickStroke:e,tickStrokeOpacity:.25,rowPadding:i,colPadding:a,maxRows:3,maxCols:3},legendContinuous:{handleHeight:12,handleLabelFill:e,handleLabelFillOpacity:u,handleLabelFontSize:12,handleLabelFontWeight:"normal",handleMarkerFill:e,handleMarkerFillOpacity:.6,handleMarkerLineWidth:1,handleMarkerStroke:e,handleMarkerStrokeOpacity:.25,handleWidth:10,labelFill:e,labelFillOpacity:u,labelFontSize:12,labelFontWeight:"normal",labelSpacing:3,tick:!0,tickLength:12,ribbonSize:12,ribbonFill:"#aaa",handle:!0,handleLabel:!1,handleShape:"slider",handleIconSize:12/1.8,indicator:!1,titleFontSize:12,titleSpacing:4,titleFontWeight:"normal",titleFillOpacity:l,tickStroke:e,tickStrokeOpacity:u},label:{fill:e,fillOpacity:.65,fontSize:12,fontWeight:"normal",stroke:void 0,offset:12,connectorStroke:e,connectorStrokeOpacity:.45,connectorLineWidth:1,connectorLength:12,connectorLength2:8,connectorDistance:4},innerLabel:{fill:n,fontSize:12,fillOpacity:.85,fontWeight:"normal",stroke:void 0,offset:0},htmlLabel:{fontSize:12,opacity:.65,color:e,fontWeight:"normal"},slider:{trackSize:16,trackFill:r,trackFillOpacity:1,selectionFill:t,selectionFillOpacity:.15,handleIconSize:10,handleIconFill:"#f7f7f7",handleIconFillOpacity:1,handleIconStroke:e,handleIconStrokeOpacity:.25,handleIconLineWidth:1,handleIconRadius:2,handleLabelFill:e,handleLabelFillOpacity:.45,handleLabelFontSize:12,handleLabelFontWeight:"normal"},scrollbar:{padding:[0,0,0,0],trackSize:6,isRound:!0,slidable:!0,scrollable:!0,trackFill:"#e5e5e5",trackFillOpacity:0,thumbFill:"#000",thumbFillOpacity:.15,thumbHighlightedFillOpacity:.2},title:{spacing:8,titleFill:e,titleFillOpacity:l,titleFontSize:16,titleFontWeight:"bold",titleTextBaseline:"top",subtitleFill:e,subtitleFillOpacity:c,subtitleFontSize:12,subtitleFontWeight:"normal",subtitleTextBaseline:"top"},tooltip:{css:{".g2-tooltip":{"font-family":"sans-serif"}}}}}const Sk=Ef({colorBlack:"#1D2129",colorWhite:"#ffffff",colorStroke:"#416180",colorDefault:"#1783FF",colorBackground:"transparent",category10:["#1783FF","#00C9C9","#F0884D","#D580FF","#7863FF","#60C42D","#BD8F24","#FF80CA","#2491B3","#17C76F"],category20:["#1783FF","#00C9C9","#F0884D","#D580FF","#7863FF","#60C42D","#BD8F24","#FF80CA","#2491B3","#17C76F","#AABA01","#BC7CFC","#237CBC","#2DE379","#CE8032","#FF7AF4","#545FD3","#AFE410","#D8C608","#FFA1E0"],padding1:8,padding2:12,padding3:20,alpha90:.9,alpha65:.65,alpha45:.45,alpha25:.25,alpha10:.1}),Af=t=>(0,et.Z)({},Sk,t);Af.props={};const hv=t=>(0,et.Z)({},Af(),{category10:"category10",category20:"category20"},t);hv.props={};const jk=Ef({colorBlack:"#fff",colorWhite:"#000",colorStroke:"#416180",colorDefault:"#1783FF",colorBackground:"transparent",category10:["#1783FF","#00C9C9","#F0884D","#D580FF","#7863FF","#60C42D","#BD8F24","#FF80CA","#2491B3","#17C76F"],category20:["#1783FF","#00C9C9","#F0884D","#D580FF","#7863FF","#60C42D","#BD8F24","#FF80CA","#2491B3","#17C76F","#AABA01","#BC7CFC","#237CBC","#2DE379","#CE8032","#FF7AF4","#545FD3","#AFE410","#D8C608","#FFA1E0"],padding1:8,padding2:12,padding3:20,alpha90:.9,alpha65:.65,alpha45:.45,alpha25:.25,alpha10:.25}),yv=t=>(0,et.Z)({},jk,{tooltip:{crosshairsStroke:"#fff",crosshairsLineWidth:1,crosshairsStrokeOpacity:.25,css:{".g2-tooltip":{background:"#1f1f1f",opacity:.95},".g2-tooltip-title":{color:"#A6A6A6"},".g2-tooltip-list-item-name-label":{color:"#A6A6A6"},".g2-tooltip-list-item-value":{color:"#A6A6A6"}}}},t),gv=t=>Object.assign({},yv(),{category10:"category10",category20:"category20"},t);gv.props={};const Ek=Ef({colorBlack:"#000",colorWhite:"#fff",colorStroke:"#888",colorDefault:"#4e79a7",colorBackground:"transparent",category10:["#4e79a7","#f28e2c","#e15759","#76b7b2","#59a14f","#edc949","#af7aa1","#ff9da7","#9c755f","#bab0ab"],category20:["#4e79a7","#f28e2c","#e15759","#76b7b2","#59a14f","#edc949","#af7aa1","#ff9da7","#9c755f","#bab0ab"],padding1:8,padding2:12,padding3:20,alpha90:.9,alpha65:.65,alpha45:.45,alpha25:.25,alpha10:.1}),mv=t=>(0,et.Z)({},Ek,{text:{text:{fontSize:10}},axis:{gridLineDash:[0,0],gridLineWidth:1,gridStroke:"#ddd",gridStrokeOpacity:1,labelOpacity:1,labelStrokeOpacity:1,labelFontSize:10,line:!0,lineLineWidth:1,lineStroke:"#888",lineStrokeOpacity:1,tickLength:5,tickStrokeOpacity:1,titleOpacity:1,titleStrokeOpacity:1,titleFillOpacity:1,titleFontSize:11,titleFontWeight:"bold"},axisLeft:{gridFilter:(e,n)=>n!==0},axisRight:{gridFilter:(e,n)=>n!==0},legendCategory:{itemLabelFillOpacity:1,itemLabelFontSize:10,itemValueFillOpacity:1,itemValueFontSize:10,titleFillOpacity:1,titleFontSize:11,titleFontWeight:"bold"},legendContinuous:{handleLabelFontSize:10,labelFillOpacity:.45,labelFontSize:10},label:{fontSize:10},innerLabel:{fontSize:10},htmlLabel:{fontSize:10},slider:{handleLabelFontSize:10,trackFillOpacity:.05}},t);mv.props={};const bv=t=>(...e)=>{const n=Kr(Object.assign({},{crossPadding:50},t))(...e);return Kp(n,t),n};bv.props=Object.assign(Object.assign({},Kr.props),{defaultPosition:"bottom"});function vD(){}const vv=t=>(...e)=>{const n=Kr(Object.assign({},{crossPadding:10},t))(...e);return Kp(n,t),n};vv.props=Object.assign(Object.assign({},Kr.props),{defaultPosition:"left"});var Ak=Q(76947);function Ra(t){if((0,ql.Z)(t)){var e=t;return e[e.length-1]}}var Mk=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,r=Object.getOwnPropertySymbols(t);o<r.length;o++)e.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(t,r[o])&&(n[r[o]]=t[r[o]]);return n};function kk(t,e){const n=gr(t,"shape"),r=gr(t,"color"),o=n?n.clone():null,i=[];for(const[s,l]of e){const c=s.type,f=((r==null?void 0:r.getOptions().domain.length)>0?r==null?void 0:r.getOptions().domain:l.data).map((d,p)=>{var h;return o?o.map(d||"point"):((h=s==null?void 0:s.style)===null||h===void 0?void 0:h.shape)||l.defaultShape||"point"});typeof c=="string"&&i.push([c,f])}if(i.length===0)return["point",["point"]];if(i.length===1||!n)return i[0];const{range:a}=n.getOptions();return i.map(([s,l])=>{let c=0;for(let u=0;u<i.length;u++){const f=a[u%a.length];l[u]===f&&c++}return[c/l.length,[s,l]]}).sort((s,l)=>l[0]-s[0])[0][1]}function Pk(t,e){const{scales:n,library:r,markState:o}=e,[i,a]=kk(n,o),{itemMarker:s,itemMarkerSize:l}=t,c=(d,p)=>{var h,y,g;const m=((g=(y=(h=r[`mark.${i}`])===null||h===void 0?void 0:h.props)===null||y===void 0?void 0:y.shape[d])===null||g===void 0?void 0:g.props.defaultMarker)||Ra(d.split(".")),b=typeof l=="function"?l(p):l;return()=>Il(m,{color:p.color})(0,0,b)},u=d=>`${a[d]}`;return gr(n,"shape")&&!s?(d,p)=>c(u(p),d):typeof s=="function"?(d,p)=>{const h=s(d.id,p);return typeof h=="string"?c(h,d):h}:(d,p)=>c(s||u(p),d)}function Tk(t){const e=gr(t,"opacity");if(e){const{range:n}=e.getOptions();return(r,o)=>n[o]}}function Ck(t,e){const n=gr(t,"size");return n instanceof Lc?n.map(NaN)*2:e}function Lk(t,e){const{labelFormatter:n=d=>`${d}`}=t,{scales:r,theme:o}=e,i=o.legendCategory.itemMarkerSize,a=Ck(r,i),s={itemMarker:Pk(Object.assign(Object.assign({},t),{itemMarkerSize:a}),e),itemMarkerSize:a,itemMarkerOpacity:Tk(r)},l=typeof n=="string"?qr(n):n,c=gr(r,"color"),u=B_(r),f=c?d=>c.map(d):()=>e.theme.color;return Object.assign(Object.assign({},s),{data:u.map(d=>({id:d,label:l(d),color:f(d)}))})}function Rk(t,e,n){const{position:r}=e;if(r==="center"){const{bbox:a}=t,{width:s,height:l}=a;return{width:s,height:l}}const{width:o,height:i}=Vp(t,e,n);return{width:o,height:i}}function Dk(t){return Object.assign(Object.assign({},t),{data:(t==null?void 0:t.data.filter(e=>e.id!==""))||[]})}const Mf=t=>{const{labelFormatter:e,layout:n,order:r,orientation:o,position:i,size:a,title:s,cols:l,itemMarker:c}=t,u=Mk(t,["labelFormatter","layout","order","orientation","position","size","title","cols","itemMarker"]),{gridRow:f}=u;return d=>{const{value:p,theme:h}=d,{bbox:y}=p,{width:g,height:m}=Rk(p,t,Mf),b=Gp(i,n),v=Object.assign(Object.assign(Object.assign(Object.assign({orientation:["right","left","center"].includes(i)?"vertical":"horizontal",width:g,height:m,layout:l!==void 0?"grid":"flex"},l!==void 0&&{gridCol:l}),f!==void 0&&{gridRow:f}),{titleText:Ns(s)}),Lk(t,d)),{legendCategory:O={}}=h,x=zs(Object.assign({},O,Dk(v),u)),w=new F_({style:Object.assign(Object.assign({x:y.x,y:y.y,width:y.width,height:y.height},b),{subOptions:x})});return w.appendChild(new Ak.W({className:"legend-category",style:x})),w}};Mf.props={defaultPosition:"top",defaultOrder:1,defaultSize:40,defaultCrossPadding:[12,12],defaultPadding:[12,12]};const Ov=t=>()=>new ht.ZA;Ov.props={};var Ik=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,r=Object.getOwnPropertySymbols(t);o<r.length;o++)e.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(t,r[o])&&(n[r[o]]=t[r[o]]);return n};function xv(t,e,n,r){switch(r){case"center":return{x:t+n/2,y:e,textAlign:"middle"};case"right":return{x:t+n,y:e,textAlign:"right"};default:return{x:t,y:e,textAlign:"left"}}}const Fk=I_({render(t,e){const{width:n,title:r,subtitle:o,spacing:i=2,align:a="left",x:s,y:l}=t,c=Ik(t,["width","title","subtitle","spacing","align","x","y"]);e.style.transform=`translate(${s}, ${l})`;const u=at(c,"title"),f=at(c,"subtitle"),p=Xp(e,".title","text").attr("className","title").call(jt,Object.assign(Object.assign(Object.assign({},xv(0,0,n,a)),{fontSize:14,textBaseline:"top",text:r}),u)).node().getLocalBounds();Xp(e,".sub-title","text").attr("className","sub-title").call(h=>{if(!o)return h.node().remove();h.node().attr(Object.assign(Object.assign(Object.assign({},xv(0,p.max[1]+i,n,a)),{fontSize:12,textBaseline:"top",text:o}),f))})}}),_v=t=>({value:e,theme:n})=>{const{x:r,y:o,width:i,height:a}=e.bbox;return new Fk({style:(0,et.Z)({},n.title,Object.assign({x:r,y:o,width:i,height:a},t))})};_v.props={defaultPosition:"top",defaultOrder:2,defaultSize:36,defaultCrossPadding:[20,20],defaultPadding:[12,12]};var wv=Q(99012),Nk=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,r=Object.getOwnPropertySymbols(t);o<r.length;o++)e.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(t,r[o])&&(n[r[o]]=t[r[o]]);return n};function zk(t,e,n){const{x:r,y:o,width:i,height:a}=t;if(e==="left")return[r+i-n,o];if(e==="right")return[r,o];if(e==="bottom")return[r,o];if(e==="top")return[r,o+a-n]}const Da=t=>{const{orientation:e,labelFormatter:n,size:r,style:o={},position:i}=t,a=Nk(t,["orientation","labelFormatter","size","style","position"]);return s=>{var l;const{scales:[c],value:u,theme:f,coordinate:d}=s,{bbox:p}=u,{width:h,height:y}=p,{slider:g={}}=f,m=((l=c.getFormatter)===null||l===void 0?void 0:l.call(c))||(E=>E+""),b=typeof n=="string"?qr(n):n,v=e==="horizontal",O=Me(d)&&v,{trackSize:x=g.trackSize}=o,[w,j]=zk(p,i,x);return new wv.i({className:"slider",style:Object.assign({},g,Object.assign(Object.assign({x:w,y:j,trackLength:v?h:y,orientation:e,formatter:E=>{const M=b||m,R=O?1-E:E,D=ai(c,R,!0);return M(D)},sparklineData:$k(t,s)},o),a))})}};function Bk(t,e){const[n]=Array.from(t.entries()).filter(([o])=>o.type==="line"||o.type==="area").filter(([o])=>o.slider).map(([o])=>{const{encode:i,slider:a}=o;if(a!=null&&a.x){const s=l=>{const c=i[l];return[l,c?c.value:void 0]};return Object.fromEntries(e.map(s))}});if(!(n!=null&&n.series))return n==null?void 0:n.y;const r=n.series.reduce((o,i,a)=>(o[i]=o[i]||[],o[i].push(n.y[a]),o),{});return Object.values(r)}function $k(t,e){const{markState:n}=e;return(0,Ur.Z)(t.sparklineData)?t.sparklineData:Bk(n,["y","series"])}Da.props={defaultPosition:"bottom",defaultSize:24,defaultOrder:1,defaultCrossPadding:[12,12],defaultPadding:[12,12]};const Sv=t=>Da(Object.assign(Object.assign({},t),{orientation:"horizontal"}));Sv.props=Object.assign(Object.assign({},Da.props),{defaultPosition:"bottom"});const jv=t=>Da(Object.assign(Object.assign({},t),{orientation:"vertical"}));jv.props=Object.assign(Object.assign({},Da.props),{defaultPosition:"left"});var Yk=function(t){(0,Mt.ZT)(e,t);function e(n){var r=t.call(this,n,{x:0,y:0,isRound:!0,orientation:"vertical",padding:[2,2,2,2],scrollable:!0,slidable:!0,thumbCursor:"default",trackSize:10,value:0})||this;return r.range=[0,1],r.onValueChange=function(o){var i=r.attributes.value;if(o!==i){var a={detail:{oldValue:o,value:i}};r.dispatchEvent(new ht.Aw("scroll",a)),r.dispatchEvent(new ht.Aw("valuechange",a))}},r.onTrackClick=function(o){var i=r.attributes.slidable;if(i){var a=(0,Mt.CR)(r.getLocalPosition(),2),s=a[0],l=a[1],c=(0,Mt.CR)(r.padding,4),u=c[0],f=c[3],d=r.getOrientVal([s+f,l+u]),p=r.getOrientVal((0,ih.s)(o)),h=(p-d)/r.trackLength;r.setValue(h,!0)}},r.onThumbMouseenter=function(o){r.dispatchEvent(new ht.Aw("thumbMouseenter",{detail:o.detail}))},r.onTrackMouseenter=function(o){r.dispatchEvent(new ht.Aw("trackMouseenter",{detail:o.detail}))},r.onThumbMouseleave=function(o){r.dispatchEvent(new ht.Aw("thumbMouseleave",{detail:o.detail}))},r.onTrackMouseleave=function(o){r.dispatchEvent(new ht.Aw("trackMouseleave",{detail:o.detail}))},r}return Object.defineProperty(e.prototype,"padding",{get:function(){var n=this.attributes.padding;return(0,ea.j)(n)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"value",{get:function(){var n=this.attributes.value,r=(0,Mt.CR)(this.range,2),o=r[0],i=r[1];return(0,Bs.Z)(n,o,i)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"trackLength",{get:function(){var n=this.attributes,r=n.viewportLength,o=n.trackLength,i=o===void 0?r:o;return i},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"availableSpace",{get:function(){var n=this.attributes.trackSize,r=this.trackLength,o=(0,Mt.CR)(this.padding,4),i=o[0],a=o[1],s=o[2],l=o[3],c=(0,Mt.CR)(this.getOrientVal([[r,n],[n,r]]),2),u=c[0],f=c[1];return{x:l,y:i,width:+u-(l+a),height:+f-(i+s)}},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"trackRadius",{get:function(){var n=this.attributes,r=n.isRound,o=n.trackSize;return r?o/2:0},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"thumbRadius",{get:function(){var n=this.attributes,r=n.isRound,o=n.thumbRadius;if(!r)return 0;var i=this.availableSpace,a=i.width,s=i.height;return o||this.getOrientVal([s,a])/2},enumerable:!1,configurable:!0}),e.prototype.getValues=function(n){n===void 0&&(n=this.value);var r=this.attributes,o=r.viewportLength,i=r.contentLength,a=o/i,s=(0,Mt.CR)(this.range,2),l=s[0],c=s[1],u=n*(c-l-a);return[u,u+a]},e.prototype.getValue=function(){return this.value},e.prototype.renderSlider=function(n){var r=this.attributes,o=r.x,i=r.y,a=r.orientation,s=r.trackSize,l=r.padding,c=r.slidable,u=(0,Ln.zs)(this.attributes,"track"),f=(0,Ln.zs)(this.attributes,"thumb"),d=(0,Mt.pi)((0,Mt.pi)({x:o,y:i,brushable:!1,orientation:a,padding:l,selectionRadius:this.thumbRadius,showHandle:!1,slidable:c,trackLength:this.trackLength,trackRadius:this.trackRadius,trackSize:s,values:this.getValues()},(0,Ln.dq)(u,"track")),(0,Ln.dq)(f,"selection"));this.slider=(0,na.Ys)(n).maybeAppendByClassName("scrollbar",function(){return new wv.i({style:d})}).update(d).node()},e.prototype.render=function(n,r){this.renderSlider(r)},e.prototype.setValue=function(n,r){r===void 0&&(r=!1);var o=this.attributes.value,i=(0,Mt.CR)(this.range,2),a=i[0],s=i[1];this.slider.setValues(this.getValues((0,Bs.Z)(n,a,s)),r),this.onValueChange(o)},e.prototype.bindEvents=function(){var n=this;this.slider.addEventListener("trackClick",function(r){r.stopPropagation(),n.onTrackClick(r.detail)}),this.onHover()},e.prototype.getOrientVal=function(n){var r=this.attributes.orientation;return r==="horizontal"?n[0]:n[1]},e.prototype.onHover=function(){this.slider.addEventListener("selectionMouseenter",this.onThumbMouseenter),this.slider.addEventListener("trackMouseenter",this.onTrackMouseenter),this.slider.addEventListener("selectionMouseleave",this.onThumbMouseleave),this.slider.addEventListener("trackMouseleave",this.onTrackMouseleave)},e.tag="scrollbar",e}(Vl.w),Wk=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,r=Object.getOwnPropertySymbols(t);o<r.length;o++)e.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(t,r[o])&&(n[r[o]]=t[r[o]]);return n};const Ia=t=>{const{orientation:e,labelFormatter:n,style:r}=t,o=Wk(t,["orientation","labelFormatter","style"]);return({scales:[i],value:a,theme:s})=>{const{bbox:l}=a,{x:c,y:u,width:f,height:d}=l,{scrollbar:p={}}=s,{ratio:h,range:y}=i.getOptions(),g=e==="horizontal"?f:d,m=g/h,[b,v]=y,O=v>b?0:1;return new Yk({className:"g2-scrollbar",style:Object.assign({},p,Object.assign(Object.assign(Object.assign(Object.assign({},r),{x:c,y:u,trackLength:g,value:O}),o),{orientation:e,contentLength:m,viewportLength:g}))})}};Ia.props={defaultPosition:"bottom",defaultSize:24,defaultOrder:1,defaultCrossPadding:[12,12],defaultPadding:[12,12]};const Ev=t=>Ia(Object.assign(Object.assign({},t),{orientation:"horizontal"}));Ev.props=Object.assign(Object.assign({},Ia.props),{defaultPosition:"bottom"});const Av=t=>Ia(Object.assign(Object.assign({},t),{orientation:"vertical"}));Av.props=Object.assign(Object.assign({},Ia.props),{defaultPosition:"left"});const kf=(t,e)=>{const{coordinate:r}=e;return(o,i,a)=>{const[s]=o,{transform:l="",fillOpacity:c=1,strokeOpacity:u=1,opacity:f=1}=s.style,[d,p]=Me(r)?["left bottom",`scale(1, ${1e-4})`]:["left top",`scale(${1e-4}, 1)`],h=[{transform:`${l} ${p}`.trimStart(),transformOrigin:d,fillOpacity:0,strokeOpacity:0,opacity:0},{transform:`${l} ${p}`.trimStart(),transformOrigin:d,fillOpacity:c,strokeOpacity:u,opacity:f,offset:.01},{transform:`${l} scale(1, 1)`.trimStart(),transformOrigin:d,fillOpacity:c,strokeOpacity:u,opacity:f}];return s.animate(h,Object.assign(Object.assign({},a),t))}},Zk=(t,e)=>{const{coordinate:r}=e;return(o,i,a)=>{const[s]=o,{transform:l="",fillOpacity:c=1,strokeOpacity:u=1,opacity:f=1}=s.style,[d,p]=Me(r)?["left bottom",`scale(1, ${1e-4})`]:["left top",`scale(${1e-4}, 1)`],h=[{transform:`${l} scale(1, 1)`.trimStart(),transformOrigin:d},{transform:`${l} ${p}`.trimStart(),transformOrigin:d,fillOpacity:c,strokeOpacity:u,opacity:f,offset:.99},{transform:`${l} ${p}`.trimStart(),transformOrigin:d,fillOpacity:0,strokeOpacity:0,opacity:0}];return s.animate(h,Object.assign(Object.assign({},a),t))}},Mv=(t,e)=>{const{coordinate:r}=e;return ht.ux.registerProperty({name:"scaleInYRadius",inherits:!1,initialValue:"",interpolable:!0,syntax:ht.h0.NUMBER}),(o,i,a)=>{const[s]=o,l=u=>{const{__data__:f,style:d}=u,{fillOpacity:p=1,strokeOpacity:h=1,opacity:y=1}=d,{points:g,y:m,y1:b}=f,v=wo(r,g,[m,b]),{innerRadius:O,outerRadius:x}=v,w=[{scaleInYRadius:O+1e-4,fillOpacity:0,strokeOpacity:0,opacity:0},{scaleInYRadius:O+1e-4,fillOpacity:p,strokeOpacity:h,opacity:y,offset:.01},{scaleInYRadius:x,fillOpacity:p,strokeOpacity:h,opacity:y}];return u.animate(w,Object.assign(Object.assign({},a),t))},c=u=>{const{style:f}=u,{transform:d="",fillOpacity:p=1,strokeOpacity:h=1,opacity:y=1}=f,[g,m]=Me(r)?["left top",`scale(${1e-4}, 1)`]:["left bottom",`scale(1, ${1e-4})`],b=[{transform:`${d} ${m}`.trimStart(),transformOrigin:g,fillOpacity:0,strokeOpacity:0,opacity:0},{transform:`${d} ${m}`.trimStart(),transformOrigin:g,fillOpacity:p,strokeOpacity:h,opacity:y,offset:.01},{transform:`${d} scale(1, 1)`.trimStart(),transformOrigin:g,fillOpacity:p,strokeOpacity:h,opacity:y}];return u.animate(b,Object.assign(Object.assign({},a),t))};return be(r)?l(s):c(s)}},Hk=(t,e)=>{const{coordinate:r}=e;return(o,i,a)=>{const[s]=o,{transform:l="",fillOpacity:c=1,strokeOpacity:u=1,opacity:f=1}=s.style,[d,p]=Me(r)?["left top",`scale(${1e-4}, 1)`]:["left bottom",`scale(1, ${1e-4})`],h=[{transform:`${l} scale(1, 1)`.trimStart(),transformOrigin:d},{transform:`${l} ${p}`.trimStart(),transformOrigin:d,fillOpacity:c,strokeOpacity:u,opacity:f,offset:.99},{transform:`${l} ${p}`.trimStart(),transformOrigin:d,fillOpacity:0,strokeOpacity:0,opacity:0}];return s.animate(h,Object.assign(Object.assign({},a),t))}},kv=(t,e)=>{ht.ux.registerProperty({name:"waveInArcAngle",inherits:!1,initialValue:"",interpolable:!0,syntax:ht.h0.NUMBER});const{coordinate:r}=e;return(o,i,a)=>{const[s]=o;if(!be(r))return kf(t,e)(o,i,a);const{__data__:l,style:c}=s,{radius:u=0,inset:f=0,fillOpacity:d=1,strokeOpacity:p=1,opacity:h=1}=c,{points:y,y:g,y1:m}=l,b=hu().cornerRadius(u).padAngle(f*Math.PI/180),v=wo(r,y,[g,m]),{startAngle:O,endAngle:x}=v,w=[{waveInArcAngle:O+1e-4,fillOpacity:0,strokeOpacity:0,opacity:0},{waveInArcAngle:O+1e-4,fillOpacity:d,strokeOpacity:p,opacity:h,offset:.01},{waveInArcAngle:x,fillOpacity:d,strokeOpacity:p,opacity:h}],j=s.animate(w,Object.assign(Object.assign({},a),t));return j.onframe=function(){s.style.d=b(Object.assign(Object.assign({},v),{endAngle:Number(s.style.waveInArcAngle)}))},j.onfinish=function(){s.style.d=b(Object.assign(Object.assign({},v),{endAngle:x}))},j}};kv.props={};const Pv=t=>(e,n,r)=>{const[o]=e,{fillOpacity:i=1,strokeOpacity:a=1,opacity:s=1}=o.style,l=[{fillOpacity:0,strokeOpacity:0,opacity:0},{fillOpacity:i,strokeOpacity:a,opacity:s}];return o.animate(l,Object.assign(Object.assign({},r),t))};Pv.props={};const Tv=t=>(e,n,r)=>{const[o]=e,{fillOpacity:i=1,strokeOpacity:a=1,opacity:s=1}=o.style,l=[{fillOpacity:i,strokeOpacity:a,opacity:s},{fillOpacity:0,strokeOpacity:0,opacity:0}];return o.animate(l,Object.assign(Object.assign({},r),t))};Tv.props={};const Xk=t=>(n,r,o)=>{const[i]=n,{transform:a="",fillOpacity:s=1,strokeOpacity:l=1,opacity:c=1}=i.style,u="center center",f=[{transform:`${a} scale(${1e-4})`.trimStart(),transformOrigin:u,fillOpacity:0,strokeOpacity:0,opacity:0},{transform:`${a} scale(${1e-4})`.trimStart(),transformOrigin:u,fillOpacity:s,strokeOpacity:l,opacity:c,offset:.01},{transform:`${a} scale(1)`.trimStart(),transformOrigin:u,fillOpacity:s,strokeOpacity:l,opacity:c}];return i.animate(f,Object.assign(Object.assign({},o),t))},Gk=t=>(n,r,o)=>{const[i]=n,{transform:a="",fillOpacity:s=1,strokeOpacity:l=1,opacity:c=1}=i.style,u="center center",f=[{transform:`${a} scale(1)`.trimStart(),transformOrigin:u},{transform:`${a} scale(${1e-4})`.trimStart(),transformOrigin:u,fillOpacity:s,strokeOpacity:l,opacity:c,offset:.99},{transform:`${a} scale(${1e-4})`.trimStart(),transformOrigin:u,fillOpacity:0,strokeOpacity:0,opacity:0}];return i.animate(f,Object.assign(Object.assign({},o),t))},Cv=t=>(e,n,r)=>{var o,i;const[a]=e,s=((i=(o=a).getTotalLength)===null||i===void 0?void 0:i.call(o))||0,l=[{lineDash:[0,s]},{lineDash:[s,0]}];return a.animate(l,Object.assign(Object.assign({},r),t))};Cv.props={};const Uk={opacity:1,strokeOpacity:1,fillOpacity:1,lineWidth:0,x:0,y:0,cx:0,cy:0,r:0,rx:0,ry:0,width:0,height:0},Vk={[ht.bn.CIRCLE]:["cx","cy","r"],[ht.bn.ELLIPSE]:["cx","cy","rx","ry"],[ht.bn.RECT]:["x","y","width","height"],[ht.bn.IMAGE]:["x","y","width","height"],[ht.bn.LINE]:["x1","y1","x2","y2"],[ht.bn.POLYLINE]:["points"],[ht.bn.POLYGON]:["points"]};function Si(t,e,n=!1){const r={};for(const o of e){const i=t.style[o];i?r[o]=i:n&&(r[o]=Uk[o])}return r}const Fa=["fill","stroke","fillOpacity","strokeOpacity","opacity","lineWidth"];function Pf(t){const{min:e,max:n}=t.getLocalBounds(),[r,o]=e,[i,a]=n,s=a-o,l=i-r;return[r,o,l,s]}function qk(t){const[e,n,r,o]=t;return`
    M ${e} ${n}
    L ${e+r} ${n}
    L ${e+r} ${n+o}
    L ${e} ${n+o}
    Z
  `}function Kk(t,e){const[n,r,o,i]=Pf(t),a=i/o,s=Math.ceil(Math.sqrt(e/a)),l=Math.ceil(e/s),c=[],u=i/l;let f=0,d=e;for(;d>0;){const p=Math.min(d,s),h=o/p;for(let y=0;y<p;y++){const g=n+y*h,m=r+f*u;c.push(qk([g,m,h,u]))}d-=p,f+=1}return c}function Qk(t="pack"){return typeof t=="function"?t:Kk}function Jk(t,e,n){let{transform:r}=t.style;const{transform:o}=e.style;Lv(e,t);let i=Fa;if(t.nodeName===ht.bn.GROUP){const[l,c,u,f]=Pf(t),[d,p,h,y]=Pf(e),g=l-d,m=c-p,b=u/h,v=f/y;r=`translate(${g}, ${m}) scale(${b}, ${v})`}else i=i.concat(Vk[t.nodeName]||[]);const a=[Object.assign({transform:r!=null?r:"none"},Si(t,i,!0)),Object.assign({transform:o!=null?o:"none"},Si(e,i,!0))];return e.animate(a,n)}function Lv(t,e){t.__data__=e.__data__,t.className=e.className,t.markType=e.markType,e.parentNode.replaceChild(t,e)}function t8(t,e){const{nodeName:n}=t;if(n==="path")return t;const r=new ht.y$({style:Object.assign(Object.assign({},Si(t,Fa)),{d:e})});return Lv(r,t),r}function Rv(t,e){const n=t.indexOf(e),r=t.lastIndexOf(e);return n===r}function e8(t){return!Rv(t,"m")||!Rv(t,"M")}function Dv(t){const e=(0,ht.YR)(t);if(e&&!e8(e))return e}function Iv(t){const{nodeName:e}=t;if(e==="path"){const n=(0,ue.Z)(t,"attributes");return n.markerEnd||n.markerStart}return!1}function Tf(t,e,n,r){const{nodeName:o}=e,{nodeName:i}=n,a=Dv(e),s=Dv(n),l=o===i&&o!=="path",c=a===void 0||s===void 0,u=Iv(e)||Iv(n);if(l||c||u)return Jk(e,n,r);const f=t8(t,a),d=[Object.assign({},Si(e,Fa)),Object.assign({},Si(n,Fa))];if(a!==s){d[0].d=a,d[1].d=s;const p=f.animate(d,r);return p.onfinish=()=>{Xt(f,n),f.style.d=s,f.style.transform="none"},f.style.transform="none",p}return null}function n8(t,e,n,r){t.style.visibility="hidden";const o=r(t,e.length);return e.map((i,a)=>{const s=new ht.y$({style:Object.assign({d:o[a]},Si(t,Fa))});return Tf(i,s,i,n)})}function r8(t,e,n,r){const o=r(e,t.length),{fillOpacity:i=1,strokeOpacity:a=1,opacity:s=1}=e.style,l=[{fillOpacity:0,strokeOpacity:0,opacity:0},{fillOpacity:0,strokeOpacity:0,opacity:0,offset:.99},{fillOpacity:i,strokeOpacity:a,opacity:s}],c=e.animate(l,n);return[...t.map((f,d)=>{const p=new ht.y$({style:{d:o[d],fill:e.style.fill}});return Tf(f,f,p,n)}),c]}const Fv=t=>(e,n,r)=>{const o=Qk(t.split),i=Object.assign(Object.assign({},r),t),{length:a}=e,{length:s}=n;if(a===1&&s===1||a>1&&s>1){const[l]=e,[c]=n;return Tf(l,l,c,i)}if(a===1&&s>1){const[l]=e;return n8(l,n,i,o)}if(a>1&&s===1){const[l]=n;return r8(e,l,i,o)}return null};Fv.props={};const Nv=(t,e)=>(n,r,o)=>{const[i]=n,{min:[a,s],halfExtents:l}=i.getLocalBounds(),c=l[0]*2,u=l[1]*2,f=new ht.y$({style:{d:`M${a},${s}L${a+c},${s}L${a+c},${s+u}L${a},${s+u}Z`}});return i.appendChild(f),i.style.clipPath=f,kf(t,e)([f],r,o)};Nv.props={};const zv=(t,e)=>(n,r,o)=>{const[i]=n,{min:[a,s],halfExtents:l}=i.getLocalBounds(),c=l[0]*2,u=l[1]*2,f=new ht.y$({style:{d:`M${a},${s}L${a+c},${s}L${a+c},${s+u}L${a},${s+u}Z`}});return i.appendChild(f),i.style.clipPath=f,Mv(t,e)([f],r,o)};zv.props={};var o8=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,r=Object.getOwnPropertySymbols(t);o<r.length;o++)e.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(t,r[o])&&(n[r[o]]=t[r[o]]);return n};function i8(t,{elements:e,datum:n,groupKey:r=f=>f,link:o=!1,background:i=!1,delay:a=60,scale:s,coordinate:l,emitter:c,state:u={}}){var f;const d=e(t),p=new Set(d),h=ve(d,r),y=ya(d,n),[g,m]=Xh(Object.assign({elements:d,valueof:y,link:o,coordinate:l},at(u.active,"link"))),[b,v,O]=Uh(Object.assign({document:t.ownerDocument,scale:s,coordinate:l,background:i,valueof:y},at(u.active,"background"))),x=(0,et.Z)(u,{active:Object.assign({},((f=u.active)===null||f===void 0?void 0:f.offset)&&{transform:(...z)=>{const C=u.active.offset(...z),[,I]=z;return Gh(d[I],C,l)}})}),{setState:w,removeState:j,hasState:E}=Cr(x,y);let M;const R=z=>{const{target:C,nativeEvent:I=!0}=z;if(!p.has(C))return;M&&clearTimeout(M);const Y=r(C),X=h.get(Y),W=new Set(X);for(const Z of d)W.has(Z)?E(Z,"active")||w(Z,"active"):(w(Z,"inactive"),m(Z)),Z!==C&&v(Z);b(C),g(X),I&&c.emit("element:highlight",{nativeEvent:I,data:{data:n(C),group:X.map(n)}})},D=()=>{M&&clearTimeout(M),M=setTimeout(()=>{F(),M=null},a)},F=(z=!0)=>{for(const C of d)j(C,"active","inactive"),v(C),m(C);z&&c.emit("element:unhighlight",{nativeEvent:z})},A=z=>{const{target:C}=z;i&&!O(C)||!i&&!p.has(C)||(a>0?D():F())},T=()=>{F()};t.addEventListener("pointerover",R),t.addEventListener("pointerout",A),t.addEventListener("pointerleave",T);const P=z=>{const{nativeEvent:C}=z;C||F(!1)},k=z=>{const{nativeEvent:C}=z;if(C)return;const{data:I}=z.data,Y=vu(d,I,n);Y&&R({target:Y,nativeEvent:!1})};return c.on("element:highlight",k),c.on("element:unhighlight",P),()=>{t.removeEventListener("pointerover",R),t.removeEventListener("pointerout",A),t.removeEventListener("pointerleave",T),c.off("element:highlight",k),c.off("element:unhighlight",P);for(const z of d)v(z),m(z)}}function Nc(t){var{delay:e,createGroup:n,background:r=!1,link:o=!1}=t,i=o8(t,["delay","createGroup","background","link"]);return(a,s,l)=>{const{container:c,view:u,options:f}=a,{scale:d,coordinate:p}=u,h=br(c);return i8(h,Object.assign({elements:to,datum:Ao(u),groupKey:n?n(u):void 0,coordinate:p,scale:d,state:li(f,[["active",r?{}:{lineWidth:"1",stroke:"#000"}],"inactive"]),background:r,link:o,delay:e,emitter:l},i))}}Nc.props={reapplyWhenUpdate:!0};function Bv(t){return Nc(Object.assign(Object.assign({},t),{createGroup:ec}))}Bv.props={reapplyWhenUpdate:!0};function $v(t){return Nc(Object.assign(Object.assign({},t),{createGroup:Hh}))}$v.props={reapplyWhenUpdate:!0};var a8=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,r=Object.getOwnPropertySymbols(t);o<r.length;o++)e.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(t,r[o])&&(n[r[o]]=t[r[o]]);return n};function s8(t,{elements:e,datum:n,groupKey:r=h=>h,regionGroupKey:o=h=>h,link:i=!1,single:a=!1,multipleSelectHotkey:s,coordinate:l,background:c=!1,scale:u,emitter:f,state:d={},region:p=!1}){var h;const y=e(t),g=new Set(y),m=FS({elementsof:e,root:t,coordinate:l,scale:u}),b=ve(y,r),v=ve(y,o),O=ya(y,n),[x,w]=Xh(Object.assign({link:i,elements:y,valueof:O,coordinate:l},at(d.selected,"link"))),[j,E]=Uh(Object.assign({document:t.ownerDocument,background:c,coordinate:l,scale:u,valueof:O},at(d.selected,"background"))),M=(0,et.Z)(d,{selected:Object.assign({},((h=d.selected)===null||h===void 0?void 0:h.offset)&&{transform:(...K)=>{const J=d.selected.offset(...K),[,rt]=K;return Gh(y[rt],J,l)}})}),{setState:R,removeState:D,hasState:F}=Cr(M,O);let A=!a,T=null;const P=(K=!0)=>{for(const J of y)D(J,"selected","unselected"),w(J),E(J);K&&f.emit("element:unselect",{nativeEvent:!0})},k=({event:K,element:J,nativeEvent:rt=!0,filter:nt=st=>!0,groupBy:tt=r,groupMap:yt=b})=>{const st=y.filter(nt);if(F(J,"selected"))P();else{const ot=tt(J),dt=yt.get(ot),xt=new Set(dt);for(const vt of st)xt.has(vt)?R(vt,"selected"):(R(vt,"unselected"),w(vt)),vt!==J&&E(vt);if(x(dt),j(J),!rt)return;f.emit("element:select",Object.assign(Object.assign({},K),{nativeEvent:rt,data:{data:[n(J),...dt.map(n)]}}))}},z=({event:K,element:J,nativeEvent:rt=!0,filter:nt=st=>!0,groupBy:tt=r,groupMap:yt=b})=>{const st=tt(J),ot=yt.get(st),dt=new Set(ot),xt=y.filter(nt);if(F(J,"selected")){if(!y.some(wt=>!dt.has(wt)&&F(wt,"selected")))return P();for(const wt of ot)R(wt,"unselected"),w(wt),E(wt)}else{const vt=ot.some(wt=>F(wt,"selected"));for(const wt of xt)dt.has(wt)?R(wt,"selected"):F(wt,"selected")||R(wt,"unselected");!vt&&i&&x(ot),j(J)}rt&&f.emit("element:select",Object.assign(Object.assign({},K),{nativeEvent:rt,data:{data:y.filter(vt=>F(vt,"selected")).map(n)}}))},C=K=>{const{target:J,nativeEvent:rt=!0}=K,nt=A?z:k;let tt=J;const yt=g.has(J);return!p||yt?yt?nt({event:K,element:tt,nativeEvent:rt,groupBy:r}):P():(tt=m(K),g.has(tt)?nt({event:K,element:tt,nativeEvent:rt,filter:st=>qh.includes(st.markType),groupBy:o,groupMap:v}):P())},I=Array.isArray(s)?s:[s],Y=K=>{I.includes(K.code)&&!T&&(T=K.code,A=!0)},X=K=>{K.code===T&&(T=null,A=!1)};t.addEventListener("click",C),s&&(A=!1,document.addEventListener("keydown",Y),document.addEventListener("keyup",X));const W=K=>{const{nativeEvent:J,data:rt}=K;if(J)return;const nt=A?rt.data:rt.data.slice(0,1);for(const tt of nt){const yt=vu(y,tt,n);C({target:yt,nativeEvent:!1})}},Z=()=>{P(!1)};return f.on("element:select",W),f.on("element:unselect",Z),()=>{for(const K of y)w(K);t.removeEventListener("click",C),s&&(document.removeEventListener("keydown",Y),document.removeEventListener("keyup",X)),f.off("element:select",W),f.off("element:unselect",Z)}}function zc(t){var{createGroup:e,createRegionGroup:n,background:r=!1,link:o=!1}=t,i=a8(t,["createGroup","createRegionGroup","background","link"]);return(a,s,l)=>{const{container:c,view:u,options:f}=a,{coordinate:d,scale:p}=u,h=br(c);return s8(h,Object.assign({elements:to,datum:Ao(u),groupKey:e?e(u):void 0,regionGroupKey:n?n(u):ec(u),coordinate:d,scale:p,state:li(f,[["selected",r?{}:{lineWidth:"1",stroke:"#000"}],"unselected"]),background:r,link:o,emitter:l},i))}}zc.props={reapplyWhenUpdate:!0};function Yv(t){return zc(Object.assign(Object.assign({},t),{createGroup:ec}))}Yv.props={reapplyWhenUpdate:!0};function Wv(t){return zc(Object.assign(Object.assign({},t),{createGroup:Hh}))}Wv.props={reapplyWhenUpdate:!0};var No=Q(2170);function c8(t){const{coordinate:e={}}=t,{transform:n=[]}=e,r=n.find(i=>i.type==="fisheye");if(r)return r;const o={type:"fisheye"};return n.push(o),e.transform=n,t.coordinate=e,o}function l8({wait:t=30,leading:e,trailing:n=!1}){return r=>{const{options:o,update:i,setState:a,container:s}=r,l=br(s),c=(0,No.Z)(u=>{const f=ci(l,u);if(!f){a("fisheye"),i();return}a("fisheye",d=>{const p=(0,et.Z)({},d,{interaction:{tooltip:{preserve:!0}}});for(const m of p.marks)m.animate=!1;const[h,y]=f,g=c8(p);return g.focusX=h,g.focusY=y,g.visual=!0,p}),i()},t,{leading:e,trailing:n});return l.addEventListener("pointerenter",c),l.addEventListener("pointermove",c),l.addEventListener("pointerleave",c),()=>{l.removeEventListener("pointerenter",c),l.removeEventListener("pointermove",c),l.removeEventListener("pointerleave",c)}}}var u8=function(t,e,n,r){function o(i){return i instanceof n?i:new n(function(a){a(i)})}return new(n||(n=Promise))(function(i,a){function s(u){try{c(r.next(u))}catch(f){a(f)}}function l(u){try{c(r.throw(u))}catch(f){a(f)}}function c(u){u.done?i(u.value):o(u.value).then(s,l)}c((r=r.apply(t,e||[])).next())})},f8=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,r=Object.getOwnPropertySymbols(t);o<r.length;o++)e.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(t,r[o])&&(n[r[o]]=t[r[o]]);return n};function d8(t){const{transform:e=[]}=t,n=e.find(o=>o.type==="normalizeY");if(n)return n;const r={type:"normalizeY"};return e.push(r),t.transform=e,r}function p8(t,e,n){const[r]=Array.from(t.entries()).filter(([o])=>o.type===e).map(([o])=>{const{encode:i}=o,a=s=>{const l=i[s];return[s,l?l.value:void 0]};return Object.fromEntries(n.map(a))});return r}function Zv(t){var{wait:e=20,leading:n,trailing:r=!1,labelFormatter:o=a=>`${a}`}=t,i=f8(t,["wait","leading","trailing","labelFormatter"]);return a=>{const{view:s,container:l,update:c,setState:u}=a,{markState:f,scale:d,coordinate:p}=s,h=p8(f,"line",["x","y","series"]);if(!h)return;const{y,x:g,series:m=[]}=h,b=y.map((z,C)=>C),v=ar(b.map(z=>g[z])),O=br(l),x=l.getElementsByClassName(zn),w=l.getElementsByClassName(zi),E=ve(w,z=>z.__data__.key.split("-")[0]),M=new ht.x1({style:Object.assign({x1:0,y1:0,x2:0,y2:O.getAttribute("height"),stroke:"black",lineWidth:1},at(i,"rule"))}),R=new ht.xv({style:Object.assign({x:0,y:O.getAttribute("height"),text:"",fontSize:10},at(i,"label"))});M.append(R),O.appendChild(M);const D=(z,C,I)=>{const[Y]=z.invert(I),X=C.invert(Y);return v[bS(v,X)]},F=(z,C)=>{M.setAttribute("x1",z[0]),M.setAttribute("x2",z[0]),R.setAttribute("text",o(C))};let A;const T=z=>u8(this,void 0,void 0,function*(){const{x:C}=d,I=D(p,C,z);F(z,I),u("chartIndex",X=>{const W=(0,et.Z)({},X),Z=W.marks.find(tt=>tt.type==="line"),J=he(sn(b,tt=>he(tt,yt=>+y[yt])/Yn(tt,yt=>+y[yt]),tt=>m[tt]).values()),rt=[1/J,J];(0,et.Z)(Z,{scale:{y:{domain:rt}}});const nt=d8(Z);nt.groupBy="color",nt.basis=(tt,yt)=>{const st=tt[Tr(ot=>g[+ot]).center(tt,I)];return yt[st]};for(const tt of W.marks)tt.animate=!1;return W}),A=(yield c("chartIndex")).view}),P=z=>{const{scale:C,coordinate:I}=A,{x:Y,y:X}=C,W=D(I,Y,z);F(z,W);for(const Z of x){const{seriesIndex:K,key:J}=Z.__data__,rt=K[Tr(xt=>g[+xt]).center(K,W)],nt=[0,X.map(1)],tt=[0,X.map(y[rt]/y[K[0]])],[,yt]=I.map(nt),[,st]=I.map(tt),ot=yt-st;Z.setAttribute("transform",`translate(0, ${ot})`);const dt=E.get(J)||[];for(const xt of dt)xt.setAttribute("dy",ot)}},k=(0,No.Z)(z=>{const C=ci(O,z);C&&P(C)},e,{leading:n,trailing:r});return T([0,0]),O.addEventListener("pointerenter",k),O.addEventListener("pointermove",k),O.addEventListener("pointerleave",k),()=>{M.remove(),O.removeEventListener("pointerenter",k),O.removeEventListener("pointermove",k),O.removeEventListener("pointerleave",k)}}}Zv.props={reapplyWhenUpdate:!0};function Na(t,e){let n,r=-1,o=-1;if(e===void 0)for(const i of t)++o,i!=null&&(n>i||n===void 0&&i>=i)&&(n=i,r=o);else for(let i of t)(i=e(i,++o,t))!=null&&(n>i||n===void 0&&i>=i)&&(n=i,r=o);return r}function za(t,e){let n=0,r=0;if(e===void 0)for(let o of t)o!=null&&(o=+o)>=o&&(++n,r+=o);else{let o=-1;for(let i of t)(i=e(i,++o,t))!=null&&(i=+i)>=i&&(++n,r+=i)}if(n)return r/n}var h8=Q(62229),zo=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,r=Object.getOwnPropertySymbols(t);o<r.length;o++)e.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(t,r[o])&&(n[r[o]]=t[r[o]]);return n};function Bc(t,e){return e?typeof e=="string"?document.querySelector(e):e:t.ownerDocument.defaultView.getContextService().getDomElement().parentElement}function y8(t){const e=t.getRenderBounds(),{min:[n,r],max:[o,i]}=e;return{x:n,y:r,width:o-n,height:i-r}}function g8(t,e){const n=t.getBoundingClientRect(),r=e.getBoundingClientRect();return{x:n.x-r.x,y:n.y-r.y}}function m8(t,e,n,r,o,i,a,s={},l=[10,10]){const c={".g2-tooltip":{},".g2-tooltip-title":{overflow:"hidden","white-space":"nowrap","text-overflow":"ellipsis"}},u=new h8.u({className:"tooltip",style:{x:e,y:n,container:a,data:[],bounding:i,position:r,enterable:o,title:"",offset:l,template:{prefixCls:"g2-"},style:(0,et.Z)(c,s)}});return t.appendChild(u.HTMLTooltipElement),u}function Hv({root:t,data:e,x:n,y:r,render:o,event:i,single:a,position:s="right-bottom",enterable:l=!1,css:c,mount:u,bounding:f,offset:d}){const p=Bc(t,u),h=Bc(t),y=a?h:t,g=f||y8(t),m=g8(h,p),{tooltipElement:b=m8(p,n,r,s,l,g,m,c,d)}=y,{items:v,title:O=""}=e;b.update(Object.assign({x:n,y:r,data:v,title:O,position:s,enterable:l,container:m},o!==void 0&&{content:o(i,{items:v,title:O})})),y.tooltipElement=b}function co({root:t,single:e,emitter:n,nativeEvent:r=!0,event:o=null}){r&&n.emit("tooltip:hide",{nativeEvent:r});const i=Bc(t),a=e?i:t,{tooltipElement:s}=a;s&&s.hide(o==null?void 0:o.clientX,o==null?void 0:o.clientY),qv(t),Kv(t),Qv(t)}function Cf({root:t,single:e}){const n=Bc(t),r=e?n:t;if(!r)return;const{tooltipElement:o}=r;o&&(o.destroy(),r.tooltipElement=void 0),qv(t),Kv(t),Qv(t)}function Xv(t){const{value:e}=t;return Object.assign(Object.assign({},t),{value:e===void 0?"undefined":e})}function b8(t){const{__data__:e}=t,{title:n,items:r=[]}=e,o=r.filter(Ut).map(i=>{var{color:a=Gv(t)}=i,s=zo(i,["color"]);return Object.assign(Object.assign({},s),{color:a})}).map(Xv);return Object.assign(Object.assign({},n&&{title:n}),{items:o})}function Gv(t){const e=t.getAttribute("fill"),n=t.getAttribute("stroke"),{__data__:r}=t,{color:o=e&&e!=="transparent"?e:n}=r;return o}function Uv(t,e=n=>n){const n=new Map(t.map(r=>[e(r),r]));return Array.from(n.values())}function Vv(t,e,n,r=t.map(i=>i.__data__),o={}){const i=l=>l instanceof Date?+l:l,a=Uv(r.map(l=>l.title),i).filter(Ut),s=r.flatMap((l,c)=>{const u=t[c],{items:f=[],title:d}=l,p=f.filter(Ut),h=n!==void 0?n:f.length<=1;return p.map(y=>{var{color:g=Gv(u)||o.color,name:m}=y,b=zo(y,["color","name"]);const v=it(e,l),O=h&&!(uy in b)?v||m:m||v;return Object.assign(Object.assign({},b),{color:g,name:O||d})})}).map(Xv);return Object.assign(Object.assign({},a.length>0&&{title:a.join(",")}),{items:Uv(s,l=>`(${i(l.name)}, ${i(l.value)}, ${i(l.color)})`)})}function v8(t,e,n,r){var{plotWidth:o,plotHeight:i,mainWidth:a,mainHeight:s,startX:l,startY:c,transposed:u,polar:f,insetLeft:d,insetTop:p}=r,h=zo(r,["plotWidth","plotHeight","mainWidth","mainHeight","startX","startY","transposed","polar","insetLeft","insetTop"]);const y=Object.assign({lineWidth:1,stroke:"#1b1e23",strokeOpacity:.5},h),g=(w,j,E)=>{const M=new ht.Cd({style:Object.assign({cx:w,cy:j,r:E},y)});return t.appendChild(M),M},m=(w,j,E,M)=>{const R=new ht.x1({style:Object.assign({x1:w,x2:j,y1:E,y2:M},y)});return t.appendChild(R),R},v=((w,j)=>{if(j.length===1)return j[0];const E=j.map(R=>Ne(R,w)),M=Na(E,R=>R);return j[M]})(n,e),O=()=>u?[l+v[0],l+v[0],c,c+i]:[l,l+o,v[1]+c,v[1]+c],x=()=>{const w=l+d+a/2,j=c+p+s/2,E=Ne([w,j],v);return[w,j,E]};if(f){const[w,j,E]=x(),M=t.ruleX||g(w,j,E);M.style.cx=w,M.style.cy=j,M.style.r=E,t.ruleX=M}else{const[w,j,E,M]=O(),R=t.ruleX||m(w,j,E,M);R.style.x1=w,R.style.x2=j,R.style.y1=E,R.style.y2=M,t.ruleX=R}}function O8(t,e,n){var{plotWidth:r,plotHeight:o,mainWidth:i,mainHeight:a,startX:s,startY:l,transposed:c,polar:u,insetLeft:f,insetTop:d}=n,p=zo(n,["plotWidth","plotHeight","mainWidth","mainHeight","startX","startY","transposed","polar","insetLeft","insetTop"]);const h=Object.assign({lineWidth:1,stroke:"#1b1e23",strokeOpacity:.5},p),y=e.map(M=>M[1]),g=e.map(M=>M[0]),m=za(y),b=za(g),v=()=>{if(u){const M=Math.min(i,a)/2,R=s+f+i/2,D=l+d+a/2,F=Xn($e([b,m],[R,D])),A=R+M*Math.cos(F),T=D+M*Math.sin(F);return[R,A,D,T]}return c?[s,s+r,m+l,m+l]:[b+s,b+s,l,l+o]},[O,x,w,j]=v(),E=()=>{const M=new ht.x1({style:Object.assign({x1:O,x2:x,y1:w,y2:j},h)});return t.appendChild(M),M};if(g.length>0){const M=t.ruleY||E();M.style.x1=O,M.style.x2=x,M.style.y1=w,M.style.y2=j,t.ruleY=M}}function qv(t){t.ruleY&&(t.ruleY.remove(),t.ruleY=void 0)}function Kv(t){t.ruleX&&(t.ruleX.remove(),t.ruleX=void 0)}function x8(t,{data:e,style:n,theme:r}){t.markers&&t.markers.forEach(a=>a.remove());const{type:o=""}=n,i=e.filter(a=>{const[{x:s,y:l}]=a;return Ut(s)&&Ut(l)}).map(a=>{const[{color:s,element:l},c]=a,u=s||l.style.fill||l.style.stroke||r.color,f=o==="hollow"?"transparent":u,d=o==="hollow"?u:"#fff";return new ht.Cd({className:"g2-tooltip-marker",style:Object.assign({cx:c[0],cy:c[1],fill:f,r:4,stroke:d,lineWidth:2,pointerEvents:"none"},n)})});for(const a of i)t.appendChild(a);t.markers=i}function Qv(t){t.markers&&(t.markers.forEach(e=>e.remove()),t.markers=[])}function Jv(t,e){return Array.from(t.values()).some(n=>{var r;return(r=n.interaction)===null||r===void 0?void 0:r[e]})}function Rr(t,e){return t===void 0?e:t}function t1(t){const{title:e,items:n}=t;return n.length===0&&e===void 0}function _8(t){return Array.from(t.values()).some(e=>{var n;return((n=e.interaction)===null||n===void 0?void 0:n.seriesTooltip)&&e.tooltip})}function e1(t,e){var{elements:n,sort:r,filter:o,scale:i,coordinate:a,crosshairs:s,crosshairsX:l,crosshairsY:c,render:u,groupName:f,emitter:d,wait:p=50,leading:h=!0,trailing:y=!1,startX:g=0,startY:m=0,body:b=!0,single:v=!0,position:O,enterable:x,mount:w,bounding:j,theme:E,offset:M,disableNative:R=!1,marker:D=!0,preserve:F=!1,style:A={},css:T={}}=e,P=zo(e,["elements","sort","filter","scale","coordinate","crosshairs","crosshairsX","crosshairsY","render","groupName","emitter","wait","leading","trailing","startX","startY","body","single","position","enterable","mount","bounding","theme","offset","disableNative","marker","preserve","style","css"]);const k=n(t),z=Me(a),C=be(a),I=(0,et.Z)(A,P),{innerWidth:Y,innerHeight:X,width:W,height:Z,insetLeft:K,insetTop:J}=a.getOptions(),rt=[],nt=[];for(const Et of k){const{__data__:zt}=Et,{seriesX:qt,title:Qt,items:we}=zt;qt?rt.push(Et):(Qt||we)&&nt.push(Et)}const tt=Et=>Et.markType==="interval",yt=nt.length&&nt.every(tt)&&!be(a),st=Et=>Et.__data__.x,dt=!!i.x.getBandWidth&&nt.length>0;rt.sort((Et,zt)=>{const qt=z?0:1,Qt=we=>we.getBounds().min[qt];return z?Qt(zt)-Qt(Et):Qt(Et)-Qt(zt)});const xt=Et=>{const zt=z?1:0,{min:qt,max:Qt}=Et.getLocalBounds();return ar([qt[zt],Qt[zt]])};yt?k.sort((Et,zt)=>st(Et)-st(zt)):nt.sort((Et,zt)=>{const[qt,Qt]=xt(Et),[we,Ue]=xt(zt),Ve=(qt+Qt)/2,gn=(we+Ue)/2;return z?gn-Ve:Ve-gn});const vt=new Map(rt.map(Et=>{const{__data__:zt}=Et,{seriesX:qt}=zt,Qt=qt.map((Ue,Ve)=>Ve),we=ar(Qt,Ue=>qt[+Ue]);return[Et,[we,qt]]})),{x:wt}=i,re=wt!=null&&wt.getBandWidth?wt.getBandWidth()/2:0,It=Et=>{const[zt]=a.invert(Et);return zt-re},Bt=(Et,zt,qt,Qt)=>{const{_x:we}=Et,Ue=we!==void 0?wt.map(we):It(zt),Ve=Qt.filter(Ut),[gn,er]=ar([Ve[0],Ve[Ve.length-1]]),dr=gn===er;if(!dt&&(Ue<gn||Ue>er)&&!dr)return null;const Ii=Tr($r=>Qt[+$r]).center,ys=Ii(qt,Ue);return qt[ys]},xe=yt?(Et,zt)=>{const qt=Tr(st).center,Qt=qt(zt,It(Et)),we=zt[Qt];return ve(zt,st).get(st(we))}:(Et,zt)=>{const Qt=Et[z?1:0],we=zt.filter(gn=>{const[er,dr]=xt(gn);return Qt>=er&&Qt<=dr});if(!dt||we.length>0)return we;const Ue=Tr(gn=>{const[er,dr]=xt(gn);return(er+dr)/2}).center,Ve=Ue(zt,Qt);return[zt[Ve]].filter(Ut)},ln=(Et,zt)=>{const{__data__:qt}=Et;return Object.fromEntries(Object.entries(qt).filter(([Qt])=>Qt.startsWith("series")&&Qt!=="series").map(([Qt,we])=>{const Ue=we[zt];return[(0,U.Z)(Qt.replace("series","")),Ue]}))},un=(0,No.Z)(Et=>{var zt;const qt=ci(t,Et);if(!qt)return;const Qt=Zh(t),we=Qt.min[0],Ue=Qt.min[1],Ve=[qt[0]-g,qt[1]-m];if(!Ve)return;const gn=xe(Ve,nt),er=[],dr=[];for(const Ke of rt){const[gs,vp]=vt.get(Ke),ms=Bt(Et,Ve,gs,vp);if(ms!==null){er.push(Ke);const Rl=ln(Ke,ms),{x:RR,y:DR}=Rl,IR=a.map([(RR||0)+re,DR||0]);dr.push([Object.assign(Object.assign({},Rl),{element:Ke}),IR])}}const Ii=Array.from(new Set(dr.map(Ke=>Ke[0].x))),ys=Ii[Na(Ii,Ke=>Math.abs(Ke-It(Ve)))],$r=dr.filter(Ke=>Ke[0].x===ys),mp=[...$r.map(Ke=>Ke[0]),...gn.map(Ke=>Ke.__data__)],Ll=[...er,...gn],Fi=Vv(Ll,i,f,mp,E);if(r&&Fi.items.sort((Ke,gs)=>r(Ke)-r(gs)),o&&(Fi.items=Fi.items.filter(o)),Ll.length===0||t1(Fi)){Ie(Et);return}if(b&&Hv({root:t,data:Fi,x:qt[0]+we,y:qt[1]+Ue,render:u,event:Et,single:v,position:O,enterable:x,mount:w,bounding:j,css:T,offset:M}),s||l||c){const Ke=at(I,"crosshairs"),gs=Object.assign(Object.assign({},Ke),at(I,"crosshairsX")),vp=Object.assign(Object.assign({},Ke),at(I,"crosshairsY")),ms=$r.map(Rl=>Rl[1]);l&&v8(t,ms,qt,Object.assign(Object.assign({},gs),{plotWidth:Y,plotHeight:X,mainWidth:W,mainHeight:Z,insetLeft:K,insetTop:J,startX:g,startY:m,transposed:z,polar:C})),c&&O8(t,ms,Object.assign(Object.assign({},vp),{plotWidth:Y,plotHeight:X,mainWidth:W,mainHeight:Z,insetLeft:K,insetTop:J,startX:g,startY:m,transposed:z,polar:C}))}if(D){const Ke=at(I,"marker");x8(t,{data:$r,style:Ke,theme:E})}const bp=(zt=$r[0])===null||zt===void 0?void 0:zt[0].x,LR=bp!=null?bp:It(Ve);d.emit("tooltip:show",Object.assign(Object.assign({},Et),{nativeEvent:!0,data:Object.assign(Object.assign({},Fi),{data:{x:ai(i.x,LR,!0)}})}))},p,{leading:h,trailing:y}),Ie=Et=>{co({root:t,single:v,emitter:d,event:Et})},kn=()=>{Cf({root:t,single:v})},fn=Et=>{var zt,{nativeEvent:qt,data:Qt,offsetX:we,offsetY:Ue}=Et,Ve=zo(Et,["nativeEvent","data","offsetX","offsetY"]);if(qt)return;const gn=(zt=Qt==null?void 0:Qt.data)===null||zt===void 0?void 0:zt.x,dr=i.x.map(gn),[Ii,ys]=a.map([dr,.5]),$r=t.getRenderBounds(),mp=$r.min[0],Ll=$r.min[1];un(Object.assign(Object.assign({},Ve),{offsetX:we!==void 0?we:mp+Ii,offsetY:Ue!==void 0?Ue:Ll+ys,_x:gn}))},tr=()=>{co({root:t,single:v,emitter:d,nativeEvent:!1})},tn=()=>{dn(),kn()},nn=()=>{Pn()},Pn=()=>{R||(t.addEventListener("pointerdown",un),t.addEventListener("pointerenter",un),t.addEventListener("pointermove",un),t.addEventListener("pointerleave",Et=>{ci(t,Et)||Ie(Et)}),t.addEventListener("pointerup",Ie))},dn=()=>{R||(t.removeEventListener("pointerdown",un),t.removeEventListener("pointerenter",un),t.removeEventListener("pointermove",un),t.removeEventListener("pointerleave",Ie),t.removeEventListener("pointerup",Ie))};return Pn(),d.on("tooltip:show",fn),d.on("tooltip:hide",tr),d.on("tooltip:disable",tn),d.on("tooltip:enable",nn),()=>{dn(),d.off("tooltip:show",fn),d.off("tooltip:hide",tr),d.off("tooltip:disable",tn),d.off("tooltip:enable",nn),F?co({root:t,single:v,emitter:d,nativeEvent:!1}):kn()}}function w8(t,{elements:e,coordinate:n,scale:r,render:o,groupName:i,sort:a,filter:s,emitter:l,wait:c=50,leading:u=!0,trailing:f=!1,groupKey:d=D=>D,single:p=!0,position:h,enterable:y,datum:g,view:m,mount:b,bounding:v,theme:O,offset:x,shared:w=!1,body:j=!0,disableNative:E=!1,preserve:M=!1,css:R={}}){var D,F;const A=e(t),T=ve(A,d),P=ot=>ot.markType==="interval",k=A.every(P)&&!be(n),z=r.x,C=r.series,I=(F=(D=z==null?void 0:z.getBandWidth)===null||D===void 0?void 0:D.call(z))!==null&&F!==void 0?F:0,Y=C?ot=>{const dt=Math.round(1/C.valueBandWidth);return ot.__data__.x+ot.__data__.series*I+I/(dt*2)}:ot=>ot.__data__.x+I/2;k&&A.sort((ot,dt)=>Y(ot)-Y(dt));const X=ot=>{const{target:dt}=ot;return ma(dt,xt=>xt.classList?xt.classList.includes("element"):!1)},W=k?ot=>{const dt=ci(t,ot);if(!dt)return;const[xt]=n.invert(dt),vt=Tr(Y).center,wt=vt(A,xt),re=A[wt];return!w&&A.find(Bt=>Bt!==re&&Y(Bt)===Y(re))?X(ot):re}:X,Z=(0,No.Z)(ot=>{const dt=W(ot);if(!dt){co({root:t,single:p,emitter:l,event:ot});return}const xt=d(dt),vt=T.get(xt);if(!vt)return;const wt=vt.length===1&&!w?b8(vt[0]):Vv(vt,r,i,void 0,O);if(a&&wt.items.sort((Bt,xe)=>a(Bt)-a(xe)),s&&(wt.items=wt.items.filter(s)),t1(wt)){co({root:t,single:p,emitter:l,event:ot});return}const{offsetX:re,offsetY:It}=ot;j&&Hv({root:t,data:wt,x:re,y:It,render:o,event:ot,single:p,position:h,enterable:y,mount:b,bounding:v,css:R,offset:x}),l.emit("tooltip:show",Object.assign(Object.assign({},ot),{nativeEvent:!0,data:Object.assign(Object.assign({},wt),{data:Ot(dt,m)})}))},c,{leading:u,trailing:f}),K=ot=>{co({root:t,single:p,emitter:l,event:ot})},J=()=>{E||(t.addEventListener("pointerdown",Z),t.addEventListener("pointermove",Z),t.addEventListener("pointerleave",K),t.addEventListener("pointerup",K))},rt=()=>{E||(t.removeEventListener("pointerdown",Z),t.removeEventListener("pointermove",Z),t.removeEventListener("pointerleave",K),t.removeEventListener("pointerup",K))},nt=({nativeEvent:ot,offsetX:dt,offsetY:xt,data:vt})=>{if(ot)return;const{data:wt}=vt,re=vu(A,wt,g);if(!re)return;const It=re.getBBox(),{x:Bt,y:xe,width:ln,height:un}=It,Ie=t.getBBox();Z({target:re,offsetX:dt!==void 0?dt+Ie.x:Bt+ln/2,offsetY:xt!==void 0?xt+Ie.y:xe+un/2})},tt=({nativeEvent:ot}={})=>{ot||co({root:t,single:p,emitter:l,nativeEvent:!1})},yt=()=>{rt(),Cf({root:t,single:p})},st=()=>{J()};return l.on("tooltip:show",nt),l.on("tooltip:hide",tt),l.on("tooltip:enable",st),l.on("tooltip:disable",yt),J(),()=>{rt(),l.off("tooltip:show",nt),l.off("tooltip:hide",tt),M?co({root:t,single:p,emitter:l,nativeEvent:!1}):Cf({root:t,single:p})}}function n1(t){const{shared:e,crosshairs:n,crosshairsX:r,crosshairsY:o,series:i,name:a,item:s=()=>({}),facet:l=!1}=t,c=zo(t,["shared","crosshairs","crosshairsX","crosshairsY","series","name","item","facet"]);return(u,f,d)=>{const{container:p,view:h}=u,{scale:y,markState:g,coordinate:m,theme:b}=h,v=Jv(g,"seriesTooltip"),O=Jv(g,"crosshairs"),x=br(p),w=Rr(i,v),j=Rr(n,O);if(w&&_8(g)&&!l)return e1(x,Object.assign(Object.assign({},c),{theme:b,elements:to,scale:y,coordinate:m,crosshairs:j,crosshairsX:Rr(Rr(r,n),!1),crosshairsY:Rr(o,j),item:s,emitter:d}));if(w&&l){const E=f.filter(T=>T!==u&&T.options.parentKey===u.options.key),M=Wh(u,f),R=E[0].view.scale,D=x.getBounds(),F=D.min[0],A=D.min[1];return Object.assign(R,{facet:!0}),e1(x.parentNode.parentNode,Object.assign(Object.assign({},c),{theme:b,elements:()=>M,scale:R,coordinate:m,crosshairs:Rr(n,O),crosshairsX:Rr(Rr(r,n),!1),crosshairsY:Rr(o,j),item:s,startX:F,startY:A,emitter:d}))}return w8(x,Object.assign(Object.assign({},c),{datum:Ao(h),elements:to,scale:y,coordinate:m,groupKey:e?ec(h):void 0,item:s,emitter:d,view:h,theme:b,shared:e}))}}n1.props={reapplyWhenUpdate:!0};var $c=function(t,e,n,r){function o(i){return i instanceof n?i:new n(function(a){a(i)})}return new(n||(n=Promise))(function(i,a){function s(u){try{c(r.next(u))}catch(f){a(f)}}function l(u){try{c(r.throw(u))}catch(f){a(f)}}function c(u){u.done?i(u.value):o(u.value).then(s,l)}c((r=r.apply(t,e||[])).next())})};const r1="legend-category",S8="legend-continuous",j8="items-item",E8="legend-category-item-marker",A8="legend-category-item-label";function o1(t){return t.getElementsByClassName(E8)[0]}function i1(t){return t.getElementsByClassName(A8)[0]}function a1(t){return t.getElementsByClassName(j8)}function Lf(t){return t.getElementsByClassName(r1)}function s1(t){return t.getElementsByClassName(S8)}function M8(t,e){[...Lf(t),...s1(t)].forEach(r=>{e(r,o=>o)})}function Rf(t){let e=t.parentNode;for(;e&&!e.__data__;)e=e.parentNode;return e.__data__}function OD(t){let e=t;for(;e&&!e.attr("class").startsWith("legend");)e=e.children[0];return e.attributes}function k8(t,{legends:e,marker:n,label:r,datum:o,filter:i,emitter:a,channel:s,state:l={}}){const c=new Map,u=new Map,f=new Map,{unselected:d={markerStroke:"#aaa",markerFill:"#aaa",labelFill:"#aaa"}}=l,p={unselected:at(d,"marker")},h={unselected:at(d,"label")},{setState:y,removeState:g}=Cr(p,void 0),{setState:m,removeState:b}=Cr(h,void 0),v=Array.from(e(t));let O=v.map(o);const x=()=>{for(const E of v){const M=o(E),R=n(E),D=r(E);O.includes(M)?(g(R,"unselected"),b(D,"unselected")):(y(R,"unselected"),m(D,"unselected"))}};for(const E of v){const M=()=>{eo(t,"pointer")},R=()=>{DS(t)},D=F=>$c(this,void 0,void 0,function*(){const A=o(E),T=O.indexOf(A);T===-1?O.push(A):O.splice(T,1),yield i(O),x();const{nativeEvent:P=!0}=F;P&&(O.length===v.length?a.emit("legend:reset",{nativeEvent:P}):a.emit("legend:filter",Object.assign(Object.assign({},F),{nativeEvent:P,data:{channel:s,values:O}})))});E.addEventListener("click",D),E.addEventListener("pointerenter",M),E.addEventListener("pointerout",R),c.set(E,D),u.set(E,M),f.set(E,R)}const w=E=>$c(this,void 0,void 0,function*(){const{nativeEvent:M}=E;if(M)return;const{data:R}=E,{channel:D,values:F}=R;D===s&&(O=F,yield i(O),x())}),j=E=>$c(this,void 0,void 0,function*(){const{nativeEvent:M}=E;M||(O=v.map(o),yield i(O),x())});return a.on("legend:filter",w),a.on("legend:reset",j),()=>{for(const E of v)E.removeEventListener("click",c.get(E)),E.removeEventListener("pointerenter",u.get(E)),E.removeEventListener("pointerout",f.get(E)),a.off("legend:filter",w),a.off("legend:reset",j)}}function P8(t,{legend:e,filter:n,emitter:r,channel:o}){const i=({detail:{value:a}})=>{n(a),r.emit({nativeEvent:!0,data:{channel:o,values:a}})};return e.addEventListener("valuechange",i),()=>{e.removeEventListener("valuechange",i)}}function c1(t,{legend:e,channel:n,value:r,ordinal:o,channels:i,allChannels:a,facet:s=!1}){return $c(this,void 0,void 0,function*(){const{view:l,update:c,setState:u}=t;u(e,f=>{const{marks:d}=f,p=d.map(h=>{if(h.type==="legends")return h;const{transform:y=[],data:g=[]}=h,m=y.findIndex(({type:O})=>O.startsWith("group")||O.startsWith("bin")),b=[...y];g.length&&b.splice(m+1,0,{type:"filter",[n]:{value:r,ordinal:o}});const v=Object.fromEntries(i.map(O=>[O,{domain:l.scale[O].getOptions().domain}]));return(0,et.Z)({},h,Object.assign(Object.assign({transform:b,scale:v},!o&&{animate:!1}),{legend:s?!1:Object.fromEntries(a.map(O=>[O,{preserve:!0}]))}))});return Object.assign(Object.assign({},f),{marks:p})}),yield c()})}function T8(t,e){for(const n of t)c1(n,Object.assign(Object.assign({},e),{facet:!0}))}function C8(){return(t,e,n)=>{const{container:r}=t,o=e.filter(f=>f!==t),i=o.length>0,a=f=>Rf(f).scales.map(d=>d.name),s=[...Lf(r),...s1(r)],l=s.flatMap(a),c=i?(0,No.Z)(T8,50,{trailing:!0}):(0,No.Z)(c1,50,{trailing:!0}),u=s.map(f=>{const{name:d,domain:p}=Rf(f).scales[0],h=a(f),y={legend:f,channel:d,channels:h,allChannels:l};return f.className===r1?k8(r,{legends:a1,marker:o1,label:i1,datum:g=>{const{__data__:m}=g,{index:b}=m;return p[b]},filter:g=>{const m=Object.assign(Object.assign({},y),{value:g,ordinal:!0});c(i?o:t,m)},state:f.attributes.state,channel:d,emitter:n}):P8(r,{legend:f,filter:g=>{const m=Object.assign(Object.assign({},y),{value:g,ordinal:!1});c(i?o:t,m)},emitter:n,channel:d})});return()=>{u.forEach(f=>f())}}}function L8(){return(t,e,n)=>{const{container:r,view:o,options:i}=t,a=Lf(r),s=to(r),l=p=>Rf(p).scales[0].name,c=p=>{const{scale:{[p]:h}}=o;return h},u=li(i,["active","inactive"]),f=ya(s,Ao(o)),d=[];for(const p of a){const h=Y=>{const{data:X}=p.attributes,{__data__:W}=Y,{index:Z}=W;return X[Z].label},y=l(p),g=a1(p),m=c(y),b=ve(s,Y=>m.invert(Y.__data__[y])),{state:v={}}=p.attributes,{inactive:O={}}=v,{setState:x,removeState:w}=Cr(u,f),j={inactive:at(O,"marker")},E={inactive:at(O,"label")},{setState:M,removeState:R}=Cr(j),{setState:D,removeState:F}=Cr(E),A=Y=>{for(const X of g){const W=o1(X),Z=i1(X);X===Y||Y===null?(R(W,"inactive"),F(Z,"inactive")):(M(W,"inactive"),D(Z,"inactive"))}},T=(Y,X)=>{const W=h(X),Z=new Set(b.get(W));for(const J of s)Z.has(J)?x(J,"active"):x(J,"inactive");A(X);const{nativeEvent:K=!0}=Y;K&&n.emit("legend:highlight",Object.assign(Object.assign({},Y),{nativeEvent:K,data:{channel:y,value:W}}))},P=new Map;for(const Y of g){const X=W=>{T(W,Y)};Y.addEventListener("pointerover",X),P.set(Y,X)}const k=Y=>{for(const W of s)w(W,"inactive","active");A(null);const{nativeEvent:X=!0}=Y;X&&n.emit("legend:unhighlight",{nativeEvent:X})},z=Y=>{const{nativeEvent:X,data:W}=Y;if(X)return;const{channel:Z,value:K}=W;if(Z!==y)return;const J=g.find(rt=>h(rt)===K);J&&T({nativeEvent:!1},J)},C=Y=>{const{nativeEvent:X}=Y;X||k({nativeEvent:!1})};p.addEventListener("pointerleave",k),n.on("legend:highlight",z),n.on("legend:unhighlight",C);const I=()=>{p.removeEventListener(k),n.off("legend:highlight",z),n.off("legend:unhighlight",C);for(const[Y,X]of P)Y.removeEventListener(X)};d.push(I)}return()=>d.forEach(p=>p())}}var Vn=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,r=Object.getOwnPropertySymbols(t);o<r.length;o++)e.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(t,r[o])&&(n[r[o]]=t[r[o]]);return n};function R8(t,e){const[n,r,o,i]=t,[a,s,l,c]=e;return!(a>o||l<n||s>i||c<r)}function D8(t,e,n,r,o){const[i,a,s,l]=o;return[Math.max(i,Math.min(t,n)),Math.max(a,Math.min(e,r)),Math.min(s,Math.max(t,n)),Math.min(l,Math.max(e,r))]}function I8(t){const{width:e,height:n}=t.getBBox();return[0,0,e,n]}function Dr(t,e){for(const[n,r]of Object.entries(e))t.style(n,r)}const l1=oi(t=>{const e=t.attributes,{x:n,y:r,width:o,height:i,class:a,renders:s={},handleSize:l=10,document:c}=e,u=Vn(e,["x","y","width","height","class","renders","handleSize","document"]);if(!c||o===void 0||i===void 0||n===void 0||r===void 0)return;const f=l/2,d=(K,J,rt)=>{K.handle||(K.handle=rt.createElement("rect"),K.append(K.handle));const{handle:nt}=K;return nt.attr(J),nt},p=at(qi(u,"handleNW","handleNE"),"handleN"),{render:h=d}=p,y=Vn(p,["render"]),g=at(u,"handleE"),{render:m=d}=g,b=Vn(g,["render"]),v=at(qi(u,"handleSE","handleSW"),"handleS"),{render:O=d}=v,x=Vn(v,["render"]),w=at(u,"handleW"),{render:j=d}=w,E=Vn(w,["render"]),M=at(u,"handleNW"),{render:R=d}=M,D=Vn(M,["render"]),F=at(u,"handleNE"),{render:A=d}=F,T=Vn(F,["render"]),P=at(u,"handleSE"),{render:k=d}=P,z=Vn(P,["render"]),C=at(u,"handleSW"),{render:I=d}=C,Y=Vn(C,["render"]),X=(K,J)=>{const{id:rt}=K,nt=J(K,K.attributes,c);nt.id=rt,nt.style.draggable=!0},W=K=>()=>{const J=oi(rt=>X(rt,K));return new J({})},Z=Tt(t).attr("className",a).style("transform",`translate(${n}, ${r})`).style("draggable",!0);Z.maybeAppend("selection","rect").style("draggable",!0).style("fill","transparent").call(Dr,Object.assign(Object.assign({width:o,height:i},qi(u,"handle")),{transform:void 0})),Z.maybeAppend("handle-n",W(h)).style("x",f).style("y",-f).style("width",o-l).style("height",l).style("fill","transparent").call(Dr,y),Z.maybeAppend("handle-e",W(m)).style("x",o-f).style("y",f).style("width",l).style("height",i-l).style("fill","transparent").call(Dr,b),Z.maybeAppend("handle-s",W(O)).style("x",f).style("y",i-f).style("width",o-l).style("height",l).style("fill","transparent").call(Dr,x),Z.maybeAppend("handle-w",W(j)).style("x",-f).style("y",f).style("width",l).style("height",i-l).style("fill","transparent").call(Dr,E),Z.maybeAppend("handle-nw",W(R)).style("x",-f).style("y",-f).style("width",l).style("height",l).style("fill","transparent").call(Dr,D),Z.maybeAppend("handle-ne",W(A)).style("x",o-f).style("y",-f).style("width",l).style("height",l).style("fill","transparent").call(Dr,T),Z.maybeAppend("handle-se",W(k)).style("x",o-f).style("y",i-f).style("width",l).style("height",l).style("fill","transparent").call(Dr,z),Z.maybeAppend("handle-sw",W(I)).style("x",-f).style("y",i-f).style("width",l).style("height",l).style("fill","transparent").call(Dr,Y)});function Df(t,e){var{brushed:n=()=>{},brushended:r=()=>{},brushcreated:o=()=>{},brushstarted:i=()=>{},brushupdated:a=()=>{},extent:s=I8(t),brushRegion:l=(nt,tt,yt,st,ot)=>[nt,tt,yt,st],reverse:c=!1,fill:u="#777",fillOpacity:f="0.3",stroke:d="#fff",selectedHandles:p=["handle-n","handle-e","handle-s","handle-w","handle-nw","handle-ne","handle-se","handle-sw"]}=e,h=Vn(e,["brushed","brushended","brushcreated","brushstarted","brushupdated","extent","brushRegion","reverse","fill","fillOpacity","stroke","selectedHandles"]);let y=null,g=null,m=null,b=null,v=null,O=!1;const[x,w,j,E]=s;eo(t,"crosshair"),t.style.draggable=!0;const M=(nt,tt,yt)=>{if(i(yt),b&&b.remove(),v&&v.remove(),y=[nt,tt],c)return R();D()},R=()=>{v=new ht.y$({style:Object.assign(Object.assign({},h),{fill:u,fillOpacity:f,stroke:d,pointerEvents:"none"})}),b=new l1({style:{x:0,y:0,width:0,height:0,draggable:!0,document:t.ownerDocument},className:"mask"}),t.appendChild(v),t.appendChild(b)},D=()=>{b=new l1({style:Object.assign(Object.assign({document:t.ownerDocument,x:0,y:0},h),{fill:u,fillOpacity:f,stroke:d,draggable:!0}),className:"mask"}),t.appendChild(b)},F=(nt=!0)=>{b&&b.remove(),v&&v.remove(),y=null,g=null,m=null,O=!1,b=null,v=null,r(nt)},A=(nt,tt,yt=!0)=>{const[st,ot,dt,xt]=D8(nt[0],nt[1],tt[0],tt[1],s),[vt,wt,re,It]=l(st,ot,dt,xt,s);return c?P(vt,wt,re,It):T(vt,wt,re,It),n(vt,wt,re,It,yt),[vt,wt,re,It]},T=(nt,tt,yt,st)=>{b.style.x=nt,b.style.y=tt,b.style.width=yt-nt,b.style.height=st-tt},P=(nt,tt,yt,st)=>{v.style.d=`
      M${x},${w}L${j},${w}L${j},${E}L${x},${E}Z
      M${nt},${tt}L${nt},${st}L${yt},${st}L${yt},${tt}Z
    `,b.style.x=nt,b.style.y=tt,b.style.width=yt-nt,b.style.height=st-tt},k=nt=>{const tt=(wt,re,It,Bt,xe)=>wt+re<Bt?Bt-re:wt+It>xe?xe-It:wt,yt=nt[0]-m[0],st=nt[1]-m[1],ot=tt(yt,y[0],g[0],x,j),dt=tt(st,y[1],g[1],w,E),xt=[y[0]+ot,y[1]+dt],vt=[g[0]+ot,g[1]+dt];A(xt,vt)},z={"handle-n":{vector:[0,1,0,0],cursor:"ns-resize"},"handle-e":{vector:[0,0,1,0],cursor:"ew-resize"},"handle-s":{vector:[0,0,0,1],cursor:"ns-resize"},"handle-w":{vector:[1,0,0,0],cursor:"ew-resize"},"handle-nw":{vector:[1,1,0,0],cursor:"nwse-resize"},"handle-ne":{vector:[0,1,1,0],cursor:"nesw-resize"},"handle-se":{vector:[0,0,1,1],cursor:"nwse-resize"},"handle-sw":{vector:[1,0,0,1],cursor:"nesw-resize"}},C=nt=>Y(nt)||I(nt),I=nt=>{const{id:tt}=nt;return p.indexOf(tt)===-1?!1:new Set(Object.keys(z)).has(tt)},Y=nt=>nt===b.getElementById("selection"),X=nt=>{const{target:tt}=nt,[yt,st]=bu(t,nt);if(!b||!C(tt)){M(yt,st,nt),O=!0;return}C(tt)&&(m=[yt,st])},W=nt=>{const{target:tt}=nt,yt=bu(t,nt);if(!y)return;if(!m)return A(y,yt);if(Y(tt))return k(yt);const[st,ot]=[yt[0]-m[0],yt[1]-m[1]],{id:dt}=tt;if(z[dt]){const[xt,vt,wt,re]=z[dt].vector;return A([y[0]+st*xt,y[1]+ot*vt],[g[0]+st*wt,g[1]+ot*re])}},Z=nt=>{if(m){m=null;const{x:dt,y:xt,width:vt,height:wt}=b.style;y=[dt,xt],g=[dt+vt,xt+wt],a(dt,xt,dt+vt,xt+wt,nt);return}g=bu(t,nt);const[tt,yt,st,ot]=A(y,g);O=!1,o(tt,yt,st,ot,nt)},K=nt=>{const{target:tt}=nt;b&&!C(tt)&&F()},J=nt=>{const{target:tt}=nt;!b||!C(tt)||O?eo(t,"crosshair"):Y(tt)?eo(t,"move"):I(tt)&&eo(t,z[tt.id].cursor)},rt=()=>{eo(t,"default")};return t.addEventListener("dragstart",X),t.addEventListener("drag",W),t.addEventListener("dragend",Z),t.addEventListener("click",K),t.addEventListener("pointermove",J),t.addEventListener("pointerleave",rt),{mask:b,move(nt,tt,yt,st,ot=!0){b||M(nt,tt,{}),y=[nt,tt],g=[yt,st],A([nt,tt],[yt,st],ot)},remove(nt=!0){b&&F(nt)},destroy(){b&&F(!1),eo(t,"default"),t.removeEventListener("dragstart",X),t.removeEventListener("drag",W),t.removeEventListener("dragend",Z),t.removeEventListener("click",K),t.removeEventListener("pointermove",J),t.removeEventListener("pointerleave",rt)}}}function If(t,e,n){return e.filter(r=>{if(r===t)return!1;const{interaction:o={}}=r.options;return Object.values(o).find(i=>i.brushKey===n)})}function F8(t,e,n){return If(t,e,n).map(r=>br(r.container))}function N8(t,e,n){return If(t,e,n).map(r=>r.options)}function u1(t,e){var{elements:n,selectedHandles:r,siblings:o=W=>[],datum:i,brushRegion:a,extent:s,reverse:l,scale:c,coordinate:u,series:f=!1,key:d=W=>W,bboxOf:p=W=>{const{x:Z,y:K,width:J,height:rt}=W.style;return{x:Z,y:K,width:J,height:rt}},state:h={},emitter:y}=e,g=Vn(e,["elements","selectedHandles","siblings","datum","brushRegion","extent","reverse","scale","coordinate","series","key","bboxOf","state","emitter"]);const m=n(t),b=o(t),v=b.flatMap(n),O=ya(m,i),x=at(g,"mask"),{setState:w,removeState:j}=Cr(h,O),E=new Map,{width:M,height:R,x:D=0,y:F=0}=p(t),A=s||[0,0,M,R],T=()=>{for(const W of[...m,...v])j(W,"active","inactive")},P=(W,Z,K,J)=>{var rt;for(const tt of b)(rt=tt.brush)===null||rt===void 0||rt.remove();const nt=new Set;for(const tt of m){const{min:yt,max:st}=tt.getLocalBounds(),[ot,dt]=yt,[xt,vt]=st;R8([ot,dt,xt,vt],[W,Z,K,J])?(w(tt,"active"),nt.add(d(tt))):w(tt,"inactive")}for(const tt of v)nt.has(d(tt))?w(tt,"active"):w(tt,"inactive")},k=()=>{for(const W of m)j(W,"inactive");for(const W of E.values())W.remove();E.clear()},z=(W,Z,K,J)=>{const rt=tt=>{const yt=tt.cloneNode();return yt.__data__=tt.__data__,tt.parentNode.appendChild(yt),E.set(tt,yt),yt},nt=new ht.UL({style:{x:W+D,y:Z+F,width:K-W,height:J-Z}});t.appendChild(nt);for(const tt of m){const yt=E.get(tt)||rt(tt);yt.style.clipPath=nt,w(tt,"inactive"),w(yt,"active")}},C=Df(t,Object.assign(Object.assign({},x),{extent:A,brushRegion:a,reverse:l,selectedHandles:r,brushended:W=>{const Z=f?k:T;W&&y.emit("brush:remove",{nativeEvent:!0}),Z()},brushed:(W,Z,K,J,rt)=>{const nt=Vs(W,Z,K,J,c,u);rt&&y.emit("brush:highlight",{nativeEvent:!0,data:{selection:nt}}),(f?z:P)(W,Z,K,J)},brushcreated:(W,Z,K,J,rt)=>{const nt=Vs(W,Z,K,J,c,u);y.emit("brush:end",Object.assign(Object.assign({},rt),{nativeEvent:!0,data:{selection:nt}}))},brushupdated:(W,Z,K,J,rt)=>{const nt=Vs(W,Z,K,J,c,u);y.emit("brush:end",Object.assign(Object.assign({},rt),{nativeEvent:!0,data:{selection:nt}}))},brushstarted:W=>{y.emit("brush:start",W)}})),I=({nativeEvent:W,data:Z})=>{if(W)return;const{selection:K}=Z,[J,rt,nt,tt]=xS(K,c,u);C.move(J,rt,nt,tt,!1)};y.on("brush:highlight",I);const Y=({nativeEvent:W}={})=>{W||C.remove(!1)};y.on("brush:remove",Y);const X=C.destroy.bind(C);return C.destroy=()=>{y.off("brush:highlight",I),y.off("brush:remove",Y),X()},C}function Ff(t){var{facet:e,brushKey:n}=t,r=Vn(t,["facet","brushKey"]);return(o,i,a)=>{const{container:s,view:l,options:c}=o,u=br(s),f={maskFill:"#777",maskFillOpacity:"0.3",maskStroke:"#fff",reverse:!1},d=["active",["inactive",{opacity:.5}]],{scale:p,coordinate:h}=l;if(e){const g=u.getBounds(),m=g.min[0],b=g.min[1],v=g.max[0],O=g.max[1];return u1(u.parentNode.parentNode,Object.assign(Object.assign({elements:()=>Wh(o,i),datum:Ao(mu(o,i).map(x=>x.view)),brushRegion:(x,w,j,E)=>[x,w,j,E],extent:[m,b,v,O],state:li(mu(o,i).map(x=>x.options),d),emitter:a,scale:p,coordinate:h,selectedHandles:void 0},f),r))}const y=u1(u,Object.assign(Object.assign({elements:to,key:g=>g.__data__.key,siblings:()=>F8(o,i,n),datum:Ao([l,...If(o,i,n).map(g=>g.view)]),brushRegion:(g,m,b,v)=>[g,m,b,v],extent:void 0,state:li([c,...N8(o,i,n)],d),emitter:a,scale:p,coordinate:h,selectedHandles:void 0},f),r));return u.brush=y,()=>y.destroy()}}function Nf(t,e,n,r,o){const[,i,,a]=o;return[t,i,n,a]}function z8(t){return Ff(Object.assign(Object.assign({},t),{brushRegion:Nf,selectedHandles:["handle-e","handle-w"]}))}function zf(t,e,n,r,o){const[i,,a]=o;return[i,e,a,r]}function B8(t){return Ff(Object.assign(Object.assign({},t),{brushRegion:zf,selectedHandles:["handle-n","handle-s"]}))}var Bf=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,r=Object.getOwnPropertySymbols(t);o<r.length;o++)e.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(t,r[o])&&(n[r[o]]=t[r[o]]);return n};const $8="axis",Y8="axis-line",W8="axis-main-group",f1="axis-hot-area";function Z8(t){return t.getElementsByClassName($8)}function d1(t){return t.getElementsByClassName(Y8)[0]}function H8(t){return t.getElementsByClassName(W8)[0]}function p1(t){return H8(t).getLocalBounds()}function X8(t,e){var{cross:n,offsetX:r,offsetY:o}=e,i=Bf(e,["cross","offsetX","offsetY"]);const a=p1(t),s=d1(t),[l]=s.getLocalBounds().min,[c,u]=a.min,[f,d]=a.max,p=(f-c)*2;return{brushRegion:zf,hotZone:new ht.UL({className:f1,style:Object.assign({width:n?p/2:p,transform:`translate(${(n?c:l-p/2).toFixed(2)}, ${u})`,height:d-u},i)}),extent:n?(h,y,g,m)=>[-1/0,y,1/0,m]:(h,y,g,m)=>[Math.floor(c-r),y,Math.ceil(f-r),m]}}function G8(t,e){var{offsetY:n,offsetX:r,cross:o=!1}=e,i=Bf(e,["offsetY","offsetX","cross"]);const a=p1(t),s=d1(t),[,l]=s.getLocalBounds().min,[c,u]=a.min,[f,d]=a.max,p=d-u;return{brushRegion:Nf,hotZone:new ht.UL({className:f1,style:Object.assign({width:f-c,height:o?p:p*2,transform:`translate(${c}, ${o?u:l-p})`},i)}),extent:o?(h,y,g,m)=>[h,-1/0,g,1/0]:(h,y,g,m)=>[h,Math.floor(u-n),g,Math.ceil(d-n)]}}function U8(t,e){var{axes:n,elements:r,points:o,horizontal:i,datum:a,offsetY:s,offsetX:l,reverse:c=!1,state:u={},emitter:f,coordinate:d}=e,p=Bf(e,["axes","elements","points","horizontal","datum","offsetY","offsetX","reverse","state","emitter","coordinate"]);const h=r(t),y=n(t),g=ya(h,a),{setState:m,removeState:b}=Cr(u,g),v=new Map,O=at(p,"mask"),x=I=>Array.from(v.values()).every(([Y,X,W,Z])=>I.some(([K,J])=>K>=Y&&K<=W&&J>=X&&J<=Z)),w=y.map(I=>I.attributes.scale),j=I=>I.length>2?[I[0],I[I.length-1]]:I,E=new Map,M=()=>{E.clear();for(let I=0;I<y.length;I++){const Y=w[I],{domain:X}=Y.getOptions();E.set(I,j(X))}};M();const R=(I,Y)=>{const X=[];for(const Z of h){const K=o(Z);x(K)?(m(Z,"active"),X.push(Z)):m(Z,"inactive")}if(E.set(I,F(X,I)),!Y)return;const W=()=>{if(!A)return Array.from(E.values());const Z=[];for(const[K,J]of E){const rt=w[K],{name:nt}=rt.getOptions();nt==="x"?Z[0]=J:Z[1]=J}return Z};f.emit("brushAxis:highlight",{nativeEvent:!0,data:{selection:W()}})},D=I=>{for(const Y of h)b(Y,"active","inactive");M(),I&&f.emit("brushAxis:remove",{nativeEvent:!0})},F=(I,Y)=>{const X=w[Y],{name:W}=X.getOptions(),Z=I.map(K=>{const J=K.__data__;return X.invert(J[W])});return j(Jr(X,Z))},A=y.some(i)&&y.some(I=>!i(I)),T=[];for(let I=0;I<y.length;I++){const Y=y[I],X=i(Y)?G8:X8,{hotZone:W,brushRegion:Z,extent:K}=X(Y,{offsetY:s,offsetX:l,cross:A,zIndex:999,fill:"transparent"});Y.parentNode.appendChild(W);const J=Df(W,Object.assign(Object.assign({},O),{reverse:c,brushRegion:Z,brushended(rt){v.delete(Y),Array.from(v.entries()).length===0?D(rt):R(I,rt)},brushed(rt,nt,tt,yt,st){v.set(Y,K(rt,nt,tt,yt)),R(I,st)}}));T.push(J)}const P=(I={})=>{const{nativeEvent:Y}=I;Y||T.forEach(X=>X.remove(!1))},k=(I,Y,X)=>{const[W,Z]=I,K=nt=>nt.getStep?nt.getStep():0,J=z(W,Y,X),rt=z(Z,Y,X)+K(Y);return i(X)?[J,-1/0,rt,1/0]:[-1/0,J,1/0,rt]},z=(I,Y,X)=>{const{height:W,width:Z}=d.getOptions(),K=Y.clone();return i(X)?K.update({range:[0,Z]}):K.update({range:[W,0]}),K.map(I)},C=I=>{const{nativeEvent:Y}=I;if(Y)return;const{selection:X}=I.data;for(let W=0;W<T.length;W++){const Z=X[W],K=T[W],J=y[W];if(Z){const rt=w[W];K.move(...k(Z,rt,J),!1)}else K.remove(!1)}};return f.on("brushAxis:remove",P),f.on("brushAxis:highlight",C),()=>{T.forEach(I=>I.destroy()),f.off("brushAxis:remove",P),f.off("brushAxis:highlight",C)}}function V8(t){return(e,n,r)=>{const{container:o,view:i,options:a}=e,s=br(o),{x:l,y:c}=s.getBBox(),{coordinate:u}=i;return U8(o,Object.assign({elements:to,axes:Z8,offsetY:c,offsetX:l,points:f=>f.__data__.points,horizontal:f=>{const{startPos:[d,p],endPos:[h,y]}=f.attributes;return d!==h&&p===y},datum:Ao(i),state:li(a,["active",["inactive",{opacity:.5}]]),coordinate:u,emitter:r},t))}}var q8=function(t,e,n,r){function o(i){return i instanceof n?i:new n(function(a){a(i)})}return new(n||(n=Promise))(function(i,a){function s(u){try{c(r.next(u))}catch(f){a(f)}}function l(u){try{c(r.throw(u))}catch(f){a(f)}}function c(u){u.done?i(u.value):o(u.value).then(s,l)}c((r=r.apply(t,e||[])).next())})},h1=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,r=Object.getOwnPropertySymbols(t);o<r.length;o++)e.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(t,r[o])&&(n[r[o]]=t[r[o]]);return n};function K8(t=300){let e=null;return n=>{const{timeStamp:r}=n;return e!==null&&r-e<t?(e=r,!0):(e=r,!1)}}function Q8(t,e){var{filter:n,reset:r,brushRegion:o,extent:i,reverse:a,emitter:s,scale:l,coordinate:c,selection:u,series:f=!1}=e,d=h1(e,["filter","reset","brushRegion","extent","reverse","emitter","scale","coordinate","selection","series"]);const p=at(d,"mask"),{width:h,height:y}=t.getBBox(),g=i||[0,0,h,y],m=K8(),b=Df(t,Object.assign(Object.assign({},p),{extent:g,brushRegion:o,reverse:a,brushcreated:v}));t.addEventListener("click",O);function v(w,j,E,M,R){R.nativeEvent=!0,n(u(w,j,E,M),R),b.remove()}function O(w){m(w)&&(w.nativeEvent=!0,r(w))}const x=({nativeEvent:w,data:j})=>{if(w)return;const{selection:E}=j;n(E,{nativeEvent:!1})};return s.on("brush:filter",x),()=>{b.destroy(),s.off("brush:filter",x),t.removeEventListener("click",O)}}function $f(t){var{hideX:e=!0,hideY:n=!0}=t,r=h1(t,["hideX","hideY"]);return(o,i,a)=>{const{container:s,view:l,options:c,update:u,setState:f}=o,d=br(s),p={maskFill:"#777",maskFillOpacity:"0.3",maskStroke:"#fff",unhighlightedOpacity:.5,reverse:!1};let h=!1,y=!1,g=l;const{scale:m,coordinate:b}=l;return Q8(d,Object.assign(Object.assign({brushRegion:(v,O,x,w)=>[v,O,x,w],selection:(v,O,x,w)=>{const{scale:j,coordinate:E}=g;return Vs(v,O,x,w,j,E)},filter:(v,O)=>q8(this,void 0,void 0,function*(){if(y)return;y=!0;const[x,w]=v;f("brushFilter",E=>{const{marks:M}=E,R=M.map(D=>(0,et.Z)({axis:Object.assign(Object.assign({},e&&{x:{transform:[{type:"hide"}]}}),n&&{y:{transform:[{type:"hide"}]}})},D,{scale:{x:{domain:x,nice:!1},y:{domain:w,nice:!1}}}));return Object.assign(Object.assign({},c),{marks:R,clip:!0})}),a.emit("brush:filter",Object.assign(Object.assign({},O),{data:{selection:[x,w]}})),g=(yield u()).view,y=!1,h=!0}),reset:v=>{if(y||!h)return;const{scale:O}=l,{x,y:w}=O,j=x.getOptions().domain,E=w.getOptions().domain;a.emit("brush:filter",Object.assign(Object.assign({},v),{data:{selection:[j,E]}})),h=!1,g=l,f("brushFilter"),u()},extent:void 0,emitter:a,scale:m,coordinate:b},p),r))}}function J8(t){return $f(Object.assign(Object.assign({hideX:!0},t),{brushRegion:Nf}))}function t6(t){return $f(Object.assign(Object.assign({hideY:!0},t),{brushRegion:zf}))}var e6=function(t,e,n,r){function o(i){return i instanceof n?i:new n(function(a){a(i)})}return new(n||(n=Promise))(function(i,a){function s(u){try{c(r.next(u))}catch(f){a(f)}}function l(u){try{c(r.throw(u))}catch(f){a(f)}}function c(u){u.done?i(u.value):o(u.value).then(s,l)}c((r=r.apply(t,e||[])).next())})};const n6="slider";function r6(t,e,n,r=!1,o="x",i="y"){const{marks:a}=t,s=a.map(l=>{var c,u;return(0,et.Z)({axis:{x:{transform:[{type:"hide"}]},y:{transform:[{type:"hide"}]}}},l,{scale:e,[n]:Object.assign(Object.assign({},((c=l[n])===null||c===void 0?void 0:c[o])&&{[o]:Object.assign({preserve:!0},r&&{ratio:null})}),((u=l[n])===null||u===void 0?void 0:u[i])&&{[i]:{preserve:!0}}),animate:!1})});return Object.assign(Object.assign({},t),{marks:s,clip:!0,animate:!1})}function o6(t,e,n){const[r,o]=t,i=n?l=>1-l:l=>l,a=ai(e,i(r),!0),s=ai(e,i(o),!1);return Jr(e,[a,s])}function Yc(t){return[t[0],t[t.length-1]]}function y1({initDomain:t={},className:e=n6,prefix:n="slider",setValue:r=(c,u)=>c.setValues(u),hasState:o=!1,wait:i=50,leading:a=!0,trailing:s=!1,getInitValues:l=c=>{var u;const f=(u=c==null?void 0:c.attributes)===null||u===void 0?void 0:u.values;if(f[0]!==0||f[1]!==1)return f}}){return(c,u,f)=>{const{container:d,view:p,update:h,setState:y}=c,g=d.getElementsByClassName(e);if(!g.length)return()=>{};let m=!1;const{scale:b,coordinate:v,layout:O}=p,{paddingLeft:x,paddingTop:w,paddingBottom:j,paddingRight:E}=O,{x:M,y:R}=b,D=Me(v),F=k=>{const z=k==="vertical"?"y":"x",C=k==="vertical"?"x":"y";return D?[C,z]:[z,C]},A=new Map,T=new Set,P={x:t.x||M.getOptions().domain,y:t.y||R.getOptions().domain};for(const k of g){const{orientation:z}=k.attributes,[C,I]=F(z),Y=`${n}${(0,Vr.Z)(C)}:filter`,X=C==="x",{ratio:W}=M.getOptions(),{ratio:Z}=R.getOptions(),K=tt=>{if(tt.data){const{selection:xt}=tt.data,[vt=Yc(P.x),wt=Yc(P.y)]=xt;return X?[Jr(M,vt,W),Jr(R,wt,Z)]:[Jr(R,wt,Z),Jr(M,vt,W)]}const{value:yt}=tt.detail,st=b[C],ot=o6(yt,st,D&&z==="horizontal"),dt=P[I];return[ot,dt]},J=(0,No.Z)(tt=>e6(this,void 0,void 0,function*(){const{initValue:yt=!1}=tt;if(m&&!yt)return;m=!0;const{nativeEvent:st=!0}=tt,[ot,dt]=K(tt);if(P[C]=ot,P[I]=dt,st){const xt=X?ot:dt,vt=X?dt:ot;f.emit(Y,Object.assign(Object.assign({},tt),{nativeEvent:st,data:{selection:[Yc(xt),Yc(vt)]}}))}y(k,xt=>Object.assign(Object.assign({},r6(xt,{[C]:{domain:ot,nice:!1}},n,o,C,I)),{paddingLeft:x,paddingTop:w,paddingBottom:j,paddingRight:E})),yield h(),m=!1}),i,{leading:a,trailing:s}),rt=tt=>{const{nativeEvent:yt}=tt;if(yt)return;const{data:st}=tt,{selection:ot}=st,[dt,xt]=ot;k.dispatchEvent(new ht.Aw("valuechange",{data:st,nativeEvent:!1}));const vt=X?qs(dt,M):qs(xt,R);r(k,vt)};f.on(Y,rt),k.addEventListener("valuechange",J),A.set(k,J),T.add([Y,rt]);const nt=l(k);nt&&k.dispatchEvent(new ht.Aw("valuechange",{detail:{value:nt},nativeEvent:!1,initValue:!0}))}return()=>{for(const[k,z]of A)k.removeEventListener("valuechange",z);for(const[k,z]of T)f.off(k,z)}}}const g1="g2-scrollbar";function i6(t={}){return(e,n,r)=>{const{view:o,container:i}=e;if(!i.getElementsByClassName(g1).length)return()=>{};const{scale:s}=o,{x:l,y:c}=s,u={x:[...l.getOptions().domain],y:[...c.getOptions().domain]};return l.update({domain:l.getOptions().expectedDomain}),c.update({domain:c.getOptions().expectedDomain}),y1(Object.assign(Object.assign({},t),{initDomain:u,className:g1,prefix:"scrollbar",hasState:!0,setValue:(d,p)=>d.setValue(p[0]),getInitValues:d=>{const p=d.slider.attributes.values;if(p[0]!==0)return p}}))(e,n,r)}}var a6=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,r=Object.getOwnPropertySymbols(t);o<r.length;o++)e.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(t,r[o])&&(n[r[o]]=t[r[o]]);return n};function s6(t,e,n){return`<${t} style="${Object.entries(n).map(([r,o])=>`${Vw(r)}:${o}`).join(";")}">${e}</${t}>`}const c6={backgroundColor:"rgba(0,0,0,0.75)",color:"#fff",width:"max-content",padding:"1px 4px",fontSize:"12px",borderRadius:"2.5px",boxShadow:"0 3px 6px -4px rgba(0,0,0,0.12), 0 6px 16px 0 rgba(0,0,0,0.08), 0 9px 28px 8px rgba(0,0,0,0.05)"};function m1(t){return t.nodeName!=="text"?!1:!!t.isOverflowing()}function b1(t){var{offsetX:e=8,offsetY:n=8}=t,r=a6(t,["offsetX","offsetY"]);return o=>{const{container:i}=o,[a,s]=i.getBounds().min,l=at(r,"tip"),c=new Set,u=d=>{const{target:p}=d;if(!m1(p)){d.stopPropagation();return}const{offsetX:h,offsetY:y}=d,g=h+e-a,m=y+n-s;if(p.tip){p.tip.style.x=g,p.tip.style.y=m;return}const{text:b}=p.style,v=new ht.k9({className:"poptip",style:{innerHTML:s6("div",b,Object.assign(Object.assign({},c6),l)),x:g,y:m}});i.appendChild(v),p.tip=v,c.add(v)},f=d=>{const{target:p}=d;if(!m1(p)){d.stopPropagation();return}p.tip&&(p.tip.remove(),p.tip=null,c.delete(p.tip))};return i.addEventListener("pointerover",u),i.addEventListener("pointerout",f),()=>{i.removeEventListener("pointerover",u),i.removeEventListener("pointerout",f),c.forEach(d=>d.remove())}}}b1.props={reapplyWhenUpdate:!0};function l6(t,e){var n=Hu(e),r=n.length;if((0,$l.Z)(t))return!r;for(var o=0;o<r;o+=1){var i=n[o];if(e[i]!==t[i]||!(i in t))return!1}return!0}var u6=l6;function f6(t,e){if(!(0,Ur.Z)(t))return null;var n;if((0,$s.Z)(e)&&(n=e),(0,$.Z)(e)&&(n=function(o){return u6(o,e)}),n){for(var r=0;r<t.length;r+=1)if(n(t[r]))return t[r]}return null}var ji=f6;function Wc(t){return t==null?null:v1(t)}function v1(t){if(typeof t!="function")throw new Error;return t}var d6={depth:-1},O1={},Yf={};function p6(t){return t.id}function h6(t){return t.parentId}function Wf(){var t=p6,e=h6,n;function r(o){var i=Array.from(o),a=t,s=e,l,c,u,f,d,p,h,y,g=new Map;if(n!=null){var m=i.map(function(E,M){return y6(n(E,M,o))}),b=m.map(x1),v=new Set(m).add(""),O=$u(b),x;try{for(O.s();!(x=O.n()).done;){var w=x.value;v.has(w)||(v.add(w),m.push(w),b.push(x1(w)),i.push(Yf))}}catch(E){O.e(E)}finally{O.f()}a=function(M,R){return m[R]},s=function(M,R){return b[R]}}for(u=0,l=i.length;u<l;++u)c=i[u],p=i[u]=new vi(c),(h=a(c,u,o))!=null&&(h+="")&&(y=p.id=h,g.set(y,g.has(y)?O1:p)),(h=s(c,u,o))!=null&&(h+="")&&(p.parent=h);for(u=0;u<l;++u)if(p=i[u],h=p.parent){if(d=g.get(h),!d)throw new Error("missing: "+h);if(d===O1)throw new Error("ambiguous: "+h);d.children?d.children.push(p):d.children=[p],p.parent=d}else{if(f)throw new Error("multiple roots");f=p}if(!f)throw new Error("no root");if(n!=null){for(;f.data===Yf&&f.children.length===1;)f=f.children[0],--l;for(var j=i.length-1;j>=0&&(p=i[j],p.data===Yf);--j)p.data=null}if(f.parent=d6,f.eachBefore(function(E){E.depth=E.parent.depth+1,--l}).eachBefore(zy),f.parent=null,l>0)throw new Error("cycle");return f}return r.id=function(o){return arguments.length?(t=Wc(o),r):t},r.parentId=function(o){return arguments.length?(e=Wc(o),r):e},r.path=function(o){return arguments.length?(n=Wc(o),r):n},r}function y6(t){t="".concat(t);var e=t.length;return Zf(t,e-1)&&!Zf(t,e-2)&&(t=t.slice(0,-1)),t[0]==="/"?t:"/".concat(t)}function x1(t){var e=t.length;if(e<2)return"";for(;--e>1&&!Zf(t,e););return t.slice(0,e)}function Zf(t,e){if(t[e]==="/"){for(var n=0;e>0&&t[--e]==="\\";)++n;if(!(n&1))return!0}return!1}function g6(t,e,n,r,o){var i=t.children,a,s=i.length,l,c=new Array(s+1);for(c[0]=l=a=0;a<s;++a)c[a+1]=l+=i[a].value;u(0,s,t.value,e,n,r,o);function u(f,d,p,h,y,g,m){if(f>=d-1){var b=i[f];b.x0=h,b.y0=y,b.x1=g,b.y1=m;return}for(var v=c[f],O=p/2+v,x=f+1,w=d-1;x<w;){var j=x+w>>>1;c[j]<O?x=j+1:w=j}O-c[x-1]<c[x]-O&&f+1<x&&--x;var E=c[x]-v,M=p-E;if(g-h>m-y){var R=p?(h*M+g*E)/p:g;u(f,x,E,h,y,R,m),u(x,d,M,R,y,g,m)}else{var D=p?(y*M+m*E)/p:m;u(f,x,E,h,y,g,D),u(x,d,M,h,D,g,m)}}}function Zc(t,e,n,r,o){for(var i=t.children,a,s=-1,l=i.length,c=t.value&&(o-n)/t.value;++s<l;)a=i[s],a.x0=e,a.x1=r,a.y0=n,a.y1=n+=a.value*c}function m6(t,e,n,r,o){(t.depth&1?Zc:_a)(t,e,n,r,o)}var _1=(1+Math.sqrt(5))/2;function w1(t,e,n,r,o,i){for(var a=[],s=e.children,l,c,u=0,f=0,d=s.length,p,h,y=e.value,g,m,b,v,O,x,w;u<d;){p=o-n,h=i-r;do g=s[f++].value;while(!g&&f<d);for(m=b=g,x=Math.max(h/p,p/h)/(y*t),w=g*g*x,O=Math.max(b/w,w/m);f<d;++f){if(g+=c=s[f].value,c<m&&(m=c),c>b&&(b=c),w=g*g*x,v=Math.max(b/w,w/m),v>O){g-=c;break}O=v}a.push(l={value:g,dice:p<h,children:s.slice(u,f)}),l.dice?_a(l,n,r,o,y?r+=h*g/y:i):Zc(l,n,r,y?n+=p*g/y:o,i),y-=g,u=f}return a}var S1=function t(e){function n(r,o,i,a,s){w1(e,r,o,i,a,s)}return n.ratio=function(r){return t((r=+r)>1?r:1)},n}(_1),b6=function t(e){function n(r,o,i,a,s){if((l=r._squarify)&&l.ratio===e)for(var l,c,u,f,d=-1,p,h=l.length,y=r.value;++d<h;){for(c=l[d],u=c.children,f=c.value=0,p=u.length;f<p;++f)c.value+=u[f].value;c.dice?_a(c,o,i,a,y?i+=(s-i)*c.value/y:s):Zc(c,o,i,y?o+=(a-o)*c.value/y:a,s),y-=c.value}else r._squarify=l=w1(e,r,o,i,a,s),l.ratio=e}return n.ratio=function(r){return t((r=+r)>1?r:1)},n}(_1);function Bo(){return 0}function Ei(t){return function(){return t}}function v6(){var t=S1,e=!1,n=1,r=1,o=[0],i=Bo,a=Bo,s=Bo,l=Bo,c=Bo;function u(d){return d.x0=d.y0=0,d.x1=n,d.y1=r,d.eachBefore(f),o=[0],e&&d.eachBefore(Iy),d}function f(d){var p=o[d.depth],h=d.x0+p,y=d.y0+p,g=d.x1-p,m=d.y1-p;g<h&&(h=g=(h+g)/2),m<y&&(y=m=(y+m)/2),d.x0=h,d.y0=y,d.x1=g,d.y1=m,d.children&&(p=o[d.depth+1]=i(d)/2,h+=c(d)-p,y+=a(d)-p,g-=s(d)-p,m-=l(d)-p,g<h&&(h=g=(h+g)/2),m<y&&(y=m=(y+m)/2),t(d,h,y,g,m))}return u.round=function(d){return arguments.length?(e=!!d,u):e},u.size=function(d){return arguments.length?(n=+d[0],r=+d[1],u):[n,r]},u.tile=function(d){return arguments.length?(t=v1(d),u):t},u.padding=function(d){return arguments.length?u.paddingInner(d).paddingOuter(d):u.paddingInner()},u.paddingInner=function(d){return arguments.length?(i=typeof d=="function"?d:Ei(+d),u):i},u.paddingOuter=function(d){return arguments.length?u.paddingTop(d).paddingRight(d).paddingBottom(d).paddingLeft(d):u.paddingTop()},u.paddingTop=function(d){return arguments.length?(a=typeof d=="function"?d:Ei(+d),u):a},u.paddingRight=function(d){return arguments.length?(s=typeof d=="function"?d:Ei(+d),u):s},u.paddingBottom=function(d){return arguments.length?(l=typeof d=="function"?d:Ei(+d),u):l},u.paddingLeft=function(d){return arguments.length?(c=typeof d=="function"?d:Ei(+d),u):c},u}function O6(t,e){return Array.isArray(t)?typeof e=="function"?Wf().path(e)(t):Wf()(t):bi(t)}function j1(t,e=[t.data.name]){t.id=t.id||t.data.name,t.path=e,t.children&&t.children.forEach(n=>{n.id=`${t.id}/${n.data.name}`,n.path=[...e,n.data.name],j1(n,n.path)})}function E1(t){const e=(0,ue.Z)(t,["data","name"]);e.replaceAll&&(t.path=e.replaceAll(".","/").split("/")),t.children&&t.children.forEach(n=>{E1(n)})}function x6(t,e){const n={treemapBinary:g6,treemapDice:_a,treemapSlice:Zc,treemapSliceDice:m6,treemapSquarify:S1,treemapResquarify:b6},r=t==="treemapSquarify"?n[t].ratio(e):n[t];if(!r)throw new TypeError("Invalid tile method!");return r}function A1(t,e,n){const{value:r}=n,o=x6(e.tile,e.ratio),i=O6(t,e.path);(0,Ur.Z)(t)?E1(i):j1(i),r?i.sum(l=>e.ignoreParentValue&&l.children?0:Sr(r)(l)).sort(e.sort):i.count(),v6().tile(o).size(e.size).round(e.round).paddingInner(e.paddingInner).paddingOuter(e.paddingOuter).paddingTop(e.paddingTop).paddingRight(e.paddingRight).paddingBottom(e.paddingBottom).paddingLeft(e.paddingLeft)(i);const a=i.descendants().map(l=>Object.assign(l,{id:l.id.replace(/^\//,""),x:[l.x0,l.x1],y:[l.y0,l.y1]}));return[a.filter(typeof e.layer=="function"?e.layer:l=>l.height===e.layer),a]}var _6=function(t,e,n,r){function o(i){return i instanceof n?i:new n(function(a){a(i)})}return new(n||(n=Promise))(function(i,a){function s(u){try{c(r.next(u))}catch(f){a(f)}}function l(u){try{c(r.throw(u))}catch(f){a(f)}}function c(u){u.done?i(u.value):o(u.value).then(s,l)}c((r=r.apply(t,e||[])).next())})},w6=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,r=Object.getOwnPropertySymbols(t);o<r.length;o++)e.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(t,r[o])&&(n[r[o]]=t[r[o]]);return n};function S6(t){return Tt(t).select(`.${Bn}`).node()}const j6={breadCrumbFill:"rgba(0, 0, 0, 0.85)",breadCrumbFontSize:12,breadCrumbY:12,activeFill:"rgba(0, 0, 0, 0.5)"};function E6(t={}){const{originData:e=[],layout:n}=t,r=w6(t,["originData","layout"]),o=(0,et.Z)({},j6,r),i=at(o,"breadCrumb"),a=at(o,"active");return s=>{const{update:l,setState:c,container:u,options:f}=s,d=S6(u),p=f.marks[0],{state:h}=p,y=new ht.ZA;d.appendChild(y);const g=(O,x)=>_6(this,void 0,void 0,function*(){if(y.removeChildren(),x){let w="",j=i.y,E=0;const M=[],R=d.getBBox().width,D=O.map((F,A)=>{w=`${w}${F}/`,M.push(F);const T=new ht.xv({name:w.replace(/\/$/,""),style:Object.assign(Object.assign({text:F,x:E,path:[...M],depth:A},i),{y:j})});y.appendChild(T),E+=T.getBBox().width;const P=new ht.xv({style:Object.assign(Object.assign({x:E,text:" / "},i),{y:j})});return y.appendChild(P),E+=P.getBBox().width,E>R&&(j=y.getBBox().height+i.y,E=0,T.attr({x:E,y:j}),E+=T.getBBox().width,P.attr({x:E,y:j}),E+=P.getBBox().width),A===oa(O)-1&&P.remove(),T});D.forEach((F,A)=>{if(A===oa(D)-1)return;const T=Object.assign({},F.attributes);F.attr("cursor","pointer"),F.addEventListener("mouseenter",()=>{F.attr(a)}),F.addEventListener("mouseleave",()=>{F.attr(T)}),F.addEventListener("click",()=>{g((0,ue.Z)(F,["style","path"]),(0,ue.Z)(F,["style","depth"]))})})}M8(u,c),c("treemapDrillDown",w=>{const{marks:j}=w,E=O.join("/"),M=j.map(R=>{if(R.type!=="rect")return R;let D=e;if(x){const A=e.filter(C=>{const I=(0,ue.Z)(C,["id"]);return I&&(I.match(`${E}/`)||E.match(I))}).map(C=>({value:C.height===0?(0,ue.Z)(C,["value"]):void 0,name:(0,ue.Z)(C,["id"])})),{paddingLeft:T,paddingBottom:P,paddingRight:k}=n,z=Object.assign(Object.assign({},n),{paddingTop:(n.paddingTop||y.getBBox().height+10)/(x+1),paddingLeft:T/(x+1),paddingBottom:P/(x+1),paddingRight:k/(x+1),path:C=>C.name,layer:C=>C.depth===x+1});D=A1(A,z,{value:"value"})[0]}else D=e.filter(A=>A.depth===1);const F=[];return D.forEach(({path:A})=>{F.push(Ra(A))}),(0,et.Z)({},R,{data:D,scale:{color:{domain:F}}})});return Object.assign(Object.assign({},w),{marks:M})}),yield l(void 0,["legendFilter"])}),m=O=>{const x=O.target;if((0,ue.Z)(x,["markType"])!=="rect")return;const w=(0,ue.Z)(x,["__data__","key"]),j=ji(e,E=>E.id===w);(0,ue.Z)(j,"height")&&g((0,ue.Z)(j,"path"),(0,ue.Z)(j,"depth"))};d.addEventListener("click",m);const b=Hu(Object.assign(Object.assign({},h.active),h.inactive)),v=()=>{Vh(d).forEach(x=>{const w=(0,ue.Z)(x,["style","cursor"]),j=ji(e,E=>E.id===(0,ue.Z)(x,["__data__","key"]));if(w!=="pointer"&&(j!=null&&j.height)){x.style.cursor="pointer";const E=(0,Bu.Z)(x.attributes,b);x.addEventListener("mouseenter",()=>{x.attr(h.active)}),x.addEventListener("mouseleave",()=>{x.attr((0,et.Z)(E,h.inactive))})}})};return v(),d.addEventListener("mousemove",v),()=>{y.remove(),d.removeEventListener("click",m),d.removeEventListener("mousemove",v)}}}var Hf=function(t,e,n,r){function o(i){return i instanceof n?i:new n(function(a){a(i)})}return new(n||(n=Promise))(function(i,a){function s(u){try{c(r.next(u))}catch(f){a(f)}}function l(u){try{c(r.throw(u))}catch(f){a(f)}}function c(u){u.done?i(u.value):o(u.value).then(s,l)}c((r=r.apply(t,e||[])).next())})},A6=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,r=Object.getOwnPropertySymbols(t);o<r.length;o++)e.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(t,r[o])&&(n[r[o]]=t[r[o]]);return n};const M6={pointR:6,pointStrokeWidth:1,pointStroke:"#888",pointActiveStroke:"#f5f5f5",pathStroke:"#888",pathLineDash:[3,4],labelFontSize:12,labelFill:"#888",labelStroke:"#fff",labelLineWidth:1,labelY:-6,labelX:2},Xf="movePoint",M1=t=>{const e=t.target,{markType:n}=e;n==="line"&&(e.attr("_lineWidth",e.attr("lineWidth")||1),e.attr("lineWidth",e.attr("_lineWidth")+3)),n==="interval"&&(e.attr("_opacity",e.attr("opacity")||1),e.attr("opacity",.7*e.attr("_opacity")))},k1=t=>{const e=t.target,{markType:n}=e;n==="line"&&e.attr("lineWidth",e.attr("_lineWidth")),n==="interval"&&e.attr("opacity",e.attr("_opacity"))},k6=(t,e,n)=>e.map(r=>["x","color"].reduce((i,a)=>{const s=n[a];return s&&r[s]!==t[s]?!1:i},!0)?Object.assign(Object.assign({},r),t):r),P6=t=>{const e=(0,ue.Z)(t,["__data__","y"]),r=(0,ue.Z)(t,["__data__","y1"])-e,{__data__:{data:o,encode:i,transform:a},childNodes:s}=t.parentNode,l=ji(a,({type:f})=>f==="normalizeY"),c=(0,ue.Z)(i,["y","field"]),u=o[s.indexOf(t)][c];return(f,d=!1)=>l||d?f/(1-f)/(r/(1-r))*u:f},T6=(t,e)=>{const n=(0,ue.Z)(t,["__data__","seriesItems",e,"0","value"]),r=(0,ue.Z)(t,["__data__","seriesIndex",e]),{__data__:{data:o,encode:i,transform:a}}=t.parentNode,s=ji(a,({type:u})=>u==="normalizeY"),l=(0,ue.Z)(i,["y","field"]),c=o[r][l];return u=>s?n===1?u:u/(1-u)/(n/(1-n))*c:u},P1=(t,e,n)=>{t.forEach((r,o)=>{r.attr("stroke",e[1]===o?n.activeStroke:n.stroke)})},T1=(t,e,n,r)=>{const o=new ht.y$({style:n}),i=new ht.xv({style:r});return e.appendChild(i),t.appendChild(o),[o,i]},C1=(t,e)=>{if(!(0,ue.Z)(t,["options","range","indexOf"]))return;const r=t.options.range.indexOf(e);return t.sortedDomain[r]},Gf=(t,e,n)=>{const r=rc(t,e),i=rc(t,n)/r,a=t[0]+(e[0]-t[0])*i,s=t[1]+(e[1]-t[1])*i;return[a,s]};function C6(t={}){const{selection:e=[],precision:n=2}=t,r=A6(t,["selection","precision"]),o=Object.assign(Object.assign({},M6),r||{}),i=at(o,"path"),a=at(o,"label"),s=at(o,"point");return(l,c,u)=>{const{update:f,setState:d,container:p,view:h,options:{marks:y,coordinate:g}}=l,m=br(p);let b=Vh(m),v,O=e;const{transform:x=[],type:w}=g,j=!!ji(x,({type:C})=>C==="transpose"),E=w==="polar",M=w==="theta",R=!!ji(b,({markType:C})=>C==="area");R&&(b=b.filter(({markType:C})=>C==="area"));const D=new ht.ZA({style:{zIndex:2}});m.appendChild(D);const F=()=>{u.emit("element-point:select",{nativeEvent:!0,data:{selection:O}})},A=(C,I)=>{u.emit("element-point:moved",{nativeEvent:!0,data:{changeData:C,data:I}})},T=C=>{const I=C.target;O=[I.parentNode.childNodes.indexOf(I)],F(),k(I)},P=C=>{const{data:{selection:I},nativeEvent:Y}=C;if(Y)return;O=I;const X=(0,ue.Z)(b,[O==null?void 0:O[0]]);X&&k(X)},k=C=>{const{attributes:I,markType:Y,__data__:X}=C,{stroke:W}=I,{points:Z,seriesTitle:K,color:J,title:rt,seriesX:nt,y1:tt}=X;if(j&&Y!=="interval")return;const{scale:yt,coordinate:st}=(v==null?void 0:v.view)||h,{color:ot,y:dt,x:xt}=yt,vt=st.getCenter();D.removeChildren();let wt;const re=(It,Bt,xe,ln)=>Hf(this,void 0,void 0,function*(){return d("elementPointMove",un=>{var Ie;const kn=(((Ie=v==null?void 0:v.options)===null||Ie===void 0?void 0:Ie.marks)||y).map(fn=>{if(!ln.includes(fn.type))return fn;const{data:tr,encode:tn}=fn,Pn=Object.keys(tn).reduce((Et,zt)=>{const qt=tn[zt];return zt==="x"&&(Et[qt]=It),zt==="y"&&(Et[qt]=Bt),zt==="color"&&(Et[qt]=xe),Et},{}),dn=k6(Pn,tr,tn);return A(Pn,dn),(0,et.Z)({},fn,{data:dn,animate:!1})});return Object.assign(Object.assign({},un),{marks:kn})}),yield f("elementPointMove")});if(["line","area"].includes(Y))Z.forEach((It,Bt)=>{const xe=xt.invert(nt[Bt]);if(!xe)return;const ln=new ht.Cd({name:Xf,style:Object.assign({cx:It[0],cy:It[1],fill:W},s)}),un=T6(C,Bt);ln.addEventListener("mousedown",Ie=>{const kn=st.output([nt[Bt],0]),fn=K==null?void 0:K.length;p.attr("cursor","move"),O[1]!==Bt&&(O[1]=Bt,F()),P1(D.childNodes,O,s);const[tr,tn]=T1(D,ln,i,a),nn=dn=>{const Et=It[1]+dn.clientY-wt[1];if(R)if(E){const zt=It[0]+dn.clientX-wt[0],[qt,Qt]=Gf(vt,kn,[zt,Et]),[,we]=st.output([1,dt.output(0)]),[,Ue]=st.invert([qt,we-(Z[Bt+fn][1]-Qt)]),Ve=(Bt+1)%fn,gn=(Bt-1+fn)%fn,er=ga([Z[gn],[qt,Qt],K[Ve]&&Z[Ve]]);tn.attr("text",un(dt.invert(Ue)).toFixed(n)),tr.attr("d",er),ln.attr("cx",qt),ln.attr("cy",Qt)}else{const[,zt]=st.output([1,dt.output(0)]),[,qt]=st.invert([It[0],zt-(Z[Bt+fn][1]-Et)]),Qt=ga([Z[Bt-1],[It[0],Et],K[Bt+1]&&Z[Bt+1]]);tn.attr("text",un(dt.invert(qt)).toFixed(n)),tr.attr("d",Qt),ln.attr("cy",Et)}else{const[,zt]=st.invert([It[0],Et]),qt=ga([Z[Bt-1],[It[0],Et],Z[Bt+1]]);tn.attr("text",dt.invert(zt).toFixed(n)),tr.attr("d",qt),ln.attr("cy",Et)}};wt=[Ie.clientX,Ie.clientY],window.addEventListener("mousemove",nn);const Pn=()=>Hf(this,void 0,void 0,function*(){if(p.attr("cursor","default"),window.removeEventListener("mousemove",nn),p.removeEventListener("mouseup",Pn),(0,Ul.Z)(tn.attr("text")))return;const dn=Number(tn.attr("text")),Et=C1(ot,J);v=yield re(xe,dn,Et,["line","area"]),tn.remove(),tr.remove(),k(C)});p.addEventListener("mouseup",Pn)}),D.appendChild(ln)}),P1(D.childNodes,O,s);else if(Y==="interval"){let It=[(Z[0][0]+Z[1][0])/2,Z[0][1]];j?It=[Z[0][0],(Z[0][1]+Z[1][1])/2]:M&&(It=Z[0]);const Bt=P6(C),xe=new ht.Cd({name:Xf,style:Object.assign(Object.assign({cx:It[0],cy:It[1],fill:W},s),{stroke:s.activeStroke})});xe.addEventListener("mousedown",ln=>{p.attr("cursor","move");const un=C1(ot,J),[Ie,kn]=T1(D,xe,i,a),fn=tn=>{if(j){const nn=It[0]+tn.clientX-wt[0],[Pn]=st.output([dt.output(0),dt.output(0)]),[,dn]=st.invert([Pn+(nn-Z[2][0]),It[1]]),Et=ga([[nn,Z[0][1]],[nn,Z[1][1]],Z[2],Z[3]],!0);kn.attr("text",Bt(dt.invert(dn)).toFixed(n)),Ie.attr("d",Et),xe.attr("cx",nn)}else if(M){const nn=It[1]+tn.clientY-wt[1],Pn=It[0]+tn.clientX-wt[0],[dn,Et]=Gf(vt,[Pn,nn],It),[zt,qt]=Gf(vt,[Pn,nn],Z[1]),Qt=st.invert([dn,Et])[1],we=tt-Qt;if(we<0)return;const Ue=IS(vt,[[dn,Et],[zt,qt],Z[2],Z[3]],we>.5?1:0);kn.attr("text",Bt(we,!0).toFixed(n)),Ie.attr("d",Ue),xe.attr("cx",dn),xe.attr("cy",Et)}else{const nn=It[1]+tn.clientY-wt[1],[,Pn]=st.output([1,dt.output(0)]),[,dn]=st.invert([It[0],Pn-(Z[2][1]-nn)]),Et=ga([[Z[0][0],nn],[Z[1][0],nn],Z[2],Z[3]],!0);kn.attr("text",Bt(dt.invert(dn)).toFixed(n)),Ie.attr("d",Et),xe.attr("cy",nn)}};wt=[ln.clientX,ln.clientY],window.addEventListener("mousemove",fn);const tr=()=>Hf(this,void 0,void 0,function*(){if(p.attr("cursor","default"),p.removeEventListener("mouseup",tr),window.removeEventListener("mousemove",fn),(0,Ul.Z)(kn.attr("text")))return;const tn=Number(kn.attr("text"));v=yield re(rt,tn,un,[Y]),kn.remove(),Ie.remove(),k(C)});p.addEventListener("mouseup",tr)}),D.appendChild(xe)}};b.forEach((C,I)=>{O[0]===I&&k(C),C.addEventListener("click",T),C.addEventListener("mouseenter",M1),C.addEventListener("mouseleave",k1)});const z=C=>{const I=C==null?void 0:C.target;(!I||I.name!==Xf&&!b.includes(I))&&(O=[],F(),D.removeChildren())};return u.on("element-point:select",P),u.on("element-point:unselect",z),p.addEventListener("mousedown",z),()=>{D.remove(),u.off("element-point:select",P),u.off("element-point:unselect",z),p.removeEventListener("mousedown",z),b.forEach(C=>{C.removeEventListener("click",T),C.removeEventListener("mouseenter",M1),C.removeEventListener("mouseleave",k1)})}}}var L6=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,r=Object.getOwnPropertySymbols(t);o<r.length;o++)e.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(t,r[o])&&(n[r[o]]=t[r[o]]);return n};const L1=()=>t=>{const{children:e}=t;if(!Array.isArray(e))return[];const{x:n=0,y:r=0,width:o,height:i,data:a}=t;return e.map(s=>{var{data:l,x:c,y:u,width:f,height:d}=s,p=L6(s,["data","x","y","width","height"]);return Object.assign(Object.assign({},p),{data:tu(l,a),x:c!=null?c:n,y:u!=null?u:r,width:f!=null?f:o,height:d!=null?d:i})})};L1.props={};var R6=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,r=Object.getOwnPropertySymbols(t);o<r.length;o++)e.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(t,r[o])&&(n[r[o]]=t[r[o]]);return n};const R1=()=>t=>{const{children:e}=t;if(!Array.isArray(e))return[];const{direction:n="row",ratio:r=e.map(()=>1),padding:o=0,data:i}=t,[a,s,l,c]=n==="col"?["y","height","width","x"]:["x","width","height","y"],u=r.reduce((y,g)=>y+g),f=t[s]-o*(e.length-1),d=r.map(y=>f*(y/u)),p=[];let h=t[a]||0;for(let y=0;y<d.length;y+=1){const g=e[y],{data:m}=g,b=R6(g,["data"]),v=tu(m,i);p.push(Object.assign({[a]:h,[s]:d[y],[c]:t[c]||0,[l]:t[l],data:v},b)),h+=d[y]+o}return p};R1.props={};class Ba{constructor(e){this.$value=e}static of(e){return new Ba(e)}call(e,...n){return this.$value=e(this.$value,...n),this}value(){return this.$value}}var D6=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,r=Object.getOwnPropertySymbols(t);o<r.length;o++)e.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(t,r[o])&&(n[r[o]]=t[r[o]]);return n};const I6=aa(t=>{const{encode:e,data:n,scale:r,shareSize:o=!1}=t,{x:i,y:a}=e,s=(l,c)=>{var u;if(l===void 0||!o)return{};const f=ve(n,h=>h[l]),d=((u=r==null?void 0:r[c])===null||u===void 0?void 0:u.domain)||Array.from(f.keys()),p=d.map(h=>f.has(h)?f.get(h).length:1);return{domain:d,flex:p}};return{scale:{x:Object.assign(Object.assign({paddingOuter:0,paddingInner:.1,guide:i===void 0?null:{position:"top"}},i===void 0&&{paddingInner:0}),s(i,"x")),y:Object.assign(Object.assign({range:[0,1],paddingOuter:0,paddingInner:.1,guide:a===void 0?null:{position:"right"}},a===void 0&&{paddingInner:0}),s(a,"y"))}}}),Uf=_o(t=>{const{data:e,scale:n,legend:r}=t,o=[t];let i,a,s;for(;o.length;){const d=o.shift(),{children:p,encode:h={},scale:y={},legend:g={}}=d,{color:m}=h,{color:b}=y,{color:v}=g;m!==void 0&&(i=m),b!==void 0&&(a=b),v!==void 0&&(s=v),Array.isArray(p)&&o.push(...p)}const l=()=>{var d;const p=(d=n==null?void 0:n.color)===null||d===void 0?void 0:d.domain;if(p!==void 0)return[p];if(i===void 0)return[void 0];const h=typeof i=="function"?i:g=>g[i],y=e.map(h);return y.some(g=>typeof g=="number")?[Mr(y)]:[Array.from(new Set(y)),"ordinal"]},c=typeof i=="string"?i:"",[u,f]=l();return Object.assign({encode:{color:{type:"column",value:u!=null?u:[]}},scale:{color:(0,et.Z)({},a,{domain:u,type:f})}},r===void 0&&{legend:{color:(0,et.Z)({title:c},s)}})}),Vf=aa(()=>({animate:{enterType:"fadeIn"}})),qf=_o(()=>({frame:!1,encode:{shape:"hollow"},style:{lineWidth:0}})),Kf=_o(()=>({type:"cell"})),D1=_o(t=>{const{data:e}=t;return{data:{type:"inline",value:e,transform:[{type:"custom",callback:()=>{const{data:r,encode:o}=t,{x:i,y:a}=o,s=i?Array.from(new Set(r.map(u=>u[i]))):[],l=a?Array.from(new Set(r.map(u=>u[a]))):[];return(()=>{if(s.length&&l.length){const u=[];for(const f of s)for(const d of l)u.push({[i]:f,[a]:d});return u}if(s.length)return s.map(u=>({[i]:u}));if(l.length)return l.map(u=>({[a]:u}))})()}}]}}}),I1=_o((t,e=F6,n=N6,r=z6,o={})=>{const{data:i,encode:a,children:s,scale:l,x:c=0,y:u=0,shareData:f=!1,key:d}=t,{value:p}=i,{x:h,y}=a,{color:g}=l,{domain:m}=g;return{children:(v,O,x)=>{const{x:w,y:j}=O,{paddingLeft:E,paddingTop:M,marginLeft:R,marginTop:D}=x,{domain:F}=w.getOptions(),{domain:A}=j.getOptions(),T=xo(v),P=v.map(e),k=v.map(({x:W,y:Z})=>[w.invert(W),j.invert(Z)]),C=k.map(([W,Z])=>K=>{const{[h]:J,[y]:rt}=K;return(h!==void 0?J===W:!0)&&(y!==void 0?rt===Z:!0)}).map(W=>p.filter(W)),I=f?he(C,W=>W.length):void 0,Y=k.map(([W,Z])=>({columnField:h,columnIndex:F.indexOf(W),columnValue:W,columnValuesLength:F.length,rowField:y,rowIndex:A.indexOf(Z),rowValue:Z,rowValuesLength:A.length})),X=Y.map(W=>Array.isArray(s)?s:[s(W)].flat(1));return T.flatMap(W=>{const[Z,K,J,rt]=P[W],nt=Y[W],tt=C[W];return X[W].map(st=>{var ot,dt,{scale:xt,key:vt,facet:wt=!0,axis:re={},legend:It={}}=st,Bt=D6(st,["scale","key","facet","axis","legend"]);const xe=((ot=xt==null?void 0:xt.y)===null||ot===void 0?void 0:ot.guide)||re.y,ln=((dt=xt==null?void 0:xt.x)===null||dt===void 0?void 0:dt.guide)||re.x,un={x:{tickCount:h?5:void 0},y:{tickCount:y?5:void 0}},Ie=wt?tt:tt.length===0?[]:p,kn={color:{domain:m}},fn={x:F1(ln,n)(nt,Ie),y:F1(xe,r)(nt,Ie)};return Object.assign(Object.assign({key:`${vt}-${W}`,data:Ie,margin:0,x:Z+E+c+R,y:K+M+u+D,parentKey:d,width:J,height:rt,paddingLeft:0,paddingRight:0,paddingTop:0,paddingBottom:0,frame:!!Ie.length,dataDomain:I,scale:(0,et.Z)(un,xt,kn),axis:(0,et.Z)({},re,fn),legend:!1},Bt),o)})})}}});function F6(t){const{points:e}=t;return nu(e)}function Hc(t,e){return e.length?(0,et.Z)({title:!1,tick:null,label:null},t):(0,et.Z)({title:!1,tick:null,label:null,grid:null},t)}function N6(t){return(e,n)=>{const{rowIndex:r,rowValuesLength:o,columnIndex:i,columnValuesLength:a}=e;if(r!==o-1)return Hc(t,n);const s=i!==a-1?!1:void 0,l=n.length?void 0:null;return(0,et.Z)({title:s,grid:l},t)}}function z6(t){return(e,n)=>{const{rowIndex:r,columnIndex:o}=e;if(o!==0)return Hc(t,n);const i=r!==0?!1:void 0,a=n.length?void 0:null;return(0,et.Z)({title:i,grid:a},t)}}function F1(t,e){return typeof t=="function"?t:t===null||t===!1?()=>null:e(t)}const N1=()=>t=>[Ba.of(t).call(Kf).call(Uf).call(Vf).call(I6).call(qf).call(D1).call(I1).value()];N1.props={};var Qf=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,r=Object.getOwnPropertySymbols(t);o<r.length;o++)e.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(t,r[o])&&(n[r[o]]=t[r[o]]);return n};const B6=aa(t=>({scale:{x:{guide:null,paddingOuter:0,paddingInner:.1},y:{guide:null,range:[0,1],paddingOuter:0,paddingInner:.1}}})),$6=_o(t=>{const{data:e,children:n,x:r=0,y:o=0,key:i}=t;return{children:(s,l,c)=>{const{x:u,y:f}=l,{paddingLeft:d,paddingTop:p,marginLeft:h,marginTop:y}=c,{domain:g}=u.getOptions(),{domain:m}=f.getOptions(),b=xo(s),v=s.map(({points:j})=>nu(j)),O=s.map(({x:j,y:E})=>[u.invert(j),f.invert(E)]),x=O.map(([j,E])=>({columnField:j,columnIndex:g.indexOf(j),columnValue:j,columnValuesLength:g.length,rowField:E,rowIndex:m.indexOf(E),rowValue:E,rowValuesLength:m.length})),w=x.map(j=>Array.isArray(n)?n:[n(j)].flat(1));return b.flatMap(j=>{const[E,M,R,D]=v[j],[F,A]=O[j],T=x[j];return w[j].map(k=>{var z,C;const{scale:I,key:Y,encode:X,axis:W,interaction:Z}=k,K=Qf(k,["scale","key","encode","axis","interaction"]),J=(z=I==null?void 0:I.y)===null||z===void 0?void 0:z.guide,rt=(C=I==null?void 0:I.x)===null||C===void 0?void 0:C.guide,nt={x:{facet:!1},y:{facet:!1}},tt={x:W6(rt)(T,e),y:Z6(J)(T,e)},yt={x:{tickCount:5},y:{tickCount:5}};return Object.assign({data:e,parentKey:i,key:`${Y}-${j}`,x:E+d+r+h,y:M+p+o+y,width:R,height:D,margin:0,paddingLeft:0,paddingRight:0,paddingTop:0,paddingBottom:0,frame:!0,scale:(0,et.Z)(nt,I),axis:(0,et.Z)(yt,W,tt),legend:!1,encode:(0,et.Z)({},X,{x:F,y:A}),interaction:(0,et.Z)({},Z,{legendFilter:!1})},K)})})}}}),Y6=_o(t=>{const{encode:e}=t,n=Qf(t,["encode"]),{position:r=[],x:o=r,y:i=[...r].reverse()}=e,a=Qf(e,["position","x","y"]),s=[];for(const l of[o].flat(1))for(const c of[i].flat(1))s.push({$x:l,$y:c});return Object.assign(Object.assign({},n),{data:s,encode:Object.assign(Object.assign({},a),{x:"$x",y:"$y"}),scale:Object.assign(Object.assign({},[o].flat(1).length===1&&{x:{paddingInner:0}}),[i].flat(1).length===1&&{y:{paddingInner:0}})})});function W6(t){return typeof t=="function"?t:t===null?()=>null:(e,n)=>{const{rowIndex:r,rowValuesLength:o}=e;if(r!==o-1)return Hc(t,n)}}function Z6(t){return typeof t=="function"?t:t===null?()=>null:(e,n)=>{const{columnIndex:r}=e;if(r!==0)return Hc(t,n)}}const H6=()=>t=>[Ba.of(t).call(Kf).call(Uf).call($6).call(Y6).call(Vf).call(qf).call(B6).value()];var X6=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,r=Object.getOwnPropertySymbols(t);o<r.length;o++)e.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(t,r[o])&&(n[r[o]]=t[r[o]]);return n};const G6=aa(t=>({scale:{x:{guide:{type:"axisArc"},paddingOuter:0,paddingInner:.1},y:{guide:null,range:[0,1],paddingOuter:0,paddingInner:.1}}})),U6=aa(t=>({coordinate:{type:"polar"}})),V6=t=>{const{encode:e}=t,n=X6(t,["encode"]),{position:r}=e;return Object.assign(Object.assign({},n),{encode:{x:r}})};function z1(t){return e=>null}function q6(t){const{points:e}=t,[n,r,o,i]=e,a=Ne(n,i),s=$e(n,i),l=$e(r,o),c=mh(s,l),u=1/Math.sin(c/2),f=a/(1+u),d=f*Math.sqrt(2),[p,h]=o,g=ri(s)+c/2,m=f*u,b=p+m*Math.sin(g),v=h-m*Math.cos(g);return[b-d/2,v-d/2,d,d]}const K6=()=>t=>[Ba.of(t).call(Kf).call(V6).call(Uf).call(U6).call(D1).call(I1,q6,z1,z1,{frame:!1}).call(Vf).call(qf).call(G6).value()];function Q6(t,e,n){const o=n,i=[0,o],a=[-o+1,1];if(t==="normal")return i;if(t==="reverse")return a;if(t==="alternate")return e%2===0?i:a;if(t==="reverse-alternate")return e%2===0?a:i}function J6(t,e,n){const r=[t];for(;r.length;){const o=r.pop();o.animate=(0,et.Z)({enter:{duration:e},update:{duration:e,easing:n,type:"morphing",fill:"both"},exit:{type:"fadeOut",duration:e}},o.animate||{});const{children:i}=o;Array.isArray(i)&&r.push(...i)}return t}const B1=()=>t=>{const{children:e=[],duration:n=1e3,iterationCount:r=1,direction:o="normal",easing:i="ease-in-out-sine"}=t,a=e.length;if(!Array.isArray(e)||a===0)return[];const{key:s}=e[0],l=e.map(c=>Object.assign(Object.assign({},c),{key:s})).map(c=>J6(c,n,i));return function*(){let c=0,u;for(;r==="infinite"||c<r;){const[f,d]=Q6(o,c,a);for(let p=f;p<d;p+=1){const h=Math.abs(p);u!==h&&(yield l[h]),u=h}c++}}};B1.props={};function lo(t,e,n){const{encode:r}=n;if(t===null)return[e];const o=t4(t).map(a=>{var s;return[a,(s=se(r,a))===null||s===void 0?void 0:s[0]]}).filter(([,a])=>Ut(a)),i=a=>o.map(([,s])=>s[a]).join("-");return Array.from(ve(e,i).values())}function $1(t){return Array.isArray(t)?r4(t):typeof t=="function"?n4(t):t==="series"?e4:t==="value"?o4:t==="sum"?i4:t==="maxIndex"?a4:null}function Y1(t,e){for(const n of t)n.sort(e)}function W1(t,e){return(e==null?void 0:e.domain)||Array.from(new Set(t))}function t4(t){return Array.isArray(t)?t:[t]}function e4(t,e,n){return $a(r=>n[r])}function n4(t){return(e,n,r)=>$a(o=>t(e[o]))}function r4(t){return(e,n,r)=>(o,i)=>t.reduce((a,s)=>a!==0?a:Ye(e[o][s],e[i][s]),0)}function o4(t,e,n){return $a(r=>e[r])}function i4(t,e,n){const r=xo(t),o=Array.from(ve(r,a=>n[+a]).entries()),i=new Map(o.map(([a,s])=>[a,s.reduce((l,c)=>l+ +e[c])]));return $a(a=>i.get(n[a]))}function a4(t,e,n){const r=xo(t),o=Array.from(ve(r,a=>n[+a]).entries()),i=new Map(o.map(([a,s])=>[a,ii(s,l=>e[l])]));return $a(a=>i.get(n[a]))}function $a(t){return(e,n)=>Ye(t(e),t(n))}const Z1=(t={})=>{const{groupBy:e="x",orderBy:n=null,reverse:r=!1,y:o="y",y1:i="y1",series:a=!0}=t;return(s,l)=>{var c;const{data:u,encode:f,style:d={}}=l,[p,h]=se(f,"y"),[y,g]=se(f,"y1"),[m]=a?_c(f,"series","color"):se(f,"color"),b=lo(e,s,l),O=((c=$1(n))!==null&&c!==void 0?c:()=>null)(u,p,m);O&&Y1(b,O);const x=new Array(s.length),w=new Array(s.length),j=new Array(s.length),E=[],M=[];for(const P of b){r&&P.reverse();const k=y?+y[P[0]]:0,z=[],C=[];for(const J of P){const rt=j[J]=+p[J]-k;rt<0?C.push(J):rt>=0&&z.push(J)}const I=z.length>0?z:C,Y=C.length>0?C:z;let X=z.length-1,W=0;for(;X>0&&p[I[X]]===0;)X--;for(;W<Y.length-1&&p[Y[W]]===0;)W++;E.push(I[X]),M.push(Y[W]);let Z=k;for(const J of C.reverse()){const rt=j[J];Z=x[J]=(w[J]=Z)+rt}let K=k;for(const J of z){const rt=j[J];rt>0?K=x[J]=(w[J]=K)+rt:x[J]=w[J]=K}}const R=new Set(E),D=new Set(M),F=o==="y"?x:w,A=i==="y"?x:w;let T;return l.type==="point"?T={y0:Sa(p,h),y:Oe(F,h)}:T={y0:Sa(p,h),y:Oe(F,h),y1:Oe(A,g)},[s,(0,et.Z)({},l,{encode:Object.assign({},T),style:Object.assign({first:(P,k)=>R.has(k),last:(P,k)=>D.has(k)},d)})]}};Z1.props={};function H1(t,e){let n=0;if(e===void 0)for(let r of t)r!=null&&(r=+r)>=r&&++n;else{let r=-1;for(let o of t)(o=e(o,++r,t))!=null&&(o=+o)>=o&&++n}return n}function s4(t,e){let n=0,r,o=0,i=0;if(e===void 0)for(let a of t)a!=null&&(a=+a)>=a&&(r=a-o,o+=r/++n,i+=r*(a-o));else{let a=-1;for(let s of t)(s=e(s,++a,t))!=null&&(s=+s)>=s&&(r=s-o,o+=r/++n,i+=r*(s-o))}if(n>1)return i/(n-1)}function X1(t,e){const n=s4(t,e);return n&&Math.sqrt(n)}function c4(t,e,n){const r=H1(t),o=X1(t);return r&&o?Math.ceil((n-e)*Math.cbrt(r)/(3.49*o)):1}var G1=Array.prototype,l4=G1.slice,xD=G1.map;function Jf(t){return()=>t}const u4=Math.sqrt(50),f4=Math.sqrt(10),d4=Math.sqrt(2);function Xc(t,e,n){const r=(e-t)/Math.max(0,n),o=Math.floor(Math.log10(r)),i=r/Math.pow(10,o),a=i>=u4?10:i>=f4?5:i>=d4?2:1;let s,l,c;return o<0?(c=Math.pow(10,-o)/a,s=Math.round(t*c),l=Math.round(e*c),s/c<t&&++s,l/c>e&&--l,c=-c):(c=Math.pow(10,o)*a,s=Math.round(t/c),l=Math.round(e/c),s*c<t&&++s,l*c>e&&--l),l<s&&.5<=n&&n<2?Xc(t,e,n*2):[s,l,c]}function p4(t,e,n){if(e=+e,t=+t,n=+n,!(n>0))return[];if(t===e)return[t];const r=e<t,[o,i,a]=r?Xc(e,t,n):Xc(t,e,n);if(!(i>=o))return[];const s=i-o+1,l=new Array(s);if(r)if(a<0)for(let c=0;c<s;++c)l[c]=(i-c)/-a;else for(let c=0;c<s;++c)l[c]=(i-c)*a;else if(a<0)for(let c=0;c<s;++c)l[c]=(o+c)/-a;else for(let c=0;c<s;++c)l[c]=(o+c)*a;return l}function Ya(t,e,n){return e=+e,t=+t,n=+n,Xc(t,e,n)[2]}function _D(t,e,n){e=+e,t=+t,n=+n;const r=e<t,o=r?Ya(e,t,n):Ya(t,e,n);return(r?-1:1)*(o<0?1/-o:o)}function h4(t,e,n){let r;for(;;){const o=Ya(t,e,n);if(o===r||o===0||!isFinite(o))return[t,e];o>0?(t=Math.floor(t/o)*o,e=Math.ceil(e/o)*o):o<0&&(t=Math.ceil(t*o)/o,e=Math.floor(e*o)/o),r=o}}function y4(t){return Math.max(1,Math.ceil(Math.log(H1(t))/Math.LN2)+1)}function g4(){var t=Oo,e=Mr,n=y4;function r(o){Array.isArray(o)||(o=Array.from(o));var i,a=o.length,s,l,c=new Array(a);for(i=0;i<a;++i)c[i]=t(o[i],i,o);var u=e(c),f=u[0],d=u[1],p=n(c,f,d);if(!Array.isArray(p)){const v=d,O=+p;if(e===Mr&&([f,d]=h4(f,d,O)),p=p4(f,d,O),p[0]<=f&&(l=Ya(f,d,O)),p[p.length-1]>=d)if(v>=d&&e===Mr){const x=Ya(f,d,O);isFinite(x)&&(x>0?d=(Math.floor(d/x)+1)*x:x<0&&(d=(Math.ceil(d*-x)+1)/-x))}else p.pop()}for(var h=p.length,y=0,g=h;p[y]<=f;)++y;for(;p[g-1]>d;)--g;(y||g<h)&&(p=p.slice(y,g),h=g-y);var m=new Array(h+1),b;for(i=0;i<=h;++i)b=m[i]=[],b.x0=i>0?p[i-1]:f,b.x1=i<h?p[i]:d;if(isFinite(l)){if(l>0)for(i=0;i<a;++i)(s=c[i])!=null&&f<=s&&s<=d&&m[Math.min(h,Math.floor((s-f)/l))].push(o[i]);else if(l<0){for(i=0;i<a;++i)if((s=c[i])!=null&&f<=s&&s<=d){const v=Math.floor((f-s)*l);m[Math.min(h,v+(p[v]<=s))].push(o[i])}}}else for(i=0;i<a;++i)(s=c[i])!=null&&f<=s&&s<=d&&m[vS(p,s,0,h)].push(o[i]);return m}return r.value=function(o){return arguments.length?(t=typeof o=="function"?o:Jf(o),r):t},r.domain=function(o){return arguments.length?(e=typeof o=="function"?o:Jf([o[0],o[1]]),r):e},r.thresholds=function(o){return arguments.length?(n=typeof o=="function"?o:Jf(Array.isArray(o)?l4.call(o):o),r):n},r}function td(t,e,n=0,r=1/0,o){if(e=Math.floor(e),n=Math.floor(Math.max(0,n)),r=Math.floor(Math.min(t.length-1,r)),!(n<=e&&e<=r))return t;for(o=o===void 0?ua:Lh(o);r>n;){if(r-n>600){const l=r-n+1,c=e-n+1,u=Math.log(l),f=.5*Math.exp(2*u/3),d=.5*Math.sqrt(u*f*(l-f)/l)*(c-l/2<0?-1:1),p=Math.max(n,Math.floor(e-c*f/l+d)),h=Math.min(r,Math.floor(e+(l-c)*f/l+d));td(t,e,p,h,o)}const i=t[e];let a=n,s=r;for(Wa(t,n,e),o(t[r],i)>0&&Wa(t,n,r);a<s;){for(Wa(t,a,s),++a,--s;o(t[a],i)<0;)++a;for(;o(t[s],i)>0;)--s}o(t[n],i)===0?Wa(t,n,s):(++s,Wa(t,s,r)),s<=e&&(n=s+1),e<=s&&(r=s-1)}return t}function Wa(t,e,n){const r=t[e];t[e]=t[n],t[n]=r}function m4(t,e=Ye){let n,r=!1;if(e.length===1){let o;for(const i of t){const a=e(i);(r?Ye(a,o)>0:Ye(a,a)===0)&&(n=i,o=a,r=!0)}}else for(const o of t)(r?e(o,n)>0:e(o,o)===0)&&(n=o,r=!0);return n}function Gc(t,e,n){if(t=Float64Array.from(yS(t,n)),!(!(r=t.length)||isNaN(e=+e))){if(e<=0||r<2)return Yn(t);if(e>=1)return he(t);var r,o=(r-1)*e,i=Math.floor(o),a=he(td(t,i).subarray(0,i+1)),s=Yn(t.subarray(i+1));return a+(s-a)*(o-i)}}function wD(t,e,n=number){if(!(!(r=t.length)||isNaN(e=+e))){if(e<=0||r<2)return+n(t[0],0,t);if(e>=1)return+n(t[r-1],r-1,t);var r,o=(r-1)*e,i=Math.floor(o),a=+n(t[i],i,t),s=+n(t[i+1],i+1,t);return a+(s-a)*(o-i)}}function b4(t,e,n=du){if(!isNaN(e=+e)){if(r=Float64Array.from(t,(s,l)=>du(n(t[l],l,t))),e<=0)return Na(r);if(e>=1)return ii(r);var r,o=Uint32Array.from(t,(s,l)=>l),i=r.length-1,a=Math.floor(i*e);return td(o,a,0,i,(s,l)=>ua(r[s],r[l])),a=m4(o.subarray(0,a+1),s=>r[s]),a>=0?a:-1}}function ed(t,e){return Gc(t,.5,e)}function v4(t,e){return b4(t,.5,e)}var O4=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,r=Object.getOwnPropertySymbols(t);o<r.length;o++)e.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(t,r[o])&&(n[r[o]]=t[r[o]]);return n};function uo(t){return e=>e===null?t:`${t} of ${e}`}function x4(t){if(typeof t=="function")return[t,null];const n={mean:_4,max:S4,count:E4,first:M4,last:k4,sum:A4,min:j4,median:w4}[t];if(!n)throw new Error(`Unknown reducer: ${t}.`);return n()}function _4(){const t=(n,r)=>za(n,o=>+r[o]),e=uo("mean");return[t,e]}function w4(){const t=(n,r)=>ed(n,o=>+r[o]),e=uo("median");return[t,e]}function S4(){const t=(n,r)=>he(n,o=>+r[o]),e=uo("max");return[t,e]}function j4(){const t=(n,r)=>Yn(n,o=>+r[o]),e=uo("min");return[t,e]}function E4(){const t=(n,r)=>n.length,e=uo("count");return[t,e]}function A4(){const t=(n,r)=>Hn(n,o=>+r[o]),e=uo("sum");return[t,e]}function M4(){const t=(n,r)=>r[n[0]],e=uo("first");return[t,e]}function k4(){const t=(n,r)=>r[n[n.length-1]],e=uo("last");return[t,e]}const nd=(t={})=>{const{groupBy:e}=t,n=O4(t,["groupBy"]);return(r,o)=>{const{data:i,encode:a}=o,s=e(r,o);if(!s)return[r,o];const l=(p,h)=>{if(p)return p;const{from:y}=h;if(!y)return p;const[,g]=se(a,y);return g},c=Object.entries(n).map(([p,h])=>{const[y,g]=x4(h),[m,b]=se(a,p),v=l(b,h),O=s.map(x=>y(x,m!=null?m:i));return[p,Object.assign(Object.assign({},BM(O,(g==null?void 0:g(v))||v)),{aggregate:!0})]}),u=Object.keys(a).map(p=>{const[h,y]=se(a,p),g=s.map(m=>h[m[0]]);return[p,Oe(g,y)]}),f=s.map(p=>i[p[0]]);return[xo(s),(0,et.Z)({},o,{data:f,encode:Object.fromEntries([...u,...c])})]}};nd.props={};var P4=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,r=Object.getOwnPropertySymbols(t);o<r.length;o++)e.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(t,r[o])&&(n[r[o]]=t[r[o]]);return n};const U1="thresholds";function T4(t){const[e,n]=Mr(t);return Math.min(200,c4(t,e,n))}const rd=(t={})=>{const{groupChannels:e=["color"],binChannels:n=["x","y"]}=t,r=P4(t,["groupChannels","binChannels"]),o={},i=(a,s)=>{const{encode:l}=s,c=n.map(h=>{const[y]=se(l,h);return y}),u=at(r,U1),f=a.filter(h=>c.every(y=>Ut(y[h]))),d=[...e.map(h=>{const[y]=se(l,h);return y}).filter(Ut).map(h=>y=>h[y]),...n.map((h,y)=>{const g=c[y],m=u[h]||T4(g),b=g4().thresholds(m).value(O=>+g[O])(f),v=new Map(b.flatMap(O=>{const{x0:x,x1:w}=O,j=`${x},${w}`;return O.map(E=>[E,j])}));return o[h]=v,O=>v.get(O)})],p=h=>d.map(y=>y(h)).join("-");return Array.from(ve(f,p).values())};return nd(Object.assign(Object.assign(Object.assign({},Object.fromEntries(Object.entries(r).filter(([a])=>!a.startsWith(U1)))),Object.fromEntries(n.flatMap(a=>{const s=([c])=>+o[a].get(c).split(",")[0],l=([c])=>+o[a].get(c).split(",")[1];return l.from=a,[[a,s],[`${a}1`,l]]}))),{groupBy:i}))};rd.props={};const V1=(t={})=>{const{thresholds:e}=t;return rd(Object.assign(Object.assign({},t),{thresholdsX:e,groupChannels:["color"],binChannels:["x"]}))};V1.props={};var C4=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,r=Object.getOwnPropertySymbols(t);o<r.length;o++)e.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(t,r[o])&&(n[r[o]]=t[r[o]]);return n};const q1=(t={})=>{const{groupBy:e="x",reverse:n=!1,orderBy:r,padding:o}=t,i=C4(t,["groupBy","reverse","orderBy","padding"]);return(a,s)=>{const{data:l,encode:c,scale:u}=s,{series:f}=u,[d]=se(c,"y"),[p]=_c(c,"series","color"),h=W1(p,f),y=(0,et.Z)({},s,{scale:{series:{domain:h,paddingInner:o}}}),g=lo(e,a,s),m=$1(r);if(!m)return[a,(0,et.Z)(y,{encode:{series:Oe(p)}})];const b=m(l,d,p);b&&Y1(g,b);const v=new Array(a.length);for(const O of g){n&&O.reverse();for(let x=0;x<O.length;x++)v[O[x]]=h[x]}return[a,(0,et.Z)(y,{encode:{series:Oe(r?v:p)}})]}};q1.props={};function Uc(t,e,n){if(t===null)return[-.5,.5];const r=W1(t,e),i=new B.t({domain:r,range:[0,1],padding:n}).getBandWidth();return[-i/2,i/2]}function Vc(t,e,n){return e*(1-t)+n*t}const K1=(t={})=>{const{padding:e=0,paddingX:n=e,paddingY:r=e,random:o=Math.random}=t;return(i,a)=>{const{encode:s,scale:l}=a,{x:c,y:u}=l,[f]=se(s,"x"),[d]=se(s,"y"),p=Uc(f,c,n),h=Uc(d,u,r),y=i.map(()=>Vc(o(),...h)),g=i.map(()=>Vc(o(),...p));return[i,(0,et.Z)({scale:{x:{padding:.5},y:{padding:.5}}},a,{encode:{dy:Oe(y),dx:Oe(g)}})]}};K1.props={};const Q1=(t={})=>{const{padding:e=0,random:n=Math.random}=t;return(r,o)=>{const{encode:i,scale:a}=o,{x:s}=a,[l]=se(i,"x"),c=Uc(l,s,e),u=r.map(()=>Vc(n(),...c));return[r,(0,et.Z)({scale:{x:{padding:.5}}},o,{encode:{dx:Oe(u)}})]}};Q1.props={};const J1=(t={})=>{const{padding:e=0,random:n=Math.random}=t;return(r,o)=>{const{encode:i,scale:a}=o,{y:s}=a,[l]=se(i,"y"),c=Uc(l,s,e),u=r.map(()=>Vc(n(),...c));return[r,(0,et.Z)({scale:{y:{padding:.5}}},o,{encode:{dy:Oe(u)}})]}};J1.props={};var L4=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,r=Object.getOwnPropertySymbols(t);o<r.length;o++)e.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(t,r[o])&&(n[r[o]]=t[r[o]]);return n};const tO=(t={})=>{const{groupBy:e="x"}=t;return(n,r)=>{const{encode:o}=r,{x:i}=o,a=L4(o,["x"]),s=Object.entries(a).filter(([d])=>d.startsWith("y")).map(([d])=>[d,se(o,d)[0]]),l=s.map(([d])=>[d,new Array(n.length)]),c=lo(e,n,r),u=new Array(c.length);for(let d=0;d<c.length;d++){const h=c[d].flatMap(m=>s.map(([,b])=>+b[m])),[y,g]=Mr(h);u[d]=(y+g)/2}const f=Math.max(...u);for(let d=0;d<c.length;d++){const p=f-u[d],h=c[d];for(const y of h)for(let g=0;g<s.length;g++){const[,m]=s[g],[,b]=l[g];b[y]=+m[y]+p}}return[n,(0,et.Z)({},r,{encode:Object.fromEntries(l.map(([d,p])=>[d,Oe(p,se(o,d)[1])]))})]}};tO.props={};const eO=(t={})=>{const{groupBy:e="x"}=t;return(n,r)=>{const{encode:o}=r,[i]=se(o,"y"),[a,s]=se(o,"y1"),l=lo(e,n,r),c=new Array(n.length);for(const u of l){const f=u.map(d=>+i[d]);for(let d=0;d<u.length;d++){const p=u[d],h=Math.max(...f.filter((y,g)=>g!==d));c[p]=+i[p]>h?h:i[p]}}return[n,(0,et.Z)({},r,{encode:{y1:Oe(c,s)}})]}};eO.props={};const nO=t=>{const{groupBy:e=["x"],reducer:n=(a,s)=>s[a[0]],orderBy:r=null,reverse:o=!1,duration:i}=t;return(a,s)=>{const{encode:l}=s,u=(Array.isArray(e)?e:[e]).map(g=>[g,se(l,g)[0]]);if(u.length===0)return[a,s];let f=[a];for(const[,g]of u){const m=[];for(const b of f){const v=Array.from(ve(b,O=>g[O]).values());m.push(...v)}f=m}if(r){const[g]=se(l,r);g&&f.sort((m,b)=>n(m,g)-n(b,g)),o&&f.reverse()}const d=(i||3e3)/f.length,[p]=i?[oo(a,d)]:_c(l,"enterDuration",oo(a,d)),[h]=_c(l,"enterDelay",oo(a,0)),y=new Array(a.length);for(let g=0,m=0;g<f.length;g++){const b=f[g],v=he(b,O=>+p[O]);for(const O of b)y[O]=+h[O]+m;m+=v}return[a,(0,et.Z)({},s,{encode:{enterDuration:xc(p),enterDelay:xc(y)}})]}};nO.props={};var R4=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,r=Object.getOwnPropertySymbols(t);o<r.length;o++)e.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(t,r[o])&&(n[r[o]]=t[r[o]]);return n};function D4(t){return typeof t=="function"?t:{min:(n,r)=>Yn(n,o=>r[+o]),max:(n,r)=>he(n,o=>r[+o]),first:(n,r)=>r[n[0]],last:(n,r)=>r[n[n.length-1]],mean:(n,r)=>za(n,o=>r[+o]),median:(n,r)=>ed(n,o=>r[+o]),sum:(n,r)=>Hn(n,o=>r[+o]),deviation:(n,r)=>X1(n,o=>r[+o])}[t]||he}const rO=(t={})=>{const{groupBy:e="x",basis:n="max"}=t;return(r,o)=>{const{encode:i,tooltip:a}=o,{x:s}=i,l=R4(i,["x"]),c=Object.entries(l).filter(([y])=>y.startsWith("y")).map(([y])=>[y,se(i,y)[0]]),[,u]=c.find(([y])=>y==="y"),f=c.map(([y])=>[y,new Array(r.length)]),d=lo(e,r,o),p=D4(n);for(const y of d){const g=p(y,u);for(const m of y)for(let b=0;b<c.length;b++){const[,v]=c[b],[,O]=f[b];O[m]=+v[m]/g}}const h=Se(a)||(a==null?void 0:a.items)&&(a==null?void 0:a.items.length)!==0;return[r,(0,et.Z)({},o,Object.assign({encode:Object.fromEntries(f.map(([y,g])=>[y,Oe(g,se(i,y)[1])]))},!h&&i.y0&&{tooltip:{items:[{channel:"y0"}]}}))]}};rO.props={};function oO(t,e){return[t[0]]}function I4(t,e){const n=t.length-1;return[t[n]]}function F4(t,e){const n=ii(t,r=>e[r]);return[t[n]]}function N4(t,e){const n=Na(t,r=>e[r]);return[t[n]]}function z4(t){return typeof t=="function"?t:{first:oO,last:I4,max:F4,min:N4}[t]||oO}const qc=(t={})=>{const{groupBy:e="series",channel:n,selector:r}=t;return(o,i)=>{const{encode:a}=i,s=lo(e,o,i),[l]=se(a,n),c=z4(r);return[s.flatMap(u=>c(u,l)),i]}};qc.props={};var B4=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,r=Object.getOwnPropertySymbols(t);o<r.length;o++)e.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(t,r[o])&&(n[r[o]]=t[r[o]]);return n};const iO=(t={})=>{const{selector:e}=t,n=B4(t,["selector"]);return qc(Object.assign({channel:"x",selector:e},n))};iO.props={};var $4=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,r=Object.getOwnPropertySymbols(t);o<r.length;o++)e.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(t,r[o])&&(n[r[o]]=t[r[o]]);return n};const aO=(t={})=>{const{selector:e}=t,n=$4(t,["selector"]);return qc(Object.assign({channel:"y",selector:e},n))};aO.props={};var Y4=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,r=Object.getOwnPropertySymbols(t);o<r.length;o++)e.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(t,r[o])&&(n[r[o]]=t[r[o]]);return n};const Za=(t={})=>{const{channels:e=["x","y"]}=t,n=Y4(t,["channels"]),r=(o,i)=>lo(e,o,i);return nd(Object.assign(Object.assign({},n),{groupBy:r}))};Za.props={};const sO=(t={})=>Za(Object.assign(Object.assign({},t),{channels:["x","color","series"]}));sO.props={};const cO=(t={})=>Za(Object.assign(Object.assign({},t),{channels:["y","color","series"]}));cO.props={};const lO=(t={})=>Za(Object.assign(Object.assign({},t),{channels:["color"]}));lO.props={};function W4(t,e,n){return(e.length!==2?ar(sn(t,e,n),([r,o],[i,a])=>Ye(o,a)||Ye(r,i)):ar(ve(t,n),([r,o],[i,a])=>e(o,a)||Ye(r,i))).map(([r])=>r)}function Z4(t,e,n){const{by:r=t,reducer:o="max"}=e,[i]=se(n,r);if(typeof o=="function")return a=>o(a,i);if(o==="max")return a=>he(a,s=>+i[s]);if(o==="min")return a=>Yn(a,s=>+i[s]);if(o==="sum")return a=>Hn(a,s=>+i[s]);if(o==="median")return a=>ed(a,s=>+i[s]);if(o==="mean")return a=>za(a,s=>+i[s]);if(o==="first")return a=>i[a[0]];if(o==="last")return a=>i[a[a.length-1]];throw new Error(`Unknown reducer: ${o}`)}function H4(t,e,n){if(!Array.isArray(n))return t;const r=new Set(n);return t.filter(o=>r.has(e[o]))}const Kc=(t={})=>(e,n)=>{const{reverse:r,slice:o,channel:i,by:a,ordinal:s=!0,reducer:l}=t,{encode:c,scale:u={}}=n,f=u[i].domain,[d]=se(c,a!=null?a:i),[p]=se(c,i),h=Z4(i,{by:a,reducer:l},c),y=H4(e,p,f),g=W4(y,h,O=>p[O]),m=s?e:ar(e,O=>d[O]);r&&(!s&&m.reverse(),g.reverse());const b=typeof o=="number"?[0,o]:o,v=o?g.slice(...b):g;return[m,(0,et.Z)(n,{scale:{[i]:{domain:v}}})]};Kc.props={};const uO=(t={})=>Kc(Object.assign(Object.assign({},t),{channel:"x"}));uO.props={};const fO=(t={})=>Kc(Object.assign(Object.assign({},t),{channel:"y"}));fO.props={};const dO=(t={})=>Kc(Object.assign(Object.assign({},t),{channel:"color"}));dO.props={};function X4(t,e){return typeof e=="string"?t.map(n=>n[e]):t.map(e)}function G4(t,e){if(typeof t=="function")return n=>t(n,e);if(t==="sum")return n=>Hn(n,r=>+e[r]);throw new Error(`Unknown reducer: ${t}`)}const pO=(t={})=>{const{field:e,channel:n="y",reducer:r="sum"}=t;return(o,i)=>{const{data:a,encode:s}=i,[l]=se(s,"x"),c=e?X4(a,e):se(s,n)[0],u=G4(r,c),f=_(o,u,d=>l[d]).map(d=>d[1]);return[o,(0,et.Z)({},i,{scale:{x:{flex:f}}})]}};pO.props={};function U4(t){const{padding:e=0,direction:n="col"}=t;return(r,o,i)=>{const a=r.length;if(a===0)return[];const{innerWidth:s,innerHeight:l}=i,c=l/s;let u=Math.ceil(Math.sqrt(o/c)),f=s/u,d=Math.ceil(o/u),p=d*f;for(;p>l;)u=u+1,f=s/u,d=Math.ceil(o/u),p=d*f;const h=l-d*f,y=d<=1?0:h/(d-1),[g,m]=d<=1?[(s-a*f)/(a-1),(l-f)/2]:[0,0];return r.map((b,v)=>{const[O,x,w,j]=nu(b),E=n==="col"?v%u:Math.floor(v/d),M=n==="col"?Math.floor(v/u):v%d,R=E*f,D=(d-M-1)*f+h,F=(f-e)/w,A=(f-e)/j,T=R-O+g*E+1/2*e,P=D-x-y*M-m+1/2*e;return`translate(${T}, ${P}) scale(${F}, ${A})`})}}const hO=t=>(e,n)=>[e,(0,et.Z)({},n,{modifier:U4(t),axis:!1})];hO.props={};function V4(t,e,n,r){const o=t.length;if(r>=o||r===0)return t;const i=p=>e[t[p]]*1,a=p=>n[t[p]]*1,s=[],l=(o-2)/(r-2);let c=0,u,f,d;s.push(c);for(let p=0;p<r-2;p++){let h=0,y=0,g=Math.floor((p+1)*l)+1,m=Math.floor((p+2)*l)+1;m=Math.min(m,o);const b=m-g;for(;g<m;g++)h+=i(g),y+=a(g);h/=b,y/=b;let v=Math.floor((p+0)*l)+1;const O=Math.floor((p+1)*l)+1,x=[i(c),a(c)];for(u=f=-1;v<O;v++)f=Math.abs((x[0]-h)*(i(v)-x[1])-(x[0]-a(v))*(y-x[0]))*.5,f>u&&(u=f,d=v);s.push(d),c=d}return s.push(o-1),s.map(p=>t[p])}function q4(t){if(typeof t=="function")return t;if(t==="lttb")return V4;const e={first:r=>[r[0]],last:r=>[r[r.length-1]],min:(r,o,i)=>[r[Na(r,a=>i[a])]],max:(r,o,i)=>[r[ii(r,a=>i[a])]],median:(r,o,i)=>[r[v4(r,a=>i[a])]]},n=e[t]||e.median;return(r,o,i,a)=>{const s=Math.max(1,Math.floor(r.length/a));return K4(r,s).flatMap(c=>n(c,o,i))}}function K4(t,e){const n=t.length,r=[];let o=0;for(;o<n;)r.push(t.slice(o,o+=e));return r}const yO=(t={})=>{const{strategy:e="median",thresholds:n=2e3,groupBy:r=["series","color"]}=t,o=q4(e);return(i,a)=>{const{encode:s}=a,l=lo(r,i,a),[c]=se(s,"x"),[u]=se(s,"y");return[l.flatMap(f=>o(f,c,u,n)),a]}};yO.props={};function Q4(t){return typeof t=="object"?[t.value,t.ordinal]:[t,!0]}function J4(t){var e;const{encode:n}=t,r=Object.assign(Object.assign({},t),{encode:Object.assign(Object.assign({},t.encode),{y:Object.assign(Object.assign({},t.encode.y),{value:[]})})}),o=(e=n==null?void 0:n.color)===null||e===void 0?void 0:e.field;if(!n||!o)return r;let i;for(const[a,s]of Object.entries(n))(a==="x"||a==="y")&&s.field===o&&(i=Object.assign(Object.assign({},i),{[a]:Object.assign(Object.assign({},s),{value:[]})}));return i?Object.assign(Object.assign({},t),{encode:Object.assign(Object.assign({},t.encode),i)}):r}const gO=(t={})=>(e,n)=>{const{encode:r,data:o}=n,i=Object.entries(t).map(([u,f])=>{const[d]=se(r,u);if(!d)return null;const[p,h=!0]=Q4(f);if(typeof p=="function")return y=>p(d[y]);if(h){const y=Array.isArray(p)?p:[p];return y.length===0?null:g=>y.includes(d[g])}else{const[y,g]=p;return m=>d[m]>=y&&d[m]<=g}}).filter(Ut),a=u=>i.every(f=>f(u)),s=e.filter(a),l=s.map((u,f)=>f);if(i.length===0){const u=J4(n);return[e,u]}const c=Object.entries(r).map(([u,f])=>[u,Object.assign(Object.assign({},f),{value:l.map(d=>f.value[s[d]]).filter(d=>d!==void 0)})]);return[l,(0,et.Z)({},n,{encode:Object.fromEntries(c),data:s.map(u=>o[u])})]};gO.props={};var mO={},od={},id=34,Ha=10,ad=13;function bO(t){return new Function("d","return {"+t.map(function(e,n){return JSON.stringify(e)+": d["+n+'] || ""'}).join(",")+"}")}function tP(t,e){var n=bO(t);return function(r,o){return e(n(r),o,t)}}function vO(t){var e=Object.create(null),n=[];return t.forEach(function(r){for(var o in r)o in e||n.push(e[o]=o)}),n}function In(t,e){var n=t+"",r=n.length;return r<e?new Array(e-r+1).join(0)+n:n}function eP(t){return t<0?"-"+In(-t,6):t>9999?"+"+In(t,6):In(t,4)}function nP(t){var e=t.getUTCHours(),n=t.getUTCMinutes(),r=t.getUTCSeconds(),o=t.getUTCMilliseconds();return isNaN(t)?"Invalid Date":eP(t.getUTCFullYear(),4)+"-"+In(t.getUTCMonth()+1,2)+"-"+In(t.getUTCDate(),2)+(o?"T"+In(e,2)+":"+In(n,2)+":"+In(r,2)+"."+In(o,3)+"Z":r?"T"+In(e,2)+":"+In(n,2)+":"+In(r,2)+"Z":n||e?"T"+In(e,2)+":"+In(n,2)+"Z":"")}function rP(t){var e=new RegExp('["'+t+`
\r]`),n=t.charCodeAt(0);function r(f,d){var p,h,y=o(f,function(g,m){if(p)return p(g,m-1);h=g,p=d?tP(g,d):bO(g)});return y.columns=h||[],y}function o(f,d){var p=[],h=f.length,y=0,g=0,m,b=h<=0,v=!1;f.charCodeAt(h-1)===Ha&&--h,f.charCodeAt(h-1)===ad&&--h;function O(){if(b)return od;if(v)return v=!1,mO;var w,j=y,E;if(f.charCodeAt(j)===id){for(;y++<h&&f.charCodeAt(y)!==id||f.charCodeAt(++y)===id;);return(w=y)>=h?b=!0:(E=f.charCodeAt(y++))===Ha?v=!0:E===ad&&(v=!0,f.charCodeAt(y)===Ha&&++y),f.slice(j+1,w-1).replace(/""/g,'"')}for(;y<h;){if((E=f.charCodeAt(w=y++))===Ha)v=!0;else if(E===ad)v=!0,f.charCodeAt(y)===Ha&&++y;else if(E!==n)continue;return f.slice(j,w)}return b=!0,f.slice(j,h)}for(;(m=O())!==od;){for(var x=[];m!==mO&&m!==od;)x.push(m),m=O();d&&(x=d(x,g++))==null||p.push(x)}return p}function i(f,d){return f.map(function(p){return d.map(function(h){return u(p[h])}).join(t)})}function a(f,d){return d==null&&(d=vO(f)),[d.map(u).join(t)].concat(i(f,d)).join(`
`)}function s(f,d){return d==null&&(d=vO(f)),i(f,d).join(`
`)}function l(f){return f.map(c).join(`
`)}function c(f){return f.map(u).join(t)}function u(f){return f==null?"":f instanceof Date?nP(f):e.test(f+="")?'"'+f.replace(/"/g,'""')+'"':f}return{parse:r,parseRows:o,format:a,formatBody:s,formatRows:l,formatRow:c,formatValue:u}}function oP(t){for(var e in t){var n=t[e].trim(),r,o;if(!n)n=null;else if(n==="true")n=!0;else if(n==="false")n=!1;else if(n==="NaN")n=NaN;else if(!isNaN(r=+n))n=r;else if(o=n.match(/^([-+]\d{2})?\d{4}(-\d{2}(-\d{2})?)?(T\d{2}:\d{2}(:\d{2}(\.\d{3})?)?(Z|[-+]\d{2}:\d{2})?)?$/))iP&&o[4]&&!o[7]&&(n=n.replace(/-/g,"/").replace(/T/," ")),n=new Date(n);else continue;t[e]=n}return t}const iP=new Date("2019-01-01T00:00").getHours()||new Date("2019-07-01T00:00").getHours();var aP=function(t,e,n,r){function o(i){return i instanceof n?i:new n(function(a){a(i)})}return new(n||(n=Promise))(function(i,a){function s(u){try{c(r.next(u))}catch(f){a(f)}}function l(u){try{c(r.throw(u))}catch(f){a(f)}}function c(u){u.done?i(u.value):o(u.value).then(s,l)}c((r=r.apply(t,e||[])).next())})};const OO=t=>{const{value:e,format:n=e.split(".").pop(),delimiter:r=",",autoType:o=!0}=t;return()=>aP(void 0,void 0,void 0,function*(){const i=yield fetch(e);if(n==="csv"){const a=yield i.text();return rP(r).parse(a,o?oP:Pt)}else if(n==="json")return yield i.json();throw new Error(`Unknown format: ${n}.`)})};OO.props={};const xO=t=>{const{value:e}=t;return()=>e};xO.props={};function sP(t,e){return t.map(n=>{if(Array.isArray(n)){const[r,o=e]=n;return[r,o]}return[n,e]})}const _O=t=>{const{fields:e=[]}=t,n=sP(e,!0);return r=>{const o=(i,a)=>n.reduce((s,[l,c=!0])=>s!==0?s:c?i[l]<a[l]?-1:+(i[l]!==a[l]):i[l]>a[l]?-1:+(i[l]!==a[l]),0);return[...r].sort(o)}};_O.props={};function SD(t){return t!=null&&!Number.isNaN(t)}const wO=t=>{const{callback:e}=t;return n=>Array.isArray(n)?[...n].sort(e):n};wO.props={};function cP(t){return t!=null&&!Number.isNaN(t)}const SO=t=>{const{callback:e=cP}=t;return n=>n.filter(e)};SO.props={};function lP(t,e=[]){return e.reduce((n,r)=>(r in t&&(n[r]=t[r]),n),{})}const jO=t=>{const{fields:e}=t;return n=>n.map(r=>lP(r,e))};jO.props={};function uP(t){return Object.keys(t).length===0}const EO=t=>e=>{if(!t||uP(t))return e;const n=r=>Object.entries(r).reduce((o,[i,a])=>(o[t[i]||i]=a,o),{});return e.map(n)};EO.props={};function fP(t){return!t||Object.keys(t).length===0}const AO=t=>{const{fields:e,key:n="key",value:r="value"}=t;return o=>fP(e)?o:o.flatMap(i=>e.map(a=>Object.assign(Object.assign({},i),{[n]:a,[r]:i[a]})))};AO.props={};const MO=t=>{const{start:e,end:n}=t;return r=>r.slice(e,n)};MO.props={};const kO=t=>{const{callback:e=Pt}=t;return n=>e(n)};kO.props={};const PO=t=>{const{callback:e=Pt}=t;return n=>Array.isArray(n)?n.map(e):n};PO.props={};function TO(t){return typeof t=="string"?e=>e[t]:t}const CO=t=>{const{join:e,on:n,select:r=[],as:o=r,unknown:i=NaN}=t,[a,s]=n,l=TO(s),c=TO(a),u=sn(e,([f])=>f,f=>l(f));return f=>f.map(d=>{const p=u.get(c(d));return Object.assign(Object.assign({},d),r.reduce((h,y,g)=>(h[o[g]]=p?p[y]:i,h),{}))})};CO.props={};var dP=Q(78434),pP=Q.n(dP);function jD(t){return t!=null&&!Number.isNaN(t)}const LO=t=>{const{field:e,groupBy:n,as:r=["y","size"],min:o,max:i,size:a=10,width:s}=t,[l,c]=r;return u=>Array.from(ve(u,d=>n.map(p=>d[p]).join("-")).values()).map(d=>{const p=pP().create(d.map(g=>g[e]),{min:o,max:i,size:a,width:s}),h=p.map(g=>g.x),y=p.map(g=>g.y);return Object.assign(Object.assign({},d[0]),{[l]:h,[c]:y})})};LO.props={};const RO=()=>t=>(console.log("G2 data section:",t),t);RO.props={};var hP=function(t,e,n,r){function o(i){return i instanceof n?i:new n(function(a){a(i)})}return new(n||(n=Promise))(function(i,a){function s(u){try{c(r.next(u))}catch(f){a(f)}}function l(u){try{c(r.throw(u))}catch(f){a(f)}}function c(u){u.done?i(u.value):o(u.value).then(s,l)}c((r=r.apply(t,e||[])).next())})};function yP(t,e){return{set(n,r,o){if(e[n]===void 0)return this;const i=r?r.call(null,e[n]):e[n];return o?o.call(null,i):typeof t[n]=="function"?t[n](i):t[n]=i,this},setAsync(n,r,o){return hP(this,void 0,void 0,function*(){if(e[n]===void 0)return this;const i=r?yield r.call(null,e[n]):e[n];return o?o.call(null,i):typeof t[n]=="function"?t[n](i):t[n]=i,this})}}}const sd=Math.PI/180,Xa=64,Qc=2048;function gP(t){return t.text}function mP(){return"serif"}function DO(){return"normal"}function bP(t){return t.value}function vP(){return~~(Math.random()*2)*90}function OP(){return 1}function xP(){}function _P(t,e,n,r){if(e.sprite)return;const o=t.context,i=t.ratio;o.clearRect(0,0,(Xa<<5)/i,Qc/i);let a=0,s=0,l=0;const c=n.length;for(--r;++r<c;){e=n[r],o.save(),o.font=e.style+" "+e.weight+" "+~~((e.size+1)/i)+"px "+e.font;let d=o.measureText(e.text+"m").width*i,p=e.size<<1;if(e.rotate){const h=Math.sin(e.rotate*sd),y=Math.cos(e.rotate*sd),g=d*y,m=d*h,b=p*y,v=p*h;d=Math.max(Math.abs(g+v),Math.abs(g-v))+31>>5<<5,p=~~Math.max(Math.abs(m+b),Math.abs(m-b))}else d=d+31>>5<<5;if(p>l&&(l=p),a+d>=Xa<<5&&(a=0,s+=l,l=0),s+p>=Qc)break;o.translate((a+(d>>1))/i,(s+(p>>1))/i),e.rotate&&o.rotate(e.rotate*sd),o.fillText(e.text,0,0),e.padding&&(o.lineWidth=2*e.padding,o.strokeText(e.text,0,0)),o.restore(),e.width=d,e.height=p,e.xoff=a,e.yoff=s,e.x1=d>>1,e.y1=p>>1,e.x0=-e.x1,e.y0=-e.y1,e.hasText=!0,a+=d}const u=o.getImageData(0,0,(Xa<<5)/i,Qc/i).data,f=[];for(;--r>=0;){if(e=n[r],!e.hasText)continue;const d=e.width,p=d>>5;let h=e.y1-e.y0;for(let m=0;m<h*p;m++)f[m]=0;if(a=e.xoff,a==null)return;s=e.yoff;let y=0,g=-1;for(let m=0;m<h;m++){for(let b=0;b<d;b++){const v=p*m+(b>>5),O=u[(s+m)*(Xa<<5)+(a+b)<<2]?1<<31-b%32:0;f[v]|=O,y|=O}y?g=m:(e.y0++,h--,m--,s++)}e.y1=e.y0+g,e.sprite=f.slice(0,(e.y1-e.y0)*p)}}function wP(t,e,n){n>>=5;const r=t.sprite,o=t.width>>5,i=t.x-(o<<4),a=i&127,s=32-a,l=t.y1-t.y0;let c=(t.y+t.y0)*n+(i>>5),u;for(let f=0;f<l;f++){u=0;for(let d=0;d<=o;d++)if((u<<s|(d<o?(u=r[f*o+d])>>>a:0))&e[c+d])return!0;c+=n}return!1}function SP(t,e){const n=t[0],r=t[1];e.x+e.x0<n.x&&(n.x=e.x+e.x0),e.y+e.y0<n.y&&(n.y=e.y+e.y0),e.x+e.x1>r.x&&(r.x=e.x+e.x1),e.y+e.y1>r.y&&(r.y=e.y+e.y1)}function jP(t,e){return t.x+t.x1>e[0].x&&t.x+t.x0<e[1].x&&t.y+t.y1>e[0].y&&t.y+t.y0<e[1].y}function IO(t){const e=t[0]/t[1];return function(n){return[e*(n*=.1)*Math.cos(n),n*Math.sin(n)]}}function EP(t){const n=4*t[0]/t[1];let r=0,o=0;return function(i){const a=i<0?-1:1;switch(Math.sqrt(1+4*a*i)-a&3){case 0:r+=n;break;case 1:o+=4;break;case 2:r-=n;break;default:o-=4;break}return[r,o]}}function FO(t){const e=[];let n=-1;for(;++n<t;)e[n]=0;return e}function AP(){return document.createElement("canvas")}function Ir(t){return typeof t=="function"?t:function(){return t}}const MP={archimedean:IO,rectangular:EP};function kP(){let t=[256,256],e=gP,n=mP,r=bP,o=DO,i=vP,a=OP,s=IO,l=Math.random,c=xP,u=[],f=null,d=1/0,p=AP;const h=DO,y={};y.start=function(){const[b,v]=t,O=g(p()),x=y.board?y.board:FO((t[0]>>5)*t[1]),w=u.length,j=[],E=u.map(function(F,A,T){return F.text=e.call(this,F,A,T),F.font=n.call(this,F,A,T),F.style=h.call(this,F,A,T),F.weight=o.call(this,F,A,T),F.rotate=i.call(this,F,A,T),F.size=~~r.call(this,F,A,T),F.padding=a.call(this,F,A,T),F}).sort(function(F,A){return A.size-F.size});let M=-1,R=y.board?[{x:0,y:0},{x:b,y:v}]:void 0;f&&clearInterval(f),f=setInterval(D,0),D();function D(){const F=Date.now();for(;Date.now()-F<d&&++M<w;){const A=E[M];A.x=b*(l()+.5)>>1,A.y=v*(l()+.5)>>1,_P(O,A,E,M),A.hasText&&m(x,A,R)&&(c.call(null,"word",{cloud:y,word:A}),j.push(A),R?y.hasImage||SP(R,A):R=[{x:A.x+A.x0,y:A.y+A.y0},{x:A.x+A.x1,y:A.y+A.y1}],A.x-=t[0]>>1,A.y-=t[1]>>1)}y._tags=j,y._bounds=R,M>=w&&(y.stop(),c.call(null,"end",{cloud:y,words:j,bounds:R}))}return y},y.stop=function(){return f&&(clearInterval(f),f=null),y};function g(b){b.width=b.height=1;const v=Math.sqrt(b.getContext("2d").getImageData(0,0,1,1).data.length>>2);b.width=(Xa<<5)/v,b.height=Qc/v;const O=b.getContext("2d");return O.fillStyle=O.strokeStyle="red",O.textAlign="center",O.textBaseline="middle",{context:O,ratio:v}}function m(b,v,O){const x=v.x,w=v.y,j=Math.sqrt(t[0]*t[0]+t[1]*t[1]),E=s(t),M=l()<.5?1:-1;let R,D=-M,F,A;for(;(R=E(D+=M))&&(F=~~R[0],A=~~R[1],!(Math.min(Math.abs(F),Math.abs(A))>=j));)if(v.x=x+F,v.y=w+A,!(v.x+v.x0<0||v.y+v.y0<0||v.x+v.x1>t[0]||v.y+v.y1>t[1])&&(!O||!wP(v,b,t[0]))&&(!O||jP(v,O))){const T=v.sprite,P=v.width>>5,k=t[0]>>5,z=v.x-(P<<4),C=z&127,I=32-C,Y=v.y1-v.y0;let X,W=(v.y+v.y0)*k+(z>>5);for(let Z=0;Z<Y;Z++){X=0;for(let K=0;K<=P;K++)b[W+K]|=X<<I|(K<P?(X=T[Z*P+K])>>>C:0);W+=k}return delete v.sprite,!0}return!1}return y.createMask=b=>{const v=document.createElement("canvas"),[O,x]=t;if(!O||!x)return;const w=O>>5,j=FO((O>>5)*x);v.width=O,v.height=x;const E=v.getContext("2d");E.drawImage(b,0,0,b.width,b.height,0,0,O,x);const M=E.getImageData(0,0,O,x).data;for(let R=0;R<x;R++)for(let D=0;D<O;D++){const F=w*R+(D>>5),A=R*O+D<<2,P=M[A]>=250&&M[A+1]>=250&&M[A+2]>=250?1<<31-D%32:0;j[F]|=P}y.board=j,y.hasImage=!0},y.timeInterval=function(b){d=b==null?1/0:b},y.words=function(b){u=b},y.size=function(b=[]){t=[+b[0],+b[1]]},y.text=function(b){e=Ir(b)},y.font=function(b){n=Ir(b)},y.fontWeight=function(b){o=Ir(b)},y.rotate=function(b){i=Ir(b)},y.canvas=function(b){p=Ir(b)},y.spiral=function(b){s=MP[b]||b},y.fontSize=function(b){r=Ir(b)},y.padding=function(b){a=Ir(b)},y.random=function(b){l=Ir(b)},y.on=function(b){c=Ir(b)},y}var PP=function(t,e,n,r){function o(i){return i instanceof n?i:new n(function(a){a(i)})}return new(n||(n=Promise))(function(i,a){function s(u){try{c(r.next(u))}catch(f){a(f)}}function l(u){try{c(r.throw(u))}catch(f){a(f)}}function c(u){u.done?i(u.value):o(u.value).then(s,l)}c((r=r.apply(t,e||[])).next())})},TP=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,r=Object.getOwnPropertySymbols(t);o<r.length;o++)e.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(t,r[o])&&(n[r[o]]=t[r[o]]);return n};const CP={fontSize:[20,60],font:"Impact",padding:2,rotate:function(){return(~~(Math.random()*6)-3)*30}};function LP(t){return new Promise((e,n)=>{if(t instanceof HTMLImageElement){e(t);return}if(typeof t=="string"){const r=new Image;r.crossOrigin="anonymous",r.src=t,r.onload=()=>e(r),r.onerror=()=>{console.error(`'image ${t} load failed !!!'`),n()};return}n()})}function RP(t,e){if(typeof t=="function")return t;if(Array.isArray(t)){const[n,r]=t;if(!e)return()=>(r+n)/2;const[o,i]=e;return i===o?()=>(r+n)/2:({value:a})=>(r-n)/(i-o)*(a-o)+n}return()=>t}const NO=(t,e)=>n=>PP(void 0,void 0,void 0,function*(){const r=Object.assign({},CP,t,{canvas:e.createCanvas}),o=kP();yield yP(o,r).set("fontSize",b=>{const v=n.map(O=>O.value);return RP(b,[Yn(v),he(v)])}).set("font").set("fontStyle").set("fontWeight").set("padding").set("rotate").set("size").set("spiral").set("timeInterval").set("random").set("text").set("on").set("canvas").setAsync("imageMask",LP,o.createMask),o.words([...n]);const i=o.start(),[a,s]=r.size,l=[{x:0,y:0},{x:a,y:s}],{_bounds:c=l,_tags:u,hasImage:f}=i,d=u.map(b=>{var{x:v,y:O,font:x}=b,w=TP(b,["x","y","font"]);return Object.assign(Object.assign({},w),{x:v+a/2,y:O+s/2,fontFamily:x})}),[{x:p,y:h},{x:y,y:g}]=c,m={text:"",value:0,opacity:0,fontSize:0};return d.push(Object.assign(Object.assign({},m),{x:f?0:p,y:f?0:h}),Object.assign(Object.assign({},m),{x:f?a:y,y:f?s:g})),d});NO.props={};function DP(t,e){if(e<0||e>1)throw new Error("alpha must be between 0 and 1.");if(t.length===0)return[];let n=t[0];const r=[];for(const o of t){if(o==null){r.push(o),console.warn("EMA\uFF1AThe value is null or undefined",t);continue}n==null&&(n=o);const i=n*e+(1-e)*o;r.push(i),n=i}return r}const zO=t=>{const{field:e="y",alpha:n=.6,as:r=e}=t;return o=>{const i=o.map(s=>s[e]),a=DP(i,n);return o.map((s,l)=>Object.assign(Object.assign({},s),{[r]:a[l]}))}};zO.props={};const BO=.01;function cd(t){const{min:e,max:n}=t;return[[e[0],e[1]],[n[0],n[1]]]}function $O(t,e,n=BO){const[r,o]=t,[i,a]=e;return r>=i[0]-n&&r<=a[0]+n&&o>=i[1]-n&&o<=a[1]+n}function IP(t,e,n=BO){const[r,o]=t;return!($O(r,e,n)&&$O(o,e,n))}function FP(t,e){const[n,r]=t,[o,i]=e;return n[0]<i[0]&&r[0]>o[0]&&n[1]<i[1]&&r[1]>o[1]}const NP=t=>{const{priority:e}=t;return n=>{const r=[];return e&&n.sort(e),n.forEach(o=>{tc(o);const i=o.getLocalBounds();r.some(s=>FP(cd(i),cd(s.getLocalBounds())))?gu(o):r.push(o)}),n}};function zP([t,e],[n,r]){return r>t&&e>n}function Jc(){const t=new Map;return[r=>t.get(r),(r,o)=>t.set(r,o)]}function BP(t){const e=t.cloneNode(!0),n=e.getElementById("connector");n&&e.removeChild(n);const{min:r,max:o}=e.getRenderBounds();return e.destroy(),{min:r,max:o}}const $P=t=>{const{maxIterations:e=10,maxError:n=.1,padding:r=1}=t;return o=>{const i=o.length;if(i<=1)return o;const[a,s]=Jc(),[l,c]=Jc(),[u,f]=Jc(),[d,p]=Jc();for(const h of o){const{min:y,max:g}=BP(h),[m,b]=y,[v,O]=g;s(h,b),c(h,b),f(h,O-b),p(h,[m,v])}for(let h=0;h<e;h++){o.sort((g,m)=>Ye(l(g),l(m)));let y=0;for(let g=0;g<i-1;g++){const m=o[g];let b=g+1,v;for(;(v=o[b])&&!zP(d(m),d(v));)b+=1;if(v){const O=l(m),x=u(m),w=l(v),j=w-(O+x);if(j<r){const E=(r-j)/2;y=Math.max(y,E),c(m,O-E),c(v,w+E)}}}if(y<n)break}for(const h of o)h.style.y+=l(h)-a(h);return o}},YP=()=>t=>(t.forEach(e=>{tc(e);const n=e.attr("bounds"),r=e.getLocalBounds();IP(cd(r),n)&&gu(e)}),t);function WP(t){return typeof t=="object"?t:(0,ht.lu)(t)}function ld(t){let e=t/255;return e=e<=.03928?e/12.92:Math.pow((e+.055)/1.055,2.4),e}function YO(t,e,n){return .2126*ld(t)+.7152*ld(e)+.0722*ld(n)}function WO(t,e){if(!t||!e||t===e)return 1;const{r:n,g:r,b:o}=t,{r:i,g:a,b:s}=e,l=YO(n,r,o),c=YO(i,a,s);return(Math.max(l,c)+.05)/(Math.min(l,c)+.05)}function ZP(t,e){const n=ii(e,r=>WO(t,WP(r)));return e[n]}const HP=t=>{const{threshold:e=4.5,palette:n=["#000","#fff"]}=t;return r=>(r.forEach(o=>{const i=o.attr("dependentElement").parsedStyle.fill,a=o.parsedStyle.fill;WO(a,i)<e&&o.attr("fill",ZP(i,n))}),r)},XP=(t,e)=>{const[[n,r],[o,i]]=e,[[a,s],[l,c]]=t;let u=0,f=0;return a<n?u=n-a:l>o&&(u=o-l),s<r?f=r-s:c>i&&(f=i-c),[u,f]},GP=()=>(t,{canvas:e,layout:n})=>(t.forEach(r=>{tc(r);const{max:o,min:i}=r.getRenderBounds(),[a,s]=o,[l,c]=i,u=XP([[l,c],[a,s]],[[n.x,n.y],[n.x+n.width,n.y+n.height]]);r.style.connector&&r.style.connectorPoints&&(r.style.connectorPoints[0][0]-=u[0],r.style.connectorPoints[0][1]-=u[1]),r.style.x+=u[0],r.style.y+=u[1]}),t);function UP(){return{"data.fetch":OO,"data.inline":xO,"data.sortBy":_O,"data.sort":wO,"data.filter":SO,"data.pick":jO,"data.rename":EO,"data.fold":AO,"data.slice":MO,"data.custom":kO,"data.map":PO,"data.join":CO,"data.kde":LO,"data.log":RO,"data.wordCloud":NO,"data.ema":zO,"transform.stackY":Z1,"transform.binX":V1,"transform.bin":rd,"transform.dodgeX":q1,"transform.jitter":K1,"transform.jitterX":Q1,"transform.jitterY":J1,"transform.symmetryY":tO,"transform.diffY":eO,"transform.stackEnter":nO,"transform.normalizeY":rO,"transform.select":qc,"transform.selectX":iO,"transform.selectY":aO,"transform.groupX":sO,"transform.groupY":cO,"transform.groupColor":lO,"transform.group":Za,"transform.sortX":uO,"transform.sortY":fO,"transform.sortColor":dO,"transform.flexX":pO,"transform.pack":hO,"transform.sample":yO,"transform.filter":gO,"coordinate.cartesian":Zy,"coordinate.polar":Qi,"coordinate.transpose":Xu,"coordinate.theta":Hy,"coordinate.parallel":Gu,"coordinate.fisheye":Xy,"coordinate.radial":Zl,"coordinate.radar":Gy,"coordinate.helix":Uy,"encode.constant":Vy,"encode.field":qy,"encode.transform":Ky,"encode.column":Qy,"mark.interval":ag,"mark.rect":cg,"mark.line":Rg,"mark.point":im,"mark.text":fm,"mark.cell":pm,"mark.area":xm,"mark.link":df,"mark.image":Dm,"mark.polygon":Bm,"mark.box":Zm,"mark.vector":Xm,"mark.lineX":qm,"mark.lineY":Jm,"mark.connector":rb,"mark.range":ab,"mark.rangeX":lb,"mark.rangeY":db,"mark.path":mb,"mark.shape":Ob,"mark.density":wb,"mark.heatmap":Eb,"mark.wordCloud":gf,"palette.category10":Ab,"palette.category20":Mb,"scale.linear":kb,"scale.ordinal":Tb,"scale.band":Cb,"scale.identity":Lb,"scale.point":Rb,"scale.time":rv,"scale.log":iv,"scale.pow":av,"scale.sqrt":sv,"scale.threshold":cv,"scale.quantile":lv,"scale.quantize":uv,"scale.sequential":dv,"scale.constant":pv,"theme.classic":hv,"theme.classicDark":gv,"theme.academy":mv,"theme.light":Af,"theme.dark":yv,"component.axisX":bv,"component.axisY":vv,"component.legendCategory":Mf,"component.legendContinuous":Qr,"component.legends":Ov,"component.title":_v,"component.sliderX":Sv,"component.sliderY":jv,"component.scrollbarX":Ev,"component.scrollbarY":Av,"animation.scaleInX":kf,"animation.scaleOutX":Zk,"animation.scaleInY":Mv,"animation.scaleOutY":Hk,"animation.waveIn":kv,"animation.fadeIn":Pv,"animation.fadeOut":Tv,"animation.zoomIn":Xk,"animation.zoomOut":Gk,"animation.pathIn":Cv,"animation.morphing":Fv,"animation.growInX":Nv,"animation.growInY":zv,"interaction.elementHighlight":Nc,"interaction.elementHighlightByX":Bv,"interaction.elementHighlightByColor":$v,"interaction.elementSelect":zc,"interaction.elementSelectByX":Yv,"interaction.elementSelectByColor":Wv,"interaction.fisheye":l8,"interaction.chartIndex":Zv,"interaction.tooltip":n1,"interaction.legendFilter":C8,"interaction.legendHighlight":L8,"interaction.brushHighlight":Ff,"interaction.brushXHighlight":z8,"interaction.brushYHighlight":B8,"interaction.brushAxisHighlight":V8,"interaction.brushFilter":$f,"interaction.brushXFilter":J8,"interaction.brushYFilter":t6,"interaction.sliderFilter":y1,"interaction.scrollbarFilter":i6,"interaction.poptip":b1,"interaction.treemapDrillDown":E6,"interaction.elementPointMove":C6,"composition.spaceLayer":L1,"composition.spaceFlex":R1,"composition.facetRect":N1,"composition.repeatMatrix":H6,"composition.facetCircle":K6,"composition.timingKeyframe":B1,"labelTransform.overlapHide":NP,"labelTransform.overlapDodgeY":$P,"labelTransform.overflowHide":YP,"labelTransform.contrastReverse":HP,"labelTransform.exceedAdjust":GP}}var Ga=t=>t;function tl(t,e){t&&HO.hasOwnProperty(t.type)&&HO[t.type](t,e)}var ZO={Feature:function(t,e){tl(t.geometry,e)},FeatureCollection:function(t,e){for(var n=t.features,r=-1,o=n.length;++r<o;)tl(n[r].geometry,e)}},HO={Sphere:function(t,e){e.sphere()},Point:function(t,e){t=t.coordinates,e.point(t[0],t[1],t[2])},MultiPoint:function(t,e){for(var n=t.coordinates,r=-1,o=n.length;++r<o;)t=n[r],e.point(t[0],t[1],t[2])},LineString:function(t,e){ud(t.coordinates,e,0)},MultiLineString:function(t,e){for(var n=t.coordinates,r=-1,o=n.length;++r<o;)ud(n[r],e,0)},Polygon:function(t,e){XO(t.coordinates,e)},MultiPolygon:function(t,e){for(var n=t.coordinates,r=-1,o=n.length;++r<o;)XO(n[r],e)},GeometryCollection:function(t,e){for(var n=t.geometries,r=-1,o=n.length;++r<o;)tl(n[r],e)}};function ud(t,e,n){var r=-1,o=t.length-n,i;for(e.lineStart();++r<o;)i=t[r],e.point(i[0],i[1],i[2]);e.lineEnd()}function XO(t,e){var n=-1,r=t.length;for(e.polygonStart();++n<r;)ud(t[n],e,1);e.polygonEnd()}function Ai(t,e){t&&ZO.hasOwnProperty(t.type)?ZO[t.type](t,e):tl(t,e)}class Fr{constructor(){this._partials=new Float64Array(32),this._n=0}add(e){const n=this._partials;let r=0;for(let o=0;o<this._n&&o<32;o++){const i=n[o],a=e+i,s=Math.abs(e)<Math.abs(i)?e-(a-i):i-(a-e);s&&(n[r++]=s),e=a}return n[r]=e,this._n=r+1,this}valueOf(){const e=this._partials;let n=this._n,r,o,i,a=0;if(n>0){for(a=e[--n];n>0&&(r=a,o=e[--n],a=r+o,i=o-(a-r),!i););n>0&&(i<0&&e[n-1]<0||i>0&&e[n-1]>0)&&(o=i*2,r=a+o,o==r-a&&(a=r))}return a}}function ED(t,e){const n=new Fr;if(e===void 0)for(let r of t)(r=+r)&&n.add(r);else{let r=-1;for(let o of t)(o=+e(o,++r,t))&&n.add(o)}return+n}function AD(t,e){const n=new Fr;let r=-1;return Float64Array.from(t,e===void 0?o=>n.add(+o||0):o=>n.add(+e(o,++r,t)||0))}var Ft=1e-6,GO=1e-12,oe=Math.PI,Ge=oe/2,UO=oe/4,Wn=oe*2,Sn=180/oe,We=oe/180,pe=Math.abs,Mi=Math.atan,Nr=Math.atan2,te=Math.cos,el=Math.ceil,VO=Math.exp,MD=Math.floor,kD=Math.hypot,nl=Math.log,fd=Math.pow,Wt=Math.sin,qn=Math.sign||function(t){return t>0?1:t<0?-1:0},Fn=Math.sqrt,dd=Math.tan;function qO(t){return t>1?0:t<-1?oe:Math.acos(t)}function Kn(t){return t>1?Ge:t<-1?-Ge:Math.asin(t)}function PD(t){return(t=Wt(t/2))*t}function Qn(){}var pd=new Fr,hd=new Fr,KO,QO,yd,gd,fo={point:Qn,lineStart:Qn,lineEnd:Qn,polygonStart:function(){fo.lineStart=VP,fo.lineEnd=KP},polygonEnd:function(){fo.lineStart=fo.lineEnd=fo.point=Qn,pd.add(pe(hd)),hd=new Fr},result:function(){var t=pd/2;return pd=new Fr,t}};function VP(){fo.point=qP}function qP(t,e){fo.point=JO,KO=yd=t,QO=gd=e}function JO(t,e){hd.add(gd*t-yd*e),yd=t,gd=e}function KP(){JO(KO,QO)}var tx=fo,ki=1/0,rl=ki,Ua=-ki,ol=Ua,QP={point:JP,lineStart:Qn,lineEnd:Qn,polygonStart:Qn,polygonEnd:Qn,result:function(){var t=[[ki,rl],[Ua,ol]];return Ua=ol=-(rl=ki=1/0),t}};function JP(t,e){t<ki&&(ki=t),t>Ua&&(Ua=t),e<rl&&(rl=e),e>ol&&(ol=e)}var il=QP,md=0,bd=0,Va=0,al=0,sl=0,Pi=0,vd=0,Od=0,qa=0,ex,nx,jr,Er,ur={point:$o,lineStart:rx,lineEnd:ox,polygonStart:function(){ur.lineStart=nT,ur.lineEnd=rT},polygonEnd:function(){ur.point=$o,ur.lineStart=rx,ur.lineEnd=ox},result:function(){var t=qa?[vd/qa,Od/qa]:Pi?[al/Pi,sl/Pi]:Va?[md/Va,bd/Va]:[NaN,NaN];return md=bd=Va=al=sl=Pi=vd=Od=qa=0,t}};function $o(t,e){md+=t,bd+=e,++Va}function rx(){ur.point=tT}function tT(t,e){ur.point=eT,$o(jr=t,Er=e)}function eT(t,e){var n=t-jr,r=e-Er,o=Fn(n*n+r*r);al+=o*(jr+t)/2,sl+=o*(Er+e)/2,Pi+=o,$o(jr=t,Er=e)}function ox(){ur.point=$o}function nT(){ur.point=oT}function rT(){ix(ex,nx)}function oT(t,e){ur.point=ix,$o(ex=jr=t,nx=Er=e)}function ix(t,e){var n=t-jr,r=e-Er,o=Fn(n*n+r*r);al+=o*(jr+t)/2,sl+=o*(Er+e)/2,Pi+=o,o=Er*t-jr*e,vd+=o*(jr+t),Od+=o*(Er+e),qa+=o*3,$o(jr=t,Er=e)}var ax=ur;function sx(t){this._context=t}sx.prototype={_radius:4.5,pointRadius:function(t){return this._radius=t,this},polygonStart:function(){this._line=0},polygonEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){this._line===0&&this._context.closePath(),this._point=NaN},point:function(t,e){switch(this._point){case 0:{this._context.moveTo(t,e),this._point=1;break}case 1:{this._context.lineTo(t,e);break}default:{this._context.moveTo(t+this._radius,e),this._context.arc(t,e,this._radius,0,Wn);break}}},result:Qn};var xd=new Fr,_d,cx,lx,Ka,Qa,cl={point:Qn,lineStart:function(){cl.point=iT},lineEnd:function(){_d&&ux(cx,lx),cl.point=Qn},polygonStart:function(){_d=!0},polygonEnd:function(){_d=null},result:function(){var t=+xd;return xd=new Fr,t}};function iT(t,e){cl.point=ux,cx=Ka=t,lx=Qa=e}function ux(t,e){Ka-=t,Qa-=e,xd.add(Fn(Ka*Ka+Qa*Qa)),Ka=t,Qa=e}var fx=cl;let dx,ll,px,hx;class yx{constructor(e){this._append=e==null?gx:aT(e),this._radius=4.5,this._=""}pointRadius(e){return this._radius=+e,this}polygonStart(){this._line=0}polygonEnd(){this._line=NaN}lineStart(){this._point=0}lineEnd(){this._line===0&&(this._+="Z"),this._point=NaN}point(e,n){switch(this._point){case 0:{this._append`M${e},${n}`,this._point=1;break}case 1:{this._append`L${e},${n}`;break}default:{if(this._append`M${e},${n}`,this._radius!==px||this._append!==ll){const r=this._radius,o=this._;this._="",this._append`m0,${r}a${r},${r} 0 1,1 0,${-2*r}a${r},${r} 0 1,1 0,${2*r}z`,px=r,ll=this._append,hx=this._,this._=o}this._+=hx;break}}}result(){const e=this._;return this._="",e.length?e:null}}function gx(t){let e=1;this._+=t[0];for(const n=t.length;e<n;++e)this._+=arguments[e]+t[e]}function aT(t){const e=Math.floor(t);if(!(e>=0))throw new RangeError(`invalid digits: ${t}`);if(e>15)return gx;if(e!==dx){const n=mn(10,e);dx=e,ll=function(o){let i=1;this._+=o[0];for(const a=o.length;i<a;++i)this._+=Math.round(arguments[i]*n)/n+o[i]}}return ll}function mx(t,e){let n=3,r=4.5,o,i;function a(s){return s&&(typeof r=="function"&&i.pointRadius(+r.apply(this,arguments)),Ai(s,o(i))),i.result()}return a.area=function(s){return Ai(s,o(tx)),tx.result()},a.measure=function(s){return Ai(s,o(fx)),fx.result()},a.bounds=function(s){return Ai(s,o(il)),il.result()},a.centroid=function(s){return Ai(s,o(ax)),ax.result()},a.projection=function(s){return arguments.length?(o=s==null?(t=null,Ga):(t=s).stream,a):t},a.context=function(s){return arguments.length?(i=s==null?(e=null,new yx(n)):new sx(e=s),typeof r!="function"&&i.pointRadius(r),a):e},a.pointRadius=function(s){return arguments.length?(r=typeof s=="function"?s:(i.pointRadius(+s),+s),a):r},a.digits=function(s){if(!arguments.length)return n;if(s==null)n=null;else{const l=Math.floor(s);if(!(l>=0))throw new RangeError(`invalid digits: ${s}`);n=l}return e===null&&(i=new yx(n)),a},a.projection(t).digits(n).context(e)}function Ti(t,e,n){t=+t,e=+e,n=(o=arguments.length)<2?(e=t,t=0,1):o<3?1:+n;for(var r=-1,o=Math.max(0,Math.ceil((e-t)/n))|0,i=new Array(o);++r<o;)i[r]=t+r*n;return i}function bx(t,e,n){var r=Ti(t,e-Ft,n).concat(e);return function(o){return r.map(function(i){return[o,i]})}}function vx(t,e,n){var r=Ti(t,e-Ft,n).concat(e);return function(o){return r.map(function(i){return[i,o]})}}function sT(){var t,e,n,r,o,i,a,s,l=10,c=l,u=90,f=360,d,p,h,y,g=2.5;function m(){return{type:"MultiLineString",coordinates:b()}}function b(){return Ti(el(r/u)*u,n,u).map(h).concat(Ti(el(s/f)*f,a,f).map(y)).concat(Ti(el(e/l)*l,t,l).filter(function(v){return pe(v%u)>Ft}).map(d)).concat(Ti(el(i/c)*c,o,c).filter(function(v){return pe(v%f)>Ft}).map(p))}return m.lines=function(){return b().map(function(v){return{type:"LineString",coordinates:v}})},m.outline=function(){return{type:"Polygon",coordinates:[h(r).concat(y(a).slice(1),h(n).reverse().slice(1),y(s).reverse().slice(1))]}},m.extent=function(v){return arguments.length?m.extentMajor(v).extentMinor(v):m.extentMinor()},m.extentMajor=function(v){return arguments.length?(r=+v[0][0],n=+v[1][0],s=+v[0][1],a=+v[1][1],r>n&&(v=r,r=n,n=v),s>a&&(v=s,s=a,a=v),m.precision(g)):[[r,s],[n,a]]},m.extentMinor=function(v){return arguments.length?(e=+v[0][0],t=+v[1][0],i=+v[0][1],o=+v[1][1],e>t&&(v=e,e=t,t=v),i>o&&(v=i,i=o,o=v),m.precision(g)):[[e,i],[t,o]]},m.step=function(v){return arguments.length?m.stepMajor(v).stepMinor(v):m.stepMinor()},m.stepMajor=function(v){return arguments.length?(u=+v[0],f=+v[1],m):[u,f]},m.stepMinor=function(v){return arguments.length?(l=+v[0],c=+v[1],m):[l,c]},m.precision=function(v){return arguments.length?(g=+v,d=bx(i,o,90),p=vx(e,t,g),h=bx(s,a,90),y=vx(r,n,g),m):g},m.extentMajor([[-180,-90+Ft],[180,90-Ft]]).extentMinor([[-180,-80-Ft],[180,80+Ft]])}function cT(){return sT()()}function Ox(){var t=[],e;return{point:function(n,r,o){e.push([n,r,o])},lineStart:function(){t.push(e=[])},lineEnd:Qn,rejoin:function(){t.length>1&&t.push(t.pop().concat(t.shift()))},result:function(){var n=t;return t=[],e=null,n}}}function ul(t,e){return pe(t[0]-e[0])<Ft&&pe(t[1]-e[1])<Ft}function fl(t,e,n,r){this.x=t,this.z=e,this.o=n,this.e=r,this.v=!1,this.n=this.p=null}function xx(t,e,n,r,o){var i=[],a=[],s,l;if(t.forEach(function(h){if(!((y=h.length-1)<=0)){var y,g=h[0],m=h[y],b;if(ul(g,m)){if(!g[2]&&!m[2]){for(o.lineStart(),s=0;s<y;++s)o.point((g=h[s])[0],g[1]);o.lineEnd();return}m[0]+=2*Ft}i.push(b=new fl(g,h,null,!0)),a.push(b.o=new fl(g,null,b,!1)),i.push(b=new fl(m,h,null,!1)),a.push(b.o=new fl(m,null,b,!0))}}),!!i.length){for(a.sort(e),_x(i),_x(a),s=0,l=a.length;s<l;++s)a[s].e=n=!n;for(var c=i[0],u,f;;){for(var d=c,p=!0;d.v;)if((d=d.n)===c)return;u=d.z,o.lineStart();do{if(d.v=d.o.v=!0,d.e){if(p)for(s=0,l=u.length;s<l;++s)o.point((f=u[s])[0],f[1]);else r(d.x,d.n.x,1,o);d=d.n}else{if(p)for(u=d.p.z,s=u.length-1;s>=0;--s)o.point((f=u[s])[0],f[1]);else r(d.x,d.p.x,-1,o);d=d.p}d=d.o,u=d.z,p=!p}while(!d.v);o.lineEnd()}}}function _x(t){if(e=t.length){for(var e,n=0,r=t[0],o;++n<e;)r.n=o=t[n],o.p=r,r=o;r.n=o=t[0],o.p=r}}function wd(t){return[Nr(t[1],t[0]),Kn(t[2])]}function Ci(t){var e=t[0],n=t[1],r=te(n);return[r*te(e),r*Wt(e),Wt(n)]}function dl(t,e){return t[0]*e[0]+t[1]*e[1]+t[2]*e[2]}function pl(t,e){return[t[1]*e[2]-t[2]*e[1],t[2]*e[0]-t[0]*e[2],t[0]*e[1]-t[1]*e[0]]}function Sd(t,e){t[0]+=e[0],t[1]+=e[1],t[2]+=e[2]}function hl(t,e){return[t[0]*e,t[1]*e,t[2]*e]}function jd(t){var e=Fn(t[0]*t[0]+t[1]*t[1]+t[2]*t[2]);t[0]/=e,t[1]/=e,t[2]/=e}function Ed(t){return pe(t[0])<=oe?t[0]:qn(t[0])*((pe(t[0])+oe)%Wn-oe)}function lT(t,e){var n=Ed(e),r=e[1],o=Wt(r),i=[Wt(n),-te(n),0],a=0,s=0,l=new Fr;o===1?r=Ge+Ft:o===-1&&(r=-Ge-Ft);for(var c=0,u=t.length;c<u;++c)if(d=(f=t[c]).length)for(var f,d,p=f[d-1],h=Ed(p),y=p[1]/2+UO,g=Wt(y),m=te(y),b=0;b<d;++b,h=O,g=w,m=j,p=v){var v=f[b],O=Ed(v),x=v[1]/2+UO,w=Wt(x),j=te(x),E=O-h,M=E>=0?1:-1,R=M*E,D=R>oe,F=g*w;if(l.add(Nr(F*M*Wt(R),m*j+F*te(R))),a+=D?E+M*Wn:E,D^h>=n^O>=n){var A=pl(Ci(p),Ci(v));jd(A);var T=pl(i,A);jd(T);var P=(D^E>=0?-1:1)*Kn(T[2]);(r>P||r===P&&(A[0]||A[1]))&&(s+=D^E>=0?1:-1)}}return(a<-Ft||a<Ft&&l<-GO)^s&1}function*uT(t){for(const e of t)yield*V2(e)}function wx(t){return Array.from(uT(t))}function Sx(t,e,n,r){return function(o){var i=e(o),a=Ox(),s=e(a),l=!1,c,u,f,d={point:p,lineStart:y,lineEnd:g,polygonStart:function(){d.point=m,d.lineStart=b,d.lineEnd=v,u=[],c=[]},polygonEnd:function(){d.point=p,d.lineStart=y,d.lineEnd=g,u=wx(u);var O=lT(c,r);u.length?(l||(o.polygonStart(),l=!0),xx(u,dT,O,n,o)):O&&(l||(o.polygonStart(),l=!0),o.lineStart(),n(null,null,1,o),o.lineEnd()),l&&(o.polygonEnd(),l=!1),u=c=null},sphere:function(){o.polygonStart(),o.lineStart(),n(null,null,1,o),o.lineEnd(),o.polygonEnd()}};function p(O,x){t(O,x)&&o.point(O,x)}function h(O,x){i.point(O,x)}function y(){d.point=h,i.lineStart()}function g(){d.point=p,i.lineEnd()}function m(O,x){f.push([O,x]),s.point(O,x)}function b(){s.lineStart(),f=[]}function v(){m(f[0][0],f[0][1]),s.lineEnd();var O=s.clean(),x=a.result(),w,j=x.length,E,M,R;if(f.pop(),c.push(f),f=null,!!j){if(O&1){if(M=x[0],(E=M.length-1)>0){for(l||(o.polygonStart(),l=!0),o.lineStart(),w=0;w<E;++w)o.point((R=M[w])[0],R[1]);o.lineEnd()}return}j>1&&O&2&&x.push(x.pop().concat(x.shift())),u.push(x.filter(fT))}}return d}}function fT(t){return t.length>1}function dT(t,e){return((t=t.x)[0]<0?t[1]-Ge-Ft:Ge-t[1])-((e=e.x)[0]<0?e[1]-Ge-Ft:Ge-e[1])}var jx=Sx(function(){return!0},pT,yT,[-oe,-Ge]);function pT(t){var e=NaN,n=NaN,r=NaN,o;return{lineStart:function(){t.lineStart(),o=1},point:function(i,a){var s=i>0?oe:-oe,l=pe(i-e);pe(l-oe)<Ft?(t.point(e,n=(n+a)/2>0?Ge:-Ge),t.point(r,n),t.lineEnd(),t.lineStart(),t.point(s,n),t.point(i,n),o=0):r!==s&&l>=oe&&(pe(e-r)<Ft&&(e-=r*Ft),pe(i-s)<Ft&&(i-=s*Ft),n=hT(e,n,i,a),t.point(r,n),t.lineEnd(),t.lineStart(),t.point(s,n),o=0),t.point(e=i,n=a),r=s},lineEnd:function(){t.lineEnd(),e=n=NaN},clean:function(){return 2-o}}}function hT(t,e,n,r){var o,i,a=Wt(t-n);return pe(a)>Ft?Mi((Wt(e)*(i=te(r))*Wt(n)-Wt(r)*(o=te(e))*Wt(t))/(o*i*a)):(e+r)/2}function yT(t,e,n,r){var o;if(t==null)o=n*Ge,r.point(-oe,o),r.point(0,o),r.point(oe,o),r.point(oe,0),r.point(oe,-o),r.point(0,-o),r.point(-oe,-o),r.point(-oe,0),r.point(-oe,o);else if(pe(t[0]-e[0])>Ft){var i=t[0]<e[0]?oe:-oe;o=n*i/2,r.point(-i,o),r.point(0,o),r.point(i,o)}else r.point(e[0],e[1])}function Ex(t,e,n,r,o,i){if(n){var a=te(e),s=Wt(e),l=r*n;o==null?(o=e+r*Wn,i=e-l/2):(o=Ax(a,o),i=Ax(a,i),(r>0?o<i:o>i)&&(o+=r*Wn));for(var c,u=o;r>0?u>i:u<i;u-=l)c=wd([a,-s*te(u),-s*Wt(u)]),t.point(c[0],c[1])}}function Ax(t,e){e=Ci(e),e[0]-=t,jd(e);var n=qO(-e[1]);return((-e[2]<0?-n:n)+Wn-Ft)%Wn}function TD(){var t=constant([0,0]),e=constant(90),n=constant(2),r,o,i={point:a};function a(l,c){r.push(l=o(l,c)),l[0]*=degrees,l[1]*=degrees}function s(){var l=t.apply(this,arguments),c=e.apply(this,arguments)*radians,u=n.apply(this,arguments)*radians;return r=[],o=rotateRadians(-l[0]*radians,-l[1]*radians,0).invert,Ex(i,c,u,1),l={type:"Polygon",coordinates:[r]},r=o=null,l}return s.center=function(l){return arguments.length?(t=typeof l=="function"?l:constant([+l[0],+l[1]]),s):t},s.radius=function(l){return arguments.length?(e=typeof l=="function"?l:constant(+l),s):e},s.precision=function(l){return arguments.length?(n=typeof l=="function"?l:constant(+l),s):n},s}function gT(t){var e=te(t),n=2*We,r=e>0,o=pe(e)>Ft;function i(u,f,d,p){Ex(p,t,n,d,u,f)}function a(u,f){return te(u)*te(f)>e}function s(u){var f,d,p,h,y;return{lineStart:function(){h=p=!1,y=1},point:function(g,m){var b=[g,m],v,O=a(g,m),x=r?O?0:c(g,m):O?c(g+(g<0?oe:-oe),m):0;if(!f&&(h=p=O)&&u.lineStart(),O!==p&&(v=l(f,b),(!v||ul(f,v)||ul(b,v))&&(b[2]=1)),O!==p)y=0,O?(u.lineStart(),v=l(b,f),u.point(v[0],v[1])):(v=l(f,b),u.point(v[0],v[1],2),u.lineEnd()),f=v;else if(o&&f&&r^O){var w;!(x&d)&&(w=l(b,f,!0))&&(y=0,r?(u.lineStart(),u.point(w[0][0],w[0][1]),u.point(w[1][0],w[1][1]),u.lineEnd()):(u.point(w[1][0],w[1][1]),u.lineEnd(),u.lineStart(),u.point(w[0][0],w[0][1],3)))}O&&(!f||!ul(f,b))&&u.point(b[0],b[1]),f=b,p=O,d=x},lineEnd:function(){p&&u.lineEnd(),f=null},clean:function(){return y|(h&&p)<<1}}}function l(u,f,d){var p=Ci(u),h=Ci(f),y=[1,0,0],g=pl(p,h),m=dl(g,g),b=g[0],v=m-b*b;if(!v)return!d&&u;var O=e*m/v,x=-e*b/v,w=pl(y,g),j=hl(y,O),E=hl(g,x);Sd(j,E);var M=w,R=dl(j,M),D=dl(M,M),F=R*R-D*(dl(j,j)-1);if(!(F<0)){var A=Fn(F),T=hl(M,(-R-A)/D);if(Sd(T,j),T=wd(T),!d)return T;var P=u[0],k=f[0],z=u[1],C=f[1],I;k<P&&(I=P,P=k,k=I);var Y=k-P,X=pe(Y-oe)<Ft,W=X||Y<Ft;if(!X&&C<z&&(I=z,z=C,C=I),W?X?z+C>0^T[1]<(pe(T[0]-P)<Ft?z:C):z<=T[1]&&T[1]<=C:Y>oe^(P<=T[0]&&T[0]<=k)){var Z=hl(M,(-R+A)/D);return Sd(Z,j),[T,wd(Z)]}}}function c(u,f){var d=r?t:oe-t,p=0;return u<-d?p|=1:u>d&&(p|=2),f<-d?p|=4:f>d&&(p|=8),p}return Sx(a,s,i,r?[0,-t]:[-oe,t-oe])}function mT(t,e,n,r,o,i){var a=t[0],s=t[1],l=e[0],c=e[1],u=0,f=1,d=l-a,p=c-s,h;if(h=n-a,!(!d&&h>0)){if(h/=d,d<0){if(h<u)return;h<f&&(f=h)}else if(d>0){if(h>f)return;h>u&&(u=h)}if(h=o-a,!(!d&&h<0)){if(h/=d,d<0){if(h>f)return;h>u&&(u=h)}else if(d>0){if(h<u)return;h<f&&(f=h)}if(h=r-s,!(!p&&h>0)){if(h/=p,p<0){if(h<u)return;h<f&&(f=h)}else if(p>0){if(h>f)return;h>u&&(u=h)}if(h=i-s,!(!p&&h<0)){if(h/=p,p<0){if(h>f)return;h>u&&(u=h)}else if(p>0){if(h<u)return;h<f&&(f=h)}return u>0&&(t[0]=a+u*d,t[1]=s+u*p),f<1&&(e[0]=a+f*d,e[1]=s+f*p),!0}}}}}var Ja=1e9,yl=-Ja;function Mx(t,e,n,r){function o(c,u){return t<=c&&c<=n&&e<=u&&u<=r}function i(c,u,f,d){var p=0,h=0;if(c==null||(p=a(c,f))!==(h=a(u,f))||l(c,u)<0^f>0)do d.point(p===0||p===3?t:n,p>1?r:e);while((p=(p+f+4)%4)!==h);else d.point(u[0],u[1])}function a(c,u){return pe(c[0]-t)<Ft?u>0?0:3:pe(c[0]-n)<Ft?u>0?2:1:pe(c[1]-e)<Ft?u>0?1:0:u>0?3:2}function s(c,u){return l(c.x,u.x)}function l(c,u){var f=a(c,1),d=a(u,1);return f!==d?f-d:f===0?u[1]-c[1]:f===1?c[0]-u[0]:f===2?c[1]-u[1]:u[0]-c[0]}return function(c){var u=c,f=Ox(),d,p,h,y,g,m,b,v,O,x,w,j={point:E,lineStart:F,lineEnd:A,polygonStart:R,polygonEnd:D};function E(P,k){o(P,k)&&u.point(P,k)}function M(){for(var P=0,k=0,z=p.length;k<z;++k)for(var C=p[k],I=1,Y=C.length,X=C[0],W,Z,K=X[0],J=X[1];I<Y;++I)W=K,Z=J,X=C[I],K=X[0],J=X[1],Z<=r?J>r&&(K-W)*(r-Z)>(J-Z)*(t-W)&&++P:J<=r&&(K-W)*(r-Z)<(J-Z)*(t-W)&&--P;return P}function R(){u=f,d=[],p=[],w=!0}function D(){var P=M(),k=w&&P,z=(d=wx(d)).length;(k||z)&&(c.polygonStart(),k&&(c.lineStart(),i(null,null,1,c),c.lineEnd()),z&&xx(d,s,P,i,c),c.polygonEnd()),u=c,d=p=h=null}function F(){j.point=T,p&&p.push(h=[]),x=!0,O=!1,b=v=NaN}function A(){d&&(T(y,g),m&&O&&f.rejoin(),d.push(f.result())),j.point=E,O&&u.lineEnd()}function T(P,k){var z=o(P,k);if(p&&h.push([P,k]),x)y=P,g=k,m=z,x=!1,z&&(u.lineStart(),u.point(P,k));else if(z&&O)u.point(P,k);else{var C=[b=Math.max(yl,Math.min(Ja,b)),v=Math.max(yl,Math.min(Ja,v))],I=[P=Math.max(yl,Math.min(Ja,P)),k=Math.max(yl,Math.min(Ja,k))];mT(C,I,t,e,n,r)?(O||(u.lineStart(),u.point(C[0],C[1])),u.point(I[0],I[1]),z||u.lineEnd(),w=!1):z&&(u.lineStart(),u.point(P,k),w=!1)}b=P,v=k,O=z}return j}}function Ad(t,e){function n(r,o){return r=t(r,o),e(r[0],r[1])}return t.invert&&e.invert&&(n.invert=function(r,o){return r=e.invert(r,o),r&&t.invert(r[0],r[1])}),n}function Md(t,e){return pe(t)>oe&&(t-=Math.round(t/Wn)*Wn),[t,e]}Md.invert=Md;function kx(t,e,n){return(t%=Wn)?e||n?Ad(Tx(t),Cx(e,n)):Tx(t):e||n?Cx(e,n):Md}function Px(t){return function(e,n){return e+=t,pe(e)>oe&&(e-=Math.round(e/Wn)*Wn),[e,n]}}function Tx(t){var e=Px(t);return e.invert=Px(-t),e}function Cx(t,e){var n=te(t),r=Wt(t),o=te(e),i=Wt(e);function a(s,l){var c=te(l),u=te(s)*c,f=Wt(s)*c,d=Wt(l),p=d*n+u*r;return[Nr(f*o-p*i,u*n-d*r),Kn(p*o+f*i)]}return a.invert=function(s,l){var c=te(l),u=te(s)*c,f=Wt(s)*c,d=Wt(l),p=d*o-f*i;return[Nr(f*o+d*i,u*n+p*r),Kn(p*n-u*r)]},a}function bT(t){t=kx(t[0]*We,t[1]*We,t.length>2?t[2]*We:0);function e(n){return n=t(n[0]*We,n[1]*We),n[0]*=Sn,n[1]*=Sn,n}return e.invert=function(n){return n=t.invert(n[0]*We,n[1]*We),n[0]*=Sn,n[1]*=Sn,n},e}function CD(t){return{stream:ts(t)}}function ts(t){return function(e){var n=new kd;for(var r in t)n[r]=t[r];return n.stream=e,n}}function kd(){}kd.prototype={constructor:kd,point:function(t,e){this.stream.point(t,e)},sphere:function(){this.stream.sphere()},lineStart:function(){this.stream.lineStart()},lineEnd:function(){this.stream.lineEnd()},polygonStart:function(){this.stream.polygonStart()},polygonEnd:function(){this.stream.polygonEnd()}};function Pd(t,e,n){var r=t.clipExtent&&t.clipExtent();return t.scale(150).translate([0,0]),r!=null&&t.clipExtent(null),Ai(n,t.stream(il)),e(il.result()),r!=null&&t.clipExtent(r),t}function gl(t,e,n){return Pd(t,function(r){var o=e[1][0]-e[0][0],i=e[1][1]-e[0][1],a=Math.min(o/(r[1][0]-r[0][0]),i/(r[1][1]-r[0][1])),s=+e[0][0]+(o-a*(r[1][0]+r[0][0]))/2,l=+e[0][1]+(i-a*(r[1][1]+r[0][1]))/2;t.scale(150*a).translate([s,l])},n)}function Td(t,e,n){return gl(t,[[0,0],e],n)}function Cd(t,e,n){return Pd(t,function(r){var o=+e,i=o/(r[1][0]-r[0][0]),a=(o-i*(r[1][0]+r[0][0]))/2,s=-i*r[0][1];t.scale(150*i).translate([a,s])},n)}function Ld(t,e,n){return Pd(t,function(r){var o=+e,i=o/(r[1][1]-r[0][1]),a=-i*r[0][0],s=(o-i*(r[1][1]+r[0][1]))/2;t.scale(150*i).translate([a,s])},n)}var Lx=16,vT=te(30*We);function Rx(t,e){return+e?xT(t,e):OT(t)}function OT(t){return ts({point:function(e,n){e=t(e,n),this.stream.point(e[0],e[1])}})}function xT(t,e){function n(r,o,i,a,s,l,c,u,f,d,p,h,y,g){var m=c-r,b=u-o,v=m*m+b*b;if(v>4*e&&y--){var O=a+d,x=s+p,w=l+h,j=Fn(O*O+x*x+w*w),E=Kn(w/=j),M=pe(pe(w)-1)<Ft||pe(i-f)<Ft?(i+f)/2:Nr(x,O),R=t(M,E),D=R[0],F=R[1],A=D-r,T=F-o,P=b*A-m*T;(P*P/v>e||pe((m*A+b*T)/v-.5)>.3||a*d+s*p+l*h<vT)&&(n(r,o,i,a,s,l,D,F,M,O/=j,x/=j,w,y,g),g.point(D,F),n(D,F,M,O,x,w,c,u,f,d,p,h,y,g))}}return function(r){var o,i,a,s,l,c,u,f,d,p,h,y,g={point:m,lineStart:b,lineEnd:O,polygonStart:function(){r.polygonStart(),g.lineStart=x},polygonEnd:function(){r.polygonEnd(),g.lineStart=b}};function m(E,M){E=t(E,M),r.point(E[0],E[1])}function b(){f=NaN,g.point=v,r.lineStart()}function v(E,M){var R=Ci([E,M]),D=t(E,M);n(f,d,u,p,h,y,f=D[0],d=D[1],u=E,p=R[0],h=R[1],y=R[2],Lx,r),r.point(f,d)}function O(){g.point=m,r.lineEnd()}function x(){b(),g.point=w,g.lineEnd=j}function w(E,M){v(o=E,M),i=f,a=d,s=p,l=h,c=y,g.point=v}function j(){n(f,d,u,p,h,y,i,a,o,s,l,c,Lx,r),g.lineEnd=O,O()}return g}}var _T=ts({point:function(t,e){this.stream.point(t*We,e*We)}});function wT(t){return ts({point:function(e,n){var r=t(e,n);return this.stream.point(r[0],r[1])}})}function ST(t,e,n,r,o){function i(a,s){return a*=r,s*=o,[e+t*a,n-t*s]}return i.invert=function(a,s){return[(a-e)/t*r,(n-s)/t*o]},i}function Dx(t,e,n,r,o,i){if(!i)return ST(t,e,n,r,o);var a=te(i),s=Wt(i),l=a*t,c=s*t,u=a/t,f=s/t,d=(s*n-a*e)/t,p=(s*e+a*n)/t;function h(y,g){return y*=r,g*=o,[l*y-c*g+e,n-c*y-l*g]}return h.invert=function(y,g){return[r*(u*y-f*g+d),o*(p-f*y-u*g)]},h}function Ar(t){return Rd(function(){return t})()}function Rd(t){var e,n=150,r=480,o=250,i=0,a=0,s=0,l=0,c=0,u,f=0,d=1,p=1,h=null,y=jx,g=null,m,b,v,O=Ga,x=.5,w,j,E,M,R;function D(P){return E(P[0]*We,P[1]*We)}function F(P){return P=E.invert(P[0],P[1]),P&&[P[0]*Sn,P[1]*Sn]}D.stream=function(P){return M&&R===P?M:M=_T(wT(u)(y(w(O(R=P)))))},D.preclip=function(P){return arguments.length?(y=P,h=void 0,T()):y},D.postclip=function(P){return arguments.length?(O=P,g=m=b=v=null,T()):O},D.clipAngle=function(P){return arguments.length?(y=+P?gT(h=P*We):(h=null,jx),T()):h*Sn},D.clipExtent=function(P){return arguments.length?(O=P==null?(g=m=b=v=null,Ga):Mx(g=+P[0][0],m=+P[0][1],b=+P[1][0],v=+P[1][1]),T()):g==null?null:[[g,m],[b,v]]},D.scale=function(P){return arguments.length?(n=+P,A()):n},D.translate=function(P){return arguments.length?(r=+P[0],o=+P[1],A()):[r,o]},D.center=function(P){return arguments.length?(i=P[0]%360*We,a=P[1]%360*We,A()):[i*Sn,a*Sn]},D.rotate=function(P){return arguments.length?(s=P[0]%360*We,l=P[1]%360*We,c=P.length>2?P[2]%360*We:0,A()):[s*Sn,l*Sn,c*Sn]},D.angle=function(P){return arguments.length?(f=P%360*We,A()):f*Sn},D.reflectX=function(P){return arguments.length?(d=P?-1:1,A()):d<0},D.reflectY=function(P){return arguments.length?(p=P?-1:1,A()):p<0},D.precision=function(P){return arguments.length?(w=Rx(j,x=P*P),T()):Fn(x)},D.fitExtent=function(P,k){return gl(D,P,k)},D.fitSize=function(P,k){return Td(D,P,k)},D.fitWidth=function(P,k){return Cd(D,P,k)},D.fitHeight=function(P,k){return Ld(D,P,k)};function A(){var P=Dx(n,0,0,d,p,f).apply(null,e(i,a)),k=Dx(n,r-P[0],o-P[1],d,p,f);return u=kx(s,l,c),j=Ad(e,k),E=Ad(u,j),w=Rx(j,x),T()}function T(){return M=R=null,D}return function(){return e=t.apply(this,arguments),D.invert=e.invert&&F,A()}}function Dd(t){var e=0,n=oe/3,r=Rd(t),o=r(e,n);return o.parallels=function(i){return arguments.length?r(e=i[0]*We,n=i[1]*We):[e*Sn,n*Sn]},o}function jT(t){var e=te(t);function n(r,o){return[r*e,Wt(o)/e]}return n.invert=function(r,o){return[r/e,Kn(o*e)]},n}function Ix(t,e){var n=Wt(t),r=(n+Wt(e))/2;if(pe(r)<Ft)return jT(t);var o=1+n*(2*r-n),i=Fn(o)/r;function a(s,l){var c=Fn(o-2*r*Wt(l))/r;return[c*Wt(s*=r),i-c*te(s)]}return a.invert=function(s,l){var c=i-l,u=Nr(s,pe(c))*qn(c);return c*r<0&&(u-=oe*qn(s)*qn(c)),[u/r,Kn((o-(s*s+c*c)*r*r)/(2*r))]},a}function ml(){return Dd(Ix).scale(155.424).center([0,33.6442])}function Fx(){return ml().parallels([29.5,45.5]).scale(1070).translate([480,250]).rotate([96,0]).center([-.6,38.7])}function ET(t){var e=t.length;return{point:function(n,r){for(var o=-1;++o<e;)t[o].point(n,r)},sphere:function(){for(var n=-1;++n<e;)t[n].sphere()},lineStart:function(){for(var n=-1;++n<e;)t[n].lineStart()},lineEnd:function(){for(var n=-1;++n<e;)t[n].lineEnd()},polygonStart:function(){for(var n=-1;++n<e;)t[n].polygonStart()},polygonEnd:function(){for(var n=-1;++n<e;)t[n].polygonEnd()}}}function AT(){var t,e,n=Fx(),r,o=ml().rotate([154,0]).center([-2,58.5]).parallels([55,65]),i,a=ml().rotate([157,0]).center([-3,19.9]).parallels([8,18]),s,l,c={point:function(d,p){l=[d,p]}};function u(d){var p=d[0],h=d[1];return l=null,r.point(p,h),l||(i.point(p,h),l)||(s.point(p,h),l)}u.invert=function(d){var p=n.scale(),h=n.translate(),y=(d[0]-h[0])/p,g=(d[1]-h[1])/p;return(g>=.12&&g<.234&&y>=-.425&&y<-.214?o:g>=.166&&g<.234&&y>=-.214&&y<-.115?a:n).invert(d)},u.stream=function(d){return t&&e===d?t:t=ET([n.stream(e=d),o.stream(d),a.stream(d)])},u.precision=function(d){return arguments.length?(n.precision(d),o.precision(d),a.precision(d),f()):n.precision()},u.scale=function(d){return arguments.length?(n.scale(d),o.scale(d*.35),a.scale(d),u.translate(n.translate())):n.scale()},u.translate=function(d){if(!arguments.length)return n.translate();var p=n.scale(),h=+d[0],y=+d[1];return r=n.translate(d).clipExtent([[h-.455*p,y-.238*p],[h+.455*p,y+.238*p]]).stream(c),i=o.translate([h-.307*p,y+.201*p]).clipExtent([[h-.425*p+Ft,y+.12*p+Ft],[h-.214*p-Ft,y+.234*p-Ft]]).stream(c),s=a.translate([h-.205*p,y+.212*p]).clipExtent([[h-.214*p+Ft,y+.166*p+Ft],[h-.115*p-Ft,y+.234*p-Ft]]).stream(c),f()},u.fitExtent=function(d,p){return gl(u,d,p)},u.fitSize=function(d,p){return Td(u,d,p)},u.fitWidth=function(d,p){return Cd(u,d,p)},u.fitHeight=function(d,p){return Ld(u,d,p)};function f(){return t=e=null,u}return u.scale(1070)}function Nx(t){return function(e,n){var r=te(e),o=te(n),i=t(r*o);return i===1/0?[2,0]:[i*o*Wt(e),i*Wt(n)]}}function es(t){return function(e,n){var r=Fn(e*e+n*n),o=t(r),i=Wt(o),a=te(o);return[Nr(e*i,r*a),Kn(r&&n*i/r)]}}var Id=Nx(function(t){return Fn(2/(1+t))});Id.invert=es(function(t){return 2*Kn(t/2)});function MT(){return Ar(Id).scale(124.75).clipAngle(180-.001)}var Fd=Nx(function(t){return(t=qO(t))&&t/Wt(t)});Fd.invert=es(function(t){return t});function kT(){return Ar(Fd).scale(79.4188).clipAngle(180-.001)}function ns(t,e){return[t,nl(dd((Ge+e)/2))]}ns.invert=function(t,e){return[t,2*Mi(VO(e))-Ge]};function PT(){return zx(ns).scale(961/Wn)}function zx(t){var e=Ar(t),n=e.center,r=e.scale,o=e.translate,i=e.clipExtent,a=null,s,l,c;e.scale=function(f){return arguments.length?(r(f),u()):r()},e.translate=function(f){return arguments.length?(o(f),u()):o()},e.center=function(f){return arguments.length?(n(f),u()):n()},e.clipExtent=function(f){return arguments.length?(f==null?a=s=l=c=null:(a=+f[0][0],s=+f[0][1],l=+f[1][0],c=+f[1][1]),u()):a==null?null:[[a,s],[l,c]]};function u(){var f=oe*r(),d=e(bT(e.rotate()).invert([0,0]));return i(a==null?[[d[0]-f,d[1]-f],[d[0]+f,d[1]+f]]:t===ns?[[Math.max(d[0]-f,a),s],[Math.min(d[0]+f,l),c]]:[[a,Math.max(d[1]-f,s)],[l,Math.min(d[1]+f,c)]])}return u()}function bl(t){return dd((Ge+t)/2)}function Bx(t,e){var n=te(t),r=t===e?Wt(t):nl(n/te(e))/nl(bl(e)/bl(t)),o=n*fd(bl(t),r)/r;if(!r)return ns;function i(a,s){o>0?s<-Ge+Ft&&(s=-Ge+Ft):s>Ge-Ft&&(s=Ge-Ft);var l=o/fd(bl(s),r);return[l*Wt(r*a),o-l*te(r*a)]}return i.invert=function(a,s){var l=o-s,c=qn(r)*Fn(a*a+l*l),u=Nr(a,pe(l))*qn(l);return l*r<0&&(u-=oe*qn(a)*qn(l)),[u/r,2*Mi(fd(o/c,1/r))-Ge]},i}function TT(){return Dd(Bx).scale(109.5).parallels([30,30])}function rs(t,e){return[t,e]}rs.invert=rs;function CT(){return Ar(rs).scale(152.63)}function $x(t,e){var n=te(t),r=t===e?Wt(t):(n-te(e))/(e-t),o=n/r+t;if(pe(r)<Ft)return rs;function i(a,s){var l=o-s,c=r*a;return[l*Wt(c),o-l*te(c)]}return i.invert=function(a,s){var l=o-s,c=Nr(a,pe(l))*qn(l);return l*r<0&&(c-=oe*qn(a)*qn(l)),[c/r,o-qn(r)*Fn(a*a+l*l)]},i}function LT(){return Dd($x).scale(131.154).center([0,13.9389])}var os=1.340264,is=-.081106,as=893e-6,ss=.003796,vl=Fn(3)/2,RT=12;function Nd(t,e){var n=Kn(vl*Wt(e)),r=n*n,o=r*r*r;return[t*te(n)/(vl*(os+3*is*r+o*(7*as+9*ss*r))),n*(os+is*r+o*(as+ss*r))]}Nd.invert=function(t,e){for(var n=e,r=n*n,o=r*r*r,i=0,a,s,l;i<RT&&(s=n*(os+is*r+o*(as+ss*r))-e,l=os+3*is*r+o*(7*as+9*ss*r),n-=a=s/l,r=n*n,o=r*r*r,!(pe(a)<GO));++i);return[vl*t*(os+3*is*r+o*(7*as+9*ss*r))/te(n),Kn(Wt(n)/vl)]};function DT(){return Ar(Nd).scale(177.158)}function zd(t,e){var n=te(e),r=te(t)*n;return[n*Wt(t)/r,Wt(e)/r]}zd.invert=es(Mi);function IT(){return Ar(zd).scale(144.049).clipAngle(60)}function FT(){var t=1,e=0,n=0,r=1,o=1,i=0,a,s,l=null,c,u,f,d=1,p=1,h=ts({point:function(O,x){var w=v([O,x]);this.stream.point(w[0],w[1])}}),y=Ga,g,m;function b(){return d=t*r,p=t*o,g=m=null,v}function v(O){var x=O[0]*d,w=O[1]*p;if(i){var j=w*a-x*s;x=x*a+w*s,w=j}return[x+e,w+n]}return v.invert=function(O){var x=O[0]-e,w=O[1]-n;if(i){var j=w*a+x*s;x=x*a-w*s,w=j}return[x/d,w/p]},v.stream=function(O){return g&&m===O?g:g=h(y(m=O))},v.postclip=function(O){return arguments.length?(y=O,l=c=u=f=null,b()):y},v.clipExtent=function(O){return arguments.length?(y=O==null?(l=c=u=f=null,Ga):Mx(l=+O[0][0],c=+O[0][1],u=+O[1][0],f=+O[1][1]),b()):l==null?null:[[l,c],[u,f]]},v.scale=function(O){return arguments.length?(t=+O,b()):t},v.translate=function(O){return arguments.length?(e=+O[0],n=+O[1],b()):[e,n]},v.angle=function(O){return arguments.length?(i=O%360*We,s=Wt(i),a=te(i),b()):i*Sn},v.reflectX=function(O){return arguments.length?(r=O?-1:1,b()):r<0},v.reflectY=function(O){return arguments.length?(o=O?-1:1,b()):o<0},v.fitExtent=function(O,x){return gl(v,O,x)},v.fitSize=function(O,x){return Td(v,O,x)},v.fitWidth=function(O,x){return Cd(v,O,x)},v.fitHeight=function(O,x){return Ld(v,O,x)},v}function Bd(t,e){var n=e*e,r=n*n;return[t*(.8707-.131979*n+r*(-.013791+r*(.003971*n-.001529*r))),e*(1.007226+n*(.015085+r*(-.044475+.028874*n-.005916*r)))]}Bd.invert=function(t,e){var n=e,r=25,o;do{var i=n*n,a=i*i;n-=o=(n*(1.007226+i*(.015085+a*(-.044475+.028874*i-.005916*a)))-e)/(1.007226+i*(.015085*3+a*(-.044475*7+.028874*9*i-.005916*11*a)))}while(pe(o)>Ft&&--r>0);return[t/(.8707+(i=n*n)*(-.131979+i*(-.013791+i*i*i*(.003971-.001529*i)))),n]};function NT(){return Ar(Bd).scale(175.295)}function $d(t,e){return[te(e)*Wt(t),Wt(e)]}$d.invert=es(Kn);function zT(){return Ar($d).scale(249.5).clipAngle(90+Ft)}function Yd(t,e){var n=te(e),r=1+te(t)*n;return[n*Wt(t)/r,Wt(e)/r]}Yd.invert=es(function(t){return 2*Mi(t)});function BT(){return Ar(Yd).scale(250).clipAngle(142)}function Wd(t,e){return[nl(dd((Ge+e)/2)),-t]}Wd.invert=function(t,e){return[-e,2*Mi(VO(t))-Ge]};function $T(){var t=zx(Wd),e=t.center,n=t.rotate;return t.center=function(r){return arguments.length?e([-r[1],r[0]]):(r=e(),[r[1],-r[0]])},t.rotate=function(r){return arguments.length?n([r[0],r[1],r.length>2?r[2]+90:90]):(r=n(),[r[0],r[1],r[2]-90])},n([0,0,90]).scale(159.155)}var YT=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,r=Object.getOwnPropertySymbols(t);o<r.length;o++)e.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(t,r[o])&&(n[r[o]]=t[r[o]]);return n};function WT(t){if(typeof t=="function")return t;const e=`geo${(0,Vr.Z)(t)}`,n=ce[e];if(!n)throw new Error(`Unknown coordinate: ${t}`);return n}function ZT(t){return{type:"FeatureCollection",features:t.flatMap(e=>HT(e).features)}}function HT(t){const e={Point:"geometry",MultiPoint:"geometry",LineString:"geometry",MultiLineString:"geometry",Polygon:"geometry",MultiPolygon:"geometry",GeometryCollection:"geometry",Feature:"feature",FeatureCollection:"featureCollection"};if(!t||!t.type)return null;const n=e[t.type];if(!n)return null;if(n==="geometry")return{type:"FeatureCollection",features:[{type:"Feature",properties:{},geometry:t}]};if(n==="feature")return{type:"FeatureCollection",features:[t]};if(n==="featureCollection")return t}function XT(t,e){var n;for(const[r,o]of Object.entries(e))(n=t[r])===null||n===void 0||n.call(t,o)}function GT(t,e,n,r){const o=()=>{const s=e.filter(Yx);return s.find(c=>c.sphere)?{type:"Sphere"}:ZT(s.filter(c=>!c.sphere).flatMap(c=>c.data.value))},{outline:i=o()}=r,{size:a="fitExtent"}=r;if(a==="fitExtent")return UT(t,i,n);if(a==="fitWidth")return VT(t,i,n)}function UT(t,e,n){const{x:r,y:o,width:i,height:a}=n;t.fitExtent([[r,o],[i,a]],e)}function VT(t,e,n){const{width:r,height:o}=n,[[i,a],[s,l]]=mx(t.fitWidth(r,e)).bounds(e),c=Math.ceil(l-a),u=Math.min(Math.ceil(s-i),c),f=t.scale()*(u-1)/u,[d,p]=t.translate(),h=p+(o-c)/2;t.scale(f).translate([d,h]).precision(.2)}function qT(t){const{data:e}=t;if(Array.isArray(e))return Object.assign(Object.assign({},t),{data:{value:e}});const{type:n}=e;return n==="graticule10"?Object.assign(Object.assign({},t),{data:{value:[cT()]}}):n==="sphere"?Object.assign(Object.assign({},t),{sphere:!0,data:{value:[{type:"Sphere"}]}}):t}function Yx(t){return t.type==="geoPath"}const Wx=()=>t=>{const{children:e,coordinate:n={}}=t;if(!Array.isArray(e))return[];const{type:r="equalEarth"}=n,o=YT(n,["type"]),i=WT(r),a=e.map(qT);let s;function l(){return[["custom",(f,d,p,h)=>{const y=i();GT(y,a,{x:f,y:d,width:p,height:h},o),XT(y,o),s=mx(y);const m=new ir.b({domain:[f,f+p]}),b=new ir.b({domain:[d,d+h]}),v=x=>{const w=y(x);if(!w)return[null,null];const[j,E]=w;return[m.map(j),b.map(E)]},O=x=>{if(!x)return null;const[w,j]=x,E=[m.invert(w),b.invert(j)];return y.invert(E)};return{transform:x=>v(x),untransform:x=>O(x)}}]]}function c(f){const{style:d,tooltip:p={}}=f;return Object.assign(Object.assign({},f),{type:"path",tooltip:gc(p,{title:"id",items:[{channel:"color"}]}),style:Object.assign(Object.assign({},d),{d:h=>s(h)||[]})})}const u=f=>Yx(f)?c(f):f;return[Object.assign(Object.assign({},t),{type:"view",scale:{x:{type:"identity"},y:{type:"identity"}},axis:!1,coordinate:{type:l},children:a.flatMap(u)})]};Wx.props={};var KT=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,r=Object.getOwnPropertySymbols(t);o<r.length;o++)e.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(t,r[o])&&(n[r[o]]=t[r[o]]);return n};const Zx=()=>t=>{const{type:e,data:n,scale:r,encode:o,style:i,animate:a,key:s,state:l}=t,c=KT(t,["type","data","scale","encode","style","animate","key","state"]);return[Object.assign(Object.assign({type:"geoView"},c),{children:[{type:"geoPath",key:`${s}-0`,data:{value:n},scale:r,encode:o,style:i,animate:a,state:l}]})]};Zx.props={};function QT(){return{"composition.geoView":Wx,"composition.geoPath":Zx}}var JT=Q(64681),t7=Q(44575),e7=Q(42655),n7=Q(4507),r7=Q(57280),o7=Q(96207),i7=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,r=Object.getOwnPropertySymbols(t);o<r.length;o++)e.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(t,r[o])&&(n[r[o]]=t[r[o]]);return n};const a7={joint:!0},s7={type:"link",axis:!1,legend:!1,encode:{x:[t=>t.source.x,t=>t.target.x],y:[t=>t.source.y,t=>t.target.y]},style:{stroke:"#999",strokeOpacity:.6}},c7={type:"point",axis:!1,legend:!1,encode:{x:"x",y:"y",size:5,color:"group",shape:"point"},style:{stroke:"#fff"}},l7={text:""};function u7(t,e,n){const{nodes:r,links:o}=t,{joint:i,nodeStrength:a,linkStrength:s}=e,{nodeKey:l=h=>h.id,linkKey:c=h=>h.id}=n,u=(0,JT.Z)(),f=(0,t7.Z)(o).id(Sr(c));typeof a=="function"&&u.strength(a),typeof s=="function"&&f.strength(s);const d=(0,e7.Z)(r).force("link",f).force("charge",u);i?d.force("center",(0,n7.Z)()):d.force("x",(0,r7.Z)()).force("y",(0,o7.Z)()),d.stop();const p=Math.ceil(Math.log(d.alphaMin())/Math.log(1-d.alphaDecay()));for(let h=0;h<p;h++)d.tick();return{nodesData:r,linksData:o}}const Hx=t=>{const{data:e,encode:n={},scale:r,style:o={},layout:i={},nodeLabels:a=[],linkLabels:s=[],animate:l={},tooltip:c={}}=t,{nodeKey:u=w=>w.id,linkKey:f=w=>w.id}=n,d=i7(n,["nodeKey","linkKey"]),p=Object.assign({nodeKey:u,linkKey:f},d),h=at(p,"node"),y=at(p,"link"),{links:g,nodes:m}=Ju(e,p),{nodesData:b,linksData:v}=u7({links:g,nodes:m},(0,et.Z)({},a7,i),p),O=xr(c,"link",{items:[w=>({name:"source",value:Sr(f)(w.source)}),w=>({name:"target",value:Sr(f)(w.target)})]}),x=xr(c,"node",{items:[w=>({name:"key",value:Sr(u)(w)})]},!0);return[(0,et.Z)({},s7,{data:v,encode:y,labels:s,style:at(o,"link"),tooltip:O,animate:_r(l,"link")}),(0,et.Z)({},c7,{data:b,encode:Object.assign({},h),scale:r,style:at(o,"node"),tooltip:x,labels:[Object.assign(Object.assign({},l7),at(o,"label")),...a],animate:_r(l,"link")})]};Hx.props={};function f7(t,e){return t.parent===e.parent?1:2}function Zd(t){var e=t.children;return e?e[0]:t.t}function Hd(t){var e=t.children;return e?e[e.length-1]:t.t}function d7(t,e,n){var r=n/(e.i-t.i);e.c-=r,e.s+=n,t.c+=r,e.z+=n,e.m+=n}function p7(t){for(var e=0,n=0,r=t.children,o=r.length,i;--o>=0;)i=r[o],i.z+=e,i.m+=e,e+=i.s+(n+=i.c)}function h7(t,e,n){return t.a.parent===e.parent?t.a:n}function Ol(t,e){this._=t,this.parent=null,this.children=null,this.A=null,this.a=this,this.z=0,this.m=0,this.c=0,this.s=0,this.t=null,this.i=e}Ol.prototype=Object.create(vi.prototype);function y7(t){for(var e=new Ol(t,0),n,r=[e],o,i,a,s;n=r.pop();)if(i=n._.children)for(n.children=new Array(s=i.length),a=s-1;a>=0;--a)r.push(o=n.children[a]=new Ol(i[a],a)),o.parent=n;return(e.parent=new Ol(null,0)).children=[e],e}function g7(){var t=f7,e=1,n=1,r=null;function o(c){var u=y7(c);if(u.eachAfter(i),u.parent.m=-u.z,u.eachBefore(a),r)c.eachBefore(l);else{var f=c,d=c,p=c;c.eachBefore(function(b){b.x<f.x&&(f=b),b.x>d.x&&(d=b),b.depth>p.depth&&(p=b)});var h=f===d?1:t(f,d)/2,y=h-f.x,g=e/(d.x+h+y),m=n/(p.depth||1);c.eachBefore(function(b){b.x=(b.x+y)*g,b.y=b.depth*m})}return c}function i(c){var u=c.children,f=c.parent.children,d=c.i?f[c.i-1]:null;if(u){p7(c);var p=(u[0].z+u[u.length-1].z)/2;d?(c.z=d.z+t(c._,d._),c.m=c.z-p):c.z=p}else d&&(c.z=d.z+t(c._,d._));c.parent.A=s(c,d,c.parent.A||f[0])}function a(c){c._.x=c.z+c.parent.m,c.m+=c.parent.m}function s(c,u,f){if(u){for(var d=c,p=c,h=u,y=d.parent.children[0],g=d.m,m=p.m,b=h.m,v=y.m,O;h=Hd(h),d=Zd(d),h&&d;)y=Zd(y),p=Hd(p),p.a=c,O=h.z+b-d.z-g+t(h._,d._),O>0&&(d7(h7(h,c,f),c,O),g+=O,m+=O),b+=h.m,g+=d.m,v+=y.m,m+=p.m;h&&!Hd(p)&&(p.t=h,p.m+=b-m),d&&!Zd(y)&&(y.t=d,y.m+=g-v,f=c)}return f}function l(c){c.x*=e,c.y=c.depth*n}return o.separation=function(c){return arguments.length?(t=c,o):t},o.size=function(c){return arguments.length?(r=!1,e=+c[0],n=+c[1],o):r?null:[e,n]},o.nodeSize=function(c){return arguments.length?(r=!0,e=+c[0],n=+c[1],o):r?[e,n]:null},o}function m7(t,e){return t.parent===e.parent?1:2}function b7(t){return t.reduce(v7,0)/t.length}function v7(t,e){return t+e.x}function O7(t){return 1+t.reduce(x7,0)}function x7(t,e){return Math.max(t,e.y)}function _7(t){for(var e;e=t.children;)t=e[0];return t}function w7(t){for(var e;e=t.children;)t=e[e.length-1];return t}function S7(){var t=m7,e=1,n=1,r=!1;function o(i){var a,s=0;i.eachAfter(function(d){var p=d.children;p?(d.x=b7(p),d.y=O7(p)):(d.x=a?s+=t(d,a):0,d.y=0,a=d)});var l=_7(i),c=w7(i),u=l.x-t(l,c)/2,f=c.x+t(c,l)/2;return i.eachAfter(r?function(d){d.x=(d.x-i.x)*e,d.y=(i.y-d.y)*n}:function(d){d.x=(d.x-u)/(f-u)*e,d.y=(1-(i.y?d.y/i.y:1))*n})}return o.separation=function(i){return arguments.length?(t=i,o):t},o.size=function(i){return arguments.length?(r=!1,e=+i[0],n=+i[1],o):r?null:[e,n]},o.nodeSize=function(i){return arguments.length?(r=!0,e=+i[0],n=+i[1],o):r?[e,n]:null},o}const Xx=t=>e=>n=>{const{field:r="value",nodeSize:o,separation:i,sortBy:a,as:s=["x","y"]}=e,[l,c]=s,u=bi(n,h=>h.children).sum(h=>h[r]).sort(a),f=t();f.size([1,1]),o&&f.nodeSize(o),i&&f.separation(i),f(u);const d=[];u.each(h=>{h[l]=h.x,h[c]=h.y,h.name=h.data.name,d.push(h)});const p=u.links();return p.forEach(h=>{h[l]=[h.source[l],h.target[l]],h[c]=[h.source[c],h.target[c]]}),{nodes:d,edges:p}},Gx=t=>Xx(S7)(t);Gx.props={};const Ux=t=>Xx(g7)(t);Ux.props={};const j7={sortBy:(t,e)=>e.value-t.value},E7={axis:!1,legend:!1,type:"point",encode:{x:"x",y:"y",size:2,shape:"point"}},A7={type:"link",encode:{x:"x",y:"y",shape:"smooth"}},M7={text:"",fontSize:10},Vx=t=>{const{data:e,encode:n={},scale:r={},style:o={},layout:i={},nodeLabels:a=[],linkLabels:s=[],animate:l={},tooltip:c={}}=t,u=n==null?void 0:n.value,{nodes:f,edges:d}=Ux(Object.assign(Object.assign(Object.assign({},j7),i),{field:u}))(e),p=xr(c,"node",{title:"name",items:["value"]},!0),h=xr(c,"link",{title:"",items:[y=>({name:"source",value:y.source.name}),y=>({name:"target",value:y.target.name})]});return[(0,et.Z)({},A7,{data:d,encode:at(n,"link"),scale:at(r,"link"),labels:s,style:Object.assign({stroke:"#999"},at(o,"link")),tooltip:h,animate:_r(l,"link")}),(0,et.Z)({},E7,{data:f,scale:at(r,"node"),encode:at(n,"node"),labels:[Object.assign(Object.assign({},M7),at(o,"label")),...a],style:Object.assign({},at(o,"node")),tooltip:p,animate:_r(l,"node")})]};Vx.props={};var k7=1664525,P7=1013904223,qx=4294967296;function T7(){var t=1;return function(){return(t=(k7*t+P7)%qx)/qx}}var C7=Q(31759);function L7(t){return C7(t)==="object"&&"length"in t?t:Array.from(t)}function R7(t,e){for(var n=t.length,r,o;n;)o=e()*n--|0,r=t[n],t[n]=t[o],t[o]=r;return t}function LD(t){return Kx(t,lcg())}function Kx(t,e){for(var n=0,r=(t=R7(Array.from(t),e)).length,o=[],i,a;n<r;)i=t[n],a&&Qx(a,i)?++n:(a=I7(o=D7(o,i)),n=0);return a}function D7(t,e){var n,r;if(Xd(e,t))return[e];for(n=0;n<t.length;++n)if(xl(e,t[n])&&Xd(cs(t[n],e),t))return[t[n],e];for(n=0;n<t.length-1;++n)for(r=n+1;r<t.length;++r)if(xl(cs(t[n],t[r]),e)&&xl(cs(t[n],e),t[r])&&xl(cs(t[r],e),t[n])&&Xd(Jx(t[n],t[r],e),t))return[t[n],t[r],e];throw new Error}function xl(t,e){var n=t.r-e.r,r=e.x-t.x,o=e.y-t.y;return n<0||n*n<r*r+o*o}function Qx(t,e){var n=t.r-e.r+Math.max(t.r,e.r,1)*1e-9,r=e.x-t.x,o=e.y-t.y;return n>0&&n*n>r*r+o*o}function Xd(t,e){for(var n=0;n<e.length;++n)if(!Qx(t,e[n]))return!1;return!0}function I7(t){switch(t.length){case 1:return F7(t[0]);case 2:return cs(t[0],t[1]);case 3:return Jx(t[0],t[1],t[2])}}function F7(t){return{x:t.x,y:t.y,r:t.r}}function cs(t,e){var n=t.x,r=t.y,o=t.r,i=e.x,a=e.y,s=e.r,l=i-n,c=a-r,u=s-o,f=Math.sqrt(l*l+c*c);return{x:(n+i+l/f*u)/2,y:(r+a+c/f*u)/2,r:(f+o+s)/2}}function Jx(t,e,n){var r=t.x,o=t.y,i=t.r,a=e.x,s=e.y,l=e.r,c=n.x,u=n.y,f=n.r,d=r-a,p=r-c,h=o-s,y=o-u,g=l-i,m=f-i,b=r*r+o*o-i*i,v=b-a*a-s*s+l*l,O=b-c*c-u*u+f*f,x=p*h-d*y,w=(h*O-y*v)/(x*2)-r,j=(y*g-h*m)/x,E=(p*v-d*O)/(x*2)-o,M=(d*m-p*g)/x,R=j*j+M*M-1,D=2*(i+w*j+E*M),F=w*w+E*E-i*i,A=-(Math.abs(R)>1e-6?(D+Math.sqrt(D*D-4*R*F))/(2*R):F/D);return{x:r+w+j*A,y:o+E+M*A,r:A}}function t2(t,e,n){var r=t.x-e.x,o,i,a=t.y-e.y,s,l,c=r*r+a*a;c?(i=e.r+n.r,i*=i,l=t.r+n.r,l*=l,i>l?(o=(c+l-i)/(2*c),s=Math.sqrt(Math.max(0,l/c-o*o)),n.x=t.x-o*r-s*a,n.y=t.y-o*a+s*r):(o=(c+i-l)/(2*c),s=Math.sqrt(Math.max(0,i/c-o*o)),n.x=e.x+o*r-s*a,n.y=e.y+o*a+s*r)):(n.x=e.x+n.r,n.y=e.y)}function e2(t,e){var n=t.r+e.r-1e-6,r=e.x-t.x,o=e.y-t.y;return n>0&&n*n>r*r+o*o}function n2(t){var e=t._,n=t.next._,r=e.r+n.r,o=(e.x*n.r+n.x*e.r)/r,i=(e.y*n.r+n.y*e.r)/r;return o*o+i*i}function _l(t){this._=t,this.next=null,this.previous=null}function r2(t,e){if(!(i=(t=L7(t)).length))return 0;var n,r,o,i,a,s,l,c,u,f,d;if(n=t[0],n.x=0,n.y=0,!(i>1))return n.r;if(r=t[1],n.x=-r.r,r.x=n.r,r.y=0,!(i>2))return n.r+r.r;t2(r,n,o=t[2]),n=new _l(n),r=new _l(r),o=new _l(o),n.next=o.previous=r,r.next=n.previous=o,o.next=r.previous=n;t:for(l=3;l<i;++l){t2(n._,r._,o=t[l]),o=new _l(o),c=r.next,u=n.previous,f=r._.r,d=n._.r;do if(f<=d){if(e2(c._,o._)){r=c,n.next=r,r.previous=n,--l;continue t}f+=c._.r,c=c.next}else{if(e2(u._,o._)){n=u,n.next=r,r.previous=n,--l;continue t}d+=u._.r,u=u.previous}while(c!==u.next);for(o.previous=n,o.next=r,n.next=r.previous=r=o,a=n2(n);(o=o.next)!==r;)(s=n2(o))<a&&(n=o,a=s);r=n.next}for(n=[r._],o=r;(o=o.next)!==r;)n.push(o._);for(o=Kx(n,e),l=0;l<i;++l)n=t[l],n.x-=o.x,n.y-=o.y;return o.r}function RD(t){return r2(t,lcg()),t}function N7(t){return Math.sqrt(t.value)}function z7(){var t=null,e=1,n=1,r=Bo;function o(i){var a=T7();return i.x=e/2,i.y=n/2,t?i.eachBefore(o2(t)).eachAfter(Gd(r,.5,a)).eachBefore(i2(1)):i.eachBefore(o2(N7)).eachAfter(Gd(Bo,1,a)).eachAfter(Gd(r,i.r/Math.min(e,n),a)).eachBefore(i2(Math.min(e,n)/(2*i.r))),i}return o.radius=function(i){return arguments.length?(t=Wc(i),o):t},o.size=function(i){return arguments.length?(e=+i[0],n=+i[1],o):[e,n]},o.padding=function(i){return arguments.length?(r=typeof i=="function"?i:Ei(+i),o):r},o}function o2(t){return function(e){e.children||(e.r=Math.max(0,+t(e)||0))}}function Gd(t,e,n){return function(r){if(o=r.children){var o,i,a=o.length,s=t(r)*e||0,l;if(s)for(i=0;i<a;++i)o[i].r+=s;if(l=r2(o,n),s)for(i=0;i<a;++i)o[i].r-=s;r.r=l+s}}}function i2(t){return function(e){var n=e.parent;e.r*=t,n&&(e.x=n.x+t*e.x,e.y=n.y+t*e.y)}}var B7=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,r=Object.getOwnPropertySymbols(t);o<r.length;o++)e.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(t,r[o])&&(n[r[o]]=t[r[o]]);return n};const $7=(t,e)=>({size:[t,e],padding:0,sort:(n,r)=>r.value-n.value}),Y7=(t,e,n)=>({type:"point",axis:!1,legend:!1,scale:{x:{domain:[0,t]},y:{domain:[0,e]},size:{type:"identity"}},encode:{x:"x",y:"y",size:"r",shape:"point"},style:{fill:n.color?void 0:r=>r.height===0?"#ddd":"#fff",stroke:n.color?void 0:r=>r.height===0?"":"#000"}}),W7={text:"",position:"inside",textOverflow:"clip",wordWrap:!0,maxLines:1,wordWrapWidth:t=>t.r*2},Z7={title:t=>t.data.name,items:[{field:"value"}]},H7=(t,e,n)=>{const{value:r}=n,o=(0,Ur.Z)(t)?Wf().path(e.path)(t):bi(t);return r?o.sum(i=>Sr(r)(i)).sort(e.sort):o.count(),z7().size(e.size).padding(e.padding)(o),o.descendants()},a2=(t,e)=>{const{width:n,height:r}=e,{data:o,encode:i={},scale:a={},style:s={},layout:l={},labels:c=[],tooltip:u={}}=t,f=B7(t,["data","encode","scale","style","layout","labels","tooltip"]),d=Y7(n,r,i),p=H7(o,(0,et.Z)({},$7(n,r),l),(0,et.Z)({},d.encode,i)),h=at(s,"label");return(0,et.Z)({},d,Object.assign(Object.assign({data:p,encode:i,scale:a,style:s,labels:[Object.assign(Object.assign({},W7),h),...c]},f),{tooltip:gc(u,Z7),axis:!1}))};a2.props={};function X7(t){return t.target.depth}function G7(t){return t.depth}function U7(t,e){return e-1-t.height}function wl(t,e){return t.sourceLinks.length?t.depth:e-1}function V7(t){return t.targetLinks.length?t.depth:t.sourceLinks.length?Yn(t.sourceLinks,X7)-1:0}function Sl(t){return function(){return t}}function s2(t,e){return jl(t.source,e.source)||t.index-e.index}function c2(t,e){return jl(t.target,e.target)||t.index-e.index}function jl(t,e){return t.y0-e.y0}function Ud(t){return t.value}function q7(t){return t.index}function K7(t){return t.nodes}function Q7(t){return t.links}function l2(t,e){const n=t.get(e);if(!n)throw new Error("missing: "+e);return n}function u2({nodes:t}){for(const e of t){let n=e.y0,r=n;for(const o of e.sourceLinks)o.y0=n+o.width/2,n+=o.width;for(const o of e.targetLinks)o.y1=r+o.width/2,r+=o.width}}function J7(){let t=0,e=0,n=1,r=1,o=24,i=8,a,s=q7,l=wl,c,u,f,d=K7,p=Q7,h=6;function y(k){const z={nodes:d(k),links:p(k)};return g(z),m(z),b(z),v(z),w(z),u2(z),z}y.update=function(k){return u2(k),k},y.nodeId=function(k){return arguments.length?(s=typeof k=="function"?k:Sl(k),y):s},y.nodeAlign=function(k){return arguments.length?(l=typeof k=="function"?k:Sl(k),y):l},y.nodeDepth=function(k){return arguments.length?(c=k,y):c},y.nodeSort=function(k){return arguments.length?(u=k,y):u},y.nodeWidth=function(k){return arguments.length?(o=+k,y):o},y.nodePadding=function(k){return arguments.length?(i=a=+k,y):i},y.nodes=function(k){return arguments.length?(d=typeof k=="function"?k:Sl(k),y):d},y.links=function(k){return arguments.length?(p=typeof k=="function"?k:Sl(k),y):p},y.linkSort=function(k){return arguments.length?(f=k,y):f},y.size=function(k){return arguments.length?(t=e=0,n=+k[0],r=+k[1],y):[n-t,r-e]},y.extent=function(k){return arguments.length?(t=+k[0][0],n=+k[1][0],e=+k[0][1],r=+k[1][1],y):[[t,e],[n,r]]},y.iterations=function(k){return arguments.length?(h=+k,y):h};function g({nodes:k,links:z}){k.forEach((I,Y)=>{I.index=Y,I.sourceLinks=[],I.targetLinks=[]});const C=new Map(k.map(I=>[s(I),I]));if(z.forEach((I,Y)=>{I.index=Y;let{source:X,target:W}=I;typeof X!="object"&&(X=I.source=l2(C,X)),typeof W!="object"&&(W=I.target=l2(C,W)),X.sourceLinks.push(I),W.targetLinks.push(I)}),f!=null)for(const{sourceLinks:I,targetLinks:Y}of k)I.sort(f),Y.sort(f)}function m({nodes:k}){for(const z of k)z.value=z.fixedValue===void 0?Math.max(Hn(z.sourceLinks,Ud),Hn(z.targetLinks,Ud)):z.fixedValue}function b({nodes:k}){const z=k.length;let C=new Set(k),I=new Set,Y=0;for(;C.size;){if(C.forEach(X=>{X.depth=Y;for(const{target:W}of X.sourceLinks)I.add(W)}),++Y>z)throw new Error("circular link");C=I,I=new Set}if(c){const X=Math.max(he(k,Z=>Z.depth)+1,0);let W;for(let Z=0;Z<k.length;Z++)W=k[Z],W.depth=c.call(null,W,X)}}function v({nodes:k}){const z=k.length;let C=new Set(k),I=new Set,Y=0;for(;C.size;){if(C.forEach(X=>{X.height=Y;for(const{source:W}of X.targetLinks)I.add(W)}),++Y>z)throw new Error("circular link");C=I,I=new Set}}function O({nodes:k}){const z=Math.max(he(k,Y=>Y.depth)+1,0),C=(n-t-o)/(z-1),I=new Array(z).fill(0).map(()=>[]);for(const Y of k){const X=Math.max(0,Math.min(z-1,Math.floor(l.call(null,Y,z))));Y.layer=X,Y.x0=t+X*C,Y.x1=Y.x0+o,I[X]?I[X].push(Y):I[X]=[Y]}if(u)for(const Y of I)Y.sort(u);return I}function x(k){const z=Yn(k,C=>(r-e-(C.length-1)*a)/Hn(C,Ud));for(const C of k){let I=e;for(const Y of C){Y.y0=I,Y.y1=I+Y.value*z,I=Y.y1+a;for(const X of Y.sourceLinks)X.width=X.value*z}I=(r-I+a)/(C.length+1);for(let Y=0;Y<C.length;++Y){const X=C[Y];X.y0+=I*(Y+1),X.y1+=I*(Y+1)}A(C)}}function w(k){const z=O(k);a=Math.min(i,(r-e)/(he(z,C=>C.length)-1)),x(z);for(let C=0;C<h;++C){const I=Math.pow(.99,C),Y=Math.max(1-I,(C+1)/h);E(z,I,Y),j(z,I,Y)}}function j(k,z,C){for(let I=1,Y=k.length;I<Y;++I){const X=k[I];for(const W of X){let Z=0,K=0;for(const{source:rt,value:nt}of W.targetLinks){const tt=nt*(W.layer-rt.layer);Z+=T(rt,W)*tt,K+=tt}if(!(K>0))continue;const J=(Z/K-W.y0)*z;W.y0+=J,W.y1+=J,F(W)}u===void 0&&X.sort(jl),X.length&&M(X,C)}}function E(k,z,C){for(let I=k.length,Y=I-2;Y>=0;--Y){const X=k[Y];for(const W of X){let Z=0,K=0;for(const{target:rt,value:nt}of W.sourceLinks){const tt=nt*(rt.layer-W.layer);Z+=P(W,rt)*tt,K+=tt}if(!(K>0))continue;const J=(Z/K-W.y0)*z;W.y0+=J,W.y1+=J,F(W)}u===void 0&&X.sort(jl),X.length&&M(X,C)}}function M(k,z){const C=k.length>>1,I=k[C];D(k,I.y0-a,C-1,z),R(k,I.y1+a,C+1,z),D(k,r,k.length-1,z),R(k,e,0,z)}function R(k,z,C,I){for(;C<k.length;++C){const Y=k[C],X=(z-Y.y0)*I;X>1e-6&&(Y.y0+=X,Y.y1+=X),z=Y.y1+a}}function D(k,z,C,I){for(;C>=0;--C){const Y=k[C],X=(Y.y1-z)*I;X>1e-6&&(Y.y0-=X,Y.y1-=X),z=Y.y0-a}}function F({sourceLinks:k,targetLinks:z}){if(f===void 0){for(const{source:{sourceLinks:C}}of z)C.sort(c2);for(const{target:{targetLinks:C}}of k)C.sort(s2)}}function A(k){if(f===void 0)for(const{sourceLinks:z,targetLinks:C}of k)z.sort(c2),C.sort(s2)}function T(k,z){let C=k.y0-(k.sourceLinks.length-1)*a/2;for(const{target:I,width:Y}of k.sourceLinks){if(I===z)break;C+=Y+a}for(const{source:I,width:Y}of z.targetLinks){if(I===k)break;C-=Y}return C}function P(k,z){let C=z.y0-(z.targetLinks.length-1)*a/2;for(const{source:I,width:Y}of z.targetLinks){if(I===k)break;C+=Y+a}for(const{target:I,width:Y}of k.sourceLinks){if(I===z)break;C-=Y}return C}return y}const t9={nodeAlign:"justify",nodeWidth:.008,nodePadding:.03,nodes:t=>t.nodes,links:t=>t.links,nodeSort:void 0,linkSort:void 0,iterations:6},e9={left:G7,right:U7,center:V7,justify:wl};function n9(t){const e=typeof t;return e==="string"?e9[t]||wl:e==="function"?t:wl}const f2=t=>e=>{const{nodeId:n,nodeSort:r,nodeAlign:o,nodeWidth:i,nodePadding:a,nodeDepth:s,nodes:l,links:c,linkSort:u,iterations:f}=Object.assign({},t9,t),d=J7().nodeSort(r).linkSort(u).links(c).nodes(l).nodeWidth(i).nodePadding(a).nodeDepth(s).nodeAlign(n9(o)).iterations(f).extent([[0,0],[1,1]]);typeof n=="function"&&d.nodeId(n);const p=d(e),{nodes:h,links:y}=p,g=h.map(b=>{const{x0:v,x1:O,y0:x,y1:w}=b;return Object.assign(Object.assign({},b),{x:[v,O,O,v],y:[x,x,w,w]})}),m=y.map(b=>{const{source:v,target:O}=b,x=v.x1,w=O.x0,j=b.width/2;return Object.assign(Object.assign({},b),{x:[x,x,w,w],y:[b.y0+j,b.y0-j,b.y1+j,b.y1-j]})});return{nodes:g,links:m}};f2.props={};var r9=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,r=Object.getOwnPropertySymbols(t);o<r.length;o++)e.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(t,r[o])&&(n[r[o]]=t[r[o]]);return n};const o9={nodeId:t=>t.key,nodeWidth:.02,nodePadding:.02},i9={type:"polygon",axis:!1,legend:!1,encode:{shape:"polygon",x:"x",y:"y"},scale:{x:{type:"identity"},y:{type:"identity"}},style:{stroke:"#000"}},a9={type:"polygon",axis:!1,legend:!1,encode:{shape:"ribbon",x:"x",y:"y"},style:{fillOpacity:.5,stroke:void 0}},s9={textAlign:t=>t.x[0]<.5?"start":"end",position:t=>t.x[0]<.5?"right":"left",fontSize:10},d2=t=>{const{data:e,encode:n={},scale:r,style:o={},layout:i={},nodeLabels:a=[],linkLabels:s=[],animate:l={},tooltip:c={},interaction:u}=t,{links:f,nodes:d}=Ju(e,n),p=at(n,"node"),h=at(n,"link"),{key:y=R=>R.key,color:g=y}=p,{links:m,nodes:b}=f2(Object.assign(Object.assign(Object.assign({},o9),{nodeId:Sr(y)}),i))({links:f,nodes:d}),v=at(o,"label"),{text:O=y,spacing:x=5}=v,w=r9(v,["text","spacing"]),j=Sr(y),E=xr(c,"node",{title:j,items:[{field:"value"}]},!0),M=xr(c,"link",{title:"",items:[R=>({name:"source",value:j(R.source)}),R=>({name:"target",value:j(R.target)})]});return[(0,et.Z)({},i9,{data:b,encode:Object.assign(Object.assign({},p),{color:g}),scale:r,style:at(o,"node"),labels:[Object.assign(Object.assign(Object.assign({},s9),{text:O,dx:R=>R.x[0]<.5?x:-x}),w),...a],tooltip:E,animate:_r(l,"node"),axis:!1,interaction:u}),(0,et.Z)({},a9,{data:m,encode:h,labels:s,style:Object.assign({fill:h.color?void 0:"#aaa",lineWidth:0},at(o,"link")),tooltip:M,animate:_r(l,"link"),interaction:u})]};d2.props={};function c9(t,e){return e.value-t.value}function l9(t,e){return e.frequency-t.frequency}function u9(t,e){return`${t.id}`.localeCompare(`${e.id}`)}function f9(t,e){return`${t.name}`.localeCompare(`${e.name}`)}const d9={y:0,thickness:.05,weight:!1,marginRatio:.1,id:t=>t.id,source:t=>t.source,target:t=>t.target,sourceWeight:t=>t.value||1,targetWeight:t=>t.value||1,sortBy:null};function p9(t){const{y:e,thickness:n,weight:r,marginRatio:o,id:i,source:a,target:s,sourceWeight:l,targetWeight:c,sortBy:u}=Object.assign(Object.assign({},d9),t);function f(g){const m=g.nodes.map(v=>Object.assign({},v)),b=g.edges.map(v=>Object.assign({},v));return d(m,b),p(m,b),h(m,b),y(m,b),{nodes:m,edges:b}}function d(g,m){m.forEach(O=>{O.source=a(O),O.target=s(O),O.sourceWeight=l(O),O.targetWeight=c(O)});const b=ve(m,O=>O.source),v=ve(m,O=>O.target);return g.forEach(O=>{O.id=i(O);const x=b.has(O.id)?b.get(O.id):[],w=v.has(O.id)?v.get(O.id):[];O.frequency=x.length+w.length,O.value=Hn(x,j=>j.sourceWeight)+Hn(w,j=>j.targetWeight)}),{nodes:g,edges:m}}function p(g,m){const b=typeof u=="function"?u:He[u];b&&g.sort(b)}function h(g,m){const b=g.length;if(!b)throw kt("Invalid nodes: it's empty!");if(!r){const x=1/b;return g.forEach((w,j)=>{w.x=(j+.5)*x,w.y=e}),{nodes:g,edges:m}}const v=o/(2*b),O=g.reduce((x,w)=>x+=w.value,0);return g.reduce((x,w)=>{w.weight=w.value/O,w.width=w.weight*(1-o),w.height=n;const j=v+x,E=j+w.width,M=e-n/2,R=M+n;return w.x=[j,E,E,j],w.y=[M,M,R,R],x+w.width+2*v},0),{nodes:g,edges:m}}function y(g,m){const b=new Map(g.map(x=>[x.id,x]));if(!r)return m.forEach(x=>{const w=a(x),j=s(x),E=b.get(w),M=b.get(j);E&&M&&(x.x=[E.x,M.x],x.y=[E.y,M.y])}),{nodes:g,edges:m};m.forEach(x=>{x.x=[0,0,0,0],x.y=[e,e,e,e]});const v=ve(m,x=>x.source),O=ve(m,x=>x.target);g.forEach(x=>{const{edges:w,width:j,x:E,y:M,value:R,id:D}=x,F=v.get(D)||[],A=O.get(D)||[];let T=0;F.map(P=>{const k=P.sourceWeight/R*j;P.x[0]=E[0]+T,P.x[1]=E[0]+T+k,T+=k}),A.forEach(P=>{const k=P.targetWeight/R*j;P.x[3]=E[0]+T,P.x[2]=E[0]+T+k,T+=k})})}return f}const Vd=t=>e=>p9(t)(e);Vd.props={};var p2=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,r=Object.getOwnPropertySymbols(t);o<r.length;o++)e.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(t,r[o])&&(n[r[o]]=t[r[o]]);return n};const qd={y:0,thickness:.05,marginRatio:.1,id:t=>t.key,source:t=>t.source,target:t=>t.target,sourceWeight:t=>t.value||1,targetWeight:t=>t.value||1,sortBy:null},h9={type:"polygon",axis:!1,legend:!1,encode:{shape:"polygon",x:"x",y:"y"},scale:{x:{type:"identity"},y:{type:"identity"}},style:{opacity:1,fillOpacity:1,lineWidth:1}},y9={type:"polygon",axis:!1,legend:!1,encode:{shape:"ribbon",x:"x",y:"y"},style:{opacity:.5,lineWidth:1}},g9={position:"outside",fontSize:10},h2=(t,e)=>{const{data:n,encode:r={},scale:o,style:i={},layout:a={},nodeLabels:s=[],linkLabels:l=[],animate:c={},tooltip:u={}}=t,{nodes:f,links:d}=Ju(n,r),p=at(r,"node"),h=at(r,"link"),{key:y=P=>P.key,color:g=y}=p,{linkEncodeColor:m=P=>P.source}=h,{nodeWidthRatio:b=qd.thickness,nodePaddingRatio:v=qd.marginRatio}=a,O=p2(a,["nodeWidthRatio","nodePaddingRatio"]),{nodes:x,edges:w}=Vd(Object.assign(Object.assign(Object.assign(Object.assign({},qd),{id:Sr(y),thickness:b,marginRatio:v}),O),{weight:!0}))({nodes:f,edges:d}),j=at(i,"label"),{text:E=y}=j,M=p2(j,["text"]),R=xr(u,"node",{title:"",items:[P=>({name:P.key,value:P.value})]},!0),D=xr(u,"link",{title:"",items:[P=>({name:`${P.source} -> ${P.target}`,value:P.value})]}),{height:F,width:A}=e,T=Math.min(F,A);return[(0,et.Z)({},y9,{data:w,encode:Object.assign(Object.assign({},h),{color:m}),labels:l,style:Object.assign({fill:m?void 0:"#aaa"},at(i,"link")),tooltip:D,animate:_r(c,"link")}),(0,et.Z)({},h9,{data:x,encode:Object.assign(Object.assign({},p),{color:g}),scale:o,style:at(i,"node"),coordinate:{type:"polar",outerRadius:(T-20)/T,startAngle:-Math.PI*2,endAngle:0},labels:[Object.assign(Object.assign(Object.assign({},g9),{text:E}),M),...s],tooltip:R,animate:_r(c,"node"),axis:!1})]};h2.props={};var m9=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,r=Object.getOwnPropertySymbols(t);o<r.length;o++)e.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(t,r[o])&&(n[r[o]]=t[r[o]]);return n};const b9=(t,e)=>({tile:"treemapSquarify",ratio:.5*(1+Math.sqrt(5)),size:[t,e],round:!1,ignoreParentValue:!0,padding:0,paddingInner:0,paddingOuter:0,paddingTop:0,paddingRight:0,paddingBottom:0,paddingLeft:0,sort:(n,r)=>r.value-n.value,layer:0}),v9=(t,e)=>({type:"rect",axis:!1,encode:{x:"x",y:"y",key:"id",color:n=>n.path[1]},scale:{x:{domain:[0,t],range:[0,1]},y:{domain:[0,e],range:[0,1]}},style:{stroke:"#fff"},state:{active:{opacity:.6},inactive:{opacity:1}}}),O9={fontSize:10,text:t=>Ra(t.path),position:"inside",fill:"#000",textOverflow:"clip",wordWrap:!0,maxLines:1,wordWrapWidth:t=>t.x1-t.x0,pointerEvents:"none"},x9={title:t=>{var e,n;return(n=(e=t.path)===null||e===void 0?void 0:e.join)===null||n===void 0?void 0:n.call(e,".")},items:[{field:"value"}]},_9={title:t=>Ra(t.path),items:[{field:"value"}]},y2=(t,e)=>{const{width:n,height:r,options:o}=e,{data:i,encode:a={},scale:s,style:l={},layout:c={},labels:u=[],tooltip:f={}}=t,d=m9(t,["data","encode","scale","style","layout","labels","tooltip"]),p=(0,ue.Z)(o,["interaction","treemapDrillDown"]),h=(0,et.Z)({},b9(n,r),c,{layer:p?b=>b.depth===1:c.layer}),[y,g]=A1(i,h,a),m=at(l,"label");return(0,et.Z)({},v9(n,r),Object.assign(Object.assign({data:y,scale:s,style:l,labels:[Object.assign(Object.assign({},O9),m),...u]},d),{encode:a,tooltip:gc(f,x9),axis:!1}),p?{interaction:Object.assign(Object.assign({},d.interaction),{treemapDrillDown:p?Object.assign(Object.assign({},p),{originData:g,layout:h}):void 0}),encode:Object.assign({color:b=>Ra(b.path)},a),tooltip:gc(f,_9)}:{})};y2.props={};function w9(){return{"data.arc":Vd,"data.cluster":Gx,"mark.forceGraph":Hx,"mark.tree":Vx,"mark.pack":a2,"mark.sankey":d2,"mark.chord":h2,"mark.treemap":y2}}var g2=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,r=Object.getOwnPropertySymbols(t);o<r.length;o++)e.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(t,r[o])&&(n[r[o]]=t[r[o]]);return n};function S9(t,e){return Yn(t,n=>e[n])}function j9(t,e){return he(t,n=>e[n])}function m2(t,e){const n=Kd(t,e)*2.5-Qd(t,e)*1.5;return Yn(t,r=>e[r]>=n?e[r]:NaN)}function Kd(t,e){return Gc(t,.25,n=>e[n])}function E9(t,e){return Gc(t,.5,n=>e[n])}function Qd(t,e){return Gc(t,.75,n=>e[n])}function b2(t,e){const n=Qd(t,e)*2.5-Kd(t,e)*1.5;return he(t,r=>e[r]<=n?e[r]:NaN)}function A9(){return(t,e)=>{const{encode:n}=e,{y:r,x:o}=n,{value:i}=r,{value:a}=o;return[Array.from(ve(t,c=>a[+c]).values()).flatMap(c=>{const u=m2(c,i),f=b2(c,i);return c.filter(d=>i[d]<u||i[d]>f)}),e]}}const v2=t=>{const{data:e,encode:n,style:r={},tooltip:o={},transform:i,animate:a}=t,s=g2(t,["data","encode","style","tooltip","transform","animate"]),{point:l=!0}=r,c=g2(r,["point"]),{y:u}=n,f={y:u,y1:u,y2:u,y3:u,y4:u},d={y1:Kd,y2:E9,y3:Qd},p=xr(o,"box",{items:[{channel:"y",name:"min"},{channel:"y1",name:"q1"},{channel:"y2",name:"q2"},{channel:"y3",name:"q3"},{channel:"y4",name:"max"}]},!0),h=xr(o,"point",{title:{channel:"x"},items:[{name:"outlier",channel:"y"}]});if(!l)return Object.assign({type:"box",data:e,transform:[Object.assign(Object.assign({type:"groupX",y:S9},d),{y4:j9})],encode:Object.assign(Object.assign({},n),f),style:c,tooltip:p},s);const y=at(c,"box"),g=at(c,"point");return[Object.assign({type:"box",data:e,transform:[Object.assign(Object.assign({type:"groupX",y:m2},d),{y4:b2})],encode:Object.assign(Object.assign({},n),f),style:y,tooltip:p,animate:_r(a,"box")},s),{type:"point",data:e,transform:[{type:A9}],encode:n,style:Object.assign({},g),tooltip:h,animate:_r(a,"point")}]};v2.props={};const O2=(t,e)=>Math.sqrt(Math.pow(t[0]-e[0],2)+Math.pow(t[1]-e[1],2))/2,M9=(t,e)=>{if(!e)return;const{coordinate:n}=e;if(!(n!=null&&n.getCenter))return;const r=n.getCenter();return(o,i,a)=>{const{document:s}=e.canvas,{color:l,index:c}=i,u=s.createElement("g",{}),f=O2(o[0],o[1]),d=O2(o[0],r)*2,p=s.createElement("path",{style:Object.assign(Object.assign(Object.assign({d:[["M",...o[0]],["A",f,f,0,1,0,...o[1]],["A",d+f*2,d+f*2,0,0,0,...o[2]],["A",f,f,0,1,c===0?0:1,...o[3]],["A",d,d,0,0,1,...o[0]],["Z"]]},a),(0,Gl.Z)(t,["shape","last","first"])),{fill:l||a.color})});return u.appendChild(p),u}};var ls=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,r=Object.getOwnPropertySymbols(t);o<r.length;o++)e.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(t,r[o])&&(n[r[o]]=t[r[o]]);return n};const k9=(t,e)=>{const{shape:n,radius:r}=t,o=ls(t,["shape","radius"]),i=at(o,"pointer"),a=at(o,"pin"),{shape:s}=i,l=ls(i,["shape"]),{shape:c}=a,u=ls(a,["shape"]),{coordinate:f,theme:d}=e;return(p,h)=>{const y=p.map(T=>f.invert(T)),[g,m,b]=P_(f,"polar"),v=f.clone(),{color:O}=h,x=Zl({startAngle:g,endAngle:m,innerRadius:b,outerRadius:r});x.push(["cartesian"]),v.update({transformations:x});const w=y.map(T=>v.map(T)),[j,E]=ou(w),[M,R]=f.getCenter(),D=Object.assign(Object.assign({x1:j,y1:E,x2:M,y2:R,stroke:O},l),o),F=Object.assign(Object.assign({cx:M,cy:R,stroke:O},u),o),A=Tt(new ht.ZA);return Se(s)||(typeof s=="function"?A.append(()=>s(w,h,v,d)):A.append("line").call(jt,D).node()),Se(c)||(typeof c=="function"?A.append(()=>c(w,h,v,d)):A.append("circle").call(jt,F).node()),A.node()}},x2={coordinate:{type:"radial",innerRadius:.9,outerRadius:1,startAngle:-11/10*Math.PI,endAngle:1/10*Math.PI},axis:{x:!1},legend:!1,tooltip:!1,encode:{x:"x",y:"y",color:"color"},scale:{color:{range:["#30BF78","#D0D0D0"]}}},P9={style:{shape:k9,lineWidth:4,pointerLineCap:"round",pinR:10,pinFill:"#fff",radius:.6}},T9={type:"text",style:{x:"50%",y:"60%",textAlign:"center",textBaseline:"middle",fontSize:20,fontWeight:800,fill:"#888"},tooltip:!1};function C9(t){if((0,V.Z)(t)){const e=Math.max(0,Math.min(t,1));return{percent:e,target:e,total:1}}return t}function L9(t,e){const{name:n="score",target:r,total:o,percent:i,thresholds:a=[]}=C9(t),s=i||r,l=i?1:o,c=Object.assign({y:{domain:[0,l]}},e);return a.length?{targetData:[{x:n,y:s,color:"target"}],totalData:a.map((u,f)=>({x:n,y:f>=1?u-a[f-1]:u,color:f})),target:s,total:l,scale:c}:{targetData:[{x:n,y:s,color:"target"}],totalData:[{x:n,y:s,color:"target"},{x:n,y:l-s,color:"total"}],target:s,total:l,scale:c}}function R9(t,{target:e,total:n}){const{content:r}=t;return r?r(e,n):e.toString()}const _2=t=>{const{data:e={},scale:n={},style:r={},animate:o={},transform:i=[]}=t,a=ls(t,["data","scale","style","animate","transform"]),{targetData:s,totalData:l,target:c,total:u,scale:f}=L9(e,n),d=at(r,"text"),{tooltip:p}=d,h=ls(d,["tooltip"]),y=ti(r,["pointer","pin"]),g=at(r,"arc"),m=g.shape;return[(0,et.Z)({},x2,Object.assign({type:"interval",transform:[{type:"stackY"}],data:l,scale:f,style:m==="round"?Object.assign(Object.assign({},g),{shape:M9}):g,animate:typeof o=="object"?at(o,"arc"):o},a)),(0,et.Z)({},x2,P9,Object.assign({type:"point",data:s,scale:f,style:y,animate:typeof o=="object"?at(o,"indicator"):o},a)),(0,et.Z)({},T9,{style:Object.assign({text:R9(h,{target:c,total:u})},h),tooltip:p,animate:typeof o=="object"?at(o,"text"):o})]};_2.props={};const w2=5e3;function S2(t,e,n){return t+(e-t)*n}function D9(t,e,n,r){return e===0?[[t+1/2*n/Math.PI/2,r/2],[t+1/2*n/Math.PI,r],[t+n/4,r]]:e===1?[[t+1/2*n/Math.PI/2*(Math.PI-2),r],[t+1/2*n/Math.PI/2*(Math.PI-1),r/2],[t+n/4,0]]:e===2?[[t+1/2*n/Math.PI/2,-r/2],[t+1/2*n/Math.PI,-r],[t+n/4,-r]]:[[t+1/2*n/Math.PI/2*(Math.PI-2),-r],[t+1/2*n/Math.PI/2*(Math.PI-1),-r/2],[t+n/4,0]]}function I9(t,e,n,r,o,i,a){const s=Math.ceil(2*t/n*4)*4,l=[];let c=r;for(;c<-Math.PI*2;)c+=Math.PI*2;for(;c>0;)c-=Math.PI*2;c=c/Math.PI/2*n;const u=i-t+c-t*2;l.push(["M",u,e]);let f=0;for(let d=0;d<s;++d){const p=d%4,h=D9(d*n/4,p,n,o);l.push(["C",h[0][0]+u,-h[0][1]+e,h[1][0]+u,-h[1][1]+e,h[2][0]+u,-h[2][1]+e]),d===s-1&&(f=h[2][0])}return l.push(["L",f+u,a+t]),l.push(["L",u,a+t]),l.push(["Z"]),l}function F9(t,e,n,r,o,i,a,s,l,c,u){const{fill:f,fillOpacity:d,opacity:p}=o;for(let h=0;h<r;h++){const y=r<=1?1:h/(r-1),g=I9(s,a+s*n,l,0,s/40,t,e),m=u.createElement("path",{style:{d:g,fill:f,opacity:S2(.2,.9,y)*Number(p||d)}});i.appendChild(m);try{if(c===!1)return;const b=[{transform:"translate(0, 0)"},{transform:`translate(${l*2}, 0)`}];m.animate(b,{duration:S2(.5*w2,w2,y)*2,iterations:1/0})}catch(b){console.warn("off-screen group animate error!")}}}function N9(t,e,n){return`
      M ${t} ${e-n} 
      a ${n} ${n} 0 1 0 0 ${n*2}
      a ${n} ${n} 0 1 0 0 ${-n*2}
      Z
    `}function z9(t,e,n){const o=n*.618;return`
      M ${t-o} ${e-n}
      L ${t+o} ${e-n}
      L ${t+o} ${e+n}
      L ${t-o} ${e+n}
      Z
    `}function B9(t,e,n){return`
      M ${t} ${e-n}
      L ${t+n} ${e}
      L ${t} ${e+n}
      L ${t-n} ${e}
      Z
    `}function $9(t,e,n){return`
      M ${t} ${e-n}
      L ${t+n} ${e+n}
      L ${t-n} ${e+n}
      Z
    `}function Y9(t,e,n){const r=n*4/3,o=Math.max(r,n*2),i=r/2,a=t,s=i+e-o/2,l=Math.asin(i/((o-i)*.85)),c=Math.sin(l)*i,u=Math.cos(l)*i,f=a-u,d=s+c,p=t,h=s+i/Math.sin(l);return`
      M ${f} ${d}
      A ${i} ${i} 0 1 1 ${f+u*2} ${d}
      Q ${p} ${h} ${t} ${e+o/2}
      Q ${p} ${h} ${f} ${d}
      Z 
    `}const j2={pin:Y9,rect:z9,circle:N9,diamond:B9,triangle:$9};var E2=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,r=Object.getOwnPropertySymbols(t);o<r.length;o++)e.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(t,r[o])&&(n[r[o]]=t[r[o]]);return n};const W9=(t="circle")=>j2[t]||j2.circle,A2=(t,e)=>{if(!e)return;const{coordinate:n}=e,{liquidOptions:r,styleOptions:o}=t,{liquidShape:i,percent:a}=r,{background:s,outline:l={},wave:c={}}=o,u=E2(o,["background","outline","wave"]),{border:f=2,distance:d=0}=l,p=E2(l,["border","distance"]),{length:h=192,count:y=3}=c;return(g,m,b)=>{const{document:v}=e.canvas,{color:O,fillOpacity:x}=b,w=Object.assign(Object.assign({fill:O},b),u),j=v.createElement("g",{}),[E,M]=n.getCenter(),R=n.getSize(),D=Math.min(...R)/2,A=((0,$s.Z)(i)?i:W9(i))(E,M,D,...R);if(Object.keys(s).length){const k=v.createElement("path",{style:Object.assign({d:A,fill:"#fff"},s)});j.appendChild(k)}if(a>0){const k=v.createElement("path",{style:{d:A}});j.appendChild(k),j.style.clipPath=k,F9(E,M,1-a,y,w,j,k.getBBox().y,D*2,h,!0,v)}const T=v.createElement("path",{style:{d:A,fill:"transparent",lineWidth:f+2*d,stroke:"#fff"}}),P=v.createElement("path",{style:Object.assign(Object.assign(Object.assign({d:A,stroke:O,strokeOpacity:x,lineWidth:f},w),p),{fill:"transparent"})});return j.appendChild(T),j.appendChild(P),j}};A2.props={};var Z9=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,r=Object.getOwnPropertySymbols(t);o<r.length;o++)e.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(t,r[o])&&(n[r[o]]=t[r[o]]);return n};const H9={axis:{x:!1,y:!1},legend:!1,tooltip:!1,encode:{x:"type",y:"percent"},scale:{y:{domain:[0,1]}},style:{shape:A2},animate:{enter:{type:"fadeIn"}}},X9={type:"text",style:{x:"50%",y:"50%",textAlign:"center",textBaseline:"middle",fontSize:20,fontWeight:800,fill:"#888"},animate:{enter:{type:"fadeIn"}}},M2=t=>{const{data:e={},style:n={},animate:r}=t,o=Z9(t,["data","style","animate"]),i=Math.max(0,(0,V.Z)(e)?e:e==null?void 0:e.percent),a=[{percent:i,type:"liquid"}],s=Object.assign(Object.assign({},at(n,"text")),at(n,"content")),l=at(n,"outline"),c=at(n,"wave"),u=at(n,"background");return[(0,et.Z)({},H9,Object.assign({type:"interval",data:a,style:{liquidOptions:{percent:i,liquidShape:n==null?void 0:n.shape},styleOptions:Object.assign(Object.assign({},n),{outline:l,wave:c,background:u})},animate:r},o)),(0,et.Z)({},X9,{style:Object.assign({text:`${Is(i*100)} %`},s),animate:r})]};M2.props={};var zr=Q(52827);const k2=1e-10;function P2(t,e){const n=U9(t),r=n.filter(function(l){return G9(l,t)});let o=0,i=0,a;const s=[];if(r.length>1){const l=V9(r);for(a=0;a<r.length;++a){const u=r[a];u.angle=Math.atan2(u.x-l.x,u.y-l.y)}r.sort(function(u,f){return f.angle-u.angle});let c=r[r.length-1];for(a=0;a<r.length;++a){const u=r[a];i+=(c.x+u.x)*(u.y-c.y);const f={x:(u.x+c.x)/2,y:(u.y+c.y)/2};let d=null;for(let p=0;p<u.parentIndex.length;++p)if(c.parentIndex.indexOf(u.parentIndex[p])>-1){const h=t[u.parentIndex[p]],y=Math.atan2(u.x-h.x,u.y-h.y),g=Math.atan2(c.x-h.x,c.y-h.y);let m=g-y;m<0&&(m+=2*Math.PI);const b=g-m/2;let v=us(f,{x:h.x+h.radius*Math.sin(b),y:h.y+h.radius*Math.cos(b)});v>h.radius*2&&(v=h.radius*2),(d===null||d.width>v)&&(d={circle:h,width:v,p1:u,p2:c})}d!==null&&(s.push(d),o+=Jd(d.circle.radius,d.width),c=u)}}else{let l=t[0];for(a=1;a<t.length;++a)t[a].radius<l.radius&&(l=t[a]);let c=!1;for(a=0;a<t.length;++a)if(us(t[a],l)>Math.abs(l.radius-t[a].radius)){c=!0;break}c?o=i=0:(o=l.radius*l.radius*Math.PI,s.push({circle:l,p1:{x:l.x,y:l.y+l.radius},p2:{x:l.x-k2,y:l.y+l.radius},width:l.radius*2}))}return i/=2,e&&(e.area=o+i,e.arcArea=o,e.polygonArea=i,e.arcs=s,e.innerPoints=r,e.intersectionPoints=n),o+i}function G9(t,e){for(let n=0;n<e.length;++n)if(us(t,e[n])>e[n].radius+k2)return!1;return!0}function U9(t){const e=[];for(let n=0;n<t.length;++n)for(let r=n+1;r<t.length;++r){const o=C2(t[n],t[r]);for(let i=0;i<o.length;++i){const a=o[i];a.parentIndex=[n,r],e.push(a)}}return e}function Jd(t,e){return t*t*Math.acos(1-e/t)-(t-e)*Math.sqrt(e*(2*t-e))}function us(t,e){return Math.sqrt((t.x-e.x)*(t.x-e.x)+(t.y-e.y)*(t.y-e.y))}function T2(t,e,n){if(n>=t+e)return 0;if(n<=Math.abs(t-e))return Math.PI*Math.min(t,e)*Math.min(t,e);const r=t-(n*n-e*e+t*t)/(2*n),o=e-(n*n-t*t+e*e)/(2*n);return Jd(t,r)+Jd(e,o)}function C2(t,e){const n=us(t,e),r=t.radius,o=e.radius;if(n>=r+o||n<=Math.abs(r-o))return[];const i=(r*r-o*o+n*n)/(2*n),a=Math.sqrt(r*r-i*i),s=t.x+i*(e.x-t.x)/n,l=t.y+i*(e.y-t.y)/n,c=-(e.y-t.y)*(a/n),u=-(e.x-t.x)*(a/n);return[{x:s+c,y:l-u},{x:s-c,y:l+u}]}function V9(t){const e={x:0,y:0};for(let n=0;n<t.length;++n)e.x+=t[n].x,e.y+=t[n].y;return e.x/=t.length,e.y/=t.length,e}function q9(t,e){e=e||{},e.maxIterations=e.maxIterations||500;const n=e.initialLayout||tC,r=e.lossFunction||ep;t=K9(t);const o=n(t,e),i=[],a=[];let s;for(s in o)o.hasOwnProperty(s)&&(i.push(o[s].x),i.push(o[s].y),a.push(s));const c=(0,zr.nelderMead)(function(u){const f={};for(let d=0;d<a.length;++d){const p=a[d];f[p]={x:u[2*d],y:u[2*d+1],radius:o[p].radius}}return r(f,t)},i,e).x;for(let u=0;u<a.length;++u)s=a[u],o[s].x=c[2*u],o[s].y=c[2*u+1];return o}const L2=1e-10;function tp(t,e,n){return Math.min(t,e)*Math.min(t,e)*Math.PI<=n+L2?Math.abs(t-e):(0,zr.bisect)(function(r){return T2(t,e,r)-n},0,t+e)}function K9(t){t=t.slice();const e=[],n={};let r,o,i,a;for(r=0;r<t.length;++r){const s=t[r];s.sets.length==1?e.push(s.sets[0]):s.sets.length==2&&(i=s.sets[0],a=s.sets[1],n[[i,a]]=!0,n[[a,i]]=!0)}for(e.sort((s,l)=>s>l?1:-1),r=0;r<e.length;++r)for(i=e[r],o=r+1;o<e.length;++o)a=e[o],[i,a]in n||t.push({sets:[i,a],size:0});return t}function Q9(t,e,n){const r=(0,zr.zerosM)(e.length,e.length),o=(0,zr.zerosM)(e.length,e.length);return t.filter(function(i){return i.sets.length==2}).map(function(i){const a=n[i.sets[0]],s=n[i.sets[1]],l=Math.sqrt(e[a].size/Math.PI),c=Math.sqrt(e[s].size/Math.PI),u=tp(l,c,i.size);r[a][s]=r[s][a]=u;let f=0;i.size+1e-10>=Math.min(e[a].size,e[s].size)?f=1:i.size<=1e-10&&(f=-1),o[a][s]=o[s][a]=f}),{distances:r,constraints:o}}function J9(t,e,n,r){let o=0,i;for(i=0;i<e.length;++i)e[i]=0;for(i=0;i<n.length;++i){const a=t[2*i],s=t[2*i+1];for(let l=i+1;l<n.length;++l){const c=t[2*l],u=t[2*l+1],f=n[i][l],d=r[i][l],p=(c-a)*(c-a)+(u-s)*(u-s),h=Math.sqrt(p),y=p-f*f;d>0&&h<=f||d<0&&h>=f||(o+=2*y*y,e[2*i]+=4*y*(a-c),e[2*i+1]+=4*y*(s-u),e[2*l]+=4*y*(c-a),e[2*l+1]+=4*y*(u-s))}}return o}function tC(t,e){let n=nC(t,e);const r=e.lossFunction||ep;if(t.length>=8){const o=eC(t,e),i=r(o,t),a=r(n,t);i+1e-8<a&&(n=o)}return n}function eC(t,e){e=e||{};const n=e.restarts||10,r=[],o={};let i;for(i=0;i<t.length;++i){const y=t[i];y.sets.length==1&&(o[y.sets[0]]=r.length,r.push(y))}const a=Q9(t,r,o);let s=a.distances;const l=a.constraints,c=(0,zr.norm2)(s.map(zr.norm2))/s.length;s=s.map(function(y){return y.map(function(g){return g/c})});const u=function(y,g){return J9(y,g,s,l)};let f,d;for(i=0;i<n;++i){const y=(0,zr.zeros)(s.length*2).map(Math.random);d=(0,zr.conjugateGradient)(u,y,e),(!f||d.fx<f.fx)&&(f=d)}const p=f.x,h={};for(i=0;i<r.length;++i){const y=r[i];h[y.sets[0]]={x:p[2*i]*c,y:p[2*i+1]*c,radius:Math.sqrt(y.size/Math.PI)}}if(e.history)for(i=0;i<e.history.length;++i)(0,zr.scale)(e.history[i].x,c);return h}function nC(t,e){const n=e&&e.lossFunction?e.lossFunction:ep,r={},o={};let i;for(let f=0;f<t.length;++f){const d=t[f];d.sets.length==1&&(i=d.sets[0],r[i]={x:1e10,y:1e10,rowid:Object.keys(r).length,size:d.size,radius:Math.sqrt(d.size/Math.PI)},o[i]=[])}t=t.filter(function(f){return f.sets.length==2});for(let f=0;f<t.length;++f){const d=t[f];let p=d.hasOwnProperty("weight")?d.weight:1;const h=d.sets[0],y=d.sets[1];d.size+L2>=Math.min(r[h].size,r[y].size)&&(p=0),o[h].push({set:y,size:d.size,weight:p}),o[y].push({set:h,size:d.size,weight:p})}const a=[];for(i in o)if(o.hasOwnProperty(i)){let f=0;for(let d=0;d<o[i].length;++d)f+=o[i][d].size*o[i][d].weight;a.push({set:i,size:f})}function s(f,d){return d.size-f.size}a.sort(s);const l={};function c(f){return f.set in l}function u(f,d){r[d].x=f.x,r[d].y=f.y,l[d]=!0}u({x:0,y:0},a[0].set);for(let f=1;f<a.length;++f){const d=a[f].set,p=o[d].filter(c);if(i=r[d],p.sort(s),p.length===0)throw"ERROR: missing pairwise overlap information";const h=[];for(let m=0;m<p.length;++m){const b=r[p[m].set],v=tp(i.radius,b.radius,p[m].size);h.push({x:b.x+v,y:b.y}),h.push({x:b.x-v,y:b.y}),h.push({y:b.y+v,x:b.x}),h.push({y:b.y-v,x:b.x});for(let O=m+1;O<p.length;++O){const x=r[p[O].set],w=tp(i.radius,x.radius,p[O].size),j=C2({x:b.x,y:b.y,radius:v},{x:x.x,y:x.y,radius:w});for(let E=0;E<j.length;++E)h.push(j[E])}}let y=1e50,g=h[0];for(let m=0;m<h.length;++m){r[d].x=h[m].x,r[d].y=h[m].y;const b=n(r,t);b<y&&(y=b,g=h[m])}u(g,d)}return r}function ep(t,e){let n=0;function r(o){return o.map(function(i){return t[i]})}for(let o=0;o<e.length;++o){const i=e[o];let a;if(i.sets.length==1)continue;if(i.sets.length==2){const l=t[i.sets[0]],c=t[i.sets[1]];a=T2(l.radius,c.radius,us(l,c))}else a=P2(r(i.sets));const s=i.hasOwnProperty("weight")?i.weight:1;n+=s*(a-i.size)*(a-i.size)}return n}function rC(t,e,n){n===null?t.sort(function(o,i){return i.radius-o.radius}):t.sort(n);let r;if(t.length>0){const o=t[0].x,i=t[0].y;for(r=0;r<t.length;++r)t[r].x-=o,t[r].y-=i}if(t.length==2&&distance(t[0],t[1])<Math.abs(t[1].radius-t[0].radius)&&(t[1].x=t[0].x+t[0].radius-t[1].radius-1e-10,t[1].y=t[0].y),t.length>1){const o=Math.atan2(t[1].x,t[1].y)-e;let i,a;const s=Math.cos(o),l=Math.sin(o);for(r=0;r<t.length;++r)i=t[r].x,a=t[r].y,t[r].x=s*i-l*a,t[r].y=l*i+s*a}if(t.length>2){let o=Math.atan2(t[2].x,t[2].y)-e;for(;o<0;)o+=2*Math.PI;for(;o>2*Math.PI;)o-=2*Math.PI;if(o>Math.PI){const i=t[1].y/(1e-10+t[1].x);for(r=0;r<t.length;++r){const a=(t[r].x+i*t[r].y)/(1+i*i);t[r].x=2*a-t[r].x,t[r].y=2*a*i-t[r].y}}}}function oC(t){t.map(function(a){a.parent=a});function e(a){return a.parent!==a&&(a.parent=e(a.parent)),a.parent}function n(a,s){const l=e(a),c=e(s);l.parent=c}for(let a=0;a<t.length;++a)for(let s=a+1;s<t.length;++s){const l=t[a].radius+t[s].radius;distance(t[a],t[s])+1e-10<l&&n(t[s],t[a])}const r={};let o;for(let a=0;a<t.length;++a)o=e(t[a]).parent.setid,o in r||(r[o]=[]),r[o].push(t[a]);t.map(function(a){delete a.parent});const i=[];for(o in r)r.hasOwnProperty(o)&&i.push(r[o]);return i}function np(t){const e=function(n){const r=Math.max.apply(null,t.map(function(i){return i[n]+i.radius})),o=Math.min.apply(null,t.map(function(i){return i[n]-i.radius}));return{max:r,min:o}};return{xRange:e("x"),yRange:e("y")}}function DD(t,e,n){e===null&&(e=Math.PI/2);let r=[],o,i;for(i in t)if(t.hasOwnProperty(i)){const d=t[i];r.push({x:d.x,y:d.y,radius:d.radius,setid:i})}const a=oC(r);for(o=0;o<a.length;++o){rC(a[o],e,n);const d=np(a[o]);a[o].size=(d.xRange.max-d.xRange.min)*(d.yRange.max-d.yRange.min),a[o].bounds=d}a.sort(function(d,p){return p.size-d.size}),r=a[0];let s=r.bounds;const l=(s.xRange.max-s.xRange.min)/50;function c(d,p,h){if(!d)return;const y=d.bounds;let g,m,b;p?g=s.xRange.max-y.xRange.min+l:(g=s.xRange.max-y.xRange.max,b=(y.xRange.max-y.xRange.min)/2-(s.xRange.max-s.xRange.min)/2,b<0&&(g+=b)),h?m=s.yRange.max-y.yRange.min+l:(m=s.yRange.max-y.yRange.max,b=(y.yRange.max-y.yRange.min)/2-(s.yRange.max-s.yRange.min)/2,b<0&&(m+=b));for(let v=0;v<d.length;++v)d[v].x+=g,d[v].y+=m,r.push(d[v])}let u=1;for(;u<a.length;)c(a[u],!0,!1),c(a[u+1],!1,!0),c(a[u+2],!0,!0),u+=3,s=np(r);const f={};for(o=0;o<r.length;++o)f[r[o].setid]=r[o];return f}function iC(t,e,n,r){const o=[],i=[];for(const y in t)t.hasOwnProperty(y)&&(i.push(y),o.push(t[y]));e-=2*r,n-=2*r;const a=np(o),s=a.xRange,l=a.yRange;if(s.max==s.min||l.max==l.min)return console.log("not scaling solution: zero size detected"),t;const c=e/(s.max-s.min),u=n/(l.max-l.min),f=Math.min(u,c),d=(e-(s.max-s.min)*f)/2,p=(n-(l.max-l.min)*f)/2,h={};for(let y=0;y<o.length;++y){const g=o[y];h[i[y]]={radius:f*g.radius,x:r+d+(g.x-s.min)*f,y:r+p+(g.y-l.min)*f}}return h}function aC(t,e,n){const r=[],o=t-n,i=e;return r.push("M",o,i),r.push("A",n,n,0,1,0,o+2*n,i),r.push("A",n,n,0,1,0,o,i),r.join(" ")}function sC(t){const e={};P2(t,e);const n=e.arcs;if(n.length===0)return"M 0 0";if(n.length==1){const r=n[0].circle;return aC(r.x,r.y,r.radius)}else{const r=[`
M`,n[0].p2.x,n[0].p2.y];for(let o=0;o<n.length;++o){const i=n[o],a=i.circle.radius,s=i.width>a;r.push(`
A`,a,a,0,s?1:0,1,i.p1.x,i.p1.y)}return r.join(" ")}}const R2=t=>{const{sets:e="sets",size:n="size",as:r=["key","path"],padding:o=0}=t,[i,a]=r;return s=>{const l=s.map(f=>Object.assign(Object.assign({},f),{sets:f[e],size:f[n],[i]:f.sets.join("&")}));l.sort((f,d)=>f.sets.length-d.sets.length);const c=q9(l);let u;return l.map(f=>{const d=f[e],p=({width:h,height:y})=>{u=u||iC(c,h,y,o);const g=d.map(b=>u[b]);let m=sC(g);return/[zZ]$/.test(m)||(m+=" Z"),m};return Object.assign(Object.assign({},f),{[a]:p})})}};R2.props={};function cC(){return{"data.venn":R2,"mark.boxplot":v2,"mark.gauge":_2,"mark.wordCloud":gf,"mark.liquid":M2}}function lC(){return Object.assign(Object.assign(Object.assign(Object.assign({},QT()),w9()),cC()),UP())}var El=function(){return El=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++){e=arguments[n];for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])}return t},El.apply(this,arguments)},uC=JA(QA,El(El({},lC()),NM())),fs=function(){return fs=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++){e=arguments[n];for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])}return t},fs.apply(this,arguments)},fC=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,r=Object.getOwnPropertySymbols(t);o<r.length;o++)e.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(t,r[o])&&(n[r[o]]=t[r[o]]);return n},dC=["renderer"],D2=["width","height","autoFit","theme","inset","insetLeft","insetRight","insetTop","insetBottom","padding","paddingTop","paddingRight","paddingBottom","paddingLeft","margin","marginTop","marginRight","marginBottom","marginLeft","depth","title","clip","children","type","data","direction"],rp="__transform__",pC="__skipDelCustomKeys__",Yo=function(t,e){return(0,G.isBoolean)(e)?{type:t,available:e}:fs({type:t},e)},op={xField:"encode.x",yField:"encode.y",colorField:"encode.color",angleField:"encode.y",keyField:"encode.key",sizeField:"encode.size",shapeField:"encode.shape",seriesField:"encode.series",positionField:"encode.position",textField:"encode.text",valueField:"encode.value",binField:"encode.x",srcField:"encode.src",linkColorField:"encode.linkColor",fontSizeField:"encode.fontSize",radius:"coordinate.outerRadius",innerRadius:"coordinate.innerRadius",startAngle:"coordinate.startAngle",endAngle:"coordinate.endAngle",focusX:"coordinate.focusX",focusY:"coordinate.focusY",distortionX:"coordinate.distortionX",distortionY:"coordinate.distortionY",visual:"coordinate.visual",stack:{target:"transform",value:function(t){return Yo("stackY",t)}},normalize:{target:"transform",value:function(t){return Yo("normalizeY",t)}},percent:{target:"transform",value:function(t){return Yo("normalizeY",t)}},group:{target:"transform",value:function(t){return Yo("dodgeX",t)}},sort:{target:"transform",value:function(t){return Yo("sortX",t)}},symmetry:{target:"transform",value:function(t){return Yo("symmetryY",t)}},diff:{target:"transform",value:function(t){return Yo("diffY",t)}},meta:{target:"scale",value:function(t){return t}},label:{target:"labels",value:function(t){return t}},shape:"style.shape",connectNulls:{target:"style",value:function(t){return(0,G.isBoolean)(t)?{connect:t}:t}}},ip=["xField","yField","seriesField","colorField","keyField","positionField","meta","tooltip","animate","stack","normalize","percent","group","sort","symmetry","diff"],Al=[{key:"annotations",extend_keys:[]},{key:"line",type:"line",extend_keys:ip},{key:"point",type:"point",extend_keys:ip},{key:"area",type:"area",extend_keys:ip}],hC=[{key:"transform",callback:function(t,e,n){var r;t[e]=t[e]||[];var o=n.available,i=o===void 0?!0:o,a=fC(n,["available"]);if(i)t[e].push(fs((r={},r[rp]=!0,r),a));else{var s=t[e].indexOf(function(l){return l.type===n.type});s!==-1&&t[e].splice(s,1)}}},{key:"labels",callback:function(t,e,n){var r;if(!n||(0,G.isArray)(n)){t[e]=n||[];return}n.text||(n.text=t.yField),t[e]=t[e]||[],t[e].push(fs((r={},r[rp]=!0,r),n))}}],ap=[{key:"conversionTag",shape:"ConversionTag"},{key:"axisText",shape:"BidirectionalBarAxisText"}],yC=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,o){r.__proto__=o}||function(r,o){for(var i in o)Object.prototype.hasOwnProperty.call(o,i)&&(r[i]=o[i])},t(e,n)};return function(e,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");t(e,n);function r(){this.constructor=e}e.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),Ml=function(){return Ml=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++){e=arguments[n];for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])}return t},Ml.apply(this,arguments)},gC=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,r=Object.getOwnPropertySymbols(t);o<r.length;o++)e.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(t,r[o])&&(n[r[o]]=t[r[o]]);return n},mC=function(t){yC(e,t);function e(n){n===void 0&&(n={});var r=n.style,o=gC(n,["style"]);return t.call(this,Ml({style:Ml({fill:"#eee"},r)},o))||this}return e}(ht.mg),bC=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,o){r.__proto__=o}||function(r,o){for(var i in o)Object.prototype.hasOwnProperty.call(o,i)&&(r[i]=o[i])},t(e,n)};return function(e,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");t(e,n);function r(){this.constructor=e}e.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),kl=function(){return kl=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++){e=arguments[n];for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])}return t},kl.apply(this,arguments)},vC=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,r=Object.getOwnPropertySymbols(t);o<r.length;o++)e.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(t,r[o])&&(n[r[o]]=t[r[o]]);return n},I2=function(t){bC(e,t);function e(n){n===void 0&&(n={});var r=n.style,o=vC(n,["style"]);return t.call(this,kl({style:kl({text:"",fontSize:12,textBaseline:"middle",textAlign:"center",fill:"#000",fontStyle:"normal",fontVariant:"normal",fontWeight:"normal",lineWidth:1},r)},o))||this}return e}(ht.xv),F2=function(t,e,n){if(n||arguments.length===2)for(var r=0,o=e.length,i;r<o;r++)(i||!(r in e))&&(i||(i=Array.prototype.slice.call(e,0,r)),i[r]=e[r]);return t.concat(i||Array.prototype.slice.call(e))},OC=function(t,e){if((0,G.isArray)(e))return e},po=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return G.mergeWith.apply(void 0,F2(F2([],t,!1),[OC],!1))},xC=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,o){r.__proto__=o}||function(r,o){for(var i in o)Object.prototype.hasOwnProperty.call(o,i)&&(r[i]=o[i])},t(e,n)};return function(e,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");t(e,n);function r(){this.constructor=e}e.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),N2=function(t){xC(e,t);function e(n,r,o){var i=t.call(this,{style:po(o,r)})||this;return i.chart=n,i}return e.prototype.connectedCallback=function(){this.render(this.attributes,this),this.bindEvents(this.attributes,this)},e.prototype.disconnectedCallback=function(){},e.prototype.attributeChangedCallback=function(n){},e.prototype.update=function(n,r){var o;return this.attr(po({},this.attributes,n||{})),(o=this.render)===null||o===void 0?void 0:o.call(this,this.attributes,this,r)},e.prototype.clear=function(){this.removeChildren()},e.prototype.getElementsLayout=function(){var n=this.chart.getContext().canvas,r=n.document.getElementsByClassName("element"),o=[];return r.forEach(function(i){var a=i.getBBox(),s=a.x,l=a.y,c=a.width,u=a.height,f=i.__data__;o.push({bbox:a,x:s,y:l,width:c,height:u,key:f.key,data:f})}),o},e.prototype.bindEvents=function(n,r){},e}(ht.b_),_C=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,o){r.__proto__=o}||function(r,o){for(var i in o)Object.prototype.hasOwnProperty.call(o,i)&&(r[i]=o[i])},t(e,n)};return function(e,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");t(e,n);function r(){this.constructor=e}e.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),Pl=function(){return Pl=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++){e=arguments[n];for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])}return t},Pl.apply(this,arguments)},wC=function(t){_C(e,t);function e(n,r){return t.call(this,n,r,{type:e.tag})||this}return e.prototype.getConversionTagLayout=function(){var n=this.direction==="vertical",r=this.getElementsLayout(),o=r[0],i=o.x,a=o.y,s=o.height,l=o.width,c=o.data,u=["items",0,"value"],f=(0,G.get)(c,u),d=n?r[1].y-a-s:r[1].x-i-l,p=[],h=this.attributes,y=h.size,g=y===void 0?40:y,m=h.arrowSize,b=m===void 0?20:m,v=h.spacing,O=v===void 0?4:v;return r.forEach(function(x,w){if(w>0){var j=x.x,E=x.y,M=x.height,R=x.width,D=x.data,F=x.key,A=(0,G.get)(D,u),T=g/2;if(n){var P=j+R/2,k=E;p.push({points:[[P+T,k-d+O],[P+T,k-b-O],[P,k-O],[P-T,k-b-O],[P-T,k-d+O]],center:[P,k-d/2-O],width:d,value:[f,A],key:F})}else{var P=j,k=E+M/2;p.push({points:[[j-d+O,k-T],[j-b-O,k-T],[P-O,k],[j-b-O,k+T],[j-d+O,k+T]],center:[P-d/2-O,k],width:d,value:[f,A],key:F})}f=A}}),p},e.prototype.render=function(){this.setDirection(),this.drawConversionTag()},e.prototype.setDirection=function(){var n=this.chart.getCoordinate(),r=(0,G.get)(n,"options.transformations"),o="horizontal";r.forEach(function(i){i.includes("transpose")&&(o="vertical")}),this.direction=o},e.prototype.drawConversionTag=function(){var n=this,r=this.getConversionTagLayout(),o=this.attributes,i=o.style,a=o.text,s=a.style,l=a.formatter;r.forEach(function(c){var u=c.points,f=c.center,d=c.value,p=c.key,h=d[0],y=d[1],g=f[0],m=f[1],b=new mC({style:Pl({points:u,fill:"#eee"},i),id:"polygon-".concat(p)}),v=new I2({style:Pl({x:g,y:m,text:(0,G.isFunction)(l)?l(h,y):(y/h*100).toFixed(2)+"%"},s),id:"text-".concat(p)});n.appendChild(b),n.appendChild(v)})},e.prototype.update=function(){var n=this,r=this.getConversionTagLayout();r.forEach(function(o){var i=o.points,a=o.center,s=o.key,l=a[0],c=a[1],u=n.getElementById("polygon-".concat(s)),f=n.getElementById("text-".concat(s));u.setAttribute("points",i),f.setAttribute("x",l),f.setAttribute("y",c)})},e.tag="ConversionTag",e}(N2),sp=32,z2=16,B2=48,SC=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,o){r.__proto__=o}||function(r,o){for(var i in o)Object.prototype.hasOwnProperty.call(o,i)&&(r[i]=o[i])},t(e,n)};return function(e,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");t(e,n);function r(){this.constructor=e}e.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),ds=function(){return ds=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++){e=arguments[n];for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])}return t},ds.apply(this,arguments)},jC=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,r=Object.getOwnPropertySymbols(t);o<r.length;o++)e.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(t,r[o])&&(n[r[o]]=t[r[o]]);return n},EC=function(t){SC(e,t);function e(n,r){return t.call(this,n,r,{type:e.tag})||this}return e.prototype.render=function(){this.drawText()},e.prototype.getBidirectionalBarAxisTextLayout=function(){var n=this.attributes.layout,r=n==="vertical",o=this.getElementsLayout(),i=r?(0,G.uniqBy)(o,"x"):(0,G.uniqBy)(o,"y"),a=["title"],s=[],l=this.chart.getContext().views,c=(0,G.get)(l,[0,"layout"]),u=c.width,f=c.height;return i.forEach(function(d){var p=d.x,h=d.y,y=d.height,g=d.width,m=d.data,b=d.key,v=(0,G.get)(m,a);r?s.push({x:p+g/2,y:f,text:v,key:b}):s.push({x:u,y:h+y/2,text:v,key:b})}),(0,G.uniqBy)(s,"text").length!==s.length&&(s=Object.values((0,G.groupBy)(s,"text")).map(function(d){var p,h=d.reduce(function(y,g){return y+(r?g.x:g.y)},0);return ds(ds({},d[0]),(p={},p[r?"x":"y"]=h/d.length,p))})),s},e.prototype.transformLabelStyle=function(n){var r={},o=/^label[A-Z]/;return Object.keys(n).forEach(function(i){o.test(i)&&(r[i.replace("label","").replace(/^[A-Z]/,function(a){return a.toLowerCase()})]=n[i])}),r},e.prototype.drawText=function(){var n=this,r=this.getBidirectionalBarAxisTextLayout(),o=this.attributes,i=o.layout,a=o.labelFormatter,s=jC(o,["layout","labelFormatter"]);r.forEach(function(l){var c=l.x,u=l.y,f=l.text,d=l.key,p=new I2({style:ds({x:c,y:u,text:(0,G.isFunction)(a)?a(f):f,wordWrap:!0,wordWrapWidth:i==="horizontal"?sp*2:120,maxLines:2,textOverflow:"ellipsis"},n.transformLabelStyle(s)),id:"text-".concat(d)});n.appendChild(p)})},e.prototype.destroy=function(){this.clear()},e.prototype.update=function(){this.destroy(),this.drawText()},e.tag="BidirectionalBarAxisText",e}(N2),AC={ConversionTag:wC,BidirectionalBarAxisText:EC},MC=function(){function t(e,n){this.container=new Map,this.chart=e,this.config=n,this.init()}return t.prototype.init=function(){var e=this;ap.forEach(function(n){var r,o=n.key,i=n.shape,a=e.config[o];if(a){var s=new AC[i](e.chart,a),l=e.chart.getContext().canvas;l.appendChild(s),e.container.set(o,s)}else(r=e.container.get(o))===null||r===void 0||r.clear()})},t.prototype.update=function(){var e=this;this.container.size&&ap.forEach(function(n){var r=n.key,o=e.container.get(r);o==null||o.update()})},t}(),kC=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,o){r.__proto__=o}||function(r,o){for(var i in o)Object.prototype.hasOwnProperty.call(o,i)&&(r[i]=o[i])},t(e,n)};return function(e,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");t(e,n);function r(){this.constructor=e}e.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),Li=function(){return Li=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++){e=arguments[n];for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])}return t},Li.apply(this,arguments)},$2="data-chart-source-type",fe=function(t){kC(e,t);function e(n,r){var o=t.call(this)||this;return o.container=typeof n=="string"?document.getElementById(n):n,o.options=o.mergeOption(r),o.createG2(),o.bindEvents(),o}return e.prototype.getChartOptions=function(){return Li(Li({},(0,G.pick)(this.options,dC)),{container:this.container})},e.prototype.getSpecOptions=function(){return this.type==="base"||this[pC]?Li(Li({},this.options),this.getChartOptions()):this.options},e.prototype.createG2=function(){if(!this.container)throw Error("The container is not initialized!");this.chart=new uC(this.getChartOptions()),this.container.setAttribute($2,"Ant Design Charts")},e.prototype.bindEvents=function(){var n=this;this.chart&&this.chart.on("*",function(r){r!=null&&r.type&&n.emit(r.type,r)})},e.prototype.getBaseOptions=function(){return{type:"view",autoFit:!0}},e.prototype.getDefaultOptions=function(){},e.prototype.render=function(){var n=this;this.type!=="base"&&this.execAdaptor(),this.chart.options(this.getSpecOptions()),this.chart.render().then(function(){n.annotation=new MC(n.chart,n.options)}),this.bindSizeSensor()},e.prototype.update=function(n){this.options=this.mergeOption(n)},e.prototype.mergeOption=function(n){return po({},this.getBaseOptions(),this.getDefaultOptions(),n)},e.prototype.changeData=function(n){this.chart.changeData(n)},e.prototype.changeSize=function(n,r){this.chart.changeSize(n,r)},e.prototype.destroy=function(){this.chart.destroy(),this.off(),this.container.removeAttribute($2)},e.prototype.execAdaptor=function(){var n=this.getSchemaAdaptor();n({chart:this.chart,options:this.options})},e.prototype.triggerResize=function(){this.chart.forceFit()},e.prototype.bindSizeSensor=function(){var n=this,r=this.options.autoFit,o=r===void 0?!0:r;o&&this.chart.on(Jt.AFTER_CHANGE_SIZE,function(){n.annotation.update()})},e}(Zn.Z),PC=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,o){r.__proto__=o}||function(r,o){for(var i in o)Object.prototype.hasOwnProperty.call(o,i)&&(r[i]=o[i])},t(e,n)};return function(e,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");t(e,n);function r(){this.constructor=e}e.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),TC=function(t){PC(e,t);function e(){var n=t!==null&&t.apply(this,arguments)||this;return n.type="base",n}return e.getDefaultOptions=function(){return{type:"view",children:[{type:"line"}]}},e.prototype.getDefaultOptions=function(){return e.getDefaultOptions()},e.prototype.getSchemaAdaptor=function(){return function(n){return n}},e}(fe),CC=function(t){var e=t.options,n=e.children,r=n===void 0?[]:n;return r.forEach(function(o){Object.keys(o).forEach(function(i){(0,G.isArray)(o[i])&&i!=="data"&&(o[i]=o[i].filter(function(a){return!a[rp]}))})}),e},Y2=function(t,e,n){if(n||arguments.length===2)for(var r=0,o=e.length,i;r<o;r++)(i||!(r in e))&&(i||(i=Array.prototype.slice.call(e,0,r)),i[r]=e[r]);return t.concat(i||Array.prototype.slice.call(e))},LC=function(t){var e=t.children,n=e===void 0?[]:e,r=Object.keys(op).concat(Al.map(function(o){return o.key}));return r.forEach(function(o){delete t[o]}),n.forEach(function(o){Object.keys(o).forEach(function(i){r.includes(i)&&delete o[i]})}),Object.keys(t).forEach(function(o){Y2(Y2([],D2,!0),ap.map(function(i){return i.key}),!0).includes(o)||delete t[o]}),t},ye=function(t){var e=CC(t),n=e.children,r=n===void 0?[]:n,o=(0,G.omit)(e,[].concat(D2,Al.map(function(c){return c.key}))),i=function(c){var u;return(u=hC.find(function(f){return f.key===c}))===null||u===void 0?void 0:u.callback},a=function(c,u,f){var d=i(u);d?d(c,u,f):c[u]=po({},c[u],f)},s=function(c){Object.keys(c).forEach(function(u){if(c[u]){var f=Al.find(function(h){return h.key===u});if(f){var d=f.type,p=f.extend_keys;d?r.push(l(po({},(0,G.pick)(c,p),{type:d},c[u]))):(0,G.isArray)(c[u])&&c[u].forEach(function(h){r.push(l(h))})}}})},l=function(c){return s(c),Object.keys(op).forEach(function(u){var f=op[u];if(!(0,G.isUndefined)(c[u]))if((0,G.isObject)(f)){var d=f.value,p=f.target,h=d(c[u]);a(c,p,h)}else(0,G.set)(c,f,c[u])}),c};return r.forEach(function(c){var u=po({},o,c);l(po(c,u))}),s(e),LC(e),t},cp=function(){return cp=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++){e=arguments[n];for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])}return t},cp.apply(this,arguments)};function RC(t){var e=t.options,n=e.stack,r=e.tooltip,o=e.xField;if(!n)return t;var i=Al.map(function(s){return s.type}).filter(function(s){return!!s}),a=!1;return i.forEach(function(s){e[s]&&(a=!0,(0,G.set)(e,[s,"stack"],cp({y1:"y"},typeof n=="object"?n:{})))}),a&&!(0,G.isBoolean)(r)&&!r&&(0,G.set)(e,"tooltip",{title:o,items:[{channel:"y"}]}),t}function Ze(t){return(0,G.flow)(RC)(t)}function DC(t){return(0,G.flow)(Ze,ye)(t)}var IC=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,o){r.__proto__=o}||function(r,o){for(var i in o)Object.prototype.hasOwnProperty.call(o,i)&&(r[i]=o[i])},t(e,n)};return function(e,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");t(e,n);function r(){this.constructor=e}e.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),FC=function(t){IC(e,t);function e(){var n=t!==null&&t.apply(this,arguments)||this;return n.type="area",n}return e.getDefaultOptions=function(){return{type:"view",children:[{type:"area"}],scale:{y:{nice:!0}},axis:{y:{title:!1},x:{title:!1}},interaction:{tooltip:{shared:!0}}}},e.prototype.getDefaultOptions=function(){return e.getDefaultOptions()},e.prototype.getSchemaAdaptor=function(){return DC},e}(fe),Ri=function(){return Ri=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++){e=arguments[n];for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])}return t},Ri.apply(this,arguments)};function W2(t){var e=function(n){var r=n.options;(0,G.get)(r,"children.length")>1&&(0,G.set)(r,"children",[{type:"interval"}]);var o=r.scale,i=r.markBackground,a=r.data,s=r.children,l=r.yField,c=(0,G.get)(o,"y.domain",[]);if(i&&c.length&&(0,G.isArray)(a)){var u="domainMax",f=a.map(function(d){var p;return Ri(Ri({originData:Ri({},d)},(0,G.omit)(d,l)),(p={},p[u]=c[c.length-1],p))});s.unshift(Ri({type:"interval",data:f,yField:u,tooltip:!1,style:{fill:"#eee"},label:!1},i))}return n};return(0,G.flow)(e,Ze,ye)(t)}var NC=function(){var t=function(e,n){return function(r){var o=e.fill,i=o===void 0?"#2888FF":o,a=e.stroke,s=e.fillOpacity,l=s===void 0?1:s,c=e.strokeOpacity,u=c===void 0?.2:c,f=e.pitch,d=f===void 0?8:f,p=r[0],h=r[1],y=r[2],g=r[3],m=(h[1]-p[1])/2,b=n.document,v=b.createElement("g",{}),O=b.createElement("polygon",{style:{points:[p,[p[0]-d,p[1]+m],[y[0]-d,p[1]+m],g],fill:i,fillOpacity:l,stroke:a,strokeOpacity:u,inset:30}}),x=b.createElement("polygon",{style:{points:[[p[0]-d,p[1]+m],h,y,[y[0]-d,p[1]+m]],fill:i,fillOpacity:l,stroke:a,strokeOpacity:u}}),w=b.createElement("polygon",{style:{points:[p,[p[0]-d,p[1]+m],h,[p[0]+d,p[1]+m]],fill:i,fillOpacity:l-.2}});return v.appendChild(O),v.appendChild(x),v.appendChild(w),v}};As("shape.interval.bar25D",t)},zC=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,o){r.__proto__=o}||function(r,o){for(var i in o)Object.prototype.hasOwnProperty.call(o,i)&&(r[i]=o[i])},t(e,n)};return function(e,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");t(e,n);function r(){this.constructor=e}e.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}();NC();var BC=function(t){zC(e,t);function e(){var n=t!==null&&t.apply(this,arguments)||this;return n.type="Bar",n}return e.getDefaultOptions=function(){return{type:"view",coordinate:{transform:[{type:"transpose"}]},children:[{type:"interval"}],scale:{y:{nice:!0}},axis:{y:{title:!1},x:{title:!1}},interaction:{tooltip:{shared:!0},elementHighlight:{background:!0}}}},e.prototype.getDefaultOptions=function(){return e.getDefaultOptions()},e.prototype.getSchemaAdaptor=function(){return W2},e}(fe),$C=function(){var t=function(e,n){return function(r){var o=e.fill,i=o===void 0?"#2888FF":o,a=e.stroke,s=e.fillOpacity,l=s===void 0?1:s,c=e.strokeOpacity,u=c===void 0?.2:c,f=e.pitch,d=f===void 0?8:f,p=r[1][0]-r[0][0],h=p/2+r[0][0],y=n.document,g=y.createElement("g",{}),m=y.createElement("polygon",{style:{points:[[r[0][0],r[0][1]],[h,r[1][1]+d],[h,r[3][1]+d],[r[3][0],r[3][1]]],fill:i,fillOpacity:l,stroke:a,strokeOpacity:u,inset:30}}),b=y.createElement("polygon",{style:{points:[[h,r[1][1]+d],[r[1][0],r[1][1]],[r[2][0],r[2][1]],[h,r[2][1]+d]],fill:i,fillOpacity:l,stroke:a,strokeOpacity:u}}),v=y.createElement("polygon",{style:{points:[[r[0][0],r[0][1]],[h,r[1][1]-d],[r[1][0],r[1][1]],[h,r[1][1]+d]],fill:i,fillOpacity:l-.2}});return g.appendChild(b),g.appendChild(m),g.appendChild(v),g}};As("shape.interval.column25D",t)},YC=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,o){r.__proto__=o}||function(r,o){for(var i in o)Object.prototype.hasOwnProperty.call(o,i)&&(r[i]=o[i])},t(e,n)};return function(e,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");t(e,n);function r(){this.constructor=e}e.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}();$C();var WC=function(t){YC(e,t);function e(){var n=t!==null&&t.apply(this,arguments)||this;return n.type="column",n}return e.getDefaultOptions=function(){return{type:"view",scale:{y:{nice:!0}},interaction:{tooltip:{shared:!0},elementHighlight:{background:!0}},axis:{y:{title:!1},x:{title:!1}},children:[{type:"interval"}]}},e.prototype.getDefaultOptions=function(){return e.getDefaultOptions()},e.prototype.getSchemaAdaptor=function(){return W2},e}(fe);function ZC(t){var e=function(r){var o=r.options,i=o.children,a=i===void 0?[]:i,s=o.legend;return s&&a.forEach(function(l){if(!(0,G.get)(l,"colorField")){var c=(0,G.get)(l,"yField");(0,G.set)(l,"colorField",function(){return c})}}),r},n=function(r){var o=r.options,i=o.annotations,a=i===void 0?[]:i,s=o.children,l=s===void 0?[]:s,c=o.scale,u=!1;return(0,G.get)(c,"y.key")||l.forEach(function(f,d){if(!(0,G.get)(f,"scale.y.key")){var p="child".concat(d,"Scale");(0,G.set)(f,"scale.y.key",p);var h=f.annotations,y=h===void 0?[]:h;y.length>0&&((0,G.set)(f,"scale.y.independent",!1),y.forEach(function(g){(0,G.set)(g,"scale.y.key",p)})),!u&&a.length>0&&(0,G.get)(f,"scale.y.independent")===void 0&&(u=!0,(0,G.set)(f,"scale.y.independent",!1),a.forEach(function(g){(0,G.set)(g,"scale.y.key",p)}))}}),r};return(0,G.flow)(e,n,Ze,ye)(t)}var HC=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,o){r.__proto__=o}||function(r,o){for(var i in o)Object.prototype.hasOwnProperty.call(o,i)&&(r[i]=o[i])},t(e,n)};return function(e,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");t(e,n);function r(){this.constructor=e}e.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),Z2=function(t){HC(e,t);function e(){var n=t!==null&&t.apply(this,arguments)||this;return n.type="DualAxes",n}return e.getDefaultOptions=function(){return{type:"view",axis:{y:{title:!1,tick:!1},x:{title:!1}},scale:{y:{independent:!0,nice:!0}}}},e.prototype.getDefaultOptions=function(){return e.getDefaultOptions()},e.prototype.getSchemaAdaptor=function(){return ZC},e}(fe);function XC(t){var e=function(i){var a=i.options,s=a.xField,l=a.colorField;return l||(0,G.set)(a,"colorField",s),i},n=function(i){var a=i.options,s=a.compareField,l=a.transform,c=a.isTransposed,u=c===void 0?!0:c,f=a.coordinate;return l||(s?(0,G.set)(a,"transform",[]):(0,G.set)(a,"transform",[{type:"symmetryY"}])),!f&&u&&(0,G.set)(a,"coordinate",{transform:[{type:"transpose"}]}),i},r=function(i){var a=i.options,s=a.compareField,l=a.seriesField,c=a.data,u=a.children,f=a.yField,d=a.isTransposed,p=d===void 0?!0:d;if(s||l){var h=Object.values((0,G.groupBy)(c,function(y){return y[s||l]}));u[0].data=h[0],u.push({type:"interval",data:h[1],yField:function(y){return-y[f]}}),delete a.compareField,delete a.data}return l&&((0,G.set)(a,"type","spaceFlex"),(0,G.set)(a,"ratio",[1,1]),(0,G.set)(a,"direction",p?"row":"col"),delete a.seriesField),i},o=function(i){var a=i.options,s=a.tooltip,l=a.xField,c=a.yField;return s||(0,G.set)(a,"tooltip",{title:!1,items:[function(u){return{name:u[l],value:u[c]}}]}),i};return(0,G.flow)(e,n,r,o,Ze,ye)(t)}var GC=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,o){r.__proto__=o}||function(r,o){for(var i in o)Object.prototype.hasOwnProperty.call(o,i)&&(r[i]=o[i])},t(e,n)};return function(e,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");t(e,n);function r(){this.constructor=e}e.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),UC=function(t){GC(e,t);function e(){var n=t!==null&&t.apply(this,arguments)||this;return n.type="column",n}return e.getDefaultOptions=function(){return{type:"view",scale:{x:{padding:0}},animate:{enter:{type:"fadeIn"}},axis:!1,shapeField:"funnel",label:{position:"inside",transform:[{type:"contrastReverse"}]},children:[{type:"interval"}]}},e.prototype.getDefaultOptions=function(){return e.getDefaultOptions()},e.prototype.getSchemaAdaptor=function(){return XC},e}(fe);function VC(t){return(0,G.flow)(Ze,ye)(t)}var qC=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,o){r.__proto__=o}||function(r,o){for(var i in o)Object.prototype.hasOwnProperty.call(o,i)&&(r[i]=o[i])},t(e,n)};return function(e,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");t(e,n);function r(){this.constructor=e}e.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),KC=function(t){qC(e,t);function e(){var n=t!==null&&t.apply(this,arguments)||this;return n.type="line",n}return e.getDefaultOptions=function(){return{type:"view",scale:{y:{nice:!0}},interaction:{tooltip:{shared:!0}},axis:{y:{title:!1},x:{title:!1}},children:[{type:"line"}]}},e.prototype.getDefaultOptions=function(){return e.getDefaultOptions()},e.prototype.getSchemaAdaptor=function(){return VC},e}(fe);function ps(t){switch(typeof t){case"function":return t;case"string":return function(e){return(0,G.get)(e,[t])};default:return function(){return t}}}var Jn=function(){return Jn=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++){e=arguments[n];for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])}return t},Jn.apply(this,arguments)};function QC(t){var e=function(n){var r=n.options,o=r.angleField,i=r.data,a=r.label,s=r.tooltip,l=r.colorField,c=ps(l);if((0,G.isArray)(i)&&i.length>0){var u=i.reduce(function(d,p){return d+p[o]},0);if(u===0){var f=i.map(function(d){var p;return Jn(Jn({},d),(p={},p[o]=1,p))});(0,G.set)(r,"data",f),a&&(0,G.set)(r,"label",Jn(Jn({},a),{formatter:function(){return 0}})),s!==!1&&((0,G.isFunction)(s)?(0,G.set)(r,"tooltip",function(d,p,h){var y;return s(Jn(Jn({},d),(y={},y[o]=0,y)),p,h.map(function(g){var m;return Jn(Jn({},g),(m={},m[o]=0,m))}))}):(0,G.set)(r,"tooltip",Jn(Jn({},s),{items:[function(d,p,h){return{name:c(d,p,h),value:0}}]})))}}return n};return(0,G.flow)(e,ye)(t)}var JC=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,o){r.__proto__=o}||function(r,o){for(var i in o)Object.prototype.hasOwnProperty.call(o,i)&&(r[i]=o[i])},t(e,n)};return function(e,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");t(e,n);function r(){this.constructor=e}e.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),tL=function(t){JC(e,t);function e(){var n=t!==null&&t.apply(this,arguments)||this;return n.type="pie",n}return e.getDefaultOptions=function(){return{type:"view",children:[{type:"interval"}],coordinate:{type:"theta"},transform:[{type:"stackY",reverse:!0}],animate:{enter:{type:"waveIn"}}}},e.prototype.getDefaultOptions=function(){return e.getDefaultOptions()},e.prototype.getSchemaAdaptor=function(){return QC},e}(fe);function eL(t){return(0,G.flow)(Ze,ye)(t)}var nL=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,o){r.__proto__=o}||function(r,o){for(var i in o)Object.prototype.hasOwnProperty.call(o,i)&&(r[i]=o[i])},t(e,n)};return function(e,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");t(e,n);function r(){this.constructor=e}e.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),rL=function(t){nL(e,t);function e(){var n=t!==null&&t.apply(this,arguments)||this;return n.type="scatter",n}return e.getDefaultOptions=function(){return{axis:{y:{title:!1},x:{title:!1}},legend:{size:!1},children:[{type:"point"}]}},e.prototype.getDefaultOptions=function(){return e.getDefaultOptions()},e.prototype.getSchemaAdaptor=function(){return eL},e}(fe);function oL(t){var e=function(n){return(0,G.set)(n,"options.coordinate",{type:(0,G.get)(n,"options.coordinateType","polar")}),n};return(0,G.flow)(e,ye)(t)}var iL=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,o){r.__proto__=o}||function(r,o){for(var i in o)Object.prototype.hasOwnProperty.call(o,i)&&(r[i]=o[i])},t(e,n)};return function(e,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");t(e,n);function r(){this.constructor=e}e.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),aL=function(t){iL(e,t);function e(){var n=t!==null&&t.apply(this,arguments)||this;return n.type="radar",n}return e.getDefaultOptions=function(){return{axis:{x:{grid:!0,line:!0},y:{zIndex:1,title:!1,line:!0,nice:!0}},meta:{x:{padding:.5,align:0}},interaction:{tooltip:{style:{crosshairsLineDash:[4,4]}}},children:[{type:"line"}],coordinateType:"polar"}},e.prototype.getDefaultOptions=function(){return e.getDefaultOptions()},e.prototype.getSchemaAdaptor=function(){return oL},e}(fe),Br=function(){return Br=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++){e=arguments[n];for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])}return t},Br.apply(this,arguments)},sL="__stock-range__",cL="trend",lL="up",uL="down";function fL(t){var e=function(r){var o=r.options,i=o.data,a=o.yField;return r.options.data=(0,G.map)(i,function(s){var l=s&&Br({},s);if(Array.isArray(a)&&l){var c=a[0],u=a[1],f=a[2],d=a[3];l[cL]=l[c]<=l[u]?lL:uL,l[sL]=[l[c],l[u],l[f],l[d]]}return l}),r},n=function(r){var o=r.options,i=o.xField,a=o.yField,s=o.fallingFill,l=o.risingFill,c=a[0],u=a[1],f=a[2],d=a[3],p=ps(i);return r.options.children=(0,G.map)(r.options.children,function(h,y){var g=y===0;return Br(Br({},h),{tooltip:{title:function(m,b,v){var O=p(m,b,v);return O instanceof Date?O.toLocaleString():O},items:[{field:f},{field:d},{field:c},{field:u}]},encode:Br(Br({},h.encode||{}),{y:g?[f,d]:[c,u],color:function(m){return Math.sign(m[u]-m[c])}}),style:Br(Br({},h.style||{}),{lineWidth:g?1:10})})}),delete o.yField,r.options.legend={color:!1},s&&(0,G.set)(r,"options.scale.color.range[0]",s),l&&(0,G.set)(r,"options.scale.color.range[2]",l),r};return(0,G.flow)(e,n,ye)(t)}var dL=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,o){r.__proto__=o}||function(r,o){for(var i in o)Object.prototype.hasOwnProperty.call(o,i)&&(r[i]=o[i])},t(e,n)};return function(e,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");t(e,n);function r(){this.constructor=e}e.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),pL=["#26a69a","#999999","#ef5350"],hL=function(t){dL(e,t);function e(){var n=t!==null&&t.apply(this,arguments)||this;return n.type="stock",n}return e.getDefaultOptions=function(){return{type:"view",scale:{color:{domain:[-1,0,1],range:pL},y:{nice:!0}},children:[{type:"link"},{type:"link"}],axis:{x:{title:!1,grid:!1},y:{title:!1,grid:!0,gridLineDash:null}},animate:{enter:{type:"scaleInY"}},interaction:{tooltip:{shared:!0,marker:!1,groupName:!1,crosshairs:!0}}}},e.prototype.getDefaultOptions=function(){return e.getDefaultOptions()},e.prototype.getSchemaAdaptor=function(){return fL},e}(fe);function yL(t){return(0,G.flow)(Ze,ye)(t)}var gL=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,o){r.__proto__=o}||function(r,o){for(var i in o)Object.prototype.hasOwnProperty.call(o,i)&&(r[i]=o[i])},t(e,n)};return function(e,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");t(e,n);function r(){this.constructor=e}e.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),mL=function(t){gL(e,t);function e(){var n=t!==null&&t.apply(this,arguments)||this;return n.type="TinyLine",n}return e.getDefaultOptions=function(){return{type:"view",children:[{type:"line",axis:!1}],animate:{enter:{type:"growInX",duration:500}},padding:0,margin:0,tooltip:!1}},e.prototype.getDefaultOptions=function(){return e.getDefaultOptions()},e.prototype.getSchemaAdaptor=function(){return yL},e}(fe);function bL(t){return(0,G.flow)(Ze,ye)(t)}var vL=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,o){r.__proto__=o}||function(r,o){for(var i in o)Object.prototype.hasOwnProperty.call(o,i)&&(r[i]=o[i])},t(e,n)};return function(e,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");t(e,n);function r(){this.constructor=e}e.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),OL=function(t){vL(e,t);function e(){var n=t!==null&&t.apply(this,arguments)||this;return n.type="TinyArea",n}return e.getDefaultOptions=function(){return{type:"view",animate:{enter:{type:"growInX",duration:500}},children:[{type:"area",axis:!1}],padding:0,margin:0,tooltip:!1}},e.prototype.getDefaultOptions=function(){return e.getDefaultOptions()},e.prototype.getSchemaAdaptor=function(){return bL},e}(fe);function xL(t){return(0,G.flow)(Ze,ye)(t)}var _L=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,o){r.__proto__=o}||function(r,o){for(var i in o)Object.prototype.hasOwnProperty.call(o,i)&&(r[i]=o[i])},t(e,n)};return function(e,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");t(e,n);function r(){this.constructor=e}e.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),wL=function(t){_L(e,t);function e(){var n=t!==null&&t.apply(this,arguments)||this;return n.type="TinyColumn",n}return e.getDefaultOptions=function(){return{type:"view",children:[{type:"interval",axis:!1}],padding:0,margin:0,tooltip:!1}},e.prototype.getDefaultOptions=function(){return e.getDefaultOptions()},e.prototype.getSchemaAdaptor=function(){return xL},e}(fe),lp=function(){return lp=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++){e=arguments[n];for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])}return t},lp.apply(this,arguments)};function SL(t){var e=function(n){var r=n.options,o=r.percent,i=r.color,a=i===void 0?[]:i;if(!o)return n;var s={scale:{color:{range:a.length?a:[]}},data:[1,o]};return Object.assign(r,lp({},s)),n};return(0,G.flow)(e,Ze,ye)(t)}var jL=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,o){r.__proto__=o}||function(r,o){for(var i in o)Object.prototype.hasOwnProperty.call(o,i)&&(r[i]=o[i])},t(e,n)};return function(e,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");t(e,n);function r(){this.constructor=e}e.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),EL=function(t){jL(e,t);function e(){var n=t!==null&&t.apply(this,arguments)||this;return n.type="TinyProgress",n}return e.getDefaultOptions=function(){return{type:"view",data:[],margin:0,padding:0,tooltip:!1,children:[{interaction:{tooltip:!1},coordinate:{transform:[{type:"transpose"}]},type:"interval",axis:!1,legend:!1,encode:{y:function(n){return n},color:function(n,r){return r}}}]}},e.prototype.getDefaultOptions=function(){return e.getDefaultOptions()},e.prototype.getSchemaAdaptor=function(){return SL},e}(fe),up=function(){return up=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++){e=arguments[n];for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])}return t},up.apply(this,arguments)};function AL(t){var e=function(r){var o=r.options,i=o.radius,a=i===void 0?.8:i;return(0,G.set)(r,"options.coordinate.innerRadius",a),r},n=function(r){var o=r.options,i=o.percent,a=o.color,s=a===void 0?[]:a;if(!i)return r;var l={scale:{color:{range:s.length?s:[]}},data:[1,i]};return Object.assign(o,up({},l)),r};return(0,G.flow)(e,n,Ze,ye)(t)}var ML=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,o){r.__proto__=o}||function(r,o){for(var i in o)Object.prototype.hasOwnProperty.call(o,i)&&(r[i]=o[i])},t(e,n)};return function(e,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");t(e,n);function r(){this.constructor=e}e.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),kL=function(t){ML(e,t);function e(){var n=t!==null&&t.apply(this,arguments)||this;return n.type="TinyRing",n}return e.getDefaultOptions=function(){return{type:"view",data:[],margin:0,padding:0,coordinate:{type:"theta"},animate:{enter:{type:"waveIn"}},interaction:{tooltip:!1},tooltip:!1,children:[{type:"interval",axis:!1,legend:!1,encode:{y:function(n){return n},color:function(n,r){return r}}}]}},e.prototype.getDefaultOptions=function(){return e.getDefaultOptions()},e.prototype.getSchemaAdaptor=function(){return AL},e}(fe);function PL(t){return(0,G.flow)(ye)(t)}var TL=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,o){r.__proto__=o}||function(r,o){for(var i in o)Object.prototype.hasOwnProperty.call(o,i)&&(r[i]=o[i])},t(e,n)};return function(e,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");t(e,n);function r(){this.constructor=e}e.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),CL=function(t){TL(e,t);function e(){var n=t!==null&&t.apply(this,arguments)||this;return n.type="rose",n}return e.getDefaultOptions=function(){return{type:"view",children:[{type:"interval"}],coordinate:{type:"polar"},animate:{enter:{type:"waveIn"}}}},e.prototype.getDefaultOptions=function(){return e.getDefaultOptions()},e.prototype.getSchemaAdaptor=function(){return PL},e}(fe),fp="__start__",Di="__end__",dp="__waterfall_value__",pp=function(){return pp=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++){e=arguments[n];for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])}return t},pp.apply(this,arguments)},LL=function(t,e,n){if(n||arguments.length===2)for(var r=0,o=e.length,i;r<o;r++)(i||!(r in e))&&(i||(i=Array.prototype.slice.call(e,0,r)),i[r]=e[r]);return t.concat(i||Array.prototype.slice.call(e))};function RL(t){var e=function(r){var o=r.options,i=o.data,a=i===void 0?[]:i,s=o.yField;return a.length&&(a.reduce(function(l,c,u){var f,d=ps(s),p=d(c,u,a);if(u===0||c.isTotal)c[fp]=0,c[Di]=p,c[dp]=p;else{var h=(f=l[Di])!==null&&f!==void 0?f:d(l,u,a);c[fp]=h,c[Di]=h+p,c[dp]=l[Di]}return c},[]),Object.assign(o,{yField:[fp,Di]})),r},n=function(r){var o=r.options,i=o.data,a=i===void 0?[]:i,s=o.xField,l=o.children,c=o.linkStyle,u=LL([],a,!0);return u.reduce(function(f,d,p){return p>0&&(d.x1=f[s],d.x2=d[s],d.y1=f[Di]),d},[]),u.shift(),l.push({type:"link",xField:["x1","x2"],yField:"y1",zIndex:-1,data:u,style:pp({stroke:"#697474"},c),label:!1,tooltip:!1}),r};return(0,G.flow)(e,n,Ze,ye)(t)}var DL=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,o){r.__proto__=o}||function(r,o){for(var i in o)Object.prototype.hasOwnProperty.call(o,i)&&(r[i]=o[i])},t(e,n)};return function(e,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");t(e,n);function r(){this.constructor=e}e.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),IL=function(t){DL(e,t);function e(){var n=t!==null&&t.apply(this,arguments)||this;return n.type="waterfall",n}return e.getDefaultOptions=function(){return{type:"view",legend:null,tooltip:{field:dp,valueFormatter:"~s",name:"value"},axis:{y:{title:null,labelFormatter:"~s"},x:{title:null}},children:[{type:"interval",interaction:{elementHighlight:{background:!0}}}]}},e.prototype.getDefaultOptions=function(){return e.getDefaultOptions()},e.prototype.getSchemaAdaptor=function(){return RL},e}(fe);function FL(t){var e=function(n){var r=n.options,o=r.data,i=r.binNumber,a=r.binWidth,s=r.children,l=r.channel,c=l===void 0?"count":l,u=(0,G.get)(s,"[0].transform[0]",{});return(0,G.isNumber)(a)?((0,G.assign)(u,{thresholds:(0,G.ceil)((0,G.divide)(o.length,a)),y:c}),n):((0,G.isNumber)(i)&&(0,G.assign)(u,{thresholds:i,y:c}),n)};return(0,G.flow)(e,Ze,ye)(t)}var NL=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,o){r.__proto__=o}||function(r,o){for(var i in o)Object.prototype.hasOwnProperty.call(o,i)&&(r[i]=o[i])},t(e,n)};return function(e,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");t(e,n);function r(){this.constructor=e}e.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),zL=function(t){NL(e,t);function e(){var n=t!==null&&t.apply(this,arguments)||this;return n.type="Histogram",n}return e.getDefaultOptions=function(){return{type:"view",autoFit:!0,axis:{y:{title:!1},x:{title:!1}},children:[{type:"rect",transform:[{type:"binX",y:"count"}],interaction:{elementHighlight:{background:!0}}}]}},e.prototype.getDefaultOptions=function(){return e.getDefaultOptions()},e.prototype.getSchemaAdaptor=function(){return FL},e}(fe);function BL(t){var e=function(r){var o=r.options,i=o.tooltip,a=i===void 0?{}:i,s=o.colorField,l=o.sizeField;return a&&!a.field&&(a.field=s||l),r},n=function(r){var o=r.options,i=o.mark,a=o.children;return i&&(a[0].type=i),r};return(0,G.flow)(e,n,Ze,ye)(t)}var $L=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,o){r.__proto__=o}||function(r,o){for(var i in o)Object.prototype.hasOwnProperty.call(o,i)&&(r[i]=o[i])},t(e,n)};return function(e,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");t(e,n);function r(){this.constructor=e}e.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),YL=function(t){$L(e,t);function e(){var n=t!==null&&t.apply(this,arguments)||this;return n.type="heatmap",n}return e.getDefaultOptions=function(){return{type:"view",legend:null,tooltip:{valueFormatter:"~s"},axis:{y:{title:null,grid:!0},x:{title:null,grid:!0}},children:[{type:"point",interaction:{elementHighlight:{background:!0}}}]}},e.prototype.getDefaultOptions=function(){return e.getDefaultOptions()},e.prototype.getSchemaAdaptor=function(){return BL},e}(fe);function WL(t){var e=function(n){var r=n.options.boxType,o=r===void 0?"box":r;return n.options.children[0].type=o,n};return(0,G.flow)(e,Ze,ye)(t)}var ZL=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,o){r.__proto__=o}||function(r,o){for(var i in o)Object.prototype.hasOwnProperty.call(o,i)&&(r[i]=o[i])},t(e,n)};return function(e,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");t(e,n);function r(){this.constructor=e}e.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),HL=function(t){ZL(e,t);function e(){var n=t!==null&&t.apply(this,arguments)||this;return n.type="box",n}return e.getDefaultOptions=function(){return{type:"view",children:[{type:"box"}],axis:{y:{title:!1},x:{title:!1}},tooltip:{items:[{name:"min",channel:"y"},{name:"q1",channel:"y1"},{name:"q2",channel:"y2"},{name:"q3",channel:"y3"},{name:"max",channel:"y4"}]}}},e.prototype.getDefaultOptions=function(){return e.getDefaultOptions()},e.prototype.getSchemaAdaptor=function(){return WL},e}(fe);function XL(t){var e=function(n){var r=n.options,o=r.data,i=[{type:"custom",callback:function(s){return{links:s}}}];if((0,G.isArray)(o))o.length>0?(0,G.set)(r,"data",{value:o,transform:i}):delete r.children;else if((0,G.get)(o,"type")==="fetch"&&(0,G.get)(o,"value")){var a=(0,G.get)(o,"transform");(0,G.isArray)(a)?(0,G.set)(o,"transform",a.concat(i)):(0,G.set)(o,"transform",i)}return n};return(0,G.flow)(e,Ze,ye)(t)}var GL=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,o){r.__proto__=o}||function(r,o){for(var i in o)Object.prototype.hasOwnProperty.call(o,i)&&(r[i]=o[i])},t(e,n)};return function(e,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");t(e,n);function r(){this.constructor=e}e.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),UL=function(t){GL(e,t);function e(){var n=t!==null&&t.apply(this,arguments)||this;return n.type="sankey",n}return e.getDefaultOptions=function(){return{type:"view",children:[{type:"sankey"}]}},e.prototype.getDefaultOptions=function(){return e.getDefaultOptions()},e.prototype.getSchemaAdaptor=function(){return XL},e}(fe);function VL(t){var e=t.options.layout,n=e===void 0?"horizontal":e;return t.options.coordinate.transform=n!=="horizontal"?void 0:[{type:"transpose"}],t}function qL(t){VL(t);var e=t.options.layout,n=e===void 0?"horizontal":e;return t.options.children.forEach(function(r){var o;!((o=r==null?void 0:r.coordinate)===null||o===void 0)&&o.transform&&(r.coordinate.transform=n!=="horizontal"?void 0:[{type:"transpose"}])}),t}var fr=function(){return fr=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++){e=arguments[n];for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])}return t},fr.apply(this,arguments)},Tl=["#f0efff","#5B8FF9","#3D76DD"];function hp(t,e,n,r){r===void 0&&(r=!0);var o=0,i=!1,a=(0,G.map)(t,function(s){var l,c,u=(0,G.get)(s,[e]);if((0,G.isNil)(u))return[];if((0,G.isString)(u)){var f=Number(u);return isNaN(f)?[]:(l={},l[n]=s[n],l[e]=f,l)}return(0,G.isArray)(u)?(i=!0,o=Math.max(o,u.length),(0,G.map)(r?u.sort(function(d,p){return p-d}):u,function(d,p){var h;return h={},h[n]=s[n],h[e]=d,h.index=p,h})):(o=Math.max(1,o),c={},c[n]=s[n],c[e]=u,c)}).flat();return i?[a.map(function(s){return fr({index:0},s)}),o]:[a,o]}function yp(t,e){return new Array(t).fill("").map(function(n,r){return(0,G.isArray)(e)?e[r%e.length]:e})}function KL(t){var e=function(o){var i=o.options,a=i.color,s=i.rangeField,l=s===void 0?"ranges":s,c=i.measureField,u=c===void 0?"measures":c,f=i.targetField,d=f===void 0?"targets":f,p=i.xField,h=p===void 0?"title":p,y=i.mapField,g=i.data,m=hp(g,l,h),b=m[0],v=m[1],O=hp(g,u,h,!1),x=O[0],w=O[1],j=hp(g,d,h,!1),E=j[0],M=j[1],R=(0,G.get)(a,[l],Tl[0]),D=(0,G.get)(a,[u],Tl[1]),F=(0,G.get)(a,[d],Tl[2]),A=[yp(v,R),yp(w,D),yp(M,F)].flat();return o.options.children=(0,G.map)(o.options.children,function(T,P){var k=[b,x,E][P],z=[l,u,d][P];return fr(fr({},T),{data:k,encode:fr(fr({},T.encode||{}),{x:h,y:z,color:function(C){var I=C.index,Y=(0,G.isNumber)(I)?"".concat(z,"_").concat(I):z;return y?(0,G.get)(y,[z,I],Y):Y}}),style:fr(fr({},T.style||{}),{zIndex:function(C){return-C[z]}}),labels:P!==0?(0,G.map)(T.labels,function(C){return fr(fr({},C),{text:z})}):void 0})}),o.options.scale.color.range=A,o.options.legend.color.itemMarker=function(T){return y&&(0,G.includes)(y==null?void 0:y[d],T)||(T==null?void 0:T.replace(/\_\d$/,""))===d?"line":"square"},o},n=function(o){var i=o.options.layout,a=i===void 0?"horizontal":i;return a!=="horizontal"&&(0,G.set)(o,"options.children[2].shapeField","hyphen"),o},r=function(o){var i=o.options,a=i.range,s=a===void 0?{}:a,l=i.measure,c=l===void 0?{}:l,u=i.target,f=u===void 0?{}:u,d=i.children;return o.options.children=[s,c,f].map(function(p,h){return po(d[h],p)}),o};return(0,G.flow)(e,n,r,qL,ye)(t)}var QL=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,o){r.__proto__=o}||function(r,o){for(var i in o)Object.prototype.hasOwnProperty.call(o,i)&&(r[i]=o[i])},t(e,n)};return function(e,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");t(e,n);function r(){this.constructor=e}e.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),JL=function(t){QL(e,t);function e(){var n=t!==null&&t.apply(this,arguments)||this;return n.type="bullet",n}return e.getDefaultOptions=function(){return{type:"view",scale:{color:{range:Tl}},legend:{color:{itemMarker:function(n){return n==="target"?"line":"square"}}},axis:{y:{title:!1},x:{title:!1}},children:[{type:"interval",style:{maxWidth:30},axis:{y:{grid:!0,gridLineWidth:2}}},{type:"interval",style:{maxWidth:20},transform:[{type:"stackY"}]},{type:"point",encode:{size:8,shape:"line"}}],interaction:{tooltip:{shared:!0}},coordinate:{transform:[{type:"transpose"}]}}},e.prototype.getDefaultOptions=function(){return e.getDefaultOptions()},e.prototype.getSchemaAdaptor=function(){return KL},e}(fe);function tR(t){var e=function(n){var r=n.options.data;return n.options.data={value:r},n};return(0,G.flow)(e,Ze,ye)(t)}var eR=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,o){r.__proto__=o}||function(r,o){for(var i in o)Object.prototype.hasOwnProperty.call(o,i)&&(r[i]=o[i])},t(e,n)};return function(e,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");t(e,n);function r(){this.constructor=e}e.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),nR=function(t){eR(e,t);function e(){var n=t!==null&&t.apply(this,arguments)||this;return n.type="Gauge",n}return e.getDefaultOptions=function(){return{type:"view",legend:!1,children:[{type:"gauge"}]}},e.prototype.getDefaultOptions=function(){return e.getDefaultOptions()},e.prototype.getSchemaAdaptor=function(){return tR},e}(fe);function rR(t){var e=function(n){var r=n.options.percent;return(0,G.isNumber)(r)&&((0,G.set)(n,"options.data",r),delete n.options.percent),n};return(0,G.flow)(e,Ze,ye)(t)}var oR=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,o){r.__proto__=o}||function(r,o){for(var i in o)Object.prototype.hasOwnProperty.call(o,i)&&(r[i]=o[i])},t(e,n)};return function(e,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");t(e,n);function r(){this.constructor=e}e.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),iR=function(t){oR(e,t);function e(){var n=t!==null&&t.apply(this,arguments)||this;return n.type="Liquid",n}return e.getDefaultOptions=function(){return{type:"view",children:[{type:"liquid"}]}},e.prototype.getDefaultOptions=function(){return e.getDefaultOptions()},e.prototype.getSchemaAdaptor=function(){return rR},e}(fe);function aR(t){return(0,G.flow)(Ze,ye)(t)}var sR=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,o){r.__proto__=o}||function(r,o){for(var i in o)Object.prototype.hasOwnProperty.call(o,i)&&(r[i]=o[i])},t(e,n)};return function(e,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");t(e,n);function r(){this.constructor=e}e.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),cR=function(t){sR(e,t);function e(){var n=t!==null&&t.apply(this,arguments)||this;return n.type="WordCloud",n}return e.getDefaultOptions=function(){return{type:"view",legend:!1,children:[{type:"wordCloud"}]}},e.prototype.getDefaultOptions=function(){return e.getDefaultOptions()},e.prototype.getSchemaAdaptor=function(){return aR},e}(fe);function lR(t){var e=function(n){var r=n.options,o=r.data;return o&&(0,G.set)(r,"data",{value:o}),n};return(0,G.flow)(e,Ze,ye)(t)}var uR=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,o){r.__proto__=o}||function(r,o){for(var i in o)Object.prototype.hasOwnProperty.call(o,i)&&(r[i]=o[i])},t(e,n)};return function(e,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");t(e,n);function r(){this.constructor=e}e.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),fR=function(t){uR(e,t);function e(){var n=t!==null&&t.apply(this,arguments)||this;return n.type="treemap",n}return e.getDefaultOptions=function(){return{type:"view",children:[{type:"treemap"}]}},e.prototype.getDefaultOptions=function(){return e.getDefaultOptions()},e.prototype.getSchemaAdaptor=function(){return lR},e}(fe),Wo=function(){return Wo=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++){e=arguments[n];for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])}return t},Wo.apply(this,arguments)};function dR(t){var e=function(o){var i=o.options,a=i.startAngle,s=i.maxAngle,l=i.coordinate,c=(0,G.isNumber)(a)?a/(2*Math.PI)*360:-90,u=(0,G.isNumber)(s)?(Number(s)+c)/180*Math.PI:Math.PI;return(0,G.set)(o,["options","coordinate"],Wo(Wo({},l),{endAngle:u,startAngle:a!=null?a:-Math.PI/2})),o},n=function(o){var i=o.options,a=i.tooltip,s=i.xField,l=i.yField,c=ps(s),u=ps(l);return a||(0,G.set)(i,"tooltip",{title:!1,items:[function(f,d,p){return{name:c(f,d,p),value:u(f,d,p)}}]}),o},r=function(o){var i=o.options,a=i.markBackground,s=i.children,l=i.scale,c=i.coordinate,u=i.xField,f=(0,G.get)(l,"y.domain",[]);return a&&s.unshift(Wo({type:"interval",xField:u,yField:f[f.length-1],colorField:a.color,scale:{color:{type:"identity"}},style:{fillOpacity:a.opacity,fill:a.color?void 0:"#e0e4ee"},coordinate:Wo(Wo({},c),{startAngle:-Math.PI/2,endAngle:1.5*Math.PI}),animate:!1},a)),o};return(0,G.flow)(e,n,r,Ze,ye)(t)}var pR=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,o){r.__proto__=o}||function(r,o){for(var i in o)Object.prototype.hasOwnProperty.call(o,i)&&(r[i]=o[i])},t(e,n)};return function(e,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");t(e,n);function r(){this.constructor=e}e.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),hR=function(t){pR(e,t);function e(){var n=t!==null&&t.apply(this,arguments)||this;return n.type="radial",n}return e.getDefaultOptions=function(){return{type:"view",children:[{type:"interval"}],coordinate:{type:"radial",innerRadius:.1,outerRadius:1,endAngle:Math.PI},animate:{enter:{type:"waveIn",duration:800}},axis:{y:{nice:!0,labelAutoHide:!0,labelAutoRotate:!1},x:{title:!1,nice:!0,labelAutoRotate:!1,labelAutoHide:{type:"equidistance",cfg:{minGap:6}}}}}},e.prototype.getDefaultOptions=function(){return e.getDefaultOptions()},e.prototype.getSchemaAdaptor=function(){return dR},e}(fe);function yR(t){return(0,G.flow)(ye)(t)}var gR=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,o){r.__proto__=o}||function(r,o){for(var i in o)Object.prototype.hasOwnProperty.call(o,i)&&(r[i]=o[i])},t(e,n)};return function(e,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");t(e,n);function r(){this.constructor=e}e.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),mR=function(t){gR(e,t);function e(){var n=t!==null&&t.apply(this,arguments)||this;return n.type="CirclePacking",n}return e.getDefaultOptions=function(){return{legend:!1,type:"view",children:[{type:"pack"}]}},e.prototype.getDefaultOptions=function(){return e.getDefaultOptions()},e.prototype.getSchemaAdaptor=function(){return yR},e}(fe),Cl=function(){return Cl=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++){e=arguments[n];for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])}return t},Cl.apply(this,arguments)};function bR(t){var e=function(n){var r=n.options,o=r.xField,i=r.yField,a=r.seriesField,s=r.children,l=s==null?void 0:s.map(function(c){return Cl(Cl({},c),{xField:o,yField:i,seriesField:a,colorField:a,data:c.type==="density"?{transform:[{type:"kde",field:i,groupBy:[o,a]}]}:c.data})}).filter(function(c){return r.violinType!=="density"||c.type==="density"});return(0,G.set)(r,"children",l),r.violinType==="polar"&&(0,G.set)(r,"coordinate",{type:"polar"}),(0,G.set)(r,"violinType",void 0),n};return(0,G.flow)(e,Ze,ye)(t)}var vR=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,o){r.__proto__=o}||function(r,o){for(var i in o)Object.prototype.hasOwnProperty.call(o,i)&&(r[i]=o[i])},t(e,n)};return function(e,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");t(e,n);function r(){this.constructor=e}e.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),OR=function(t){vR(e,t);function e(){var n=t!==null&&t.apply(this,arguments)||this;return n.type="violin",n}return e.getDefaultOptions=function(){return{type:"view",children:[{type:"density",sizeField:"size",tooltip:!1},{type:"boxplot",shapeField:"violin",style:{opacity:.5,point:!1}}],animate:{enter:{type:"fadeIn"}}}},e.prototype.getDefaultOptions=function(){return e.getDefaultOptions()},e.prototype.getSchemaAdaptor=function(){return bR},e}(fe),hs=function(){return hs=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++){e=arguments[n];for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])}return t},hs.apply(this,arguments)},xR=function(t,e,n){if(n||arguments.length===2)for(var r=0,o=e.length,i;r<o;r++)(i||!(r in e))&&(i||(i=Array.prototype.slice.call(e,0,r)),i[r]=e[r]);return t.concat(i||Array.prototype.slice.call(e))};function _R(t){var e=function(i){var a=i.options,s=a.yField,l=a.children;return l.forEach(function(c,u){(0,G.set)(c,"yField",s[u])}),i},n=function(i){var a=i.options,s=a.yField,l=a.children,c=a.data;if((0,G.isPlainObject)(c))return i;var u=(0,G.isArray)((0,G.get)(c,[0]))?c:[c,c];return l.forEach(function(f,d){(0,G.set)(f,"data",xR([],u[d].map(function(p){return hs({groupKey:s[d]},p)}),!0))}),i},r=function(i){var a=i.options,s=a.yField,l=s[0],c=s[1],u=a.tooltip;return u||(0,G.set)(a,"tooltip",{items:[{field:l,value:l},{field:c,value:c}]}),i},o=function(i){var a=i.options,s=a.children,l=a.layout,c=a.coordinate.transform,u=a.paddingBottom,f=u===void 0?B2:u,d=a.paddingLeft,p=d===void 0?B2:d,h=a.axis;(0,G.set)(a,"axisText",hs(hs({},(h==null?void 0:h.x)||{}),{layout:l}));var y=s[0],g=s[1];if(l==="vertical")(0,G.set)(a,"direction","col"),(0,G.set)(a,"paddingLeft",p),(0,G.set)(a,"coordinate.transform",c.filter(function(x){return x.type!=="transpose"})),(0,G.set)(y,"paddingBottom",z2),(0,G.set)(g,"paddingTop",z2),(0,G.set)(g,"axis",{x:{position:"top"}}),(0,G.set)(g,"scale",{y:{range:[0,1]}});else{(0,G.set)(a,"paddingBottom",f),(0,G.set)(y,"scale",{y:{range:[0,1]}});var m=y.paddingRight,b=m===void 0?sp:m,v=g.paddingLeft,O=v===void 0?sp:v;(0,G.set)(y,"paddingRight",b),(0,G.set)(y,"axis",{x:{position:"right"}}),(0,G.set)(g,"paddingLeft",O)}return i};return(0,G.flow)(e,n,r,o,Ze,ye)(t)}var wR=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,o){r.__proto__=o}||function(r,o){for(var i in o)Object.prototype.hasOwnProperty.call(o,i)&&(r[i]=o[i])},t(e,n)};return function(e,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");t(e,n);function r(){this.constructor=e}e.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),SR=function(t){wR(e,t);function e(){var n=t!==null&&t.apply(this,arguments)||this;return n.type="BidirectionalBar",n}return e.getDefaultOptions=function(){return{type:"spaceFlex",coordinate:{transform:[{type:"transpose"}]},scale:{y:{nice:!0}},direction:"row",layout:"horizontal",legend:!1,axis:{y:{title:!1},x:{title:!1,label:!1}},children:[{type:"interval"},{type:"interval"}]}},e.prototype.getDefaultOptions=function(){return e.getDefaultOptions()},e.prototype.getSchemaAdaptor=function(){return _R},e}(fe),Zo;(function(t){t.color="key",t.d="path"})(Zo||(Zo={}));function jR(t){var e=function(n){var r=n.options,o=r.data,i=r.setsField,a=r.sizeField;return(0,G.isArray)(o)&&((0,G.set)(r,"data",{type:"inline",value:o,transform:[{type:"venn",sets:i,size:a,as:[Zo.color,Zo.d]}]}),(0,G.set)(r,"colorField",i),(0,G.set)(r,["children","0","encode","d"],Zo.d)),(0,G.set)(n,"options",(0,G.omit)(r,["sizeField","setsField"])),n};return(0,G.flow)(e,ye)(t)}var ER=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,o){r.__proto__=o}||function(r,o){for(var i in o)Object.prototype.hasOwnProperty.call(o,i)&&(r[i]=o[i])},t(e,n)};return function(e,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");t(e,n);function r(){this.constructor=e}e.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),AR=function(t){ER(e,t);function e(){var n=t!==null&&t.apply(this,arguments)||this;return n.type="venn",n}return e.getDefaultOptions=function(){return{type:"view",children:[{type:"path"}],legend:{color:{itemMarker:"circle"}},encode:{color:Zo.color,d:Zo.d}}},e.prototype.getDefaultOptions=function(){return e.getDefaultOptions()},e.prototype.getSchemaAdaptor=function(){return jR},e}(fe);function MR(t){var e=function(n){return n};return(0,G.flow)(e,ye)(t)}var kR=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,o){r.__proto__=o}||function(r,o){for(var i in o)Object.prototype.hasOwnProperty.call(o,i)&&(r[i]=o[i])},t(e,n)};return function(e,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");t(e,n);function r(){this.constructor=e}e.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),PR=function(t){kR(e,t);function e(){var n=t!==null&&t.apply(this,arguments)||this;return n.type="Sunburst",n}return e.getDefaultOptions=function(){return{type:"view",children:[{type:"sunburst"}]}},e.prototype.getDefaultOptions=function(){return e.getDefaultOptions()},e.prototype.getSchemaAdaptor=function(){return MR},e}(fe),TR={Base:TC,Line:KC,Column:WC,Pie:tL,Area:FC,Bar:BC,DualAxes:Z2,Funnel:UC,Scatter:rL,Radar:aL,Rose:CL,Stock:hL,TinyLine:mL,TinyArea:OL,TinyColumn:wL,TinyProgress:EL,TinyRing:kL,Waterfall:IL,Histogram:zL,Heatmap:YL,Box:HL,Sankey:UL,Bullet:JL,Gauge:nR,Liquid:iR,WordCloud:cR,Treemap:fR,RadialBar:hR,CirclePacking:mR,Violin:OR,BidirectionalBar:SR,Venn:AR,Mix:Z2,Sunburst:PR},gp=function(){return gp=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++){e=arguments[n];for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])}return t},gp.apply(this,arguments)},H2=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,r=Object.getOwnPropertySymbols(t);o<r.length;o++)e.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(t,r[o])&&(n[r[o]]=t[r[o]]);return n},CR=(0,ee.forwardRef)(function(t,e){var n=t.chartType,r=n===void 0?"Base":n,o=H2(t,["chartType"]),i=o.containerStyle,a=i===void 0?{height:"inherit",flex:1}:i,s=o.containerAttributes,l=s===void 0?{}:s,c=o.className,u=o.loading,f=o.loadingTemplate,d=o.errorTemplate,p=H2(o,["containerStyle","containerAttributes","className","loading","loadingTemplate","errorTemplate"]),h=_e(TR[r],p),y=h.chart,g=h.container;return(0,ee.useImperativeHandle)(e,function(){return y.current}),ee.createElement(bn,{errorTemplate:d},u&&ee.createElement(jn,{loadingTemplate:f}),ee.createElement("div",gp({className:c,style:a,ref:g},l)))})},16290:function(Kt,Gt){(function(Q,Zt){Zt(Gt)})(this,function(Q){"use strict";function Zt(_){var S=typeof Symbol=="function"&&Symbol.iterator,L=S&&_[S],N=0;if(L)return L.call(_);if(_&&typeof _.length=="number")return{next:function(){return{value:(_=_&&N>=_.length?void 0:_)&&_[N++],done:!_}}};throw new TypeError(S?"Object is not iterable.":"Symbol.iterator is not defined.")}function ct(_,S){var L=typeof Symbol=="function"&&_[Symbol.iterator];if(!L)return _;var N,H,U=L.call(_),$=[];try{for(;(S===void 0||0<S--)&&!(N=U.next()).done;)$.push(N.value)}catch(B){H={error:B}}finally{try{N&&!N.done&&(L=U.return)&&L.call(U)}finally{if(H)throw H.error}}return $}function ce(_,S,L){if(L||arguments.length===2)for(var N,H=0,U=S.length;H<U;H++)!N&&H in S||((N=N||Array.prototype.slice.call(S,0,H))[H]=S[H]);return _.concat(N||Array.prototype.slice.call(S))}function He(_){return pn(_,"Function")}var ee={}.toString,pn=function(_,S){return ee.call(_)==="[object "+S+"]"},rn=function(_){return Array.isArray?Array.isArray(_):pn(_,"Array")},ie=function(_){if(typeof(S=_)!="object"||S===null||!pn(_,"Object"))return!1;var S;if(Object.getPrototypeOf(_)===null)return!0;for(var L=_;Object.getPrototypeOf(L)!==null;)L=Object.getPrototypeOf(L);return Object.getPrototypeOf(_)===L},Ht=function(_){return pn(_,"Number")},Te=Object.values?function(_){return Object.values(_)}:function(_){var S,L=[],N=_,H=function(V,q){He(_)&&q==="prototype"||L.push(V)};if(N){if(rn(N))for(var U=0,$=N.length;U<$&&H(N[U],U)!==!1;U++);else if(S=typeof N,N!==null&&S=="object"||S=="function"){for(var B in N)if(N.hasOwnProperty(B)&&H(N[B],B)===!1)break}}return L},ae=5;function Fe(_){for(var S=[],L=1;L<arguments.length;L++)S[L-1]=arguments[L];for(var N=0;N<S.length;N+=1)(function H(U,$,B,V){for(var q in B=B||0,V=V||ae,$){var lt;$.hasOwnProperty(q)&&((lt=$[q])!==null&&ie(lt)?(ie(U[q])||(U[q]={}),B<V?H(U[q],lt,B+1,V):U[q]=$[q]):rn(lt)?(U[q]=[],U[q]=U[q].concat(lt)):lt!==void 0&&(U[q]=lt))}})(_,S[N]);return _}function Ct(_){return _}(function(_,S){var L;if(He(_))return(L=function(){for(var N=[],H=0;H<arguments.length;H++)N[H]=arguments[H];var U,$=S?S.apply(this,N):N[0],B=L.cache;return B.has($)?B.get($):(U=_.apply(this,N),B.set($,U),U)}).cache=new Map;throw new TypeError("Expected a function")})(function(_,$){var L=($=$===void 0?{}:$).fontSize,N=$.fontFamily,H=$.fontWeight,U=$.fontStyle,$=$.fontVariant;return(At=At||document.createElement("canvas").getContext("2d")).font=[U,$,H,L+"px",N].join(" "),At.measureText(pn(_,"String")?_:"").width},function(_,S){return function(){for(var L=0,N=0,H=arguments.length;N<H;N++)L+=arguments[N].length;for(var U=Array(L),$=0,N=0;N<H;N++)for(var B=arguments[N],V=0,q=B.length;V<q;V++,$++)U[$]=B[V];return U}([_],Te(S=S===void 0?{}:S)).join("")});var At,pt=typeof Float32Array!="undefined"?Float32Array:Array;function mt(){var _=new pt(9);return pt!=Float32Array&&(_[1]=0,_[2]=0,_[3]=0,_[5]=0,_[6]=0,_[7]=0),_[0]=1,_[4]=1,_[8]=1,_}Math.hypot||(Math.hypot=function(){for(var _=0,S=arguments.length;S--;)_+=arguments[S]*arguments[S];return Math.sqrt(_)});var Rt=function(_,ft,gt){var N=ft[0],H=ft[1],U=ft[2],$=ft[3],B=ft[4],V=ft[5],q=ft[6],lt=ft[7],ft=ft[8],St=gt[0],ut=gt[1],Ot=gt[2],bt=gt[3],it=gt[4],Pt=gt[5],_t=gt[6],Lt=gt[7],gt=gt[8];return _[0]=St*N+ut*$+Ot*q,_[1]=St*H+ut*B+Ot*lt,_[2]=St*U+ut*V+Ot*ft,_[3]=bt*N+it*$+Pt*q,_[4]=bt*H+it*B+Pt*lt,_[5]=bt*U+it*V+Pt*ft,_[6]=_t*N+Lt*$+gt*q,_[7]=_t*H+Lt*B+gt*lt,_[8]=_t*U+Lt*V+gt*ft,_};function Yt(){var _=new pt(16);return pt!=Float32Array&&(_[1]=0,_[2]=0,_[3]=0,_[4]=0,_[6]=0,_[7]=0,_[8]=0,_[9]=0,_[11]=0,_[12]=0,_[13]=0,_[14]=0),_[0]=1,_[5]=1,_[10]=1,_[15]=1,_}var de=function(_,_t,L){var N=_t[0],H=_t[1],U=_t[2],$=_t[3],B=_t[4],V=_t[5],q=_t[6],lt=_t[7],ft=_t[8],St=_t[9],ut=_t[10],Ot=_t[11],bt=_t[12],it=_t[13],Pt=_t[14],_t=_t[15],Lt=L[0],gt=L[1],kt=L[2],Xt=L[3];return _[0]=Lt*N+gt*B+kt*ft+Xt*bt,_[1]=Lt*H+gt*V+kt*St+Xt*it,_[2]=Lt*U+gt*q+kt*ut+Xt*Pt,_[3]=Lt*$+gt*lt+kt*Ot+Xt*_t,Lt=L[4],gt=L[5],kt=L[6],Xt=L[7],_[4]=Lt*N+gt*B+kt*ft+Xt*bt,_[5]=Lt*H+gt*V+kt*St+Xt*it,_[6]=Lt*U+gt*q+kt*ut+Xt*Pt,_[7]=Lt*$+gt*lt+kt*Ot+Xt*_t,Lt=L[8],gt=L[9],kt=L[10],Xt=L[11],_[8]=Lt*N+gt*B+kt*ft+Xt*bt,_[9]=Lt*H+gt*V+kt*St+Xt*it,_[10]=Lt*U+gt*q+kt*ut+Xt*Pt,_[11]=Lt*$+gt*lt+kt*Ot+Xt*_t,Lt=L[12],gt=L[13],kt=L[14],Xt=L[15],_[12]=Lt*N+gt*B+kt*ft+Xt*bt,_[13]=Lt*H+gt*V+kt*St+Xt*it,_[14]=Lt*U+gt*q+kt*ut+Xt*Pt,_[15]=Lt*$+gt*lt+kt*Ot+Xt*_t,_};function Ae(_){for(var S=[],L=1;L<arguments.length;L++)S[L-1]=arguments[L];return _?S.reduce(function(N,H){return function(U){return H(N(U))}},_):Ct}function ge(_){return _ instanceof Float32Array||_ instanceof Array}function me(_,S,L){for(;_<S;)_+=2*Math.PI;for(;L<_;)_-=2*Math.PI;return _}hn=new pt(3),pt!=Float32Array&&(hn[0]=0,hn[1]=0,hn[2]=0),hn=new pt(4),pt!=Float32Array&&(hn[0]=0,hn[1]=0,hn[2]=0,hn[3]=0);function Ce($,S,L,N,H){var U=($=ct($,2))[0],$=$[1],B=mt();return U=[U,$],($=B)[0]=1,$[1]=0,$[2]=0,$[3]=0,$[4]=1,$[5]=0,$[6]=U[0],$[7]=U[1],$[8]=1,$}function le(_,...S){return S.reduce((L,N)=>H=>L(N(H)),_)}function ze(_,S){return S-_?L=>(L-_)/(S-_):L=>.5}const Le=Math.sqrt(50),Dt=Math.sqrt(10),Nt=Math.sqrt(2);function en(_,S,L){return S=(S-_)/Math.max(0,L),_=Math.floor(Math.log(S)/Math.LN10),L=S/mn(10,_),0<=_?(L>=Le?10:L>=Dt?5:L>=Nt?2:1)*mn(10,_):-mn(10,-_)/(L>=Le?10:L>=Dt?5:L>=Nt?2:1)}const jn=(_,S,L=5)=>{_=[_,S];let N=0,H=_.length-1,U=_[N],$=_[H],B;return $<U&&([U,$]=[$,U],[N,H]=[H,N]),0<(B=en(U,$,L))?(U=Math.floor(U/B)*B,$=Math.ceil($/B)*B,B=en(U,$,L)):B<0&&(U=Math.ceil(U*B)/B,$=Math.floor($*B)/B,B=en(U,$,L)),0<B?(_[N]=Math.floor(U/B)*B,_[H]=Math.ceil($/B)*B):B<0&&(_[N]=Math.ceil(U*B)/B,_[H]=Math.floor($*B)/B),_};function Tn(_){return _!=null&&!Number.isNaN(_)}function bn(_,S){return L=>{L.prototype.rescale=function(){this.initRange(),this.nice();var[N]=this.chooseTransforms();this.composeOutput(N,this.chooseClamp(N))},L.prototype.initRange=function(){var N=this.options.interpolator;this.options.range=_(N)},L.prototype.composeOutput=function(N,H){var U,{domain:B,interpolator:$,round:V}=this.getOptions(),B=S(B.map(N)),V=V?(U=$,q=>(q=U(q),Ht(q)?Math.round(q):q)):$;this.output=le(V,B,H,N)},L.prototype.invert=void 0}}var G,hn={exports:{}},hr={exports:{}},on=function(_){return!(!_||typeof _=="string")&&(_ instanceof Array||Array.isArray(_)||0<=_.length&&(_.splice instanceof Function||Object.getOwnPropertyDescriptor(_,_.length-1)&&_.constructor.name!=="String"))},nr=Array.prototype.concat,rr=Array.prototype.slice,or=hr.exports=function(_){for(var S=[],L=0,N=_.length;L<N;L++){var H=_[L];on(H)?S=nr.call(S,rr.call(H)):S.push(H)}return S},pr=(or.wrap=function(_){return function(){return _(or(arguments))}},{aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]}),Nn=hr.exports,Yr=Object.hasOwnProperty,an=Object.create(null);for(G in pr)Yr.call(pr,G)&&(an[pr[G]]=G);var _e=hn.exports={to:{},get:{}};function Zn(_,S,L){return Math.min(Math.max(S,_),L)}function ho(_){return _=Math.round(_).toString(16).toUpperCase(),_.length<2?"0"+_:_}_e.get=function(_){var S,L;switch(_.substring(0,3).toLowerCase()){case"hsl":S=_e.get.hsl(_),L="hsl";break;case"hwb":S=_e.get.hwb(_),L="hwb";break;default:S=_e.get.rgb(_),L="rgb"}return S?{model:L,value:S}:null},_e.get.rgb=function(_){if(!_)return null;var S,L,N,H=[0,0,0,1];if(S=_.match(/^#([a-f0-9]{6})([a-f0-9]{2})?$/i)){for(N=S[2],S=S[1],L=0;L<3;L++){var U=2*L;H[L]=parseInt(S.slice(U,2+U),16)}N&&(H[3]=parseInt(N,16)/255)}else if(S=_.match(/^#([a-f0-9]{3,4})$/i)){for(N=(S=S[1])[3],L=0;L<3;L++)H[L]=parseInt(S[L]+S[L],16);N&&(H[3]=parseInt(N+N,16)/255)}else{if(S=_.match(/^rgba?\(\s*([+-]?\d+)(?=[\s,])\s*(?:,\s*)?([+-]?\d+)(?=[\s,])\s*(?:,\s*)?([+-]?\d+)\s*(?:[,|\/]\s*([+-]?[\d\.]+)(%?)\s*)?\)$/))for(L=0;L<3;L++)H[L]=parseInt(S[L+1],0);else{if(!(S=_.match(/^rgba?\(\s*([+-]?[\d\.]+)\%\s*,?\s*([+-]?[\d\.]+)\%\s*,?\s*([+-]?[\d\.]+)\%\s*(?:[,|\/]\s*([+-]?[\d\.]+)(%?)\s*)?\)$/)))return(S=_.match(/^(\w+)$/))?S[1]==="transparent"?[0,0,0,0]:Yr.call(pr,S[1])?((H=pr[S[1]])[3]=1,H):null:null;for(L=0;L<3;L++)H[L]=Math.round(2.55*parseFloat(S[L+1]))}S[4]&&(S[5]?H[3]=.01*parseFloat(S[4]):H[3]=parseFloat(S[4]))}for(L=0;L<3;L++)H[L]=Zn(H[L],0,255);return H[3]=Zn(H[3],0,1),H},_e.get.hsl=function(_){var S;return(_=_&&_.match(/^hsla?\(\s*([+-]?(?:\d{0,3}\.)?\d+)(?:deg)?\s*,?\s*([+-]?[\d\.]+)%\s*,?\s*([+-]?[\d\.]+)%\s*(?:[,|\/]\s*([+-]?(?=\.\d|\d)(?:0|[1-9]\d*)?(?:\.\d*)?(?:[eE][+-]?\d+)?)\s*)?\)$/))?(S=parseFloat(_[4]),[(parseFloat(_[1])%360+360)%360,Zn(parseFloat(_[2]),0,100),Zn(parseFloat(_[3]),0,100),Zn(isNaN(S)?1:S,0,1)]):null},_e.get.hwb=function(_){var S;return(_=_&&_.match(/^hwb\(\s*([+-]?\d{0,3}(?:\.\d+)?)(?:deg)?\s*,\s*([+-]?[\d\.]+)%\s*,\s*([+-]?[\d\.]+)%\s*(?:,\s*([+-]?(?=\.\d|\d)(?:0|[1-9]\d*)?(?:\.\d*)?(?:[eE][+-]?\d+)?)\s*)?\)$/))?(S=parseFloat(_[4]),[(parseFloat(_[1])%360+360)%360,Zn(parseFloat(_[2]),0,100),Zn(parseFloat(_[3]),0,100),Zn(isNaN(S)?1:S,0,1)]):null},_e.to.hex=function(){var _=Nn(arguments);return"#"+ho(_[0])+ho(_[1])+ho(_[2])+(_[3]<1?ho(Math.round(255*_[3])):"")},_e.to.rgb=function(){var _=Nn(arguments);return _.length<4||_[3]===1?"rgb("+Math.round(_[0])+", "+Math.round(_[1])+", "+Math.round(_[2])+")":"rgba("+Math.round(_[0])+", "+Math.round(_[1])+", "+Math.round(_[2])+", "+_[3]+")"},_e.to.rgb.percent=function(){var _=Nn(arguments),S=Math.round(_[0]/255*100),L=Math.round(_[1]/255*100),N=Math.round(_[2]/255*100);return _.length<4||_[3]===1?"rgb("+S+"%, "+L+"%, "+N+"%)":"rgba("+S+"%, "+L+"%, "+N+"%, "+_[3]+")"},_e.to.hsl=function(){var _=Nn(arguments);return _.length<4||_[3]===1?"hsl("+_[0]+", "+_[1]+"%, "+_[2]+"%)":"hsla("+_[0]+", "+_[1]+"%, "+_[2]+"%, "+_[3]+")"},_e.to.hwb=function(){var _=Nn(arguments),S="";return 4<=_.length&&_[3]!==1&&(S=", "+_[3]),"hwb("+_[0]+", "+_[1]+"%, "+_[2]+"%"+S+")"},_e.to.keyword=function(_){return an[_.slice(0,3)]};var Ni=hn.exports;function zn(_,S,L){let N=L;return N<0&&(N+=1),1<N&&--N,N<1/6?_+6*(S-_)*N:N<.5?S:N<2/3?_+(S-_)*(2/3-N)*6:_}function Ho(H){var S,L,N,H=Ni.get(H);return H?({model:H,value:S}=H,H==="rgb"?S:H==="hsl"?(S=(H=S)[0]/360,L=H[1]/100,N=H[2]/100,H=H[3],L==0?[255*N,255*N,255*N,H]:[255*zn(L=2*N-(N=N<.5?N*(1+L):N+L-N*L),N,S+1/3),255*zn(L,N,S),255*zn(L,N,S-1/3),H]):null):null}const Bn=(_,S)=>L=>_*(1-L)+S*L,bs=(_,S)=>{if(typeof _=="number"&&typeof S=="number")return Bn(_,S);if(typeof _!="string"||typeof S!="string")return()=>_;{var L=_,N=S;const H=Ho(L),U=Ho(N);return H===null||U===null?H?()=>L:()=>N:$=>{var B=new Array(4);for(let Ot=0;Ot<4;Ot+=1){var V=H[Ot],q=U[Ot];B[Ot]=V*(1-$)+q*$}var[lt,ft,St,ut]=B;return`rgba(${Math.round(lt)}, ${Math.round(ft)}, ${Math.round(St)}, ${ut})`}}},zi=(_,S)=>{const L=Bn(_,S);return N=>Math.round(L(N))};function Bi({map:_,initKey:S},L){return S=S(L),_.has(S)?_.get(S):L}function xp(_){return typeof _=="object"?_.valueOf():_}class ht extends Map{constructor(S){if(super(),this.map=new Map,this.initKey=xp,S!==null)for(var[L,N]of S)this.set(L,N)}get(S){return super.get(Bi({map:this.map,initKey:this.initKey},S))}has(S){return super.has(Bi({map:this.map,initKey:this.initKey},S))}set(S,L){return super.set(([{map:S,initKey:N},H]=[{map:this.map,initKey:this.initKey},S],N=N(H),S.has(N)?S.get(N):(S.set(N,H),H)),L);var N,H}delete(S){return super.delete(([{map:S,initKey:L},N]=[{map:this.map,initKey:this.initKey},S],L=L(N),S.has(L)&&(N=S.get(L),S.delete(L)),N));var L,N}}class vs{constructor(S){this.options=Fe({},this.getDefaultOptions()),this.update(S)}getOptions(){return this.options}update(S={}){this.options=Fe({},this.options,S),this.rescale(S)}rescale(S){}}const Wr=Symbol("defaultUnknown");function $i(_,S,L){for(let N=0;N<S.length;N+=1)_.has(S[N])||_.set(L(S[N]),N)}function yo(S){var{value:S,from:L,to:N,mapper:H,notFoundReturn:U}=S;let $=H.get(S);if($===void 0){if(U!==Wr)return U;$=L.push(S)-1,H.set(S,$)}return N[$%N.length]}function Yi(_){return _ instanceof Date?S=>""+S:typeof _=="object"?S=>JSON.stringify(S):S=>S}class Xo extends vs{getDefaultOptions(){return{domain:[],range:[],unknown:Wr}}constructor(S){super(S)}map(S){return this.domainIndexMap.size===0&&$i(this.domainIndexMap,this.getDomain(),this.domainKey),yo({value:this.domainKey(S),mapper:this.domainIndexMap,from:this.getDomain(),to:this.getRange(),notFoundReturn:this.options.unknown})}invert(S){return this.rangeIndexMap.size===0&&$i(this.rangeIndexMap,this.getRange(),this.rangeKey),yo({value:this.rangeKey(S),mapper:this.rangeIndexMap,from:this.getRange(),to:this.getDomain(),notFoundReturn:this.options.unknown})}rescale(S){var[L]=this.options.domain,[N]=this.options.range;this.domainKey=Yi(L),this.rangeKey=Yi(N),this.rangeIndexMap?(S&&!S.range||this.rangeIndexMap.clear(),S&&!S.domain&&!S.compare||(this.domainIndexMap.clear(),this.sortedDomain=void 0)):(this.rangeIndexMap=new Map,this.domainIndexMap=new Map)}clone(){return new Xo(this.options)}getRange(){return this.options.range}getDomain(){var S,L;return this.sortedDomain||({domain:S,compare:L}=this.options,this.sortedDomain=L?[...S].sort(L):S),this.sortedDomain}}function Wi(it){const{domain:S,range:L,paddingOuter:N,paddingInner:H,flex:U,round:$,align:B}=it;var V=S.length,ut=0<(ut=(it=V)-(q=U).length)?[...q,...new Array(ut).fill(1)]:ut<0?q.slice(0,it):q,[it,q]=L,q=q-it,bt=q/(2/V*N+1-1/V*H);const lt=bt*H/V;bt-=V*lt;const ft=function(gt){const kt=Math.min(...gt);return gt.map(Xt=>Xt/kt)}(ut),St=bt/ft.reduce((gt,kt)=>gt+kt);var ut=new ht(S.map((gt,kt)=>(kt=ft[kt]*St,[gt,$?Math.floor(kt):kt]))),Ot=new ht(S.map((gt,kt)=>(kt=ft[kt]*St+lt,[gt,$?Math.floor(kt):kt]))),bt=Array.from(Ot.values()).reduce((gt,kt)=>gt+kt),it=it+(q-(bt-bt/V*H))*B;let Pt=$?Math.round(it):it;var _t=new Array(V);for(let gt=0;gt<V;gt+=1){_t[gt]=(Lt=Pt,Math.round(1e12*Lt)/1e12);var Lt=S[gt];Pt+=Ot.get(Lt)}return{valueBandWidth:ut,valueStep:Ot,adjustedRange:_t}}class Go extends Xo{getDefaultOptions(){return{domain:[],range:[0,1],align:.5,round:!1,paddingInner:0,paddingOuter:0,padding:0,unknown:Wr,flex:[]}}constructor(S){super(S)}clone(){return new Go(this.options)}getStep(S){return this.valueStep===void 0?1:typeof this.valueStep=="number"?this.valueStep:S===void 0?Array.from(this.valueStep.values())[0]:this.valueStep.get(S)}getBandWidth(S){return this.valueBandWidth===void 0?1:typeof this.valueBandWidth=="number"?this.valueBandWidth:S===void 0?Array.from(this.valueBandWidth.values())[0]:this.valueBandWidth.get(S)}getRange(){return this.adjustedRange}getPaddingInner(){var{padding:S,paddingInner:L}=this.options;return 0<S?S:L}getPaddingOuter(){var{padding:S,paddingOuter:L}=this.options;return 0<S?S:L}rescale(){super.rescale();var{align:N,domain:S,range:H,round:U,flex:L}=this.options,{adjustedRange:N,valueBandWidth:H,valueStep:U}=function(q){var B=q.domain;if((B=B.length)===0)return{valueBandWidth:void 0,valueStep:void 0,adjustedRange:[]};if(!((V=q.flex)==null||!V.length))return Wi(q);var{range:V,paddingOuter:q,paddingInner:lt,round:ft,align:St}=q;let ut,Ot,bt=V[0];return V=V[1]-bt,ut=V/Math.max(1,2*q+(B-lt)),ft&&(ut=Math.floor(ut)),bt+=(V-ut*(B-lt))*St,Ot=ut*(1-lt),ft&&(bt=Math.round(bt),Ot=Math.round(Ot)),q=new Array(B).fill(0).map((it,Pt)=>bt+Pt*ut),{valueStep:ut,valueBandWidth:Ot,adjustedRange:q}}({align:N,range:H,round:U,flex:L,paddingInner:this.getPaddingInner(),paddingOuter:this.getPaddingOuter(),domain:S});this.valueStep=U,this.valueBandWidth=H,this.adjustedRange=N}}const go=(_,S,L)=>{let N,H,U=_,$=S;if(U===$&&0<L)return[U];let B=en(U,$,L);if(B===0||!Number.isFinite(B))return[];if(0<B){U=Math.ceil(U/B),$=Math.floor($/B),H=new Array(N=Math.ceil($-U+1));for(let V=0;V<N;V+=1)H[V]=(U+V)*B}else{B=-B,U=Math.ceil(U*B),$=Math.floor($*B),H=new Array(N=Math.ceil($-U+1));for(let V=0;V<N;V+=1)H[V]=(U+V)/B}return H},Os=(N,U,L)=>{var[N,H]=N,[U,$]=U;let B,V;return le(V=N<H?(B=ze(N,H),L(U,$)):(B=ze(H,N),L($,U)),B)},Zi=(_,S,L)=>{const N=Math.min(_.length,S.length)-1,H=new Array(N),U=new Array(N);var $=_[0]>_[N],B=$?[..._].reverse():_,V=$?[...S].reverse():S;for(let q=0;q<N;q+=1)H[q]=ze(B[q],B[q+1]),U[q]=L(V[q],V[q+1]);return q=>{var lt=function(St,ut,Ot,bt,it){let Pt=Ot||0,_t=bt||St.length;for(var Lt=it||(kt=>kt);Pt<_t;){var gt=Math.floor((Pt+_t)/2);Lt(St[gt])>ut?_t=gt:Pt=gt+1}return Pt}(_,q,1,N)-1,ft=H[lt];return le(U[lt],ft)(q)}},Hi=(_,S,L,N)=>(2<Math.min(_.length,S.length)?Zi:Os)(_,S,N?zi:L);class Xi extends vs{getDefaultOptions(){return{domain:[0,1],range:[0,1],nice:!1,clamp:!1,round:!1,interpolate:Bn,tickCount:5}}map(S){return Tn(S)?this.output(S):this.options.unknown}invert(S){return Tn(S)?this.input(S):this.options.unknown}nice(){var S,L,N,H;this.options.nice&&([S,L,N,...H]=this.getTickMethodOptions(),this.options.domain=this.chooseNice()(S,L,N,...H))}getTicks(){var S=this.options.tickMethod,[L,N,H,...U]=this.getTickMethodOptions();return S(L,N,H,...U)}getTickMethodOptions(){var{domain:S,tickCount:L}=this.options;return[S[0],S[S.length-1],L]}chooseNice(){return jn}rescale(){this.nice();var[S,L]=this.chooseTransforms();this.composeOutput(S,this.chooseClamp(S)),this.composeInput(S,L,this.chooseClamp(L))}chooseClamp(N){var{clamp:L,range:H}=this.options,N=this.options.domain.map(N),H=Math.min(N.length,H.length);if(L){L=N[0],N=N[H-1];const U=N<L?N:L,$=N<L?L:N;return B=>Math.min(Math.max(U,B),$)}return Ct}composeOutput(S,L){var{domain:$,range:N,round:H,interpolate:U}=this.options,$=Hi($.map(S),N,U,H);this.output=le($,L,S)}composeInput(S,L,N){var{domain:H,range:U}=this.options,U=Hi(U,H.map(S),Bn);this.input=le(L,N,U)}}class Qe extends Xi{getDefaultOptions(){return{domain:[0,1],range:[0,1],unknown:void 0,nice:!1,clamp:!1,round:!1,interpolate:bs,tickMethod:go,tickCount:5}}chooseTransforms(){return[Ct,Ct]}clone(){return new Qe(this.options)}}class mo extends Go{getDefaultOptions(){return{domain:[],range:[0,1],align:.5,round:!1,padding:0,unknown:Wr,paddingInner:1,paddingOuter:0}}constructor(S){super(S)}getPaddingInner(){return 1}clone(){return new mo(this.options)}update(S){super.update(S)}getPaddingOuter(){return this.options.padding}}function Gi(_,S){for(var L=[],N=0,H=_.length;N<H;N++)L.push(_[N].substr(0,S));return L}var Uo,hr=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],hn=["January","February","March","April","May","June","July","August","September","October","November","December"],Vo=Gi(hn,3);(function(_){for(var S=[],L=1;L<arguments.length;L++)S[L-1]=arguments[L];for(var N=0,H=S;N<H.length;N++){var U,$=H[N];for(U in $)_[U]=$[U]}})({},{dayNamesShort:Gi(hr,3),dayNames:hr,monthNamesShort:Vo,monthNames:hn,amPm:["am","pm"],DoFn:function(_){return _+["th","st","nd","rd"][3<_%10?0:(_-_%10!=10?1:0)*_%10]}});var qo;let Ko=Uo=class extends Qe{getDefaultOptions(){return{domain:[0,1],unknown:void 0,nice:!1,clamp:!1,round:!1,interpolator:Ct,tickMethod:go,tickCount:5}}constructor(_){super(_)}clone(){return new Uo(this.options)}};Ko=Uo=function(_,S,L,N){var H,U=arguments.length,$=U<3?S:N===null?N=Object.getOwnPropertyDescriptor(S,L):N;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")$=Reflect.decorate(_,S,L,N);else for(var B=_.length-1;0<=B;B--)(H=_[B])&&($=(U<3?H($):3<U?H(S,L,$):H(S,L))||$);return 3<U&&$&&Object.defineProperty(S,L,$),$}([bn(function(_){return[_(0),_(1)]},S=>{var[S,L]=S;return le(Bn(0,1),ze(S,L))})],Ko);let Ui=qo=class extends Qe{getDefaultOptions(){return{domain:[0,.5,1],unknown:void 0,nice:!1,clamp:!1,round:!1,interpolator:Ct,tickMethod:go,tickCount:5}}constructor(_){super(_)}clone(){return new qo(this.options)}};Ui=qo=function(_,S,L,N){var H,U=arguments.length,$=U<3?S:N===null?N=Object.getOwnPropertyDescriptor(S,L):N;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")$=Reflect.decorate(_,S,L,N);else for(var B=_.length-1;0<=B;B--)(H=_[B])&&($=(U<3?H($):3<U?H(S,L,$):H(S,L))||$);return 3<U&&$&&Object.defineProperty(S,L,$),$}([bn(function(_){return[_(0),_(.5),_(1)]},_=>{const[S,L,N]=_,H=le(Bn(0,.5),ze(S,L)),U=le(Bn(.5,1),ze(L,N));return $=>(S>N?$<L?U:H:$<L?H:U)($)})],Ui);function xs(_,S,L,N,H){var U=new Qe({range:[S,S+N]}),$=new Qe({range:[L,L+H]});return{transform:function(q){var q=ct(q,2),V=q[0],q=q[1];return[U.map(V),$.map(q)]},untransform:function(q){var q=ct(q,2),V=q[0],q=q[1];return[U.invert(V),$.invert(q)]}}}function _s(_,S,L,N,H){return(0,ct(_,1)[0])(S,L,N,H)}function ws(_,S,L,N,H){return ct(_,1)[0]}function Ss(V,S,L,N,H){var U=(V=ct(V,4))[0],$=V[1],B=V[2],V=V[3],q=new Qe({range:[B,V]}),lt=new Qe({range:[U,$]}),ft=1<(B=H/N)?1:B,St=1<B?1/B:1;return{transform:function(bt){var bt=ct(bt,2),Ot=bt[0],bt=bt[1],Ot=lt.map(Ot),bt=q.map(bt);return[.5*(bt*Math.cos(Ot)*ft)+.5,.5*(bt*Math.sin(Ot)*St)+.5]},untransform:function(it){var it=ct(it,2),Ot=it[0],it=it[1],Ot=2*(Ot-.5)/ft,it=2*(it-.5)/St,bt=Math.sqrt(Math.pow(Ot,2)+Math.pow(it,2)),it=me(Math.atan2(it,Ot),U,$);return[lt.invert(it),q.invert(bt)]}}}function js(_,S,L,N,H){return{transform:function($){var $=ct($,2),B=$[0];return[$[1],B]},untransform:function($){var $=ct($,2),B=$[0];return[$[1],B]}}}function Zr(_){for(var S=[],L=1;L<arguments.length;L++)S[L-1]=arguments[L];return bo.apply(void 0,ce([[-1,-1]],ct(S),!1))}function Il(_){for(var S=[],L=1;L<arguments.length;L++)S[L-1]=arguments[L];return bo.apply(void 0,ce([[-1,1]],ct(S),!1))}function Fl(_){for(var S=[],L=1;L<arguments.length;L++)S[L-1]=arguments[L];return bo.apply(void 0,ce([[1,-1]],ct(S),!1))}function _p($,S,L,N,H){var U,$=ct($,1)[0],B=mt();return B=B,$=$,U=Math.sin($),$=Math.cos($),B[0]=$,B[1]=U,B[2]=0,B[3]=-U,B[4]=$,B[5]=0,B[6]=0,B[7]=0,B[8]=1,B}function Es(_,S,L,N,H){var U=(_=ct(_,4))[0],$=_[1],B=_[2],V=(_[3]-B)/(+$/(2*Math.PI)+1),q=V/(2*Math.PI),lt=new Qe({range:[B,B+.99*V]}),ft=new Qe({range:[U,$]}),St=1<(_=H/N)?1:_,ut=1<_?1/_:1;return{transform:function(it){var it=ct(it,2),bt=it[0],it=it[1],bt=ft.map(bt),it=lt.map(it);return[.5*(Math.cos(bt)*(q*bt+it)*St)+.5,.5*(Math.sin(bt)*(q*bt+it)*ut)+.5]},untransform:function(it){var it=ct(it,2),Pt=it[0],it=it[1],Pt=2*(Pt-.5)/St,it=2*(it-.5)/ut,bt=Math.sqrt(Math.pow(Pt,2)+Math.pow(it,2)),it=me(Math.atan2(it,Pt)+Math.floor(bt/V)*Math.PI*2,U,$),Pt=bt-q*it;return[ft.invert(it),lt.invert(Pt)]}}}function As(V,S,L,N,H){var U=(V=ct(V,4))[0],$=V[1],B=V[2],V=V[3],q=new Qe({range:[B,V]});return{transform:function(lt){for(var ft=[],St=lt.length,ut=new mo({domain:new Array(St).fill(0).map(function(Pt,_t){return _t}),range:[U,$]}),Ot=0;Ot<St;Ot++){var it=lt[Ot],bt=ut.map(Ot),it=q.map(it);ft.push(bt,it)}return ft},untransform:function(lt){for(var ft=[],St=0;St<lt.length;St+=2){var ut=lt[St+1];ft.push(q.invert(ut))}return ft}}}var bo=function($,S,L,N,H){var $=ct($,2),U=$[0],$=$[1],B=mt();return U=[U,$],($=B)[0]=U[0],$[1]=0,$[2]=0,$[3]=0,$[4]=U[1],$[5]=0,$[6]=0,$[7]=0,$[8]=1,$};function Vi(_){return 1/Math.tan(_)}function Nl(_,S,L,N,H){var U=Vi(ct(_,1)[0]);return{transform:function(V){var V=ct(V,2),B=V[0],V=V[1];return[B+V*U,V]},untransform:function(V){var V=ct(V,2),B=V[0],V=V[1];return[B-V*U,V]}}}function et(_,S,L,N,H){var U=Vi(ct(_,1)[0]);return{transform:function(B){var B=ct(B,2),V=B[0];return[V,B[1]+V*U]},untransform:function(B){var B=ct(B,2),V=B[0];return[V,B[1]-V*U]}}}function vo(_,S,L,B,$){var U=_<S,$=(U?S-B:$-S)||$-B,B=U?-1:1;return B*$*(L+1)/(L+$/((_-S)*B))+S}function Qo(_,S,L,N,$){var U=_<S,$=(U?S-N:$-S)||$-N;return $/($*(L+1)/(_-S)-L*(U?-1:1))+S}function Hr(_,S,L){return L?new Qe({range:[0,1],domain:[0,S]}).map(_):_}function Ms(B,S,L,N,H){var U=(B=ct(B,3))[0],$=B[1],B=B[2],V=Hr(U,N,B!==void 0&&B);return{transform:function(ft){var ft=ct(ft,2),lt=ft[0],ft=ft[1];return[vo(lt,V,$,0,1),ft]},untransform:function(ft){var ft=ct(ft,2),lt=ft[0],ft=ft[1];return[Qo(lt,V,$,0,1),ft]}}}function ks(B,S,L,N,H){var U=(B=ct(B,3))[0],$=B[1],B=B[2],V=Hr(U,H,B!==void 0&&B);return{transform:function(q){return q=ct(q,2),[q[0],vo(q[1],V,$,0,1)]},untransform:function(q){return q=ct(q,2),[q[0],Qo(q[1],V,$,0,1)]}}}function Ps(q,S,L,N,H){var U=(q=ct(q,5))[0],$=q[1],B=q[2],V=q[3],q=q[4],lt=Hr(U,N,q=q!==void 0&&q),ft=Hr($,H,q);return{transform:function(Ot){var Ot=ct(Ot,2),ut=Ot[0],Ot=Ot[1];return[vo(ut,lt,B,0,1),vo(Ot,ft,V,0,1)]},untransform:function(Ot){var Ot=ct(Ot,2),ut=Ot[0],Ot=Ot[1];return[Qo(ut,lt,B,0,1),Qo(Ot,ft,V,0,1)]}}}function Oo(q,S,L,N,H){var U=(q=ct(q,5))[0],$=q[1],B=q[2],V=q[3],q=(q=q[4])!==void 0&&q,lt=new Qe({range:[0,N]}),ft=new Qe({range:[0,H]}),St=q?U:lt.map(U),ut=q?$:ft.map($);return{transform:function(it){var it=ct(it,2),bt=it[0],it=it[1],Pt=lt.map(bt)-St,_t=ft.map(it)-ut,Lt=Math.sqrt(Pt*Pt+_t*_t);return B<Lt?[bt,it]:(bt=vo(Lt,0,V,0,B),it=Math.atan2(_t,Pt),Lt=St+bt*Math.cos(it),_t=ut+bt*Math.sin(it),[lt.invert(Lt),ft.invert(_t)])},untransform:function(it){var it=ct(it,2),bt=it[0],it=it[1],Pt=lt.map(bt)-St,_t=ft.map(it)-ut,Lt=Math.sqrt(Pt*Pt+_t*_t);return B<Lt?[bt,it]:(bt=Qo(Lt,0,V,0,B),it=Math.atan2(_t,Pt),Lt=St+bt*Math.cos(it),_t=ut+bt*Math.sin(it),[lt.invert(Lt),ft.invert(_t)])}}}function ve(_,S,L,N,H,U,$){var B=new Qe({range:[S,S+H]}),V=new Qe({range:[L,L+U]}),q=new Qe({range:[N,N+$]});return{transform:function(ut){var ut=ct(ut,3),ft=ut[0],St=ut[1],ut=ut[2];return[B.map(ft),V.map(St),q.map(ut)]},untransform:function(ut){var ut=ct(ut,3),ft=ut[0],St=ut[1],ut=ut[2];return[B.invert(ft),V.invert(St),q.invert(ut)]}}}function Jo(lt,S,L,N,H,U,$){var B,V=(lt=ct(lt,3))[0],q=lt[1],lt=lt[2];return B=Yt(),V=[V,q,lt],B[0]=1,B[1]=0,B[2]=0,B[3]=0,B[4]=0,B[5]=1,B[6]=0,B[7]=0,B[8]=0,B[9]=0,B[10]=1,B[11]=0,B[12]=V[0],B[13]=V[1],B[14]=V[2],B[15]=1,B}function Ts(_,S,L,N,H,U,$){return{transform:function(V){var V=ct(V,3),q=V[0];return[V[1],q,V[2]]},untransform:function(V){var V=ct(V,3),q=V[0];return[V[1],q,V[2]]}}}function wp(lt,S,L,N,H,U,$){var B,V=(lt=ct(lt,3))[0],q=lt[1],lt=lt[2];return B=Yt(),V=[V,q,lt],B[0]=V[0],B[1]=0,B[2]=0,B[3]=0,B[4]=0,B[5]=V[1],B[6]=0,B[7]=0,B[8]=0,B[9]=0,B[10]=V[2],B[11]=0,B[12]=0,B[13]=0,B[14]=0,B[15]=1,B}En.prototype.update=function(_){this.options=Fe({},this.options,_),this.recoordinate()},En.prototype.clone=function(){return new En(this.options)},En.prototype.getOptions=function(){return this.options},En.prototype.clear=function(){this.update({transformations:[]})},En.prototype.getSize=function(){var _=this.options;return[_.width,_.height]},En.prototype.getCenter=function(){var _=this.options,S=_.x,L=_.y;return[(2*S+_.width)/2,(2*L+_.height)/2]},En.prototype.transform=function(){for(var _=[],S=0;S<arguments.length;S++)_[S]=arguments[S];var L=this.options.transformations;return this.update({transformations:ce(ce([],ct(L),!1),[ce([],ct(_),!1)],!1)}),this},En.prototype.map=function(_){return this.output(_)},En.prototype.invert=function(_){return this.input(_)},En.prototype.recoordinate=function(){this.output=this.compose(),this.input=this.compose(!0)},En.prototype.compose=function(_){function S(gt,kt){var Xt;B.push((kt=kt===void 0?!0:kt)?(Xt=gt,function(Ut){for(var $n=[],yn=0;yn<Ut.length-1;yn+=2){var An=[Ut[yn],Ut[yn+1]],An=Xt(An);$n.push.apply($n,ce([],ct(An),!1))}return $n}):gt)}var L,N,H=(_=_===void 0?!1:_)?ce([],ct(this.options.transformations),!1).reverse():this.options.transformations,U=_?function(gt){return gt.untransform}:function(gt){return gt.transform},$=[],B=[];try{for(var V=Zt(H),q=V.next();!q.done;q=V.next()){var lt,ft,St,ut,Ot,bt,it=ct(q.value),Pt=it[0],_t=it.slice(1),Lt=this.transformers[Pt];Lt&&(ft=(lt=this.options).x,St=lt.y,ut=lt.width,Ot=lt.height,ge(bt=Lt(ce([],ct(_t),!1),ft,St,ut,Ot))?$.push(bt):($.length&&(S(this.createMatrixTransform($,_)),$.splice(0,$.length)),S(U(bt)||Ct,Pt!=="parallel")))}}catch(gt){L={error:gt}}finally{try{q&&!q.done&&(N=V.return)&&N.call(V)}finally{if(L)throw L.error}}return $.length&&S(this.createMatrixTransform($,_)),Ae.apply(void 0,ce([],ct(B),!1))},En.prototype.createMatrixTransform=function(_,S){var L,N,H,U,$,B,V,q,lt,ft,St,ut,Ot=mt();return S&&_.reverse(),_.forEach(function(bt){return Rt(Ot,Ot,bt)}),S&&(S=_=Ot,(ut=new pt(9))[0]=S[0],ut[1]=S[1],ut[2]=S[2],ut[3]=S[3],ut[4]=S[4],ut[5]=S[5],ut[6]=S[6],ut[7]=S[7],ut[8]=S[8],ut=(S=ut)[0],L=S[1],N=S[2],H=S[3],U=S[4],$=S[5],B=S[6],V=S[7],q=(S=S[8])*U-$*V,St=ut*q+L*(lt=-S*H+$*B)+N*(ft=V*H-U*B))&&(_[0]=q*(St=1/St),_[1]=(-S*L+N*V)*St,_[2]=($*L-N*U)*St,_[3]=lt*St,_[4]=(S*ut-N*B)*St,_[5]=(-$*ut+N*H)*St,_[6]=ft*St,_[7]=(-V*ut+L*B)*St,_[8]=(U*ut-L*H)*St),function(kt){var it,Pt,_t,Lt,gt,kt=[kt[0],kt[1],1];return _t=Ot,Lt=(Pt=it=kt)[0],gt=Pt[1],Pt=Pt[2],it[0]=Lt*_t[0]+gt*_t[3]+Pt*_t[6],it[1]=Lt*_t[1]+gt*_t[4]+Pt*_t[7],it[2]=Lt*_t[2]+gt*_t[5]+Pt*_t[8],[kt[0],kt[1]]}},hr=En;function En(_){this.options={x:0,y:0,width:300,height:150,transformations:[]},this.transformers={cartesian:xs,translate:Ce,custom:_s,matrix:ws,polar:Ss,transpose:js,scale:bo,"shear.x":Nl,"shear.y":et,reflect:Zr,"reflect.x":Il,"reflect.y":Fl,rotate:_p,helix:Es,parallel:As,fisheye:Ps,"fisheye.x":Ms,"fisheye.y":ks,"fisheye.circular":Oo},this.update(_)}sn.prototype.update=function(_){this.options=Fe({},this.options,_),this.recoordinate()},sn.prototype.clone=function(){return new sn(this.options)},sn.prototype.getOptions=function(){return this.options},sn.prototype.clear=function(){this.update({transformations:[]})},sn.prototype.getSize=function(){var _=this.options;return[_.width,_.height,_.depth]},sn.prototype.getCenter=function(){var _=this.options,S=_.x,L=_.y,N=_.z;return[(2*S+_.width)/2,(2*L+_.height)/2,(2*N+_.depth)/2]},sn.prototype.transform=function(){for(var _=[],S=0;S<arguments.length;S++)_[S]=arguments[S];var L=this.options.transformations;return this.update({transformations:ce(ce([],ct(L),!1),[ce([],ct(_),!1)],!1)}),this},sn.prototype.map=function(_){return this.output(_)},sn.prototype.invert=function(_){return this.input(_)},sn.prototype.recoordinate=function(){this.output=this.compose(),this.input=this.compose(!0)},sn.prototype.compose=function(_){function S(Xt,Ut){var $n;B.push((Ut=Ut===void 0?!0:Ut)?($n=Xt,function(yn){for(var An=[],at=0;at<yn.length-1;at+=3){var Re=[yn[at],yn[at+1],yn[at+2]],Re=$n(Re);An.push.apply(An,ce([],ct(Re),!1))}return An}):Xt)}var L,N,H=(_=_===void 0?!1:_)?ce([],ct(this.options.transformations),!1).reverse():this.options.transformations,U=_?function(Xt){return Xt.untransform}:function(Xt){return Xt.transform},$=[],B=[];try{for(var V=Zt(H),q=V.next();!q.done;q=V.next()){var lt,ft,St,ut,Ot,bt,it,Pt,_t=ct(q.value),Lt=_t[0],gt=_t.slice(1),kt=this.transformers[Lt];kt&&(ft=(lt=this.options).x,St=lt.y,ut=lt.z,Ot=lt.width,bt=lt.height,it=lt.depth,ge(Pt=kt(ce([],ct(gt),!1),ft,St,ut,Ot,bt,it))?$.push(Pt):($.length&&(S(this.createMatrixTransform($,_)),$.splice(0,$.length)),S(U(Pt)||Ct,!0)))}}catch(Xt){L={error:Xt}}finally{try{q&&!q.done&&(N=V.return)&&N.call(V)}finally{if(L)throw L.error}}return $.length&&S(this.createMatrixTransform($,_)),Ae.apply(void 0,ce([],ct(B),!1))},sn.prototype.createMatrixTransform=function(_,S){var L,N,H,U,$,B,V,q,lt,ft,St,ut,Ot,bt,it,Pt,_t,Lt,gt,kt,Xt,Ut,$n,yn,An,at,Re,De,ti=Yt();return S&&_.reverse(),_.forEach(function(qi){return de(ti,ti,qi)}),S&&(S=_=ti,(De=new pt(16))[0]=S[0],De[1]=S[1],De[2]=S[2],De[3]=S[3],De[4]=S[4],De[5]=S[5],De[6]=S[6],De[7]=S[7],De[8]=S[8],De[9]=S[9],De[10]=S[10],De[11]=S[11],De[12]=S[12],De[13]=S[13],De[14]=S[14],De[15]=S[15],De=(S=De)[0],L=S[1],N=S[2],H=S[3],U=S[4],$=S[5],B=S[6],V=S[7],q=S[8],lt=S[9],ft=S[10],St=S[11],ut=S[12],Ot=S[13],bt=S[14],S=S[15],Re=(it=De*$-L*U)*(at=ft*S-St*bt)-(Pt=De*B-N*U)*(An=lt*S-St*Ot)+(_t=De*V-H*U)*(yn=lt*bt-ft*Ot)+(Lt=L*B-N*$)*($n=q*S-St*ut)-(gt=L*V-H*$)*(Ut=q*bt-ft*ut)+(kt=N*V-H*B)*(Xt=q*Ot-lt*ut))&&(_[0]=($*at-B*An+V*yn)*(Re=1/Re),_[1]=(N*An-L*at-H*yn)*Re,_[2]=(Ot*kt-bt*gt+S*Lt)*Re,_[3]=(ft*gt-lt*kt-St*Lt)*Re,_[4]=(B*$n-U*at-V*Ut)*Re,_[5]=(De*at-N*$n+H*Ut)*Re,_[6]=(bt*_t-ut*kt-S*Pt)*Re,_[7]=(q*kt-ft*_t+St*Pt)*Re,_[8]=(U*An-$*$n+V*Xt)*Re,_[9]=(L*$n-De*An-H*Xt)*Re,_[10]=(ut*gt-Ot*_t+S*it)*Re,_[11]=(lt*_t-q*gt-St*it)*Re,_[12]=($*Ut-U*yn-B*Xt)*Re,_[13]=(De*yn-L*Ut+N*Xt)*Re,_[14]=(Ot*Pt-ut*Lt-bt*it)*Re,_[15]=(q*Lt-lt*Pt+ft*it)*Re),function(Jt){var Xr,vn,Se,Gr,Tt,je,Jt=[Jt[0],Jt[1],Jt[2],1];return Se=ti,Gr=(vn=Xr=Jt)[0],Tt=vn[1],je=vn[2],vn=vn[3],Xr[0]=Se[0]*Gr+Se[4]*Tt+Se[8]*je+Se[12]*vn,Xr[1]=Se[1]*Gr+Se[5]*Tt+Se[9]*je+Se[13]*vn,Xr[2]=Se[2]*Gr+Se[6]*Tt+Se[10]*je+Se[14]*vn,Xr[3]=Se[3]*Gr+Se[7]*Tt+Se[11]*je+Se[15]*vn,[Jt[0],Jt[1],Jt[2]]}},Vo=sn;function sn(_){this.options={x:0,y:0,z:0,width:300,height:150,depth:150,transformations:[]},this.transformers={cartesian3D:ve,translate3D:Jo,scale3D:wp,transpose3D:Ts},this.update(_)}Q.Coordinate=hr,Q.Coordinate3D=Vo,Object.defineProperty(Q,"__esModule",{value:!0})})},68151:function(Kt,Gt,Q){"use strict";var Zt=Q(87806);Gt.Z=Zt.Z},46057:function(Kt,Gt,Q){"use strict";var Zt=Q(43910);Gt.Z=Zt.Z},52827:function(Kt,Gt){(function(Q,Zt){Zt(Gt)})(this,function(Q){"use strict";function Zt(Ct,At,pt,mt){mt=mt||{};var Rt=mt.maxIterations||100,Yt=mt.tolerance||1e-10,de=Ct(At),Ae=Ct(pt),ge=pt-At;if(de*Ae>0)throw"Initial bisect points must have opposite signs";if(de===0)return At;if(Ae===0)return pt;for(var me=0;me<Rt;++me){ge/=2;var Ce=At+ge,le=Ct(Ce);if(le*de>=0&&(At=Ce),Math.abs(ge)<Yt||le===0)return Ce}return At+ge}function ct(Ct){for(var At=new Array(Ct),pt=0;pt<Ct;++pt)At[pt]=0;return At}function ce(Ct,At){return ct(Ct).map(function(){return ct(At)})}function He(Ct,At){for(var pt=0,mt=0;mt<Ct.length;++mt)pt+=Ct[mt]*At[mt];return pt}function ee(Ct){return Math.sqrt(He(Ct,Ct))}function pn(Ct,At,pt){for(var mt=0;mt<At.length;++mt)Ct[mt]=At[mt]*pt}function rn(Ct,At,pt,mt,Rt){for(var Yt=0;Yt<Ct.length;++Yt)Ct[Yt]=At*pt[Yt]+mt*Rt[Yt]}function ie(Ct,At,pt){pt=pt||{};var mt=pt.maxIterations||At.length*200,Rt=pt.nonZeroDelta||1.05,Yt=pt.zeroDelta||.001,de=pt.minErrorDelta||1e-6,Ae=pt.minErrorDelta||1e-5,ge=pt.rho!==void 0?pt.rho:1,me=pt.chi!==void 0?pt.chi:2,Ce=pt.psi!==void 0?pt.psi:-.5,le=pt.sigma!==void 0?pt.sigma:.5,ze,Le=At.length,Dt=new Array(Le+1);Dt[0]=At,Dt[0].fx=Ct(At),Dt[0].id=0;for(var Nt=0;Nt<Le;++Nt){var en=At.slice();en[Nt]=en[Nt]?en[Nt]*Rt:Yt,Dt[Nt+1]=en,Dt[Nt+1].fx=Ct(en),Dt[Nt+1].id=Nt+1}function jn(an){for(var _e=0;_e<an.length;_e++)Dt[Le][_e]=an[_e];Dt[Le].fx=an.fx}for(var Tn=function(an,_e){return an.fx-_e.fx},bn=At.slice(),G=At.slice(),on=At.slice(),nr=At.slice(),rr=0;rr<mt;++rr){if(Dt.sort(Tn),pt.history){var or=Dt.map(function(an){var _e=an.slice();return _e.fx=an.fx,_e.id=an.id,_e});or.sort(function(an,_e){return an.id-_e.id}),pt.history.push({x:Dt[0].slice(),fx:Dt[0].fx,simplex:or})}for(ze=0,Nt=0;Nt<Le;++Nt)ze=Math.max(ze,Math.abs(Dt[0][Nt]-Dt[1][Nt]));if(Math.abs(Dt[0].fx-Dt[Le].fx)<de&&ze<Ae)break;for(Nt=0;Nt<Le;++Nt){bn[Nt]=0;for(var pr=0;pr<Le;++pr)bn[Nt]+=Dt[pr][Nt];bn[Nt]/=Le}var Nn=Dt[Le];if(rn(G,1+ge,bn,-ge,Nn),G.fx=Ct(G),G.fx<Dt[0].fx)rn(nr,1+me,bn,-me,Nn),nr.fx=Ct(nr),nr.fx<G.fx?jn(nr):jn(G);else if(G.fx>=Dt[Le-1].fx){var Yr=!1;if(G.fx>Nn.fx?(rn(on,1+Ce,bn,-Ce,Nn),on.fx=Ct(on),on.fx<Nn.fx?jn(on):Yr=!0):(rn(on,1-Ce*ge,bn,Ce*ge,Nn),on.fx=Ct(on),on.fx<G.fx?jn(on):Yr=!0),Yr){if(le>=1)break;for(Nt=1;Nt<Dt.length;++Nt)rn(Dt[Nt],1-le,Dt[0],le,Dt[Nt]),Dt[Nt].fx=Ct(Dt[Nt])}}else jn(G)}return Dt.sort(Tn),{fx:Dt[0].fx,x:Dt[0]}}function Ht(Ct,At,pt,mt,Rt,Yt,de){var Ae=pt.fx,ge=He(pt.fxprime,At),me=Ae,Ce=Ae,le=ge,ze=0;Rt=Rt||1,Yt=Yt||1e-6,de=de||.1;function Le(Nt,en,jn){for(var Tn=0;Tn<16;++Tn)if(Rt=(Nt+en)/2,rn(mt.x,1,pt.x,Rt,At),me=mt.fx=Ct(mt.x,mt.fxprime),le=He(mt.fxprime,At),me>Ae+Yt*Rt*ge||me>=jn)en=Rt;else{if(Math.abs(le)<=-de*ge)return Rt;le*(en-Nt)>=0&&(en=Nt),Nt=Rt,jn=me}return 0}for(var Dt=0;Dt<10;++Dt){if(rn(mt.x,1,pt.x,Rt,At),me=mt.fx=Ct(mt.x,mt.fxprime),le=He(mt.fxprime,At),me>Ae+Yt*Rt*ge||Dt&&me>=Ce)return Le(ze,Rt,Ce);if(Math.abs(le)<=-de*ge)return Rt;if(le>=0)return Le(Rt,ze,me);Ce=me,ze=Rt,Rt*=2}return Rt}function Te(Ct,At,pt){var mt={x:At.slice(),fx:0,fxprime:At.slice()},Rt={x:At.slice(),fx:0,fxprime:At.slice()},Yt=At.slice(),de,Ae,ge=1,me;pt=pt||{},me=pt.maxIterations||At.length*20,mt.fx=Ct(mt.x,mt.fxprime),de=mt.fxprime.slice(),pn(de,mt.fxprime,-1);for(var Ce=0;Ce<me;++Ce){if(ge=Ht(Ct,de,mt,Rt,ge),pt.history&&pt.history.push({x:mt.x.slice(),fx:mt.fx,fxprime:mt.fxprime.slice(),alpha:ge}),!ge)pn(de,mt.fxprime,-1);else{rn(Yt,1,Rt.fxprime,-1,mt.fxprime);var le=He(mt.fxprime,mt.fxprime),ze=Math.max(0,He(Yt,Rt.fxprime)/le);rn(de,ze,de,-1,Rt.fxprime),Ae=mt,mt=Rt,Rt=Ae}if(ee(mt.fxprime)<=1e-5)break}return pt.history&&pt.history.push({x:mt.x.slice(),fx:mt.fx,fxprime:mt.fxprime.slice(),alpha:ge}),mt}function ae(Ct,At,pt){pt=pt||{};for(var mt=pt.maxIterations||At.length*100,Rt=pt.learnRate||.001,Yt={x:At.slice(),fx:0,fxprime:At.slice()},de=0;de<mt&&(Yt.fx=Ct(Yt.x,Yt.fxprime),pt.history&&pt.history.push({x:Yt.x.slice(),fx:Yt.fx,fxprime:Yt.fxprime.slice()}),rn(Yt.x,1,Yt.x,-Rt,Yt.fxprime),!(ee(Yt.fxprime)<=1e-5));++de);return Yt}function Fe(Ct,At,pt){pt=pt||{};var mt={x:At.slice(),fx:0,fxprime:At.slice()},Rt={x:At.slice(),fx:0,fxprime:At.slice()},Yt=pt.maxIterations||At.length*100,de=pt.learnRate||1,Ae=At.slice(),ge=pt.c1||.001,me=pt.c2||.1,Ce,le=[];if(pt.history){var ze=Ct;Ct=function(Dt,Nt){return le.push(Dt.slice()),ze(Dt,Nt)}}mt.fx=Ct(mt.x,mt.fxprime);for(var Le=0;Le<Yt&&(pn(Ae,mt.fxprime,-1),de=Ht(Ct,Ae,mt,Rt,de,ge,me),pt.history&&(pt.history.push({x:mt.x.slice(),fx:mt.fx,fxprime:mt.fxprime.slice(),functionCalls:le,learnRate:de,alpha:de}),le=[]),Ce=mt,mt=Rt,Rt=Ce,!(de===0||ee(mt.fxprime)<1e-5));++Le);return mt}Q.bisect=Zt,Q.nelderMead=ie,Q.conjugateGradient=Te,Q.gradientDescent=ae,Q.gradientDescentLineSearch=Fe,Q.zeros=ct,Q.zerosM=ce,Q.norm2=ee,Q.weightedSum=rn,Q.scale=pn})},42956:function(Kt){"use strict";var Gt=Kt.exports;Kt.exports.isNumber=function(Q){return typeof Q=="number"},Kt.exports.findMin=function(Q){if(Q.length===0)return 1/0;for(var Zt=Q[0],ct=1;ct<Q.length;ct++)Zt=Math.min(Zt,Q[ct]);return Zt},Kt.exports.findMax=function(Q){if(Q.length===0)return-1/0;for(var Zt=Q[0],ct=1;ct<Q.length;ct++)Zt=Math.max(Zt,Q[ct]);return Zt},Kt.exports.findMinMulti=function(Q){for(var Zt=Gt.findMin(Q[0]),ct=1;ct<Q.length;ct++)Zt=Math.min(Zt,Gt.findMin(Q[ct]));return Zt},Kt.exports.findMaxMulti=function(Q){for(var Zt=Gt.findMax(Q[0]),ct=1;ct<Q.length;ct++)Zt=Math.max(Zt,Gt.findMax(Q[ct]));return Zt},Kt.exports.inside=function(Q,Zt,ct){return Q<=ct&&ct<=Zt}},78434:function(Kt,Gt,Q){"use strict";var Zt=50,ct=2,ce=Math.log(2),He=Kt.exports,ee=Q(42956);function pn(ie){return 1-Math.abs(ie)}Kt.exports.getUnifiedMinMax=function(ie,Ht){return He.getUnifiedMinMaxMulti([ie],Ht)},Kt.exports.getUnifiedMinMaxMulti=function(ie,Ht){Ht=Ht||{};var Te=!1,ae=!1,Fe=ee.isNumber(Ht.width)?Ht.width:ct,Ct=ee.isNumber(Ht.size)?Ht.size:Zt,At=ee.isNumber(Ht.min)?Ht.min:(Te=!0,ee.findMinMulti(ie)),pt=ee.isNumber(Ht.max)?Ht.max:(ae=!0,ee.findMaxMulti(ie)),mt=pt-At,Rt=mt/(Ct-1);return Te&&(At=At-2*Fe*Rt),ae&&(pt=pt+2*Fe*Rt),{min:At,max:pt}},Kt.exports.create=function(ie,Ht){if(Ht=Ht||{},!ie||ie.length===0)return[];var Te=ee.isNumber(Ht.size)?Ht.size:Zt,ae=ee.isNumber(Ht.width)?Ht.width:ct,Fe=He.getUnifiedMinMax(ie,{size:Te,width:ae,min:Ht.min,max:Ht.max}),Ct=Fe.min,At=Fe.max,pt=At-Ct,mt=pt/(Te-1);if(pt===0)return[{x:Ct,y:1}];for(var Rt=[],Yt=0;Yt<Te;Yt++)Rt.push({x:Ct+Yt*mt,y:0});var de=function(Dt){return Math.floor((Dt-Ct)/mt)},Ae=rn(pn,ae),ge=Ae[ae],me=Ae[ae-1]-Ae[ae-2],Ce=0;ie.forEach(function(Dt){var Nt=de(Dt);if(!(Nt+ae<0||Nt-ae>=Rt.length)){var en=Math.max(Nt-ae,0),jn=Nt,Tn=Math.min(Nt+ae,Rt.length-1),bn=en-(Nt-ae),G=Nt+ae-Tn,on=Ae[-ae-1+bn]||0,nr=Ae[-ae-1+G]||0,rr=ge/(ge-on-nr);bn>0&&(Ce+=rr*(bn-1)*me);var or=Math.max(0,Nt-ae+1);ee.inside(0,Rt.length-1,or)&&(Rt[or].y+=rr*1*me),ee.inside(0,Rt.length-1,jn+1)&&(Rt[jn+1].y-=rr*2*me),ee.inside(0,Rt.length-1,Tn+1)&&(Rt[Tn+1].y+=rr*1*me)}});var le=Ce,ze=0,Le=0;return Rt.forEach(function(Dt){ze+=Dt.y,le+=ze,Dt.y=le,Le+=le}),Le>0&&Rt.forEach(function(Dt){Dt.y/=Le}),Rt};function rn(ie,Ht){for(var Te={},ae=0,Fe=-Ht;Fe<=Ht;Fe++)ae+=ie(Fe/Ht),Te[Fe]=ae;return Te}Kt.exports.getExpectedValueFromPdf=function(ie){if(!(!ie||ie.length===0)){var Ht=0;return ie.forEach(function(Te){Ht+=Te.x*Te.y}),Ht}},Kt.exports.getXWithLeftTailArea=function(ie,Ht){if(!(!ie||ie.length===0)){for(var Te=0,ae=0,Fe=0;Fe<ie.length&&(ae=Fe,Te+=ie[Fe].y,!(Te>=Ht));Fe++);return ie[ae].x}},Kt.exports.getPerplexity=function(ie){if(!(!ie||ie.length===0)){var Ht=0;return ie.forEach(function(Te){var ae=Math.log(Te.y);isFinite(ae)&&(Ht+=Te.y*ae)}),Ht=-Ht/ce,Math.pow(2,Ht)}}}}]);
}());