"use strict";(self.webpackChunkcognik_web_app=self.webpackChunkcognik_web_app||[]).push([[3858],{26598:function(X,B){var e={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M512 64C264.6 64 64 264.6 64 512s200.6 448 448 448 448-200.6 448-448S759.4 64 512 64zm0 820c-205.4 0-372-166.6-372-372s166.6-372 372-372 372 166.6 372 372-166.6 372-372 372z"}},{tag:"path",attrs:{d:"M464 336a48 48 0 1096 0 48 48 0 10-96 0zm72 112h-48c-4.4 0-8 3.6-8 8v272c0 4.4 3.6 8 8 8h48c4.4 0 8-3.6 8-8V456c0-4.4-3.6-8-8-8z"}}]},name:"info-circle",theme:"outlined"};B.Z=e},37520:function(X,B,e){var n=e(55443),d=e(38334),f=e(86757),u=e(75380),I=e(75271),h=e(35262),R=e(20451),b=e(52676),z=["fieldProps","options","radioType","layout","proFieldProps","valueEnum"],L=I.forwardRef(function(c,M){var D=c.fieldProps,g=c.options,U=c.radioType,m=c.layout,t=c.proFieldProps,p=c.valueEnum,$=(0,d.Z)(c,z);return(0,b.jsx)(R.Z,(0,n.Z)((0,n.Z)({valueType:U==="button"?"radioButton":"radio",ref:M,valueEnum:(0,f.h)(p,void 0)},$),{},{fieldProps:(0,n.Z)({options:g,layout:m},D),proFieldProps:t,filedConfig:{customLightMode:!0}}))}),G=I.forwardRef(function(c,M){var D=c.fieldProps,g=c.children;return(0,b.jsx)(u.ZP,(0,n.Z)((0,n.Z)({},D),{},{ref:M,children:g}))}),i=(0,h.G)(G,{valuePropName:"checked",ignoreWidth:!0}),S=i;S.Group=L,S.Button=u.ZP.Button,S.displayName="ProFormComponent",B.Z=S},16331:function(X,B,e){var n=e(55443),d=e(38334),f=e(75271),u=e(20451),I=e(52676),h=["fieldProps","proFieldProps"],R=function(z,L){var G=z.fieldProps,i=z.proFieldProps,S=(0,d.Z)(z,h);return(0,I.jsx)(u.Z,(0,n.Z)({ref:L,valueType:"textarea",fieldProps:G,proFieldProps:i},S))};B.Z=f.forwardRef(R)},27318:function(X,B,e){e.d(B,{A:function(){return r}});var n=e(55443),d=e(28320),f=e(75271),u=e(96570),I=e(83734),h=e(35576),R=e(52521),b=e(22278),z=e(93954),L=e(48760),G=e(39050),i=e(46056),S=e(82187),c=e.n(S),M=e(5594),D=e(79347),g=e(30383),U=function(l){return(0,h.Z)({},l.componentCls,{"&-title":{marginBlockEnd:l.marginXL,fontWeight:"bold"},"&-container":(0,h.Z)({flexWrap:"wrap",maxWidth:"100%"},"> div".concat(l.antCls,"-space-item"),{maxWidth:"100%"}),"&-twoLine":(0,h.Z)((0,h.Z)((0,h.Z)((0,h.Z)({display:"block",width:"100%"},"".concat(l.componentCls,"-title"),{width:"100%",margin:"8px 0"}),"".concat(l.componentCls,"-container"),{paddingInlineStart:16}),"".concat(l.antCls,"-space-item,").concat(l.antCls,"-form-item"),{width:"100%"}),"".concat(l.antCls,"-form-item"),{"&-control":{display:"flex",alignItems:"center",justifyContent:"flex-end","&-input":{alignItems:"center",justifyContent:"flex-end","&-content":{flex:"none"}}}})})};function m(F){return(0,g.Xj)("ProFormGroup",function(l){var x=(0,n.Z)((0,n.Z)({},l),{},{componentCls:".".concat(F)});return[U(x)]})}var t=e(52676),p=f.forwardRef(function(F,l){var x=f.useContext(M.Z),P=x.groupProps,a=(0,n.Z)((0,n.Z)({},P),F),s=a.children,E=a.collapsible,w=a.defaultCollapsed,C=a.style,y=a.labelLayout,ee=a.title,H=ee===void 0?F.label:ee,Q=a.tooltip,O=a.align,re=O===void 0?"start":O,te=a.direction,Y=a.size,oe=Y===void 0?32:Y,_=a.titleStyle,ae=a.titleRender,T=a.spaceProps,J=a.extra,Z=a.autoFocus,le=(0,z.Z)(function(){return w||!1},{value:F.collapsed,onChange:F.onCollapse}),ne=(0,R.Z)(le,2),v=ne[0],A=ne[1],o=(0,f.useContext)(G.ZP.ConfigContext),j=o.getPrefixCls,k=(0,D.zx)(F),se=k.ColWrapper,ie=k.RowWrapper,W=j("pro-form-group"),ce=m(W),ge=ce.wrapSSR,ue=ce.hashId,pe=E&&(0,t.jsx)(b.Z,{style:{marginInlineEnd:8},rotate:v?void 0:90}),ve=(0,t.jsx)(L.G,{label:pe?(0,t.jsxs)("div",{children:[pe,H]}):H,tooltip:Q}),me=(0,f.useCallback)(function(V){var q=V.children;return(0,t.jsx)(i.Z,(0,n.Z)((0,n.Z)({},T),{},{className:c()("".concat(W,"-container ").concat(ue),T==null?void 0:T.className),size:oe,align:re,direction:te,style:(0,n.Z)({rowGap:0},T==null?void 0:T.style),children:q}))},[re,W,te,ue,oe,T]),fe=ae?ae(ve,F):ve,ye=(0,f.useMemo)(function(){var V=[],q=f.Children.toArray(s).map(function(K,Ce){var de;return f.isValidElement(K)&&K!==null&&K!==void 0&&(de=K.props)!==null&&de!==void 0&&de.hidden?(V.push(K),null):Ce===0&&f.isValidElement(K)&&Z?f.cloneElement(K,(0,n.Z)((0,n.Z)({},K.props),{},{autoFocus:Z})):K});return[(0,t.jsx)(ie,{Wrapper:me,children:q},"children"),V.length>0?(0,t.jsx)("div",{style:{display:"none"},children:V}):null]},[s,ie,me,Z]),he=(0,R.Z)(ye,2),Fe=he[0],xe=he[1];return ge((0,t.jsx)(se,{children:(0,t.jsxs)("div",{className:c()(W,ue,(0,h.Z)({},"".concat(W,"-twoLine"),y==="twoLine")),style:C,ref:l,children:[xe,(H||Q||J)&&(0,t.jsx)("div",{className:"".concat(W,"-title ").concat(ue).trim(),style:_,onClick:function(){A(!v)},children:J?(0,t.jsxs)("div",{style:{display:"flex",width:"100%",alignItems:"center",justifyContent:"space-between"},children:[fe,(0,t.jsx)("span",{onClick:function(q){return q.stopPropagation()},children:J})]}):fe}),(0,t.jsx)("div",{style:{display:E&&v?"none":void 0},children:Fe})]})}))});p.displayName="ProForm-Group";var $=p,N=e(99292);function r(F){return(0,t.jsx)(u.I,(0,n.Z)({layout:"vertical",contentRender:function(x,P){return(0,t.jsxs)(t.Fragment,{children:[x,P]})}},F))}r.Group=$,r.useForm=d.Z.useForm,r.Item=N.Z,r.useWatch=d.Z.useWatch,r.ErrorList=d.Z.ErrorList,r.Provider=d.Z.Provider,r.useFormInstance=d.Z.useFormInstance,r.EditOrReadOnlyContext=I.A},48760:function(X,B,e){e.d(B,{G:function(){return U}});var n=e(55443),d=e(35576),f=e(55824),u=e(75271),I=e(26598),h=e(35244),R=function(t,p){return u.createElement(h.Z,(0,f.Z)({},t,{ref:p,icon:I.Z}))},b=u.forwardRef(R),z=b,L=e(39050),G=e(92422),i=e(82187),S=e.n(i),c=e(30383),M=function(t){return(0,d.Z)({},t.componentCls,{display:"inline-flex",alignItems:"center",maxWidth:"100%","&-icon":{display:"block",marginInlineStart:"4px",cursor:"pointer","&:hover":{color:t.colorPrimary}},"&-title":{display:"inline-flex",flex:"1"},"&-subtitle ":{marginInlineStart:8,color:t.colorTextSecondary,fontWeight:"normal",fontSize:t.fontSize,whiteSpace:"nowrap"},"&-title-ellipsis":{overflow:"hidden",whiteSpace:"nowrap",textOverflow:"ellipsis",wordBreak:"keep-all"}})};function D(m){return(0,c.Xj)("LabelIconTip",function(t){var p=(0,n.Z)((0,n.Z)({},t),{},{componentCls:".".concat(m)});return[M(p)]})}var g=e(52676),U=u.memo(function(m){var t=m.label,p=m.tooltip,$=m.ellipsis,N=m.subTitle,r=(0,u.useContext)(L.ZP.ConfigContext),F=r.getPrefixCls,l=F("pro-core-label-tip"),x=D(l),P=x.wrapSSR,a=x.hashId;if(!p&&!N)return(0,g.jsx)(g.Fragment,{children:t});var s=typeof p=="string"||u.isValidElement(p)?{title:p}:p,E=(s==null?void 0:s.icon)||(0,g.jsx)(z,{});return P((0,g.jsxs)("div",{className:S()(l,a),onMouseDown:function(C){return C.stopPropagation()},onMouseLeave:function(C){return C.stopPropagation()},onMouseMove:function(C){return C.stopPropagation()},children:[(0,g.jsx)("div",{className:S()("".concat(l,"-title"),a,(0,d.Z)({},"".concat(l,"-title-ellipsis"),$)),children:t}),N&&(0,g.jsx)("div",{className:"".concat(l,"-subtitle ").concat(a).trim(),children:N}),p&&(0,g.jsx)(G.Z,(0,n.Z)((0,n.Z)({},s),{},{children:(0,g.jsx)("span",{className:"".concat(l,"-icon ").concat(a).trim(),children:E})}))]}))})},3031:function(X,B,e){e.r(B),e.d(B,{default:function(){return l}});var n=e(90228),d=e.n(n),f=e(26068),u=e.n(f),I=e(87999),h=e.n(I),R=e(48305),b=e.n(R),z=e(41045),L=e(67709),G=e(27318),i=e(14378),S=e(16331),c=e(37520),M=e(27054),D=e(86487),g=e(69230),U=e(77758),m=e(75271);function t(x,P){return p.apply(this,arguments)}function p(){return p=h()(d()().mark(function x(P,a){return d()().wrap(function(E){for(;;)switch(E.prev=E.next){case 0:return E.abrupt("return",(0,D.request)("/api/v1/projects",u()({method:"POST",data:P},a||{})));case 1:case"end":return E.stop()}},x)})),p.apply(this,arguments)}function $(x,P){return N.apply(this,arguments)}function N(){return N=h()(d()().mark(function x(P,a){var s,E;return d()().wrap(function(C){for(;;)switch(C.prev=C.next){case 0:return s=P.configId,E=P.version,C.abrupt("return",(0,D.request)("/api/v1/configs/".concat(s,"/version/").concat(E),u()({method:"GET"},a||{})).then(function(y){return{data:u()({},y.result)}}));case 3:case"end":return C.stop()}},x)})),N.apply(this,arguments)}var r=e(52676),F=function(){var P=(0,m.useState)(),a=b()(P,2),s=a[0],E=a[1],w=(0,m.useState)(),C=b()(w,2),y=C[0],ee=C[1],H=(0,m.useState)(),Q=b()(H,2),O=Q[0],re=Q[1],te=(0,m.useState)(!1),Y=b()(te,2),oe=Y[0],_=Y[1],ae=(0,D.useRequest)(t,{manual:!0,onSuccess:function(){g.ZP.success("\u63D0\u4EA4\u6210\u529F"),_(!1)},onError:function(){g.ZP.error("\u63D0\u4EA4\u5931\u8D25\uFF0C\u8BF7\u91CD\u8BD5"),_(!1)}}),T=ae.run,J=(0,D.useRequest)(function(){return $({configId:"KAG_CONFIG",version:"1"})}),Z=J.data,le=J.loading;(0,m.useEffect)(function(){if(Z!=null&&Z.config){var v=JSON.parse(Z==null?void 0:Z.config);v!=null&&v.graph_store&&E(v.graph_store),v.vectorizer&&ee(v.vectorizer),v.prompt&&re(v.prompt)}},[Z]);var ne=function(){var v=h()(d()().mark(function A(o){var j,k,se;return d()().wrap(function(W){for(;;)switch(W.prev=W.next){case 0:j=JSON.parse((Z==null?void 0:Z.config)||"{}"),k={graph_store:u()(u()({},j==null?void 0:j.graph_store),{},{source_type:o.graph_store_source_type,database:o.graph_store_database,password:o.graph_store_password,uri:o.graph_store_uri,user:o.graph_store_user}),vectorizer:u()(u()({},j==null?void 0:j.vectorizer),{},{source_type:o.vectorizer_source_type,model:o.vectorizer_model,type:o.vectorizer_type,api_key:o.vectorizer_api_key,base_url:o.vectorizer_base_url}),prompt:u()(u()({},j==null?void 0:j.prompt),{},{source_type:o.prompt_source_type,biz_scene:o.prompt_biz_scene,language:o.prompt_language}),llm_select:[u()({},j.llm_select)],llm:u()({},j.llm)},se={name:o.name,description:o.description,namespace:o.namespace,config:JSON.stringify(k)},_(!0),T(se);case 5:case"end":return W.stop()}},A)}));return function(o){return v.apply(this,arguments)}}();return le||!s||!y||!O?(0,r.jsx)(z.uk,{type:"descriptions"}):(0,r.jsx)(L._z,{content:"\u8868\u5355\u9875\u7528\u4E8E\u5411\u7528\u6237\u6536\u96C6\u6216\u9A8C\u8BC1\u4FE1\u606F\uFF0C\u57FA\u7840\u8868\u5355\u5E38\u89C1\u4E8E\u6570\u636E\u9879\u8F83\u5C11\u7684\u8868\u5355\u573A\u666F\u3002",children:(0,r.jsx)(U.Z,{variant:"outlined",children:(0,r.jsxs)(G.A,{style:{margin:"auto",marginTop:8,maxWidth:600},name:"basic",layout:"vertical",initialValues:{graph_store_source_type:"default",graph_store_database:s==null?void 0:s.database,graph_store_password:s==null?void 0:s.password,graph_store_uri:s==null?void 0:s.uri,graph_store_user:s==null?void 0:s.user,prompt_source_type:"default",prompt_biz_scene:O==null?void 0:O.biz_scene,prompt_language:O==null?void 0:O.language,vectorizer_source_type:"default",vectorizer_model:y==null?void 0:y.model,vectorizer_type:y==null?void 0:y.type,vectorizer_api_key:y==null?void 0:y.api_key,vectorizer_base_url:y==null?void 0:y.base_url},loading:oe,onFinish:ne,children:[(0,r.jsx)(i.Z,{width:"md",label:"\u77E5\u8BC6\u5E93\u4E2D\u6587\u540D\u79F0",name:"name",rules:[{required:!0,message:"\u8BF7\u8F93\u5165\u77E5\u8BC6\u5E93\u4E2D\u6587\u540D\u79F0"}],placeholder:"\u8BF7\u8F93\u5165\u77E5\u8BC6\u5E93\u4E2D\u6587\u540D\u79F0"}),(0,r.jsx)(i.Z,{width:"md",label:"\u77E5\u8BC6\u5E93\u82F1\u6587\u540D\u79F0",name:"namespace",rules:[{required:!0,message:"\u8BF7\u8F93\u5165\u77E5\u8BC6\u5E93\u82F1\u6587\u540D\u79F0"},{pattern:/^[A-Z][A-Za-z0-9]{2,}$/,message:"\u5FC5\u987B\u4EE5\u5927\u5199\u5B57\u6BCD\u5F00\u5934\uFF0C\u4E14\u4EC5\u652F\u6301\u5B57\u6BCD\u548C\u6570\u5B57\u7EC4\u5408\uFF0C\u81F3\u5C11\u4E09\u4E2A\u5B57\u7B26"}],placeholder:"\u8BF7\u8F93\u5165\u77E5\u8BC6\u5E93\u82F1\u6587\u540D\u79F0"}),(0,r.jsx)(S.Z,{label:"\u77E5\u8BC6\u5E93\u63CF\u8FF0",width:"xl",name:"description",placeholder:"\u8BF7\u8F93\u5165\u77E5\u8BC6\u5E93\u63CF\u8FF0\uFF0C\u5728\u77E5\u8BC6\u62BD\u53D6\u548C\u77E5\u8BC6\u95EE\u7B54\u65F6\u4F5C\u4E3APrompt\uFF1B\u4F8B\u5982\uFF1A\u8FD9\u662F\u4E00\u4E2A\u6CD5\u5B66\u77E5\u8BC6\u5E93\uFF0C\u4E3B\u8981\u63CF\u8FF0\u6CD5\u5F8B\u76F8\u5173\u7684\u77E5\u8BC6\u3002"}),(0,r.jsx)(c.Z.Group,{name:"graph_store_source_type",label:"\u56FE\u50A8\u5B58\u914D\u7F6E",options:[{label:"\u9ED8\u8BA4\u914D\u7F6E",value:"default"},{label:"\u81EA\u5B9A\u4E49\u914D\u7F6E",value:"custom"}]}),(0,r.jsx)(i.Z,{width:"md",label:"database",name:"graph_store_database",rules:[{required:!0,message:"\u8BF7\u8F93\u5165database"}],placeholder:"\u8BF7\u8F93\u5165database",disabled:!0}),(0,r.jsx)(M.Z,{name:["graph_store_source_type"],children:function(A){var o=A.graph_store_source_type;return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(i.Z.Password,{width:"md",label:"password",name:"graph_store_password",rules:[{required:!0,message:"\u8BF7\u8F93\u5165password"}],placeholder:"\u8BF7\u8F93\u5165password",disabled:o==="default"}),(0,r.jsx)(i.Z,{width:"md",label:"uri",name:"graph_store_uri",rules:[{required:!0,message:"\u8BF7\u8F93\u5165uri"}],placeholder:"\u8BF7\u8F93\u5165uri",disabled:o==="default"}),(0,r.jsx)(i.Z,{width:"md",label:"user",name:"graph_store_user",rules:[{required:!0,message:"\u8BF7\u8F93\u5165user"}],placeholder:"\u8BF7\u8F93\u5165user",disabled:o==="default"})]})}}),(0,r.jsx)(c.Z.Group,{name:"vectorizer_source_type",label:"\u5411\u91CF\u914D\u7F6E",options:[{label:"\u9ED8\u8BA4\u914D\u7F6E",value:"default"},{label:"\u81EA\u5B9A\u4E49\u914D\u7F6E",value:"custom"}]}),(0,r.jsx)(i.Z,{width:"md",label:"type",name:"vectorizer_type",rules:[{required:!0,message:"\u8BF7\u8F93\u5165type"}],placeholder:"\u8BF7\u8F93\u5165type",disabled:!0}),(0,r.jsx)(M.Z,{name:["vectorizer_source_type"],children:function(A){var o=A.vectorizer_source_type;return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(i.Z.Password,{width:"md",label:"model",name:"vectorizer_model",rules:[{required:!0,message:"\u8BF7\u8F93\u5165model"}],placeholder:"\u8BF7\u8F93\u5165model",disabled:o==="default"}),(0,r.jsx)(i.Z,{width:"md",label:"base_url",name:"vectorizer_base_url",rules:[{required:!0,message:"\u8BF7\u8F93\u5165base_url"}],placeholder:"\u8BF7\u8F93\u5165base_url",disabled:o==="default"}),(0,r.jsx)(i.Z.Password,{width:"md",label:"api_key",name:"vectorizer_api_key",rules:[{required:!0,message:"\u8BF7\u8F93\u5165api_key"}],placeholder:"\u8BF7\u8F93\u5165api_key",disabled:o==="default"})]})}}),(0,r.jsx)(c.Z.Group,{name:"prompt_source_type",label:"\u63D0\u793A\u8BCD\u4E2D\u82F1\u6587\u914D\u7F6E",options:[{label:"\u9ED8\u8BA4\u914D\u7F6E",value:"default"},{label:"\u81EA\u5B9A\u4E49\u914D\u7F6E",value:"custom"}]}),(0,r.jsx)(M.Z,{name:["prompt_source_type"],children:function(A){var o=A.prompt_source_type;return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(i.Z,{width:"md",label:"biz_scene",name:"prompt_biz_scene",rules:[{required:!0,message:"\u8BF7\u8F93\u5165biz_scene"}],placeholder:"\u8BF7\u8F93\u5165biz_scene",disabled:o==="default"}),(0,r.jsx)(i.Z,{width:"md",label:"language",name:"prompt_language",rules:[{required:!0,message:"\u8BF7\u8F93\u5165language"}],placeholder:"\u8BF7\u8F93\u5165language",disabled:o==="default"})]})}})]})})})},l=F}}]);
