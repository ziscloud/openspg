!(function(){var Hn=Object.defineProperty,qn=Object.defineProperties;var jn=Object.getOwnPropertyDescriptors;var Jn=Object.getOwnPropertySymbols;var _n=Object.prototype.hasOwnProperty,tr=Object.prototype.propertyIsEnumerable;var An=Math.pow,Kn=(V,_,a)=>_ in V?Hn(V,_,{enumerable:!0,configurable:!0,writable:!0,value:a}):V[_]=a,pn=(V,_)=>{for(var a in _||(_={}))_n.call(_,a)&&Kn(V,a,_[a]);if(Jn)for(var a of Jn(_))tr.call(_,a)&&Kn(V,a,_[a]);return V},$n=(V,_)=>qn(V,jn(_));var se=(V,_,a)=>Kn(V,typeof _!="symbol"?_+"":_,a);(self.webpackChunkcognik_web_app=self.webpackChunkcognik_web_app||[]).push([[6414],{16754:function(V,_,a){"use strict";a.d(_,{k:function(){return D}});var s=a(80216);function k(M,g,r,o){for(;M.length;){const d=M.shift();if(r(d))return!0;g.add(d.id),o(d.id).forEach(h=>{g.has(h.id)||(g.add(h.id),M.push(h))})}return!1}function O(M,g,r,o){if(r(M))return!0;g.add(M.id);for(const f of o(M.id))if(!g.has(f.id)&&O(f,g,r,o))return!0;return!1}const T=()=>!0;class m{constructor(g){se(this,"graph");se(this,"nodeFilter");se(this,"edgeFilter");se(this,"cacheEnabled");se(this,"inEdgesMap",new Map);se(this,"outEdgesMap",new Map);se(this,"bothEdgesMap",new Map);se(this,"allNodesMap",new Map);se(this,"allEdgesMap",new Map);se(this,"clearCache",()=>{this.inEdgesMap.clear(),this.outEdgesMap.clear(),this.bothEdgesMap.clear(),this.allNodesMap.clear(),this.allEdgesMap.clear()});se(this,"refreshCache",()=>{this.clearCache(),this.updateCache(this.graph.getAllNodes().map(g=>g.id))});se(this,"updateCache",g=>{const r=new Set;g.forEach(o=>{const d=this.bothEdgesMap.get(o);if(d&&d.forEach(f=>r.add(f.id)),!this.hasNode(o))this.inEdgesMap.delete(o),this.outEdgesMap.delete(o),this.bothEdgesMap.delete(o),this.allNodesMap.delete(o);else{const f=this.graph.getRelatedEdges(o,"in").filter(this.edgeFilter),h=this.graph.getRelatedEdges(o,"out").filter(this.edgeFilter),w=Array.from(new Set([...f,...h]));w.forEach(W=>r.add(W.id)),this.inEdgesMap.set(o,f),this.outEdgesMap.set(o,h),this.bothEdgesMap.set(o,w),this.allNodesMap.set(o,this.graph.getNode(o))}}),r.forEach(o=>{this.hasEdge(o)?this.allEdgesMap.set(o,this.graph.getEdge(o)):this.allEdgesMap.delete(o)})});se(this,"handleGraphChanged",g=>{const r=new Set;g.changes.forEach(o=>{switch(o.type){case"NodeAdded":r.add(o.value.id);break;case"NodeDataUpdated":r.add(o.id);break;case"EdgeAdded":r.add(o.value.source),r.add(o.value.target);break;case"EdgeUpdated":(o.propertyName==="source"||o.propertyName==="target")&&(r.add(o.oldValue),r.add(o.newValue));break;case"EdgeDataUpdated":if(g.graph.hasEdge(o.id)){const d=g.graph.getEdge(o.id);r.add(d.source),r.add(d.target)}break;case"EdgeRemoved":r.add(o.value.source),r.add(o.value.target);break;case"NodeRemoved":r.add(o.value.id);break;default:break}}),this.updateCache(r)});this.graph=g.graph;const r=g.nodeFilter||T,o=g.edgeFilter||T;this.nodeFilter=r,this.edgeFilter=d=>{const{source:f,target:h}=this.graph.getEdgeDetail(d.id);return!r(f)||!r(h)?!1:o(d,f,h)},g.cache==="auto"?(this.cacheEnabled=!0,this.startAutoCache()):g.cache==="manual"?this.cacheEnabled=!0:this.cacheEnabled=!1}startAutoCache(){this.refreshCache(),this.graph.on("changed",this.handleGraphChanged)}stopAutoCache(){this.graph.off("changed",this.handleGraphChanged)}checkNodeExistence(g){this.getNode(g)}hasNode(g){if(!this.graph.hasNode(g))return!1;const r=this.graph.getNode(g);return this.nodeFilter(r)}areNeighbors(g,r){return this.checkNodeExistence(g),this.getNeighbors(r).some(o=>o.id===g)}getNode(g){const r=this.graph.getNode(g);if(!this.nodeFilter(r))throw new Error("Node not found for id: "+g);return r}getRelatedEdges(g,r){return this.checkNodeExistence(g),this.cacheEnabled?r==="in"?this.inEdgesMap.get(g):r==="out"?this.outEdgesMap.get(g):this.bothEdgesMap.get(g):this.graph.getRelatedEdges(g,r).filter(this.edgeFilter)}getDegree(g,r){return this.getRelatedEdges(g,r).length}getSuccessors(g){const o=this.getRelatedEdges(g,"out").map(d=>this.getNode(d.target));return Array.from(new Set(o))}getPredecessors(g){const o=this.getRelatedEdges(g,"in").map(d=>this.getNode(d.source));return Array.from(new Set(o))}getNeighbors(g){const r=this.getPredecessors(g),o=this.getSuccessors(g);return Array.from(new Set([...r,...o]))}hasEdge(g){if(!this.graph.hasEdge(g))return!1;const r=this.graph.getEdge(g);return this.edgeFilter(r)}getEdge(g){const r=this.graph.getEdge(g);if(!this.edgeFilter(r))throw new Error("Edge not found for id: "+g);return r}getEdgeDetail(g){const r=this.getEdge(g);return{edge:r,source:this.getNode(r.source),target:this.getNode(r.target)}}hasTreeStructure(g){return this.graph.hasTreeStructure(g)}getRoots(g){return this.graph.getRoots(g).filter(this.nodeFilter)}getChildren(g,r){return this.checkNodeExistence(g),this.graph.getChildren(g,r).filter(this.nodeFilter)}getParent(g,r){this.checkNodeExistence(g);const o=this.graph.getParent(g,r);return!o||!this.nodeFilter(o)?null:o}getAllNodes(){return this.cacheEnabled?Array.from(this.allNodesMap.values()):this.graph.getAllNodes().filter(this.nodeFilter)}getAllEdges(){return this.cacheEnabled?Array.from(this.allEdgesMap.values()):this.graph.getAllEdges().filter(this.edgeFilter)}bfs(g,r,o="out"){const d={in:this.getPredecessors.bind(this),out:this.getSuccessors.bind(this),both:this.getNeighbors.bind(this)}[o];k([this.getNode(g)],new Set,r,d)}dfs(g,r,o="out"){const d={in:this.getPredecessors.bind(this),out:this.getSuccessors.bind(this),both:this.getNeighbors.bind(this)}[o];O(this.getNode(g),new Set,r,d)}}class D extends s.Z{constructor(r){super();se(this,"nodeMap",new Map);se(this,"edgeMap",new Map);se(this,"inEdgesMap",new Map);se(this,"outEdgesMap",new Map);se(this,"bothEdgesMap",new Map);se(this,"treeIndices",new Map);se(this,"changes",[]);se(this,"batchCount",0);se(this,"onChanged",()=>{});se(this,"batch",r=>{this.batchCount+=1,r(),this.batchCount-=1,this.batchCount||this.commit()});r&&(r.nodes&&this.addNodes(r.nodes),r.edges&&this.addEdges(r.edges),r.tree&&this.addTree(r.tree),r.onChanged&&(this.onChanged=r.onChanged))}commit(){const r=this.changes;this.changes=[];const o={graph:this,changes:r};this.emit("changed",o),this.onChanged(o)}reduceChanges(r){let o=[];return r.forEach(d=>{switch(d.type){case"NodeRemoved":{let f=!1;o=o.filter(h=>{if(h.type==="NodeAdded"){const w=h.value.id===d.value.id;return w&&(f=!0),!w}else{if(h.type==="NodeDataUpdated")return h.id!==d.value.id;if(h.type==="TreeStructureChanged")return h.nodeId!==d.value.id}return!0}),f||o.push(d);break}case"EdgeRemoved":{let f=!1;o=o.filter(h=>{if(h.type==="EdgeAdded"){const w=h.value.id===d.value.id;return w&&(f=!0),!w}else if(h.type==="EdgeDataUpdated"||h.type==="EdgeUpdated")return h.id!==d.value.id;return!0}),f||o.push(d);break}case"NodeDataUpdated":case"EdgeDataUpdated":case"EdgeUpdated":{const f=o.findIndex(w=>w.type===d.type&&w.id===d.id&&(d.propertyName===void 0||w.propertyName===d.propertyName)),h=o[f];h?d.propertyName!==void 0?h.newValue=d.newValue:(o.splice(f,1),o.push(d)):o.push(d);break}case"TreeStructureDetached":{o=o.filter(f=>f.type==="TreeStructureAttached"||f.type==="TreeStructureChanged"?f.treeKey!==d.treeKey:!0),o.push(d);break}case"TreeStructureChanged":{const f=o.find(h=>h.type==="TreeStructureChanged"&&h.treeKey===d.treeKey&&h.nodeId===d.nodeId);f?f.newParentId=d.newParentId:o.push(d);break}default:o.push(d);break}}),o}checkNodeExistence(r){this.getNode(r)}hasNode(r){return this.nodeMap.has(r)}areNeighbors(r,o){return this.getNeighbors(o).some(d=>d.id===r)}getNode(r){const o=this.nodeMap.get(r);if(!o)throw new Error("Node not found for id: "+r);return o}getRelatedEdges(r,o){if(this.checkNodeExistence(r),o==="in"){const d=this.inEdgesMap.get(r);return Array.from(d)}else if(o==="out"){const d=this.outEdgesMap.get(r);return Array.from(d)}else{const d=this.bothEdgesMap.get(r);return Array.from(d)}}getDegree(r,o){return this.getRelatedEdges(r,o).length}getSuccessors(r){const d=this.getRelatedEdges(r,"out").map(f=>this.getNode(f.target));return Array.from(new Set(d))}getPredecessors(r){const d=this.getRelatedEdges(r,"in").map(f=>this.getNode(f.source));return Array.from(new Set(d))}getNeighbors(r){const o=this.getPredecessors(r),d=this.getSuccessors(r);return Array.from(new Set([...o,...d]))}doAddNode(r){if(this.hasNode(r.id))throw new Error("Node already exists: "+r.id);this.nodeMap.set(r.id,r),this.inEdgesMap.set(r.id,new Set),this.outEdgesMap.set(r.id,new Set),this.bothEdgesMap.set(r.id,new Set),this.treeIndices.forEach(o=>{o.childrenMap.set(r.id,new Set)}),this.changes.push({type:"NodeAdded",value:r})}addNodes(r){this.batch(()=>{for(const o of r)this.doAddNode(o)})}addNode(r){this.addNodes([r])}doRemoveNode(r){const o=this.getNode(r),d=this.bothEdgesMap.get(r);d==null||d.forEach(f=>this.doRemoveEdge(f.id)),this.nodeMap.delete(r),this.treeIndices.forEach(f=>{var w,W;(w=f.childrenMap.get(r))==null||w.forEach(Z=>{f.parentMap.delete(Z.id)});const h=f.parentMap.get(r);h&&((W=f.childrenMap.get(h.id))==null||W.delete(o)),f.parentMap.delete(r),f.childrenMap.delete(r)}),this.bothEdgesMap.delete(r),this.inEdgesMap.delete(r),this.outEdgesMap.delete(r),this.changes.push({type:"NodeRemoved",value:o})}removeNodes(r){this.batch(()=>{r.forEach(o=>this.doRemoveNode(o))})}removeNode(r){this.removeNodes([r])}updateNodeDataProperty(r,o,d){const f=this.getNode(r);this.batch(()=>{const h=f.data[o],w=d;f.data[o]=w,this.changes.push({type:"NodeDataUpdated",id:r,propertyName:o,oldValue:h,newValue:w})})}mergeNodeData(r,o){this.batch(()=>{Object.entries(o).forEach(([d,f])=>{this.updateNodeDataProperty(r,d,f)})})}updateNodeData(...r){const o=r[0],d=this.getNode(o);if(typeof r[1]=="string"){this.updateNodeDataProperty(o,r[1],r[2]);return}let f;if(typeof r[1]=="function"){const h=r[1];f=h(d.data)}else typeof r[1]=="object"&&(f=r[1]);this.batch(()=>{const h=d.data,w=f;d.data=f,this.changes.push({type:"NodeDataUpdated",id:o,oldValue:h,newValue:w})})}checkEdgeExistence(r){if(!this.hasEdge(r))throw new Error("Edge not found for id: "+r)}hasEdge(r){return this.edgeMap.has(r)}getEdge(r){return this.checkEdgeExistence(r),this.edgeMap.get(r)}getEdgeDetail(r){const o=this.getEdge(r);return{edge:o,source:this.getNode(o.source),target:this.getNode(o.target)}}doAddEdge(r){if(this.hasEdge(r.id))throw new Error("Edge already exists: "+r.id);this.checkNodeExistence(r.source),this.checkNodeExistence(r.target),this.edgeMap.set(r.id,r);const o=this.inEdgesMap.get(r.target),d=this.outEdgesMap.get(r.source),f=this.bothEdgesMap.get(r.source),h=this.bothEdgesMap.get(r.target);o.add(r),d.add(r),f.add(r),h.add(r),this.changes.push({type:"EdgeAdded",value:r})}addEdges(r){this.batch(()=>{for(const o of r)this.doAddEdge(o)})}addEdge(r){this.addEdges([r])}doRemoveEdge(r){const o=this.getEdge(r),d=this.outEdgesMap.get(o.source),f=this.inEdgesMap.get(o.target),h=this.bothEdgesMap.get(o.source),w=this.bothEdgesMap.get(o.target);d.delete(o),f.delete(o),h.delete(o),w.delete(o),this.edgeMap.delete(r),this.changes.push({type:"EdgeRemoved",value:o})}removeEdges(r){this.batch(()=>{r.forEach(o=>this.doRemoveEdge(o))})}removeEdge(r){this.removeEdges([r])}updateEdgeSource(r,o){const d=this.getEdge(r);this.checkNodeExistence(o);const f=d.source,h=o;this.outEdgesMap.get(f).delete(d),this.bothEdgesMap.get(f).delete(d),this.outEdgesMap.get(h).add(d),this.bothEdgesMap.get(h).add(d),d.source=o,this.batch(()=>{this.changes.push({type:"EdgeUpdated",id:r,propertyName:"source",oldValue:f,newValue:h})})}updateEdgeTarget(r,o){const d=this.getEdge(r);this.checkNodeExistence(o);const f=d.target,h=o;this.inEdgesMap.get(f).delete(d),this.bothEdgesMap.get(f).delete(d),this.inEdgesMap.get(h).add(d),this.bothEdgesMap.get(h).add(d),d.target=o,this.batch(()=>{this.changes.push({type:"EdgeUpdated",id:r,propertyName:"target",oldValue:f,newValue:h})})}updateEdgeDataProperty(r,o,d){const f=this.getEdge(r);this.batch(()=>{const h=f.data[o],w=d;f.data[o]=w,this.changes.push({type:"EdgeDataUpdated",id:r,propertyName:o,oldValue:h,newValue:w})})}updateEdgeData(...r){const o=r[0],d=this.getEdge(o);if(typeof r[1]=="string"){this.updateEdgeDataProperty(o,r[1],r[2]);return}let f;if(typeof r[1]=="function"){const h=r[1];f=h(d.data)}else typeof r[1]=="object"&&(f=r[1]);this.batch(()=>{const h=d.data,w=f;d.data=f,this.changes.push({type:"EdgeDataUpdated",id:o,oldValue:h,newValue:w})})}mergeEdgeData(r,o){this.batch(()=>{Object.entries(o).forEach(([d,f])=>{this.updateEdgeDataProperty(r,d,f)})})}checkTreeExistence(r){if(!this.hasTreeStructure(r))throw new Error("Tree structure not found for treeKey: "+r)}hasTreeStructure(r){return this.treeIndices.has(r)}attachTreeStructure(r){this.treeIndices.has(r)||(this.treeIndices.set(r,{parentMap:new Map,childrenMap:new Map}),this.batch(()=>{this.changes.push({type:"TreeStructureAttached",treeKey:r})}))}detachTreeStructure(r){this.checkTreeExistence(r),this.treeIndices.delete(r),this.batch(()=>{this.changes.push({type:"TreeStructureDetached",treeKey:r})})}addTree(r,o){this.batch(()=>{this.attachTreeStructure(o);const d=[],f=Array.isArray(r)?r:[r];for(;f.length;){const h=f.shift();d.push(h),h.children&&f.push(...h.children)}this.addNodes(d),d.forEach(h=>{var w;(w=h.children)==null||w.forEach(W=>{this.setParent(W.id,h.id,o)})})})}getRoots(r){return this.checkTreeExistence(r),this.getAllNodes().filter(o=>!this.getParent(o.id,r))}getChildren(r,o){this.checkNodeExistence(r),this.checkTreeExistence(o);const f=this.treeIndices.get(o).childrenMap.get(r);return Array.from(f||[])}getParent(r,o){return this.checkNodeExistence(r),this.checkTreeExistence(o),this.treeIndices.get(o).parentMap.get(r)||null}getAncestors(r,o){const d=[];let f=this.getNode(r),h;for(;h=this.getParent(f.id,o);)d.push(h),f=h;return d}setParent(r,o,d){var L,G;this.checkTreeExistence(d);const f=this.treeIndices.get(d);if(!f)return;const h=this.getNode(r),w=f.parentMap.get(r);if((w==null?void 0:w.id)===o)return;if(o==null){w&&((L=f.childrenMap.get(w.id))==null||L.delete(h)),f.parentMap.delete(r);return}const W=this.getNode(o);f.parentMap.set(r,W),w&&((G=f.childrenMap.get(w.id))==null||G.delete(h));let Z=f.childrenMap.get(W.id);Z||(Z=new Set,f.childrenMap.set(W.id,Z)),Z.add(h),this.batch(()=>{this.changes.push({type:"TreeStructureChanged",treeKey:d,nodeId:r,oldParentId:w==null?void 0:w.id,newParentId:W.id})})}dfsTree(r,o,d){const f=h=>this.getChildren(h,d);return O(this.getNode(r),new Set,o,f)}bfsTree(r,o,d){const f=h=>this.getChildren(h,d);return k([this.getNode(r)],new Set,o,f)}getAllNodes(){return Array.from(this.nodeMap.values())}getAllEdges(){return Array.from(this.edgeMap.values())}bfs(r,o,d="out"){const f={in:this.getPredecessors.bind(this),out:this.getSuccessors.bind(this),both:this.getNeighbors.bind(this)}[d];return k([this.getNode(r)],new Set,o,f)}dfs(r,o,d="out"){const f={in:this.getPredecessors.bind(this),out:this.getSuccessors.bind(this),both:this.getNeighbors.bind(this)}[d];return O(this.getNode(r),new Set,o,f)}clone(){const r=this.getAllNodes().map(f=>$n(pn({},f),{data:pn({},f.data)})),o=this.getAllEdges().map(f=>$n(pn({},f),{data:pn({},f.data)})),d=new D({nodes:r,edges:o});return this.treeIndices.forEach(({parentMap:f,childrenMap:h},w)=>{const W=new Map;f.forEach((L,G)=>{W.set(G,d.getNode(L.id))});const Z=new Map;h.forEach((L,G)=>{Z.set(G,new Set(Array.from(L).map(K=>d.getNode(K.id))))}),d.treeIndices.set(w,{parentMap:W,childrenMap:Z})}),d}toJSON(){return JSON.stringify({nodes:this.getAllNodes(),edges:this.getAllEdges()})}createView(r){return new m(pn({graph:this},r))}}},97011:function(V,_,a){"use strict";a.d(_,{b:function(){return _e}});var s=a(15767),k=a(16754),O=a(22355),T=a(54663);const m=(u,l)=>{if(u!=="next"&&u!=="prev")return l},D=u=>{u.prev.next=u.next,u.next.prev=u.prev,delete u.next,delete u.prev};class M{constructor(){const l={};l.prev=l,l.next=l.prev,this.shortcut=l}dequeue(){const l=this.shortcut,p=l.prev;if(p&&p!==l)return D(p),p}enqueue(l){const p=this.shortcut;l.prev&&l.next&&D(l),l.next=p.next,p.next.prev=l,p.next=l,l.prev=p}toString(){const l=[],p=this.shortcut;let R=p.prev;for(;R!==p;)l.push(JSON.stringify(R,m)),R=R==null?void 0:R.prev;return`[${l.join(", ")}]`}}class g extends M{}const r=()=>1,o=(u,l)=>{var p;if(u.getAllNodes().length<=1)return[];const R=h(u,l||r);return(p=d(R.graph,R.buckets,R.zeroIdx).map(B=>u.getRelatedEdges(B.v,"out").filter(({target:Q})=>Q===B.w)))===null||p===void 0?void 0:p.flat()},d=(u,l,p)=>{let R=[];const A=l[l.length-1],B=l[0];let Q;for(;u.getAllNodes().length;){for(;Q=B.dequeue();)f(u,l,p,Q);for(;Q=A.dequeue();)f(u,l,p,Q);if(u.getAllNodes().length){for(let H=l.length-2;H>0;--H)if(Q=l[H].dequeue(),Q){R=R.concat(f(u,l,p,Q,!0));break}}}return R},f=(u,l,p,R,A)=>{var B,Q;const H=[];return u.hasNode(R.v)&&((B=u.getRelatedEdges(R.v,"in"))===null||B===void 0||B.forEach(q=>{const rt=q.data.weight,dt=u.getNode(q.source);A&&H.push({v:q.source,w:q.target,in:0,out:0}),dt.data.out===void 0&&(dt.data.out=0),dt.data.out-=rt,w(l,p,Object.assign({v:dt.id},dt.data))}),(Q=u.getRelatedEdges(R.v,"out"))===null||Q===void 0||Q.forEach(q=>{const rt=q.data.weight,dt=q.target,ft=u.getNode(dt);ft.data.in===void 0&&(ft.data.in=0),ft.data.in-=rt,w(l,p,Object.assign({v:ft.id},ft.data))}),u.removeNode(R.v)),A?H:void 0},h=(u,l)=>{const p=new k.k;let R=0,A=0;u.getAllNodes().forEach(q=>{p.addNode({id:q.id,data:{v:q.id,in:0,out:0}})}),u.getAllEdges().forEach(q=>{const rt=p.getRelatedEdges(q.source,"out").find(ft=>ft.target===q.target),dt=(l==null?void 0:l(q))||1;rt?p.updateEdgeData(rt==null?void 0:rt.id,Object.assign(Object.assign({},rt.data),{weight:rt.data.weight+dt})):p.addEdge({id:q.id,source:q.source,target:q.target,data:{weight:dt}}),A=Math.max(A,p.getNode(q.source).data.out+=dt),R=Math.max(R,p.getNode(q.target).data.in+=dt)});const B=[],Q=A+R+3;for(let q=0;q<Q;q++)B.push(new g);const H=R+1;return p.getAllNodes().forEach(q=>{w(B,H,Object.assign({v:q.id},p.getNode(q.id).data))}),{buckets:B,zeroIdx:H,graph:p}},w=(u,l,p)=>{p.out?p.in?u[p.out-p.in+l].enqueue(p):u[u.length-1].enqueue(p):u[0].enqueue(p)},W=(u,l)=>{const R=l==="greedy"?o(u,(A=>B=>B.data.weight||1)(u)):Z(u);R==null||R.forEach(A=>{const B=A.data;u.removeEdge(A.id),B.forwardName=A.data.name,B.reversed=!0,u.addEdge({id:A.id,source:A.target,target:A.source,data:Object.assign({},B)})})},Z=u=>{const l=[],p={},R={},A=B=>{R[B]||(R[B]=!0,p[B]=!0,u.getRelatedEdges(B,"out").forEach(Q=>{p[Q.target]?l.push(Q):A(Q.target)}),delete p[B])};return u.getAllNodes().forEach(B=>A(B.id)),l},L=u=>{u.getAllEdges().forEach(l=>{const p=l.data;if(p.reversed){u.removeEdge(l.id);const R=p.forwardName;delete p.reversed,delete p.forwardName,u.addEdge({id:l.id,source:l.target,target:l.source,data:Object.assign(Object.assign({},p),{forwardName:R})})}})},G=(u,l)=>Number(u)-Number(l),K=(u,l,p,R)=>{let A;do A=`${R}${Math.random()}`;while(u.hasNode(A));return p.dummy=l,u.addNode({id:A,data:p}),A},F=u=>{const l=new k.k;return u.getAllNodes().forEach(p=>{l.addNode(Object.assign({},p))}),u.getAllEdges().forEach(p=>{const R=l.getRelatedEdges(p.source,"out").find(A=>A.target===p.target);R?l.updateEdgeData(R==null?void 0:R.id,Object.assign(Object.assign({},R.data),{weight:R.data.weight+p.data.weight||0,minlen:Math.max(R.data.minlen,p.data.minlen||1)})):l.addEdge({id:p.id,source:p.source,target:p.target,data:{weight:p.data.weight||0,minlen:p.data.minlen||1}})}),l},N=u=>{const l=new k.k;return u.getAllNodes().forEach(p=>{u.getChildren(p.id).length||l.addNode(Object.assign({},p))}),u.getAllEdges().forEach(p=>{l.addEdge(p)}),l},I=(u,l)=>u==null?void 0:u.reduce((p,R,A)=>(p[R]=l[A],p),{}),z=u=>{const l={};return u.getAllNodes().forEach(p=>{const R={};u.getRelatedEdges(p.id,"out").forEach(A=>{R[A.target]=(R[A.target]||0)+(A.data.weight||0)}),l[p.id]=R}),l},J=u=>{const l=u.getAllNodes(),p=l.map(R=>{const A={};return u.getRelatedEdges(R.id,"in").forEach(B=>{A[B.source]=(A[B.source]||0)+B.data.weight}),A});return I(l.map(R=>R.id),p)},X=(u,l)=>{const p=Number(u.x),R=Number(u.y),A=Number(l.x)-p,B=Number(l.y)-R;let Q=Number(u.width)/2,H=Number(u.height)/2;if(!A&&!B)return{x:0,y:0};let q,rt;return Math.abs(B)*Q>Math.abs(A)*H?(B<0&&(H=-H),q=H*A/B,rt=H):(A<0&&(Q=-Q),q=Q,rt=Q*B/A),{x:p+q,y:R+rt}},U=u=>{const l=[],p=C(u)+1;for(let R=0;R<p;R++)l.push([]);u.getAllNodes().forEach(R=>{const A=R.data.rank;A!==void 0&&l[A]&&l[A].push(R.id)});for(let R=0;R<p;R++)l[R]=l[R].sort((A,B)=>G(u.getNode(A).data.order,u.getNode(B).data.order));return l},P=u=>{const l=u.getAllNodes().filter(R=>R.data.rank!==void 0).map(R=>R.data.rank),p=Math.min(...l);u.getAllNodes().forEach(R=>{R.data.hasOwnProperty("rank")&&p!==1/0&&(R.data.rank-=p)})},S=(u,l=0)=>{const p=u.getAllNodes(),R=p.filter(H=>H.data.rank!==void 0).map(H=>H.data.rank),A=Math.min(...R),B=[];p.forEach(H=>{const q=(H.data.rank||0)-A;B[q]||(B[q]=[]),B[q].push(H.id)});let Q=0;for(let H=0;H<B.length;H++){const q=B[H];q===void 0?H%l!==0&&(Q-=1):Q&&(q==null||q.forEach(rt=>{const dt=u.getNode(rt);dt&&(dt.data.rank=dt.data.rank||0,dt.data.rank+=Q)}))}},Y=(u,l,p,R)=>{const A={width:0,height:0};return(0,O.Z)(p)&&(0,O.Z)(R)&&(A.rank=p,A.order=R),K(u,"border",A,l)},C=u=>{let l;return u.getAllNodes().forEach(p=>{const R=p.data.rank;R!==void 0&&(l===void 0||R>l)&&(l=R)}),l||(l=0),l},$=(u,l)=>{const p={lhs:[],rhs:[]};return u==null||u.forEach(R=>{l(R)?p.lhs.push(R):p.rhs.push(R)}),p},j=(u,l)=>u.reduce((p,R)=>{const A=l(p),B=l(R);return A>B?R:p}),ot=(u,l,p,R,A,B)=>{R.includes(l.id)||(R.push(l.id),p||B.push(l.id),A(l.id).forEach(Q=>ot(u,Q,p,R,A,B)),p&&B.push(l.id))},st=(u,l,p,R)=>{const A=Array.isArray(l)?l:[l],B=q=>R?u.getSuccessors(q):u.getNeighbors(q),Q=[],H=[];return A.forEach(q=>{if(u.hasNode(q.id))ot(u,q,p==="post",H,B,Q);else throw new Error(`Graph does not have node: ${q}`)}),Q},it=u=>{const l=p=>{const R=u.getChildren(p),A=u.getNode(p);if(R!=null&&R.length&&R.forEach(B=>l(B.id)),A.data.hasOwnProperty("minRank")){A.data.borderLeft=[],A.data.borderRight=[];for(let B=A.data.minRank,Q=A.data.maxRank+1;B<Q;B+=1)gt(u,"borderLeft","_bl",p,A,B),gt(u,"borderRight","_br",p,A,B)}};u.getRoots().forEach(p=>l(p.id))},gt=(u,l,p,R,A,B)=>{const Q={rank:B,borderType:l,width:0,height:0},H=A.data[l][B-1],q=K(u,"border",Q,p);A.data[l][B]=q,u.setParent(q,R),H&&u.addEdge({id:`e${Math.random()}`,source:H,target:q,data:{weight:1}})},yt=(u,l)=>{const p=l.toLowerCase();(p==="lr"||p==="rl")&&bt(u)},pt=(u,l)=>{const p=l.toLowerCase();(p==="bt"||p==="rl")&&tt(u),(p==="lr"||p==="rl")&&(lt(u),bt(u))},bt=u=>{u.getAllNodes().forEach(l=>{wt(l)}),u.getAllEdges().forEach(l=>{wt(l)})},wt=u=>{const l=u.data.width;u.data.width=u.data.height,u.data.height=l},tt=u=>{u.getAllNodes().forEach(l=>{at(l.data)}),u.getAllEdges().forEach(l=>{var p;(p=l.data.points)===null||p===void 0||p.forEach(R=>at(R)),l.data.hasOwnProperty("y")&&at(l.data)})},at=u=>{u!=null&&u.y&&(u.y=-u.y)},lt=u=>{u.getAllNodes().forEach(l=>{ct(l.data)}),u.getAllEdges().forEach(l=>{var p;(p=l.data.points)===null||p===void 0||p.forEach(R=>ct(R)),l.data.hasOwnProperty("x")&&ct(l.data)})},ct=u=>{const l=u.x;u.x=u.y,u.y=l},xt=u=>{const l=K(u,"root",{},"_root"),p=Nt(u);let R=Math.max(...Object.values(p));Math.abs(R)===1/0&&(R=1);const A=R-1,B=2*A+1;u.getAllEdges().forEach(H=>{H.data.minlen*=B});const Q=St(u)+1;return u.getRoots().forEach(H=>{Et(u,l,B,Q,A,p,H.id)}),{nestingRoot:l,nodeRankFactor:B}},Et=(u,l,p,R,A,B,Q)=>{const H=u.getChildren(Q);if(!(H!=null&&H.length)){Q!==l&&u.addEdge({id:`e${Math.random()}`,source:l,target:Q,data:{weight:0,minlen:p}});return}const q=Y(u,"_bt"),rt=Y(u,"_bb"),dt=u.getNode(Q);u.setParent(q,Q),dt.data.borderTop=q,u.setParent(rt,Q),dt.data.borderBottom=rt,H==null||H.forEach(ft=>{Et(u,l,p,R,A,B,ft.id);const Dt=ft.data.borderTop?ft.data.borderTop:ft.id,At=ft.data.borderBottom?ft.data.borderBottom:ft.id,kt=ft.data.borderTop?R:2*R,Vt=Dt!==At?1:A-B[Q]+1;u.addEdge({id:`e${Math.random()}`,source:q,target:Dt,data:{minlen:Vt,weight:kt,nestingEdge:!0}}),u.addEdge({id:`e${Math.random()}`,source:At,target:rt,data:{minlen:Vt,weight:kt,nestingEdge:!0}})}),u.getParent(Q)||u.addEdge({id:`e${Math.random()}`,source:l,target:q,data:{weight:0,minlen:A+B[Q]}})},Nt=u=>{const l={},p=(R,A)=>{const B=u.getChildren(R);B==null||B.forEach(Q=>p(Q.id,A+1)),l[R]=A};return u.getRoots().forEach(R=>p(R.id,1)),l},St=u=>{let l=0;return u.getAllEdges().forEach(p=>{l+=p.data.weight}),l},Tt=(u,l)=>{l&&u.removeNode(l),u.getAllEdges().forEach(p=>{p.data.nestingEdge&&u.removeEdge(p.id)})},zt="edge",Zt="edge-label",oe=(u,l)=>{u.getAllEdges().forEach(p=>he(u,p,l))},he=(u,l,p)=>{let R=l.source,A=u.getNode(R).data.rank;const B=l.target,Q=u.getNode(B).data.rank,H=l.data.labelRank;if(Q===A+1)return;u.removeEdge(l.id);let q,rt,dt;for(dt=0,++A;A<Q;++dt,++A)l.data.points=[],rt={originalEdge:l,width:0,height:0,rank:A},q=K(u,zt,rt,"_d"),A===H&&(rt.width=l.data.width,rt.height=l.data.height,rt.dummy=Zt,rt.labelpos=l.data.labelpos),u.addEdge({id:`e${Math.random()}`,source:R,target:q,data:{weight:l.data.weight}}),dt===0&&p.push(q),R=q;u.addEdge({id:`e${Math.random()}`,source:R,target:B,data:{weight:l.data.weight}})},ye=(u,l)=>{l.forEach(p=>{let R=u.getNode(p);const{data:A}=R,B=A.originalEdge;let Q;B&&u.addEdge(B);let H=p;for(;R.data.dummy;)Q=u.getSuccessors(H)[0],u.removeNode(H),B.data.points.push({x:R.data.x,y:R.data.y}),R.data.dummy===Zt&&(B.data.x=R.data.x,B.data.y=R.data.y,B.data.width=R.data.width,B.data.height=R.data.height),H=Q.id,R=u.getNode(H)})};var ie=a(12637);const He=(u,l,p)=>{const R={};let A;p==null||p.forEach(B=>{let Q=u.getParent(B),H,q;for(;Q;){if(H=u.getParent(Q.id),H?(q=R[H.id],R[H.id]=Q.id):(q=A,A=Q.id),q&&q!==Q.id){l.hasNode(q)||l.addNode({id:q,data:{}}),l.hasNode(Q.id)||l.addNode({id:Q.id,data:{}}),l.hasEdge(`e${q}-${Q.id}`)||l.addEdge({id:`e${q}-${Q.id}`,source:q,target:Q.id,data:{}});return}Q=H}})},Jt=(u,l,p)=>{const R=Ae(u),A=new k.k({tree:[{id:R,children:[],data:{}}]});return u.getAllNodes().forEach(B=>{const Q=u.getParent(B.id);(B.data.rank===l||B.data.minRank<=l&&l<=B.data.maxRank)&&(A.hasNode(B.id)||A.addNode(Object.assign({},B)),Q!=null&&Q.id&&!A.hasNode(Q==null?void 0:Q.id)&&A.addNode(Object.assign({},Q)),A.setParent(B.id,(Q==null?void 0:Q.id)||R),u.getRelatedEdges(B.id,p).forEach(H=>{const q=H.source===B.id?H.target:H.source;A.hasNode(q)||A.addNode(Object.assign({},u.getNode(q)));const rt=A.getRelatedEdges(q,"out").find(({target:ft})=>ft===B.id),dt=rt!==void 0?rt.data.weight:0;rt?A.updateEdgeData(rt.id,Object.assign(Object.assign({},rt.data),{weight:H.data.weight+dt})):A.addEdge({id:H.id,source:q,target:B.id,data:{weight:H.data.weight+dt}})}),B.data.hasOwnProperty("minRank")&&A.updateNodeData(B.id,Object.assign(Object.assign({},B.data),{borderLeft:B.data.borderLeft[l],borderRight:B.data.borderRight[l]})))}),A},Ae=u=>{let l;for(;u.hasNode(l=`_root${Math.random()}`););return l},Pe=(u,l,p)=>{const R=I(p,p.map((dt,ft)=>ft)),B=l.map(dt=>{const ft=u.getRelatedEdges(dt,"out").map(Dt=>({pos:R[Dt.target]||0,weight:Dt.data.weight}));return ft==null?void 0:ft.sort((Dt,At)=>Dt.pos-At.pos)}).flat().filter(dt=>dt!==void 0);let Q=1;for(;Q<p.length;)Q<<=1;const H=2*Q-1;Q-=1;const q=Array(H).fill(0,0,H);let rt=0;return B==null||B.forEach(dt=>{if(dt){let ft=dt.pos+Q;q[ft]+=dt.weight;let Dt=0;for(;ft>0;)ft%2&&(Dt+=q[ft+1]),ft=ft-1>>1,q[ft]+=dt.weight;rt+=dt.weight*Dt}}),rt},pe=(u,l)=>{let p=0;for(let R=1;R<(l==null?void 0:l.length);R+=1)p+=Pe(u,l[R-1],l[R]);return p},Pt=u=>{const l={},p=u.getAllNodes(),R=p.map(rt=>{var dt;return(dt=rt.data.rank)!==null&&dt!==void 0?dt:-1/0}),A=Math.max(...R),B=[];for(let rt=0;rt<A+1;rt++)B.push([]);const Q=p.sort((rt,dt)=>u.getNode(rt.id).data.rank-u.getNode(dt.id).data.rank),q=Q.filter(rt=>u.getNode(rt.id).data.fixorder!==void 0).sort((rt,dt)=>u.getNode(rt.id).data.fixorder-u.getNode(dt.id).data.fixorder);return q==null||q.forEach(rt=>{isNaN(u.getNode(rt.id).data.rank)||B[u.getNode(rt.id).data.rank].push(rt.id),l[rt.id]=!0}),Q==null||Q.forEach(rt=>u.dfsTree(rt.id,dt=>{if(l.hasOwnProperty(dt.id))return!0;l[dt.id]=!0,isNaN(dt.data.rank)||B[dt.data.rank].push(dt.id)})),B},fe=(u,l)=>l.map(p=>{const R=u.getRelatedEdges(p,"in");if(!(R!=null&&R.length))return{v:p};const A={sum:0,weight:0};return R==null||R.forEach(B=>{const Q=u.getNode(B.source);A.sum+=B.data.weight*Q.data.order,A.weight+=B.data.weight}),{v:p,barycenter:A.sum/A.weight,weight:A.weight}}),me=(u,l)=>{var p,R,A;const B={};u==null||u.forEach((H,q)=>{B[H.v]={i:q,indegree:0,in:[],out:[],vs:[H.v]};const rt=B[H.v];H.barycenter!==void 0&&(rt.barycenter=H.barycenter,rt.weight=H.weight)}),(p=l.getAllEdges())===null||p===void 0||p.forEach(H=>{const q=B[H.source],rt=B[H.target];q!==void 0&&rt!==void 0&&(rt.indegree++,q.out.push(B[H.target]))});const Q=(A=(R=Object.values(B)).filter)===null||A===void 0?void 0:A.call(R,H=>!H.indegree);return _t(Q)},_t=u=>{var l,p;const R=[],A=q=>rt=>{rt.merged||(rt.barycenter===void 0||q.barycenter===void 0||rt.barycenter>=q.barycenter)&&ke(q,rt)},B=q=>rt=>{rt.in.push(q),--rt.indegree===0&&u.push(rt)};for(;u!=null&&u.length;){const q=u.pop();R.push(q),(l=q.in.reverse())===null||l===void 0||l.forEach(rt=>A(q)(rt)),(p=q.out)===null||p===void 0||p.forEach(rt=>B(q)(rt))}const Q=R.filter(q=>!q.merged),H=["vs","i","barycenter","weight"];return Q.map(q=>{const rt={};return H==null||H.forEach(dt=>{q[dt]!==void 0&&(rt[dt]=q[dt])}),rt})},ke=(u,l)=>{var p;let R=0,A=0;u.weight&&(R+=u.barycenter*u.weight,A+=u.weight),l.weight&&(R+=l.barycenter*l.weight,A+=l.weight),u.vs=(p=l.vs)===null||p===void 0?void 0:p.concat(u.vs),u.barycenter=R/A,u.weight=A,u.i=Math.min(l.i,u.i),l.merged=!0};var be=me;const kn=(u,l,p,R)=>{const A=$(u,Dt=>{const At=Dt.hasOwnProperty("fixorder")&&!isNaN(Dt.fixorder);return R?!At&&Dt.hasOwnProperty("barycenter"):At||Dt.hasOwnProperty("barycenter")}),B=A.lhs,Q=A.rhs.sort((Dt,At)=>-Dt.i- -At.i),H=[];let q=0,rt=0,dt=0;B==null||B.sort(Cn(!!l,!!p)),dt=bn(H,Q,dt),B==null||B.forEach(Dt=>{var At;dt+=(At=Dt.vs)===null||At===void 0?void 0:At.length,H.push(Dt.vs),q+=Dt.barycenter*Dt.weight,rt+=Dt.weight,dt=bn(H,Q,dt)});const ft={vs:H.flat()};return rt&&(ft.barycenter=q/rt,ft.weight=rt),ft},bn=(u,l,p)=>{let R=p,A;for(;l.length&&(A=l[l.length-1]).i<=R;)l.pop(),u==null||u.push(A.vs),R++;return R},Cn=(u,l)=>(p,R)=>{if(p.fixorder!==void 0&&R.fixorder!==void 0)return p.fixorder-R.fixorder;if(p.barycenter<R.barycenter)return-1;if(p.barycenter>R.barycenter)return 1;if(l&&p.order!==void 0&&R.order!==void 0){if(p.order<R.order)return-1;if(p.order>R.order)return 1}return u?R.i-p.i:p.i-R.i},Nn=(u,l,p,R,A,B)=>{var Q,H,q,rt;let dt=u.getChildren(l).map(Xt=>Xt.id);const ft=u.getNode(l),Dt=ft?ft.data.borderLeft:void 0,At=ft?ft.data.borderRight:void 0,kt={};Dt&&(dt=dt==null?void 0:dt.filter(Xt=>Xt!==Dt&&Xt!==At));const Vt=fe(u,dt||[]);Vt==null||Vt.forEach(Xt=>{var ue;if(!((ue=u.getChildren(Xt.v))===null||ue===void 0)&&ue.length){const ne=Nn(u,Xt.v,p,R,B);kt[Xt.v]=ne,ne.hasOwnProperty("barycenter")&&zn(Xt,ne)}});const Wt=be(Vt,p);Tn(Wt,kt),(Q=Wt.filter(Xt=>Xt.vs.length>0))===null||Q===void 0||Q.forEach(Xt=>{const ue=u.getNode(Xt.vs[0]);ue&&(Xt.fixorder=ue.data.fixorder,Xt.order=ue.data.order)});const Ft=kn(Wt,R,A,B);if(Dt&&(Ft.vs=[Dt,Ft.vs,At].flat(),!((H=u.getPredecessors(Dt))===null||H===void 0)&&H.length)){const Xt=u.getNode(((q=u.getPredecessors(Dt))===null||q===void 0?void 0:q[0].id)||""),ue=u.getNode(((rt=u.getPredecessors(At))===null||rt===void 0?void 0:rt[0].id)||"");Ft.hasOwnProperty("barycenter")||(Ft.barycenter=0,Ft.weight=0),Ft.barycenter=(Ft.barycenter*Ft.weight+Xt.data.order+ue.data.order)/(Ft.weight+2),Ft.weight+=2}return Ft},Tn=(u,l)=>{u==null||u.forEach(p=>{var R;const A=(R=p.vs)===null||R===void 0?void 0:R.map(B=>l[B]?l[B].vs:B);p.vs=A.flat()})},zn=(u,l)=>{u.barycenter!==void 0?(u.barycenter=(u.barycenter*u.weight+l.barycenter*l.weight)/(u.weight+l.weight),u.weight+=l.weight):(u.barycenter=l.barycenter,u.weight=l.weight)},sn=(u,l)=>{const p=C(u),R=[],A=[];for(let dt=1;dt<p+1;dt++)R.push(dt);for(let dt=p-1;dt>-1;dt--)A.push(dt);const B=Mn(u,R,"in"),Q=Mn(u,A,"out");let H=Pt(u);on(u,H);let q=Number.POSITIVE_INFINITY,rt;for(let dt=0,ft=0;ft<4;++dt,++ft){Sn(dt%2?B:Q,dt%4>=2,!1,l),H=U(u);const Dt=pe(u,H);Dt<q&&(ft=0,rt=(0,ie.Z)(H),q=Dt)}H=Pt(u),on(u,H);for(let dt=0,ft=0;ft<4;++dt,++ft){Sn(dt%2?B:Q,dt%4>=2,!0,l),H=U(u);const Dt=pe(u,H);Dt<q&&(ft=0,rt=(0,ie.Z)(H),q=Dt)}on(u,rt)},Mn=(u,l,p)=>l.map(R=>Jt(u,R,p)),Sn=(u,l,p,R)=>{const A=new k.k;u==null||u.forEach(B=>{var Q;const H=B.getRoots()[0].id,q=Nn(B,H,A,l,p,R);for(let rt=0;rt<((Q=q.vs)===null||Q===void 0?void 0:Q.length);rt++){const dt=B.getNode(q.vs[rt]);dt&&(dt.data.order=rt)}He(B,A,q.vs)})},on=(u,l)=>{l==null||l.forEach(p=>{p==null||p.forEach((R,A)=>{u.getNode(R).data.order=A})})},Ne=(u,l)=>{const R=u.getAllNodes().filter(Q=>{var H;return!(!((H=u.getChildren(Q.id))===null||H===void 0)&&H.length)}).map(Q=>Q.data.rank),A=Math.max(...R),B=[];for(let Q=0;Q<A+1;Q++)B[Q]=[];l==null||l.forEach(Q=>{const H=u.getNode(Q);!H||H.data.dummy||isNaN(H.data.rank)||(H.data.fixorder=B[H.data.rank].length,B[H.data.rank].push(Q))})},Fn=u=>{const l={};let p=0;const R=A=>{const B=p;u.getChildren(A).forEach(Q=>R(Q.id)),l[A]={low:B,lim:p++}};return u.getRoots().forEach(A=>R(A.id)),l},an=(u,l,p,R)=>{var A,B;const Q=[],H=[],q=Math.min(l[p].low,l[R].low),rt=Math.max(l[p].lim,l[R].lim);let dt,ft;dt=p;do dt=(A=u.getParent(dt))===null||A===void 0?void 0:A.id,Q.push(dt);while(dt&&(l[dt].low>q||rt>l[dt].lim));for(ft=dt,dt=R;dt&&dt!==ft;)H.push(dt),dt=(B=u.getParent(dt))===null||B===void 0?void 0:B.id;return{lca:ft,path:Q.concat(H.reverse())}},Ce=(u,l)=>{const p=Fn(u);l.forEach(R=>{var A,B;let Q=R,H=u.getNode(Q);const q=H.data.originalEdge;if(!q)return;const rt=an(u,p,q.source,q.target),dt=rt.path,ft=rt.lca;let Dt=0,At=dt[Dt],kt=!0;for(;Q!==q.target;){if(H=u.getNode(Q),kt){for(;At!==ft&&((A=u.getNode(At))===null||A===void 0?void 0:A.data.maxRank)<H.data.rank;)Dt++,At=dt[Dt];At===ft&&(kt=!1)}if(!kt){for(;Dt<dt.length-1&&((B=u.getNode(dt[Dt+1]))===null||B===void 0?void 0:B.data.minRank)<=H.data.rank;)Dt++;At=dt[Dt]}u.hasNode(At)&&u.setParent(Q,At),Q=u.getSuccessors(Q)[0].id}})},un=(u,l)=>{const p={},R=(A,B)=>{let Q=0,H=0;const q=A.length,rt=B==null?void 0:B[(B==null?void 0:B.length)-1];return B==null||B.forEach((dt,ft)=>{var Dt;const At=Bn(u,dt),kt=At?u.getNode(At.id).data.order:q;(At||dt===rt)&&((Dt=B.slice(H,ft+1))===null||Dt===void 0||Dt.forEach(Vt=>{var Wt;(Wt=u.getPredecessors(Vt))===null||Wt===void 0||Wt.forEach(Ft=>{var Xt;const ue=u.getNode(Ft.id),ne=ue.data.order;(ne<Q||kt<ne)&&!(ue.data.dummy&&(!((Xt=u.getNode(Vt))===null||Xt===void 0)&&Xt.data.dummy))&&mn(p,Ft.id,Vt)})}),H=ft+1,Q=kt)}),B};return l!=null&&l.length&&l.reduce(R),p},Ge=(u,l)=>{const p={};function R(H,q,rt,dt,ft){var Dt,At;let kt;for(let Vt=q;Vt<rt;Vt++)kt=H[Vt],!((Dt=u.getNode(kt))===null||Dt===void 0)&&Dt.data.dummy&&((At=u.getPredecessors(kt))===null||At===void 0||At.forEach(Wt=>{const Ft=u.getNode(Wt.id);Ft.data.dummy&&(Ft.data.order<dt||Ft.data.order>ft)&&mn(p,Wt.id,kt)}))}function A(H){return JSON.stringify(H.slice(1))}function B(H,q){const rt=A(H);q.get(rt)||(R(...H),q.set(rt,!0))}const Q=(H,q)=>{let rt=-1,dt,ft=0;const Dt=new Map;return q==null||q.forEach((At,kt)=>{var Vt;if(((Vt=u.getNode(At))===null||Vt===void 0?void 0:Vt.data.dummy)==="border"){const Wt=u.getPredecessors(At)||[];Wt.length&&(dt=u.getNode(Wt[0].id).data.order,B([q,ft,kt,rt,dt],Dt),ft=kt,rt=dt)}B([q,ft,q.length,dt,H.length],Dt)}),q};return l!=null&&l.length&&l.reduce(Q),p},Bn=(u,l)=>{var p,R;if(!((p=u.getNode(l))===null||p===void 0)&&p.data.dummy)return(R=u.getPredecessors(l))===null||R===void 0?void 0:R.find(A=>u.getNode(A.id).data.dummy)},mn=(u,l,p)=>{let R=l,A=p;if(R>A){const Q=R;R=A,A=Q}let B=u[R];B||(u[R]=B={}),B[A]=!0},dn=(u,l,p)=>{let R=l,A=p;if(R>A){const B=l;R=A,A=B}return!!u[R]},On=(u,l,p,R)=>{const A={},B={},Q={};return l==null||l.forEach(H=>{H==null||H.forEach((q,rt)=>{A[q]=q,B[q]=q,Q[q]=rt})}),l==null||l.forEach(H=>{let q=-1;H==null||H.forEach(rt=>{let dt=R(rt).map(ft=>ft.id);if(dt.length){dt=dt.sort((Dt,At)=>Q[Dt]-Q[At]);const ft=(dt.length-1)/2;for(let Dt=Math.floor(ft),At=Math.ceil(ft);Dt<=At;++Dt){const kt=dt[Dt];B[rt]===rt&&q<Q[kt]&&!dn(p,rt,kt)&&(B[kt]=rt,B[rt]=A[rt]=A[kt],q=Q[kt])}}})}),{root:A,align:B}},Rn=(u,l,p,R,A,B,Q)=>{var H;const q={},rt=Un(u,l,p,A,B,Q),dt=Q?"borderLeft":"borderRight",ft=(kt,Vt)=>{let Wt=rt.getAllNodes(),Ft=Wt.pop();const Xt={};for(;Ft;)Xt[Ft.id]?kt(Ft.id):(Xt[Ft.id]=!0,Wt.push(Ft),Wt=Wt.concat(Vt(Ft.id))),Ft=Wt.pop()},Dt=kt=>{q[kt]=(rt.getRelatedEdges(kt,"in")||[]).reduce((Vt,Wt)=>Math.max(Vt,(q[Wt.source]||0)+Wt.data.weight),0)},At=kt=>{const Vt=(rt.getRelatedEdges(kt,"out")||[]).reduce((Ft,Xt)=>Math.min(Ft,(q[Xt.target]||0)-Xt.data.weight),Number.POSITIVE_INFINITY),Wt=u.getNode(kt);Vt!==Number.POSITIVE_INFINITY&&Wt.data.borderType!==dt&&(q[kt]=Math.max(q[kt],Vt))};return ft(Dt,rt.getPredecessors.bind(rt)),ft(At,rt.getSuccessors.bind(rt)),(H=Object.values(R))===null||H===void 0||H.forEach(kt=>{q[kt]=q[p[kt]]}),q},Un=(u,l,p,R,A,B)=>{const Q=new k.k,H=Wn(R,A,B);return l==null||l.forEach(q=>{let rt;q==null||q.forEach(dt=>{const ft=p[dt];if(Q.hasNode(ft)||Q.addNode({id:ft,data:{}}),rt){const Dt=p[rt],At=Q.getRelatedEdges(Dt,"out").find(kt=>kt.target===ft);At?Q.updateEdgeData(At.id,Object.assign(Object.assign({},At.data),{weight:Math.max(H(u,dt,rt),At.data.weight||0)})):Q.addEdge({id:`e${Math.random()}`,source:Dt,target:ft,data:{weight:Math.max(H(u,dt,rt),0)}})}rt=dt})}),Q},Dn=(u,l)=>j(Object.values(l),p=>{var R;let A=Number.NEGATIVE_INFINITY,B=Number.POSITIVE_INFINITY;return(R=Object.keys(p))===null||R===void 0||R.forEach(Q=>{const H=p[Q],q=Gn(u,Q)/2;A=Math.max(H+q,A),B=Math.min(H-q,B)}),A-B});function In(u,l){const p=Object.values(l),R=Math.min(...p),A=Math.max(...p);["u","d"].forEach(B=>{["l","r"].forEach(Q=>{const H=B+Q,q=u[H];let rt;if(q===l)return;const dt=Object.values(q);rt=Q==="l"?R-Math.min(...dt):A-Math.max(...dt),rt&&(u[H]={},Object.keys(q).forEach(ft=>{u[H][ft]=q[ft]+rt}))})})}const Pn=(u,l)=>{const p={};return Object.keys(u.ul).forEach(R=>{if(l)p[R]=u[l.toLowerCase()][R];else{const A=Object.values(u).map(B=>B[R]);p[R]=(A[0]+A[1])/2}}),p},Vn=(u,l)=>{const{align:p,nodesep:R=0,edgesep:A=0}=l||{},B=buildLayerMatrix(u),Q=Object.assign(un(u,B),Ge(u,B)),H={};let q;["u","d"].forEach(dt=>{q=dt==="u"?B:Object.values(B).reverse(),["l","r"].forEach(ft=>{ft==="r"&&(q=q.map(Vt=>Object.values(Vt).reverse()));const Dt=(dt==="u"?u.getPredecessors:u.getSuccessors).bind(u),At=On(u,q,Q,Dt),kt=Rn(u,q,At.root,At.align,R,A,ft==="r");ft==="r"&&Object.keys(kt).forEach(Vt=>{kt[Vt]=-kt[Vt]}),H[dt+ft]=kt})});const rt=Dn(u,H);return In(H,rt),Pn(H,p)},Wn=(u,l,p)=>(R,A,B)=>{const Q=R.getNode(A),H=R.getNode(B);let q=0,rt=0;if(q+=Q.data.width/2,Q.data.hasOwnProperty("labelpos"))switch((Q.data.labelpos||"").toLowerCase()){case"l":rt=-Q.data.width/2;break;case"r":rt=Q.data.width/2;break}if(rt&&(q+=p?rt:-rt),rt=0,q+=(Q.data.dummy?l:u)/2,q+=(H.data.dummy?l:u)/2,q+=H.data.width/2,H.data.labelpos)switch((H.data.labelpos||"").toLowerCase()){case"l":rt=H.data.width/2;break;case"r":rt=-H.data.width/2;break}return rt&&(q+=p?rt:-rt),rt=0,q},Gn=(u,l)=>u.getNode(l).data.width||0,Zn=(u,l)=>{const{ranksep:p=0}=l||{},R=U(u);let A=0;R==null||R.forEach(B=>{const Q=B.map(q=>u.getNode(q).data.height),H=Math.max(...Q,0);B==null||B.forEach(q=>{u.getNode(q).data.y=A+H/2}),A+=H+p})},Yn=(u,l)=>{const{align:p,nodesep:R=0,edgesep:A=0}=l||{},B=U(u),Q=Object.assign(un(u,B),Ge(u,B)),H={};let q=[];["u","d"].forEach(dt=>{q=dt==="u"?B:Object.values(B).reverse(),["l","r"].forEach(ft=>{ft==="r"&&(q=q.map(Vt=>Object.values(Vt).reverse()));const Dt=(dt==="u"?u.getPredecessors:u.getSuccessors).bind(u),At=On(u,q,Q,Dt),kt=Rn(u,q,At.root,At.align,R,A,ft==="r");ft==="r"&&Object.keys(kt).forEach(Vt=>kt[Vt]=-kt[Vt]),H[dt+ft]=kt})});const rt=Dn(u,H);return rt&&In(H,rt),Pn(H,p)},cn=(u,l)=>{var p;const R=N(u);Zn(R,l);const A=Yn(R,l);(p=Object.keys(A))===null||p===void 0||p.forEach(B=>{R.getNode(B).data.x=A[B]})},yn=u=>{const l={},p=R=>{var A;const B=u.getNode(R);if(!B)return 0;if(l[R])return B.data.rank;l[R]=!0;let Q;return(A=u.getRelatedEdges(R,"out"))===null||A===void 0||A.forEach(H=>{const q=p(H.target),rt=H.data.minlen,dt=q-rt;dt&&(Q===void 0||dt<Q)&&(Q=dt)}),Q||(Q=0),B.data.rank=Q,Q};u.getAllNodes().filter(R=>u.getRelatedEdges(R.id,"in").length===0).forEach(R=>p(R.id))},Ln=u=>{const l={};let p;const R=Q=>{var H;const q=u.getNode(Q);if(!q)return 0;if(l[Q])return q.data.rank;l[Q]=!0;let rt;return(H=u.getRelatedEdges(Q,"out"))===null||H===void 0||H.forEach(dt=>{const ft=R(dt.target),Dt=dt.data.minlen,At=ft-Dt;At&&(rt===void 0||At<rt)&&(rt=At)}),rt||(rt=0),(p===void 0||rt<p)&&(p=rt),q.data.rank=rt,rt};u.getAllNodes().filter(Q=>u.getRelatedEdges(Q.id,"in").length===0).forEach(Q=>{Q&&R(Q.id)}),p===void 0&&(p=0);const A={},B=(Q,H)=>{var q;const rt=u.getNode(Q),dt=isNaN(rt.data.layer)?H:rt.data.layer;(rt.data.rank===void 0||rt.data.rank<dt)&&(rt.data.rank=dt),!A[Q]&&(A[Q]=!0,(q=u.getRelatedEdges(Q,"out"))===null||q===void 0||q.forEach(ft=>{B(ft.target,dt+ft.data.minlen)}))};u.getAllNodes().forEach(Q=>{const H=Q.data;H&&(isNaN(H.layer)?H.rank-=p:B(Q.id,H.layer))})},v=(u,l)=>u.getNode(l.target).data.rank-u.getNode(l.source).data.rank-l.data.minlen,x=u=>{const l=new k.k({tree:[]}),p=u.getAllNodes()[0],R=u.getAllNodes().length;l.addNode(p);let A,B;for(;i(l,u)<R;)A=n(l,u),B=l.hasNode(A.source)?v(u,A):-v(u,A),c(l,u,B);return l},i=(u,l)=>{const p=R=>{l.getRelatedEdges(R,"both").forEach(A=>{const B=A.source,Q=R===B?A.target:B;!u.hasNode(Q)&&!v(l,A)&&(u.addNode({id:Q,data:{}}),u.addEdge({id:A.id,source:R,target:Q,data:{}}),p(Q))})};return u.getAllNodes().forEach(R=>p(R.id)),u.getAllNodes().length},t=u=>{const l=new k.k({tree:[]}),p=u.getAllNodes()[0],R=u.getAllNodes().length;l.addNode(p);let A,B;for(;e(l,u)<R;)A=n(l,u),B=l.hasNode(A.source)?v(u,A):-v(u,A),c(l,u,B);return l},e=(u,l)=>{const p=R=>{var A;(A=l.getRelatedEdges(R,"both"))===null||A===void 0||A.forEach(B=>{const Q=B.source,H=R===Q?B.target:Q;!u.hasNode(H)&&(l.getNode(H).data.layer!==void 0||!v(l,B))&&(u.addNode({id:H,data:{}}),u.addEdge({id:B.id,source:R,target:H,data:{}}),p(H))})};return u.getAllNodes().forEach(R=>p(R.id)),u.getAllNodes().length},n=(u,l)=>j(l.getAllEdges(),p=>u.hasNode(p.source)!==u.hasNode(p.target)?v(l,p):1/0),c=(u,l,p)=>{u.getAllNodes().forEach(R=>{const A=l.getNode(R.id);A.data.rank||(A.data.rank=0),A.data.rank+=p})},E=u=>{const l=F(u);yn(l);const p=x(l);nt(p),y(p,l);let R,A;for(;R=Mt(p);)A=vt(p,l,R),It(p,l,R,A)},y=(u,l)=>{let p=st(u,u.getAllNodes(),"post",!1);p=p.slice(0,(p==null?void 0:p.length)-1),p.forEach(R=>{b(u,l,R)})},b=(u,l,p)=>{const A=u.getNode(p).data.parent,B=u.getRelatedEdges(p,"both").find(Q=>Q.target===A||Q.source===A);B.data.cutvalue=et(u,l,p)},et=(u,l,p)=>{const A=u.getNode(p).data.parent;let B=!0,Q=l.getRelatedEdges(p,"out").find(q=>q.target===A),H=0;return Q||(B=!1,Q=l.getRelatedEdges(A,"out").find(q=>q.target===p)),H=Q.data.weight,l.getRelatedEdges(p,"both").forEach(q=>{const rt=q.source===p,dt=rt?q.target:q.source;if(dt!==A){const ft=rt===B,Dt=q.data.weight;if(H+=ft?Dt:-Dt,ut(u,p,dt)){const At=u.getRelatedEdges(p,"both").find(kt=>kt.source===dt||kt.target===dt).data.cutvalue;H+=ft?-At:At}}}),H},nt=(u,l=u.getAllNodes()[0].id)=>{ht(u,{},1,l)},ht=(u,l,p,R,A)=>{var B;const Q=p;let H=p;const q=u.getNode(R);return l[R]=!0,(B=u.getNeighbors(R))===null||B===void 0||B.forEach(rt=>{l[rt.id]||(H=ht(u,l,H,rt.id,R))}),q.data.low=Q,q.data.lim=H++,A?q.data.parent=A:delete q.data.parent,H},Mt=u=>u.getAllEdges().find(l=>l.data.cutvalue<0),vt=(u,l,p)=>{let R=p.source,A=p.target;l.getRelatedEdges(R,"out").find(dt=>dt.target===A)||(R=p.target,A=p.source);const B=u.getNode(R),Q=u.getNode(A);let H=B,q=!1;B.data.lim>Q.data.lim&&(H=Q,q=!0);const rt=l.getAllEdges().filter(dt=>q===mt(u.getNode(dt.source),H)&&q!==mt(u.getNode(dt.target),H));return j(rt,dt=>v(l,dt))},It=(u,l,p,R)=>{const A=u.getRelatedEdges(p.source,"both").find(B=>B.source===p.target||B.target===p.target);A&&u.removeEdge(A.id),u.addEdge({id:`e${Math.random()}`,source:R.source,target:R.target,data:{}}),nt(u),y(u,l),Ut(u,l)},Ut=(u,l)=>{const p=u.getAllNodes().find(A=>!A.data.parent);let R=st(u,p,"pre",!1);R=R.slice(1),R.forEach(A=>{const B=u.getNode(A).data.parent;let Q=l.getRelatedEdges(A,"out").find(q=>q.target===B),H=!1;!Q&&l.hasNode(B)&&(Q=l.getRelatedEdges(B,"out").find(q=>q.target===A),H=!0),l.getNode(A).data.rank=(l.hasNode(B)&&l.getNode(B).data.rank||0)+(H?Q==null?void 0:Q.data.minlen:-(Q==null?void 0:Q.data.minlen))})},ut=(u,l,p)=>u.getRelatedEdges(l,"both").find(R=>R.source===p||R.target===p),mt=(u,l)=>l.data.low<=u.data.lim&&u.data.lim<=l.data.lim,Ot=(u,l)=>{switch(l){case"network-simplex":Qt(u);break;case"tight-tree":Rt(u);break;case"longest-path":Ct(u);break;default:Rt(u)}},Ct=yn,Rt=u=>{Ln(u),t(u)},Qt=u=>{E(u)},qt=(u,l)=>{const{edgeLabelSpace:p,keepNodeOrder:R,prevGraph:A,rankdir:B,ranksep:Q}=l;!R&&A&&$t(u,A);const H=Fe(u);p&&(l.ranksep=Be(H,{rankdir:B,ranksep:Q}));let q;try{q=Bt(H,l)}catch(rt){if(rt.message==="Not possible to find intersection inside of the rectangle"){console.error(`The following error may be caused by improper layer setting, please make sure your manual layer setting does not violate the graph's structure:
`,rt);return}throw rt}return te(u,H),q},Bt=(u,l)=>{const{acyclicer:p,ranker:R,rankdir:A="tb",nodeOrder:B,keepNodeOrder:Q,align:H,nodesep:q=50,edgesep:rt=20,ranksep:dt=50}=l;wn(u),W(u,p);const{nestingRoot:ft,nodeRankFactor:Dt}=xt(u);Ot(N(u),R),ae(u),S(u,Dt),Tt(u,ft),P(u),Te(u),Me(u);const At=[];oe(u,At),Ce(u,At),it(u),Q&&Ne(u,B),sn(u,Q),$e(u),yt(u,A),cn(u,{align:H,nodesep:q,edgesep:rt,ranksep:dt}),qe(u),Ke(u),ye(u,At),Ze(u),pt(u,A);const{width:kt,height:Vt}=Le(u);return ce(u),Ye(u),L(u),{width:kt,height:Vt}},$t=(u,l)=>{u.getAllNodes().forEach(p=>{const R=u.getNode(p.id);if(l.hasNode(p.id)){const A=l.getNode(p.id);R.data.fixorder=A.data._order,delete A.data._order}else delete R.data.fixorder})},te=(u,l)=>{u.getAllNodes().forEach(p=>{var R;const A=u.getNode(p.id);if(A){const B=l.getNode(p.id);A.data.x=B.data.x,A.data.y=B.data.y,A.data._order=B.data.order,A.data._rank=B.data.rank,!((R=l.getChildren(p.id))===null||R===void 0)&&R.length&&(A.data.width=B.data.width,A.data.height=B.data.height)}}),u.getAllEdges().forEach(p=>{const R=u.getEdge(p.id),A=l.getEdge(p.id);R.data.points=A?A.data.points:[],A&&A.data.hasOwnProperty("x")&&(R.data.x=A.data.x,R.data.y=A.data.y)})},le=["width","height","layer","fixorder"],Lt={width:0,height:0},we=["minlen","weight","width","height","labeloffset"],ge={minlen:1,weight:1,width:0,height:0,labeloffset:10,labelpos:"r"},jt=["labelpos"],Fe=u=>{const l=new k.k({tree:[]});return u.getAllNodes().forEach(p=>{const R=Ue(u.getNode(p.id).data),A=Object.assign(Object.assign({},Lt),R),B=Ht(A,le);l.hasNode(p.id)||l.addNode({id:p.id,data:Object.assign({},B)});const Q=u.hasTreeStructure("combo")?u.getParent(p.id,"combo"):u.getParent(p.id);(0,T.Z)(Q)||(l.hasNode(Q.id)||l.addNode(Object.assign({},Q)),l.setParent(p.id,Q.id))}),u.getAllEdges().forEach(p=>{const R=Ue(u.getEdge(p.id).data),A={};jt==null||jt.forEach(B=>{R[B]!==void 0&&(A[B]=R[B])}),l.addEdge({id:p.id,source:p.source,target:p.target,data:Object.assign({},ge,Ht(R,we),A)})}),l},Be=(u,l)=>{const{ranksep:p=0,rankdir:R}=l;return u.getAllNodes().forEach(A=>{isNaN(A.data.layer)||A.data.layer||(A.data.layer=0)}),u.getAllEdges().forEach(A=>{var B;A.data.minlen*=2,((B=A.data.labelpos)===null||B===void 0?void 0:B.toLowerCase())!=="c"&&(R==="TB"||R==="BT"?A.data.width+=A.data.labeloffset:A.data.height+=A.data.labeloffset)}),p/2},ae=u=>{u.getAllEdges().forEach(l=>{if(l.data.width&&l.data.height){const p=u.getNode(l.source),R=u.getNode(l.target),A={e:l,rank:(R.data.rank-p.data.rank)/2+p.data.rank};K(u,"edge-proxy",A,"_ep")}})},Te=u=>{let l=0;return u.getAllNodes().forEach(p=>{var R,A;p.data.borderTop&&(p.data.minRank=(R=u.getNode(p.data.borderTop))===null||R===void 0?void 0:R.data.rank,p.data.maxRank=(A=u.getNode(p.data.borderBottom))===null||A===void 0?void 0:A.data.rank,l=Math.max(l,p.data.maxRank||-1/0))}),l},Me=u=>{u.getAllNodes().forEach(l=>{l.data.dummy==="edge-proxy"&&(u.getEdge(l.data.e.id).data.labelRank=l.data.rank,u.removeNode(l.id))})},Le=(u,l)=>{let p,R=0,A,B=0;const{marginx:Q=0,marginy:H=0}=l||{},q=rt=>{if(!rt.data)return;const dt=rt.data.x,ft=rt.data.y,Dt=rt.data.width,At=rt.data.height;!isNaN(dt)&&!isNaN(Dt)&&(p===void 0&&(p=dt-Dt/2),p=Math.min(p,dt-Dt/2),R=Math.max(R,dt+Dt/2)),!isNaN(ft)&&!isNaN(At)&&(A===void 0&&(A=ft-At/2),A=Math.min(A,ft-At/2),B=Math.max(B,ft+At/2))};return u.getAllNodes().forEach(rt=>{q(rt)}),u.getAllEdges().forEach(rt=>{rt!=null&&rt.data.hasOwnProperty("x")&&q(rt)}),p-=Q,A-=H,u.getAllNodes().forEach(rt=>{rt.data.x-=p,rt.data.y-=A}),u.getAllEdges().forEach(rt=>{var dt;(dt=rt.data.points)===null||dt===void 0||dt.forEach(ft=>{ft.x-=p,ft.y-=A}),rt.data.hasOwnProperty("x")&&(rt.data.x-=p),rt.data.hasOwnProperty("y")&&(rt.data.y-=A)}),{width:R-p+Q,height:B-A+H}},ce=u=>{u.getAllEdges().forEach(l=>{const p=u.getNode(l.source),R=u.getNode(l.target);let A,B;l.data.points?(A=l.data.points[0],B=l.data.points[l.data.points.length-1]):(l.data.points=[],A={x:R.data.x,y:R.data.y},B={x:p.data.x,y:p.data.y}),l.data.points.unshift(X(p.data,A)),l.data.points.push(X(R.data,B))})},Ze=u=>{u.getAllEdges().forEach(l=>{if(l.data.hasOwnProperty("x"))switch((l.data.labelpos==="l"||l.data.labelpos==="r")&&(l.data.width-=l.data.labeloffset),l.data.labelpos){case"l":l.data.x-=l.data.width/2+l.data.labeloffset;break;case"r":l.data.x+=l.data.width/2+l.data.labeloffset;break}})},Ye=u=>{u.getAllEdges().forEach(l=>{var p;l.data.reversed&&((p=l.data.points)===null||p===void 0||p.reverse())})},Ke=u=>{u.getAllNodes().forEach(l=>{var p,R,A;if(!((p=u.getChildren(l.id))===null||p===void 0)&&p.length){const B=u.getNode(l.id),Q=u.getNode(B.data.borderTop),H=u.getNode(B.data.borderBottom),q=u.getNode(B.data.borderLeft[((R=B.data.borderLeft)===null||R===void 0?void 0:R.length)-1]),rt=u.getNode(B.data.borderRight[((A=B.data.borderRight)===null||A===void 0?void 0:A.length)-1]);B.data.width=Math.abs((rt==null?void 0:rt.data.x)-(q==null?void 0:q.data.x))||10,B.data.height=Math.abs((H==null?void 0:H.data.y)-(Q==null?void 0:Q.data.y))||10,B.data.x=((q==null?void 0:q.data.x)||0)+B.data.width/2,B.data.y=((Q==null?void 0:Q.data.y)||0)+B.data.height/2}}),u.getAllNodes().forEach(l=>{l.data.dummy==="border"&&u.removeNode(l.id)})},wn=u=>{u.getAllEdges().forEach(l=>{if(l.source===l.target){const p=u.getNode(l.source);p.data.selfEdges||(p.data.selfEdges=[]),p.data.selfEdges.push(l),u.removeEdge(l.id)}})},$e=u=>{const l=U(u);l==null||l.forEach(p=>{let R=0;p==null||p.forEach((A,B)=>{var Q;const H=u.getNode(A);H.data.order=B+R,(Q=H.data.selfEdges)===null||Q===void 0||Q.forEach(q=>{K(u,"selfedge",{width:q.data.width,height:q.data.height,rank:H.data.rank,order:B+ ++R,e:q},"_se")}),delete H.data.selfEdges})})},qe=u=>{u.getAllNodes().forEach(l=>{const p=u.getNode(l.id);if(p.data.dummy==="selfedge"){const R=u.getNode(p.data.e.source),A=R.data.x+R.data.width/2,B=R.data.y,Q=p.data.x-A,H=R.data.height/2;u.hasEdge(p.data.e.id)?u.updateEdgeData(p.data.e.id,p.data.e.data):u.addEdge({id:p.data.e.id,source:p.data.e.source,target:p.data.e.target,data:p.data.e.data}),u.removeNode(l.id),p.data.e.data.points=[{x:A+2*Q/3,y:B-H},{x:A+5*Q/6,y:B-H},{y:B,x:A+Q},{x:A+5*Q/6,y:B+H},{x:A+2*Q/3,y:B+H}],p.data.e.data.x=p.data.x,p.data.e.data.y=p.data.y}})},Ht=(u,l)=>{const p={};return l==null||l.forEach(R=>{u[R]!==void 0&&(p[R]=+u[R])}),p},Ue=(u={})=>{const l={};return Object.keys(u).forEach(p=>{l[p.toLowerCase()]=u[p]}),l};var Xe=a(94504),ee=a(93721),Je=a(64150);const je={rankdir:"TB",nodesep:50,ranksep:50,edgeLabelSpace:!0,ranker:"tight-tree",controlPoints:!1,radial:!1,focusNode:null};class _e{constructor(l={}){this.options=l,this.id="antv-dagre",this.options=Object.assign(Object.assign({},je),l)}execute(l,p){return(0,s.mG)(this,void 0,void 0,function*(){return this.genericDagreLayout(!1,l,p)})}assign(l,p){return(0,s.mG)(this,void 0,void 0,function*(){yield this.genericDagreLayout(!0,l,p)})}genericDagreLayout(l,p,R){return(0,s.mG)(this,void 0,void 0,function*(){const A=Object.assign(Object.assign({},this.options),R),{nodeSize:B,align:Q,rankdir:H="TB",ranksep:q,nodesep:rt,ranksepFunc:dt,nodesepFunc:ft,edgeLabelSpace:Dt,ranker:At,nodeOrder:kt,begin:Vt,controlPoints:Wt,radial:Ft,sortByCombo:Xt,preset:ue}=A,ne=new k.k({tree:[]}),ze=(0,Xe.jE)(q||50,dt),hn=(0,Xe.jE)(rt||50,ft);let Oe=hn,tn=ze;(H==="LR"||H==="RL")&&(Oe=ze,tn=hn);const En=(0,Xe.tO)(10,B,!1),fn=p.getAllNodes(),Ve=p.getAllEdges();fn.forEach(Yt=>{const ve=(0,Je._)(En(Yt)),Ee=tn(Yt),Se=Oe(Yt),xe=ve[0]+2*Se,Kt=ve[1]+2*Ee,Gt=Yt.data.layer;(0,O.Z)(Gt)?ne.addNode({id:Yt.id,data:{width:xe,height:Kt,layer:Gt}}):ne.addNode({id:Yt.id,data:{width:xe,height:Kt}})}),Xt&&(ne.attachTreeStructure("combo"),fn.forEach(Yt=>{const{parentId:ve}=Yt.data;ve!==void 0&&ne.hasNode(ve)&&ne.setParent(Yt.id,ve,"combo")})),Ve.forEach(Yt=>{ne.addEdge({id:Yt.id,source:Yt.source,target:Yt.target,data:{weight:Yt.data.weight||1}})});let en;ue!=null&&ue.length&&(en=new k.k({nodes:ue})),qt(ne,{prevGraph:en,edgeLabelSpace:Dt,keepNodeOrder:!!kt,nodeOrder:kt||[],acyclicer:"greedy",ranker:At,rankdir:H,nodesep:rt,align:Q});const Ie=[0,0];if(Vt){let Yt=1/0,ve=1/0;ne.getAllNodes().forEach(Ee=>{Yt>Ee.data.x&&(Yt=Ee.data.x),ve>Ee.data.y&&(ve=Ee.data.y)}),ne.getAllEdges().forEach(Ee=>{var Se;(Se=Ee.data.points)===null||Se===void 0||Se.forEach(xe=>{Yt>xe.x&&(Yt=xe.x),ve>xe.y&&(ve=xe.y)})}),Ie[0]=Vt[0]-Yt,Ie[1]=Vt[1]-ve}const rn=H==="LR"||H==="RL";if(!Ft){const Yt=new Set,Ee=H==="BT"||H==="RL"?(Gt,re)=>re-Gt:(Gt,re)=>Gt-re;ne.getAllNodes().forEach(Gt=>{Gt.data.x=Gt.data.x+Ie[0],Gt.data.y=Gt.data.y+Ie[1],Yt.add(rn?Gt.data.x:Gt.data.y)});const Se=Array.from(Yt).sort(Ee),xe=rn?(Gt,re)=>Gt.x!==re.x:(Gt,re)=>Gt.y!==re.y,Kt=rn?(Gt,re,de)=>{const Re=Math.max(re.y,de.y),De=Math.min(re.y,de.y);return Gt.filter(We=>We.y<=Re&&We.y>=De)}:(Gt,re,de)=>{const Re=Math.max(re.x,de.x),De=Math.min(re.x,de.x);return Gt.filter(We=>We.x<=Re&&We.x>=De)};ne.getAllEdges().forEach((Gt,re)=>{var de;Dt&&Wt&&Gt.data.type!=="loop"&&(Gt.data.controlPoints=Qe((de=Gt.data.points)===null||de===void 0?void 0:de.map(({x:Re,y:De})=>({x:Re+Ie[0],y:De+Ie[1]})),ne.getNode(Gt.source),ne.getNode(Gt.target),Se,rn,xe,Kt))})}let nn=[];nn=ne.getAllNodes().map(Yt=>(0,ee.u)(Yt));const ln=ne.getAllEdges();return l&&(nn.forEach(Yt=>{p.mergeNodeData(Yt.id,{x:Yt.data.x,y:Yt.data.y})}),ln.forEach(Yt=>{p.mergeEdgeData(Yt.id,{controlPoints:Yt.data.controlPoints})})),{nodes:nn,edges:ln}})}}const Qe=(u,l,p,R,A,B,Q)=>{let H=(u==null?void 0:u.slice(1,u.length-1))||[];if(l&&p){let{x:q,y:rt}=l.data,{x:dt,y:ft}=p.data;if(A&&(q=l.data.y,rt=l.data.x,dt=p.data.y,ft=p.data.x),ft!==rt&&q!==dt){const Dt=R.indexOf(rt),At=R[Dt+1];if(At){const Wt=H[0],Ft=A?{x:(rt+At)/2,y:(Wt==null?void 0:Wt.y)||dt}:{x:(Wt==null?void 0:Wt.x)||dt,y:(rt+At)/2};(!Wt||B(Wt,Ft))&&H.unshift(Ft)}const kt=R.indexOf(ft),Vt=Math.abs(kt-Dt);if(Vt===1)H=Q(H,l.data,p.data),H.length||H.push(A?{x:(rt+ft)/2,y:q}:{x:q,y:(rt+ft)/2});else if(Vt>1){const Wt=R[kt-1];if(Wt){const Ft=H[H.length-1],Xt=A?{x:(ft+Wt)/2,y:(Ft==null?void 0:Ft.y)||dt}:{x:(Ft==null?void 0:Ft.x)||q,y:(ft+Wt)/2};(!Ft||B(Ft,Xt))&&H.push(Xt)}}}}return H}},75346:function(V,_,a){"use strict";a.d(_,{S:function(){return D}});var s=a(15767),k=a(94504),O=a(93721),T=a(23644);const m={radius:null,startRadius:null,endRadius:null,startAngle:0,endAngle:2*Math.PI,clockwise:!0,divisions:1,ordering:null,angleRatio:1};class D{constructor(d={}){this.options=d,this.id="circular",this.options=Object.assign(Object.assign({},m),d)}execute(d,f){return(0,s.mG)(this,void 0,void 0,function*(){return this.genericCircularLayout(!1,d,f)})}assign(d,f){return(0,s.mG)(this,void 0,void 0,function*(){yield this.genericCircularLayout(!0,d,f)})}genericCircularLayout(d,f,h){return(0,s.mG)(this,void 0,void 0,function*(){const w=Object.assign(Object.assign({},this.options),h),{width:W,height:Z,center:L,divisions:G,startAngle:K=0,endAngle:F=2*Math.PI,angleRatio:N,ordering:I,clockwise:z,nodeSpacing:J,nodeSize:X}=w,U=f.getAllNodes(),P=f.getAllEdges(),[S,Y,C]=r(W,Z,L),$=U==null?void 0:U.length;if(!$||$===1)return(0,T.P)(f,d,C);const j=(F-K)/$;let{radius:ot,startRadius:st,endRadius:it}=w;if(J){const wt=(0,k.jE)(10,J),tt=(0,k.tO)(10,X);let at=-1/0;U.forEach(ct=>{const xt=tt(ct);at<xt&&(at=xt)});let lt=0;U.forEach((ct,xt)=>{xt===0?lt+=at||10:lt+=(wt(ct)||0)+(at||10)}),ot=lt/(2*Math.PI)}else!ot&&!st&&!it?ot=Math.min(Y,S)/2:!st&&it?st=it:st&&!it&&(it=st);const gt=j*N;let yt=[];I==="topology"?yt=M(f,U):I==="topology-directed"?yt=M(f,U,!0):I==="degree"?yt=g(f,U):yt=U.map(wt=>(0,O.u)(wt));const pt=Math.ceil($/G);for(let wt=0;wt<$;++wt){let tt=ot;!tt&&st!==null&&it!==null&&(tt=st+wt*(it-st)/($-1)),tt||(tt=10+wt*100/($-1));let at=K+wt%pt*gt+2*Math.PI/G*Math.floor(wt/pt);z||(at=F-wt%pt*gt-2*Math.PI/G*Math.floor(wt/pt)),yt[wt].data.x=C[0]+Math.cos(at)*tt,yt[wt].data.y=C[1]+Math.sin(at)*tt}return d&&yt.forEach(wt=>{f.mergeNodeData(wt.id,{x:wt.data.x,y:wt.data.y})}),{nodes:yt,edges:P}})}}const M=(o,d,f=!1)=>{const h=[(0,O.u)(d[0])],w={},W=d.length;w[d[0].id]=!0;let Z=0;return d.forEach((L,G)=>{if(G!==0)if((G===W-1||o.getDegree(L.id,"both")!==o.getDegree(d[G+1].id,"both")||o.areNeighbors(h[Z].id,L.id))&&!w[L.id])h.push((0,O.u)(L)),w[L.id]=!0,Z++;else{const K=f?o.getSuccessors(h[Z].id):o.getNeighbors(h[Z].id);let F=!1;for(let I=0;I<K.length;I++){const z=K[I];if(o.getDegree(z.id)===o.getDegree(L.id)&&!w[z.id]){h.push((0,O.u)(z)),w[z.id]=!0,F=!0;break}}let N=0;for(;!F&&(w[d[N].id]||(h.push((0,O.u)(d[N])),w[d[N].id]=!0,F=!0),N++,N!==W););}}),h};function g(o,d){const f=[];return d.forEach((h,w)=>{f.push((0,O.u)(h))}),f.sort((h,w)=>o.getDegree(h.id,"both")-o.getDegree(w.id,"both")),f}const r=(o,d,f)=>{let h=o,w=d,W=f;return!h&&typeof window!="undefined"&&(h=window.innerWidth),!w&&typeof window!="undefined"&&(w=window.innerHeight),W||(W=[h/2,w/2]),[h,w,W]}},92889:function(V,_,a){"use strict";a.d(_,{u:function(){return W}});var s=a(15767),k=a(16754),O=a(22355),T=a(90079),m=a(48758),D=a(8007),M=a(32352),g=a(83221),r=a(11749),o=a(74495),d=a(44290),f=a(23644);const h={gForce:!0,force2:!0,d3force:!0,fruchterman:!0,forceAtlas2:!0,force:!0,"graphin-force":!0},w={center:[0,0],comboPadding:10,treeKey:"combo"};class W{constructor(G={}){this.options=G,this.id="comboCombined",this.options=Object.assign(Object.assign({},w),G)}execute(G,K){return(0,s.mG)(this,void 0,void 0,function*(){return this.genericComboCombinedLayout(!1,G,K)})}assign(G,K){return(0,s.mG)(this,void 0,void 0,function*(){yield this.genericComboCombinedLayout(!0,G,K)})}genericComboCombinedLayout(G,K,F){return(0,s.mG)(this,void 0,void 0,function*(){const N=this.initVals(Object.assign(Object.assign({},this.options),F)),{center:I,treeKey:z,outerLayout:J}=N,X=K.getAllNodes().filter(tt=>!tt.data._isCombo),U=K.getAllNodes().filter(tt=>tt.data._isCombo),P=K.getAllEdges(),S=X==null?void 0:X.length;if(!S||S===1)return(0,f.P)(K,G,I);const Y=[],C=new Map;X.forEach(tt=>{C.set(tt.id,tt)});const $=new Map;U.forEach(tt=>{$.set(tt.id,tt)});const j=new Map,ot=this.getInnerGraphs(K,z,C,$,P,N,j);yield Promise.all(ot);const st=new Map,it=[],gt=new Map;let yt=!0;K.getRoots(z).forEach(tt=>{const at=j.get(tt.id),lt=$.get(tt.id)||C.get(tt.id),ct={id:tt.id,data:Object.assign(Object.assign({},tt.data),{x:at.data.x||lt.data.x,y:at.data.y||lt.data.y,fx:at.data.fx||lt.data.fx,fy:at.data.fy||lt.data.fy,mass:at.data.mass||lt.data.mass,size:at.data.size})};it.push(ct),st.set(tt.id,!0),!isNaN(ct.data.x)&&ct.data.x!==0&&!isNaN(ct.data.y)&&ct.data.y!==0?yt=!1:(ct.data.x=Math.random()*100,ct.data.y=Math.random()*100),(0,o._)(K,[tt],xt=>{xt.id!==tt.id&&gt.set(xt.id,tt.id)},"TB",z)});const pt=[];P.forEach(tt=>{const at=gt.get(tt.source)||tt.source,lt=gt.get(tt.target)||tt.target;at!==lt&&st.has(at)&&st.has(lt)&&pt.push({id:tt.id,source:at,target:lt,data:{}})});let bt;if(it!=null&&it.length){if(it.length===1)it[0].data.x=I[0],it[0].data.y=I[1];else{const tt=new k.k({nodes:it,edges:pt}),at=J||new M.y;yt&&h[at.id]&&(yield(it.length<100?new g.A:new D.W).assign(tt));const lt=Object.assign({center:I,kg:5,preventOverlap:!0,animate:!1},at.id==="force"?{gravity:1,factor:4,linkDistance:(ct,xt,Et)=>{const Nt=Math.max(...xt.data.size)||32,St=Math.max(...Et.data.size)||32;return Nt/2+St/2+200}}:{});bt=yield Z(at,tt,lt)}j.forEach(tt=>{var at;const lt=bt.nodes.find(Et=>Et.id===tt.id);if(lt){const{x:Et,y:Nt}=lt.data;tt.data.visited=!0,tt.data.x=Et,tt.data.y=Nt,Y.push({id:tt.id,data:{x:Et,y:Nt}})}const{x:ct,y:xt}=tt.data;(at=tt.data.nodes)===null||at===void 0||at.forEach(Et=>{Y.push({id:Et.id,data:{x:Et.data.x+ct,y:Et.data.y+xt}})})}),j.forEach(({data:tt})=>{const{x:at,y:lt,visited:ct,nodes:xt}=tt;xt==null||xt.forEach(Et=>{if(!ct){const Nt=Y.find(St=>St.id===Et.id);Nt.data.x+=at||0,Nt.data.y+=lt||0}})})}return G&&Y.forEach(tt=>{K.mergeNodeData(tt.id,{x:tt.data.x,y:tt.data.y})}),{nodes:Y,edges:P}})}initVals(G){const K=Object.assign({},G),{nodeSize:F,spacing:N,comboPadding:I}=G;let z,J;if((0,O.Z)(N)?J=()=>N:(0,T.Z)(N)?J=N:J=()=>0,K.spacing=J,!F)z=U=>{const P=J(U);return U.size?(0,d.k)(U.size)?((U.size[0]>U.size[1]?U.size[0]:U.size[1])+P)/2:(0,m.Z)(U.size)?((U.size.width>U.size.height?U.size.width:U.size.height)+P)/2:(U.size+P)/2:32+P/2};else if((0,T.Z)(F))z=U=>{const P=F(U),S=J(U);return(0,d.k)(U.size)?((U.size[0]>U.size[1]?U.size[0]:U.size[1])+S)/2:((P||32)+S)/2};else if((0,d.k)(F)){const P=(F[0]>F[1]?F[0]:F[1])/2;z=S=>P+J(S)/2}else{const U=F/2;z=P=>U+J(P)/2}K.nodeSize=z;let X;return(0,O.Z)(I)?X=()=>I:(0,d.k)(I)?X=()=>Math.max.apply(null,I):(0,T.Z)(I)?X=I:X=()=>0,K.comboPadding=X,K}getInnerGraphs(G,K,F,N,I,z,J){const{nodeSize:X,comboPadding:U,spacing:P,innerLayout:S}=z,Y=S||new D.W({}),C={center:[0,0],preventOverlap:!0,nodeSpacing:P},$=[],j=ot=>{let st=(U==null?void 0:U(ot))||10;return(0,d.k)(st)&&(st=Math.max(...st)),{size:st?[st*2,st*2]:[30,30],padding:st}};return G.getRoots(K).forEach(ot=>{J.set(ot.id,{id:ot.id,data:{nodes:[],size:j(ot).size}});let st=Promise.resolve();(0,o._)(G,[ot],it=>{var gt;if(!it.data._isCombo)return;const{size:yt,padding:pt}=j(it);if(!(!((gt=G.getChildren(it.id,K))===null||gt===void 0)&&gt.length))J.set(it.id,{id:it.id,data:Object.assign(Object.assign({},it.data),{size:yt})});else{const bt=J.get(it.id);J.set(it.id,{id:it.id,data:Object.assign({nodes:[]},bt==null?void 0:bt.data)});const wt=new Map,tt=G.getChildren(it.id,K).map(ct=>{if(ct.data._isCombo)return J.has(ct.id)||J.set(ct.id,{id:ct.id,data:Object.assign({},ct.data)}),wt.set(ct.id,!0),J.get(ct.id);const xt=F.get(ct.id)||N.get(ct.id);return wt.set(ct.id,!0),{id:ct.id,data:Object.assign(Object.assign({},xt.data),ct.data)}}),at={nodes:tt,edges:I.filter(ct=>wt.has(ct.source)&&wt.has(ct.target))};let lt=1/0;tt.forEach(ct=>{var xt;let{size:Et}=ct.data;Et||(Et=((xt=J.get(ct.id))===null||xt===void 0?void 0:xt.data.size)||(X==null?void 0:X(ct))||[30,30]),(0,O.Z)(Et)&&(Et=[Et,Et]);const[Nt,St]=Et;lt>Nt&&(lt=Nt),lt>St&&(lt=St),ct.data.size=Et}),st=st.then(()=>(0,s.mG)(this,void 0,void 0,function*(){const ct=new k.k(at);yield Z(Y,ct,C,!0);const{minX:xt,minY:Et,maxX:Nt,maxY:St}=(0,o.H0)(tt),Tt={x:(Nt+xt)/2,y:(St+Et)/2};at.nodes.forEach(Zt=>{Zt.data.x-=Tt.x,Zt.data.y-=Tt.y});const zt=[Math.max(Nt-xt,lt)+pt*2,Math.max(St-Et,lt)+pt*2];J.get(it.id).data.size=zt,J.get(it.id).data.nodes=tt}))}return!0},"BT",K),$.push(st)}),$}}function Z(L,G,K,F){var N;return(0,s.mG)(this,void 0,void 0,function*(){return(0,r.h)(L)?(L.execute(G,K),L.stop(),L.tick((N=K.iterations)!==null&&N!==void 0?N:300)):F?yield L.assign(G,K):yield L.execute(G,K)})}},8007:function(V,_,a){"use strict";a.d(_,{W:function(){return d}});var s=a(15767),k=a(90079),O=a(22355),T=a(48758),m=a(43706),D=a(44290),M=a(93721),g=a(23644),r=a(64150);const o={nodeSize:30,nodeSpacing:10,preventOverlap:!1,sweep:void 0,equidistant:!1,startAngle:3/2*Math.PI,clockwise:!0,maxLevelDiff:void 0,sortBy:"degree"};class d{constructor(h={}){this.options=h,this.id="concentric",this.options=Object.assign(Object.assign({},o),h)}execute(h,w){return(0,s.mG)(this,void 0,void 0,function*(){return this.genericConcentricLayout(!1,h,w)})}assign(h,w){return(0,s.mG)(this,void 0,void 0,function*(){yield this.genericConcentricLayout(!0,h,w)})}genericConcentricLayout(h,w,W){return(0,s.mG)(this,void 0,void 0,function*(){const Z=Object.assign(Object.assign({},this.options),W),{center:L,width:G,height:K,sortBy:F,maxLevelDiff:N,sweep:I,clockwise:z,equidistant:J,preventOverlap:X,startAngle:U=3/2*Math.PI,nodeSize:P,nodeSpacing:S}=Z,Y=w.getAllNodes(),C=w.getAllEdges(),$=!G&&typeof window!="undefined"?window.innerWidth:G,j=!K&&typeof window!="undefined"?window.innerHeight:K,ot=L||[$/2,j/2];if(!(Y!=null&&Y.length)||Y.length===1)return(0,g.P)(w,h,ot);const st=[];let it,gt=0;(0,D.k)(P)?it=Math.max(P[0],P[1]):(0,k.Z)(P)?(it=-1/0,Y.forEach(Et=>{const Nt=Math.max(...(0,r._)(P(Et)));Nt>it&&(it=Nt)})):it=P,(0,D.k)(S)?gt=Math.max(S[0],S[1]):(0,O.Z)(S)&&(gt=S),Y.forEach(Et=>{const Nt=(0,M.u)(Et);st.push(Nt);let St=it;const{data:Tt}=Nt;(0,D.k)(Tt.size)?St=Math.max(Tt.size[0],Tt.size[1]):(0,O.Z)(Tt.size)?St=Tt.size:(0,T.Z)(Tt.size)&&(St=Math.max(Tt.size.width,Tt.size.height)),it=Math.max(it,St),(0,k.Z)(S)&&(gt=Math.max(S(Et),gt))});const yt={};st.forEach((Et,Nt)=>{yt[Et.id]=Nt});let pt=F;(!(0,m.Z)(pt)||st[0].data[pt]===void 0)&&(pt="degree"),pt==="degree"?st.sort((Et,Nt)=>w.getDegree(Nt.id,"both")-w.getDegree(Et.id,"both")):st.sort((Et,Nt)=>Nt.data[pt]-Et.data[pt]);const bt=st[0],wt=(N||(pt==="degree"?w.getDegree(bt.id,"both"):bt.data[pt]))/4,tt=[{nodes:[]}];let at=tt[0];st.forEach(Et=>{if(at.nodes.length>0){const Nt=Math.abs(pt==="degree"?w.getDegree(at.nodes[0].id,"both")-w.getDegree(Et.id,"both"):at.nodes[0].data[pt]-Et.data[pt]);wt&&Nt>=wt&&(at={nodes:[]},tt.push(at))}at.nodes.push(Et)});let lt=it+gt;if(!X){const Et=tt.length>0&&tt[0].nodes.length>1,St=(Math.min($,j)/2-lt)/(tt.length+(Et?1:0));lt=Math.min(lt,St)}let ct=0;if(tt.forEach(Et=>{const Nt=I===void 0?2*Math.PI-2*Math.PI/Et.nodes.length:I;if(Et.dTheta=Nt/Math.max(1,Et.nodes.length-1),Et.nodes.length>1&&X){const St=Math.cos(Et.dTheta)-Math.cos(0),Tt=Math.sin(Et.dTheta)-Math.sin(0),zt=Math.sqrt(lt*lt/(St*St+Tt*Tt));ct=Math.max(zt,ct)}Et.r=ct,ct+=lt}),J){let Et=0,Nt=0;for(let St=0;St<tt.length;St++){const zt=(tt[St].r||0)-Nt;Et=Math.max(Et,zt)}Nt=0,tt.forEach((St,Tt)=>{Tt===0&&(Nt=St.r||0),St.r=Nt,Nt+=Et})}return tt.forEach(Et=>{const Nt=Et.dTheta||0,St=Et.r||0;Et.nodes.forEach((Tt,zt)=>{const Zt=U+(z?1:-1)*Nt*zt;Tt.data.x=ot[0]+St*Math.cos(Zt),Tt.data.y=ot[1]+St*Math.sin(Zt)})}),h&&st.forEach(Et=>w.mergeNodeData(Et.id,{x:Et.data.x,y:Et.data.y})),{nodes:st,edges:C}})}}},67453:function(V,_,a){"use strict";a.d(_,{j:function(){return L}});var s=a(15767),k=a(11051),O=a(1819),T=a(44575),m=a(64681),D=a(4507),M=a(76265),g=a(61722),r=a(24211);function o(K){return K.x+K.vx}function d(K){return K.y+K.vy}function f(K){var F,N,I,z=1,J=1;typeof K!="function"&&(K=(0,g.Z)(K==null?1:+K));function X(){for(var S,Y=F.length,C,$,j,ot,st,it,gt=0;gt<J;++gt)for(C=(0,M.Z)(F,o,d).visitAfter(U),S=0;S<Y;++S)$=F[S],st=N[$.index],it=st*st,j=$.x+$.vx,ot=$.y+$.vy,C.visit(yt);function yt(pt,bt,wt,tt,at){var lt=pt.data,ct=pt.r,xt=st+ct;if(lt){if(lt.index>$.index){var Et=j-lt.x-lt.vx,Nt=ot-lt.y-lt.vy,St=Et*Et+Nt*Nt;St<xt*xt&&(Et===0&&(Et=(0,r.Z)(I),St+=Et*Et),Nt===0&&(Nt=(0,r.Z)(I),St+=Nt*Nt),St=(xt-(St=Math.sqrt(St)))/St*z,$.vx+=(Et*=St)*(xt=(ct*=ct)/(it+ct)),$.vy+=(Nt*=St)*xt,lt.vx-=Et*(xt=1-xt),lt.vy-=Nt*xt)}return}return bt>j+xt||tt<j-xt||wt>ot+xt||at<ot-xt}}function U(S){if(S.data)return S.r=N[S.data.index];for(var Y=S.r=0;Y<4;++Y)S[Y]&&S[Y].r>S.r&&(S.r=S[Y].r)}function P(){if(F){var S,Y=F.length,C;for(N=new Array(Y),S=0;S<Y;++S)C=F[S],N[C.index]=+K(C,S,F)}}return X.initialize=function(S,Y){F=S,I=Y,P()},X.iterations=function(S){return arguments.length?(J=+S,X):J},X.strength=function(S){return arguments.length?(z=+S,X):z},X.radius=function(S){return arguments.length?(K=typeof S=="function"?S:(0,g.Z)(+S),P(),X):K},X}function h(K,F,N){var I,z=(0,g.Z)(.1),J,X;typeof K!="function"&&(K=(0,g.Z)(+K)),F==null&&(F=0),N==null&&(N=0);function U(S){for(var Y=0,C=I.length;Y<C;++Y){var $=I[Y],j=$.x-F||1e-6,ot=$.y-N||1e-6,st=Math.sqrt(j*j+ot*ot),it=(X[Y]-st)*J[Y]*S/st;$.vx+=j*it,$.vy+=ot*it}}function P(){if(I){var S,Y=I.length;for(J=new Array(Y),X=new Array(Y),S=0;S<Y;++S)X[S]=+K(I[S],S,I),J[S]=isNaN(X[S])?0:+z(I[S],S,I)}}return U.initialize=function(S){I=S,P()},U.strength=function(S){return arguments.length?(z=typeof S=="function"?S:(0,g.Z)(+S),P(),U):z},U.radius=function(S){return arguments.length?(K=typeof S=="function"?S:(0,g.Z)(+S),P(),U):K},U.x=function(S){return arguments.length?(F=+S,U):F},U.y=function(S){return arguments.length?(N=+S,U):N},U}var w=a(57280),W=a(96207),Z=a(42655);class L{constructor(F){this.id="d3-force",this.config={inputNodeAttrs:["x","y","vx","vy","fx","fy"],outputNodeAttrs:["x","y","vx","vy"],simulationAttrs:["alpha","alphaMin","alphaDecay","alphaTarget","velocityDecay","randomSource"]},this.forceMap={link:T.Z,manyBody:m.Z,center:D.Z,collide:f,radial:h,x:w.Z,y:W.Z},this.options={link:{id:N=>N.id},manyBody:{},center:{x:0,y:0}},this.context={options:{},assign:!1,nodes:[],edges:[]},(0,k.Z)(this.options,F),this.options.forceSimulation&&(this.simulation=this.options.forceSimulation)}execute(F,N){return(0,s.mG)(this,void 0,void 0,function*(){return this.genericLayout(!1,F,N)})}assign(F,N){return(0,s.mG)(this,void 0,void 0,function*(){yield this.genericLayout(!0,F,N)})}stop(){this.simulation.stop()}tick(F){return this.simulation.tick(F),this.getResult()}restart(){this.simulation.restart()}setFixedPosition(F,N){const I=this.context.nodes.find(z=>z.id===F);I&&N.forEach((z,J)=>{if(typeof z=="number"||z===null){const X=["fx","fy","fz"][J];I[X]=z}})}getOptions(F){var N,I;const z=(0,k.Z)({},this.options,F);return z.collide&&((N=z.collide)===null||N===void 0?void 0:N.radius)===void 0&&(z.collide=z.collide||{},z.collide.radius=(I=z.nodeSize)!==null&&I!==void 0?I:10),z.iterations===void 0&&(z.link&&z.link.iterations===void 0&&(z.iterations=z.link.iterations),z.collide&&z.collide.iterations===void 0&&(z.iterations=z.collide.iterations)),this.context.options=z,z}genericLayout(F,N,I){var z;return(0,s.mG)(this,void 0,void 0,function*(){const J=this.getOptions(I),X=N.getAllNodes().map(({id:Y,data:C})=>Object.assign(Object.assign({id:Y},C),(0,O.Z)(C.data,this.config.inputNodeAttrs))),U=N.getAllEdges().map(Y=>Object.assign({},Y));Object.assign(this.context,{assign:F,nodes:X,edges:U,graph:N});const P=new Promise(Y=>{this.resolver=Y}),S=this.setSimulation(J);return S.nodes(X),(z=S.force("link"))===null||z===void 0||z.links(U),P})}getResult(){const{assign:F,nodes:N,edges:I,graph:z}=this.context,J=N.map(U=>({id:U.id,data:Object.assign(Object.assign({},U.data),(0,O.Z)(U,this.config.outputNodeAttrs))})),X=I.map(({id:U,source:P,target:S,data:Y})=>({id:U,source:typeof P=="object"?P.id:P,target:typeof S=="object"?S.id:S,data:Y}));return F&&J.forEach(U=>z.mergeNodeData(U.id,U.data)),{nodes:J,edges:X}}initSimulation(){return(0,Z.Z)()}setSimulation(F){const N=this.simulation||this.options.forceSimulation||this.initSimulation();return this.simulation||(this.simulation=N.on("tick",()=>{var I;return(I=F.onTick)===null||I===void 0?void 0:I.call(F,this.getResult())}).on("end",()=>{var I;return(I=this.resolver)===null||I===void 0?void 0:I.call(this,this.getResult())})),G(N,this.config.simulationAttrs.map(I=>[I,F[I]])),Object.entries(this.forceMap).forEach(([I,z])=>{const J=I;if(F[I]){let X=N.force(J);X||(X=z(),N.force(J,X)),G(X,Object.entries(F[J]))}else N.force(J,null)}),N}}const G=(K,F)=>F.reduce((N,[I,z])=>!N[I]||z===void 0?N:N[I].call(K,z),K)},71233:function(V,_,a){"use strict";a.d(_,{V:function(){return M}});var s=a(15767),k=a(22355),O=a(90079),T=a(6724),m=a.n(T),D=a(64150);class M{constructor(r){this.id="dagre",this.options={},Object.assign(this.options,M.defaultOptions,r)}execute(r,o){return(0,s.mG)(this,void 0,void 0,function*(){return this.genericDagreLayout(!1,r,Object.assign(Object.assign({},this.options),o))})}assign(r,o){return(0,s.mG)(this,void 0,void 0,function*(){yield this.genericDagreLayout(!0,r,Object.assign(Object.assign({},this.options),o))})}genericDagreLayout(r,o,d){return(0,s.mG)(this,void 0,void 0,function*(){const{nodeSize:f}=d,h=new T.graphlib.Graph;h.setGraph(d),h.setDefaultEdgeLabel(()=>({}));const w=o.getAllNodes(),W=o.getAllEdges();[...w,...W].some(({id:L})=>(0,k.Z)(L))&&console.error("Dagre layout only support string id, it will convert number to string."),o.getAllNodes().forEach(L=>{const{id:G}=L,K=Object.assign({},L.data);if(f!==void 0){const[F,N]=(0,D._)((0,O.Z)(f)?f(L):f);Object.assign(K,{width:F,height:N})}h.setNode(G.toString(),K)}),o.getAllEdges().forEach(({id:L,source:G,target:K})=>{h.setEdge(G.toString(),K.toString(),{id:L})}),m().layout(h);const Z={nodes:[],edges:[]};return h.nodes().forEach(L=>{const G=h.node(L);Z.nodes.push({id:L,data:G}),r&&o.mergeNodeData(L,G)}),h.edges().forEach(L=>{const G=h.edge(L),{id:K}=G,F=(0,s._T)(G,["id"]),{v:N,w:I}=L;Z.edges.push({id:K,source:N,target:I,data:F}),r&&o.mergeEdgeData(K,F)}),Z})}}M.defaultOptions={}},87722:function(V,_,a){"use strict";a.d(_,{E:function(){return d}});var s=a(15767),k=a(16754),O=a(22355),T=a(93721),m=a(94504),D=a(23644);class M{constructor(h){this.id=h.id||0,this.rx=h.rx,this.ry=h.ry,this.fx=0,this.fy=0,this.mass=h.mass,this.degree=h.degree,this.g=h.g||0}distanceTo(h){const w=this.rx-h.rx,W=this.ry-h.ry;return Math.hypot(w,W)}setPos(h,w){this.rx=h,this.ry=w}resetForce(){this.fx=0,this.fy=0}addForce(h){const w=h.rx-this.rx,W=h.ry-this.ry;let Z=Math.hypot(w,W);Z=Z<1e-4?1e-4:Z;const L=this.g*(this.degree+1)*(h.degree+1)/Z;this.fx+=L*w/Z,this.fy+=L*W/Z}in(h){return h.contains(this.rx,this.ry)}add(h){const w=this.mass+h.mass,W=(this.rx*this.mass+h.rx*h.mass)/w,Z=(this.ry*this.mass+h.ry*h.mass)/w,L=this.degree+h.degree,G={rx:W,ry:Z,mass:w,degree:L};return new M(G)}}class g{constructor(h){this.xmid=h.xmid,this.ymid=h.ymid,this.length=h.length,this.massCenter=h.massCenter||[0,0],this.mass=h.mass||1}getLength(){return this.length}contains(h,w){const W=this.length/2;return h<=this.xmid+W&&h>=this.xmid-W&&w<=this.ymid+W&&w>=this.ymid-W}NW(){const h=this.xmid-this.length/4,w=this.ymid+this.length/4,W=this.length/2,Z={xmid:h,ymid:w,length:W};return new g(Z)}NE(){const h=this.xmid+this.length/4,w=this.ymid+this.length/4,W=this.length/2,Z={xmid:h,ymid:w,length:W};return new g(Z)}SW(){const h=this.xmid-this.length/4,w=this.ymid-this.length/4,W=this.length/2,Z={xmid:h,ymid:w,length:W};return new g(Z)}SE(){const h=this.xmid+this.length/4,w=this.ymid-this.length/4,W=this.length/2,Z={xmid:h,ymid:w,length:W};return new g(Z)}}class r{constructor(h){this.body=null,this.quad=null,this.NW=null,this.NE=null,this.SW=null,this.SE=null,this.theta=.5,h!=null&&(this.quad=h)}insert(h){if(this.body==null){this.body=h;return}this._isExternal()?(this.quad&&(this.NW=new r(this.quad.NW()),this.NE=new r(this.quad.NE()),this.SW=new r(this.quad.SW()),this.SE=new r(this.quad.SE())),this._putBody(this.body),this._putBody(h),this.body=this.body.add(h)):(this.body=this.body.add(h),this._putBody(h))}_putBody(h){this.quad&&(h.in(this.quad.NW())&&this.NW?this.NW.insert(h):h.in(this.quad.NE())&&this.NE?this.NE.insert(h):h.in(this.quad.SW())&&this.SW?this.SW.insert(h):h.in(this.quad.SE())&&this.SE&&this.SE.insert(h))}_isExternal(){return this.NW==null&&this.NE==null&&this.SW==null&&this.SE==null}updateForce(h){if(!(this.body==null||h===this.body))if(this._isExternal())h.addForce(this.body);else{const w=this.quad?this.quad.getLength():0,W=this.body.distanceTo(h);w/W<this.theta?h.addForce(this.body):(this.NW&&this.NW.updateForce(h),this.NE&&this.NE.updateForce(h),this.SW&&this.SW.updateForce(h),this.SE&&this.SE.updateForce(h))}}}const o={center:[0,0],width:300,height:300,kr:5,kg:1,mode:"normal",preventOverlap:!1,dissuadeHubs:!1,maxIteration:0,ks:.1,ksmax:10,tao:.1};class d{constructor(h={}){this.options=h,this.id="forceAtlas2",this.options=Object.assign(Object.assign({},o),h)}execute(h,w){return(0,s.mG)(this,void 0,void 0,function*(){return this.genericForceAtlas2Layout(!1,h,w)})}assign(h,w){return(0,s.mG)(this,void 0,void 0,function*(){yield this.genericForceAtlas2Layout(!0,h,w)})}genericForceAtlas2Layout(h,w,W){return(0,s.mG)(this,void 0,void 0,function*(){const Z=w.getAllEdges(),L=w.getAllNodes(),G=this.formatOptions(W,L.length),{width:K,height:F,prune:N,maxIteration:I,nodeSize:z,center:J}=G;if(!(L!=null&&L.length)||L.length===1)return(0,D.P)(w,h,J);const X=L.map(Y=>(0,T.u)(Y,[K,F])),U=Z.filter(Y=>{const{source:C,target:$}=Y;return C!==$}),P=new k.k({nodes:X,edges:U}),S=this.getSizes(P,z);if(this.run(P,w,I,S,h,G),N){for(let C=0;C<U.length;C+=1){const{source:$,target:j}=U[C],ot=P.getDegree($),st=P.getDegree($);if(ot<=1){const it=P.getNode(j);P.mergeNodeData($,{x:it.data.x,y:it.data.y})}else if(st<=1){const it=P.getNode($);P.mergeNodeData(j,{x:it.data.x,y:it.data.y})}}const Y=Object.assign(Object.assign({},G),{prune:!1,barnesHut:!1});this.run(P,w,100,S,h,Y)}return{nodes:X,edges:Z}})}getSizes(h,w){const W=h.getAllNodes(),Z={};for(let L=0;L<W.length;L+=1){const G=W[L];Z[G.id]=(0,m.uE)(w,void 0)(G)}return Z}formatOptions(h={},w){const W=Object.assign(Object.assign({},this.options),h),{center:Z,width:L,height:G,barnesHut:K,prune:F,maxIteration:N,kr:I,kg:z}=W;return W.width=!L&&typeof window!="undefined"?window.innerWidth:L,W.height=!G&&typeof window!="undefined"?window.innerHeight:G,W.center=Z||[W.width/2,W.height/2],K===void 0&&w>250&&(W.barnesHut=!0),F===void 0&&w>100&&(W.prune=!0),N===0&&!F?(W.maxIteration=250,w<=200&&w>100?W.maxIteration=1e3:w>200&&(W.maxIteration=1200)):N===0&&F&&(W.maxIteration=100,w<=200&&w>100?W.maxIteration=500:w>200&&(W.maxIteration=950)),I||(W.kr=50,w>100&&w<=500?W.kr=20:w>500&&(W.kr=1)),z||(W.kg=20,w>100&&w<=500?W.kg=10:w>500&&(W.kg=1)),W}run(h,w,W,Z,L,G){const{kr:K,barnesHut:F,onTick:N}=G,I=h.getAllNodes();let z=0,J=W;const X={},U={},P={};for(let S=0;S<I.length;S+=1){const{data:Y,id:C}=I[S];if(X[C]=[0,0],F){const $={id:S,rx:Y.x,ry:Y.y,mass:1,g:K,degree:h.getDegree(C)};P[C]=new M($)}}for(;J>0;)z=this.oneStep(h,{iter:J,preventOverlapIters:50,krPrime:100,sg:z,forces:X,preForces:U,bodies:P,sizes:Z},G),J--,N==null||N({nodes:I,edges:w.getAllEdges()});return h}oneStep(h,w,W){const{iter:Z,preventOverlapIters:L,krPrime:G,sg:K,preForces:F,bodies:N,sizes:I}=w;let{forces:z}=w;const{preventOverlap:J,barnesHut:X}=W,U=h.getAllNodes();for(let P=0;P<U.length;P+=1){const{id:S}=U[P];F[S]=[...z[S]],z[S]=[0,0]}return z=this.getAttrForces(h,Z,L,I,z,W),X&&(J&&Z>L||!J)?z=this.getOptRepGraForces(h,z,N,W):z=this.getRepGraForces(h,Z,L,z,G,I,W),this.updatePos(h,z,F,K,W)}getAttrForces(h,w,W,Z,L,G){const{preventOverlap:K,dissuadeHubs:F,mode:N,prune:I}=G,z=h.getAllEdges();for(let J=0;J<z.length;J+=1){const{source:X,target:U}=z[J],P=h.getNode(X),S=h.getNode(U),Y=h.getDegree(X),C=h.getDegree(U);if(I&&(Y<=1||C<=1))continue;const $=[S.data.x-P.data.x,S.data.y-P.data.y];let j=Math.hypot($[0],$[1]);j=j<1e-4?1e-4:j,$[0]=$[0]/j,$[1]=$[1]/j,K&&w<W&&(j=j-Z[X]-Z[U]);let ot=j,st=ot;N==="linlog"&&(ot=Math.log(1+j),st=ot),F&&(ot=j/Y,st=j/C),K&&w<W&&j<=0?(ot=0,st=0):K&&w<W&&j>0&&(ot=j,st=j),L[X][0]+=ot*$[0],L[U][0]-=st*$[0],L[X][1]+=ot*$[1],L[U][1]-=st*$[1]}return L}getOptRepGraForces(h,w,W,Z){const{kg:L,center:G,prune:K}=Z,F=h.getAllNodes(),N=F.length;let I=9e10,z=-9e10,J=9e10,X=-9e10;for(let C=0;C<N;C+=1){const{id:$,data:j}=F[C];K&&h.getDegree($)<=1||(W[$].setPos(j.x,j.y),j.x>=z&&(z=j.x),j.x<=I&&(I=j.x),j.y>=X&&(X=j.y),j.y<=J&&(J=j.y))}const U=Math.max(z-I,X-J),P={xmid:(z+I)/2,ymid:(X+J)/2,length:U,massCenter:G,mass:N},S=new g(P),Y=new r(S);for(let C=0;C<N;C+=1){const{id:$}=F[C];K&&h.getDegree($)<=1||W[$].in(S)&&Y.insert(W[$])}for(let C=0;C<N;C+=1){const{id:$,data:j}=F[C],ot=h.getDegree($);if(K&&ot<=1)continue;W[$].resetForce(),Y.updateForce(W[$]),w[$][0]-=W[$].fx,w[$][1]-=W[$].fy;const st=[j.x-G[0],j.y-G[1]];let it=Math.hypot(st[0],st[1]);it=it<1e-4?1e-4:it,st[0]=st[0]/it,st[1]=st[1]/it;const gt=L*(ot+1);w[$][0]-=gt*st[0],w[$][1]-=gt*st[1]}return w}getRepGraForces(h,w,W,Z,L,G,K){const{preventOverlap:F,kr:N,kg:I,center:z,prune:J}=K,X=h.getAllNodes(),U=X.length;for(let P=0;P<U;P+=1){const S=X[P],Y=h.getDegree(S.id);for(let ot=P+1;ot<U;ot+=1){const st=X[ot],it=h.getDegree(st.id);if(J&&(Y<=1||it<=1))continue;const gt=[st.data.x-S.data.x,st.data.y-S.data.y];let yt=Math.hypot(gt[0],gt[1]);yt=yt<1e-4?1e-4:yt,gt[0]=gt[0]/yt,gt[1]=gt[1]/yt,F&&w<W&&(yt=yt-G[S.id]-G[st.id]);let pt=N*(Y+1)*(it+1)/yt;F&&w<W&&yt<0?pt=L*(Y+1)*(it+1):F&&w<W&&yt===0?pt=0:F&&w<W&&yt>0&&(pt=N*(Y+1)*(it+1)/yt),Z[S.id][0]-=pt*gt[0],Z[st.id][0]+=pt*gt[0],Z[S.id][1]-=pt*gt[1],Z[st.id][1]+=pt*gt[1]}const C=[S.data.x-z[0],S.data.y-z[1]],$=Math.hypot(C[0],C[1]);C[0]=C[0]/$,C[1]=C[1]/$;const j=I*(Y+1);Z[S.id][0]-=j*C[0],Z[S.id][1]-=j*C[1]}return Z}updatePos(h,w,W,Z,L){const{ks:G,tao:K,prune:F,ksmax:N}=L,I=h.getAllNodes(),z=I.length,J=[],X=[];let U=0,P=0,S=Z;for(let C=0;C<z;C+=1){const{id:$}=I[C],j=h.getDegree($);if(F&&j<=1)continue;const ot=[w[$][0]-W[$][0],w[$][1]-W[$][1]],st=Math.hypot(ot[0],ot[1]),it=[w[$][0]+W[$][0],w[$][1]+W[$][1]],gt=Math.hypot(it[0],it[1]);J[C]=st,X[C]=gt/2,U+=(j+1)*J[C],P+=(j+1)*X[C]}const Y=S;S=K*P/U,Y!==0&&(S=S>1.5*Y?1.5*Y:S);for(let C=0;C<z;C+=1){const{id:$,data:j}=I[C],ot=h.getDegree($);if(F&&ot<=1||(0,O.Z)(j.fx)&&(0,O.Z)(j.fy))continue;let st=G*S/(1+S*Math.sqrt(J[C])),it=Math.hypot(w[$][0],w[$][1]);it=it<1e-4?1e-4:it;const gt=N/it;st=st>gt?gt:st;const yt=st*w[$][0],pt=st*w[$][1];h.mergeNodeData($,{x:j.x+yt,y:j.y+pt})}return S}}},32352:function(V,_,a){"use strict";a.d(_,{y:function(){return w}});var s=a(15767),k=a(16754),O=a(22355),T=a(94504),m=a(76265),D=a(66745);const M=.81,g=.1;function r(F,N,I,z,J=2){const X=N/I,U=F.getAllNodes(),P=U.map((C,$)=>{const{nodeStrength:j,x:ot,y:st,z:it,size:gt}=C.data;return{x:ot,y:st,z:it,size:gt,index:$,id:C.id,vx:0,vy:0,vz:0,weight:X*j}}),S=(J===2?(0,m.Z)(P,C=>C.x,C=>C.y):(0,D.Z)(P,C=>C.x,C=>C.y,C=>C.z)).visitAfter(o),Y=new Map;return P.forEach(C=>{Y.set(C.id,C),f(C,S,J)}),P.map((C,$)=>{const{id:j,data:ot}=U[$],{mass:st=1}=ot;z[j]={x:C.vx/st,y:C.vy/st,z:C.vz/st}}),z}function o(F){let N=0,I=0,z=0,J=0,X=0;const U=F.length;if(U){for(let P=0;P<U;P++){const S=F[P];S&&S.weight&&(N+=S.weight,I+=S.x*S.weight,z+=S.y*S.weight,J+=S.z*S.weight,X+=S.size*S.weight)}F.x=I/N,F.y=z/N,F.z=J/N,F.size=X/N,F.weight=N}else{const P=F;F.x=P.data.x,F.y=P.data.y,F.z=P.data.z,F.size=P.data.size,F.weight=P.data.weight}}const d=(F,N,I,z,J,X,U)=>{var P;if(((P=F.data)===null||P===void 0?void 0:P.id)===X.id)return;const S=[I,z,J][U-1],Y=X.x-F.x||g,C=X.y-F.y||g,$=X.z-F.z||g,j=[Y,C,$],ot=S-N;let st=0;for(let yt=0;yt<U;yt++)st+=j[yt]*j[yt];const gt=Math.sqrt(st)*st;if(ot*ot*M<st){const yt=F.weight/gt;return X.vx+=Y*yt,X.vy+=C*yt,X.vz+=$*yt,!0}if(F.length)return!1;if(F.data!==X){const yt=F.data.weight/gt;X.vx+=Y*yt,X.vy+=C*yt,X.vz+=$*yt}};function f(F,N,I){N.visit((z,J,X,U,P)=>d(z,J,X,U,P,F,I))}const h={dimensions:2,maxIteration:500,gravity:10,factor:1,edgeStrength:50,nodeStrength:1e3,coulombDisScale:.005,damping:.9,maxSpeed:200,minMovement:.4,interval:.02,linkDistance:200,clusterNodeStrength:20,preventOverlap:!0,distanceThresholdMode:"mean"};class w{constructor(N={}){this.options=N,this.id="force",this.timeInterval=0,this.judgingDistance=0,this.running=!1,this.options=Object.assign(Object.assign({},h),N)}execute(N,I){return(0,s.mG)(this,void 0,void 0,function*(){return this.genericForceLayout(!1,N,I)})}assign(N,I){return(0,s.mG)(this,void 0,void 0,function*(){yield this.genericForceLayout(!0,N,I)})}stop(){this.timeInterval&&typeof window!="undefined"&&window.clearInterval(this.timeInterval),this.running=!1}tick(N=this.options.maxIteration||1){if(this.lastResult)return this.lastResult;for(let z=0;(this.judgingDistance>this.lastOptions.minMovement||z<1)&&z<N;z++)this.runOneStep(this.lastCalcGraph,this.lastGraph,z,this.lastVelMap,this.lastOptions),this.updatePosition(this.lastGraph,this.lastCalcGraph,this.lastVelMap,this.lastOptions);const I={nodes:this.lastLayoutNodes,edges:this.lastLayoutEdges};return this.lastAssign&&I.nodes.forEach(z=>this.lastGraph.mergeNodeData(z.id,{x:z.data.x,y:z.data.y,z:this.options.dimensions===3?z.data.z:void 0})),I}genericForceLayout(N,I,z){return(0,s.mG)(this,void 0,void 0,function*(){const J=Object.assign(Object.assign({},this.options),z),X=I.getAllNodes(),U=I.getAllEdges(),P=this.formatOptions(J,I),{dimensions:S,width:Y,height:C,nodeSize:$,getMass:j,nodeStrength:ot,edgeStrength:st,linkDistance:it}=P,gt=X.map((ct,xt)=>Object.assign(Object.assign({},ct),{data:Object.assign(Object.assign({},ct.data),{x:(0,O.Z)(ct.data.x)?ct.data.x:Math.random()*Y,y:(0,O.Z)(ct.data.y)?ct.data.y:Math.random()*C,z:(0,O.Z)(ct.data.z)?ct.data.z:Math.random()*Math.sqrt(Y*C),size:$(ct)||30,mass:j(ct),nodeStrength:ot(ct)})})),yt=U.map(ct=>Object.assign(Object.assign({},ct),{data:Object.assign(Object.assign({},ct.data),{edgeStrength:st(ct),linkDistance:it(ct,I.getNode(ct.source),I.getNode(ct.target))})}));if(!(X!=null&&X.length))return this.lastResult={nodes:[],edges:U},{nodes:[],edges:U};const pt={};X.forEach((ct,xt)=>{pt[ct.id]={x:0,y:0,z:0}});const bt=new k.k({nodes:gt,edges:yt});this.formatCentripetal(P,bt);const{maxIteration:wt,minMovement:tt,onTick:at}=P;if(this.lastLayoutNodes=gt,this.lastLayoutEdges=yt,this.lastAssign=N,this.lastGraph=I,this.lastCalcGraph=bt,this.lastOptions=P,this.lastVelMap=pt,typeof window=="undefined")return;let lt=0;return new Promise(ct=>{this.timeInterval=window.setInterval(()=>{(!X||!this.running)&&ct({nodes:K(I,gt),edges:U}),this.runOneStep(bt,I,lt,pt,P),this.updatePosition(I,bt,pt,P),N&&gt.forEach(xt=>I.mergeNodeData(xt.id,{x:xt.data.x,y:xt.data.y,z:S===3?xt.data.z:void 0})),at==null||at({nodes:K(I,gt),edges:U}),lt++,(lt>=wt||this.judgingDistance<tt)&&(window.clearInterval(this.timeInterval),ct({nodes:K(I,gt),edges:U}))},0),this.running=!0})})}formatOptions(N,I){const z=Object.assign({},N),{width:J,height:X,getMass:U}=N;z.width=!J&&typeof window!="undefined"?window.innerWidth:J,z.height=!X&&typeof window!="undefined"?window.innerHeight:X,N.center||(z.center=[z.width/2,z.height/2]),U||(z.getMass=S=>{let Y=1;(0,O.Z)(S==null?void 0:S.data.mass)&&(Y=S==null?void 0:S.data.mass);const C=I.getDegree(S.id,"both");return!C||C<5?Y:C*5*Y}),z.nodeSize=(0,T.uE)(N.nodeSize,N.nodeSpacing);const P=N.linkDistance?(0,T.jE)(1,N.linkDistance):S=>1+z.nodeSize(I.getNode(S.source))+z.nodeSize(I.getNode(S.target));return z.linkDistance=P,z.nodeStrength=(0,T.jE)(1,N.nodeStrength),z.edgeStrength=(0,T.jE)(1,N.edgeStrength),z}formatCentripetal(N,I){const{dimensions:z,centripetalOptions:J,center:X,clusterNodeStrength:U,leafCluster:P,clustering:S,nodeClusterBy:Y}=N,C=I.getAllNodes(),$=J||{leaf:2,single:2,others:1,center:yt=>({x:X[0],y:X[1],z:z===3?X[2]:void 0})};typeof U!="function"&&(N.clusterNodeStrength=yt=>U);let j,ot;if(P&&Y&&(j=W(I,Y),ot=Array.from(new Set(C==null?void 0:C.map(yt=>yt.data[Y])))||[],N.centripetalOptions=Object.assign($,{single:100,leaf:yt=>{const{siblingLeaves:pt,sameTypeLeaves:bt}=j[yt.id]||{};return(bt==null?void 0:bt.length)===(pt==null?void 0:pt.length)||(ot==null?void 0:ot.length)===1?1:N.clusterNodeStrength(yt)},others:1,center:yt=>{const pt=I.getDegree(yt.id,"both");if(!pt)return{x:100,y:100,z:0};let bt;if(pt===1){const{sameTypeLeaves:wt=[]}=j[yt.id]||{};wt.length===1?bt=void 0:wt.length>1&&(bt=G(wt))}else bt=void 0;return{x:bt==null?void 0:bt.x,y:bt==null?void 0:bt.y,z:bt==null?void 0:bt.z}}})),S&&Y){j||(j=W(I,Y)),ot||(ot=Array.from(new Set(C.map(pt=>pt.data[Y])))),ot=ot.filter(pt=>pt!==void 0);const yt={};ot.forEach(pt=>{const bt=C.filter(wt=>wt.data[Y]===pt).map(wt=>I.getNode(wt.id));yt[pt]=G(bt)}),N.centripetalOptions=Object.assign($,{single:pt=>N.clusterNodeStrength(pt),leaf:pt=>N.clusterNodeStrength(pt),others:pt=>N.clusterNodeStrength(pt),center:pt=>{const bt=yt[pt.data[Y]];return{x:bt==null?void 0:bt.x,y:bt==null?void 0:bt.y,z:bt==null?void 0:bt.z}}})}const{leaf:st,single:it,others:gt}=N.centripetalOptions||{};st&&typeof st!="function"&&(N.centripetalOptions.leaf=()=>st),it&&typeof it!="function"&&(N.centripetalOptions.single=()=>it),gt&&typeof gt!="function"&&(N.centripetalOptions.others=()=>gt)}runOneStep(N,I,z,J,X){const U={},P=N.getAllNodes(),S=N.getAllEdges();if(!(P!=null&&P.length))return;const{monitor:Y}=X;if(this.calRepulsive(N,U,X),S&&this.calAttractive(N,U,X),this.calGravity(N,I,U,X),this.updateVelocity(N,U,J,X),Y){const C=this.calTotalEnergy(U,P);Y({energy:C,nodes:I.getAllNodes(),edges:I.getAllEdges(),iterations:z})}}calTotalEnergy(N,I){if(!(I!=null&&I.length))return 0;let z=0;return I.forEach((J,X)=>{const U=N[J.id].x,P=N[J.id].y,S=this.options.dimensions===3?N[J.id].z:0,Y=U*U+P*P+S*S,{mass:C=1}=J.data;z+=C*Y*.5}),z}calRepulsive(N,I,z){const{dimensions:J,factor:X,coulombDisScale:U}=z;r(N,X,U*U,I,J)}calAttractive(N,I,z){const{dimensions:J,nodeSize:X}=z;N.getAllEdges().forEach((U,P)=>{const{source:S,target:Y}=U,C=N.getNode(S),$=N.getNode(Y);if(!C||!$)return;let j=$.data.x-C.data.x,ot=$.data.y-C.data.y,st=J===3?$.data.z-C.data.z:0;!j&&!ot&&(j=Math.random()*.01,ot=Math.random()*.01,J===3&&!st&&(st=Math.random()*.01));const it=Math.sqrt(j*j+ot*ot+st*st);if(it<X(C)+X($))return;const gt=j/it,yt=ot/it,pt=st/it,{linkDistance:bt=200,edgeStrength:wt=200}=U.data||{},at=(bt-it)*wt,lt=C.data.mass||1,ct=$.data.mass||1,xt=1/lt,Et=1/ct,Nt=gt*at,St=yt*at,Tt=pt*at;I[S].x-=Nt*xt,I[S].y-=St*xt,I[S].z-=Tt*xt,I[Y].x+=Nt*Et,I[Y].y+=St*Et,I[Y].z+=Tt*Et})}calGravity(N,I,z,J){const{getCenter:X}=J,U=N.getAllNodes(),P=I.getAllNodes(),S=I.getAllEdges(),{width:Y,height:C,center:$,gravity:j,centripetalOptions:ot}=J;U&&U.forEach(st=>{const{id:it,data:gt}=st,{mass:yt,x:pt,y:bt,z:wt}=gt,tt=I.getNode(it);let at=0,lt=0,ct=0,xt=j;const Et=N.getDegree(it,"in"),Nt=N.getDegree(it,"out"),St=N.getDegree(it,"both"),Tt=X==null?void 0:X(tt,St);if(Tt){const[zt,Zt,oe]=Tt;at=pt-zt,lt=bt-Zt,xt=oe}else at=pt-$[0],lt=bt-$[1],ct=wt-$[2];if(xt&&(z[it].x-=xt*at/yt,z[it].y-=xt*lt/yt,z[it].z-=xt*ct/yt),ot){const{leaf:zt,single:Zt,others:oe,center:he}=ot,{x:ye,y:ie,z:He,centerStrength:Jt}=(he==null?void 0:he(tt,P,S,Y,C))||{x:0,y:0,z:0,centerStrength:0};if(!(0,O.Z)(ye)||!(0,O.Z)(ie))return;const Ae=(pt-ye)/yt,Pe=(bt-ie)/yt,pe=(wt-He)/yt;if(Jt&&(z[it].x-=Jt*Ae,z[it].y-=Jt*Pe,z[it].z-=Jt*pe),St===0){const fe=Zt(tt);if(!fe)return;z[it].x-=fe*Ae,z[it].y-=fe*Pe,z[it].z-=fe*pe;return}if(Et===0||Nt===0){const fe=zt(tt,P,S);if(!fe)return;z[it].x-=fe*Ae,z[it].y-=fe*Pe,z[it].z-=fe*pe;return}const Pt=oe(tt);if(!Pt)return;z[it].x-=Pt*Ae,z[it].y-=Pt*Pe,z[it].z-=Pt*pe}})}updateVelocity(N,I,z,J){const{damping:X,maxSpeed:U,interval:P,dimensions:S}=J,Y=N.getAllNodes();Y!=null&&Y.length&&Y.forEach(C=>{const{id:$}=C;let j=(z[$].x+I[$].x*P)*X||.01,ot=(z[$].y+I[$].y*P)*X||.01,st=S===3?(z[$].z+I[$].z*P)*X||.01:0;const it=Math.sqrt(j*j+ot*ot+st*st);if(it>U){const gt=U/it;j=gt*j,ot=gt*ot,st=gt*st}z[$]={x:j,y:ot,z:st}})}updatePosition(N,I,z,J){const{distanceThresholdMode:X,interval:U,dimensions:P}=J,S=I.getAllNodes();if(!(S!=null&&S.length)){this.judgingDistance=0;return}let Y=0;X==="max"?this.judgingDistance=-1/0:X==="min"&&(this.judgingDistance=1/0),S.forEach(C=>{const{id:$}=C,j=N.getNode($);if((0,O.Z)(j.data.fx)&&(0,O.Z)(j.data.fy)){I.mergeNodeData($,{x:j.data.fx,y:j.data.fy,z:P===3?j.data.fz:void 0});return}const ot=z[$].x*U,st=z[$].y*U,it=P===3?z[$].z*U:0;I.mergeNodeData($,{x:C.data.x+ot,y:C.data.y+st,z:C.data.z+it});const gt=Math.sqrt(ot*ot+st*st+it*it);switch(X){case"max":this.judgingDistance<gt&&(this.judgingDistance=gt);break;case"min":this.judgingDistance>gt&&(this.judgingDistance=gt);break;default:Y=Y+gt;break}}),(!X||X==="mean")&&(this.judgingDistance=Y/S.length)}}const W=(F,N)=>{const I=F.getAllNodes();if(!(I!=null&&I.length))return{};const z={};return I.forEach((J,X)=>{F.getDegree(J.id,"both")===1&&(z[J.id]=Z(F,"leaf",J,N))}),z},Z=(F,N,I,z)=>{const J=F.getDegree(I.id,"in"),X=F.getDegree(I.id,"out");let U=I,P=[];J===0?(U=F.getSuccessors(I.id)[0],P=F.getNeighbors(U.id)):X===0&&(U=F.getPredecessors(I.id)[0],P=F.getNeighbors(U.id)),P=P.filter(Y=>F.getDegree(Y.id,"in")===0||F.getDegree(Y.id,"out")===0);const S=L(F,N,z,I,P);return{coreNode:U,siblingLeaves:P,sameTypeLeaves:S}},L=(F,N,I,z,J)=>{const X=z.data[I]||"";let U=(J==null?void 0:J.filter(P=>P.data[I]===X))||[];return N==="leaf"&&(U=U.filter(P=>F.getDegree(P.id,"in")===0||F.getDegree(P.id,"out")===0)),U},G=F=>{const N={x:0,y:0};F.forEach(z=>{const{x:J,y:X}=z.data;N.x+=J||0,N.y+=X||0});const I=F.length||1;return{x:N.x/I,y:N.y/I}},K=(F,N)=>N.map(I=>{const{id:z,data:J}=I,X=F.getNode(z);return Object.assign(Object.assign({},X),{data:Object.assign(Object.assign({},X.data),{x:J.x,y:J.y,z:J.z})})})},58278:function(V,_,a){"use strict";a.d(_,{O:function(){return M}});var s=a(15767),k=a(16754),O=a(22355),T=a(93721);const m={maxIteration:1e3,gravity:10,speed:5,clustering:!1,clusterGravity:10,width:300,height:300,nodeClusterBy:"cluster"},D=800;class M{constructor(r={}){this.options=r,this.id="fruchterman",this.timeInterval=0,this.running=!1,this.options=Object.assign(Object.assign({},m),r)}execute(r,o){return(0,s.mG)(this,void 0,void 0,function*(){return this.genericFruchtermanLayout(!1,r,o)})}assign(r,o){return(0,s.mG)(this,void 0,void 0,function*(){yield this.genericFruchtermanLayout(!0,r,o)})}stop(){this.timeInterval&&typeof window!="undefined"&&window.clearInterval(this.timeInterval),this.running=!1}tick(r=this.options.maxIteration||1){if(this.lastResult)return this.lastResult;for(let d=0;d<r;d++)this.runOneStep(this.lastGraph,this.lastClusterMap,this.lastOptions);const o={nodes:this.lastLayoutNodes,edges:this.lastLayoutEdges};return this.lastAssign&&o.nodes.forEach(d=>this.lastGraph.mergeNodeData(d.id,{x:d.data.x,y:d.data.y,z:this.options.dimensions===3?d.data.z:void 0})),o}genericFruchtermanLayout(r,o,d){return(0,s.mG)(this,void 0,void 0,function*(){if(this.running)return;const f=this.formatOptions(d),{dimensions:h,width:w,height:W,center:Z,clustering:L,nodeClusterBy:G,maxIteration:K,onTick:F}=f,N=o.getAllNodes(),I=o.getAllEdges();if(!(N!=null&&N.length)){const P={nodes:[],edges:I};return this.lastResult=P,P}if(N.length===1){r&&o.mergeNodeData(N[0].id,{x:Z[0],y:Z[1],z:h===3?Z[2]:void 0});const P={nodes:[Object.assign(Object.assign({},N[0]),{data:Object.assign(Object.assign({},N[0].data),{x:Z[0],y:Z[1],z:h===3?Z[2]:void 0})})],edges:I};return this.lastResult=P,P}const z=N.map(P=>(0,T.u)(P,[w,W])),J=new k.k({nodes:z,edges:I}),X={};if(L&&z.forEach(P=>{const S=P.data[G];X[S]||(X[S]={name:S,cx:0,cy:0,count:0})}),this.lastLayoutNodes=z,this.lastLayoutEdges=I,this.lastAssign=r,this.lastGraph=J,this.lastOptions=f,this.lastClusterMap=X,typeof window=="undefined")return;let U=0;return new Promise(P=>{this.timeInterval=window.setInterval(()=>{if(!this.running){P({nodes:z,edges:I});return}this.runOneStep(J,X,f),r&&z.forEach(({id:S,data:Y})=>o.mergeNodeData(S,{x:Y.x,y:Y.y,z:h===3?Y.z:void 0})),F==null||F({nodes:z,edges:I}),U++,U>=K&&(window.clearInterval(this.timeInterval),P({nodes:z,edges:I}))},0),this.running=!0})})}formatOptions(r={}){const o=Object.assign(Object.assign({},this.options),r),{clustering:d,nodeClusterBy:f}=o,{center:h,width:w,height:W}=o;return o.width=!w&&typeof window!="undefined"?window.innerWidth:w,o.height=!W&&typeof window!="undefined"?window.innerHeight:W,o.center=h||[o.width/2,o.height/2],o.clustering=d&&!!f,o}runOneStep(r,o,d){const{dimensions:f,height:h,width:w,gravity:W,center:Z,speed:L,clustering:G,nodeClusterBy:K,clusterGravity:F}=d,N=h*w,I=Math.sqrt(N)/10,z=r.getAllNodes(),J=N/(z.length+1),X=Math.sqrt(J),U={};if(this.applyCalculate(r,U,X,J),G){for(const S in o)o[S].cx=0,o[S].cy=0,o[S].count=0;z.forEach(S=>{const{data:Y}=S,C=o[Y[K]];(0,O.Z)(Y.x)&&(C.cx+=Y.x),(0,O.Z)(Y.y)&&(C.cy+=Y.y),C.count++});for(const S in o)o[S].cx/=o[S].count,o[S].cy/=o[S].count;const P=F||W;z.forEach((S,Y)=>{const{id:C,data:$}=S;if(!(0,O.Z)($.x)||!(0,O.Z)($.y))return;const j=o[$[K]],ot=Math.sqrt(($.x-j.cx)*($.x-j.cx)+($.y-j.cy)*($.y-j.cy)),st=X*P;U[C].x-=st*($.x-j.cx)/ot,U[C].y-=st*($.y-j.cy)/ot})}z.forEach((P,S)=>{const{id:Y,data:C}=P;if(!(0,O.Z)(C.x)||!(0,O.Z)(C.y))return;const $=.01*X*W;U[Y].x-=$*(C.x-Z[0]),U[Y].y-=$*(C.y-Z[1]),f===3&&(U[Y].z-=$*(C.z-Z[2]))}),z.forEach((P,S)=>{const{id:Y,data:C}=P;if((0,O.Z)(C.fx)&&(0,O.Z)(C.fy)){C.x=C.fx,C.y=C.fy,f===3&&(C.z=C.fz);return}if(!(0,O.Z)(C.x)||!(0,O.Z)(C.y))return;const $=Math.sqrt(U[Y].x*U[Y].x+U[Y].y*U[Y].y+(f===3?U[Y].z*U[Y].z:0));if($>0){const j=Math.min(I*(L/D),$);r.mergeNodeData(Y,{x:C.x+U[Y].x/$*j,y:C.y+U[Y].y/$*j,z:f===3?C.z+U[Y].z/$*j:void 0})}})}applyCalculate(r,o,d,f){this.calRepulsive(r,o,f),this.calAttractive(r,o,d)}calRepulsive(r,o,d){const f=r.getAllNodes();f.forEach(({data:h,id:w},W)=>{o[w]={x:0,y:0,z:0},f.forEach(({data:Z,id:L},G)=>{if(W<=G||!(0,O.Z)(h.x)||!(0,O.Z)(Z.x)||!(0,O.Z)(h.y)||!(0,O.Z)(Z.y))return;let K=h.x-Z.x,F=h.y-Z.y,N=this.options.dimensions===3?h.z-Z.z:0,I=K*K+F*F+N*N;I===0&&(I=1,K=.01,F=.01,N=.01);const z=d/I,J=K*z,X=F*z,U=N*z;o[w].x+=J,o[w].y+=X,o[L].x-=J,o[L].y-=X,this.options.dimensions===3&&(o[w].z+=U,o[L].z-=U)})})}calAttractive(r,o,d){r.getAllEdges().forEach(h=>{const{source:w,target:W}=h;if(!w||!W||w===W)return;const{data:Z}=r.getNode(w),{data:L}=r.getNode(W);if(!(0,O.Z)(L.x)||!(0,O.Z)(Z.x)||!(0,O.Z)(L.y)||!(0,O.Z)(Z.y))return;const G=L.x-Z.x,K=L.y-Z.y,F=this.options.dimensions===3?L.z-Z.z:0,N=Math.sqrt(G*G+K*K+F*F)/d,I=G*N,z=K*N,J=F*N;o[w].x+=I,o[w].y+=z,o[W].x-=I,o[W].y-=z,this.options.dimensions===3&&(o[w].z+=J,o[W].z-=J)})}}},49559:function(V,_,a){"use strict";a.d(_,{M:function(){return r}});var s=a(15767),k=a(43706),O=a(22355),T=a(93721),m=a(94504),D=a(23644),M=a(64150);const g={begin:[0,0],preventOverlap:!0,preventOverlapPadding:10,condense:!1,rows:void 0,cols:void 0,position:void 0,sortBy:"degree",nodeSize:30,width:300,height:300};class r{constructor(L={}){this.options=L,this.id="grid",this.options=Object.assign(Object.assign({},g),L)}execute(L,G){return(0,s.mG)(this,void 0,void 0,function*(){return this.genericGridLayout(!1,L,G)})}assign(L,G){return(0,s.mG)(this,void 0,void 0,function*(){yield this.genericGridLayout(!0,L,G)})}genericGridLayout(L,G,K){return(0,s.mG)(this,void 0,void 0,function*(){const F=Object.assign(Object.assign({},this.options),K),{begin:N=[0,0],condense:I,preventOverlapPadding:z,preventOverlap:J,rows:X,cols:U,nodeSpacing:P,nodeSize:S,width:Y,height:C,position:$}=F;let{sortBy:j}=F;const ot=G.getAllNodes(),st=G.getAllEdges(),it=ot==null?void 0:ot.length;if(!it||it===1)return(0,D.P)(G,L,N);const gt=ot.map(Nt=>(0,T.u)(Nt));j!=="id"&&(!(0,k.Z)(j)||gt[0].data[j]===void 0)&&(j="degree"),j==="degree"?gt.sort((Nt,St)=>G.getDegree(St.id,"both")-G.getDegree(Nt.id,"both")):j==="id"?gt.sort((Nt,St)=>(0,O.Z)(St.id)&&(0,O.Z)(Nt.id)?St.id-Nt.id:`${Nt.id}`.localeCompare(`${St.id}`)):gt.sort((Nt,St)=>St.data[j]-Nt.data[j]);const yt=!Y&&typeof window!="undefined"?window.innerWidth:Y,pt=!C&&typeof window!="undefined"?window.innerHeight:C,bt=it,wt={rows:X,cols:U};if(X!=null&&U!=null)wt.rows=X,wt.cols=U;else if(X!=null&&U==null)wt.rows=X,wt.cols=Math.ceil(bt/wt.rows);else if(X==null&&U!=null)wt.cols=U,wt.rows=Math.ceil(bt/wt.cols);else{const Nt=Math.sqrt(bt*pt/yt);wt.rows=Math.round(Nt),wt.cols=Math.round(yt/pt*Nt)}if(wt.rows=Math.max(wt.rows,1),wt.cols=Math.max(wt.cols,1),wt.cols*wt.rows>bt){const Nt=o(wt),St=d(wt);(Nt-1)*St>=bt?o(wt,Nt-1):(St-1)*Nt>=bt&&d(wt,St-1)}else for(;wt.cols*wt.rows<bt;){const Nt=o(wt),St=d(wt);(St+1)*Nt>=bt?d(wt,St+1):o(wt,Nt+1)}let tt=I?0:yt/wt.cols,at=I?0:pt/wt.rows;if(J||P){const Nt=(0,m.jE)(10,P),St=(0,m.tO)(30,S,!1);gt.forEach(Tt=>{(!Tt.data.x||!Tt.data.y)&&(Tt.data.x=0,Tt.data.y=0);const zt=G.getNode(Tt.id),[Zt,oe]=(0,M._)(St(zt)||30),he=Nt!==void 0?Nt(Tt):z,ye=Zt+he,ie=oe+he;tt=Math.max(tt,ye),at=Math.max(at,ie)})}const lt={},ct={row:0,col:0},xt={};for(let Nt=0;Nt<gt.length;Nt++){const St=gt[Nt];let Tt;if($&&(Tt=$(G.getNode(St.id))),Tt&&(Tt.row!==void 0||Tt.col!==void 0)){const zt={row:Tt.row,col:Tt.col};if(zt.col===void 0)for(zt.col=0;f(lt,zt);)zt.col++;else if(zt.row===void 0)for(zt.row=0;f(lt,zt);)zt.row++;xt[St.id]=zt,h(lt,zt)}W(St,N,tt,at,xt,wt,ct,lt)}const Et={nodes:gt,edges:st};return L&&gt.forEach(Nt=>{G.mergeNodeData(Nt.id,{x:Nt.data.x,y:Nt.data.y})}),Et})}}const o=(Z,L)=>{let G;const K=Z.rows||5,F=Z.cols||5;return L==null?G=Math.min(K,F):Math.min(K,F)===Z.rows?Z.rows=L:Z.cols=L,G},d=(Z,L)=>{let G;const K=Z.rows||5,F=Z.cols||5;return L==null?G=Math.max(K,F):Math.max(K,F)===Z.rows?Z.rows=L:Z.cols=L,G},f=(Z,L)=>Z[`c-${L.row}-${L.col}`]||!1,h=(Z,L)=>Z[`c-${L.row}-${L.col}`]=!0,w=(Z,L)=>{const G=Z.cols||5;L.col++,L.col>=G&&(L.col=0,L.row++)},W=(Z,L,G,K,F,N,I,z)=>{let J,X;const U=F[Z.id];if(U)J=U.col*G+G/2+L[0],X=U.row*K+K/2+L[1];else{for(;f(z,I);)w(N,I);J=I.col*G+G/2+L[0],X=I.row*K+K/2+L[1],h(z,I),w(N,I)}Z.data.x=J,Z.data.y=X}},83221:function(V,_,a){"use strict";a.d(_,{A:function(){return M}});var s=a(15767),k=a(29639),O=a(74495),T=a(93721),m=a(23644);const D={center:[0,0],linkDistance:50};class M{constructor(d={}){this.options=d,this.id="mds",this.options=Object.assign(Object.assign({},D),d)}execute(d,f){return(0,s.mG)(this,void 0,void 0,function*(){return this.genericMDSLayout(!1,d,f)})}assign(d,f){return(0,s.mG)(this,void 0,void 0,function*(){yield this.genericMDSLayout(!0,d,f)})}genericMDSLayout(d,f,h){return(0,s.mG)(this,void 0,void 0,function*(){const w=Object.assign(Object.assign({},this.options),h),{center:W=[0,0],linkDistance:Z=50}=w,L=f.getAllNodes(),G=f.getAllEdges();if(!(L!=null&&L.length)||L.length===1)return(0,m.P)(f,d,W);const K=(0,O.zJ)({nodes:L,edges:G},!1),F=(0,O.qs)(K);g(F);const N=(0,O.nu)(F,Z),I=r(N),z=[];return I.forEach((X,U)=>{const P=(0,T.u)(L[U]);P.data.x=X[0]+W[0],P.data.y=X[1]+W[1],z.push(P)}),d&&z.forEach(X=>f.mergeNodeData(X.id,{x:X.data.x,y:X.data.y})),{nodes:z,edges:G}})}}const g=o=>{let d=-999999;o.forEach(f=>{f.forEach(h=>{h!==1/0&&d<h&&(d=h)})}),o.forEach((f,h)=>{f.forEach((w,W)=>{w===1/0&&(o[h][W]=d)})})},r=o=>{const f=k.y3.mul(k.y3.pow(o,2),-.5),h=f.mean("row"),w=f.mean("column"),W=f.mean();f.add(W).subRowVector(h).subColumnVector(w);const Z=new k.Sc(f),L=k.y3.sqrt(Z.diagonalMatrix).diagonal();return Z.leftSingularVectors.toJSON().map(G=>k.y3.mul([G],[L]).toJSON()[0].splice(0,2))}},42457:function(V,_,a){"use strict";a.d(_,{D:function(){return W}});var s=a(15767),k=a(43706),O=a(74495),T=a(94504),m=a(93721),D=a(23644),M=a(29639);const g=(N,I,z)=>{try{const J=M.y3.mul(M.y3.pow(I,2),-.5),X=J.mean("row"),U=J.mean("column"),P=J.mean();J.add(P).subRowVector(X).subColumnVector(U);const S=new M.Sc(J),Y=M.y3.sqrt(S.diagonalMatrix).diagonal();return S.leftSingularVectors.toJSON().map(C=>M.y3.mul([C],[Y]).toJSON()[0].splice(0,N))}catch(J){const X=[];for(let U=0;U<I.length;U++){const P=Math.random()*z,S=Math.random()*z;X.push([P,S])}return X}},r=800,o={iterations:10,height:10,width:10,speed:100,gravity:10,k:5},d=(N,I)=>{const z=Object.assign(Object.assign({},o),I),{positions:J,iterations:X,width:U,k:P,speed:S=100,strictRadial:Y,focusIdx:C,radii:$=[],nodeSizeFunc:j}=z,ot=N.getAllNodes(),st=[],it=U/10;for(let gt=0;gt<X;gt++)J.forEach((yt,pt)=>{st[pt]={x:0,y:0}}),f(ot,J,st,P,$,j),h(J,st,S,Y,C,it,U,$);return J},f=(N,I,z,J,X,U)=>{I.forEach((P,S)=>{z[S]={x:0,y:0},I.forEach((Y,C)=>{if(S===C||X[S]!==X[C])return;let $=P.x-Y.x,j=P.y-Y.y,ot=Math.sqrt($*$+j*j);if(ot===0){ot=1;const st=S>C?1:-1;$=.01*st,j=.01*st}if(ot<U(N[S])/2+U(N[C])/2){const st=J*J/ot;z[S].x+=$/ot*st,z[S].y+=j/ot*st}})})},h=(N,I,z,J,X,U,P,S)=>{const Y=U||P/10;return J&&I.forEach((C,$)=>{const j=N[$].x-N[X].x,ot=N[$].y-N[X].y,st=Math.sqrt(j*j+ot*ot);let it=ot/st,gt=-j/st;const yt=Math.sqrt(C.x*C.x+C.y*C.y);let pt=Math.acos((it*C.x+gt*C.y)/yt);pt>Math.PI/2&&(pt-=Math.PI/2,it*=-1,gt*=-1);const bt=Math.cos(pt)*yt;C.x=it*bt,C.y=gt*bt}),N.forEach((C,$)=>{if($===X)return;const j=Math.sqrt(I[$].x*I[$].x+I[$].y*I[$].y);if(j>0&&$!==X){const ot=Math.min(Y*(z/r),j);if(C.x+=I[$].x/j*ot,C.y+=I[$].y/j*ot,J){let st=C.x-N[X].x,it=C.y-N[X].y;const gt=Math.sqrt(st*st+it*it);st=st/gt*S[$],it=it/gt*S[$],C.x=N[X].x+st,C.y=N[X].y+it}}}),N},w={maxIteration:1e3,focusNode:null,unitRadius:null,linkDistance:50,preventOverlap:!1,strictRadial:!0,maxPreventOverlapIteration:200,sortStrength:10};class W{constructor(I={}){this.options=I,this.id="radial",this.options=Object.assign(Object.assign({},w),I)}execute(I,z){return(0,s.mG)(this,void 0,void 0,function*(){return this.genericRadialLayout(!1,I,z)})}assign(I,z){return(0,s.mG)(this,void 0,void 0,function*(){yield this.genericRadialLayout(!0,I,z)})}genericRadialLayout(I,z,J){return(0,s.mG)(this,void 0,void 0,function*(){const X=Object.assign(Object.assign({},this.options),J),{width:U,height:P,center:S,focusNode:Y,unitRadius:C,nodeSize:$,nodeSpacing:j,strictRadial:ot,preventOverlap:st,maxPreventOverlapIteration:it,sortBy:gt,linkDistance:yt=50,sortStrength:pt=10,maxIteration:bt=1e3}=X,wt=z.getAllNodes(),tt=z.getAllEdges(),at=!U&&typeof window!="undefined"?window.innerWidth:U,lt=!P&&typeof window!="undefined"?window.innerHeight:P,ct=S||[at/2,lt/2];if(!(wt!=null&&wt.length)||wt.length===1)return(0,D.P)(z,I,ct);let xt=wt[0];if((0,k.Z)(Y)){for(let _t=0;_t<wt.length;_t++)if(wt[_t].id===Y){xt=wt[_t];break}}else xt=Y||wt[0];const Et=G(wt,xt.id),Nt=(0,O.zJ)({nodes:wt,edges:tt},!1),St=(0,O.qs)(Nt),Tt=F(St,Et);K(St,Et,Tt+1);const zt=St[Et];let Zt=at-ct[0]>ct[0]?ct[0]:at-ct[0],oe=lt-ct[1]>ct[1]?ct[1]:lt-ct[1];Zt===0&&(Zt=at/2),oe===0&&(oe=lt/2);const he=Math.min(Zt,oe),ye=Math.max(...zt),ie=[],He=C||he/ye;zt.forEach((_t,ke)=>{ie[ke]=_t*He});const Jt=Z(wt,St,yt,ie,He,gt,pt),Ae=L(Jt),Pe=g(yt,Jt,yt);let pe=Pe.map(([_t,ke])=>({x:(isNaN(_t)?Math.random()*yt:_t)-Pe[Et][0],y:(isNaN(ke)?Math.random()*yt:ke)-Pe[Et][1]}));this.run(bt,pe,Ae,Jt,ie,Et);let Pt;if(st){Pt=(0,T.uE)($,j);const _t={nodes:wt,nodeSizeFunc:Pt,positions:pe,radii:ie,height:lt,width:at,strictRadial:!!ot,focusIdx:Et,iterations:it||200,k:pe.length/4.5};pe=d(z,_t)}const fe=[];return pe.forEach((_t,ke)=>{const be=(0,m.u)(wt[ke]);be.data.x=_t.x+ct[0],be.data.y=_t.y+ct[1],fe.push(be)}),I&&fe.forEach(_t=>z.mergeNodeData(_t.id,{x:_t.data.x,y:_t.data.y})),{nodes:fe,edges:tt}})}run(I,z,J,X,U,P){for(let S=0;S<=I;S++){const Y=S/I;this.oneIteration(Y,z,U,X,J,P)}}oneIteration(I,z,J,X,U,P){const S=1-I;z.forEach((Y,C)=>{const $=(0,O.$y)(Y,{x:0,y:0}),j=$===0?0:1/$;if(C===P)return;let ot=0,st=0,it=0;z.forEach((yt,pt)=>{if(C===pt)return;const bt=(0,O.$y)(Y,yt),wt=bt===0?0:1/bt,tt=X[pt][C];it+=U[C][pt],ot+=U[C][pt]*(yt.x+tt*(Y.x-yt.x)*wt),st+=U[C][pt]*(yt.y+tt*(Y.y-yt.y)*wt)});const gt=J[C]===0?0:1/J[C];it*=S,it+=I*gt*gt,ot*=S,ot+=I*gt*Y.x*j,Y.x=ot/it,st*=S,st+=I*gt*Y.y*j,Y.y=st/it})}}const Z=(N,I,z,J,X,U,P)=>{if(!N)return[];const S=[];if(I){const Y={};I.forEach((C,$)=>{const j=[];C.forEach((ot,st)=>{var it,gt;if($===st)j.push(0);else if(J[$]===J[st])if(U==="data")j.push(ot*(Math.abs($-st)*P)/(J[$]/X));else if(U){let yt,pt;if(Y[N[$].id])yt=Y[N[$].id];else{const bt=(U==="id"?N[$].id:(it=N[$].data)===null||it===void 0?void 0:it[U])||0;(0,k.Z)(bt)?yt=bt.charCodeAt(0):yt=bt,Y[N[$].id]=yt}if(Y[N[st].id])pt=Y[N[st].id];else{const bt=(U==="id"?N[st].id:(gt=N[st].data)===null||gt===void 0?void 0:gt[U])||0;(0,k.Z)(bt)?pt=bt.charCodeAt(0):pt=bt,Y[N[st].id]=pt}j.push(ot*(Math.abs(yt-pt)*P)/(J[$]/X))}else j.push(ot*z/(J[$]/X));else{const yt=(z+X)/2;j.push(ot*yt)}}),S.push(j)})}return S},L=N=>{const I=N.length,z=N[0].length,J=[];for(let X=0;X<I;X++){const U=[];for(let P=0;P<z;P++)N[X][P]!==0?U.push(1/(N[X][P]*N[X][P])):U.push(0);J.push(U)}return J},G=(N,I)=>{let z=-1;return N.forEach((J,X)=>{J.id===I&&(z=X)}),Math.max(z,0)},K=(N,I,z)=>{const J=N.length;for(let X=0;X<J;X++)if(N[I][X]===1/0){N[I][X]=z,N[X][I]=z;for(let U=0;U<J;U++)N[X][U]!==1/0&&N[I][U]===1/0&&(N[I][U]=z+N[X][U],N[U][I]=z+N[X][U])}for(let X=0;X<J;X++)if(X!==I){for(let U=0;U<J;U++)if(N[X][U]===1/0){let P=Math.abs(N[I][X]-N[I][U]);P=P===0?1:P,N[X][U]=P}}},F=(N,I)=>{let z=0;for(let J=0;J<N[I].length;J++)N[I][J]!==1/0&&(z=N[I][J]>z?N[I][J]:z);return z}},88083:function(V,_,a){"use strict";a.d(_,{_:function(){return O}});var s=a(15767);const k={center:[0,0],width:300,height:300};class O{constructor(m={}){this.options=m,this.id="random",this.options=Object.assign(Object.assign({},k),m)}execute(m,D){return(0,s.mG)(this,void 0,void 0,function*(){return this.genericRandomLayout(!1,m,D)})}assign(m,D){return(0,s.mG)(this,void 0,void 0,function*(){yield this.genericRandomLayout(!0,m,D)})}genericRandomLayout(m,D,M){return(0,s.mG)(this,void 0,void 0,function*(){const g=Object.assign(Object.assign({},this.options),M),{center:r,width:o,height:d}=g,f=D.getAllNodes(),h=.9,w=!o&&typeof window!="undefined"?window.innerWidth:o,W=!d&&typeof window!="undefined"?window.innerHeight:d,Z=r||[w/2,W/2],L=[];return f&&f.forEach(K=>{L.push({id:K.id,data:{x:(Math.random()-.5)*h*w+Z[0],y:(Math.random()-.5)*h*W+Z[1]}})}),m&&L.forEach(K=>D.mergeNodeData(K.id,{x:K.data.x,y:K.data.y})),{nodes:L,edges:D.getAllEdges()}})}}},11749:function(V,_,a){"use strict";a.d(_,{h:function(){return s}});function s(k){return!!k.tick&&!!k.stop}},44290:function(V,_,a){"use strict";a.d(_,{k:function(){return s}});const s=Array.isArray},23644:function(V,_,a){"use strict";a.d(_,{P:function(){return s}});const s=(k,O,T)=>{const m=k.getAllNodes(),D=k.getAllEdges();if(!(m!=null&&m.length))return{nodes:[],edges:D};if(m.length===1)return O&&k.mergeNodeData(m[0].id,{x:T[0],y:T[1]}),{nodes:[Object.assign(Object.assign({},m[0]),{data:Object.assign(Object.assign({},m[0].data),{x:T[0],y:T[1]})})],edges:D}}},94504:function(V,_,a){"use strict";a.d(_,{jE:function(){return m},tO:function(){return D},uE:function(){return M}});var s=a(90079),k=a(22355),O=a(48758),T=a(64150);function m(g,r){let o;return(0,s.Z)(r)?o=r:(0,k.Z)(r)?o=()=>r:o=()=>g,o}function D(g,r,o=!0){return!r&&r!==0?d=>{const{size:f}=d.data||{};return f?Array.isArray(f)?o?Math.max(...f)||g:f:(0,O.Z)(f)&&f.width&&f.height?o?Math.max(f.width,f.height)||g:[f.width,f.height]:f:g}:(0,s.Z)(r)?r:(0,k.Z)(r)?()=>r:Array.isArray(r)?()=>o?Math.max(...r)||g:r:(0,O.Z)(r)&&r.width&&r.height?()=>o?Math.max(r.width,r.height)||g:[r.width,r.height]:()=>g}const M=(g,r,o=10)=>{let d;const f=typeof r=="function"?r:()=>r||0;return g?Array.isArray(g)?d=w=>g:(0,s.Z)(g)?d=g:d=w=>g:d=w=>{var W,Z,L;if(!((W=w.data)===null||W===void 0)&&W.bboxSize)return(Z=w.data)===null||Z===void 0?void 0:Z.bboxSize;if(!((L=w.data)===null||L===void 0)&&L.size){const G=w.data.size;return Array.isArray(G)?G:(0,O.Z)(G)?[G.width,G.height]:G}return o},w=>{const W=d(w),Z=f(w);return Math.max(...(0,T._)(W))+Z}}},74495:function(V,_,a){"use strict";a.d(_,{$y:function(){return M},H0:function(){return D},_:function(){return g},nu:function(){return m},qs:function(){return O},zJ:function(){return T}});var s=a(22355),k=a(44290);const O=r=>{const o=[],d=r.length;for(let f=0;f<d;f+=1){o[f]=[];for(let h=0;h<d;h+=1)f===h?o[f][h]=0:r[f][h]===0||!r[f][h]?o[f][h]=1/0:o[f][h]=r[f][h]}for(let f=0;f<d;f+=1)for(let h=0;h<d;h+=1)for(let w=0;w<d;w+=1)o[h][w]>o[h][f]+o[f][w]&&(o[h][w]=o[h][f]+o[f][w]);return o},T=(r,o)=>{const{nodes:d,edges:f}=r,h=[],w={};if(!d)throw new Error("invalid nodes data!");return d&&d.forEach((W,Z)=>{w[W.id]=Z;const L=[];h.push(L)}),f==null||f.forEach(W=>{const{source:Z,target:L}=W,G=w[Z],K=w[L];G===void 0||K===void 0||(h[G][K]=1,o||(h[K][G]=1))}),h},m=(r,o)=>{const d=[];return r.forEach(f=>{const h=[];f.forEach(w=>{h.push(w*o)}),d.push(h)}),d},D=r=>{let o=1/0,d=1/0,f=-1/0,h=-1/0;return r.forEach(w=>{let W=w.data.size;(0,k.k)(W)?W.length===1&&(W=[W[0],W[0]]):(0,s.Z)(W)?W=[W,W]:(W===void 0||isNaN(W))&&(W=[30,30]);const Z=[W[0]/2,W[1]/2],L=w.data.x-Z[0],G=w.data.x+Z[0],K=w.data.y-Z[1],F=w.data.y+Z[1];o>L&&(o=L),d>K&&(d=K),f<G&&(f=G),h<F&&(h=F)}),{minX:o,minY:d,maxX:f,maxY:h}},M=(r,o)=>Math.sqrt((r.x-o.x)*(r.x-o.x)+(r.y-o.y)*(r.y-o.y)),g=(r,o,d,f="TB",h,w={})=>{if(!(o!=null&&o.length))return;const{stopBranchFn:W,stopAllFn:Z}=w;for(let L=0;L<o.length;L++){const G=o[L];if(r.hasNode(G.id)&&!(W!=null&&W(G))){if(Z!=null&&Z(G))return;f==="TB"&&d(G),g(r,r.getChildren(G.id,h),d,f,h,w),f!=="TB"&&d(G)}}}},93721:function(V,_,a){"use strict";a.d(_,{u:function(){return O}});var s=a(22355);const k=T=>{if(T===null)return T;if(T instanceof Date)return new Date(T.getTime());if(T instanceof Array){const m=[];return T.forEach(D=>{m.push(D)}),m.map(D=>k(D))}if(typeof T=="object"){const m={};return Object.keys(T).forEach(D=>{m[D]=k(T[D])}),m}return T},O=(T,m)=>{const D=k(T);return D.data=D.data||{},m&&((0,s.Z)(D.data.x)||(D.data.x=Math.random()*m[0]),(0,s.Z)(D.data.y)||(D.data.y=Math.random()*m[1])),D}},64150:function(V,_,a){"use strict";a.d(_,{_:function(){return k}});var s=a(22355);function k(O){if(!O)return[0,0,0];if((0,s.Z)(O))return[O,O,O];if(O.length===0)return[0,0,0];const[T,m=T,D=T]=O;return[T,m,D]}},94514:function(V,_,a){"use strict";var s,k=a(9504).default,O=a(38836).default,T=a(18733).default,m=a(2546).default,D=a(20910).default,M=a(62657).default,g=a(21742).default,r=a(83136).default,o=a(60967).default,d=a(82092).default,f=a(58568).default,h=a(48305).default,w=a(335).default,W=a(90228).default,Z=a(31759).default,L=a(25298).default,G=a(17069).default;s={value:!0};var K=a(60804),F=a(85650),N=" ".repeat(2),I=" ".repeat(4);function z(){return J(this)}function J(v){var x=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},i=x.maxRows,t=i===void 0?15:i,e=x.maxColumns,n=e===void 0?10:e,c=x.maxNumSize,E=c===void 0?8:c,y=x.padMinus,b=y===void 0?"auto":y;return"".concat(v.constructor.name,` {
`).concat(N,`[
`).concat(I).concat(X(v,t,n,E,b),`
`).concat(N,`]
`).concat(N,"rows: ").concat(v.rows,`
`).concat(N,"columns: ").concat(v.columns,`
}`)}function X(v,x,i,t,e){var n=v.rows,c=v.columns,E=Math.min(n,x),y=Math.min(c,i),b=[];if(e==="auto"){e=!1;t:for(var et=0;et<E;et++)for(var nt=0;nt<y;nt++)if(v.get(et,nt)<0){e=!0;break t}}for(var ht=0;ht<E;ht++){for(var Mt=[],vt=0;vt<y;vt++)Mt.push(U(v.get(ht,vt),t,e));b.push("".concat(Mt.join(" ")))}return y!==c&&(b[b.length-1]+=" ... ".concat(c-i," more columns")),E!==n&&b.push("... ".concat(n-x," more rows")),b.join(`
`.concat(I))}function U(v,x,i){return(v>=0&&i?" ".concat(P(v,x-1)):P(v,x)).padEnd(x)}function P(v,x){var i=v.toString();if(i.length<=x)return i;var t=v.toFixed(x);if(t.length>x&&(t=v.toFixed(Math.max(0,x-(t.length-x)))),t.length<=x&&!t.startsWith("0.000")&&!t.startsWith("-0.000"))return t;var e=v.toExponential(x);return e.length>x&&(e=v.toExponential(Math.max(0,x-(e.length-x)))),e.slice(0)}function S(v,x){v.prototype.add=function(t){return typeof t=="number"?this.addS(t):this.addM(t)},v.prototype.addS=function(t){for(var e=0;e<this.rows;e++)for(var n=0;n<this.columns;n++)this.set(e,n,this.get(e,n)+t);return this},v.prototype.addM=function(t){if(t=x.checkMatrix(t),this.rows!==t.rows||this.columns!==t.columns)throw new RangeError("Matrices dimensions must be equal");for(var e=0;e<this.rows;e++)for(var n=0;n<this.columns;n++)this.set(e,n,this.get(e,n)+t.get(e,n));return this},v.add=function(t,e){var n=new x(t);return n.add(e)},v.prototype.sub=function(t){return typeof t=="number"?this.subS(t):this.subM(t)},v.prototype.subS=function(t){for(var e=0;e<this.rows;e++)for(var n=0;n<this.columns;n++)this.set(e,n,this.get(e,n)-t);return this},v.prototype.subM=function(t){if(t=x.checkMatrix(t),this.rows!==t.rows||this.columns!==t.columns)throw new RangeError("Matrices dimensions must be equal");for(var e=0;e<this.rows;e++)for(var n=0;n<this.columns;n++)this.set(e,n,this.get(e,n)-t.get(e,n));return this},v.sub=function(t,e){var n=new x(t);return n.sub(e)},v.prototype.subtract=v.prototype.sub,v.prototype.subtractS=v.prototype.subS,v.prototype.subtractM=v.prototype.subM,v.subtract=v.sub,v.prototype.mul=function(t){return typeof t=="number"?this.mulS(t):this.mulM(t)},v.prototype.mulS=function(t){for(var e=0;e<this.rows;e++)for(var n=0;n<this.columns;n++)this.set(e,n,this.get(e,n)*t);return this},v.prototype.mulM=function(t){if(t=x.checkMatrix(t),this.rows!==t.rows||this.columns!==t.columns)throw new RangeError("Matrices dimensions must be equal");for(var e=0;e<this.rows;e++)for(var n=0;n<this.columns;n++)this.set(e,n,this.get(e,n)*t.get(e,n));return this},v.mul=function(t,e){var n=new x(t);return n.mul(e)},v.prototype.multiply=v.prototype.mul,v.prototype.multiplyS=v.prototype.mulS,v.prototype.multiplyM=v.prototype.mulM,v.multiply=v.mul,v.prototype.div=function(t){return typeof t=="number"?this.divS(t):this.divM(t)},v.prototype.divS=function(t){for(var e=0;e<this.rows;e++)for(var n=0;n<this.columns;n++)this.set(e,n,this.get(e,n)/t);return this},v.prototype.divM=function(t){if(t=x.checkMatrix(t),this.rows!==t.rows||this.columns!==t.columns)throw new RangeError("Matrices dimensions must be equal");for(var e=0;e<this.rows;e++)for(var n=0;n<this.columns;n++)this.set(e,n,this.get(e,n)/t.get(e,n));return this},v.div=function(t,e){var n=new x(t);return n.div(e)},v.prototype.divide=v.prototype.div,v.prototype.divideS=v.prototype.divS,v.prototype.divideM=v.prototype.divM,v.divide=v.div,v.prototype.mod=function(t){return typeof t=="number"?this.modS(t):this.modM(t)},v.prototype.modS=function(t){for(var e=0;e<this.rows;e++)for(var n=0;n<this.columns;n++)this.set(e,n,this.get(e,n)%t);return this},v.prototype.modM=function(t){if(t=x.checkMatrix(t),this.rows!==t.rows||this.columns!==t.columns)throw new RangeError("Matrices dimensions must be equal");for(var e=0;e<this.rows;e++)for(var n=0;n<this.columns;n++)this.set(e,n,this.get(e,n)%t.get(e,n));return this},v.mod=function(t,e){var n=new x(t);return n.mod(e)},v.prototype.modulus=v.prototype.mod,v.prototype.modulusS=v.prototype.modS,v.prototype.modulusM=v.prototype.modM,v.modulus=v.mod,v.prototype.and=function(t){return typeof t=="number"?this.andS(t):this.andM(t)},v.prototype.andS=function(t){for(var e=0;e<this.rows;e++)for(var n=0;n<this.columns;n++)this.set(e,n,this.get(e,n)&t);return this},v.prototype.andM=function(t){if(t=x.checkMatrix(t),this.rows!==t.rows||this.columns!==t.columns)throw new RangeError("Matrices dimensions must be equal");for(var e=0;e<this.rows;e++)for(var n=0;n<this.columns;n++)this.set(e,n,this.get(e,n)&t.get(e,n));return this},v.and=function(t,e){var n=new x(t);return n.and(e)},v.prototype.or=function(t){return typeof t=="number"?this.orS(t):this.orM(t)},v.prototype.orS=function(t){for(var e=0;e<this.rows;e++)for(var n=0;n<this.columns;n++)this.set(e,n,this.get(e,n)|t);return this},v.prototype.orM=function(t){if(t=x.checkMatrix(t),this.rows!==t.rows||this.columns!==t.columns)throw new RangeError("Matrices dimensions must be equal");for(var e=0;e<this.rows;e++)for(var n=0;n<this.columns;n++)this.set(e,n,this.get(e,n)|t.get(e,n));return this},v.or=function(t,e){var n=new x(t);return n.or(e)},v.prototype.xor=function(t){return typeof t=="number"?this.xorS(t):this.xorM(t)},v.prototype.xorS=function(t){for(var e=0;e<this.rows;e++)for(var n=0;n<this.columns;n++)this.set(e,n,this.get(e,n)^t);return this},v.prototype.xorM=function(t){if(t=x.checkMatrix(t),this.rows!==t.rows||this.columns!==t.columns)throw new RangeError("Matrices dimensions must be equal");for(var e=0;e<this.rows;e++)for(var n=0;n<this.columns;n++)this.set(e,n,this.get(e,n)^t.get(e,n));return this},v.xor=function(t,e){var n=new x(t);return n.xor(e)},v.prototype.leftShift=function(t){return typeof t=="number"?this.leftShiftS(t):this.leftShiftM(t)},v.prototype.leftShiftS=function(t){for(var e=0;e<this.rows;e++)for(var n=0;n<this.columns;n++)this.set(e,n,this.get(e,n)<<t);return this},v.prototype.leftShiftM=function(t){if(t=x.checkMatrix(t),this.rows!==t.rows||this.columns!==t.columns)throw new RangeError("Matrices dimensions must be equal");for(var e=0;e<this.rows;e++)for(var n=0;n<this.columns;n++)this.set(e,n,this.get(e,n)<<t.get(e,n));return this},v.leftShift=function(t,e){var n=new x(t);return n.leftShift(e)},v.prototype.signPropagatingRightShift=function(t){return typeof t=="number"?this.signPropagatingRightShiftS(t):this.signPropagatingRightShiftM(t)},v.prototype.signPropagatingRightShiftS=function(t){for(var e=0;e<this.rows;e++)for(var n=0;n<this.columns;n++)this.set(e,n,this.get(e,n)>>t);return this},v.prototype.signPropagatingRightShiftM=function(t){if(t=x.checkMatrix(t),this.rows!==t.rows||this.columns!==t.columns)throw new RangeError("Matrices dimensions must be equal");for(var e=0;e<this.rows;e++)for(var n=0;n<this.columns;n++)this.set(e,n,this.get(e,n)>>t.get(e,n));return this},v.signPropagatingRightShift=function(t,e){var n=new x(t);return n.signPropagatingRightShift(e)},v.prototype.rightShift=function(t){return typeof t=="number"?this.rightShiftS(t):this.rightShiftM(t)},v.prototype.rightShiftS=function(t){for(var e=0;e<this.rows;e++)for(var n=0;n<this.columns;n++)this.set(e,n,this.get(e,n)>>>t);return this},v.prototype.rightShiftM=function(t){if(t=x.checkMatrix(t),this.rows!==t.rows||this.columns!==t.columns)throw new RangeError("Matrices dimensions must be equal");for(var e=0;e<this.rows;e++)for(var n=0;n<this.columns;n++)this.set(e,n,this.get(e,n)>>>t.get(e,n));return this},v.rightShift=function(t,e){var n=new x(t);return n.rightShift(e)},v.prototype.zeroFillRightShift=v.prototype.rightShift,v.prototype.zeroFillRightShiftS=v.prototype.rightShiftS,v.prototype.zeroFillRightShiftM=v.prototype.rightShiftM,v.zeroFillRightShift=v.rightShift,v.prototype.not=function(){for(var t=0;t<this.rows;t++)for(var e=0;e<this.columns;e++)this.set(t,e,~this.get(t,e));return this},v.not=function(t){var e=new x(t);return e.not()},v.prototype.abs=function(){for(var t=0;t<this.rows;t++)for(var e=0;e<this.columns;e++)this.set(t,e,Math.abs(this.get(t,e)));return this},v.abs=function(t){var e=new x(t);return e.abs()},v.prototype.acos=function(){for(var t=0;t<this.rows;t++)for(var e=0;e<this.columns;e++)this.set(t,e,Math.acos(this.get(t,e)));return this},v.acos=function(t){var e=new x(t);return e.acos()},v.prototype.acosh=function(){for(var t=0;t<this.rows;t++)for(var e=0;e<this.columns;e++)this.set(t,e,Math.acosh(this.get(t,e)));return this},v.acosh=function(t){var e=new x(t);return e.acosh()},v.prototype.asin=function(){for(var t=0;t<this.rows;t++)for(var e=0;e<this.columns;e++)this.set(t,e,Math.asin(this.get(t,e)));return this},v.asin=function(t){var e=new x(t);return e.asin()},v.prototype.asinh=function(){for(var t=0;t<this.rows;t++)for(var e=0;e<this.columns;e++)this.set(t,e,Math.asinh(this.get(t,e)));return this},v.asinh=function(t){var e=new x(t);return e.asinh()},v.prototype.atan=function(){for(var t=0;t<this.rows;t++)for(var e=0;e<this.columns;e++)this.set(t,e,Math.atan(this.get(t,e)));return this},v.atan=function(t){var e=new x(t);return e.atan()},v.prototype.atanh=function(){for(var t=0;t<this.rows;t++)for(var e=0;e<this.columns;e++)this.set(t,e,Math.atanh(this.get(t,e)));return this},v.atanh=function(t){var e=new x(t);return e.atanh()},v.prototype.cbrt=function(){for(var t=0;t<this.rows;t++)for(var e=0;e<this.columns;e++)this.set(t,e,Math.cbrt(this.get(t,e)));return this},v.cbrt=function(t){var e=new x(t);return e.cbrt()},v.prototype.ceil=function(){for(var t=0;t<this.rows;t++)for(var e=0;e<this.columns;e++)this.set(t,e,Math.ceil(this.get(t,e)));return this},v.ceil=function(t){var e=new x(t);return e.ceil()},v.prototype.clz32=function(){for(var t=0;t<this.rows;t++)for(var e=0;e<this.columns;e++)this.set(t,e,Math.clz32(this.get(t,e)));return this},v.clz32=function(t){var e=new x(t);return e.clz32()},v.prototype.cos=function(){for(var t=0;t<this.rows;t++)for(var e=0;e<this.columns;e++)this.set(t,e,Math.cos(this.get(t,e)));return this},v.cos=function(t){var e=new x(t);return e.cos()},v.prototype.cosh=function(){for(var t=0;t<this.rows;t++)for(var e=0;e<this.columns;e++)this.set(t,e,Math.cosh(this.get(t,e)));return this},v.cosh=function(t){var e=new x(t);return e.cosh()},v.prototype.exp=function(){for(var t=0;t<this.rows;t++)for(var e=0;e<this.columns;e++)this.set(t,e,Math.exp(this.get(t,e)));return this},v.exp=function(t){var e=new x(t);return e.exp()},v.prototype.expm1=function(){for(var t=0;t<this.rows;t++)for(var e=0;e<this.columns;e++)this.set(t,e,Math.expm1(this.get(t,e)));return this},v.expm1=function(t){var e=new x(t);return e.expm1()},v.prototype.floor=function(){for(var t=0;t<this.rows;t++)for(var e=0;e<this.columns;e++)this.set(t,e,Math.floor(this.get(t,e)));return this},v.floor=function(t){var e=new x(t);return e.floor()},v.prototype.fround=function(){for(var t=0;t<this.rows;t++)for(var e=0;e<this.columns;e++)this.set(t,e,Math.fround(this.get(t,e)));return this},v.fround=function(t){var e=new x(t);return e.fround()},v.prototype.log=function(){for(var t=0;t<this.rows;t++)for(var e=0;e<this.columns;e++)this.set(t,e,Math.log(this.get(t,e)));return this},v.log=function(t){var e=new x(t);return e.log()},v.prototype.log1p=function(){for(var t=0;t<this.rows;t++)for(var e=0;e<this.columns;e++)this.set(t,e,Math.log1p(this.get(t,e)));return this},v.log1p=function(t){var e=new x(t);return e.log1p()},v.prototype.log10=function(){for(var t=0;t<this.rows;t++)for(var e=0;e<this.columns;e++)this.set(t,e,Math.log10(this.get(t,e)));return this},v.log10=function(t){var e=new x(t);return e.log10()},v.prototype.log2=function(){for(var t=0;t<this.rows;t++)for(var e=0;e<this.columns;e++)this.set(t,e,Math.log2(this.get(t,e)));return this},v.log2=function(t){var e=new x(t);return e.log2()},v.prototype.round=function(){for(var t=0;t<this.rows;t++)for(var e=0;e<this.columns;e++)this.set(t,e,Math.round(this.get(t,e)));return this},v.round=function(t){var e=new x(t);return e.round()},v.prototype.sign=function(){for(var t=0;t<this.rows;t++)for(var e=0;e<this.columns;e++)this.set(t,e,Math.sign(this.get(t,e)));return this},v.sign=function(t){var e=new x(t);return e.sign()},v.prototype.sin=function(){for(var t=0;t<this.rows;t++)for(var e=0;e<this.columns;e++)this.set(t,e,Math.sin(this.get(t,e)));return this},v.sin=function(t){var e=new x(t);return e.sin()},v.prototype.sinh=function(){for(var t=0;t<this.rows;t++)for(var e=0;e<this.columns;e++)this.set(t,e,Math.sinh(this.get(t,e)));return this},v.sinh=function(t){var e=new x(t);return e.sinh()},v.prototype.sqrt=function(){for(var t=0;t<this.rows;t++)for(var e=0;e<this.columns;e++)this.set(t,e,Math.sqrt(this.get(t,e)));return this},v.sqrt=function(t){var e=new x(t);return e.sqrt()},v.prototype.tan=function(){for(var t=0;t<this.rows;t++)for(var e=0;e<this.columns;e++)this.set(t,e,Math.tan(this.get(t,e)));return this},v.tan=function(t){var e=new x(t);return e.tan()},v.prototype.tanh=function(){for(var t=0;t<this.rows;t++)for(var e=0;e<this.columns;e++)this.set(t,e,Math.tanh(this.get(t,e)));return this},v.tanh=function(t){var e=new x(t);return e.tanh()},v.prototype.trunc=function(){for(var t=0;t<this.rows;t++)for(var e=0;e<this.columns;e++)this.set(t,e,Math.trunc(this.get(t,e)));return this},v.trunc=function(t){var e=new x(t);return e.trunc()},v.pow=function(t,e){var n=new x(t);return n.pow(e)},v.prototype.pow=function(t){return typeof t=="number"?this.powS(t):this.powM(t)},v.prototype.powS=function(t){for(var e=0;e<this.rows;e++)for(var n=0;n<this.columns;n++)this.set(e,n,Math.pow(this.get(e,n),t));return this},v.prototype.powM=function(t){if(t=x.checkMatrix(t),this.rows!==t.rows||this.columns!==t.columns)throw new RangeError("Matrices dimensions must be equal");for(var e=0;e<this.rows;e++)for(var n=0;n<this.columns;n++)this.set(e,n,Math.pow(this.get(e,n),t.get(e,n)));return this}}function Y(v,x,i){var t=i?v.rows:v.rows-1;if(x<0||x>t)throw new RangeError("Row index out of range")}function C(v,x,i){var t=i?v.columns:v.columns-1;if(x<0||x>t)throw new RangeError("Column index out of range")}function $(v,x){if(x.to1DArray&&(x=x.to1DArray()),x.length!==v.columns)throw new RangeError("vector size must be the same as the number of columns");return x}function j(v,x){if(x.to1DArray&&(x=x.to1DArray()),x.length!==v.rows)throw new RangeError("vector size must be the same as the number of rows");return x}function ot(v,x){if(!K.isAnyArray(x))throw new TypeError("row indices must be an array");for(var i=0;i<x.length;i++)if(x[i]<0||x[i]>=v.rows)throw new RangeError("row indices are out of range")}function st(v,x){if(!K.isAnyArray(x))throw new TypeError("column indices must be an array");for(var i=0;i<x.length;i++)if(x[i]<0||x[i]>=v.columns)throw new RangeError("column indices are out of range")}function it(v,x,i,t,e){if(arguments.length!==5)throw new RangeError("expected 4 arguments");if(yt("startRow",x),yt("endRow",i),yt("startColumn",t),yt("endColumn",e),x>i||t>e||x<0||x>=v.rows||i<0||i>=v.rows||t<0||t>=v.columns||e<0||e>=v.columns)throw new RangeError("Submatrix indices are out of range")}function gt(v){for(var x=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,i=[],t=0;t<v;t++)i.push(x);return i}function yt(v,x){if(typeof x!="number")throw new TypeError("".concat(v," must be a number"))}function pt(v){if(v.isEmpty())throw new Error("Empty matrix has no elements to index")}function bt(v){for(var x=gt(v.rows),i=0;i<v.rows;++i)for(var t=0;t<v.columns;++t)x[i]+=v.get(i,t);return x}function wt(v){for(var x=gt(v.columns),i=0;i<v.rows;++i)for(var t=0;t<v.columns;++t)x[t]+=v.get(i,t);return x}function tt(v){for(var x=0,i=0;i<v.rows;i++)for(var t=0;t<v.columns;t++)x+=v.get(i,t);return x}function at(v){for(var x=gt(v.rows,1),i=0;i<v.rows;++i)for(var t=0;t<v.columns;++t)x[i]*=v.get(i,t);return x}function lt(v){for(var x=gt(v.columns,1),i=0;i<v.rows;++i)for(var t=0;t<v.columns;++t)x[t]*=v.get(i,t);return x}function ct(v){for(var x=1,i=0;i<v.rows;i++)for(var t=0;t<v.columns;t++)x*=v.get(i,t);return x}function xt(v,x,i){for(var t=v.rows,e=v.columns,n=[],c=0;c<t;c++){for(var E=0,y=0,b=0,et=0;et<e;et++)b=v.get(c,et)-i[c],E+=b,y+=b*b;x?n.push((y-E*E/e)/(e-1)):n.push((y-E*E/e)/e)}return n}function Et(v,x,i){for(var t=v.rows,e=v.columns,n=[],c=0;c<e;c++){for(var E=0,y=0,b=0,et=0;et<t;et++)b=v.get(et,c)-i[c],E+=b,y+=b*b;x?n.push((y-E*E/t)/(t-1)):n.push((y-E*E/t)/t)}return n}function Nt(v,x,i){for(var t=v.rows,e=v.columns,n=t*e,c=0,E=0,y=0,b=0;b<t;b++)for(var et=0;et<e;et++)y=v.get(b,et)-i,c+=y,E+=y*y;return x?(E-c*c/n)/(n-1):(E-c*c/n)/n}function St(v,x){for(var i=0;i<v.rows;i++)for(var t=0;t<v.columns;t++)v.set(i,t,v.get(i,t)-x[i])}function Tt(v,x){for(var i=0;i<v.rows;i++)for(var t=0;t<v.columns;t++)v.set(i,t,v.get(i,t)-x[t])}function zt(v,x){for(var i=0;i<v.rows;i++)for(var t=0;t<v.columns;t++)v.set(i,t,v.get(i,t)-x)}function Zt(v){for(var x=[],i=0;i<v.rows;i++){for(var t=0,e=0;e<v.columns;e++)t+=Math.pow(v.get(i,e),2)/(v.columns-1);x.push(Math.sqrt(t))}return x}function oe(v,x){for(var i=0;i<v.rows;i++)for(var t=0;t<v.columns;t++)v.set(i,t,v.get(i,t)/x[i])}function he(v){for(var x=[],i=0;i<v.columns;i++){for(var t=0,e=0;e<v.rows;e++)t+=Math.pow(v.get(e,i),2)/(v.rows-1);x.push(Math.sqrt(t))}return x}function ye(v,x){for(var i=0;i<v.rows;i++)for(var t=0;t<v.columns;t++)v.set(i,t,v.get(i,t)/x[t])}function ie(v){for(var x=v.size-1,i=0,t=0;t<v.columns;t++)for(var e=0;e<v.rows;e++)i+=Math.pow(v.get(e,t),2)/x;return Math.sqrt(i)}function He(v,x){for(var i=0;i<v.rows;i++)for(var t=0;t<v.columns;t++)v.set(i,t,v.get(i,t)/x)}var Jt=function(v){function x(){L(this,x)}return G(x,[{key:"size",get:function(){return this.rows*this.columns}},{key:"apply",value:function(t){if(typeof t!="function")throw new TypeError("callback must be a function");for(var e=0;e<this.rows;e++)for(var n=0;n<this.columns;n++)t.call(this,e,n);return this}},{key:"to1DArray",value:function(){for(var t=[],e=0;e<this.rows;e++)for(var n=0;n<this.columns;n++)t.push(this.get(e,n));return t}},{key:"to2DArray",value:function(){for(var t=[],e=0;e<this.rows;e++){t.push([]);for(var n=0;n<this.columns;n++)t[e].push(this.get(e,n))}return t}},{key:"toJSON",value:function(){return this.to2DArray()}},{key:"isRowVector",value:function(){return this.rows===1}},{key:"isColumnVector",value:function(){return this.columns===1}},{key:"isVector",value:function(){return this.rows===1||this.columns===1}},{key:"isSquare",value:function(){return this.rows===this.columns}},{key:"isEmpty",value:function(){return this.rows===0||this.columns===0}},{key:"isSymmetric",value:function(){if(this.isSquare()){for(var t=0;t<this.rows;t++)for(var e=0;e<=t;e++)if(this.get(t,e)!==this.get(e,t))return!1;return!0}return!1}},{key:"isDistance",value:function(){if(!this.isSymmetric())return!1;for(var t=0;t<this.rows;t++)if(this.get(t,t)!==0)return!1;return!0}},{key:"isEchelonForm",value:function(){for(var t=0,e=0,n=-1,c=!0,E=!1;t<this.rows&&c;){for(e=0,E=!1;e<this.columns&&E===!1;)this.get(t,e)===0?e++:this.get(t,e)===1&&e>n?(E=!0,n=e):(c=!1,E=!0);t++}return c}},{key:"isReducedEchelonForm",value:function(){for(var t=0,e=0,n=-1,c=!0,E=!1;t<this.rows&&c;){for(e=0,E=!1;e<this.columns&&E===!1;)this.get(t,e)===0?e++:this.get(t,e)===1&&e>n?(E=!0,n=e):(c=!1,E=!0);for(var y=e+1;y<this.rows;y++)this.get(t,y)!==0&&(c=!1);t++}return c}},{key:"echelonForm",value:function(){for(var t=this.clone(),e=0,n=0;e<t.rows&&n<t.columns;){for(var c=e,E=e;E<t.rows;E++)t.get(E,n)>t.get(c,n)&&(c=E);if(t.get(c,n)===0)n++;else{t.swapRows(e,c);for(var y=t.get(e,n),b=n;b<t.columns;b++)t.set(e,b,t.get(e,b)/y);for(var et=e+1;et<t.rows;et++){var nt=t.get(et,n)/t.get(e,n);t.set(et,n,0);for(var ht=n+1;ht<t.columns;ht++)t.set(et,ht,t.get(et,ht)-t.get(e,ht)*nt)}e++,n++}}return t}},{key:"reducedEchelonForm",value:function(){for(var t=this.echelonForm(),e=t.columns,n=t.rows,c=n-1;c>=0;)if(t.maxRow(c)===0)c--;else{for(var E=0,y=!1;E<n&&y===!1;)t.get(c,E)===1?y=!0:E++;for(var b=0;b<c;b++)for(var et=t.get(b,E),nt=E;nt<e;nt++){var ht=t.get(b,nt)-et*t.get(c,nt);t.set(b,nt,ht)}c--}return t}},{key:"set",value:function(){throw new Error("set method is unimplemented")}},{key:"get",value:function(){throw new Error("get method is unimplemented")}},{key:"repeat",value:function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};if(Z(t)!=="object")throw new TypeError("options must be an object");var e=t.rows,n=e===void 0?1:e,c=t.columns,E=c===void 0?1:c;if(!Number.isInteger(n)||n<=0)throw new TypeError("rows must be a positive integer");if(!Number.isInteger(E)||E<=0)throw new TypeError("columns must be a positive integer");for(var y=new Pt(this.rows*n,this.columns*E),b=0;b<n;b++)for(var et=0;et<E;et++)y.setSubMatrix(this,this.rows*b,this.columns*et);return y}},{key:"fill",value:function(t){for(var e=0;e<this.rows;e++)for(var n=0;n<this.columns;n++)this.set(e,n,t);return this}},{key:"neg",value:function(){return this.mulS(-1)}},{key:"getRow",value:function(t){Y(this,t);for(var e=[],n=0;n<this.columns;n++)e.push(this.get(t,n));return e}},{key:"getRowVector",value:function(t){return Pt.rowVector(this.getRow(t))}},{key:"setRow",value:function(t,e){Y(this,t),e=$(this,e);for(var n=0;n<this.columns;n++)this.set(t,n,e[n]);return this}},{key:"swapRows",value:function(t,e){Y(this,t),Y(this,e);for(var n=0;n<this.columns;n++){var c=this.get(t,n);this.set(t,n,this.get(e,n)),this.set(e,n,c)}return this}},{key:"getColumn",value:function(t){C(this,t);for(var e=[],n=0;n<this.rows;n++)e.push(this.get(n,t));return e}},{key:"getColumnVector",value:function(t){return Pt.columnVector(this.getColumn(t))}},{key:"setColumn",value:function(t,e){C(this,t),e=j(this,e);for(var n=0;n<this.rows;n++)this.set(n,t,e[n]);return this}},{key:"swapColumns",value:function(t,e){C(this,t),C(this,e);for(var n=0;n<this.rows;n++){var c=this.get(n,t);this.set(n,t,this.get(n,e)),this.set(n,e,c)}return this}},{key:"addRowVector",value:function(t){t=$(this,t);for(var e=0;e<this.rows;e++)for(var n=0;n<this.columns;n++)this.set(e,n,this.get(e,n)+t[n]);return this}},{key:"subRowVector",value:function(t){t=$(this,t);for(var e=0;e<this.rows;e++)for(var n=0;n<this.columns;n++)this.set(e,n,this.get(e,n)-t[n]);return this}},{key:"mulRowVector",value:function(t){t=$(this,t);for(var e=0;e<this.rows;e++)for(var n=0;n<this.columns;n++)this.set(e,n,this.get(e,n)*t[n]);return this}},{key:"divRowVector",value:function(t){t=$(this,t);for(var e=0;e<this.rows;e++)for(var n=0;n<this.columns;n++)this.set(e,n,this.get(e,n)/t[n]);return this}},{key:"addColumnVector",value:function(t){t=j(this,t);for(var e=0;e<this.rows;e++)for(var n=0;n<this.columns;n++)this.set(e,n,this.get(e,n)+t[e]);return this}},{key:"subColumnVector",value:function(t){t=j(this,t);for(var e=0;e<this.rows;e++)for(var n=0;n<this.columns;n++)this.set(e,n,this.get(e,n)-t[e]);return this}},{key:"mulColumnVector",value:function(t){t=j(this,t);for(var e=0;e<this.rows;e++)for(var n=0;n<this.columns;n++)this.set(e,n,this.get(e,n)*t[e]);return this}},{key:"divColumnVector",value:function(t){t=j(this,t);for(var e=0;e<this.rows;e++)for(var n=0;n<this.columns;n++)this.set(e,n,this.get(e,n)/t[e]);return this}},{key:"mulRow",value:function(t,e){Y(this,t);for(var n=0;n<this.columns;n++)this.set(t,n,this.get(t,n)*e);return this}},{key:"mulColumn",value:function(t,e){C(this,t);for(var n=0;n<this.rows;n++)this.set(n,t,this.get(n,t)*e);return this}},{key:"max",value:function(t){if(this.isEmpty())return NaN;switch(t){case"row":{for(var e=new Array(this.rows).fill(Number.NEGATIVE_INFINITY),n=0;n<this.rows;n++)for(var c=0;c<this.columns;c++)this.get(n,c)>e[n]&&(e[n]=this.get(n,c));return e}case"column":{for(var E=new Array(this.columns).fill(Number.NEGATIVE_INFINITY),y=0;y<this.rows;y++)for(var b=0;b<this.columns;b++)this.get(y,b)>E[b]&&(E[b]=this.get(y,b));return E}case void 0:{for(var et=this.get(0,0),nt=0;nt<this.rows;nt++)for(var ht=0;ht<this.columns;ht++)this.get(nt,ht)>et&&(et=this.get(nt,ht));return et}default:throw new Error("invalid option: ".concat(t))}}},{key:"maxIndex",value:function(){pt(this);for(var t=this.get(0,0),e=[0,0],n=0;n<this.rows;n++)for(var c=0;c<this.columns;c++)this.get(n,c)>t&&(t=this.get(n,c),e[0]=n,e[1]=c);return e}},{key:"min",value:function(t){if(this.isEmpty())return NaN;switch(t){case"row":{for(var e=new Array(this.rows).fill(Number.POSITIVE_INFINITY),n=0;n<this.rows;n++)for(var c=0;c<this.columns;c++)this.get(n,c)<e[n]&&(e[n]=this.get(n,c));return e}case"column":{for(var E=new Array(this.columns).fill(Number.POSITIVE_INFINITY),y=0;y<this.rows;y++)for(var b=0;b<this.columns;b++)this.get(y,b)<E[b]&&(E[b]=this.get(y,b));return E}case void 0:{for(var et=this.get(0,0),nt=0;nt<this.rows;nt++)for(var ht=0;ht<this.columns;ht++)this.get(nt,ht)<et&&(et=this.get(nt,ht));return et}default:throw new Error("invalid option: ".concat(t))}}},{key:"minIndex",value:function(){pt(this);for(var t=this.get(0,0),e=[0,0],n=0;n<this.rows;n++)for(var c=0;c<this.columns;c++)this.get(n,c)<t&&(t=this.get(n,c),e[0]=n,e[1]=c);return e}},{key:"maxRow",value:function(t){if(Y(this,t),this.isEmpty())return NaN;for(var e=this.get(t,0),n=1;n<this.columns;n++)this.get(t,n)>e&&(e=this.get(t,n));return e}},{key:"maxRowIndex",value:function(t){Y(this,t),pt(this);for(var e=this.get(t,0),n=[t,0],c=1;c<this.columns;c++)this.get(t,c)>e&&(e=this.get(t,c),n[1]=c);return n}},{key:"minRow",value:function(t){if(Y(this,t),this.isEmpty())return NaN;for(var e=this.get(t,0),n=1;n<this.columns;n++)this.get(t,n)<e&&(e=this.get(t,n));return e}},{key:"minRowIndex",value:function(t){Y(this,t),pt(this);for(var e=this.get(t,0),n=[t,0],c=1;c<this.columns;c++)this.get(t,c)<e&&(e=this.get(t,c),n[1]=c);return n}},{key:"maxColumn",value:function(t){if(C(this,t),this.isEmpty())return NaN;for(var e=this.get(0,t),n=1;n<this.rows;n++)this.get(n,t)>e&&(e=this.get(n,t));return e}},{key:"maxColumnIndex",value:function(t){C(this,t),pt(this);for(var e=this.get(0,t),n=[0,t],c=1;c<this.rows;c++)this.get(c,t)>e&&(e=this.get(c,t),n[0]=c);return n}},{key:"minColumn",value:function(t){if(C(this,t),this.isEmpty())return NaN;for(var e=this.get(0,t),n=1;n<this.rows;n++)this.get(n,t)<e&&(e=this.get(n,t));return e}},{key:"minColumnIndex",value:function(t){C(this,t),pt(this);for(var e=this.get(0,t),n=[0,t],c=1;c<this.rows;c++)this.get(c,t)<e&&(e=this.get(c,t),n[0]=c);return n}},{key:"diag",value:function(){for(var t=Math.min(this.rows,this.columns),e=[],n=0;n<t;n++)e.push(this.get(n,n));return e}},{key:"norm",value:function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"frobenius";switch(t){case"max":return this.max();case"frobenius":return Math.sqrt(this.dot(this));default:throw new RangeError("unknown norm type: ".concat(t))}}},{key:"cumulativeSum",value:function(){for(var t=0,e=0;e<this.rows;e++)for(var n=0;n<this.columns;n++)t+=this.get(e,n),this.set(e,n,t);return this}},{key:"dot",value:function(t){x.isMatrix(t)&&(t=t.to1DArray());var e=this.to1DArray();if(e.length!==t.length)throw new RangeError("vectors do not have the same size");for(var n=0,c=0;c<e.length;c++)n+=e[c]*t[c];return n}},{key:"mmul",value:function(t){t=Pt.checkMatrix(t);for(var e=this.rows,n=this.columns,c=t.columns,E=new Pt(e,c),y=new Float64Array(n),b=0;b<c;b++){for(var et=0;et<n;et++)y[et]=t.get(et,b);for(var nt=0;nt<e;nt++){for(var ht=0,Mt=0;Mt<n;Mt++)ht+=this.get(nt,Mt)*y[Mt];E.set(nt,b,ht)}}return E}},{key:"mpow",value:function(t){if(!this.isSquare())throw new RangeError("Matrix must be square");if(!Number.isInteger(t)||t<0)throw new RangeError("Exponent must be a non-negative integer");for(var e=Pt.eye(this.rows),n=this,c=t;c>=1;c/=2)c&1&&(e=e.mmul(n)),n=n.mmul(n);return e}},{key:"strassen2x2",value:function(t){t=Pt.checkMatrix(t);var e=new Pt(2,2),n=this.get(0,0),c=t.get(0,0),E=this.get(0,1),y=t.get(0,1),b=this.get(1,0),et=t.get(1,0),nt=this.get(1,1),ht=t.get(1,1),Mt=(n+nt)*(c+ht),vt=(b+nt)*c,It=n*(y-ht),Ut=nt*(et-c),ut=(n+E)*ht,mt=(b-n)*(c+y),Ot=(E-nt)*(et+ht),Ct=Mt+Ut-ut+Ot,Rt=It+ut,Qt=vt+Ut,qt=Mt-vt+It+mt;return e.set(0,0,Ct),e.set(0,1,Rt),e.set(1,0,Qt),e.set(1,1,qt),e}},{key:"strassen3x3",value:function(t){t=Pt.checkMatrix(t);var e=new Pt(3,3),n=this.get(0,0),c=this.get(0,1),E=this.get(0,2),y=this.get(1,0),b=this.get(1,1),et=this.get(1,2),nt=this.get(2,0),ht=this.get(2,1),Mt=this.get(2,2),vt=t.get(0,0),It=t.get(0,1),Ut=t.get(0,2),ut=t.get(1,0),mt=t.get(1,1),Ot=t.get(1,2),Ct=t.get(2,0),Rt=t.get(2,1),Qt=t.get(2,2),qt=(n+c+E-y-b-ht-Mt)*mt,Bt=(n-y)*(-It+mt),$t=b*(-vt+It+ut-mt-Ot-Ct+Qt),te=(-n+y+b)*(vt-It+mt),le=(y+b)*(-vt+It),Lt=n*vt,we=(-n+nt+ht)*(vt-Ut+Ot),ge=(-n+nt)*(Ut-Ot),jt=(nt+ht)*(-vt+Ut),Fe=(n+c+E-b-et-nt-ht)*Ot,Be=ht*(-vt+Ut+ut-mt-Ot-Ct+Rt),ae=(-E+ht+Mt)*(mt+Ct-Rt),Te=(E-Mt)*(mt-Rt),Me=E*Ct,Le=(ht+Mt)*(-Ct+Rt),ce=(-E+b+et)*(Ot+Ct-Qt),Ze=(E-et)*(Ot-Qt),Ye=(b+et)*(-Ct+Qt),Ke=c*ut,wn=et*Rt,$e=y*Ut,qe=nt*It,Ht=Mt*Qt,Ue=Lt+Me+Ke,Xe=qt+te+le+Lt+ae+Me+Le,ee=Lt+we+jt+Fe+Me+ce+Ye,Je=Bt+$t+te+Lt+Me+ce+Ze,je=Bt+te+le+Lt+wn,_e=Me+ce+Ze+Ye+$e,Qe=Lt+we+ge+Be+ae+Te+Me,u=ae+Te+Me+Le+qe,l=Lt+we+ge+jt+Ht;return e.set(0,0,Ue),e.set(0,1,Xe),e.set(0,2,ee),e.set(1,0,Je),e.set(1,1,je),e.set(1,2,_e),e.set(2,0,Qe),e.set(2,1,u),e.set(2,2,l),e}},{key:"mmulStrassen",value:function(t){t=Pt.checkMatrix(t);var e=this.clone(),n=e.rows,c=e.columns,E=t.rows,y=t.columns;c!==E&&console.warn("Multiplying ".concat(n," x ").concat(c," and ").concat(E," x ").concat(y," matrix: dimensions do not match."));function b(Mt,vt,It){var Ut=Mt.rows,ut=Mt.columns;if(Ut===vt&&ut===It)return Mt;var mt=x.zeros(vt,It);return mt=mt.setSubMatrix(Mt,0,0),mt}var et=Math.max(n,E),nt=Math.max(c,y);e=b(e,et,nt),t=b(t,et,nt);function ht(Mt,vt,It,Ut){if(It<=512||Ut<=512)return Mt.mmul(vt);It%2===1&&Ut%2===1?(Mt=b(Mt,It+1,Ut+1),vt=b(vt,It+1,Ut+1)):It%2===1?(Mt=b(Mt,It+1,Ut),vt=b(vt,It+1,Ut)):Ut%2===1&&(Mt=b(Mt,It,Ut+1),vt=b(vt,It,Ut+1));var ut=parseInt(Mt.rows/2,10),mt=parseInt(Mt.columns/2,10),Ot=Mt.subMatrix(0,ut-1,0,mt-1),Ct=vt.subMatrix(0,ut-1,0,mt-1),Rt=Mt.subMatrix(0,ut-1,mt,Mt.columns-1),Qt=vt.subMatrix(0,ut-1,mt,vt.columns-1),qt=Mt.subMatrix(ut,Mt.rows-1,0,mt-1),Bt=vt.subMatrix(ut,vt.rows-1,0,mt-1),$t=Mt.subMatrix(ut,Mt.rows-1,mt,Mt.columns-1),te=vt.subMatrix(ut,vt.rows-1,mt,vt.columns-1),le=ht(x.add(Ot,$t),x.add(Ct,te),ut,mt),Lt=ht(x.add(qt,$t),Ct,ut,mt),we=ht(Ot,x.sub(Qt,te),ut,mt),ge=ht($t,x.sub(Bt,Ct),ut,mt),jt=ht(x.add(Ot,Rt),te,ut,mt),Fe=ht(x.sub(qt,Ot),x.add(Ct,Qt),ut,mt),Be=ht(x.sub(Rt,$t),x.add(Bt,te),ut,mt),ae=x.add(le,ge);ae.sub(jt),ae.add(Be);var Te=x.add(we,jt),Me=x.add(Lt,ge),Le=x.sub(le,Lt);Le.add(we),Le.add(Fe);var ce=x.zeros(2*ae.rows,2*ae.columns);return ce=ce.setSubMatrix(ae,0,0),ce=ce.setSubMatrix(Te,ae.rows,0),ce=ce.setSubMatrix(Me,0,ae.columns),ce=ce.setSubMatrix(Le,ae.rows,ae.columns),ce.subMatrix(0,It-1,0,Ut-1)}return ht(e,t,et,nt)}},{key:"scaleRows",value:function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};if(Z(t)!=="object")throw new TypeError("options must be an object");var e=t.min,n=e===void 0?0:e,c=t.max,E=c===void 0?1:c;if(!Number.isFinite(n))throw new TypeError("min must be a number");if(!Number.isFinite(E))throw new TypeError("max must be a number");if(n>=E)throw new RangeError("min must be smaller than max");for(var y=new Pt(this.rows,this.columns),b=0;b<this.rows;b++){var et=this.getRow(b);et.length>0&&F(et,{min:n,max:E,output:et}),y.setRow(b,et)}return y}},{key:"scaleColumns",value:function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};if(Z(t)!=="object")throw new TypeError("options must be an object");var e=t.min,n=e===void 0?0:e,c=t.max,E=c===void 0?1:c;if(!Number.isFinite(n))throw new TypeError("min must be a number");if(!Number.isFinite(E))throw new TypeError("max must be a number");if(n>=E)throw new RangeError("min must be smaller than max");for(var y=new Pt(this.rows,this.columns),b=0;b<this.columns;b++){var et=this.getColumn(b);et.length&&F(et,{min:n,max:E,output:et}),y.setColumn(b,et)}return y}},{key:"flipRows",value:function(){for(var t=Math.ceil(this.columns/2),e=0;e<this.rows;e++)for(var n=0;n<t;n++){var c=this.get(e,n),E=this.get(e,this.columns-1-n);this.set(e,n,E),this.set(e,this.columns-1-n,c)}return this}},{key:"flipColumns",value:function(){for(var t=Math.ceil(this.rows/2),e=0;e<this.columns;e++)for(var n=0;n<t;n++){var c=this.get(n,e),E=this.get(this.rows-1-n,e);this.set(n,e,E),this.set(this.rows-1-n,e,c)}return this}},{key:"kroneckerProduct",value:function(t){t=Pt.checkMatrix(t);for(var e=this.rows,n=this.columns,c=t.rows,E=t.columns,y=new Pt(e*c,n*E),b=0;b<e;b++)for(var et=0;et<n;et++)for(var nt=0;nt<c;nt++)for(var ht=0;ht<E;ht++)y.set(c*b+nt,E*et+ht,this.get(b,et)*t.get(nt,ht));return y}},{key:"kroneckerSum",value:function(t){if(t=Pt.checkMatrix(t),!this.isSquare()||!t.isSquare())throw new Error("Kronecker Sum needs two Square Matrices");var e=this.rows,n=t.rows,c=this.kroneckerProduct(Pt.eye(n,n)),E=Pt.eye(e,e).kroneckerProduct(t);return c.add(E)}},{key:"transpose",value:function(){for(var t=new Pt(this.columns,this.rows),e=0;e<this.rows;e++)for(var n=0;n<this.columns;n++)t.set(n,e,this.get(e,n));return t}},{key:"sortRows",value:function(){for(var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:Ae,e=0;e<this.rows;e++)this.setRow(e,this.getRow(e).sort(t));return this}},{key:"sortColumns",value:function(){for(var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:Ae,e=0;e<this.columns;e++)this.setColumn(e,this.getColumn(e).sort(t));return this}},{key:"subMatrix",value:function(t,e,n,c){it(this,t,e,n,c);for(var E=new Pt(e-t+1,c-n+1),y=t;y<=e;y++)for(var b=n;b<=c;b++)E.set(y-t,b-n,this.get(y,b));return E}},{key:"subMatrixRow",value:function(t,e,n){if(e===void 0&&(e=0),n===void 0&&(n=this.columns-1),e>n||e<0||e>=this.columns||n<0||n>=this.columns)throw new RangeError("Argument out of range");for(var c=new Pt(t.length,n-e+1),E=0;E<t.length;E++)for(var y=e;y<=n;y++){if(t[E]<0||t[E]>=this.rows)throw new RangeError("Row index out of range: ".concat(t[E]));c.set(E,y-e,this.get(t[E],y))}return c}},{key:"subMatrixColumn",value:function(t,e,n){if(e===void 0&&(e=0),n===void 0&&(n=this.rows-1),e>n||e<0||e>=this.rows||n<0||n>=this.rows)throw new RangeError("Argument out of range");for(var c=new Pt(n-e+1,t.length),E=0;E<t.length;E++)for(var y=e;y<=n;y++){if(t[E]<0||t[E]>=this.columns)throw new RangeError("Column index out of range: ".concat(t[E]));c.set(y-e,E,this.get(y,t[E]))}return c}},{key:"setSubMatrix",value:function(t,e,n){if(t=Pt.checkMatrix(t),t.isEmpty())return this;var c=e+t.rows-1,E=n+t.columns-1;it(this,e,c,n,E);for(var y=0;y<t.rows;y++)for(var b=0;b<t.columns;b++)this.set(e+y,n+b,t.get(y,b));return this}},{key:"selection",value:function(t,e){ot(this,t),st(this,e);for(var n=new Pt(t.length,e.length),c=0;c<t.length;c++)for(var E=t[c],y=0;y<e.length;y++){var b=e[y];n.set(c,y,this.get(E,b))}return n}},{key:"trace",value:function(){for(var t=Math.min(this.rows,this.columns),e=0,n=0;n<t;n++)e+=this.get(n,n);return e}},{key:"clone",value:function(){return this.constructor.copy(this,new Pt(this.rows,this.columns))}},{key:"sum",value:function(t){switch(t){case"row":return bt(this);case"column":return wt(this);case void 0:return tt(this);default:throw new Error("invalid option: ".concat(t))}}},{key:"product",value:function(t){switch(t){case"row":return at(this);case"column":return lt(this);case void 0:return ct(this);default:throw new Error("invalid option: ".concat(t))}}},{key:"mean",value:function(t){var e=this.sum(t);switch(t){case"row":{for(var n=0;n<this.rows;n++)e[n]/=this.columns;return e}case"column":{for(var c=0;c<this.columns;c++)e[c]/=this.rows;return e}case void 0:return e/this.size;default:throw new Error("invalid option: ".concat(t))}}},{key:"variance",value:function(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(Z(t)==="object"&&(e=t,t=void 0),Z(e)!=="object")throw new TypeError("options must be an object");var n=e,c=n.unbiased,E=c===void 0?!0:c,y=n.mean,b=y===void 0?this.mean(t):y;if(typeof E!="boolean")throw new TypeError("unbiased must be a boolean");switch(t){case"row":{if(!K.isAnyArray(b))throw new TypeError("mean must be an array");return xt(this,E,b)}case"column":{if(!K.isAnyArray(b))throw new TypeError("mean must be an array");return Et(this,E,b)}case void 0:{if(typeof b!="number")throw new TypeError("mean must be a number");return Nt(this,E,b)}default:throw new Error("invalid option: ".concat(t))}}},{key:"standardDeviation",value:function(t,e){Z(t)==="object"&&(e=t,t=void 0);var n=this.variance(t,e);if(t===void 0)return Math.sqrt(n);for(var c=0;c<n.length;c++)n[c]=Math.sqrt(n[c]);return n}},{key:"center",value:function(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(Z(t)==="object"&&(e=t,t=void 0),Z(e)!=="object")throw new TypeError("options must be an object");var n=e,c=n.center,E=c===void 0?this.mean(t):c;switch(t){case"row":{if(!K.isAnyArray(E))throw new TypeError("center must be an array");return St(this,E),this}case"column":{if(!K.isAnyArray(E))throw new TypeError("center must be an array");return Tt(this,E),this}case void 0:{if(typeof E!="number")throw new TypeError("center must be a number");return zt(this,E),this}default:throw new Error("invalid option: ".concat(t))}}},{key:"scale",value:function(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(Z(t)==="object"&&(e=t,t=void 0),Z(e)!=="object")throw new TypeError("options must be an object");var n=e.scale;switch(t){case"row":{if(n===void 0)n=Zt(this);else if(!K.isAnyArray(n))throw new TypeError("scale must be an array");return oe(this,n),this}case"column":{if(n===void 0)n=he(this);else if(!K.isAnyArray(n))throw new TypeError("scale must be an array");return ye(this,n),this}case void 0:{if(n===void 0)n=ie(this);else if(typeof n!="number")throw new TypeError("scale must be a number");return He(this,n),this}default:throw new Error("invalid option: ".concat(t))}}},{key:"toString",value:function(t){return J(this,t)}},{key:v,value:function(){return this.entries()}},{key:"entries",value:W().mark(function i(){var t,e;return W().wrap(function(c){for(;;)switch(c.prev=c.next){case 0:t=0;case 1:if(!(t<this.rows)){c.next=12;break}e=0;case 3:if(!(e<this.columns)){c.next=9;break}return c.next=6,[t,e,this.get(t,e)];case 6:e++,c.next=3;break;case 9:t++,c.next=1;break;case 12:case"end":return c.stop()}},i,this)})},{key:"values",value:W().mark(function i(){var t,e;return W().wrap(function(c){for(;;)switch(c.prev=c.next){case 0:t=0;case 1:if(!(t<this.rows)){c.next=12;break}e=0;case 3:if(!(e<this.columns)){c.next=9;break}return c.next=6,this.get(t,e);case 6:e++,c.next=3;break;case 9:t++,c.next=1;break;case 12:case"end":return c.stop()}},i,this)})}],[{key:"from1DArray",value:function(t,e,n){var c=t*e;if(c!==n.length)throw new RangeError("data length does not match given dimensions");for(var E=new Pt(t,e),y=0;y<t;y++)for(var b=0;b<e;b++)E.set(y,b,n[y*e+b]);return E}},{key:"rowVector",value:function(t){for(var e=new Pt(1,t.length),n=0;n<t.length;n++)e.set(0,n,t[n]);return e}},{key:"columnVector",value:function(t){for(var e=new Pt(t.length,1),n=0;n<t.length;n++)e.set(n,0,t[n]);return e}},{key:"zeros",value:function(t,e){return new Pt(t,e)}},{key:"ones",value:function(t,e){return new Pt(t,e).fill(1)}},{key:"rand",value:function(t,e){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};if(Z(n)!=="object")throw new TypeError("options must be an object");for(var c=n.random,E=c===void 0?Math.random:c,y=new Pt(t,e),b=0;b<t;b++)for(var et=0;et<e;et++)y.set(b,et,E());return y}},{key:"randInt",value:function(t,e){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};if(Z(n)!=="object")throw new TypeError("options must be an object");var c=n.min,E=c===void 0?0:c,y=n.max,b=y===void 0?1e3:y,et=n.random,nt=et===void 0?Math.random:et;if(!Number.isInteger(E))throw new TypeError("min must be an integer");if(!Number.isInteger(b))throw new TypeError("max must be an integer");if(E>=b)throw new RangeError("min must be smaller than max");for(var ht=b-E,Mt=new Pt(t,e),vt=0;vt<t;vt++)for(var It=0;It<e;It++){var Ut=E+Math.round(nt()*ht);Mt.set(vt,It,Ut)}return Mt}},{key:"eye",value:function(t,e,n){e===void 0&&(e=t),n===void 0&&(n=1);for(var c=Math.min(t,e),E=this.zeros(t,e),y=0;y<c;y++)E.set(y,y,n);return E}},{key:"diag",value:function(t,e,n){var c=t.length;e===void 0&&(e=c),n===void 0&&(n=e);for(var E=Math.min(c,e,n),y=this.zeros(e,n),b=0;b<E;b++)y.set(b,b,t[b]);return y}},{key:"min",value:function(t,e){t=this.checkMatrix(t),e=this.checkMatrix(e);for(var n=t.rows,c=t.columns,E=new Pt(n,c),y=0;y<n;y++)for(var b=0;b<c;b++)E.set(y,b,Math.min(t.get(y,b),e.get(y,b)));return E}},{key:"max",value:function(t,e){t=this.checkMatrix(t),e=this.checkMatrix(e);for(var n=t.rows,c=t.columns,E=new this(n,c),y=0;y<n;y++)for(var b=0;b<c;b++)E.set(y,b,Math.max(t.get(y,b),e.get(y,b)));return E}},{key:"checkMatrix",value:function(t){return x.isMatrix(t)?t:new Pt(t)}},{key:"isMatrix",value:function(t){return t!=null&&t.klass==="Matrix"}},{key:"copy",value:function(t,e){var n=w(t.entries()),c;try{for(n.s();!(c=n.n()).done;){var E=h(c.value,3),y=E[0],b=E[1],et=E[2];e.set(y,b,et)}}catch(nt){n.e(nt)}finally{n.f()}return e}}]),x}(Symbol.iterator);Jt.prototype.klass="Matrix",typeof Symbol!="undefined"&&(Jt.prototype[Symbol.for("nodejs.util.inspect.custom")]=z);function Ae(v,x){return v-x}function Pe(v){return v.every(function(x){return typeof x=="number"})}Jt.random=Jt.rand,Jt.randomInt=Jt.randInt,Jt.diagonal=Jt.diag,Jt.prototype.diagonal=Jt.prototype.diag,Jt.identity=Jt.eye,Jt.prototype.negate=Jt.prototype.neg,Jt.prototype.tensorProduct=Jt.prototype.kroneckerProduct;var pe=new WeakSet,Pt=function(v){g(i,v);var x=r(i);function i(t,e){var n;if(L(this,i),n=x.call(this),o(M(n),pe),d(M(n),"data",void 0),i.isMatrix(t))f(M(n),pe,fe).call(M(n),t.rows,t.columns),i.copy(t,M(n));else if(Number.isInteger(t)&&t>=0)f(M(n),pe,fe).call(M(n),t,e);else if(K.isAnyArray(t)){var c=t;if(t=c.length,e=t?c[0].length:0,typeof e!="number")throw new TypeError("Data must be a 2D array with at least one element");n.data=[];for(var E=0;E<t;E++){if(c[E].length!==e)throw new RangeError("Inconsistent array dimensions");if(!Pe(c[E]))throw new TypeError("Input data contains non-numeric values");n.data.push(Float64Array.from(c[E]))}n.rows=t,n.columns=e}else throw new TypeError("First argument must be a positive number or an array");return n}return G(i,[{key:"set",value:function(e,n,c){return this.data[e][n]=c,this}},{key:"get",value:function(e,n){return this.data[e][n]}},{key:"removeRow",value:function(e){return Y(this,e),this.data.splice(e,1),this.rows-=1,this}},{key:"addRow",value:function(e,n){return n===void 0&&(n=e,e=this.rows),Y(this,e,!0),n=Float64Array.from($(this,n)),this.data.splice(e,0,n),this.rows+=1,this}},{key:"removeColumn",value:function(e){C(this,e);for(var n=0;n<this.rows;n++){for(var c=new Float64Array(this.columns-1),E=0;E<e;E++)c[E]=this.data[n][E];for(var y=e+1;y<this.columns;y++)c[y-1]=this.data[n][y];this.data[n]=c}return this.columns-=1,this}},{key:"addColumn",value:function(e,n){typeof n=="undefined"&&(n=e,e=this.columns),C(this,e,!0),n=j(this,n);for(var c=0;c<this.rows;c++){for(var E=new Float64Array(this.columns+1),y=0;y<e;y++)E[y]=this.data[c][y];for(E[y++]=n[c];y<this.columns+1;y++)E[y]=this.data[c][y-1];this.data[c]=E}return this.columns+=1,this}}]),i}(Jt);function fe(v,x){if(this.data=[],Number.isInteger(x)&&x>=0)for(var i=0;i<v;i++)this.data.push(new Float64Array(x));else throw new TypeError("nColumns must be a positive integer");this.rows=v,this.columns=x}S(Jt,Pt);var me=new WeakMap,_t=function(v){g(i,v);var x=r(i);function i(t){var e;if(L(this,i),e=x.call(this),T(M(e),me,{writable:!0,value:void 0}),Pt.isMatrix(t)){if(!t.isSymmetric())throw new TypeError("not symmetric data");m(M(e),me,Pt.copy(t,new Pt(t.rows,t.rows)))}else if(Number.isInteger(t)&&t>=0)m(M(e),me,new Pt(t,t));else if(m(M(e),me,new Pt(t)),!e.isSymmetric())throw new TypeError("not symmetric data");return e}return G(i,[{key:"size",get:function(){return D(this,me).size}},{key:"rows",get:function(){return D(this,me).rows}},{key:"columns",get:function(){return D(this,me).columns}},{key:"diagonalSize",get:function(){return this.rows}},{key:"clone",value:function(){var e=new i(this.diagonalSize),n=w(this.upperRightEntries()),c;try{for(n.s();!(c=n.n()).done;){var E=h(c.value,3),y=E[0],b=E[1],et=E[2];e.set(y,b,et)}}catch(nt){n.e(nt)}finally{n.f()}return e}},{key:"toMatrix",value:function(){return new Pt(this)}},{key:"get",value:function(e,n){return D(this,me).get(e,n)}},{key:"set",value:function(e,n,c){return D(this,me).set(e,n,c),D(this,me).set(n,e,c),this}},{key:"removeCross",value:function(e){return D(this,me).removeRow(e),D(this,me).removeColumn(e),this}},{key:"addCross",value:function(e,n){n===void 0&&(n=e,e=this.diagonalSize);var c=n.slice();return c.splice(e,1),D(this,me).addRow(e,c),D(this,me).addColumn(e,n),this}},{key:"applyMask",value:function(e){if(e.length!==this.diagonalSize)throw new RangeError("Mask size do not match with matrix size");var n=[],c=w(e.entries()),E;try{for(c.s();!(E=c.n()).done;){var y=h(E.value,2),b=y[0],et=y[1];et||n.push(b)}}catch(vt){c.e(vt)}finally{c.f()}n.reverse();for(var nt=0,ht=n;nt<ht.length;nt++){var Mt=ht[nt];this.removeCross(Mt)}return this}},{key:"toCompact",value:function(){for(var e=this.diagonalSize,n=new Array(e*(e+1)/2),c=0,E=0,y=0;y<n.length;y++)n[y]=this.get(E,c),++c>=e&&(c=++E);return n}},{key:"upperRightEntries",value:W().mark(function t(){var e,n,c;return W().wrap(function(y){for(;;)switch(y.prev=y.next){case 0:e=0,n=0;case 1:if(!(e<this.diagonalSize)){y.next=9;break}return c=this.get(e,n),y.next=5,[e,n,c];case 5:++n>=this.diagonalSize&&(n=++e);case 6:y.next=1;break;case 9:case"end":return y.stop()}},t,this)})},{key:"upperRightValues",value:W().mark(function t(){var e,n,c;return W().wrap(function(y){for(;;)switch(y.prev=y.next){case 0:e=0,n=0;case 1:if(!(e<this.diagonalSize)){y.next=9;break}return c=this.get(e,n),y.next=5,c;case 5:++n>=this.diagonalSize&&(n=++e);case 6:y.next=1;break;case 9:case"end":return y.stop()}},t,this)})}],[{key:"isSymmetricMatrix",value:function(e){return Pt.isMatrix(e)&&e.klassType==="SymmetricMatrix"}},{key:"zeros",value:function(e){return new this(e)}},{key:"ones",value:function(e){return new this(e).fill(1)}},{key:"fromCompact",value:function(e){var n=e.length,c=(Math.sqrt(8*n+1)-1)/2;if(!Number.isInteger(c))throw new TypeError("This array is not a compact representation of a Symmetric Matrix, ".concat(JSON.stringify(e)));for(var E=new i(c),y=0,b=0,et=0;et<n;et++)E.set(y,b,e[et]),++y>=c&&(y=++b);return E}}]),i}(Jt);_t.prototype.klassType="SymmetricMatrix";var ke=function(v){g(i,v);var x=r(i);function i(t){var e;if(L(this,i),e=x.call(this,t),!e.isDistance())throw new TypeError("Provided arguments do no produce a distance matrix");return e}return G(i,[{key:"set",value:function(e,n,c){return e===n&&(c=0),k(O(i.prototype),"set",this).call(this,e,n,c)}},{key:"addCross",value:function(e,n){return n===void 0&&(n=e,e=this.diagonalSize),n=n.slice(),n[e]=0,k(O(i.prototype),"addCross",this).call(this,e,n)}},{key:"toSymmetricMatrix",value:function(){return new _t(this)}},{key:"clone",value:function(){var e=new i(this.diagonalSize),n=w(this.upperRightEntries()),c;try{for(n.s();!(c=n.n()).done;){var E=h(c.value,3),y=E[0],b=E[1],et=E[2];y!==b&&e.set(y,b,et)}}catch(nt){n.e(nt)}finally{n.f()}return e}},{key:"toCompact",value:function(){for(var e=this.diagonalSize,n=(e-1)*e/2,c=new Array(n),E=1,y=0,b=0;b<c.length;b++)c[b]=this.get(y,E),++E>=e&&(E=++y+1);return c}}],[{key:"isDistanceMatrix",value:function(e){return _t.isSymmetricMatrix(e)&&e.klassSubType==="DistanceMatrix"}},{key:"fromCompact",value:function(e){var n=e.length;if(n===0)return new this(0);var c=(Math.sqrt(8*n+1)+1)/2;if(!Number.isInteger(c))throw new TypeError("This array is not a compact representation of a DistanceMatrix, ".concat(JSON.stringify(e)));for(var E=new this(c),y=1,b=0,et=0;et<n;et++)E.set(y,b,e[et]),++y>=c&&(y=++b+1);return E}}]),i}(_t);ke.prototype.klassSubType="DistanceMatrix";var be=function(v){g(i,v);var x=r(i);function i(t,e,n){var c;return L(this,i),c=x.call(this),c.matrix=t,c.rows=e,c.columns=n,c}return G(i)}(Jt),kn=function(v){g(i,v);var x=r(i);function i(t,e){var n;return L(this,i),C(t,e),n=x.call(this,t,t.rows,1),n.column=e,n}return G(i,[{key:"set",value:function(e,n,c){return this.matrix.set(e,this.column,c),this}},{key:"get",value:function(e){return this.matrix.get(e,this.column)}}]),i}(be),bn=function(v){g(i,v);var x=r(i);function i(t,e){var n;return L(this,i),st(t,e),n=x.call(this,t,t.rows,e.length),n.columnIndices=e,n}return G(i,[{key:"set",value:function(e,n,c){return this.matrix.set(e,this.columnIndices[n],c),this}},{key:"get",value:function(e,n){return this.matrix.get(e,this.columnIndices[n])}}]),i}(be),Cn=function(v){g(i,v);var x=r(i);function i(t){return L(this,i),x.call(this,t,t.rows,t.columns)}return G(i,[{key:"set",value:function(e,n,c){return this.matrix.set(e,this.columns-n-1,c),this}},{key:"get",value:function(e,n){return this.matrix.get(e,this.columns-n-1)}}]),i}(be),Nn=function(v){g(i,v);var x=r(i);function i(t){return L(this,i),x.call(this,t,t.rows,t.columns)}return G(i,[{key:"set",value:function(e,n,c){return this.matrix.set(this.rows-e-1,n,c),this}},{key:"get",value:function(e,n){return this.matrix.get(this.rows-e-1,n)}}]),i}(be),Tn=function(v){g(i,v);var x=r(i);function i(t,e){var n;return L(this,i),Y(t,e),n=x.call(this,t,1,t.columns),n.row=e,n}return G(i,[{key:"set",value:function(e,n,c){return this.matrix.set(this.row,n,c),this}},{key:"get",value:function(e,n){return this.matrix.get(this.row,n)}}]),i}(be),zn=function(v){g(i,v);var x=r(i);function i(t,e){var n;return L(this,i),ot(t,e),n=x.call(this,t,e.length,t.columns),n.rowIndices=e,n}return G(i,[{key:"set",value:function(e,n,c){return this.matrix.set(this.rowIndices[e],n,c),this}},{key:"get",value:function(e,n){return this.matrix.get(this.rowIndices[e],n)}}]),i}(be),sn=function(v){g(i,v);var x=r(i);function i(t,e,n){var c;return L(this,i),ot(t,e),st(t,n),c=x.call(this,t,e.length,n.length),c.rowIndices=e,c.columnIndices=n,c}return G(i,[{key:"set",value:function(e,n,c){return this.matrix.set(this.rowIndices[e],this.columnIndices[n],c),this}},{key:"get",value:function(e,n){return this.matrix.get(this.rowIndices[e],this.columnIndices[n])}}]),i}(be),Mn=function(v){g(i,v);var x=r(i);function i(t,e,n,c,E){var y;return L(this,i),it(t,e,n,c,E),y=x.call(this,t,n-e+1,E-c+1),y.startRow=e,y.startColumn=c,y}return G(i,[{key:"set",value:function(e,n,c){return this.matrix.set(this.startRow+e,this.startColumn+n,c),this}},{key:"get",value:function(e,n){return this.matrix.get(this.startRow+e,this.startColumn+n)}}]),i}(be),Sn=function(v){g(i,v);var x=r(i);function i(t){return L(this,i),x.call(this,t,t.columns,t.rows)}return G(i,[{key:"set",value:function(e,n,c){return this.matrix.set(n,e,c),this}},{key:"get",value:function(e,n){return this.matrix.get(n,e)}}]),i}(be),on=function(v){g(i,v);var x=r(i);function i(t){var e,n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};L(this,i);var c=n.rows,E=c===void 0?1:c;if(t.length%E!==0)throw new Error("the data length is not divisible by the number of rows");return e=x.call(this),e.rows=E,e.columns=t.length/E,e.data=t,e}return G(i,[{key:"set",value:function(e,n,c){var E=this._calculateIndex(e,n);return this.data[E]=c,this}},{key:"get",value:function(e,n){var c=this._calculateIndex(e,n);return this.data[c]}},{key:"_calculateIndex",value:function(e,n){return e*this.columns+n}}]),i}(Jt),Ne=function(v){g(i,v);var x=r(i);function i(t){var e;return L(this,i),e=x.call(this),e.data=t,e.rows=t.length,e.columns=t[0].length,e}return G(i,[{key:"set",value:function(e,n,c){return this.data[e][n]=c,this}},{key:"get",value:function(e,n){return this.data[e][n]}}]),i}(Jt);function Fn(v,x){if(K.isAnyArray(v))return v[0]&&K.isAnyArray(v[0])?new Ne(v):new on(v,x);throw new Error("the argument is not an array")}var an=function(){function v(x){L(this,v),x=Ne.checkMatrix(x);var i=x.clone(),t=i.rows,e=i.columns,n=new Float64Array(t),c=1,E,y,b,et,nt,ht,Mt,vt,It;for(E=0;E<t;E++)n[E]=E;for(vt=new Float64Array(t),y=0;y<e;y++){for(E=0;E<t;E++)vt[E]=i.get(E,y);for(E=0;E<t;E++){for(It=Math.min(E,y),nt=0,b=0;b<It;b++)nt+=i.get(E,b)*vt[b];vt[E]-=nt,i.set(E,y,vt[E])}for(et=y,E=y+1;E<t;E++)Math.abs(vt[E])>Math.abs(vt[et])&&(et=E);if(et!==y){for(b=0;b<e;b++)ht=i.get(et,b),i.set(et,b,i.get(y,b)),i.set(y,b,ht);Mt=n[et],n[et]=n[y],n[y]=Mt,c=-c}if(y<t&&i.get(y,y)!==0)for(E=y+1;E<t;E++)i.set(E,y,i.get(E,y)/i.get(y,y))}this.LU=i,this.pivotVector=n,this.pivotSign=c}return G(v,[{key:"isSingular",value:function(){for(var i=this.LU,t=i.columns,e=0;e<t;e++)if(i.get(e,e)===0)return!0;return!1}},{key:"solve",value:function(i){i=Pt.checkMatrix(i);var t=this.LU,e=t.rows;if(e!==i.rows)throw new Error("Invalid matrix dimensions");if(this.isSingular())throw new Error("LU matrix is singular");var n=i.columns,c=i.subMatrixRow(this.pivotVector,0,n-1),E=t.columns,y,b,et;for(et=0;et<E;et++)for(y=et+1;y<E;y++)for(b=0;b<n;b++)c.set(y,b,c.get(y,b)-c.get(et,b)*t.get(y,et));for(et=E-1;et>=0;et--){for(b=0;b<n;b++)c.set(et,b,c.get(et,b)/t.get(et,et));for(y=0;y<et;y++)for(b=0;b<n;b++)c.set(y,b,c.get(y,b)-c.get(et,b)*t.get(y,et))}return c}},{key:"determinant",get:function(){var i=this.LU;if(!i.isSquare())throw new Error("Matrix must be square");for(var t=this.pivotSign,e=i.columns,n=0;n<e;n++)t*=i.get(n,n);return t}},{key:"lowerTriangularMatrix",get:function(){for(var i=this.LU,t=i.rows,e=i.columns,n=new Pt(t,e),c=0;c<t;c++)for(var E=0;E<e;E++)c>E?n.set(c,E,i.get(c,E)):c===E?n.set(c,E,1):n.set(c,E,0);return n}},{key:"upperTriangularMatrix",get:function(){for(var i=this.LU,t=i.rows,e=i.columns,n=new Pt(t,e),c=0;c<t;c++)for(var E=0;E<e;E++)c<=E?n.set(c,E,i.get(c,E)):n.set(c,E,0);return n}},{key:"pivotPermutationVector",get:function(){return Array.from(this.pivotVector)}}]),v}();function Ce(v,x){var i=0;return Math.abs(v)>Math.abs(x)?(i=x/v,Math.abs(v)*Math.sqrt(1+i*i)):x!==0?(i=v/x,Math.abs(x)*Math.sqrt(1+i*i)):0}var un=function(){function v(x){L(this,v),x=Ne.checkMatrix(x);var i=x.clone(),t=x.rows,e=x.columns,n=new Float64Array(e),c,E,y,b;for(y=0;y<e;y++){var et=0;for(c=y;c<t;c++)et=Ce(et,i.get(c,y));if(et!==0){for(i.get(y,y)<0&&(et=-et),c=y;c<t;c++)i.set(c,y,i.get(c,y)/et);for(i.set(y,y,i.get(y,y)+1),E=y+1;E<e;E++){for(b=0,c=y;c<t;c++)b+=i.get(c,y)*i.get(c,E);for(b=-b/i.get(y,y),c=y;c<t;c++)i.set(c,E,i.get(c,E)+b*i.get(c,y))}}n[y]=-et}this.QR=i,this.Rdiag=n}return G(v,[{key:"solve",value:function(i){i=Pt.checkMatrix(i);var t=this.QR,e=t.rows;if(i.rows!==e)throw new Error("Matrix row dimensions must agree");if(!this.isFullRank())throw new Error("Matrix is rank deficient");var n=i.columns,c=i.clone(),E=t.columns,y,b,et,nt;for(et=0;et<E;et++)for(b=0;b<n;b++){for(nt=0,y=et;y<e;y++)nt+=t.get(y,et)*c.get(y,b);for(nt=-nt/t.get(et,et),y=et;y<e;y++)c.set(y,b,c.get(y,b)+nt*t.get(y,et))}for(et=E-1;et>=0;et--){for(b=0;b<n;b++)c.set(et,b,c.get(et,b)/this.Rdiag[et]);for(y=0;y<et;y++)for(b=0;b<n;b++)c.set(y,b,c.get(y,b)-c.get(et,b)*t.get(y,et))}return c.subMatrix(0,E-1,0,n-1)}},{key:"isFullRank",value:function(){for(var i=this.QR.columns,t=0;t<i;t++)if(this.Rdiag[t]===0)return!1;return!0}},{key:"upperTriangularMatrix",get:function(){var i=this.QR,t=i.columns,e=new Pt(t,t),n,c;for(n=0;n<t;n++)for(c=0;c<t;c++)n<c?e.set(n,c,i.get(n,c)):n===c?e.set(n,c,this.Rdiag[n]):e.set(n,c,0);return e}},{key:"orthogonalMatrix",get:function(){var i=this.QR,t=i.rows,e=i.columns,n=new Pt(t,e),c,E,y,b;for(y=e-1;y>=0;y--){for(c=0;c<t;c++)n.set(c,y,0);for(n.set(y,y,1),E=y;E<e;E++)if(i.get(y,y)!==0){for(b=0,c=y;c<t;c++)b+=i.get(c,y)*n.get(c,E);for(b=-b/i.get(y,y),c=y;c<t;c++)n.set(c,E,n.get(c,E)+b*i.get(c,y))}}return n}}]),v}(),Ge=function(){function v(x){var i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(L(this,v),x=Ne.checkMatrix(x),x.isEmpty())throw new Error("Matrix must be non-empty");var t=x.rows,e=x.columns,n=i.computeLeftSingularVectors,c=n===void 0?!0:n,E=i.computeRightSingularVectors,y=E===void 0?!0:E,b=i.autoTranspose,et=b===void 0?!1:b,nt=!!c,ht=!!y,Mt=!1,vt;if(t<e)if(!et)vt=x.clone(),console.warn("Computing SVD on a matrix with more columns than rows. Consider enabling autoTranspose");else{vt=x.transpose(),t=vt.rows,e=vt.columns,Mt=!0;var It=nt;nt=ht,ht=It}else vt=x.clone();for(var Ut=Math.min(t,e),ut=Math.min(t+1,e),mt=new Float64Array(ut),Ot=new Pt(t,Ut),Ct=new Pt(e,e),Rt=new Float64Array(e),Qt=new Float64Array(t),qt=new Float64Array(ut),Bt=0;Bt<ut;Bt++)qt[Bt]=Bt;for(var $t=Math.min(t-1,e),te=Math.max(0,Math.min(e-2,t)),le=Math.max($t,te),Lt=0;Lt<le;Lt++){if(Lt<$t){mt[Lt]=0;for(var we=Lt;we<t;we++)mt[Lt]=Ce(mt[Lt],vt.get(we,Lt));if(mt[Lt]!==0){vt.get(Lt,Lt)<0&&(mt[Lt]=-mt[Lt]);for(var ge=Lt;ge<t;ge++)vt.set(ge,Lt,vt.get(ge,Lt)/mt[Lt]);vt.set(Lt,Lt,vt.get(Lt,Lt)+1)}mt[Lt]=-mt[Lt]}for(var jt=Lt+1;jt<e;jt++){if(Lt<$t&&mt[Lt]!==0){for(var Fe=0,Be=Lt;Be<t;Be++)Fe+=vt.get(Be,Lt)*vt.get(Be,jt);Fe=-Fe/vt.get(Lt,Lt);for(var ae=Lt;ae<t;ae++)vt.set(ae,jt,vt.get(ae,jt)+Fe*vt.get(ae,Lt))}Rt[jt]=vt.get(Lt,jt)}if(nt&&Lt<$t)for(var Te=Lt;Te<t;Te++)Ot.set(Te,Lt,vt.get(Te,Lt));if(Lt<te){Rt[Lt]=0;for(var Me=Lt+1;Me<e;Me++)Rt[Lt]=Ce(Rt[Lt],Rt[Me]);if(Rt[Lt]!==0){Rt[Lt+1]<0&&(Rt[Lt]=0-Rt[Lt]);for(var Le=Lt+1;Le<e;Le++)Rt[Le]/=Rt[Lt];Rt[Lt+1]+=1}if(Rt[Lt]=-Rt[Lt],Lt+1<t&&Rt[Lt]!==0){for(var ce=Lt+1;ce<t;ce++)Qt[ce]=0;for(var Ze=Lt+1;Ze<t;Ze++)for(var Ye=Lt+1;Ye<e;Ye++)Qt[Ze]+=Rt[Ye]*vt.get(Ze,Ye);for(var Ke=Lt+1;Ke<e;Ke++)for(var wn=-Rt[Ke]/Rt[Lt+1],$e=Lt+1;$e<t;$e++)vt.set($e,Ke,vt.get($e,Ke)+wn*Qt[$e])}if(ht)for(var qe=Lt+1;qe<e;qe++)Ct.set(qe,Lt,Rt[qe])}}var Ht=Math.min(e,t+1);if($t<e&&(mt[$t]=vt.get($t,$t)),t<Ht&&(mt[Ht-1]=0),te+1<Ht&&(Rt[te]=vt.get(te,Ht-1)),Rt[Ht-1]=0,nt){for(var Ue=$t;Ue<Ut;Ue++){for(var Xe=0;Xe<t;Xe++)Ot.set(Xe,Ue,0);Ot.set(Ue,Ue,1)}for(var ee=$t-1;ee>=0;ee--)if(mt[ee]!==0){for(var Je=ee+1;Je<Ut;Je++){for(var je=0,_e=ee;_e<t;_e++)je+=Ot.get(_e,ee)*Ot.get(_e,Je);je=-je/Ot.get(ee,ee);for(var Qe=ee;Qe<t;Qe++)Ot.set(Qe,Je,Ot.get(Qe,Je)+je*Ot.get(Qe,ee))}for(var u=ee;u<t;u++)Ot.set(u,ee,-Ot.get(u,ee));Ot.set(ee,ee,1+Ot.get(ee,ee));for(var l=0;l<ee-1;l++)Ot.set(l,ee,0)}else{for(var p=0;p<t;p++)Ot.set(p,ee,0);Ot.set(ee,ee,1)}}if(ht)for(var R=e-1;R>=0;R--){if(R<te&&Rt[R]!==0)for(var A=R+1;A<e;A++){for(var B=0,Q=R+1;Q<e;Q++)B+=Ct.get(Q,R)*Ct.get(Q,A);B=-B/Ct.get(R+1,R);for(var H=R+1;H<e;H++)Ct.set(H,A,Ct.get(H,A)+B*Ct.get(H,R))}for(var q=0;q<e;q++)Ct.set(q,R,0);Ct.set(R,R,1)}for(var rt=Ht-1,dt=Number.EPSILON;Ht>0;){var ft=void 0,Dt=void 0;for(ft=Ht-2;ft>=-1&&ft!==-1;ft--){var At=Number.MIN_VALUE+dt*Math.abs(mt[ft]+Math.abs(mt[ft+1]));if(Math.abs(Rt[ft])<=At||Number.isNaN(Rt[ft])){Rt[ft]=0;break}}if(ft===Ht-2)Dt=4;else{var kt=void 0;for(kt=Ht-1;kt>=ft&&kt!==ft;kt--){var Vt=(kt!==Ht?Math.abs(Rt[kt]):0)+(kt!==ft+1?Math.abs(Rt[kt-1]):0);if(Math.abs(mt[kt])<=dt*Vt){mt[kt]=0;break}}kt===ft?Dt=3:kt===Ht-1?Dt=1:(Dt=2,ft=kt)}switch(ft++,Dt){case 1:{var Wt=Rt[Ht-2];Rt[Ht-2]=0;for(var Ft=Ht-2;Ft>=ft;Ft--){var Xt=Ce(mt[Ft],Wt),ue=mt[Ft]/Xt,ne=Wt/Xt;if(mt[Ft]=Xt,Ft!==ft&&(Wt=-ne*Rt[Ft-1],Rt[Ft-1]=ue*Rt[Ft-1]),ht)for(var ze=0;ze<e;ze++)Xt=ue*Ct.get(ze,Ft)+ne*Ct.get(ze,Ht-1),Ct.set(ze,Ht-1,-ne*Ct.get(ze,Ft)+ue*Ct.get(ze,Ht-1)),Ct.set(ze,Ft,Xt)}break}case 2:{var hn=Rt[ft-1];Rt[ft-1]=0;for(var Oe=ft;Oe<Ht;Oe++){var tn=Ce(mt[Oe],hn),En=mt[Oe]/tn,fn=hn/tn;if(mt[Oe]=tn,hn=-fn*Rt[Oe],Rt[Oe]=En*Rt[Oe],nt)for(var Ve=0;Ve<t;Ve++)tn=En*Ot.get(Ve,Oe)+fn*Ot.get(Ve,ft-1),Ot.set(Ve,ft-1,-fn*Ot.get(Ve,Oe)+En*Ot.get(Ve,ft-1)),Ot.set(Ve,Oe,tn)}break}case 3:{var en=Math.max(Math.abs(mt[Ht-1]),Math.abs(mt[Ht-2]),Math.abs(Rt[Ht-2]),Math.abs(mt[ft]),Math.abs(Rt[ft])),Ie=mt[Ht-1]/en,rn=mt[Ht-2]/en,nn=Rt[Ht-2]/en,ln=mt[ft]/en,Xn=Rt[ft]/en,Yt=((rn+Ie)*(rn-Ie)+nn*nn)/2,ve=Ie*nn*(Ie*nn),Ee=0;(Yt!==0||ve!==0)&&(Yt<0?Ee=0-Math.sqrt(Yt*Yt+ve):Ee=Math.sqrt(Yt*Yt+ve),Ee=ve/(Yt+Ee));for(var Se=(ln+Ie)*(ln-Ie)+Ee,xe=ln*Xn,Kt=ft;Kt<Ht-1;Kt++){var Gt=Ce(Se,xe);Gt===0&&(Gt=Number.MIN_VALUE);var re=Se/Gt,de=xe/Gt;if(Kt!==ft&&(Rt[Kt-1]=Gt),Se=re*mt[Kt]+de*Rt[Kt],Rt[Kt]=re*Rt[Kt]-de*mt[Kt],xe=de*mt[Kt+1],mt[Kt+1]=re*mt[Kt+1],ht)for(var Re=0;Re<e;Re++)Gt=re*Ct.get(Re,Kt)+de*Ct.get(Re,Kt+1),Ct.set(Re,Kt+1,-de*Ct.get(Re,Kt)+re*Ct.get(Re,Kt+1)),Ct.set(Re,Kt,Gt);if(Gt=Ce(Se,xe),Gt===0&&(Gt=Number.MIN_VALUE),re=Se/Gt,de=xe/Gt,mt[Kt]=Gt,Se=re*Rt[Kt]+de*mt[Kt+1],mt[Kt+1]=-de*Rt[Kt]+re*mt[Kt+1],xe=de*Rt[Kt+1],Rt[Kt+1]=re*Rt[Kt+1],nt&&Kt<t-1)for(var De=0;De<t;De++)Gt=re*Ot.get(De,Kt)+de*Ot.get(De,Kt+1),Ot.set(De,Kt+1,-de*Ot.get(De,Kt)+re*Ot.get(De,Kt+1)),Ot.set(De,Kt,Gt)}Rt[Ht-2]=Se;break}case 4:{if(mt[ft]<=0&&(mt[ft]=mt[ft]<0?-mt[ft]:0,ht))for(var We=0;We<=rt;We++)Ct.set(We,ft,-Ct.get(We,ft));for(;ft<rt&&!(mt[ft]>=mt[ft+1]);){var xn=mt[ft];if(mt[ft]=mt[ft+1],mt[ft+1]=xn,ht&&ft<e-1)for(var gn=0;gn<e;gn++)xn=Ct.get(gn,ft+1),Ct.set(gn,ft+1,Ct.get(gn,ft)),Ct.set(gn,ft,xn);if(nt&&ft<t-1)for(var vn=0;vn<t;vn++)xn=Ot.get(vn,ft+1),Ot.set(vn,ft+1,Ot.get(vn,ft)),Ot.set(vn,ft,xn);ft++}Ht--;break}}}if(Mt){var Qn=Ct;Ct=Ot,Ot=Qn}this.m=t,this.n=e,this.s=mt,this.U=Ot,this.V=Ct}return G(v,[{key:"solve",value:function(i){for(var t=i,e=this.threshold,n=this.s.length,c=Pt.zeros(n,n),E=0;E<n;E++)Math.abs(this.s[E])<=e?c.set(E,E,0):c.set(E,E,1/this.s[E]);for(var y=this.U,b=this.rightSingularVectors,et=b.mmul(c),nt=b.rows,ht=y.rows,Mt=Pt.zeros(nt,ht),vt=0;vt<nt;vt++)for(var It=0;It<ht;It++){for(var Ut=0,ut=0;ut<n;ut++)Ut+=et.get(vt,ut)*y.get(It,ut);Mt.set(vt,It,Ut)}return Mt.mmul(t)}},{key:"solveForDiagonal",value:function(i){return this.solve(Pt.diag(i))}},{key:"inverse",value:function(){for(var i=this.V,t=this.threshold,e=i.rows,n=i.columns,c=new Pt(e,this.s.length),E=0;E<e;E++)for(var y=0;y<n;y++)Math.abs(this.s[y])>t&&c.set(E,y,i.get(E,y)/this.s[y]);for(var b=this.U,et=b.rows,nt=b.columns,ht=new Pt(e,et),Mt=0;Mt<e;Mt++)for(var vt=0;vt<et;vt++){for(var It=0,Ut=0;Ut<nt;Ut++)It+=c.get(Mt,Ut)*b.get(vt,Ut);ht.set(Mt,vt,It)}return ht}},{key:"condition",get:function(){return this.s[0]/this.s[Math.min(this.m,this.n)-1]}},{key:"norm2",get:function(){return this.s[0]}},{key:"rank",get:function(){for(var i=Math.max(this.m,this.n)*this.s[0]*Number.EPSILON,t=0,e=this.s,n=0,c=e.length;n<c;n++)e[n]>i&&t++;return t}},{key:"diagonal",get:function(){return Array.from(this.s)}},{key:"threshold",get:function(){return Number.EPSILON/2*Math.max(this.m,this.n)*this.s[0]}},{key:"leftSingularVectors",get:function(){return this.U}},{key:"rightSingularVectors",get:function(){return this.V}},{key:"diagonalMatrix",get:function(){return Pt.diag(this.s)}}]),v}();function Bn(v){var x=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;return v=Ne.checkMatrix(v),x?new Ge(v).inverse():mn(v,Pt.eye(v.rows))}function mn(v,x){var i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1;return v=Ne.checkMatrix(v),x=Ne.checkMatrix(x),i?new Ge(v).solve(x):v.isSquare()?new an(v).solve(x):new un(v).solve(x)}function dn(v){if(v=Pt.checkMatrix(v),v.isSquare()){if(v.columns===0)return 1;var x,i,t,e;if(v.columns===2)return x=v.get(0,0),i=v.get(0,1),t=v.get(1,0),e=v.get(1,1),x*e-i*t;if(v.columns===3){var n,c,E;return n=new sn(v,[1,2],[1,2]),c=new sn(v,[1,2],[0,2]),E=new sn(v,[1,2],[0,1]),x=v.get(0,0),i=v.get(0,1),t=v.get(0,2),x*dn(n)-i*dn(c)+t*dn(E)}else return new an(v).determinant}else throw Error("determinant can only be calculated for a square matrix")}function On(v,x){for(var i=[],t=0;t<v;t++)t!==x&&i.push(t);return i}function Rn(v,x,i){var t=arguments.length>3&&arguments[3]!==void 0?arguments[3]:1e-9,e=arguments.length>4&&arguments[4]!==void 0?arguments[4]:1e-9;if(v>e)return new Array(x.rows+1).fill(0);for(var n=x.addRow(i,[0]),c=0;c<n.rows;c++)Math.abs(n.get(c,0))<t&&n.set(c,0,0);return n.to1DArray()}function Un(v){var x=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},i=x.thresholdValue,t=i===void 0?1e-9:i,e=x.thresholdError,n=e===void 0?1e-9:e;v=Pt.checkMatrix(v);for(var c=v.rows,E=new Pt(c,c),y=0;y<c;y++){var b=Pt.columnVector(v.getRow(y)),et=v.subMatrixRow(On(c,y)).transpose(),nt=new Ge(et),ht=nt.solve(b),Mt=Pt.sub(b,et.mmul(ht)).abs().max();E.setRow(y,Rn(Mt,ht,y,t,n))}return E}function Dn(v){var x=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Number.EPSILON;if(v=Pt.checkMatrix(v),v.isEmpty())return v.transpose();for(var i=new Ge(v,{autoTranspose:!0}),t=i.leftSingularVectors,e=i.rightSingularVectors,n=i.diagonal,c=0;c<n.length;c++)Math.abs(n[c])>x?n[c]=1/n[c]:n[c]=0;return e.mmul(Pt.diag(n).mmul(t.transpose()))}function In(v){var x=arguments.length>1&&arguments[1]!==void 0?arguments[1]:v,i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};v=new Pt(v);var t=!1;if(Z(x)==="object"&&!Pt.isMatrix(x)&&!K.isAnyArray(x)?(i=x,x=v,t=!0):x=new Pt(x),v.rows!==x.rows)throw new TypeError("Both matrices must have the same number of rows");var e=i,n=e.center,c=n===void 0?!0:n;c&&(v=v.center("column"),t||(x=x.center("column")));for(var E=v.transpose().mmul(x),y=0;y<E.rows;y++)for(var b=0;b<E.columns;b++)E.set(y,b,E.get(y,b)*(1/(v.rows-1)));return E}function Pn(v){var x=arguments.length>1&&arguments[1]!==void 0?arguments[1]:v,i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};v=new Pt(v);var t=!1;if(Z(x)==="object"&&!Pt.isMatrix(x)&&!K.isAnyArray(x)?(i=x,x=v,t=!0):x=new Pt(x),v.rows!==x.rows)throw new TypeError("Both matrices must have the same number of rows");var e=i,n=e.center,c=n===void 0?!0:n,E=e.scale,y=E===void 0?!0:E;c&&(v.center("column"),t||x.center("column")),y&&(v.scale("column"),t||x.scale("column"));for(var b=v.standardDeviation("column",{unbiased:!0}),et=t?b:x.standardDeviation("column",{unbiased:!0}),nt=v.transpose().mmul(x),ht=0;ht<nt.rows;ht++)for(var Mt=0;Mt<nt.columns;Mt++)nt.set(ht,Mt,nt.get(ht,Mt)*(1/(b[ht]*et[Mt]))*(1/(v.rows-1)));return nt}var Vn=function(){function v(x){var i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};L(this,v);var t=i.assumeSymmetric,e=t===void 0?!1:t;if(x=Ne.checkMatrix(x),!x.isSquare())throw new Error("Matrix is not a square matrix");if(x.isEmpty())throw new Error("Matrix must be non-empty");var n=x.columns,c=new Pt(n,n),E=new Float64Array(n),y=new Float64Array(n),b=x,et,nt,ht=!1;if(e?ht=!0:ht=x.isSymmetric(),ht){for(et=0;et<n;et++)for(nt=0;nt<n;nt++)c.set(et,nt,b.get(et,nt));Wn(n,y,E,c),Gn(n,y,E,c)}else{var Mt=new Pt(n,n),vt=new Float64Array(n);for(nt=0;nt<n;nt++)for(et=0;et<n;et++)Mt.set(et,nt,b.get(et,nt));Zn(n,Mt,vt,c),Yn(n,y,E,c,Mt)}this.n=n,this.e=y,this.d=E,this.V=c}return G(v,[{key:"realEigenvalues",get:function(){return Array.from(this.d)}},{key:"imaginaryEigenvalues",get:function(){return Array.from(this.e)}},{key:"eigenvectorMatrix",get:function(){return this.V}},{key:"diagonalMatrix",get:function(){var i=this.n,t=this.e,e=this.d,n=new Pt(i,i),c,E;for(c=0;c<i;c++){for(E=0;E<i;E++)n.set(c,E,0);n.set(c,c,e[c]),t[c]>0?n.set(c,c+1,t[c]):t[c]<0&&n.set(c,c-1,t[c])}return n}}]),v}();function Wn(v,x,i,t){var e,n,c,E,y,b,et,nt;for(y=0;y<v;y++)i[y]=t.get(v-1,y);for(E=v-1;E>0;E--){for(nt=0,c=0,b=0;b<E;b++)nt=nt+Math.abs(i[b]);if(nt===0)for(x[E]=i[E-1],y=0;y<E;y++)i[y]=t.get(E-1,y),t.set(E,y,0),t.set(y,E,0);else{for(b=0;b<E;b++)i[b]/=nt,c+=i[b]*i[b];for(e=i[E-1],n=Math.sqrt(c),e>0&&(n=-n),x[E]=nt*n,c=c-e*n,i[E-1]=e-n,y=0;y<E;y++)x[y]=0;for(y=0;y<E;y++){for(e=i[y],t.set(y,E,e),n=x[y]+t.get(y,y)*e,b=y+1;b<=E-1;b++)n+=t.get(b,y)*i[b],x[b]+=t.get(b,y)*e;x[y]=n}for(e=0,y=0;y<E;y++)x[y]/=c,e+=x[y]*i[y];for(et=e/(c+c),y=0;y<E;y++)x[y]-=et*i[y];for(y=0;y<E;y++){for(e=i[y],n=x[y],b=y;b<=E-1;b++)t.set(b,y,t.get(b,y)-(e*x[b]+n*i[b]));i[y]=t.get(E-1,y),t.set(E,y,0)}}i[E]=c}for(E=0;E<v-1;E++){if(t.set(v-1,E,t.get(E,E)),t.set(E,E,1),c=i[E+1],c!==0){for(b=0;b<=E;b++)i[b]=t.get(b,E+1)/c;for(y=0;y<=E;y++){for(n=0,b=0;b<=E;b++)n+=t.get(b,E+1)*t.get(b,y);for(b=0;b<=E;b++)t.set(b,y,t.get(b,y)-n*i[b])}}for(b=0;b<=E;b++)t.set(b,E+1,0)}for(y=0;y<v;y++)i[y]=t.get(v-1,y),t.set(v-1,y,0);t.set(v-1,v-1,1),x[0]=0}function Gn(v,x,i,t){var e,n,c,E,y,b,et,nt,ht,Mt,vt,It,Ut,ut,mt,Ot;for(c=1;c<v;c++)x[c-1]=x[c];x[v-1]=0;var Ct=0,Rt=0,Qt=Number.EPSILON;for(b=0;b<v;b++){for(Rt=Math.max(Rt,Math.abs(i[b])+Math.abs(x[b])),et=b;et<v&&!(Math.abs(x[et])<=Qt*Rt);)et++;if(et>b)do{for(e=i[b],nt=(i[b+1]-e)/(2*x[b]),ht=Ce(nt,1),nt<0&&(ht=-ht),i[b]=x[b]/(nt+ht),i[b+1]=x[b]*(nt+ht),Mt=i[b+1],n=e-i[b],c=b+2;c<v;c++)i[c]-=n;for(Ct=Ct+n,nt=i[et],vt=1,It=vt,Ut=vt,ut=x[b+1],mt=0,Ot=0,c=et-1;c>=b;c--)for(Ut=It,It=vt,Ot=mt,e=vt*x[c],n=vt*nt,ht=Ce(nt,x[c]),x[c+1]=mt*ht,mt=x[c]/ht,vt=nt/ht,nt=vt*i[c]-mt*e,i[c+1]=n+mt*(vt*e+mt*i[c]),y=0;y<v;y++)n=t.get(y,c+1),t.set(y,c+1,mt*t.get(y,c)+vt*n),t.set(y,c,vt*t.get(y,c)-mt*n);nt=-mt*Ot*Ut*ut*x[b]/Mt,x[b]=mt*nt,i[b]=vt*nt}while(Math.abs(x[b])>Qt*Rt);i[b]=i[b]+Ct,x[b]=0}for(c=0;c<v-1;c++){for(y=c,nt=i[c],E=c+1;E<v;E++)i[E]<nt&&(y=E,nt=i[E]);if(y!==c)for(i[y]=i[c],i[c]=nt,E=0;E<v;E++)nt=t.get(E,c),t.set(E,c,t.get(E,y)),t.set(E,y,nt)}}function Zn(v,x,i,t){var e=0,n=v-1,c,E,y,b,et,nt,ht;for(nt=e+1;nt<=n-1;nt++){for(ht=0,b=nt;b<=n;b++)ht=ht+Math.abs(x.get(b,nt-1));if(ht!==0){for(y=0,b=n;b>=nt;b--)i[b]=x.get(b,nt-1)/ht,y+=i[b]*i[b];for(E=Math.sqrt(y),i[nt]>0&&(E=-E),y=y-i[nt]*E,i[nt]=i[nt]-E,et=nt;et<v;et++){for(c=0,b=n;b>=nt;b--)c+=i[b]*x.get(b,et);for(c=c/y,b=nt;b<=n;b++)x.set(b,et,x.get(b,et)-c*i[b])}for(b=0;b<=n;b++){for(c=0,et=n;et>=nt;et--)c+=i[et]*x.get(b,et);for(c=c/y,et=nt;et<=n;et++)x.set(b,et,x.get(b,et)-c*i[et])}i[nt]=ht*i[nt],x.set(nt,nt-1,ht*E)}}for(b=0;b<v;b++)for(et=0;et<v;et++)t.set(b,et,b===et?1:0);for(nt=n-1;nt>=e+1;nt--)if(x.get(nt,nt-1)!==0){for(b=nt+1;b<=n;b++)i[b]=x.get(b,nt-1);for(et=nt;et<=n;et++){for(E=0,b=nt;b<=n;b++)E+=i[b]*t.get(b,et);for(E=E/i[nt]/x.get(nt,nt-1),b=nt;b<=n;b++)t.set(b,et,t.get(b,et)+E*i[b])}}}function Yn(v,x,i,t,e){var n=v-1,c=0,E=v-1,y=Number.EPSILON,b=0,et=0,nt=0,ht=0,Mt=0,vt=0,It=0,Ut=0,ut,mt,Ot,Ct,Rt,Qt,qt,Bt,$t,te,le,Lt,we,ge,jt;for(ut=0;ut<v;ut++)for((ut<c||ut>E)&&(i[ut]=e.get(ut,ut),x[ut]=0),mt=Math.max(ut-1,0);mt<v;mt++)et=et+Math.abs(e.get(ut,mt));for(;n>=c;){for(Ct=n;Ct>c&&(vt=Math.abs(e.get(Ct-1,Ct-1))+Math.abs(e.get(Ct,Ct)),vt===0&&(vt=et),!(Math.abs(e.get(Ct,Ct-1))<y*vt));)Ct--;if(Ct===n)e.set(n,n,e.get(n,n)+b),i[n]=e.get(n,n),x[n]=0,n--,Ut=0;else if(Ct===n-1){if(qt=e.get(n,n-1)*e.get(n-1,n),nt=(e.get(n-1,n-1)-e.get(n,n))/2,ht=nt*nt+qt,It=Math.sqrt(Math.abs(ht)),e.set(n,n,e.get(n,n)+b),e.set(n-1,n-1,e.get(n-1,n-1)+b),Bt=e.get(n,n),ht>=0){for(It=nt>=0?nt+It:nt-It,i[n-1]=Bt+It,i[n]=i[n-1],It!==0&&(i[n]=Bt-qt/It),x[n-1]=0,x[n]=0,Bt=e.get(n,n-1),vt=Math.abs(Bt)+Math.abs(It),nt=Bt/vt,ht=It/vt,Mt=Math.sqrt(nt*nt+ht*ht),nt=nt/Mt,ht=ht/Mt,mt=n-1;mt<v;mt++)It=e.get(n-1,mt),e.set(n-1,mt,ht*It+nt*e.get(n,mt)),e.set(n,mt,ht*e.get(n,mt)-nt*It);for(ut=0;ut<=n;ut++)It=e.get(ut,n-1),e.set(ut,n-1,ht*It+nt*e.get(ut,n)),e.set(ut,n,ht*e.get(ut,n)-nt*It);for(ut=c;ut<=E;ut++)It=t.get(ut,n-1),t.set(ut,n-1,ht*It+nt*t.get(ut,n)),t.set(ut,n,ht*t.get(ut,n)-nt*It)}else i[n-1]=Bt+nt,i[n]=Bt+nt,x[n-1]=It,x[n]=-It;n=n-2,Ut=0}else{if(Bt=e.get(n,n),$t=0,qt=0,Ct<n&&($t=e.get(n-1,n-1),qt=e.get(n,n-1)*e.get(n-1,n)),Ut===10){for(b+=Bt,ut=c;ut<=n;ut++)e.set(ut,ut,e.get(ut,ut)-Bt);vt=Math.abs(e.get(n,n-1))+Math.abs(e.get(n-1,n-2)),Bt=$t=.75*vt,qt=-.4375*vt*vt}if(Ut===30&&(vt=($t-Bt)/2,vt=vt*vt+qt,vt>0)){for(vt=Math.sqrt(vt),$t<Bt&&(vt=-vt),vt=Bt-qt/(($t-Bt)/2+vt),ut=c;ut<=n;ut++)e.set(ut,ut,e.get(ut,ut)-vt);b+=vt,Bt=$t=qt=.964}for(Ut=Ut+1,Rt=n-2;Rt>=Ct&&(It=e.get(Rt,Rt),Mt=Bt-It,vt=$t-It,nt=(Mt*vt-qt)/e.get(Rt+1,Rt)+e.get(Rt,Rt+1),ht=e.get(Rt+1,Rt+1)-It-Mt-vt,Mt=e.get(Rt+2,Rt+1),vt=Math.abs(nt)+Math.abs(ht)+Math.abs(Mt),nt=nt/vt,ht=ht/vt,Mt=Mt/vt,!(Rt===Ct||Math.abs(e.get(Rt,Rt-1))*(Math.abs(ht)+Math.abs(Mt))<y*(Math.abs(nt)*(Math.abs(e.get(Rt-1,Rt-1))+Math.abs(It)+Math.abs(e.get(Rt+1,Rt+1))))));)Rt--;for(ut=Rt+2;ut<=n;ut++)e.set(ut,ut-2,0),ut>Rt+2&&e.set(ut,ut-3,0);for(Ot=Rt;Ot<=n-1&&(ge=Ot!==n-1,Ot!==Rt&&(nt=e.get(Ot,Ot-1),ht=e.get(Ot+1,Ot-1),Mt=ge?e.get(Ot+2,Ot-1):0,Bt=Math.abs(nt)+Math.abs(ht)+Math.abs(Mt),Bt!==0&&(nt=nt/Bt,ht=ht/Bt,Mt=Mt/Bt)),Bt!==0);Ot++)if(vt=Math.sqrt(nt*nt+ht*ht+Mt*Mt),nt<0&&(vt=-vt),vt!==0){for(Ot!==Rt?e.set(Ot,Ot-1,-vt*Bt):Ct!==Rt&&e.set(Ot,Ot-1,-e.get(Ot,Ot-1)),nt=nt+vt,Bt=nt/vt,$t=ht/vt,It=Mt/vt,ht=ht/nt,Mt=Mt/nt,mt=Ot;mt<v;mt++)nt=e.get(Ot,mt)+ht*e.get(Ot+1,mt),ge&&(nt=nt+Mt*e.get(Ot+2,mt),e.set(Ot+2,mt,e.get(Ot+2,mt)-nt*It)),e.set(Ot,mt,e.get(Ot,mt)-nt*Bt),e.set(Ot+1,mt,e.get(Ot+1,mt)-nt*$t);for(ut=0;ut<=Math.min(n,Ot+3);ut++)nt=Bt*e.get(ut,Ot)+$t*e.get(ut,Ot+1),ge&&(nt=nt+It*e.get(ut,Ot+2),e.set(ut,Ot+2,e.get(ut,Ot+2)-nt*Mt)),e.set(ut,Ot,e.get(ut,Ot)-nt),e.set(ut,Ot+1,e.get(ut,Ot+1)-nt*ht);for(ut=c;ut<=E;ut++)nt=Bt*t.get(ut,Ot)+$t*t.get(ut,Ot+1),ge&&(nt=nt+It*t.get(ut,Ot+2),t.set(ut,Ot+2,t.get(ut,Ot+2)-nt*Mt)),t.set(ut,Ot,t.get(ut,Ot)-nt),t.set(ut,Ot+1,t.get(ut,Ot+1)-nt*ht)}}}if(et!==0){for(n=v-1;n>=0;n--)if(nt=i[n],ht=x[n],ht===0)for(Ct=n,e.set(n,n,1),ut=n-1;ut>=0;ut--){for(qt=e.get(ut,ut)-nt,Mt=0,mt=Ct;mt<=n;mt++)Mt=Mt+e.get(ut,mt)*e.get(mt,n);if(x[ut]<0)It=qt,vt=Mt;else if(Ct=ut,x[ut]===0?e.set(ut,n,qt!==0?-Mt/qt:-Mt/(y*et)):(Bt=e.get(ut,ut+1),$t=e.get(ut+1,ut),ht=(i[ut]-nt)*(i[ut]-nt)+x[ut]*x[ut],Qt=(Bt*vt-It*Mt)/ht,e.set(ut,n,Qt),e.set(ut+1,n,Math.abs(Bt)>Math.abs(It)?(-Mt-qt*Qt)/Bt:(-vt-$t*Qt)/It)),Qt=Math.abs(e.get(ut,n)),y*Qt*Qt>1)for(mt=ut;mt<=n;mt++)e.set(mt,n,e.get(mt,n)/Qt)}else if(ht<0)for(Ct=n-1,Math.abs(e.get(n,n-1))>Math.abs(e.get(n-1,n))?(e.set(n-1,n-1,ht/e.get(n,n-1)),e.set(n-1,n,-(e.get(n,n)-nt)/e.get(n,n-1))):(jt=cn(0,-e.get(n-1,n),e.get(n-1,n-1)-nt,ht),e.set(n-1,n-1,jt[0]),e.set(n-1,n,jt[1])),e.set(n,n-1,0),e.set(n,n,1),ut=n-2;ut>=0;ut--){for(te=0,le=0,mt=Ct;mt<=n;mt++)te=te+e.get(ut,mt)*e.get(mt,n-1),le=le+e.get(ut,mt)*e.get(mt,n);if(qt=e.get(ut,ut)-nt,x[ut]<0)It=qt,Mt=te,vt=le;else if(Ct=ut,x[ut]===0?(jt=cn(-te,-le,qt,ht),e.set(ut,n-1,jt[0]),e.set(ut,n,jt[1])):(Bt=e.get(ut,ut+1),$t=e.get(ut+1,ut),Lt=(i[ut]-nt)*(i[ut]-nt)+x[ut]*x[ut]-ht*ht,we=(i[ut]-nt)*2*ht,Lt===0&&we===0&&(Lt=y*et*(Math.abs(qt)+Math.abs(ht)+Math.abs(Bt)+Math.abs($t)+Math.abs(It))),jt=cn(Bt*Mt-It*te+ht*le,Bt*vt-It*le-ht*te,Lt,we),e.set(ut,n-1,jt[0]),e.set(ut,n,jt[1]),Math.abs(Bt)>Math.abs(It)+Math.abs(ht)?(e.set(ut+1,n-1,(-te-qt*e.get(ut,n-1)+ht*e.get(ut,n))/Bt),e.set(ut+1,n,(-le-qt*e.get(ut,n)-ht*e.get(ut,n-1))/Bt)):(jt=cn(-Mt-$t*e.get(ut,n-1),-vt-$t*e.get(ut,n),It,ht),e.set(ut+1,n-1,jt[0]),e.set(ut+1,n,jt[1]))),Qt=Math.max(Math.abs(e.get(ut,n-1)),Math.abs(e.get(ut,n))),y*Qt*Qt>1)for(mt=ut;mt<=n;mt++)e.set(mt,n-1,e.get(mt,n-1)/Qt),e.set(mt,n,e.get(mt,n)/Qt)}for(ut=0;ut<v;ut++)if(ut<c||ut>E)for(mt=ut;mt<v;mt++)t.set(ut,mt,e.get(ut,mt));for(mt=v-1;mt>=c;mt--)for(ut=c;ut<=E;ut++){for(It=0,Ot=c;Ot<=Math.min(mt,E);Ot++)It=It+t.get(ut,Ot)*e.get(Ot,mt);t.set(ut,mt,It)}}}function cn(v,x,i,t){var e,n;return Math.abs(i)>Math.abs(t)?(e=t/i,n=i+e*t,[(v+e*x)/n,(x-e*v)/n]):(e=i/t,n=t+e*i,[(e*v+x)/n,(e*x-v)/n])}var yn=function(){function v(x){if(L(this,v),x=Ne.checkMatrix(x),!x.isSymmetric())throw new Error("Matrix is not symmetric");var i=x,t=i.rows,e=new Pt(t,t),n=!0,c,E,y;for(E=0;E<t;E++){var b=0;for(y=0;y<E;y++){var et=0;for(c=0;c<y;c++)et+=e.get(y,c)*e.get(E,c);et=(i.get(E,y)-et)/e.get(y,y),e.set(E,y,et),b=b+et*et}for(b=i.get(E,E)-b,n&&(n=b>0),e.set(E,E,Math.sqrt(Math.max(b,0))),y=E+1;y<t;y++)e.set(E,y,0)}this.L=e,this.positiveDefinite=n}return G(v,[{key:"isPositiveDefinite",value:function(){return this.positiveDefinite}},{key:"solve",value:function(i){i=Ne.checkMatrix(i);var t=this.L,e=t.rows;if(i.rows!==e)throw new Error("Matrix dimensions do not match");if(this.isPositiveDefinite()===!1)throw new Error("Matrix is not positive definite");var n=i.columns,c=i.clone(),E,y,b;for(b=0;b<e;b++)for(y=0;y<n;y++){for(E=0;E<b;E++)c.set(b,y,c.get(b,y)-c.get(E,y)*t.get(b,E));c.set(b,y,c.get(b,y)/t.get(b,b))}for(b=e-1;b>=0;b--)for(y=0;y<n;y++){for(E=b+1;E<e;E++)c.set(b,y,c.get(b,y)-c.get(E,y)*t.get(E,b));c.set(b,y,c.get(b,y)/t.get(b,b))}return c}},{key:"lowerTriangularMatrix",get:function(){return this.L}}]),v}(),Ln=G(function v(x){var i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};L(this,v),x=Ne.checkMatrix(x);var t=i.Y,e=i.scaleScores,n=e===void 0?!1:e,c=i.maxIterations,E=c===void 0?1e3:c,y=i.terminationCriteria,b=y===void 0?1e-10:y,et;if(t){if(K.isAnyArray(t)&&typeof t[0]=="number"?t=Pt.columnVector(t):t=Ne.checkMatrix(t),t.rows!==x.rows)throw new Error("Y should have the same number of rows as X");et=t.getColumnVector(0)}else et=x.getColumnVector(0);for(var nt=1,ht,Mt,vt,It,Ut=0;Ut<E&&nt>b;Ut++)vt=x.transpose().mmul(et).div(et.transpose().mmul(et).get(0,0)),vt=vt.div(vt.norm()),ht=x.mmul(vt).div(vt.transpose().mmul(vt).get(0,0)),Ut>0&&(nt=ht.clone().sub(It).pow(2).sum()),It=ht.clone(),t?(Mt=t.transpose().mmul(ht).div(ht.transpose().mmul(ht).get(0,0)),Mt=Mt.div(Mt.norm()),et=t.mmul(Mt).div(Mt.transpose().mmul(Mt).get(0,0))):et=ht;if(t){var ut=x.transpose().mmul(ht).div(ht.transpose().mmul(ht).get(0,0));ut=ut.div(ut.norm());var mt=x.clone().sub(ht.clone().mmul(ut.transpose())),Ot=et.transpose().mmul(ht).div(ht.transpose().mmul(ht).get(0,0)),Ct=t.clone().sub(ht.clone().mulS(Ot.get(0,0)).mmul(Mt.transpose()));this.t=ht,this.p=ut.transpose(),this.w=vt.transpose(),this.q=Mt,this.u=et,this.s=ht.transpose().mmul(ht),this.xResidual=mt,this.yResidual=Ct,this.betas=Ot}else this.w=vt.transpose(),this.s=ht.transpose().mmul(ht).sqrt(),n?this.t=ht.clone().div(this.s.get(0,0)):this.t=ht,this.xResidual=x.sub(ht.mmul(vt.transpose()))});_.XA=Jt,_.a_=yn,_.yQ=yn,_.Hs=ke,_.Ec=Vn,_.dx=Vn,_.LU=an,_.Rm=an,_.y3=Pt,_.qK=bn,_.pb=kn,_.j=Cn,_.sO=Nn,_.BZ=zn,_.EK=Tn,_.Db=sn,_.Fx=Mn,_.tU=Sn,_.Ym=Ln,_.rs=Ln,_.QR=un,_.TB=un,_.oH=Ge,_.Sc=Ge,_.BN=_t,_.it=on,_.$r=Ne,_.QM=Pn,_.AV=In,s=Pt,_.GH=dn,_.SO=Bn,_.uZ=Un,_.yU=Dn,_.F1=mn,_.re=Fn},6724:function(V,_,a){V.exports={graphlib:a(68509),layout:a(13104),debug:a(36939),util:{time:a(92304).time,notime:a(92304).notime},version:a(90975)}},93143:function(V,_,a){"use strict";var s=a(8217),k=a(23742);V.exports={run:O,undo:m};function O(D){var M=D.graph().acyclicer==="greedy"?k(D,g(D)):T(D);s.forEach(M,function(r){var o=D.edge(r);D.removeEdge(r),o.forwardName=r.name,o.reversed=!0,D.setEdge(r.w,r.v,o,s.uniqueId("rev"))});function g(r){return function(o){return r.edge(o).weight}}}function T(D){var M=[],g={},r={};function o(d){s.has(r,d)||(r[d]=!0,g[d]=!0,s.forEach(D.outEdges(d),function(f){s.has(g,f.w)?M.push(f):o(f.w)}),delete g[d])}return s.forEach(D.nodes(),o),M}function m(D){s.forEach(D.edges(),function(M){var g=D.edge(M);if(g.reversed){D.removeEdge(M);var r=g.forwardName;delete g.reversed,delete g.forwardName,D.setEdge(M.w,M.v,g,r)}})}},24186:function(V,_,a){var s=a(8217),k=a(92304);V.exports=O;function O(m){function D(M){var g=m.children(M),r=m.node(M);if(g.length&&s.forEach(g,D),s.has(r,"minRank")){r.borderLeft=[],r.borderRight=[];for(var o=r.minRank,d=r.maxRank+1;o<d;++o)T(m,"borderLeft","_bl",M,r,o),T(m,"borderRight","_br",M,r,o)}}s.forEach(m.children(),D)}function T(m,D,M,g,r,o){var d={width:0,height:0,rank:o,borderType:D},f=r[D][o-1],h=k.addDummyNode(m,"border",d,M);r[D][o]=h,m.setParent(h,g),f&&m.setEdge(f,h,{weight:1})}},83032:function(V,_,a){"use strict";var s=a(8217);V.exports={adjust:k,undo:O};function k(o){var d=o.graph().rankdir.toLowerCase();(d==="lr"||d==="rl")&&T(o)}function O(o){var d=o.graph().rankdir.toLowerCase();(d==="bt"||d==="rl")&&D(o),(d==="lr"||d==="rl")&&(g(o),T(o))}function T(o){s.forEach(o.nodes(),function(d){m(o.node(d))}),s.forEach(o.edges(),function(d){m(o.edge(d))})}function m(o){var d=o.width;o.width=o.height,o.height=d}function D(o){s.forEach(o.nodes(),function(d){M(o.node(d))}),s.forEach(o.edges(),function(d){var f=o.edge(d);s.forEach(f.points,M),s.has(f,"y")&&M(f)})}function M(o){o.y=-o.y}function g(o){s.forEach(o.nodes(),function(d){r(o.node(d))}),s.forEach(o.edges(),function(d){var f=o.edge(d);s.forEach(f.points,r),s.has(f,"x")&&r(f)})}function r(o){var d=o.x;o.x=o.y,o.y=d}},40094:function(V){V.exports=_;function _(){var k={};k._next=k._prev=k,this._sentinel=k}_.prototype.dequeue=function(){var k=this._sentinel,O=k._prev;if(O!==k)return a(O),O},_.prototype.enqueue=function(k){var O=this._sentinel;k._prev&&k._next&&a(k),k._next=O._next,O._next._prev=k,O._next=k,k._prev=O},_.prototype.toString=function(){for(var k=[],O=this._sentinel,T=O._prev;T!==O;)k.push(JSON.stringify(T,s)),T=T._prev;return"["+k.join(", ")+"]"};function a(k){k._prev._next=k._next,k._next._prev=k._prev,delete k._next,delete k._prev}function s(k,O){if(k!=="_next"&&k!=="_prev")return O}},36939:function(V,_,a){var s=a(8217),k=a(92304),O=a(68509).Graph;V.exports={debugOrdering:T};function T(m){var D=k.buildLayerMatrix(m),M=new O({compound:!0,multigraph:!0}).setGraph({});return s.forEach(m.nodes(),function(g){M.setNode(g,{label:g}),M.setParent(g,"layer"+m.node(g).rank)}),s.forEach(m.edges(),function(g){M.setEdge(g.v,g.w,{},g.name)}),s.forEach(D,function(g,r){var o="layer"+r;M.setNode(o,{rank:"same"}),s.reduce(g,function(d,f){return M.setEdge(d,f,{style:"invis"}),f})}),M}},68509:function(V,_,a){var s;try{s=a(16239)}catch(k){}s||(s=window.graphlib),V.exports=s},23742:function(V,_,a){var s=a(8217),k=a(68509).Graph,O=a(40094);V.exports=m;var T=s.constant(1);function m(o,d){if(o.nodeCount()<=1)return[];var f=g(o,d||T),h=D(f.graph,f.buckets,f.zeroIdx);return s.flatten(s.map(h,function(w){return o.outEdges(w.v,w.w)}),!0)}function D(o,d,f){for(var h=[],w=d[d.length-1],W=d[0],Z;o.nodeCount();){for(;Z=W.dequeue();)M(o,d,f,Z);for(;Z=w.dequeue();)M(o,d,f,Z);if(o.nodeCount()){for(var L=d.length-2;L>0;--L)if(Z=d[L].dequeue(),Z){h=h.concat(M(o,d,f,Z,!0));break}}}return h}function M(o,d,f,h,w){var W=w?[]:void 0;return s.forEach(o.inEdges(h.v),function(Z){var L=o.edge(Z),G=o.node(Z.v);w&&W.push({v:Z.v,w:Z.w}),G.out-=L,r(d,f,G)}),s.forEach(o.outEdges(h.v),function(Z){var L=o.edge(Z),G=Z.w,K=o.node(G);K.in-=L,r(d,f,K)}),o.removeNode(h.v),W}function g(o,d){var f=new k,h=0,w=0;s.forEach(o.nodes(),function(L){f.setNode(L,{v:L,in:0,out:0})}),s.forEach(o.edges(),function(L){var G=f.edge(L.v,L.w)||0,K=d(L),F=G+K;f.setEdge(L.v,L.w,F),w=Math.max(w,f.node(L.v).out+=K),h=Math.max(h,f.node(L.w).in+=K)});var W=s.range(w+h+3).map(function(){return new O}),Z=h+1;return s.forEach(f.nodes(),function(L){r(W,Z,f.node(L))}),{graph:f,buckets:W,zeroIdx:Z}}function r(o,d,f){f.out?f.in?o[f.out-f.in+d].enqueue(f):o[o.length-1].enqueue(f):o[0].enqueue(f)}},13104:function(V,_,a){"use strict";var s=a(8217),k=a(93143),O=a(67099),T=a(65511),m=a(92304).normalizeRanks,D=a(24685),M=a(92304).removeEmptyRanks,g=a(59832),r=a(24186),o=a(83032),d=a(89717),f=a(63363),h=a(92304),w=a(68509).Graph;V.exports=W;function W(tt,at){var lt=at&&at.debugTiming?h.time:h.notime;lt("layout",function(){var ct=lt("  buildLayoutGraph",function(){return U(tt)});lt("  runLayout",function(){Z(ct,lt)}),lt("  updateInputGraph",function(){L(tt,ct)})})}function Z(tt,at){at("    makeSpaceForEdgeLabels",function(){P(tt)}),at("    removeSelfEdges",function(){gt(tt)}),at("    acyclic",function(){k.run(tt)}),at("    nestingGraph.run",function(){g.run(tt)}),at("    rank",function(){T(h.asNonCompoundGraph(tt))}),at("    injectEdgeLabelProxies",function(){S(tt)}),at("    removeEmptyRanks",function(){M(tt)}),at("    nestingGraph.cleanup",function(){g.cleanup(tt)}),at("    normalizeRanks",function(){m(tt)}),at("    assignRankMinMax",function(){Y(tt)}),at("    removeEdgeLabelProxies",function(){C(tt)}),at("    normalize.run",function(){O.run(tt)}),at("    parentDummyChains",function(){D(tt)}),at("    addBorderSegments",function(){r(tt)}),at("    order",function(){d(tt)}),at("    insertSelfEdges",function(){yt(tt)}),at("    adjustCoordinateSystem",function(){o.adjust(tt)}),at("    position",function(){f(tt)}),at("    positionSelfEdges",function(){pt(tt)}),at("    removeBorderNodes",function(){it(tt)}),at("    normalize.undo",function(){O.undo(tt)}),at("    fixupEdgeLabelCoords",function(){ot(tt)}),at("    undoCoordinateSystem",function(){o.undo(tt)}),at("    translateGraph",function(){$(tt)}),at("    assignNodeIntersects",function(){j(tt)}),at("    reversePoints",function(){st(tt)}),at("    acyclic.undo",function(){k.undo(tt)})}function L(tt,at){s.forEach(tt.nodes(),function(lt){var ct=tt.node(lt),xt=at.node(lt);ct&&(ct.x=xt.x,ct.y=xt.y,at.children(lt).length&&(ct.width=xt.width,ct.height=xt.height))}),s.forEach(tt.edges(),function(lt){var ct=tt.edge(lt),xt=at.edge(lt);ct.points=xt.points,s.has(xt,"x")&&(ct.x=xt.x,ct.y=xt.y)}),tt.graph().width=at.graph().width,tt.graph().height=at.graph().height}var G=["nodesep","edgesep","ranksep","marginx","marginy"],K={ranksep:50,edgesep:20,nodesep:50,rankdir:"tb"},F=["acyclicer","ranker","rankdir","align"],N=["width","height"],I={width:0,height:0},z=["minlen","weight","width","height","labeloffset"],J={minlen:1,weight:1,width:0,height:0,labeloffset:10,labelpos:"r"},X=["labelpos"];function U(tt){var at=new w({multigraph:!0,compound:!0}),lt=wt(tt.graph());return at.setGraph(s.merge({},K,bt(lt,G),s.pick(lt,F))),s.forEach(tt.nodes(),function(ct){var xt=wt(tt.node(ct));at.setNode(ct,s.defaults(bt(xt,N),I)),at.setParent(ct,tt.parent(ct))}),s.forEach(tt.edges(),function(ct){var xt=wt(tt.edge(ct));at.setEdge(ct,s.merge({},J,bt(xt,z),s.pick(xt,X)))}),at}function P(tt){var at=tt.graph();at.ranksep/=2,s.forEach(tt.edges(),function(lt){var ct=tt.edge(lt);ct.minlen*=2,ct.labelpos.toLowerCase()!=="c"&&(at.rankdir==="TB"||at.rankdir==="BT"?ct.width+=ct.labeloffset:ct.height+=ct.labeloffset)})}function S(tt){s.forEach(tt.edges(),function(at){var lt=tt.edge(at);if(lt.width&&lt.height){var ct=tt.node(at.v),xt=tt.node(at.w),Et={rank:(xt.rank-ct.rank)/2+ct.rank,e:at};h.addDummyNode(tt,"edge-proxy",Et,"_ep")}})}function Y(tt){var at=0;s.forEach(tt.nodes(),function(lt){var ct=tt.node(lt);ct.borderTop&&(ct.minRank=tt.node(ct.borderTop).rank,ct.maxRank=tt.node(ct.borderBottom).rank,at=s.max(at,ct.maxRank))}),tt.graph().maxRank=at}function C(tt){s.forEach(tt.nodes(),function(at){var lt=tt.node(at);lt.dummy==="edge-proxy"&&(tt.edge(lt.e).labelRank=lt.rank,tt.removeNode(at))})}function $(tt){var at=Number.POSITIVE_INFINITY,lt=0,ct=Number.POSITIVE_INFINITY,xt=0,Et=tt.graph(),Nt=Et.marginx||0,St=Et.marginy||0;function Tt(zt){var Zt=zt.x,oe=zt.y,he=zt.width,ye=zt.height;at=Math.min(at,Zt-he/2),lt=Math.max(lt,Zt+he/2),ct=Math.min(ct,oe-ye/2),xt=Math.max(xt,oe+ye/2)}s.forEach(tt.nodes(),function(zt){Tt(tt.node(zt))}),s.forEach(tt.edges(),function(zt){var Zt=tt.edge(zt);s.has(Zt,"x")&&Tt(Zt)}),at-=Nt,ct-=St,s.forEach(tt.nodes(),function(zt){var Zt=tt.node(zt);Zt.x-=at,Zt.y-=ct}),s.forEach(tt.edges(),function(zt){var Zt=tt.edge(zt);s.forEach(Zt.points,function(oe){oe.x-=at,oe.y-=ct}),s.has(Zt,"x")&&(Zt.x-=at),s.has(Zt,"y")&&(Zt.y-=ct)}),Et.width=lt-at+Nt,Et.height=xt-ct+St}function j(tt){s.forEach(tt.edges(),function(at){var lt=tt.edge(at),ct=tt.node(at.v),xt=tt.node(at.w),Et,Nt;lt.points?(Et=lt.points[0],Nt=lt.points[lt.points.length-1]):(lt.points=[],Et=xt,Nt=ct),lt.points.unshift(h.intersectRect(ct,Et)),lt.points.push(h.intersectRect(xt,Nt))})}function ot(tt){s.forEach(tt.edges(),function(at){var lt=tt.edge(at);if(s.has(lt,"x"))switch((lt.labelpos==="l"||lt.labelpos==="r")&&(lt.width-=lt.labeloffset),lt.labelpos){case"l":lt.x-=lt.width/2+lt.labeloffset;break;case"r":lt.x+=lt.width/2+lt.labeloffset;break}})}function st(tt){s.forEach(tt.edges(),function(at){var lt=tt.edge(at);lt.reversed&&lt.points.reverse()})}function it(tt){s.forEach(tt.nodes(),function(at){if(tt.children(at).length){var lt=tt.node(at),ct=tt.node(lt.borderTop),xt=tt.node(lt.borderBottom),Et=tt.node(s.last(lt.borderLeft)),Nt=tt.node(s.last(lt.borderRight));lt.width=Math.abs(Nt.x-Et.x),lt.height=Math.abs(xt.y-ct.y),lt.x=Et.x+lt.width/2,lt.y=ct.y+lt.height/2}}),s.forEach(tt.nodes(),function(at){tt.node(at).dummy==="border"&&tt.removeNode(at)})}function gt(tt){s.forEach(tt.edges(),function(at){if(at.v===at.w){var lt=tt.node(at.v);lt.selfEdges||(lt.selfEdges=[]),lt.selfEdges.push({e:at,label:tt.edge(at)}),tt.removeEdge(at)}})}function yt(tt){var at=h.buildLayerMatrix(tt);s.forEach(at,function(lt){var ct=0;s.forEach(lt,function(xt,Et){var Nt=tt.node(xt);Nt.order=Et+ct,s.forEach(Nt.selfEdges,function(St){h.addDummyNode(tt,"selfedge",{width:St.label.width,height:St.label.height,rank:Nt.rank,order:Et+ ++ct,e:St.e,label:St.label},"_se")}),delete Nt.selfEdges})})}function pt(tt){s.forEach(tt.nodes(),function(at){var lt=tt.node(at);if(lt.dummy==="selfedge"){var ct=tt.node(lt.e.v),xt=ct.x+ct.width/2,Et=ct.y,Nt=lt.x-xt,St=ct.height/2;tt.setEdge(lt.e,lt.label),tt.removeNode(at),lt.label.points=[{x:xt+2*Nt/3,y:Et-St},{x:xt+5*Nt/6,y:Et-St},{x:xt+Nt,y:Et},{x:xt+5*Nt/6,y:Et+St},{x:xt+2*Nt/3,y:Et+St}],lt.label.x=lt.x,lt.label.y=lt.y}})}function bt(tt,at){return s.mapValues(s.pick(tt,at),Number)}function wt(tt){var at={};return s.forEach(tt,function(lt,ct){at[ct.toLowerCase()]=lt}),at}},8217:function(V,_,a){var s;try{s={cloneDeep:a(32222),constant:a(64806),defaults:a(91099),each:a(15828),filter:a(3149),find:a(33170),flatten:a(22612),forEach:a(17489),forIn:a(37229),has:a(56611),isUndefined:a(89300),last:a(25674),map:a(65512),mapValues:a(65632),max:a(80212),merge:a(67929),min:a(71516),minBy:a(88371),now:a(76668),pick:a(19334),range:a(61178),reduce:a(6355),sortBy:a(84715),uniqueId:a(53274),values:a(61017),zipObject:a(64058)}}catch(k){}s||(s=window._),V.exports=s},59832:function(V,_,a){var s=a(8217),k=a(92304);V.exports={run:O,cleanup:M};function O(g){var r=k.addDummyNode(g,"root",{},"_root"),o=m(g),d=s.max(s.values(o))-1,f=2*d+1;g.graph().nestingRoot=r,s.forEach(g.edges(),function(w){g.edge(w).minlen*=f});var h=D(g)+1;s.forEach(g.children(),function(w){T(g,r,f,h,d,o,w)}),g.graph().nodeRankFactor=f}function T(g,r,o,d,f,h,w){var W=g.children(w);if(!W.length){w!==r&&g.setEdge(r,w,{weight:0,minlen:o});return}var Z=k.addBorderNode(g,"_bt"),L=k.addBorderNode(g,"_bb"),G=g.node(w);g.setParent(Z,w),G.borderTop=Z,g.setParent(L,w),G.borderBottom=L,s.forEach(W,function(K){T(g,r,o,d,f,h,K);var F=g.node(K),N=F.borderTop?F.borderTop:K,I=F.borderBottom?F.borderBottom:K,z=F.borderTop?d:2*d,J=N!==I?1:f-h[w]+1;g.setEdge(Z,N,{weight:z,minlen:J,nestingEdge:!0}),g.setEdge(I,L,{weight:z,minlen:J,nestingEdge:!0})}),g.parent(w)||g.setEdge(r,Z,{weight:0,minlen:f+h[w]})}function m(g){var r={};function o(d,f){var h=g.children(d);h&&h.length&&s.forEach(h,function(w){o(w,f+1)}),r[d]=f}return s.forEach(g.children(),function(d){o(d,1)}),r}function D(g){return s.reduce(g.edges(),function(r,o){return r+g.edge(o).weight},0)}function M(g){var r=g.graph();g.removeNode(r.nestingRoot),delete r.nestingRoot,s.forEach(g.edges(),function(o){var d=g.edge(o);d.nestingEdge&&g.removeEdge(o)})}},67099:function(V,_,a){"use strict";var s=a(8217),k=a(92304);V.exports={run:O,undo:m};function O(D){D.graph().dummyChains=[],s.forEach(D.edges(),function(M){T(D,M)})}function T(D,M){var g=M.v,r=D.node(g).rank,o=M.w,d=D.node(o).rank,f=M.name,h=D.edge(M),w=h.labelRank;if(d!==r+1){D.removeEdge(M);var W,Z,L;for(L=0,++r;r<d;++L,++r)h.points=[],Z={width:0,height:0,edgeLabel:h,edgeObj:M,rank:r},W=k.addDummyNode(D,"edge",Z,"_d"),r===w&&(Z.width=h.width,Z.height=h.height,Z.dummy="edge-label",Z.labelpos=h.labelpos),D.setEdge(g,W,{weight:h.weight},f),L===0&&D.graph().dummyChains.push(W),g=W;D.setEdge(g,o,{weight:h.weight},f)}}function m(D){s.forEach(D.graph().dummyChains,function(M){var g=D.node(M),r=g.edgeLabel,o;for(D.setEdge(g.edgeObj,r);g.dummy;)o=D.successors(M)[0],D.removeNode(M),r.points.push({x:g.x,y:g.y}),g.dummy==="edge-label"&&(r.x=g.x,r.y=g.y,r.width=g.width,r.height=g.height),M=o,g=D.node(M)})}},72952:function(V,_,a){var s=a(8217);V.exports=k;function k(O,T,m){var D={},M;s.forEach(m,function(g){for(var r=O.parent(g),o,d;r;){if(o=O.parent(r),o?(d=D[o],D[o]=r):(d=M,M=r),d&&d!==r){T.setEdge(d,r);return}r=o}})}},22207:function(V,_,a){var s=a(8217);V.exports=k;function k(O,T){return s.map(T,function(m){var D=O.inEdges(m);if(D.length){var M=s.reduce(D,function(g,r){var o=O.edge(r),d=O.node(r.v);return{sum:g.sum+o.weight*d.order,weight:g.weight+o.weight}},{sum:0,weight:0});return{v:m,barycenter:M.sum/M.weight,weight:M.weight}}else return{v:m}})}},9643:function(V,_,a){var s=a(8217),k=a(68509).Graph;V.exports=O;function O(m,D,M){var g=T(m),r=new k({compound:!0}).setGraph({root:g}).setDefaultNodeLabel(function(o){return m.node(o)});return s.forEach(m.nodes(),function(o){var d=m.node(o),f=m.parent(o);(d.rank===D||d.minRank<=D&&D<=d.maxRank)&&(r.setNode(o),r.setParent(o,f||g),s.forEach(m[M](o),function(h){var w=h.v===o?h.w:h.v,W=r.edge(w,o),Z=s.isUndefined(W)?0:W.weight;r.setEdge(w,o,{weight:m.edge(h).weight+Z})}),s.has(d,"minRank")&&r.setNode(o,{borderLeft:d.borderLeft[D],borderRight:d.borderRight[D]}))}),r}function T(m){for(var D;m.hasNode(D=s.uniqueId("_root")););return D}},51094:function(V,_,a){"use strict";var s=a(8217);V.exports=k;function k(T,m){for(var D=0,M=1;M<m.length;++M)D+=O(T,m[M-1],m[M]);return D}function O(T,m,D){for(var M=s.zipObject(D,s.map(D,function(h,w){return w})),g=s.flatten(s.map(m,function(h){return s.sortBy(s.map(T.outEdges(h),function(w){return{pos:M[w.w],weight:T.edge(w).weight}}),"pos")}),!0),r=1;r<D.length;)r<<=1;var o=2*r-1;r-=1;var d=s.map(new Array(o),function(){return 0}),f=0;return s.forEach(g.forEach(function(h){var w=h.pos+r;d[w]+=h.weight;for(var W=0;w>0;)w%2&&(W+=d[w+1]),w=w-1>>1,d[w]+=h.weight;f+=h.weight*W})),f}},89717:function(V,_,a){"use strict";var s=a(8217),k=a(89853),O=a(51094),T=a(66675),m=a(9643),D=a(72952),M=a(68509).Graph,g=a(92304);V.exports=r;function r(h){var w=g.maxRank(h),W=o(h,s.range(1,w+1),"inEdges"),Z=o(h,s.range(w-1,-1,-1),"outEdges"),L=k(h);f(h,L);for(var G=Number.POSITIVE_INFINITY,K,F=0,N=0;N<4;++F,++N){d(F%2?W:Z,F%4>=2),L=g.buildLayerMatrix(h);var I=O(h,L);I<G&&(N=0,K=s.cloneDeep(L),G=I)}f(h,K)}function o(h,w,W){return s.map(w,function(Z){return m(h,Z,W)})}function d(h,w){var W=new M;s.forEach(h,function(Z){var L=Z.graph().root,G=T(Z,L,W,w);s.forEach(G.vs,function(K,F){Z.node(K).order=F}),D(Z,W,G.vs)})}function f(h,w){s.forEach(w,function(W){s.forEach(W,function(Z,L){h.node(Z).order=L})})}},89853:function(V,_,a){"use strict";var s=a(8217);V.exports=k;function k(O){var T={},m=s.filter(O.nodes(),function(o){return!O.children(o).length}),D=s.max(s.map(m,function(o){return O.node(o).rank})),M=s.map(s.range(D+1),function(){return[]});function g(o){if(!s.has(T,o)){T[o]=!0;var d=O.node(o);M[d.rank].push(o),s.forEach(O.successors(o),g)}}var r=s.sortBy(m,function(o){return O.node(o).rank});return s.forEach(r,g),M}},5171:function(V,_,a){"use strict";var s=a(8217);V.exports=k;function k(m,D){var M={};s.forEach(m,function(r,o){var d=M[r.v]={indegree:0,in:[],out:[],vs:[r.v],i:o};s.isUndefined(r.barycenter)||(d.barycenter=r.barycenter,d.weight=r.weight)}),s.forEach(D.edges(),function(r){var o=M[r.v],d=M[r.w];!s.isUndefined(o)&&!s.isUndefined(d)&&(d.indegree++,o.out.push(M[r.w]))});var g=s.filter(M,function(r){return!r.indegree});return O(g)}function O(m){var D=[];function M(o){return function(d){d.merged||(s.isUndefined(d.barycenter)||s.isUndefined(o.barycenter)||d.barycenter>=o.barycenter)&&T(o,d)}}function g(o){return function(d){d.in.push(o),--d.indegree===0&&m.push(d)}}for(;m.length;){var r=m.pop();D.push(r),s.forEach(r.in.reverse(),M(r)),s.forEach(r.out,g(r))}return s.map(s.filter(D,function(o){return!o.merged}),function(o){return s.pick(o,["vs","i","barycenter","weight"])})}function T(m,D){var M=0,g=0;m.weight&&(M+=m.barycenter*m.weight,g+=m.weight),D.weight&&(M+=D.barycenter*D.weight,g+=D.weight),m.vs=D.vs.concat(m.vs),m.barycenter=M/g,m.weight=g,m.i=Math.min(D.i,m.i),D.merged=!0}},66675:function(V,_,a){var s=a(8217),k=a(22207),O=a(5171),T=a(45737);V.exports=m;function m(g,r,o,d){var f=g.children(r),h=g.node(r),w=h?h.borderLeft:void 0,W=h?h.borderRight:void 0,Z={};w&&(f=s.filter(f,function(I){return I!==w&&I!==W}));var L=k(g,f);s.forEach(L,function(I){if(g.children(I.v).length){var z=m(g,I.v,o,d);Z[I.v]=z,s.has(z,"barycenter")&&M(I,z)}});var G=O(L,o);D(G,Z);var K=T(G,d);if(w&&(K.vs=s.flatten([w,K.vs,W],!0),g.predecessors(w).length)){var F=g.node(g.predecessors(w)[0]),N=g.node(g.predecessors(W)[0]);s.has(K,"barycenter")||(K.barycenter=0,K.weight=0),K.barycenter=(K.barycenter*K.weight+F.order+N.order)/(K.weight+2),K.weight+=2}return K}function D(g,r){s.forEach(g,function(o){o.vs=s.flatten(o.vs.map(function(d){return r[d]?r[d].vs:d}),!0)})}function M(g,r){s.isUndefined(g.barycenter)?(g.barycenter=r.barycenter,g.weight=r.weight):(g.barycenter=(g.barycenter*g.weight+r.barycenter*r.weight)/(g.weight+r.weight),g.weight+=r.weight)}},45737:function(V,_,a){var s=a(8217),k=a(92304);V.exports=O;function O(D,M){var g=k.partition(D,function(Z){return s.has(Z,"barycenter")}),r=g.lhs,o=s.sortBy(g.rhs,function(Z){return-Z.i}),d=[],f=0,h=0,w=0;r.sort(m(!!M)),w=T(d,o,w),s.forEach(r,function(Z){w+=Z.vs.length,d.push(Z.vs),f+=Z.barycenter*Z.weight,h+=Z.weight,w=T(d,o,w)});var W={vs:s.flatten(d,!0)};return h&&(W.barycenter=f/h,W.weight=h),W}function T(D,M,g){for(var r;M.length&&(r=s.last(M)).i<=g;)M.pop(),D.push(r.vs),g++;return g}function m(D){return function(M,g){return M.barycenter<g.barycenter?-1:M.barycenter>g.barycenter?1:D?g.i-M.i:M.i-g.i}}},24685:function(V,_,a){var s=a(8217);V.exports=k;function k(m){var D=T(m);s.forEach(m.graph().dummyChains,function(M){for(var g=m.node(M),r=g.edgeObj,o=O(m,D,r.v,r.w),d=o.path,f=o.lca,h=0,w=d[h],W=!0;M!==r.w;){if(g=m.node(M),W){for(;(w=d[h])!==f&&m.node(w).maxRank<g.rank;)h++;w===f&&(W=!1)}if(!W){for(;h<d.length-1&&m.node(w=d[h+1]).minRank<=g.rank;)h++;w=d[h]}m.setParent(M,w),M=m.successors(M)[0]}})}function O(m,D,M,g){var r=[],o=[],d=Math.min(D[M].low,D[g].low),f=Math.max(D[M].lim,D[g].lim),h,w;h=M;do h=m.parent(h),r.push(h);while(h&&(D[h].low>d||f>D[h].lim));for(w=h,h=g;(h=m.parent(h))!==w;)o.push(h);return{path:r.concat(o.reverse()),lca:w}}function T(m){var D={},M=0;function g(r){var o=M;s.forEach(m.children(r),g),D[r]={low:o,lim:M++}}return s.forEach(m.children(),g),D}},21006:function(V,_,a){"use strict";var s=a(8217),k=a(68509).Graph,O=a(92304);V.exports={positionX:W,findType1Conflicts:T,findType2Conflicts:m,addConflict:M,hasConflict:g,verticalAlignment:r,horizontalCompaction:o,alignCoordinates:h,findSmallestWidthAlignment:f,balance:w};function T(G,K){var F={};function N(I,z){var J=0,X=0,U=I.length,P=s.last(z);return s.forEach(z,function(S,Y){var C=D(G,S),$=C?G.node(C).order:U;(C||S===P)&&(s.forEach(z.slice(X,Y+1),function(j){s.forEach(G.predecessors(j),function(ot){var st=G.node(ot),it=st.order;(it<J||$<it)&&!(st.dummy&&G.node(j).dummy)&&M(F,ot,j)})}),X=Y+1,J=$)}),z}return s.reduce(K,N),F}function m(G,K){var F={};function N(z,J,X,U,P){var S;s.forEach(s.range(J,X),function(Y){S=z[Y],G.node(S).dummy&&s.forEach(G.predecessors(S),function(C){var $=G.node(C);$.dummy&&($.order<U||$.order>P)&&M(F,C,S)})})}function I(z,J){var X=-1,U,P=0;return s.forEach(J,function(S,Y){if(G.node(S).dummy==="border"){var C=G.predecessors(S);C.length&&(U=G.node(C[0]).order,N(J,P,Y,X,U),P=Y,X=U)}N(J,P,J.length,U,z.length)}),J}return s.reduce(K,I),F}function D(G,K){if(G.node(K).dummy)return s.find(G.predecessors(K),function(F){return G.node(F).dummy})}function M(G,K,F){if(K>F){var N=K;K=F,F=N}var I=G[K];I||(G[K]=I={}),I[F]=!0}function g(G,K,F){if(K>F){var N=K;K=F,F=N}return s.has(G[K],F)}function r(G,K,F,N){var I={},z={},J={};return s.forEach(K,function(X){s.forEach(X,function(U,P){I[U]=U,z[U]=U,J[U]=P})}),s.forEach(K,function(X){var U=-1;s.forEach(X,function(P){var S=N(P);if(S.length){S=s.sortBy(S,function(ot){return J[ot]});for(var Y=(S.length-1)/2,C=Math.floor(Y),$=Math.ceil(Y);C<=$;++C){var j=S[C];z[P]===P&&U<J[j]&&!g(F,P,j)&&(z[j]=P,z[P]=I[P]=I[j],U=J[j])}}})}),{root:I,align:z}}function o(G,K,F,N,I){var z={},J=d(G,K,F,I),X=I?"borderLeft":"borderRight";function U(Y,C){for(var $=J.nodes(),j=$.pop(),ot={};j;)ot[j]?Y(j):(ot[j]=!0,$.push(j),$=$.concat(C(j))),j=$.pop()}function P(Y){z[Y]=J.inEdges(Y).reduce(function(C,$){return Math.max(C,z[$.v]+J.edge($))},0)}function S(Y){var C=J.outEdges(Y).reduce(function(j,ot){return Math.min(j,z[ot.w]-J.edge(ot))},Number.POSITIVE_INFINITY),$=G.node(Y);C!==Number.POSITIVE_INFINITY&&$.borderType!==X&&(z[Y]=Math.max(z[Y],C))}return U(P,J.predecessors.bind(J)),U(S,J.successors.bind(J)),s.forEach(N,function(Y){z[Y]=z[F[Y]]}),z}function d(G,K,F,N){var I=new k,z=G.graph(),J=Z(z.nodesep,z.edgesep,N);return s.forEach(K,function(X){var U;s.forEach(X,function(P){var S=F[P];if(I.setNode(S),U){var Y=F[U],C=I.edge(Y,S);I.setEdge(Y,S,Math.max(J(G,P,U),C||0))}U=P})}),I}function f(G,K){return s.minBy(s.values(K),function(F){var N=Number.NEGATIVE_INFINITY,I=Number.POSITIVE_INFINITY;return s.forIn(F,function(z,J){var X=L(G,J)/2;N=Math.max(z+X,N),I=Math.min(z-X,I)}),N-I})}function h(G,K){var F=s.values(K),N=s.min(F),I=s.max(F);s.forEach(["u","d"],function(z){s.forEach(["l","r"],function(J){var X=z+J,U=G[X],P;if(U!==K){var S=s.values(U);P=J==="l"?N-s.min(S):I-s.max(S),P&&(G[X]=s.mapValues(U,function(Y){return Y+P}))}})})}function w(G,K){return s.mapValues(G.ul,function(F,N){if(K)return G[K.toLowerCase()][N];var I=s.sortBy(s.map(G,N));return(I[1]+I[2])/2})}function W(G){var K=O.buildLayerMatrix(G),F=s.merge(T(G,K),m(G,K)),N={},I;s.forEach(["u","d"],function(J){I=J==="u"?K:s.values(K).reverse(),s.forEach(["l","r"],function(X){X==="r"&&(I=s.map(I,function(Y){return s.values(Y).reverse()}));var U=(J==="u"?G.predecessors:G.successors).bind(G),P=r(G,I,F,U),S=o(G,I,P.root,P.align,X==="r");X==="r"&&(S=s.mapValues(S,function(Y){return-Y})),N[J+X]=S})});var z=f(G,N);return h(N,z),w(N,G.graph().align)}function Z(G,K,F){return function(N,I,z){var J=N.node(I),X=N.node(z),U=0,P;if(U+=J.width/2,s.has(J,"labelpos"))switch(J.labelpos.toLowerCase()){case"l":P=-J.width/2;break;case"r":P=J.width/2;break}if(P&&(U+=F?P:-P),P=0,U+=(J.dummy?K:G)/2,U+=(X.dummy?K:G)/2,U+=X.width/2,s.has(X,"labelpos"))switch(X.labelpos.toLowerCase()){case"l":P=X.width/2;break;case"r":P=-X.width/2;break}return P&&(U+=F?P:-P),P=0,U}}function L(G,K){return G.node(K).width}},63363:function(V,_,a){"use strict";var s=a(8217),k=a(92304),O=a(21006).positionX;V.exports=T;function T(D){D=k.asNonCompoundGraph(D),m(D),s.forEach(O(D),function(M,g){D.node(g).x=M})}function m(D){var M=k.buildLayerMatrix(D),g=D.graph().ranksep,r=0;s.forEach(M,function(o){var d=s.max(s.map(o,function(f){return D.node(f).height}));s.forEach(o,function(f){D.node(f).y=r+d/2}),r+=d+g})}},31848:function(V,_,a){"use strict";var s=a(8217),k=a(68509).Graph,O=a(74211).slack;V.exports=T;function T(g){var r=new k({directed:!1}),o=g.nodes()[0],d=g.nodeCount();r.setNode(o,{});for(var f,h;m(r,g)<d;)f=D(r,g),h=r.hasNode(f.v)?O(g,f):-O(g,f),M(r,g,h);return r}function m(g,r){function o(d){s.forEach(r.nodeEdges(d),function(f){var h=f.v,w=d===h?f.w:h;!g.hasNode(w)&&!O(r,f)&&(g.setNode(w,{}),g.setEdge(d,w,{}),o(w))})}return s.forEach(g.nodes(),o),g.nodeCount()}function D(g,r){return s.minBy(r.edges(),function(o){if(g.hasNode(o.v)!==g.hasNode(o.w))return O(r,o)})}function M(g,r,o){s.forEach(g.nodes(),function(d){r.node(d).rank+=o})}},65511:function(V,_,a){"use strict";var s=a(74211),k=s.longestPath,O=a(31848),T=a(37736);V.exports=m;function m(r){switch(r.graph().ranker){case"network-simplex":g(r);break;case"tight-tree":M(r);break;case"longest-path":D(r);break;default:g(r)}}var D=k;function M(r){k(r),O(r)}function g(r){T(r)}},37736:function(V,_,a){"use strict";var s=a(8217),k=a(31848),O=a(74211).slack,T=a(74211).longestPath,m=a(68509).alg.preorder,D=a(68509).alg.postorder,M=a(92304).simplify;V.exports=g,g.initLowLimValues=f,g.initCutValues=r,g.calcCutValue=d,g.leaveEdge=w,g.enterEdge=W,g.exchangeEdges=Z;function g(F){F=M(F),T(F);var N=k(F);f(N),r(N,F);for(var I,z;I=w(N);)z=W(N,F,I),Z(N,F,I,z)}function r(F,N){var I=D(F,F.nodes());I=I.slice(0,I.length-1),s.forEach(I,function(z){o(F,N,z)})}function o(F,N,I){var z=F.node(I),J=z.parent;F.edge(I,J).cutvalue=d(F,N,I)}function d(F,N,I){var z=F.node(I),J=z.parent,X=!0,U=N.edge(I,J),P=0;return U||(X=!1,U=N.edge(J,I)),P=U.weight,s.forEach(N.nodeEdges(I),function(S){var Y=S.v===I,C=Y?S.w:S.v;if(C!==J){var $=Y===X,j=N.edge(S).weight;if(P+=$?j:-j,G(F,I,C)){var ot=F.edge(I,C).cutvalue;P+=$?-ot:ot}}}),P}function f(F,N){arguments.length<2&&(N=F.nodes()[0]),h(F,{},1,N)}function h(F,N,I,z,J){var X=I,U=F.node(z);return N[z]=!0,s.forEach(F.neighbors(z),function(P){s.has(N,P)||(I=h(F,N,I,P,z))}),U.low=X,U.lim=I++,J?U.parent=J:delete U.parent,I}function w(F){return s.find(F.edges(),function(N){return F.edge(N).cutvalue<0})}function W(F,N,I){var z=I.v,J=I.w;N.hasEdge(z,J)||(z=I.w,J=I.v);var X=F.node(z),U=F.node(J),P=X,S=!1;X.lim>U.lim&&(P=U,S=!0);var Y=s.filter(N.edges(),function(C){return S===K(F,F.node(C.v),P)&&S!==K(F,F.node(C.w),P)});return s.minBy(Y,function(C){return O(N,C)})}function Z(F,N,I,z){var J=I.v,X=I.w;F.removeEdge(J,X),F.setEdge(z.v,z.w,{}),f(F),r(F,N),L(F,N)}function L(F,N){var I=s.find(F.nodes(),function(J){return!N.node(J).parent}),z=m(F,I);z=z.slice(1),s.forEach(z,function(J){var X=F.node(J).parent,U=N.edge(J,X),P=!1;U||(U=N.edge(X,J),P=!0),N.node(J).rank=N.node(X).rank+(P?U.minlen:-U.minlen)})}function G(F,N,I){return F.hasEdge(N,I)}function K(F,N,I){return I.low<=N.lim&&N.lim<=I.lim}},74211:function(V,_,a){"use strict";var s=a(8217);V.exports={longestPath:k,slack:O};function k(T){var m={};function D(M){var g=T.node(M);if(s.has(m,M))return g.rank;m[M]=!0;var r=s.min(s.map(T.outEdges(M),function(o){return D(o.w)-T.edge(o).minlen}));return(r===Number.POSITIVE_INFINITY||r===void 0||r===null)&&(r=0),g.rank=r}s.forEach(T.sources(),D)}function O(T,m){return T.node(m.w).rank-T.node(m.v).rank-T.edge(m).minlen}},92304:function(V,_,a){"use strict";var s=a(8217),k=a(68509).Graph;V.exports={addDummyNode:O,simplify:T,asNonCompoundGraph:m,successorWeights:D,predecessorWeights:M,intersectRect:g,buildLayerMatrix:r,normalizeRanks:o,removeEmptyRanks:d,addBorderNode:f,maxRank:h,partition:w,time:W,notime:Z};function O(L,G,K,F){var N;do N=s.uniqueId(F);while(L.hasNode(N));return K.dummy=G,L.setNode(N,K),N}function T(L){var G=new k().setGraph(L.graph());return s.forEach(L.nodes(),function(K){G.setNode(K,L.node(K))}),s.forEach(L.edges(),function(K){var F=G.edge(K.v,K.w)||{weight:0,minlen:1},N=L.edge(K);G.setEdge(K.v,K.w,{weight:F.weight+N.weight,minlen:Math.max(F.minlen,N.minlen)})}),G}function m(L){var G=new k({multigraph:L.isMultigraph()}).setGraph(L.graph());return s.forEach(L.nodes(),function(K){L.children(K).length||G.setNode(K,L.node(K))}),s.forEach(L.edges(),function(K){G.setEdge(K,L.edge(K))}),G}function D(L){var G=s.map(L.nodes(),function(K){var F={};return s.forEach(L.outEdges(K),function(N){F[N.w]=(F[N.w]||0)+L.edge(N).weight}),F});return s.zipObject(L.nodes(),G)}function M(L){var G=s.map(L.nodes(),function(K){var F={};return s.forEach(L.inEdges(K),function(N){F[N.v]=(F[N.v]||0)+L.edge(N).weight}),F});return s.zipObject(L.nodes(),G)}function g(L,G){var K=L.x,F=L.y,N=G.x-K,I=G.y-F,z=L.width/2,J=L.height/2;if(!N&&!I)throw new Error("Not possible to find intersection inside of the rectangle");var X,U;return Math.abs(I)*z>Math.abs(N)*J?(I<0&&(J=-J),X=J*N/I,U=J):(N<0&&(z=-z),X=z,U=z*I/N),{x:K+X,y:F+U}}function r(L){var G=s.map(s.range(h(L)+1),function(){return[]});return s.forEach(L.nodes(),function(K){var F=L.node(K),N=F.rank;s.isUndefined(N)||(G[N][F.order]=K)}),G}function o(L){var G=s.min(s.map(L.nodes(),function(K){return L.node(K).rank}));s.forEach(L.nodes(),function(K){var F=L.node(K);s.has(F,"rank")&&(F.rank-=G)})}function d(L){var G=s.min(s.map(L.nodes(),function(I){return L.node(I).rank})),K=[];s.forEach(L.nodes(),function(I){var z=L.node(I).rank-G;K[z]||(K[z]=[]),K[z].push(I)});var F=0,N=L.graph().nodeRankFactor;s.forEach(K,function(I,z){s.isUndefined(I)&&z%N!==0?--F:F&&s.forEach(I,function(J){L.node(J).rank+=F})})}function f(L,G,K,F){var N={width:0,height:0};return arguments.length>=4&&(N.rank=K,N.order=F),O(L,"border",N,G)}function h(L){return s.max(s.map(L.nodes(),function(G){var K=L.node(G).rank;if(!s.isUndefined(K))return K}))}function w(L,G){var K={lhs:[],rhs:[]};return s.forEach(L,function(F){G(F)?K.lhs.push(F):K.rhs.push(F)}),K}function W(L,G){var K=s.now();try{return G()}finally{console.log(L+" time: "+(s.now()-K)+"ms")}}function Z(L,G){return G()}},90975:function(V){V.exports="0.8.5"},16239:function(V,_,a){var s=a(23617);V.exports={Graph:s.Graph,json:a(53988),alg:a(92010),version:s.version}},49004:function(V,_,a){var s=a(91124);V.exports=k;function k(O){var T={},m=[],D;function M(g){s.has(T,g)||(T[g]=!0,D.push(g),s.each(O.successors(g),M),s.each(O.predecessors(g),M))}return s.each(O.nodes(),function(g){D=[],M(g),D.length&&m.push(D)}),m}},10689:function(V,_,a){var s=a(91124);V.exports=k;function k(T,m,D){s.isArray(m)||(m=[m]);var M=(T.isDirected()?T.successors:T.neighbors).bind(T),g=[],r={};return s.each(m,function(o){if(!T.hasNode(o))throw new Error("Graph does not have node: "+o);O(T,o,D==="post",r,M,g)}),g}function O(T,m,D,M,g,r){s.has(M,m)||(M[m]=!0,D||r.push(m),s.each(g(m),function(o){O(T,o,D,M,g,r)}),D&&r.push(m))}},53659:function(V,_,a){var s=a(95070),k=a(91124);V.exports=O;function O(T,m,D){return k.transform(T.nodes(),function(M,g){M[g]=s(T,g,m,D)},{})}},95070:function(V,_,a){var s=a(91124),k=a(60392);V.exports=T;var O=s.constant(1);function T(D,M,g,r){return m(D,String(M),g||O,r||function(o){return D.outEdges(o)})}function m(D,M,g,r){var o={},d=new k,f,h,w=function(W){var Z=W.v!==f?W.v:W.w,L=o[Z],G=g(W),K=h.distance+G;if(G<0)throw new Error("dijkstra does not allow negative edge weights. Bad edge: "+W+" Weight: "+G);K<L.distance&&(L.distance=K,L.predecessor=f,d.decrease(Z,K))};for(D.nodes().forEach(function(W){var Z=W===M?0:Number.POSITIVE_INFINITY;o[W]={distance:Z},d.add(W,Z)});d.size()>0&&(f=d.removeMin(),h=o[f],h.distance!==Number.POSITIVE_INFINITY);)r(f).forEach(w);return o}},53548:function(V,_,a){var s=a(91124),k=a(87299);V.exports=O;function O(T){return s.filter(k(T),function(m){return m.length>1||m.length===1&&T.hasEdge(m[0],m[0])})}},1637:function(V,_,a){var s=a(91124);V.exports=O;var k=s.constant(1);function O(m,D,M){return T(m,D||k,M||function(g){return m.outEdges(g)})}function T(m,D,M){var g={},r=m.nodes();return r.forEach(function(o){g[o]={},g[o][o]={distance:0},r.forEach(function(d){o!==d&&(g[o][d]={distance:Number.POSITIVE_INFINITY})}),M(o).forEach(function(d){var f=d.v===o?d.w:d.v,h=D(d);g[o][f]={distance:h,predecessor:o}})}),r.forEach(function(o){var d=g[o];r.forEach(function(f){var h=g[f];r.forEach(function(w){var W=h[o],Z=d[w],L=h[w],G=W.distance+Z.distance;G<L.distance&&(L.distance=G,L.predecessor=Z.predecessor)})})}),g}},92010:function(V,_,a){V.exports={components:a(49004),dijkstra:a(95070),dijkstraAll:a(53659),findCycles:a(53548),floydWarshall:a(1637),isAcyclic:a(52974),postorder:a(34531),preorder:a(85091),prim:a(61102),tarjan:a(87299),topsort:a(12177)}},52974:function(V,_,a){var s=a(12177);V.exports=k;function k(O){try{s(O)}catch(T){if(T instanceof s.CycleException)return!1;throw T}return!0}},34531:function(V,_,a){var s=a(10689);V.exports=k;function k(O,T){return s(O,T,"post")}},85091:function(V,_,a){var s=a(10689);V.exports=k;function k(O,T){return s(O,T,"pre")}},61102:function(V,_,a){var s=a(91124),k=a(58415),O=a(60392);V.exports=T;function T(m,D){var M=new k,g={},r=new O,o;function d(h){var w=h.v===o?h.w:h.v,W=r.priority(w);if(W!==void 0){var Z=D(h);Z<W&&(g[w]=o,r.decrease(w,Z))}}if(m.nodeCount()===0)return M;s.each(m.nodes(),function(h){r.add(h,Number.POSITIVE_INFINITY),M.setNode(h)}),r.decrease(m.nodes()[0],0);for(var f=!1;r.size()>0;){if(o=r.removeMin(),s.has(g,o))M.setEdge(o,g[o]);else{if(f)throw new Error("Input graph is not connected: "+m);f=!0}m.nodeEdges(o).forEach(d)}return M}},87299:function(V,_,a){var s=a(91124);V.exports=k;function k(O){var T=0,m=[],D={},M=[];function g(r){var o=D[r]={onStack:!0,lowlink:T,index:T++};if(m.push(r),O.successors(r).forEach(function(h){s.has(D,h)?D[h].onStack&&(o.lowlink=Math.min(o.lowlink,D[h].index)):(g(h),o.lowlink=Math.min(o.lowlink,D[h].lowlink))}),o.lowlink===o.index){var d=[],f;do f=m.pop(),D[f].onStack=!1,d.push(f);while(r!==f);M.push(d)}}return O.nodes().forEach(function(r){s.has(D,r)||g(r)}),M}},12177:function(V,_,a){var s=a(91124);V.exports=k,k.CycleException=O;function k(T){var m={},D={},M=[];function g(r){if(s.has(D,r))throw new O;s.has(m,r)||(D[r]=!0,m[r]=!0,s.each(T.predecessors(r),g),delete D[r],M.push(r))}if(s.each(T.sinks(),g),s.size(m)!==T.nodeCount())throw new O;return M}function O(){}O.prototype=new Error},60392:function(V,_,a){var s=a(91124);V.exports=k;function k(){this._arr=[],this._keyIndices={}}k.prototype.size=function(){return this._arr.length},k.prototype.keys=function(){return this._arr.map(function(O){return O.key})},k.prototype.has=function(O){return s.has(this._keyIndices,O)},k.prototype.priority=function(O){var T=this._keyIndices[O];if(T!==void 0)return this._arr[T].priority},k.prototype.min=function(){if(this.size()===0)throw new Error("Queue underflow");return this._arr[0].key},k.prototype.add=function(O,T){var m=this._keyIndices;if(O=String(O),!s.has(m,O)){var D=this._arr,M=D.length;return m[O]=M,D.push({key:O,priority:T}),this._decrease(M),!0}return!1},k.prototype.removeMin=function(){this._swap(0,this._arr.length-1);var O=this._arr.pop();return delete this._keyIndices[O.key],this._heapify(0),O.key},k.prototype.decrease=function(O,T){var m=this._keyIndices[O];if(T>this._arr[m].priority)throw new Error("New priority is greater than current priority. Key: "+O+" Old: "+this._arr[m].priority+" New: "+T);this._arr[m].priority=T,this._decrease(m)},k.prototype._heapify=function(O){var T=this._arr,m=2*O,D=m+1,M=O;m<T.length&&(M=T[m].priority<T[M].priority?m:M,D<T.length&&(M=T[D].priority<T[M].priority?D:M),M!==O&&(this._swap(O,M),this._heapify(M)))},k.prototype._decrease=function(O){for(var T=this._arr,m=T[O].priority,D;O!==0&&(D=O>>1,!(T[D].priority<m));)this._swap(O,D),O=D},k.prototype._swap=function(O,T){var m=this._arr,D=this._keyIndices,M=m[O],g=m[T];m[O]=g,m[T]=M,D[g.key]=O,D[M.key]=T}},58415:function(V,_,a){"use strict";var s=a(91124);V.exports=m;var k="\0",O="\0",T="";function m(d){this._isDirected=s.has(d,"directed")?d.directed:!0,this._isMultigraph=s.has(d,"multigraph")?d.multigraph:!1,this._isCompound=s.has(d,"compound")?d.compound:!1,this._label=void 0,this._defaultNodeLabelFn=s.constant(void 0),this._defaultEdgeLabelFn=s.constant(void 0),this._nodes={},this._isCompound&&(this._parent={},this._children={},this._children[O]={}),this._in={},this._preds={},this._out={},this._sucs={},this._edgeObjs={},this._edgeLabels={}}m.prototype._nodeCount=0,m.prototype._edgeCount=0,m.prototype.isDirected=function(){return this._isDirected},m.prototype.isMultigraph=function(){return this._isMultigraph},m.prototype.isCompound=function(){return this._isCompound},m.prototype.setGraph=function(d){return this._label=d,this},m.prototype.graph=function(){return this._label},m.prototype.setDefaultNodeLabel=function(d){return s.isFunction(d)||(d=s.constant(d)),this._defaultNodeLabelFn=d,this},m.prototype.nodeCount=function(){return this._nodeCount},m.prototype.nodes=function(){return s.keys(this._nodes)},m.prototype.sources=function(){var d=this;return s.filter(this.nodes(),function(f){return s.isEmpty(d._in[f])})},m.prototype.sinks=function(){var d=this;return s.filter(this.nodes(),function(f){return s.isEmpty(d._out[f])})},m.prototype.setNodes=function(d,f){var h=arguments,w=this;return s.each(d,function(W){h.length>1?w.setNode(W,f):w.setNode(W)}),this},m.prototype.setNode=function(d,f){return s.has(this._nodes,d)?(arguments.length>1&&(this._nodes[d]=f),this):(this._nodes[d]=arguments.length>1?f:this._defaultNodeLabelFn(d),this._isCompound&&(this._parent[d]=O,this._children[d]={},this._children[O][d]=!0),this._in[d]={},this._preds[d]={},this._out[d]={},this._sucs[d]={},++this._nodeCount,this)},m.prototype.node=function(d){return this._nodes[d]},m.prototype.hasNode=function(d){return s.has(this._nodes,d)},m.prototype.removeNode=function(d){var f=this;if(s.has(this._nodes,d)){var h=function(w){f.removeEdge(f._edgeObjs[w])};delete this._nodes[d],this._isCompound&&(this._removeFromParentsChildList(d),delete this._parent[d],s.each(this.children(d),function(w){f.setParent(w)}),delete this._children[d]),s.each(s.keys(this._in[d]),h),delete this._in[d],delete this._preds[d],s.each(s.keys(this._out[d]),h),delete this._out[d],delete this._sucs[d],--this._nodeCount}return this},m.prototype.setParent=function(d,f){if(!this._isCompound)throw new Error("Cannot set parent in a non-compound graph");if(s.isUndefined(f))f=O;else{f+="";for(var h=f;!s.isUndefined(h);h=this.parent(h))if(h===d)throw new Error("Setting "+f+" as parent of "+d+" would create a cycle");this.setNode(f)}return this.setNode(d),this._removeFromParentsChildList(d),this._parent[d]=f,this._children[f][d]=!0,this},m.prototype._removeFromParentsChildList=function(d){delete this._children[this._parent[d]][d]},m.prototype.parent=function(d){if(this._isCompound){var f=this._parent[d];if(f!==O)return f}},m.prototype.children=function(d){if(s.isUndefined(d)&&(d=O),this._isCompound){var f=this._children[d];if(f)return s.keys(f)}else{if(d===O)return this.nodes();if(this.hasNode(d))return[]}},m.prototype.predecessors=function(d){var f=this._preds[d];if(f)return s.keys(f)},m.prototype.successors=function(d){var f=this._sucs[d];if(f)return s.keys(f)},m.prototype.neighbors=function(d){var f=this.predecessors(d);if(f)return s.union(f,this.successors(d))},m.prototype.isLeaf=function(d){var f;return this.isDirected()?f=this.successors(d):f=this.neighbors(d),f.length===0},m.prototype.filterNodes=function(d){var f=new this.constructor({directed:this._isDirected,multigraph:this._isMultigraph,compound:this._isCompound});f.setGraph(this.graph());var h=this;s.each(this._nodes,function(Z,L){d(L)&&f.setNode(L,Z)}),s.each(this._edgeObjs,function(Z){f.hasNode(Z.v)&&f.hasNode(Z.w)&&f.setEdge(Z,h.edge(Z))});var w={};function W(Z){var L=h.parent(Z);return L===void 0||f.hasNode(L)?(w[Z]=L,L):L in w?w[L]:W(L)}return this._isCompound&&s.each(f.nodes(),function(Z){f.setParent(Z,W(Z))}),f},m.prototype.setDefaultEdgeLabel=function(d){return s.isFunction(d)||(d=s.constant(d)),this._defaultEdgeLabelFn=d,this},m.prototype.edgeCount=function(){return this._edgeCount},m.prototype.edges=function(){return s.values(this._edgeObjs)},m.prototype.setPath=function(d,f){var h=this,w=arguments;return s.reduce(d,function(W,Z){return w.length>1?h.setEdge(W,Z,f):h.setEdge(W,Z),Z}),this},m.prototype.setEdge=function(){var d,f,h,w,W=!1,Z=arguments[0];typeof Z=="object"&&Z!==null&&"v"in Z?(d=Z.v,f=Z.w,h=Z.name,arguments.length===2&&(w=arguments[1],W=!0)):(d=Z,f=arguments[1],h=arguments[3],arguments.length>2&&(w=arguments[2],W=!0)),d=""+d,f=""+f,s.isUndefined(h)||(h=""+h);var L=g(this._isDirected,d,f,h);if(s.has(this._edgeLabels,L))return W&&(this._edgeLabels[L]=w),this;if(!s.isUndefined(h)&&!this._isMultigraph)throw new Error("Cannot set a named edge when isMultigraph = false");this.setNode(d),this.setNode(f),this._edgeLabels[L]=W?w:this._defaultEdgeLabelFn(d,f,h);var G=r(this._isDirected,d,f,h);return d=G.v,f=G.w,Object.freeze(G),this._edgeObjs[L]=G,D(this._preds[f],d),D(this._sucs[d],f),this._in[f][L]=G,this._out[d][L]=G,this._edgeCount++,this},m.prototype.edge=function(d,f,h){var w=arguments.length===1?o(this._isDirected,arguments[0]):g(this._isDirected,d,f,h);return this._edgeLabels[w]},m.prototype.hasEdge=function(d,f,h){var w=arguments.length===1?o(this._isDirected,arguments[0]):g(this._isDirected,d,f,h);return s.has(this._edgeLabels,w)},m.prototype.removeEdge=function(d,f,h){var w=arguments.length===1?o(this._isDirected,arguments[0]):g(this._isDirected,d,f,h),W=this._edgeObjs[w];return W&&(d=W.v,f=W.w,delete this._edgeLabels[w],delete this._edgeObjs[w],M(this._preds[f],d),M(this._sucs[d],f),delete this._in[f][w],delete this._out[d][w],this._edgeCount--),this},m.prototype.inEdges=function(d,f){var h=this._in[d];if(h){var w=s.values(h);return f?s.filter(w,function(W){return W.v===f}):w}},m.prototype.outEdges=function(d,f){var h=this._out[d];if(h){var w=s.values(h);return f?s.filter(w,function(W){return W.w===f}):w}},m.prototype.nodeEdges=function(d,f){var h=this.inEdges(d,f);if(h)return h.concat(this.outEdges(d,f))};function D(d,f){d[f]?d[f]++:d[f]=1}function M(d,f){--d[f]||delete d[f]}function g(d,f,h,w){var W=""+f,Z=""+h;if(!d&&W>Z){var L=W;W=Z,Z=L}return W+T+Z+T+(s.isUndefined(w)?k:w)}function r(d,f,h,w){var W=""+f,Z=""+h;if(!d&&W>Z){var L=W;W=Z,Z=L}var G={v:W,w:Z};return w&&(G.name=w),G}function o(d,f){return g(d,f.v,f.w,f.name)}},23617:function(V,_,a){V.exports={Graph:a(58415),version:a(58183)}},53988:function(V,_,a){var s=a(91124),k=a(58415);V.exports={write:O,read:D};function O(M){var g={options:{directed:M.isDirected(),multigraph:M.isMultigraph(),compound:M.isCompound()},nodes:T(M),edges:m(M)};return s.isUndefined(M.graph())||(g.value=s.clone(M.graph())),g}function T(M){return s.map(M.nodes(),function(g){var r=M.node(g),o=M.parent(g),d={v:g};return s.isUndefined(r)||(d.value=r),s.isUndefined(o)||(d.parent=o),d})}function m(M){return s.map(M.edges(),function(g){var r=M.edge(g),o={v:g.v,w:g.w};return s.isUndefined(g.name)||(o.name=g.name),s.isUndefined(r)||(o.value=r),o})}function D(M){var g=new k(M.options).setGraph(M.value);return s.each(M.nodes,function(r){g.setNode(r.v,r.value),r.parent&&g.setParent(r.v,r.parent)}),s.each(M.edges,function(r){g.setEdge({v:r.v,w:r.w,name:r.name},r.value)}),g}},91124:function(V,_,a){var s;try{s={clone:a(59102),constant:a(64806),each:a(15828),filter:a(3149),has:a(56611),isArray:a(24669),isEmpty:a(82691),isFunction:a(92042),isUndefined:a(89300),keys:a(50579),map:a(65512),reduce:a(6355),size:a(81430),transform:a(68742),union:a(29974),values:a(61017)}}catch(k){}s||(s=window._),V.exports=s},58183:function(V){V.exports="2.1.8"},60804:function(V,_,a){"use strict";a.r(_),a.d(_,{isAnyArray:function(){return k}});const s=Object.prototype.toString;function k(O){const T=s.call(O);return T.endsWith("Array]")&&!T.includes("Big")}},45170:function(V,_,a){var s=a(13807);function k(O,T){var m=O==null?0:O.length;return!!m&&s(O,T,0)>-1}V.exports=k},94936:function(V){function _(a,s,k){for(var O=-1,T=a==null?0:a.length;++O<T;)if(k(s,a[O]))return!0;return!1}V.exports=_},15989:function(V,_,a){var s=a(17498),k=s("length");V.exports=k},24210:function(V,_,a){var s=a(16764);function k(O,T,m){for(var D=-1,M=O.length;++D<M;){var g=O[D],r=T(g);if(r!=null&&(o===void 0?r===r&&!s(r):m(r,o)))var o=r,d=g}return d}V.exports=k},88286:function(V,_,a){var s=a(30438);function k(O,T){var m=[];return s(O,function(D,M,g){T(D,M,g)&&m.push(D)}),m}V.exports=k},92504:function(V){function _(a,s,k,O){for(var T=a.length,m=k+(O?1:-1);O?m--:++m<T;)if(s(a[m],m,a))return m;return-1}V.exports=_},98768:function(V,_,a){var s=a(28486),k=a(89465);function O(T,m,D,M,g){var r=-1,o=T.length;for(D||(D=k),g||(g=[]);++r<o;){var d=T[r];m>0&&D(d)?m>1?O(d,m-1,D,M,g):s(g,d):M||(g[g.length]=d)}return g}V.exports=O},39491:function(V){function _(a,s){return a>s}V.exports=_},45435:function(V){var _=Object.prototype,a=_.hasOwnProperty;function s(k,O){return k!=null&&a.call(k,O)}V.exports=s},13807:function(V,_,a){var s=a(92504),k=a(99940),O=a(3729);function T(m,D,M){return D===D?O(m,D,M):s(m,k,M)}V.exports=T},99940:function(V){function _(a){return a!==a}V.exports=_},42800:function(V){function _(a,s){return a<s}V.exports=_},84994:function(V,_,a){var s=a(75697),k=a(97499),O=a(5673),T=a(66494),m=a(16584),D=a(58792),M=a(35395),g=a(48148),r=a(24669);function o(d,f,h){f.length?f=s(f,function(Z){return r(Z)?function(L){return k(L,Z.length===1?Z[0]:Z)}:Z}):f=[g];var w=-1;f=s(f,D(O));var W=T(d,function(Z,L,G){var K=s(f,function(F){return F(Z)});return{criteria:K,index:++w,value:Z}});return m(W,function(Z,L){return M(Z,L,h)})}V.exports=o},54822:function(V,_,a){var s=a(32648),k=a(28281);function O(T,m){return s(T,m,function(D,M){return k(T,M)})}V.exports=O},32648:function(V,_,a){var s=a(97499),k=a(85713),O=a(60399);function T(m,D,M){for(var g=-1,r=D.length,o={};++g<r;){var d=D[g],f=s(m,d);M(f,d)&&k(o,O(d,m),f)}return o}V.exports=T},5108:function(V){var _=Math.ceil,a=Math.max;function s(k,O,T,m){for(var D=-1,M=a(_((O-k)/(T||1)),0),g=Array(M);M--;)g[m?M:++D]=k,k+=T;return g}V.exports=s},75857:function(V){function _(a,s,k,O,T){return T(a,function(m,D,M){k=O?(O=!1,m):s(k,m,D,M)}),k}V.exports=_},85713:function(V,_,a){var s=a(93719),k=a(60399),O=a(91010),T=a(36838),m=a(77817);function D(M,g,r,o){if(!T(M))return M;g=k(g,M);for(var d=-1,f=g.length,h=f-1,w=M;w!=null&&++d<f;){var W=m(g[d]),Z=r;if(W==="__proto__"||W==="constructor"||W==="prototype")return M;if(d!=h){var L=w[W];Z=o?o(L,W,w):void 0,Z===void 0&&(Z=T(L)?L:O(g[d+1])?[]:{})}s(w,W,Z),w=w[W]}return M}V.exports=D},16584:function(V){function _(a,s){var k=a.length;for(a.sort(s);k--;)a[k]=a[k].value;return a}V.exports=_},95453:function(V,_,a){var s=a(78188),k=a(45170),O=a(94936),T=a(29880),m=a(17319),D=a(79967),M=200;function g(r,o,d){var f=-1,h=k,w=r.length,W=!0,Z=[],L=Z;if(d)W=!1,h=O;else if(w>=M){var G=o?null:m(r);if(G)return D(G);W=!1,h=T,L=new s}else L=o?[]:Z;t:for(;++f<w;){var K=r[f],F=o?o(K):K;if(K=d||K!==0?K:0,W&&F===F){for(var N=L.length;N--;)if(L[N]===F)continue t;o&&L.push(F),Z.push(K)}else h(L,F,d)||(L!==Z&&L.push(F),Z.push(K))}return Z}V.exports=g},23352:function(V,_,a){var s=a(75697);function k(O,T){return s(T,function(m){return O[m]})}V.exports=k},59654:function(V){function _(a,s,k){for(var O=-1,T=a.length,m=s.length,D={};++O<T;){var M=O<m?s[O]:void 0;k(D,a[O],M)}return D}V.exports=_},24687:function(V,_,a){var s=a(16764);function k(O,T){if(O!==T){var m=O!==void 0,D=O===null,M=O===O,g=s(O),r=T!==void 0,o=T===null,d=T===T,f=s(T);if(!o&&!f&&!g&&O>T||g&&r&&d&&!o&&!f||D&&r&&d||!m&&d||!M)return 1;if(!D&&!g&&!f&&O<T||f&&m&&M&&!D&&!g||o&&m&&M||!r&&M||!d)return-1}return 0}V.exports=k},35395:function(V,_,a){var s=a(24687);function k(O,T,m){for(var D=-1,M=O.criteria,g=T.criteria,r=M.length,o=m.length;++D<r;){var d=s(M[D],g[D]);if(d){if(D>=o)return d;var f=m[D];return d*(f=="desc"?-1:1)}}return O.index-T.index}V.exports=k},34715:function(V,_,a){var s=a(5673),k=a(47428),O=a(50579);function T(m){return function(D,M,g){var r=Object(D);if(!k(D)){var o=s(M,3);D=O(D),M=function(f){return o(r[f],f,r)}}var d=m(D,M,g);return d>-1?r[o?D[d]:d]:void 0}}V.exports=T},1293:function(V,_,a){var s=a(5108),k=a(97616),O=a(70986);function T(m){return function(D,M,g){return g&&typeof g!="number"&&k(D,M,g)&&(M=g=void 0),D=O(D),M===void 0?(M=D,D=0):M=O(M),g=g===void 0?D<M?1:-1:O(g),s(D,M,g,m)}}V.exports=T},17319:function(V,_,a){var s=a(81956),k=a(43226),O=a(79967),T=1/0,m=s&&1/O(new s([,-0]))[1]==T?function(D){return new s(D)}:k;V.exports=m},54874:function(V,_,a){var s=a(22612),k=a(20323),O=a(71564);function T(m){return O(k(m,void 0,s),m+"")}V.exports=T},89465:function(V,_,a){var s=a(74396),k=a(30353),O=a(24669),T=s?s.isConcatSpreadable:void 0;function m(D){return O(D)||k(D)||!!(T&&D&&D[T])}V.exports=m},3729:function(V){function _(a,s,k){for(var O=k-1,T=a.length;++O<T;)if(a[O]===s)return O;return-1}V.exports=_},68905:function(V,_,a){var s=a(15989),k=a(30080),O=a(43352);function T(m){return k(m)?O(m):s(m)}V.exports=T},43352:function(V){var _="\\ud800-\\udfff",a="\\u0300-\\u036f",s="\\ufe20-\\ufe2f",k="\\u20d0-\\u20ff",O=a+s+k,T="\\ufe0e\\ufe0f",m="["+_+"]",D="["+O+"]",M="\\ud83c[\\udffb-\\udfff]",g="(?:"+D+"|"+M+")",r="[^"+_+"]",o="(?:\\ud83c[\\udde6-\\uddff]){2}",d="[\\ud800-\\udbff][\\udc00-\\udfff]",f="\\u200d",h=g+"?",w="["+T+"]?",W="(?:"+f+"(?:"+[r,o,d].join("|")+")"+w+h+")*",Z=w+h+W,L="(?:"+[r+D+"?",D,o,d,m].join("|")+")",G=RegExp(M+"(?="+M+")|"+L+Z,"g");function K(F){for(var N=G.lastIndex=0;G.test(F);)++N;return N}V.exports=K},59102:function(V,_,a){var s=a(67410),k=4;function O(T){return s(T,k)}V.exports=O},91099:function(V,_,a){var s=a(5125),k=a(42448),O=a(97616),T=a(37390),m=Object.prototype,D=m.hasOwnProperty,M=s(function(g,r){g=Object(g);var o=-1,d=r.length,f=d>2?r[2]:void 0;for(f&&O(r[0],r[1],f)&&(d=1);++o<d;)for(var h=r[o],w=T(h),W=-1,Z=w.length;++W<Z;){var L=w[W],G=g[L];(G===void 0||k(G,m[L])&&!D.call(g,L))&&(g[L]=h[L])}return g});V.exports=M},3149:function(V,_,a){var s=a(48969),k=a(88286),O=a(5673),T=a(24669);function m(D,M){var g=T(D)?s:k;return g(D,O(M,3))}V.exports=m},33170:function(V,_,a){var s=a(34715),k=a(33886),O=s(k);V.exports=O},33886:function(V,_,a){var s=a(92504),k=a(5673),O=a(20426),T=Math.max;function m(D,M,g){var r=D==null?0:D.length;if(!r)return-1;var o=g==null?0:O(g);return o<0&&(o=T(r+o,0)),s(D,k(M,3),o)}V.exports=m},22612:function(V,_,a){var s=a(98768);function k(O){var T=O==null?0:O.length;return T?s(O,1):[]}V.exports=k},37229:function(V,_,a){var s=a(91030),k=a(97008),O=a(37390);function T(m,D){return m==null?m:s(m,k(D),O)}V.exports=T},56611:function(V,_,a){var s=a(45435),k=a(18554);function O(T,m){return T!=null&&k(T,m,s)}V.exports=O},82691:function(V,_,a){var s=a(87473),k=a(81887),O=a(30353),T=a(24669),m=a(47428),D=a(61563),M=a(92963),g=a(73806),r="[object Map]",o="[object Set]",d=Object.prototype,f=d.hasOwnProperty;function h(w){if(w==null)return!0;if(m(w)&&(T(w)||typeof w=="string"||typeof w.splice=="function"||D(w)||g(w)||O(w)))return!w.length;var W=k(w);if(W==r||W==o)return!w.size;if(M(w))return!s(w).length;for(var Z in w)if(f.call(w,Z))return!1;return!0}V.exports=h},89300:function(V){function _(a){return a===void 0}V.exports=_},25674:function(V){function _(a){var s=a==null?0:a.length;return s?a[s-1]:void 0}V.exports=_},65632:function(V,_,a){var s=a(30404),k=a(61343),O=a(5673);function T(m,D){var M={};return D=O(D,3),k(m,function(g,r,o){s(M,r,D(g,r,o))}),M}V.exports=T},80212:function(V,_,a){var s=a(24210),k=a(39491),O=a(48148);function T(m){return m&&m.length?s(m,O,k):void 0}V.exports=T},71516:function(V,_,a){var s=a(24210),k=a(42800),O=a(48148);function T(m){return m&&m.length?s(m,O,k):void 0}V.exports=T},88371:function(V,_,a){var s=a(24210),k=a(5673),O=a(42800);function T(m,D){return m&&m.length?s(m,k(D,2),O):void 0}V.exports=T},43226:function(V){function _(){}V.exports=_},19334:function(V,_,a){var s=a(54822),k=a(54874),O=k(function(T,m){return T==null?{}:s(T,m)});V.exports=O},61178:function(V,_,a){var s=a(1293),k=s();V.exports=k},6355:function(V,_,a){var s=a(30695),k=a(30438),O=a(5673),T=a(75857),m=a(24669);function D(M,g,r){var o=m(M)?s:T,d=arguments.length<3;return o(M,O(g,4),r,d,k)}V.exports=D},81430:function(V,_,a){var s=a(87473),k=a(81887),O=a(47428),T=a(56549),m=a(68905),D="[object Map]",M="[object Set]";function g(r){if(r==null)return 0;if(O(r))return T(r)?m(r):r.length;var o=k(r);return o==D||o==M?r.size:s(r).length}V.exports=g},84715:function(V,_,a){var s=a(98768),k=a(84994),O=a(5125),T=a(97616),m=O(function(D,M){if(D==null)return[];var g=M.length;return g>1&&T(D,M[0],M[1])?M=[]:g>2&&T(M[0],M[1],M[2])&&(M=[M[0]]),k(D,s(M,1),[])});V.exports=m},70986:function(V,_,a){var s=a(12448),k=1/0,O=17976931348623157e292;function T(m){if(!m)return m===0?m:0;if(m=s(m),m===k||m===-k){var D=m<0?-1:1;return D*O}return m===m?m:0}V.exports=T},20426:function(V,_,a){var s=a(70986);function k(O){var T=s(O),m=T%1;return T===T?m?T-m:T:0}V.exports=k},68742:function(V,_,a){var s=a(21662),k=a(91348),O=a(61343),T=a(5673),m=a(11389),D=a(24669),M=a(61563),g=a(92042),r=a(36838),o=a(73806);function d(f,h,w){var W=D(f),Z=W||M(f)||o(f);if(h=T(h,4),w==null){var L=f&&f.constructor;Z?w=W?new L:[]:r(f)?w=g(L)?k(m(f)):{}:w={}}return(Z?s:O)(f,function(G,K,F){return h(w,G,K,F)}),w}V.exports=d},29974:function(V,_,a){var s=a(98768),k=a(5125),O=a(95453),T=a(57348),m=k(function(D){return O(s(D,1,T,!0))});V.exports=m},53274:function(V,_,a){var s=a(8389),k=0;function O(T){var m=++k;return s(T)+m}V.exports=O},61017:function(V,_,a){var s=a(23352),k=a(50579);function O(T){return T==null?[]:s(T,k(T))}V.exports=O},64058:function(V,_,a){var s=a(93719),k=a(59654);function O(T,m){return k(T||[],m||[],s)}V.exports=O},85650:function(V,_,a){"use strict";a.r(_),a.d(_,{default:function(){return T}});var s=a(60804);function k(m){var D=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(!(0,s.isAnyArray)(m))throw new TypeError("input must be an array");if(m.length===0)throw new TypeError("input must not be empty");var M=D.fromIndex,g=M===void 0?0:M,r=D.toIndex,o=r===void 0?m.length:r;if(g<0||g>=m.length||!Number.isInteger(g))throw new Error("fromIndex must be a positive integer smaller than length");if(o<=g||o>m.length||!Number.isInteger(o))throw new Error("toIndex must be an integer greater than fromIndex and at most equal to length");for(var d=m[g],f=g+1;f<o;f++)m[f]>d&&(d=m[f]);return d}function O(m){var D=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(!(0,s.isAnyArray)(m))throw new TypeError("input must be an array");if(m.length===0)throw new TypeError("input must not be empty");var M=D.fromIndex,g=M===void 0?0:M,r=D.toIndex,o=r===void 0?m.length:r;if(g<0||g>=m.length||!Number.isInteger(g))throw new Error("fromIndex must be a positive integer smaller than length");if(o<=g||o>m.length||!Number.isInteger(o))throw new Error("toIndex must be an integer greater than fromIndex and at most equal to length");for(var d=m[g],f=g+1;f<o;f++)m[f]<d&&(d=m[f]);return d}function T(m){var D=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if((0,s.isAnyArray)(m)){if(m.length===0)throw new TypeError("input must not be empty")}else throw new TypeError("input must be an array");var M;if(D.output!==void 0){if(!(0,s.isAnyArray)(D.output))throw new TypeError("output option must be an array if specified");M=D.output}else M=new Array(m.length);var g=O(m),r=k(m);if(g===r)throw new RangeError("minimum and maximum input values are equal. Cannot rescale a constant array");var o=D.min,d=o===void 0?D.autoMinMax?g:0:o,f=D.max,h=f===void 0?D.autoMinMax?r:1:f;if(d>=h)throw new RangeError("min option must be smaller than max option");for(var w=(h-d)/(r-g),W=0;W<m.length;W++)M[W]=(m[W]-g)*w+d;return M}},717:function(V){function _(a,s){if(s.has(a))throw new TypeError("Cannot initialize the same private elements twice on an object")}V.exports=_,V.exports.__esModule=!0,V.exports.default=V.exports},15972:function(V){function _(a,s){return s.get?s.get.call(a):s.value}V.exports=_,V.exports.__esModule=!0,V.exports.default=V.exports},29313:function(V){function _(a,s,k){if(s.set)s.set.call(a,k);else{if(!s.writable)throw new TypeError("attempted to set read only private field");s.value=k}}V.exports=_,V.exports.__esModule=!0,V.exports.default=V.exports},60248:function(V){function _(a,s,k){if(!s.has(a))throw new TypeError("attempted to "+k+" private field on non-instance");return s.get(a)}V.exports=_,V.exports.__esModule=!0,V.exports.default=V.exports},20910:function(V,_,a){var s=a(15972),k=a(60248);function O(T,m){var D=k(T,m,"get");return s(T,D)}V.exports=O,V.exports.__esModule=!0,V.exports.default=V.exports},18733:function(V,_,a){var s=a(717);function k(O,T,m){s(O,T),T.set(O,m)}V.exports=k,V.exports.__esModule=!0,V.exports.default=V.exports},2546:function(V,_,a){var s=a(29313),k=a(60248);function O(T,m,D){var M=k(T,m,"set");return s(T,M,D),D}V.exports=O,V.exports.__esModule=!0,V.exports.default=V.exports},58568:function(V){function _(a,s,k){if(!s.has(a))throw new TypeError("attempted to get private field on non-instance");return k}V.exports=_,V.exports.__esModule=!0,V.exports.default=V.exports},60967:function(V,_,a){var s=a(717);function k(O,T){s(O,T),T.add(O)}V.exports=k,V.exports.__esModule=!0,V.exports.default=V.exports},9504:function(V,_,a){var s=a(28007);function k(){return typeof Reflect!="undefined"&&Reflect.get?(V.exports=k=Reflect.get.bind(),V.exports.__esModule=!0,V.exports.default=V.exports):(V.exports=k=function(T,m,D){var M=s(T,m);if(M){var g=Object.getOwnPropertyDescriptor(M,m);return g.get?g.get.call(arguments.length<3?T:D):g.value}},V.exports.__esModule=!0,V.exports.default=V.exports),k.apply(this,arguments)}V.exports=k,V.exports.__esModule=!0,V.exports.default=V.exports},28007:function(V,_,a){var s=a(38836);function k(O,T){for(;!Object.prototype.hasOwnProperty.call(O,T)&&(O=s(O),O!==null););return O}V.exports=k,V.exports.__esModule=!0,V.exports.default=V.exports},29639:function(V,_,a){"use strict";a.d(_,{Sc:function(){return X},y3:function(){return o}});var s=a(94514),k=s.XA,O=s.a_,T=s.yQ,m=s.Hs,D=s.Ec,M=s.dx,g=s.LU,r=s.Rm,o=s.y3,d=s.qK,f=s.pb,h=s.j,w=s.sO,W=s.BZ,Z=s.EK,L=s.Db,G=s.Fx,K=s.tU,F=s.Ym,N=s.rs,I=s.QR,z=s.TB,J=s.oH,X=s.Sc,U=s.BN,P=s.it,S=s.$r,Y=s.QM,C=s.AV,$=(s.y3,s.y3),j=s.GH,ot=s.SO,st=s.uZ,it=s.yU,gt=s.F1,yt=s.re},66745:function(V,_,a){"use strict";a.d(_,{Z:function(){return z}});function s(P){const S=+this._x.call(null,P),Y=+this._y.call(null,P),C=+this._z.call(null,P);return k(this.cover(S,Y,C),S,Y,C,P)}function k(P,S,Y,C,$){if(isNaN(S)||isNaN(Y)||isNaN(C))return P;var j,ot=P._root,st={data:$},it=P._x0,gt=P._y0,yt=P._z0,pt=P._x1,bt=P._y1,wt=P._z1,tt,at,lt,ct,xt,Et,Nt,St,Tt,zt,Zt;if(!ot)return P._root=st,P;for(;ot.length;)if((Nt=S>=(tt=(it+pt)/2))?it=tt:pt=tt,(St=Y>=(at=(gt+bt)/2))?gt=at:bt=at,(Tt=C>=(lt=(yt+wt)/2))?yt=lt:wt=lt,j=ot,!(ot=ot[zt=Tt<<2|St<<1|Nt]))return j[zt]=st,P;if(ct=+P._x.call(null,ot.data),xt=+P._y.call(null,ot.data),Et=+P._z.call(null,ot.data),S===ct&&Y===xt&&C===Et)return st.next=ot,j?j[zt]=st:P._root=st,P;do j=j?j[zt]=new Array(8):P._root=new Array(8),(Nt=S>=(tt=(it+pt)/2))?it=tt:pt=tt,(St=Y>=(at=(gt+bt)/2))?gt=at:bt=at,(Tt=C>=(lt=(yt+wt)/2))?yt=lt:wt=lt;while((zt=Tt<<2|St<<1|Nt)===(Zt=(Et>=lt)<<2|(xt>=at)<<1|ct>=tt));return j[Zt]=ot,j[zt]=st,P}function O(P){Array.isArray(P)||(P=Array.from(P));const S=P.length,Y=new Float64Array(S),C=new Float64Array(S),$=new Float64Array(S);let j=1/0,ot=1/0,st=1/0,it=-1/0,gt=-1/0,yt=-1/0;for(let pt=0,bt,wt,tt,at;pt<S;++pt)isNaN(wt=+this._x.call(null,bt=P[pt]))||isNaN(tt=+this._y.call(null,bt))||isNaN(at=+this._z.call(null,bt))||(Y[pt]=wt,C[pt]=tt,$[pt]=at,wt<j&&(j=wt),wt>it&&(it=wt),tt<ot&&(ot=tt),tt>gt&&(gt=tt),at<st&&(st=at),at>yt&&(yt=at));if(j>it||ot>gt||st>yt)return this;this.cover(j,ot,st).cover(it,gt,yt);for(let pt=0;pt<S;++pt)k(this,Y[pt],C[pt],$[pt],P[pt]);return this}function T(P,S,Y){if(isNaN(P=+P)||isNaN(S=+S)||isNaN(Y=+Y))return this;var C=this._x0,$=this._y0,j=this._z0,ot=this._x1,st=this._y1,it=this._z1;if(isNaN(C))ot=(C=Math.floor(P))+1,st=($=Math.floor(S))+1,it=(j=Math.floor(Y))+1;else{for(var gt=ot-C||1,yt=this._root,pt,bt;C>P||P>=ot||$>S||S>=st||j>Y||Y>=it;)switch(bt=(Y<j)<<2|(S<$)<<1|P<C,pt=new Array(8),pt[bt]=yt,yt=pt,gt*=2,bt){case 0:ot=C+gt,st=$+gt,it=j+gt;break;case 1:C=ot-gt,st=$+gt,it=j+gt;break;case 2:ot=C+gt,$=st-gt,it=j+gt;break;case 3:C=ot-gt,$=st-gt,it=j+gt;break;case 4:ot=C+gt,st=$+gt,j=it-gt;break;case 5:C=ot-gt,st=$+gt,j=it-gt;break;case 6:ot=C+gt,$=st-gt,j=it-gt;break;case 7:C=ot-gt,$=st-gt,j=it-gt;break}this._root&&this._root.length&&(this._root=yt)}return this._x0=C,this._y0=$,this._z0=j,this._x1=ot,this._y1=st,this._z1=it,this}function m(){var P=[];return this.visit(function(S){if(!S.length)do P.push(S.data);while(S=S.next)}),P}function D(P){return arguments.length?this.cover(+P[0][0],+P[0][1],+P[0][2]).cover(+P[1][0],+P[1][1],+P[1][2]):isNaN(this._x0)?void 0:[[this._x0,this._y0,this._z0],[this._x1,this._y1,this._z1]]}function M(P,S,Y,C,$,j,ot){this.node=P,this.x0=S,this.y0=Y,this.z0=C,this.x1=$,this.y1=j,this.z1=ot}function g(P,S,Y,C){var $,j=this._x0,ot=this._y0,st=this._z0,it,gt,yt,pt,bt,wt,tt=this._x1,at=this._y1,lt=this._z1,ct=[],xt=this._root,Et,Nt;for(xt&&ct.push(new M(xt,j,ot,st,tt,at,lt)),C==null?C=1/0:(j=P-C,ot=S-C,st=Y-C,tt=P+C,at=S+C,lt=Y+C,C*=C);Et=ct.pop();)if(!(!(xt=Et.node)||(it=Et.x0)>tt||(gt=Et.y0)>at||(yt=Et.z0)>lt||(pt=Et.x1)<j||(bt=Et.y1)<ot||(wt=Et.z1)<st))if(xt.length){var St=(it+pt)/2,Tt=(gt+bt)/2,zt=(yt+wt)/2;ct.push(new M(xt[7],St,Tt,zt,pt,bt,wt),new M(xt[6],it,Tt,zt,St,bt,wt),new M(xt[5],St,gt,zt,pt,Tt,wt),new M(xt[4],it,gt,zt,St,Tt,wt),new M(xt[3],St,Tt,yt,pt,bt,zt),new M(xt[2],it,Tt,yt,St,bt,zt),new M(xt[1],St,gt,yt,pt,Tt,zt),new M(xt[0],it,gt,yt,St,Tt,zt)),(Nt=(Y>=zt)<<2|(S>=Tt)<<1|P>=St)&&(Et=ct[ct.length-1],ct[ct.length-1]=ct[ct.length-1-Nt],ct[ct.length-1-Nt]=Et)}else{var Zt=P-+this._x.call(null,xt.data),oe=S-+this._y.call(null,xt.data),he=Y-+this._z.call(null,xt.data),ye=Zt*Zt+oe*oe+he*he;if(ye<C){var ie=Math.sqrt(C=ye);j=P-ie,ot=S-ie,st=Y-ie,tt=P+ie,at=S+ie,lt=Y+ie,$=xt.data}}return $}const r=(P,S,Y,C,$,j)=>Math.sqrt(An(P-C,2)+An(S-$,2)+An(Y-j,2));function o(P,S,Y,C){const $=[],j=P-C,ot=S-C,st=Y-C,it=P+C,gt=S+C,yt=Y+C;return this.visit((pt,bt,wt,tt,at,lt,ct)=>{if(!pt.length)do{const xt=pt.data;r(P,S,Y,this._x(xt),this._y(xt),this._z(xt))<=C&&$.push(xt)}while(pt=pt.next);return bt>it||wt>gt||tt>yt||at<j||lt<ot||ct<st}),$}function d(P){if(isNaN(bt=+this._x.call(null,P))||isNaN(wt=+this._y.call(null,P))||isNaN(tt=+this._z.call(null,P)))return this;var S,Y=this._root,C,$,j,ot=this._x0,st=this._y0,it=this._z0,gt=this._x1,yt=this._y1,pt=this._z1,bt,wt,tt,at,lt,ct,xt,Et,Nt,St,Tt;if(!Y)return this;if(Y.length)for(;;){if((xt=bt>=(at=(ot+gt)/2))?ot=at:gt=at,(Et=wt>=(lt=(st+yt)/2))?st=lt:yt=lt,(Nt=tt>=(ct=(it+pt)/2))?it=ct:pt=ct,S=Y,!(Y=Y[St=Nt<<2|Et<<1|xt]))return this;if(!Y.length)break;(S[St+1&7]||S[St+2&7]||S[St+3&7]||S[St+4&7]||S[St+5&7]||S[St+6&7]||S[St+7&7])&&(C=S,Tt=St)}for(;Y.data!==P;)if($=Y,!(Y=Y.next))return this;return(j=Y.next)&&delete Y.next,$?(j?$.next=j:delete $.next,this):S?(j?S[St]=j:delete S[St],(Y=S[0]||S[1]||S[2]||S[3]||S[4]||S[5]||S[6]||S[7])&&Y===(S[7]||S[6]||S[5]||S[4]||S[3]||S[2]||S[1]||S[0])&&!Y.length&&(C?C[Tt]=Y:this._root=Y),this):(this._root=j,this)}function f(P){for(var S=0,Y=P.length;S<Y;++S)this.remove(P[S]);return this}function h(){return this._root}function w(){var P=0;return this.visit(function(S){if(!S.length)do++P;while(S=S.next)}),P}function W(P){var S=[],Y,C=this._root,$,j,ot,st,it,gt,yt;for(C&&S.push(new M(C,this._x0,this._y0,this._z0,this._x1,this._y1,this._z1));Y=S.pop();)if(!P(C=Y.node,j=Y.x0,ot=Y.y0,st=Y.z0,it=Y.x1,gt=Y.y1,yt=Y.z1)&&C.length){var pt=(j+it)/2,bt=(ot+gt)/2,wt=(st+yt)/2;($=C[7])&&S.push(new M($,pt,bt,wt,it,gt,yt)),($=C[6])&&S.push(new M($,j,bt,wt,pt,gt,yt)),($=C[5])&&S.push(new M($,pt,ot,wt,it,bt,yt)),($=C[4])&&S.push(new M($,j,ot,wt,pt,bt,yt)),($=C[3])&&S.push(new M($,pt,bt,st,it,gt,wt)),($=C[2])&&S.push(new M($,j,bt,st,pt,gt,wt)),($=C[1])&&S.push(new M($,pt,ot,st,it,bt,wt)),($=C[0])&&S.push(new M($,j,ot,st,pt,bt,wt))}return this}function Z(P){var S=[],Y=[],C;for(this._root&&S.push(new M(this._root,this._x0,this._y0,this._z0,this._x1,this._y1,this._z1));C=S.pop();){var $=C.node;if($.length){var j,ot=C.x0,st=C.y0,it=C.z0,gt=C.x1,yt=C.y1,pt=C.z1,bt=(ot+gt)/2,wt=(st+yt)/2,tt=(it+pt)/2;(j=$[0])&&S.push(new M(j,ot,st,it,bt,wt,tt)),(j=$[1])&&S.push(new M(j,bt,st,it,gt,wt,tt)),(j=$[2])&&S.push(new M(j,ot,wt,it,bt,yt,tt)),(j=$[3])&&S.push(new M(j,bt,wt,it,gt,yt,tt)),(j=$[4])&&S.push(new M(j,ot,st,tt,bt,wt,pt)),(j=$[5])&&S.push(new M(j,bt,st,tt,gt,wt,pt)),(j=$[6])&&S.push(new M(j,ot,wt,tt,bt,yt,pt)),(j=$[7])&&S.push(new M(j,bt,wt,tt,gt,yt,pt))}Y.push(C)}for(;C=Y.pop();)P(C.node,C.x0,C.y0,C.z0,C.x1,C.y1,C.z1);return this}function L(P){return P[0]}function G(P){return arguments.length?(this._x=P,this):this._x}function K(P){return P[1]}function F(P){return arguments.length?(this._y=P,this):this._y}function N(P){return P[2]}function I(P){return arguments.length?(this._z=P,this):this._z}function z(P,S,Y,C){var $=new J(S==null?L:S,Y==null?K:Y,C==null?N:C,NaN,NaN,NaN,NaN,NaN,NaN);return P==null?$:$.addAll(P)}function J(P,S,Y,C,$,j,ot,st,it){this._x=P,this._y=S,this._z=Y,this._x0=C,this._y0=$,this._z0=j,this._x1=ot,this._y1=st,this._z1=it,this._root=void 0}function X(P){for(var S={data:P.data},Y=S;P=P.next;)Y=Y.next={data:P.data};return S}var U=z.prototype=J.prototype;U.copy=function(){var P=new J(this._x,this._y,this._z,this._x0,this._y0,this._z0,this._x1,this._y1,this._z1),S=this._root,Y,C;if(!S)return P;if(!S.length)return P._root=X(S),P;for(Y=[{source:S,target:P._root=new Array(8)}];S=Y.pop();)for(var $=0;$<8;++$)(C=S.source[$])&&(C.length?Y.push({source:C,target:S.target[$]=new Array(8)}):S.target[$]=X(C));return P},U.add=s,U.addAll=O,U.cover=T,U.data=m,U.extent=D,U.find=g,U.findAllWithinRadius=o,U.remove=d,U.removeAll=f,U.root=h,U.size=w,U.visit=W,U.visitAfter=Z,U.x=G,U.y=F,U.z=I}}]);
}());