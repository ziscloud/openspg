"use strict";(self.webpackChunkcognik_web_app=self.webpackChunkcognik_web_app||[]).push([[6234],{65729:function(pe,K,n){n.d(K,{Z:function(){return H}});var M=n(55443),A=n(75271),U={icon:{tag:"svg",attrs:{"fill-rule":"evenodd",viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M512 64c247.4 0 448 200.6 448 448S759.4 960 512 960 64 759.4 64 512 264.6 64 512 64zm0 76c-205.4 0-372 166.6-372 372s166.6 372 372 372 372-166.6 372-372-166.6-372-372-372zm128.01 198.83c.03 0 .05.01.09.06l45.02 45.01a.2.2 0 01.05.09.12.12 0 010 .07c0 .02-.01.04-.05.08L557.25 512l127.87 127.86a.27.27 0 01.05.06v.02a.12.12 0 010 .07c0 .03-.01.05-.05.09l-45.02 45.02a.2.2 0 01-.09.05.12.12 0 01-.07 0c-.02 0-.04-.01-.08-.05L512 557.25 384.14 685.12c-.04.04-.06.05-.08.05a.12.12 0 01-.07 0c-.03 0-.05-.01-.09-.05l-45.02-45.02a.2.2 0 01-.05-.09.12.12 0 010-.07c0-.02.01-.04.06-.08L466.75 512 338.88 384.14a.27.27 0 01-.05-.06l-.01-.02a.12.12 0 010-.07c0-.03.01-.05.05-.09l45.02-45.02a.2.2 0 01.09-.05.12.12 0 01.07 0c.02 0 .04.01.08.06L512 466.75l127.86-127.86c.04-.05.06-.06.08-.06a.12.12 0 01.07 0z"}}]},name:"close-circle",theme:"outlined"},J=U,Y=n(58720),Q=function(X,w){return A.createElement(Y.Z,(0,M.Z)((0,M.Z)({},X),{},{ref:w,icon:J}))},z=A.forwardRef(Q),H=z},51716:function(pe,K,n){n.r(K),n.d(K,{default:function(){return Xe}});var M=n(90228),A=n.n(M),U=n(87999),J=n.n(U),Y=n(48305),Q=n.n(Y),z=n(65729),H=n(27318),te=n(64785),X=n(67709),w=n(14378),D=n(29808),ye=n(70777),i=n(55443),G=n(38334),Ze=n(60274),h=n(75271),le=n(5594),oe=n(20451),r=n(52676),Fe=["fieldProps","proFieldProps"],Ce=["fieldProps","proFieldProps"],ie="time",je=h.forwardRef(function(e,d){var f=e.fieldProps,x=e.proFieldProps,j=(0,G.Z)(e,Fe),y=(0,h.useContext)(le.Z);return(0,r.jsx)(oe.Z,(0,i.Z)({ref:d,fieldProps:(0,i.Z)({getPopupContainer:y.getPopupContainer},f),valueType:"timeRange",proFieldProps:x,filedConfig:{valueType:"timeRange",customLightMode:!0,lightFilterLabelFormatter:function(E){return(0,Ze.c)(E,"HH:mm:ss")}}},j))}),Pe=function(d){var f=d.fieldProps,x=d.proFieldProps,j=(0,G.Z)(d,Ce),y=(0,h.useContext)(le.Z);return(0,r.jsx)(oe.Z,(0,i.Z)({fieldProps:(0,i.Z)({getPopupContainer:y.getPopupContainer},f),valueType:ie,proFieldProps:x,filedConfig:{customLightMode:!0,valueType:ie}},j))},ue=Pe;ue.RangePicker=je;var be=ue,Re=n(35576),Te=n(52521),de=n(94162),Ee=n(84964),Be=n(11098),Se=n(27054),Ae=n(64823),Ve=n(70661),se=n(40545),Ie=n(65546),ce=n(86757),we=n(31253),De=n(68658),Ne=n(28320),Le=n(93954),q=n(36040),ve=n(27636),$e=n(32258),Oe=["onTableChange","maxLength","formItemProps","recordCreatorProps","rowKey","controlled","defaultValue","onChange","editableFormRef"],ke=["record","position","creatorButtonText","newRecordType","parentKey","style"],me=h.createContext(void 0);function fe(e){var d=e.children,f=e.record,x=e.position,j=e.newRecordType,y=e.parentKey,T=(0,h.useContext)(me);return h.cloneElement(d,(0,i.Z)((0,i.Z)({},d.props),{},{onClick:function(){var E=(0,Ee.Z)((0,de.Z)().mark(function L($){var b,p,g,R;return(0,de.Z)().wrap(function(l){for(;;)switch(l.prev=l.next){case 0:return l.next=2,(b=(p=d.props).onClick)===null||b===void 0?void 0:b.call(p,$);case 2:if(R=l.sent,R!==!1){l.next=5;break}return l.abrupt("return");case 5:T==null||(g=T.current)===null||g===void 0||g.addEditRecord(f,{position:x,newRecordType:j,parentKey:y});case 6:case"end":return l.stop()}},L)}));function B(L){return E.apply(this,arguments)}return B}()}))}function he(e){var d,f,x=(0,Ve.YB)(),j=e.onTableChange,y=e.maxLength,T=e.formItemProps,E=e.recordCreatorProps,B=e.rowKey,L=e.controlled,$=e.defaultValue,b=e.onChange,p=e.editableFormRef,g=(0,G.Z)(e,Oe),R=(0,h.useRef)(void 0),v=(0,h.useRef)(),l=(0,h.useRef)();(0,h.useImperativeHandle)(g.actionRef,function(){return v.current},[v.current]);var P=(0,Le.Z)(function(){return e.value||$||[]},{value:e.value,onChange:e.onChange}),N=(0,Te.Z)(P,2),s=N[0],qe=N[1],V=h.useMemo(function(){return typeof B=="function"?B:function(a,m){return a[B]||m}},[B]),re=(0,se.J)(function(a){if(typeof a=="number"&&!e.name){if(a>=s.length)return a;var m=s&&s[a];return V==null?void 0:V(m,a)}if((typeof a=="string"||a>=s.length)&&e.name){var t=s.findIndex(function(o,u){var c;return(V==null||(c=V(o,u))===null||c===void 0?void 0:c.toString())===(a==null?void 0:a.toString())});if(t!==-1)return t}return a});(0,h.useImperativeHandle)(p,function(){var a=function(o){var u,c;if(o==null)throw new Error("rowIndex is required");var Z=re(o),S=[e.name,(u=Z==null?void 0:Z.toString())!==null&&u!==void 0?u:""].flat(1).filter(Boolean);return(c=l.current)===null||c===void 0?void 0:c.getFieldValue(S)},m=function(){var o,u=[e.name].flat(1).filter(Boolean);if(Array.isArray(u)&&u.length===0){var c,Z=(c=l.current)===null||c===void 0?void 0:c.getFieldsValue();return Array.isArray(Z)?Z:Object.keys(Z).map(function(S){return Z[S]})}return(o=l.current)===null||o===void 0?void 0:o.getFieldValue(u)};return(0,i.Z)((0,i.Z)({},l.current),{},{getRowData:a,getRowsData:m,setRowData:function(o,u){var c,Z;if(o==null)throw new Error("rowIndex is required");var S=re(o),k=[e.name,(c=S==null?void 0:S.toString())!==null&&c!==void 0?c:""].flat(1).filter(Boolean),ir=Object.assign({},(0,i.Z)((0,i.Z)({},a(o)),u||{})),ur=(0,ve.Z)({},k,ir);return(Z=l.current)===null||Z===void 0||Z.setFieldsValue(ur),!0}})},[re,e.name,l.current]),(0,h.useEffect)(function(){e.controlled&&(s||[]).forEach(function(a,m){var t;(t=l.current)===null||t===void 0||t.setFieldsValue((0,Re.Z)({},"".concat(V(a,m)),a))},{})},[(0,Ie.ZP)(s),e.controlled]),(0,h.useEffect)(function(){if(e.name){var a;l.current=e==null||(a=e.editable)===null||a===void 0?void 0:a.form}},[(d=e.editable)===null||d===void 0?void 0:d.form,e.name]);var I=E||{},_e=I.record,ne=I.position,er=I.creatorButtonText,rr=I.newRecordType,nr=I.parentKey,ar=I.style,tr=(0,G.Z)(I,ke),xe=ne==="top",O=(0,h.useMemo)(function(){return typeof y=="number"&&y<=(s==null?void 0:s.length)?!1:E!==!1&&(0,r.jsx)(fe,{record:(0,ce.h)(_e,s==null?void 0:s.length,s)||{},position:ne,parentKey:(0,ce.h)(nr,s==null?void 0:s.length,s),newRecordType:rr,children:(0,r.jsx)(De.ZP,(0,i.Z)((0,i.Z)({type:"dashed",style:(0,i.Z)({display:"block",margin:"10px 0",width:"100%"},ar),icon:(0,r.jsx)(Be.Z,{})},tr),{},{children:er||x.getMessage("editableTable.action.add","\u6DFB\u52A0\u4E00\u884C\u6570\u636E")}))})},[E,y,s==null?void 0:s.length]),lr=(0,h.useMemo)(function(){return O?xe?{components:{header:{wrapper:function(m){var t,o=m.className,u=m.children;return(0,r.jsxs)("thead",{className:o,children:[u,(0,r.jsxs)("tr",{style:{position:"relative"},children:[(0,r.jsx)("td",{colSpan:0,style:{visibility:"hidden"},children:O}),(0,r.jsx)("td",{style:{position:"absolute",left:0,width:"100%"},colSpan:(t=g.columns)===null||t===void 0?void 0:t.length,children:O})]})]})}}}}:{tableViewRender:function(m,t){var o,u;return(0,r.jsxs)(r.Fragment,{children:[(o=(u=e.tableViewRender)===null||u===void 0?void 0:u.call(e,m,t))!==null&&o!==void 0?o:t,O]})}}:{}},[xe,O]),ae=(0,i.Z)({},e.editable),or=(0,se.J)(function(a,m){var t,o,u;if((t=e.editable)===null||t===void 0||(o=t.onValuesChange)===null||o===void 0||o.call(t,a,m),(u=e.onValuesChange)===null||u===void 0||u.call(e,m,a),e.controlled){var c;e==null||(c=e.onChange)===null||c===void 0||c.call(e,m)}});return(e!=null&&e.onValuesChange||(f=e.editable)!==null&&f!==void 0&&f.onValuesChange||e.controlled&&e!==null&&e!==void 0&&e.onChange)&&(ae.onValuesChange=or),(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(me.Provider,{value:v,children:(0,r.jsx)($e.Z,(0,i.Z)((0,i.Z)((0,i.Z)({search:!1,options:!1,pagination:!1,rowKey:B,revalidateOnFocus:!1},g),lr),{},{tableLayout:"fixed",actionRef:v,onChange:j,editable:(0,i.Z)((0,i.Z)({},ae),{},{formProps:(0,i.Z)({formRef:l},ae.formProps)}),dataSource:s,onDataSourceChange:function(m){if(qe(m),e.name&&ne==="top"){var t,o=(0,ve.Z)({},[e.name].flat(1).filter(Boolean),m);(t=l.current)===null||t===void 0||t.setFieldsValue(o)}}}))}),e.name?(0,r.jsx)(Se.Z,{name:[e.name],children:function(m){var t,o;if(!R.current)return R.current=s,null;var u=(0,q.Z)(m,[e.name].flat(1)),c=u==null?void 0:u.find(function(Z,S){var k;return!(0,we.A)(Z,(k=R.current)===null||k===void 0?void 0:k[S])});return R.current=s,c&&(e==null||(t=e.editable)===null||t===void 0||(o=t.onValuesChange)===null||o===void 0||o.call(t,c,u)),null}}):null]})}function ge(e){var d=Ae.ZP.useFormInstance();return e.name?(0,r.jsx)(Ne.Z.Item,(0,i.Z)((0,i.Z)({style:{maxWidth:"100%"},shouldUpdate:function(x,j){var y=[e.name].flat(1);try{return JSON.stringify((0,q.Z)(x,y))!==JSON.stringify((0,q.Z)(j,y))}catch(T){return!0}}},e==null?void 0:e.formItemProps),{},{name:e.name,children:(0,r.jsx)(he,(0,i.Z)((0,i.Z)({tableLayout:"fixed",scroll:{x:"max-content"}},e),{},{editable:(0,i.Z)((0,i.Z)({},e.editable),{},{form:d})}))})):(0,r.jsx)(he,(0,i.Z)({tableLayout:"fixed",scroll:{x:"max-content"}},e))}ge.RecordCreator=fe;var Ke=ge,Me=n(45636),Je=n(69230),_=n(77758),W=n(46057),C=n(68151),ze=n(86487);function He(e){return ee.apply(this,arguments)}function ee(){return ee=J()(A()().mark(function e(d){return A()().wrap(function(x){for(;;)switch(x.prev=x.next){case 0:return x.abrupt("return",(0,ze.request)("/api/advancedForm",{method:"POST",data:d}));case 1:case"end":return x.stop()}},e)})),ee.apply(this,arguments)}var Ge=n(26551),We=(0,Ge.kc)(function(e){var d=e.token;return{card:{marginBottom:"24px",".ant-legacy-form-item .ant-legacy-form-item-control-wrapper":{width:"100%"}},errorIcon:{marginRight:"12px",color:d.colorError,cursor:"pointer","span.anticon":{marginRight:"4px"},float:"left",marginTop:"4px",paddingBottom:"22px"},errorPopover:{".ant-popover-inner-content":{minWidth:"256px",maxHeight:"290px",padding:"0",overflow:"auto"}},errorListItem:{padding:"8px 16px",listStyle:"none",borderBottom:"1px solid ".concat(d.colorSplit),cursor:"pointer",transition:"all 0.3s","&:hover":{background:d.colorBgTextActive},"&:last-child":{border:"0"}},errorField:{marginTop:"2px",color:d.colorTextSecondary,fontSize:"12px"},editable:{td:{paddingTop:"13px",paddingBottom:"12.5px"}}}}),Ue=We,F={name:"\u4ED3\u5E93\u540D",url:"\u4ED3\u5E93\u57DF\u540D",owner:"\u4ED3\u5E93\u7BA1\u7406\u5458",approver:"\u5BA1\u6279\u4EBA",dateRange:"\u751F\u6548\u65E5\u671F",type:"\u4ED3\u5E93\u7C7B\u578B",name2:"\u4EFB\u52A1\u540D",url2:"\u4EFB\u52A1\u63CF\u8FF0",owner2:"\u6267\u884C\u4EBA",approver2:"\u8D23\u4EFB\u4EBA",dateRange2:"\u751F\u6548\u65E5\u671F",type2:"\u4EFB\u52A1\u7C7B\u578B"},Ye=[{key:"1",workId:"00001",name:"John Brown",department:"New York No. 1 Lake Park"},{key:"2",workId:"00002",name:"Jim Green",department:"London No. 1 Lake Park"},{key:"3",workId:"00003",name:"Joe Black",department:"Sidney No. 1 Lake Park"}],Qe=function(){var d=Ue(),f=d.styles,x=(0,h.useState)([]),j=Q()(x,2),y=j[0],T=j[1],E=function(p){var g=p.filter(function(l){return l.errors.length>0}).length;if(!p||g===0)return null;var R=function(P){var N=document.querySelector('label[for="'.concat(P,'"]'));N&&N.scrollIntoView(!0)},v=p.map(function(l){if(!l||l.errors.length===0)return null;var P=l.name[0];return(0,r.jsxs)("li",{className:f.errorListItem,onClick:function(){return R(P)},children:[(0,r.jsx)(z.Z,{className:f.errorIcon}),(0,r.jsx)("div",{className:f.errorMessage,children:l.errors[0]}),(0,r.jsx)("div",{className:f.errorField,children:F[P]})]},P)});return(0,r.jsxs)("span",{className:f.errorIcon,children:[(0,r.jsx)(Me.Z,{title:"\u8868\u5355\u6821\u9A8C\u4FE1\u606F",content:v,overlayClassName:f.errorPopover,trigger:"click",getPopupContainer:function(P){return P&&P.parentNode?P.parentNode:P},children:(0,r.jsx)(z.Z,{})}),g]})},B=function(){var b=J()(A()().mark(function p(g){return A()().wrap(function(v){for(;;)switch(v.prev=v.next){case 0:return T([]),v.prev=1,v.next=4,He(g);case 4:Je.ZP.success("\u63D0\u4EA4\u6210\u529F"),v.next=9;break;case 7:v.prev=7,v.t0=v.catch(1);case 9:case"end":return v.stop()}},p,null,[[1,7]])}));return function(g){return b.apply(this,arguments)}}(),L=function(p){T(p.errorFields)},$=[{title:"\u6210\u5458\u59D3\u540D",dataIndex:"name",key:"name",width:"20%"},{title:"\u5DE5\u53F7",dataIndex:"workId",key:"workId",width:"20%"},{title:"\u6240\u5C5E\u90E8\u95E8",dataIndex:"department",key:"department",width:"40%"},{title:"\u64CD\u4F5C",key:"action",valueType:"option",render:function(p,g,R,v){return[(0,r.jsx)("a",{onClick:function(){v==null||v.startEditable(g.key)},children:"\u7F16\u8F91"},"eidit")]}}];return(0,r.jsx)(H.A,{layout:"vertical",hideRequiredMark:!0,submitter:{render:function(p,g){return(0,r.jsxs)(te.S,{children:[E(y),g]})}},initialValues:{members:Ye},onFinish:B,onFinishFailed:L,children:(0,r.jsxs)(X._z,{content:"\u9AD8\u7EA7\u8868\u5355\u5E38\u89C1\u4E8E\u4E00\u6B21\u6027\u8F93\u5165\u548C\u63D0\u4EA4\u5927\u6279\u91CF\u6570\u636E\u7684\u573A\u666F\u3002",children:[(0,r.jsxs)(_.Z,{title:"\u4ED3\u5E93\u7BA1\u7406",className:f.card,bordered:!1,children:[(0,r.jsxs)(W.Z,{gutter:16,children:[(0,r.jsx)(C.Z,{lg:6,md:12,sm:24,children:(0,r.jsx)(w.Z,{label:F.name,name:"name",rules:[{required:!0,message:"\u8BF7\u8F93\u5165\u4ED3\u5E93\u540D\u79F0"}],placeholder:"\u8BF7\u8F93\u5165\u4ED3\u5E93\u540D\u79F0"})}),(0,r.jsx)(C.Z,{xl:{span:6,offset:2},lg:{span:8},md:{span:12},sm:24,children:(0,r.jsx)(w.Z,{label:F.url,name:"url",rules:[{required:!0,message:"\u8BF7\u9009\u62E9"}],fieldProps:{style:{width:"100%"},addonBefore:"http://",addonAfter:".com"},placeholder:"\u8BF7\u8F93\u5165"})}),(0,r.jsx)(C.Z,{xl:{span:8,offset:2},lg:{span:10},md:{span:24},sm:24,children:(0,r.jsx)(D.Z,{label:F.owner,name:"owner",rules:[{required:!0,message:"\u8BF7\u9009\u62E9\u7BA1\u7406\u5458"}],options:[{label:"\u4ED8\u6653\u6653",value:"xiao"},{label:"\u5468\u6BDB\u6BDB",value:"mao"}],placeholder:"\u8BF7\u9009\u62E9\u7BA1\u7406\u5458"})})]}),(0,r.jsxs)(W.Z,{gutter:16,children:[(0,r.jsx)(C.Z,{lg:6,md:12,sm:24,children:(0,r.jsx)(D.Z,{label:F.approver,name:"approver",rules:[{required:!0,message:"\u8BF7\u9009\u62E9\u5BA1\u6279\u5458"}],options:[{label:"\u4ED8\u6653\u6653",value:"xiao"},{label:"\u5468\u6BDB\u6BDB",value:"mao"}],placeholder:"\u8BF7\u9009\u62E9\u5BA1\u6279\u5458"})}),(0,r.jsx)(C.Z,{xl:{span:6,offset:2},lg:{span:8},md:{span:12},sm:24,children:(0,r.jsx)(ye.Z,{label:F.dateRange,name:"dateRange",fieldProps:{style:{width:"100%"}},rules:[{required:!0,message:"\u8BF7\u9009\u62E9\u751F\u6548\u65E5\u671F"}]})}),(0,r.jsx)(C.Z,{xl:{span:8,offset:2},lg:{span:10},md:{span:24},sm:24,children:(0,r.jsx)(D.Z,{label:F.type,name:"type",rules:[{required:!0,message:"\u8BF7\u9009\u62E9\u4ED3\u5E93\u7C7B\u578B"}],options:[{label:"\u79C1\u5BC6",value:"private"},{label:"\u516C\u5F00",value:"public"}],placeholder:"\u8BF7\u9009\u62E9\u4ED3\u5E93\u7C7B\u578B"})})]})]}),(0,r.jsxs)(_.Z,{title:"\u4EFB\u52A1\u7BA1\u7406",className:f.card,bordered:!1,children:[(0,r.jsxs)(W.Z,{gutter:16,children:[(0,r.jsx)(C.Z,{lg:6,md:12,sm:24,children:(0,r.jsx)(w.Z,{label:F.name2,name:"name2",rules:[{required:!0,message:"\u8BF7\u8F93\u5165"}]})}),(0,r.jsx)(C.Z,{xl:{span:6,offset:2},lg:{span:8},md:{span:12},sm:24,children:(0,r.jsx)(w.Z,{label:F.url2,name:"url2",rules:[{required:!0,message:"\u8BF7\u9009\u62E9"}]})}),(0,r.jsx)(C.Z,{xl:{span:8,offset:2},lg:{span:10},md:{span:24},sm:24,children:(0,r.jsx)(D.Z,{label:F.owner2,name:"owner2",rules:[{required:!0,message:"\u8BF7\u9009\u62E9\u7BA1\u7406\u5458"}],options:[{label:"\u4ED8\u6653\u6653",value:"xiao"},{label:"\u5468\u6BDB\u6BDB",value:"mao"}]})})]}),(0,r.jsxs)(W.Z,{gutter:16,children:[(0,r.jsx)(C.Z,{lg:6,md:12,sm:24,children:(0,r.jsx)(D.Z,{label:F.approver2,name:"approver2",rules:[{required:!0,message:"\u8BF7\u9009\u62E9\u5BA1\u6279\u5458"}],options:[{label:"\u4ED8\u6653\u6653",value:"xiao"},{label:"\u5468\u6BDB\u6BDB",value:"mao"}],placeholder:"\u8BF7\u9009\u62E9\u5BA1\u6279\u5458"})}),(0,r.jsx)(C.Z,{xl:{span:6,offset:2},lg:{span:8},md:{span:12},sm:24,children:(0,r.jsx)(be,{label:F.dateRange2,name:"dateRange2",rules:[{required:!0,message:"\u8BF7\u8F93\u5165"}],placeholder:"\u63D0\u9192\u65F6\u95F4",fieldProps:{style:{width:"100%"}}})}),(0,r.jsx)(C.Z,{xl:{span:8,offset:2},lg:{span:10},md:{span:24},sm:24,children:(0,r.jsx)(D.Z,{label:F.type2,name:"type2",rules:[{required:!0,message:"\u8BF7\u9009\u62E9\u4ED3\u5E93\u7C7B\u578B"}],options:[{label:"\u79C1\u5BC6",value:"private"},{label:"\u516C\u5F00",value:"public"}],placeholder:"\u8BF7\u9009\u62E9\u4ED3\u5E93\u7C7B\u578B"})})]})]}),(0,r.jsx)(_.Z,{title:"\u6210\u5458\u7BA1\u7406",bordered:!1,children:(0,r.jsx)(H.A.Item,{name:"members",children:(0,r.jsx)(Ke,{recordCreatorProps:{record:function(){return{key:"0".concat(Date.now())}}},columns:$,rowKey:"key"})})})]})})},Xe=Qe}}]);
