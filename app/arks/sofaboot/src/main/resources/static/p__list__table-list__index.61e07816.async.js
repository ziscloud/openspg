"use strict";(self.webpackChunkcognik_web_app=self.webpackChunkcognik_web_app||[]).push([[9119],{3113:function(Ee,D,e){e.r(D),e.d(D,{default:function(){return Ce}});var N=e(67825),Y=e.n(N),K=e(48305),S=e.n(K),k=e(90228),n=e.n(k),H=e(26068),v=e.n(H),J=e(87999),h=e.n(J),Q=e(65496),X=e(67709),q=e(32258),_=e(64785),ee=e(5653),V=e(14378),I=e(16331),re=e(92848),C=e(69230),ue=e(15533),Z=e(68658),ae=e(95375),y=e(75271),R=e(66918),A=e(29808),te=e(37520),ne=e(97899),se=e(17747),r=e(52676),le=function(a){return(0,r.jsxs)(R.L0,{stepsProps:{size:"small"},stepsFormRender:function(o,u){return(0,r.jsx)(se.Z,{width:640,bodyStyle:{padding:"32px 40px 48px"},destroyOnClose:!0,title:"\u89C4\u5219\u914D\u7F6E",open:a.updateModalVisible,footer:u,onCancel:function(){a.onCancel()},children:o})},onFinish:a.onSubmit,children:[(0,r.jsxs)(R.L0.StepForm,{initialValues:{name:a.values.name,desc:a.values.desc},title:"\u57FA\u672C\u4FE1\u606F",children:[(0,r.jsx)(V.Z,{name:"name",label:"\u89C4\u5219\u540D\u79F0",width:"md",rules:[{required:!0,message:"\u8BF7\u8F93\u5165\u89C4\u5219\u540D\u79F0\uFF01"}]}),(0,r.jsx)(I.Z,{name:"desc",width:"md",label:"\u89C4\u5219\u63CF\u8FF0",placeholder:"\u8BF7\u8F93\u5165\u81F3\u5C11\u4E94\u4E2A\u5B57\u7B26",rules:[{required:!0,message:"\u8BF7\u8F93\u5165\u81F3\u5C11\u4E94\u4E2A\u5B57\u7B26\u7684\u89C4\u5219\u63CF\u8FF0\uFF01",min:5}]})]}),(0,r.jsxs)(R.L0.StepForm,{initialValues:{target:"0",template:"0"},title:"\u914D\u7F6E\u89C4\u5219\u5C5E\u6027",children:[(0,r.jsx)(A.Z,{name:"target",width:"md",label:"\u76D1\u63A7\u5BF9\u8C61",valueEnum:{0:"\u8868\u4E00",1:"\u8868\u4E8C"}}),(0,r.jsx)(A.Z,{name:"template",width:"md",label:"\u89C4\u5219\u6A21\u677F",valueEnum:{0:"\u89C4\u5219\u6A21\u677F\u4E00",1:"\u89C4\u5219\u6A21\u677F\u4E8C"}}),(0,r.jsx)(te.Z.Group,{name:"type",label:"\u89C4\u5219\u7C7B\u578B",options:[{value:"0",label:"\u5F3A"},{value:"1",label:"\u5F31"}]})]}),(0,r.jsxs)(R.L0.StepForm,{initialValues:{type:"1",frequency:"month"},title:"\u8BBE\u5B9A\u8C03\u5EA6\u5468\u671F",children:[(0,r.jsx)(ne.Z,{name:"time",width:"md",label:"\u5F00\u59CB\u65F6\u95F4",rules:[{required:!0,message:"\u8BF7\u9009\u62E9\u5F00\u59CB\u65F6\u95F4\uFF01"}]}),(0,r.jsx)(A.Z,{name:"frequency",label:"\u76D1\u63A7\u5BF9\u8C61",width:"md",valueEnum:{month:"\u6708",week:"\u5468"}})]})]})},ie=le,w=e(86487);function de(d,a){return B.apply(this,arguments)}function B(){return B=h()(n()().mark(function d(a,l){return n()().wrap(function(u){for(;;)switch(u.prev=u.next){case 0:return u.abrupt("return",(0,w.request)("/api/rule",v()({method:"GET",params:v()({},a)},l||{})));case 1:case"end":return u.stop()}},d)})),B.apply(this,arguments)}function oe(d,a){return T.apply(this,arguments)}function T(){return T=h()(n()().mark(function d(a,l){return n()().wrap(function(u){for(;;)switch(u.prev=u.next){case 0:return u.abrupt("return",(0,w.request)("/api/rule",v()({data:a,method:"PUT"},l||{})));case 1:case"end":return u.stop()}},d)})),T.apply(this,arguments)}function ce(d,a){return P.apply(this,arguments)}function P(){return P=h()(n()().mark(function d(a,l){return n()().wrap(function(u){for(;;)switch(u.prev=u.next){case 0:return u.abrupt("return",(0,w.request)("/api/rule",v()({data:a,method:"POST"},l||{})));case 1:case"end":return u.stop()}},d)})),P.apply(this,arguments)}function me(d,a){return b.apply(this,arguments)}function b(){return b=h()(n()().mark(function d(a,l){return n()().wrap(function(u){for(;;)switch(u.prev=u.next){case 0:return u.abrupt("return",(0,w.request)("/api/rule",v()({data:a,method:"DELETE"},l||{})));case 1:case"end":return u.stop()}},d)})),b.apply(this,arguments)}var pe=["defaultRender"],fe=function(){var d=h()(n()().mark(function a(l){var o;return n()().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return o=C.ZP.loading("\u6B63\u5728\u6DFB\u52A0"),t.prev=1,t.next=4,ce(v()({},l));case 4:return o(),C.ZP.success("\u6DFB\u52A0\u6210\u529F"),t.abrupt("return",!0);case 9:return t.prev=9,t.t0=t.catch(1),o(),C.ZP.error("\u6DFB\u52A0\u5931\u8D25\u8BF7\u91CD\u8BD5\uFF01"),t.abrupt("return",!1);case 14:case"end":return t.stop()}},a,null,[[1,9]])}));return function(l){return d.apply(this,arguments)}}(),he=function(){var d=h()(n()().mark(function a(l,o){var u;return n()().wrap(function(m){for(;;)switch(m.prev=m.next){case 0:return u=C.ZP.loading("\u6B63\u5728\u914D\u7F6E"),m.prev=1,m.next=4,oe(v()(v()({},o),l));case 4:return u(),C.ZP.success("\u914D\u7F6E\u6210\u529F"),m.abrupt("return",!0);case 9:return m.prev=9,m.t0=m.catch(1),u(),C.ZP.error("\u914D\u7F6E\u5931\u8D25\u8BF7\u91CD\u8BD5\uFF01"),m.abrupt("return",!1);case 14:case"end":return m.stop()}},a,null,[[1,9]])}));return function(l,o){return d.apply(this,arguments)}}(),ve=function(){var d=h()(n()().mark(function a(l){var o;return n()().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(o=C.ZP.loading("\u6B63\u5728\u5220\u9664"),l){t.next=3;break}return t.abrupt("return",!0);case 3:return t.prev=3,t.next=6,me({key:l.map(function(m){return m.key})});case 6:return o(),C.ZP.success("\u5220\u9664\u6210\u529F\uFF0C\u5373\u5C06\u5237\u65B0"),t.abrupt("return",!0);case 11:return t.prev=11,t.t0=t.catch(3),o(),C.ZP.error("\u5220\u9664\u5931\u8D25\uFF0C\u8BF7\u91CD\u8BD5"),t.abrupt("return",!1);case 16:case"end":return t.stop()}},a,null,[[3,11]])}));return function(l){return d.apply(this,arguments)}}(),Fe=function(){var a=(0,y.useState)(!1),l=S()(a,2),o=l[0],u=l[1],t=(0,y.useState)(!1),m=S()(t,2),ge=m[0],$=m[1],ye=(0,y.useState)(!1),L=S()(ye,2),je=L[0],M=L[1],j=(0,y.useRef)(),xe=(0,y.useState)(),U=S()(xe,2),f=U[0],E=U[1],Se=(0,y.useState)([]),G=S()(Se,2),x=G[0],W=G[1],O=[{title:"\u89C4\u5219\u540D\u79F0",dataIndex:"name",tip:"\u89C4\u5219\u540D\u79F0\u662F\u552F\u4E00\u7684 key",render:function(s,i){return(0,r.jsx)("a",{onClick:function(){E(i),M(!0)},children:s})}},{title:"\u63CF\u8FF0",dataIndex:"desc",valueType:"textarea"},{title:"\u670D\u52A1\u8C03\u7528\u6B21\u6570",dataIndex:"callNo",sorter:!0,hideInForm:!0,renderText:function(s){return"".concat(s,"\u4E07")}},{title:"\u72B6\u6001",dataIndex:"status",hideInForm:!0,valueEnum:{0:{text:"\u5173\u95ED",status:"Default"},1:{text:"\u8FD0\u884C\u4E2D",status:"Processing"},2:{text:"\u5DF2\u4E0A\u7EBF",status:"Success"},3:{text:"\u5F02\u5E38",status:"Error"}}},{title:"\u4E0A\u6B21\u8C03\u5EA6\u65F6\u95F4",sorter:!0,dataIndex:"updatedAt",valueType:"dateTime",renderFormItem:function(s,i,F){var g=i.defaultRender,p=Y()(i,pe),z=F.getFieldValue("status");return"".concat(z)==="0"?!1:"".concat(z)==="3"?(0,r.jsx)(ue.Z,v()(v()({},p),{},{placeholder:"\u8BF7\u8F93\u5165\u5F02\u5E38\u539F\u56E0\uFF01"})):g(s)}},{title:"\u64CD\u4F5C",dataIndex:"option",valueType:"option",render:function(s,i){return[(0,r.jsx)("a",{onClick:function(){$(!0),E(i)},children:"\u914D\u7F6E"},"config"),(0,r.jsx)("a",{href:"https://procomponents.ant.design/",children:"\u8BA2\u9605\u8B66\u62A5"},"subscribeAlert")]}}];return(0,r.jsxs)(X._z,{children:[(0,r.jsx)(q.Z,{headerTitle:"\u67E5\u8BE2\u8868\u683C",actionRef:j,rowKey:"key",search:{labelWidth:120},toolBarRender:function(){return[(0,r.jsxs)(Z.ZP,{type:"primary",onClick:function(){u(!0)},children:[(0,r.jsx)(Q.Z,{})," \u65B0\u5EFA"]},"primary")]},request:de,columns:O,rowSelection:{onChange:function(s,i){W(i)}}}),(x==null?void 0:x.length)>0&&(0,r.jsxs)(_.S,{extra:(0,r.jsxs)("div",{children:["\u5DF2\u9009\u62E9"," ",(0,r.jsx)("a",{style:{fontWeight:600},children:x.length})," ","\u9879 \xA0\xA0",(0,r.jsxs)("span",{children:["\u670D\u52A1\u8C03\u7528\u6B21\u6570\u603B\u8BA1 ",x.reduce(function(c,s){return c+s.callNo},0)," \u4E07"]})]}),children:[(0,r.jsx)(Z.ZP,{onClick:h()(n()().mark(function c(){var s,i;return n()().wrap(function(g){for(;;)switch(g.prev=g.next){case 0:return g.next=2,ve(x);case 2:W([]),(s=j.current)===null||s===void 0||(i=s.reloadAndRest)===null||i===void 0||i.call(s);case 4:case"end":return g.stop()}},c)})),children:"\u6279\u91CF\u5220\u9664"}),(0,r.jsx)(Z.ZP,{type:"primary",children:"\u6279\u91CF\u5BA1\u6279"})]}),(0,r.jsxs)(ee.Y,{title:"\u65B0\u5EFA\u89C4\u5219",width:"400px",open:o,onVisibleChange:u,onFinish:function(){var c=h()(n()().mark(function s(i){var F;return n()().wrap(function(p){for(;;)switch(p.prev=p.next){case 0:return p.next=2,fe(i);case 2:F=p.sent,F&&(u(!1),j.current&&j.current.reload());case 4:case"end":return p.stop()}},s)}));return function(s){return c.apply(this,arguments)}}(),children:[(0,r.jsx)(V.Z,{rules:[{required:!0,message:"\u89C4\u5219\u540D\u79F0\u4E3A\u5FC5\u586B\u9879"}],width:"md",name:"name"}),(0,r.jsx)(I.Z,{width:"md",name:"desc"})]}),(0,r.jsx)(ie,{onSubmit:function(){var c=h()(n()().mark(function s(i){var F;return n()().wrap(function(p){for(;;)switch(p.prev=p.next){case 0:return p.next=2,he(i,f);case 2:F=p.sent,F&&($(!1),E(void 0),j.current&&j.current.reload());case 4:case"end":return p.stop()}},s)}));return function(s){return c.apply(this,arguments)}}(),onCancel:function(){$(!1),E(void 0)},updateModalVisible:ge,values:f||{}}),(0,r.jsx)(ae.Z,{width:600,open:je,onClose:function(){E(void 0),M(!1)},closable:!1,children:(f==null?void 0:f.name)&&(0,r.jsx)(re.vY,{column:2,title:f==null?void 0:f.name,request:h()(n()().mark(function c(){return n()().wrap(function(i){for(;;)switch(i.prev=i.next){case 0:return i.abrupt("return",{data:f||{}});case 1:case"end":return i.stop()}},c)})),params:{id:f==null?void 0:f.name},columns:O})})]})},Ce=Fe}}]);
