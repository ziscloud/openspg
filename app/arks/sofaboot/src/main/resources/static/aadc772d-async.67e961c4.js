(("undefined"!=typeof globalThis?globalThis:self)["makoChunk_open-semantic-graph"]=("undefined"!=typeof globalThis?globalThis:self)["makoChunk_open-semantic-graph"]||[]).push([["aadc772d"],{"0b69d691":function(e,t,a){"use strict";a.d(t,"__esModule",{value:!0}),a.e(t,{getEntityDetail:function(){return n;},getEnumValues:function(){return i;},getLlmSelect:function(){return d;},getOneHopGraph:function(){return o;},getSampleData:function(){return r;},search:function(){return s;}});var l=a("05ecbb5b");async function n(e,t){return(0,l.request)("/v1/datas/getEntityDetail",{method:"POST",headers:{"Content-Type":"application/json"},data:e,...t||{}});}async function i(e,t){let{name:a}=e;return(0,l.request)(`/v1/datas/getEnumValues/${a}`,{method:"GET",params:{...e},...t||{}});}async function d(e,t){return(0,l.request)("/v1/datas/getLlmSelect",{method:"GET",params:{...e},...t||{}});}async function o(e,t){return(0,l.request)("/v1/datas/getOneHopGraph",{method:"POST",headers:{"Content-Type":"application/json"},data:e,...t||{}});}async function r(e,t){return(0,l.request)("/v1/datas/getSampleData",{method:"GET",params:{...e},...t||{}});}async function s(e,t){return(0,l.request)("/v1/datas/search",{method:"GET",params:{...e},...t||{}});}},"1927ae32":function(e,t,a){"use strict";a.d(t,"__esModule",{value:!0}),a.d(t,"default",{enumerable:!0,get:function(){return c;}});var l=a("777fffbe"),n=a("32b7a2cf"),i=l._(a("f02131d0")),d=a("6df6427a"),o=l._(a("b916d24f"));a("5ab73bad");var r=l._(a("fc1e2430"));a("29a04be0");var s=l._(a("1e70bad6"));a("5a70f60d");var u=a("02b696d0"),c=e=>{var t;let{filter:a,...l}=e,{accountList:c}=(0,d.useDbInfo)(),{data:m,isLoading:f}=c,g=null==m?void 0:null===(t=m.result)||void 0===t?void 0:t.results,p=(0,u.useMemo)(()=>{if(a){let{type:e,category:t}=a;return null==g?void 0:g.filter(e=>e.category===t).filter(t=>!e||t.type===e).map(e=>({label:e.dbName,value:String(e.id),item:{dataSourceId:String(e.id),dataSource:JSON.stringify(e)}}));}return null==g?void 0:g.map(e=>({label:e.dbName,value:String(e.id),item:{dataSourceId:String(e.id),dataSource:JSON.stringify(e)}}));},[g,a]);return(0,n.jsx)(r.default,{allowClear:!0,loading:f,options:p,placeholder:i.default.get({id:"spg.components.DataSourceAccountSelect.PleaseSelect",dm:"\u8BF7\u9009\u62E9"}),dropdownRender:e=>(0,n.jsx)(s.default,{spinning:f,children:e}),notFoundContent:(0,n.jsx)(o.default,{image:o.default.PRESENTED_IMAGE_SIMPLE}),...l});};},"1a998156":function(e,t,a){"use strict";a.d(t,"__esModule",{value:!0}),a.e(t,{CONSTRAINT_TYPE:function(){return d;},INFO_COLUMN:function(){return l;},RELATION_CATEGORY:function(){return o;},RELATION_DIRECTION:function(){return i;},RULE_TYPE:function(){return n;},baseSchemePropertyNameMap:function(){return C;},infoColumnMapping:function(){return g;},relationDirectionMapping:function(){return h;},ruleTypeMapping:function(){return p;}});var l,n,i,d,o,r,s,u,c,m,f=a("777fffbe")._(a("f02131d0"));(r=l||(l={}))[r.NAME=0]="NAME",r[r.DESCRIPTION=1]="DESCRIPTION",r[r.MODIFY_TIME=2]="MODIFY_TIME",r[r.KNOWLEDGE_COUNT=3]="KNOWLEDGE_COUNT",r[r.SOURCE=4]="SOURCE",r[r.TARGET=5]="TARGET",r[r.RELATION_DIRECTION=6]="RELATION_DIRECTION";let g={0:f.default.get({id:"spg.src.constants.knowledgeBuild.Name",dm:"\u540D\u79F0"}),1:f.default.get({id:"spg.src.constants.knowledgeBuild.Description",dm:"\u63CF\u8FF0"}),2:f.default.get({id:"spg.src.constants.knowledgeBuild.LastEditTime",dm:"\u6700\u8FD1\u7F16\u8F91\u65F6\u95F4"}),3:f.default.get({id:"spg.src.constants.knowledgeBuild.CumulativeQuantityOfKnowledge",dm:"\u77E5\u8BC6\u7D2F\u79EF\u6570\u91CF"}),4:f.default.get({id:"spg.src.constants.knowledgeBuild.StartingPoint",dm:"\u8D77\u70B9"}),5:f.default.get({id:"spg.src.constants.knowledgeBuild.End",dm:"\u7EC8\u70B9"}),6:f.default.get({id:"spg.src.constants.knowledgeBuild.RelationshipType",dm:"\u5173\u7CFB\u7C7B\u578B"})};(s=n||(n={})).RELATION="RELATION",s.PROPERTY="PROPERTY",s.CONCEPT="CONCEPT";let p={RELATION:{name:"RELATION",nameZh:f.default.get({id:"spg.src.constants.knowledgeBuild.RelationshipRules",dm:"\u5173\u7CFB\u89C4\u5219"})},PROPERTY:{name:"PROPERTY",nameZh:f.default.get({id:"spg.src.constants.knowledgeBuild.AttributeRules",dm:"\u5C5E\u6027\u89C4\u5219"})},CONCEPT:{name:"CONCEPT",nameZh:f.default.get({id:"spg.src.constants.knowledgeBuild.ConceptRules",dm:"\u6982\u5FF5\u89C4\u5219"})}};(u=i||(i={})).TRANSITIVE="TRANSITIVE",u.BOTH="BOTH",u.SINGLE="SINGLE",u.NULL="NULL";let h={TRANSITIVE:f.default.get({id:"spg.src.constants.knowledgeBuild.TransferRelationship",dm:"\u4F20\u9012\u5173\u7CFB"}),BOTH:f.default.get({id:"spg.src.constants.knowledgeBuild.SymmetricRelation",dm:"\u5BF9\u79F0\u5173\u7CFB"}),SINGLE:f.default.get({id:"spg.src.constants.knowledgeBuild.OneWayRelationship",dm:"\u5355\u5411\u5173\u7CFB"}),NULL:f.default.get({id:"spg.src.constants.knowledgeBuild.None",dm:"\u65E0"})};(c=d||(d={})).UNIQUE="UNIQUE",c.REQUIRE="REQUIRE",c.ENUM="ENUM",c.MAXIMUM_LT_OE="MAXIMUM_LT_OE",c.MAXIMUM_LT="MAXIMUM_LT",c.MINIMUM_GT_OE="MINIMUM_GT_OE",c.MINIMUM_GT="MINIMUM_GT",c.REGULAR="REGULAR",c.MULTIVALUE="MULTIVALUE",(m=o||(o={})).BASIC="BASIC_TYPE",m.CONCEPT="CONCEPT_TYPE",m.ENTITY="ENTITY_TYPE",m.EVENT="EVENT_TYPE",m.STANDARD="STANDARD_TYPE",m.ONE_LEVEL="ONE_LEVEL_TYPE";let C={id:"ID",name:f.default.get({id:"spg.src.constants.knowledgeBuild.Name",dm:"\u540D\u79F0"}),description:f.default.get({id:"spg.src.constants.knowledgeBuild.Description",dm:"\u63CF\u8FF0"}),__from_id__:f.default.get({id:"spg.src.constants.knowledgeBuild.StartingPoint",dm:"\u8D77\u70B9"}),__to_id__:f.default.get({id:"spg.src.constants.knowledgeBuild.End",dm:"\u7EC8\u70B9"})};},"3ba80fd7":function(e,t,a){"use strict";a.d(t,"__esModule",{value:!0}),a.d(t,"default",{enumerable:!0,get:function(){return u;}});var l=a("777fffbe"),n=a("32b7a2cf"),i=l._(a("f02131d0")),d=l._(a("a8452b87")),o=l._(a("2b798761"));a("9113bc14");var r=l._(a("02b696d0")),s=a("c3ef8c6b"),u=r.default.memo(e=>{let{text:t="",onCopy:a,children:l,iconStyle:r,showTextInMessage:u,...c}=e,m=u?`${t}  `:"";return(0,n.jsx)(s.CopyToClipboard,{text:String(t),onCopy:(e,t)=>{null==a||a(e,t),o.default.success(i.default.get({id:"spg.components.CopyToClipboard.PrefixstrCopySucceeded",dm:"{prefixStr} \u590D\u5236\u6210\u529F"},{prefixStr:m}));},...c,children:l||(0,n.jsx)(d.default,{style:{fontSize:16,marginLeft:4,...r}})});});},"4c70c3ed":function(e,t,a){"use strict";a.d(t,"__esModule",{value:!0}),a.d(t,"getMixedLocaleFieldValue",{enumerable:!0,get:function(){return n;}});let l=a("777fffbe")._(a("f02131d0")).default.getCurrentLocale(),n=(e={},t)=>{let{fileName:a="name",lang:n=l,fileNameZh:i,onlyLocale:d=!1}=t||{},o=i||a+"Zh",r=e["zh-CN"===n?o:a],s=e["zh-CN"===n?a:o];return s||r?s?r?d?r:`${r}(${s})`:s:r:"-";};},"5e00c259":function(e,t,a){"use strict";a.d(t,"__esModule",{value:!0}),a.d(t,"Title",{enumerable:!0,get:function(){return o;}});var l=a("32b7a2cf"),n=a("5b5ed4a9");a("4d0e37ae");var i=a("fc1f4356");let d=n.styled.div`
  .header {
    color: var(--dark-shade-85);
    font-weight: var(--font-medium);
    font-size: ${({$level:e})=>"page"===e?"var(--h1-font-size)":"var(--h3-font-size)"};
    line-height: ${({$level:e})=>"page"===e?"28px":"24px"};
  }
`,o=({className:e,style:t,level:a="page",title:o,titleExtra:r,showBack:s=!1,goBackCb:u,children:c})=>{let m=(0,n.useNavigate)();return(0,l.jsxs)(d,{$level:a,className:e,style:t,children:[(0,l.jsxs)("div",{className:"flex-row mb16",children:[(0,l.jsxs)("div",{className:"header",children:[s&&(0,l.jsx)(n.Icon,{className:"icon mr8 pointer",icon:"ant-design:arrow-left-outlined",onClick:()=>(0,i.isFunction)(u)?u():m(-1)}),o]}),(0,l.jsx)("div",{children:r})]}),(0,l.jsx)("div",{children:c})]});};},"6df6427a":function(e,t,a){"use strict";a.d(t,"__esModule",{value:!0}),a.d(t,"useDbInfo",{enumerable:!0,get:function(){return d;}});var l=a("5b5ed4a9"),n=a("f86e90ef"),i=a("85172127");let d=()=>({accountList:(0,l.useQuery)({queryFn:async()=>await (0,i.search)({}),queryKey:["useDbInfo","datasourceList"],enabled:!0}),tableNameList:(0,n.useRequest)(i.getAllTable,{manual:!0}),tableDetail:(0,n.useRequest)(i.getTableDetail,{manual:!0})});},74667962:function(e,t,a){"use strict";a.d(t,"__esModule",{value:!0}),a("93b3369a");},"7acbc698":function(e,t,a){"use strict";a.d(t,"__esModule",{value:!0}),a.d(t,"DEFAULT_GRAPH_DATA",{enumerable:!0,get:function(){return l;}});let l={nodes:[],edges:[]};},"7dc7592e":function(e,t,a){"use strict";a.d(t,"__esModule",{value:!0}),a.e(t,{FormContextProvider:function(){return r;},useFormContext:function(){return s;}});var l=a("32b7a2cf"),n=a("93b3369a"),i=a("02b696d0");let d={formInstance:void 0,formConfigData:void 0,updateFormConfigData:n.noop},o=(0,i.createContext)(d),r=e=>{let{value:t,children:a}=e;return(0,l.jsx)(o.Provider,{value:t,children:a});},s=()=>(0,i.useContext)(o);},85172127:function(e,t,a){"use strict";a.d(t,"__esModule",{value:!0}),a.e(t,{deleteUsingGET:function(){return n;},getAllTable:function(){return i;},getDataSourceType:function(){return d;},getTableDetail:function(){return o;},insert:function(){return r;},search:function(){return s;},testConnect:function(){return u;},update:function(){return c;}});var l=a("05ecbb5b");async function n(e,t){return(0,l.request)("/public/v1/datasource/delete",{method:"GET",params:{...e},...t||{}});}async function i(e,t){return(0,l.request)("/public/v1/datasource/getAllTable",{method:"GET",params:{...e},...t||{}});}async function d(e,t){return(0,l.request)("/public/v1/datasource/getDataSourceType",{method:"GET",params:{...e},...t||{}});}async function o(e,t){return(0,l.request)("/public/v1/datasource/getTableDetail",{method:"GET",params:{...e},...t||{}});}async function r(e,t){return(0,l.request)("/public/v1/datasource/insert",{method:"POST",headers:{"Content-Type":"application/json"},data:e,...t||{}});}async function s(e,t){return(0,l.request)("/public/v1/datasource/search",{method:"POST",headers:{"Content-Type":"application/json"},data:e,...t||{}});}async function u(e,t){return(0,l.request)("/public/v1/datasource/testConnect",{method:"POST",headers:{"Content-Type":"application/json"},data:e,...t||{}});}async function c(e,t){return(0,l.request)("/public/v1/datasource/update",{method:"POST",headers:{"Content-Type":"application/json"},data:e,...t||{}});}},b2eda3a1:function(e,t,a){"use strict";a.d(t,"__esModule",{value:!0}),a.e(t,{json2Object:function(){return i;},json2String:function(){return d;},renderWithDefaultText:function(){return o;}});var l=a("fc1f4356"),n=a("02b696d0");function i(e,t={}){if((0,l.isNil)(e))return t;try{if((0,l.isObject)(e))return e;if((0,l.isString)(e)){let t=e.replace(/\r/gi,"").replace(/\n/gi,""),a=JSON.parse(t);if((0,l.isObject)(a))return a;}throw Error();}catch(a){return console.warn(`${e} is not a valid Object`),t;}}function d(e){return"string"==typeof e?e:JSON.stringify(e);}function o(e){return(0,n.isValidElement)(e)?e:(0,l.isNil)(e)?"-":d(e)||"-";}},ba6f46b8:function(e,t,a){"use strict";a.d(t,"__esModule",{value:!0}),a.e(t,{CardWithStyle:function(){return r;},ContentDiv:function(){return o;},TopBoxDiv:function(){return d;}});var l=a("777fffbe"),n=a("5b5ed4a9"),i=l._(a("80411155"));let d=n.styled.div`
  padding: 12px 40px 24px;
  height: var(--content-height);
  display: flex;
  flex-direction: column;
`,o=n.styled.div`
  height: calc(100vh - 48px);
  overflow: hidden;
  display: flex;
  flex-direction: column;
  flex: 1;
`,r=(0,n.styled)(i.default)`
  overflow: hidden;
  display: flex;
  flex-direction: column;
  flex: 1;

  .ant-card-body {
    overflow: hidden;
    padding: 0;
    flex: 1;
  }
`;},bcda4f95:function(e,t,a){"use strict";a.d(t,"__esModule",{value:!0}),a.d(t,"useSchemaData",{enumerable:!0,get:function(){return r;}});var l=a("fc5eb767"),n=a("48fdd872"),i=a("5b5ed4a9"),d=a("3834a44f");let o=async e=>{let t=await (0,n.getSchemaAndRelation)(e);if(!t.success||!t.result)return Promise.reject(t);{let e=t.result,a=e.entityTypeDTOList||[],n=e.relationTypeDTOList||[];return(0,l.transformRelationGraphData)({nodes:a.filter(e=>e.name!==l.rootNode.name),edges:n});}},r=e=>{let{params:t,...a}=e??{},l={projectId:Number((0,d.getProjectId)()),...t};return(0,i.useQuery)({queryFn:()=>o(l),queryKey:["hooks/useSchemaData",l],enabled:!!(null==l?void 0:l.projectId),...a});};},c5f39a1b:function(e,t,a){"use strict";a.d(t,"__esModule",{value:!0}),a.d(t,"default",{enumerable:!0,get:function(){return l;}});var l=a("777fffbe")._(a("85d9e535")).default;},c72fc2b9:function(e,t,a){"use strict";a.d(t,"__esModule",{value:!0}),a.e(t,{deleteUsingGET:function(){return n;},getById:function(){return i;},list:function(){return d;},schemaDiff:function(){return o;},splitPreview:function(){return r;},submit:function(){return s;}});var l=a("05ecbb5b");async function n(e,t){return(0,l.request)("/public/v1/builder/job/delete",{method:"GET",params:{...e},...t||{}});}async function i(e,t){return(0,l.request)("/public/v1/builder/job/get",{method:"GET",params:{...e},...t||{}});}async function d(e,t){return(0,l.request)("/public/v1/builder/job/list",{method:"GET",params:{...e},...t||{}});}async function o(e,t){return(0,l.request)("/public/v1/builder/job/schema/diff",{method:"POST",headers:{"Content-Type":"application/json"},data:e,...t||{}});}async function r(e,t){return(0,l.request)("/public/v1/builder/job/split/preview",{method:"POST",headers:{"Content-Type":"application/json"},data:e,...t||{}});}async function s(e,t){return(0,l.request)("/public/v1/builder/job/submit",{method:"POST",headers:{"Content-Type":"application/json"},data:e,...t||{}});}},dae188d2:function(e,t,a){a.d(t,"__esModule",{value:!0}),a.e(t,{default:function(){return ls;}});var l,n,i,d,o,r,s,u,c,m,f,g=a("777fffbe"),p=a("852bbaa9"),h=a("32b7a2cf"),C=a("df7e9d64"),v=a("f02131d0"),x=g._(v),y=a("ba6f46b8"),S=a("c72fc2b9"),b=a("5b5ed4a9"),E=a("b2eda3a1"),j=a("3cfb9603"),T=a("73d89cde"),D=a("341ea61c"),N=g._(D),I=a("f86e90ef"),M=a("8f891262"),P=g._(M);a("5f8847c8");var _=a("2b798761"),F=g._(_);a("9113bc14");var A=a("02b696d0"),w=p._(A),k=a("514e4948"),O=a("5e00c259"),R=a("b0b84ad0"),U=g._(R),L=a("c7d6ff82"),B=g._(L);a("fb4eb6cb");var V=a("249809ea"),G=g._(V);a("941d73ec");let q=e=>{let{className:t,style:a,isEditTask:l,hasFormChanged:n}=e,i=j.URLParams.projectId,d=`/knowledgeModeling/knowledgeTask?projectId=${i}`,o=l?x.default.get({id:"spg.components.HeaderNav.EditingKnowledge",dm:"\u7F16\u8F91\u77E5\u8BC6"}):x.default.get({id:"spg.components.HeaderNav.AddedKnowledge",dm:"\u65B0\u589E\u77E5\u8BC6"}),r=()=>{b.history.push(d);};return(0,h.jsx)("header",{className:t,style:{...a},children:(0,h.jsx)(O.Title,{level:"page",title:(0,h.jsxs)(G.default,{children:[n?(0,h.jsx)(B.default,{title:x.default.get({id:"spg.components.HeaderNav.CancelingWillLoseTheConfiguration",dm:"\u53D6\u6D88\u5C06\u4E22\u5931\u6B63\u5728\u7F16\u8F91\u7684\u914D\u7F6E\u4FE1\u606F\uFF0C\u786E\u8BA4\u53D6\u6D88\u5417?"}),onConfirm:r,children:(0,h.jsx)(U.default,{})}):(0,h.jsx)(U.default,{onClick:r}),(0,h.jsx)("span",{children:o})]})})});};var $=a("22b588a5");let Y={mappingType:$.MAPPING_TYPE_ENUM.SCHEMA_MAPPING,schemaNode:void 0,schemaEdge:void 0,mapping:void 0},H={jobName:"",type:$.DATA_SOURCE_TYPE_ENUM.FILE_EXTRACT,yuqueConfig:{yuQueUrl:"",yuQueToken:""},batchConfig:{dataSourceTableType:void 0,structure:!1,dataSourceConfig:{dataSourceContentData:void 0,propertyColumns:[]}},streamConfig:{dataSourceTableType:void 0,structure:!1,dataSourceConfig:{dataSourceContentData:void 0,propertyColumns:[]}},dataSourceConfig:{structure:!1,uploadFileInfo:void 0,ignoreHeader:!0,propertyColumns:void 0},splitConfig:{splitLength:2e3,semanticSplit:!1},mappingConfig:Y,extractConfig:{llm:void 0,llmPrompt:"",autoSchema:!0,autoWrite:!0},importConfig:{jobLifeCycle:$.JOB_LIFT_CYCLE_ENUM.ONCE,scheduleStartDate:"0 0 0 * * ?",mergeMode:$.JOB_MERGE_MODE_ENUM.INDEPENDENT,jobAction:$.JOB_ACTION_ENUM.UPSERT,advancedConfig:""}};var W=a("673e678e"),z=g._(W);a("e91d77d9");var K=a("097087ae"),Q=g._(K);a("672ce68d");var J=a("93b3369a");(l=r||(r={}))[l.BASE_CONFIG=0]="BASE_CONFIG",l[l.SEGMENTATION_MAPPING_CONFIG=1]="SEGMENTATION_MAPPING_CONFIG",l[l.EXTRACTION_IMPORT_CONFIG=2]="EXTRACTION_IMPORT_CONFIG";let Z={STRUCTURE:[".csv"],UN_STRUCTURE:[".txt",".csv",".pdf",".md",".json",".doc",".docx"]};var X=a("7dc7592e"),ee=a("d5b565e0"),et=g._(ee),ea=a("b916d24f"),el=g._(ea),en=a("fc1e2430"),ei=g._(en),ed=a("0c8a2b89"),eo=g._(ed),er=a("4d0e37ae"),es=p._(er),eu=a("fc1f4356"),ec=a("1043743b"),em=g._(ec),ef={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M909.1 209.3l-56.4 44.1C775.8 155.1 656.2 92 521.9 92 290 92 102.3 279.5 102 511.5 101.7 743.7 289.8 932 521.9 932c181.3 0 335.8-115 394.6-276.1 1.5-4.2-.7-8.9-4.9-10.3l-56.7-19.5a8 8 0 00-10.1 4.8c-1.8 5-3.8 10-5.9 14.9-17.3 41-42.1 77.8-73.7 109.4A344.77 344.77 0 01655.9 829c-42.3 17.9-87.4 27-133.8 27-46.5 0-91.5-9.1-133.8-27A341.5 341.5 0 01279 755.2a342.16 342.16 0 01-73.7-109.4c-17.9-42.4-27-87.4-27-133.9s9.1-91.5 27-133.9c17.3-41 42.1-77.8 73.7-109.4 31.6-31.6 68.4-56.4 109.3-73.8 42.3-17.9 87.4-27 133.8-27 46.5 0 91.5 9.1 133.8 27a341.5 341.5 0 01109.3 73.8c9.9 9.9 19.2 20.4 27.8 31.4l-60.2 47a8 8 0 003 14.1l175.6 43c5 1.2 9.9-2.6 9.9-7.7l.8-180.9c-.1-6.6-7.8-10.3-13-6.2z"}}]},name:"reload",theme:"outlined"},eg=a("833883d6"),ep=g._(eg),eh=w.forwardRef(function(e,t){return w.createElement(ep.default,(0,em.default)((0,em.default)({},e),{},{ref:t,icon:ef}));}),eC=a("c5f39a1b"),ev=g._(eC),ex="activated-LfeN2L9v",ey="structuredContentDescription-SlnyfMkQ";let eS=e=>{let[t,a]=(0,I.useControllableValue)(e,{defaultValue:!0,valuePropName:"value",trigger:"onChange"});return(0,h.jsxs)("div",{className:"mainContainer-yy8S_u7v",children:[(0,h.jsxs)("div",{className:(0,ev.default)("structuredContentWrapper-oFqu3Nn9",{[ex]:t}),onClick:()=>a(!0),children:[(0,h.jsx)("span",{className:ey,children:(0,h.jsx)("span",{className:(0,ev.default)("structuredContentTitle-lf1c3vBl",{[ex]:t}),children:x.default.get({id:"spg.components.ContentTypeSelect.StructuredContent",dm:"\u7ED3\u6784\u5316\u5185\u5BB9"})})}),(0,h.jsx)("span",{className:"structuredContentDetails-d-E3pdCg",children:x.default.get({id:"spg.components.ContentTypeSelect.TabularContentWithoutExtractionCan",dm:"\u8868\u683C\u5F62\u5F0F\u5185\u5BB9\uFF0C \u65E0\u9700\u62BD\u53D6\uFF0C \u53EF\u76F4\u63A5\u4E0E\u77E5\u8BC6\u6A21\u578B\u6620\u5C04\u5E76\u5BFC\u5165\u6570\u636E"})})]}),(0,h.jsxs)("div",{className:(0,ev.default)("unstructuredContentWrapper-UosPSCIM",{[ex]:!t}),onClick:()=>a(!1),children:[(0,h.jsx)("span",{className:ey,children:(0,h.jsx)("span",{className:(0,ev.default)("unstructuredContentTitle-utSEquKd",{[ex]:!t}),children:x.default.get({id:"spg.components.ContentTypeSelect.UnstructuredContent",dm:"\u975E\u7ED3\u6784\u5316\u5185\u5BB9"})})}),(0,h.jsx)("span",{className:"unstructuredContentDetails-LChoA2er",children:x.default.get({id:"spg.components.ContentTypeSelect.TheContentHasNoClear",dm:"\u5185\u5BB9\u65E0\u660E\u786E\u7ED3\u6784\uFF0C \u9700\u5927\u6A21\u578B\u62BD\u53D6"})})]})]});};var eb=a("c7f4f8e9"),eE=g._(eb);a("983ea648");var ej=a("6d1765ea"),eT=g._(ej);a("6175f9d0");let{Text:eD}=eT.default,eN=e=>{let{options:t}=e,{disabledColsEdit:a=!1}=t??{},[l]=P.default.useForm(),[n,i]=(0,I.useControllableValue)(e,{valuePropName:"dataSource",trigger:"onDataSourceChange"}),[d,o]=(0,I.useControllableValue)(e,{valuePropName:"value",trigger:"onChange"}),r=(0,w.useMemo)(()=>{var e;return(null==d?void 0:null===(e=d.filter(e=>!!e.name))||void 0===e?void 0:e.map(e=>e.index))??[];},[d]),s=[{width:"40%",title:x.default.get({id:"spg.components.DataSourceFieldSelect.FieldName",dm:"\u5B57\u6BB5\u540D\u79F0"}),dataIndex:"name",ellipsis:{showTitle:!1},render:(e,t,l)=>a?e:(0,h.jsx)(P.default.Item,{style:{padding:0,margin:0},name:[l,"name"],initialValue:t.name,children:(0,h.jsx)(z.default,{allowClear:!0,placeholder:x.default.get({id:"spg.components.DataSourceFieldSelect.PleaseEnter",dm:"\u8BF7\u8F93\u5165"}),maxLength:50})})},{width:"60%",title:x.default.get({id:"spg.components.DataSourceFieldSelect.FieldType",dm:"\u5B57\u6BB5\u7C7B\u578B"}),dataIndex:"type",ellipsis:{showTitle:!1},render:e=>(0,h.jsx)(eD,{ellipsis:{tooltip:e},children:e??"String"})}],u=(0,w.useMemo)(()=>{var e;return null==n?void 0:null===(e=n.filter(e=>!!(null==e?void 0:e.name)))||void 0===e?void 0:e.map((e,t)=>{var a;return{...e,name:null===(a=String((null==e?void 0:e.name)??""))||void 0===a?void 0:a.substring(0,50),index:t};});},[n]);return(0,h.jsx)(P.default,{form:l,autoComplete:"off",onValuesChange:(e,t)=>{let a=Object.values({...t}).map((e,t)=>({...e,type:(null==e?void 0:e.type)??"STRING",index:t}));i(a),o(a.filter(e=>null==d?void 0:d.map(e=>e.index).includes(e.index))??[]);},children:(0,h.jsx)(eE.default,{style:{border:"1px solid #f1f1f1",borderRadius:"8px"},rowKey:"index",scroll:{y:300},columns:s,dataSource:u,rowSelection:{selectedRowKeys:r,onChange:(e,t)=>{o(t);}},pagination:!1})});};var eI=a("6df6427a"),eM={refreshBtn:"refreshBtn-VCoNyK5L",ignoreFirstLineContainer:"ignoreFirstLineContainer-veLA_tgn",selectImportFiledContainer:"selectImportFiledContainer-Zpa4qITv"},eP=a("3ba80fd7"),e_=g._(eP),eF=a("1e70bad6"),eA=g._(eF),ew=a("a8452b87"),ek=g._(ew),eO=a("ec5b4c1e"),eR=g._(eO),eU=a("5bc042d2"),eL=g._(eU);a("2368b7e1");var eB=a("1927ae32"),eV=g._(eB);let eG=e=>{var t;let{type:a,category:l}=e,{formConfigData:n}=(0,X.useFormContext)(),{tableNameList:i}=(0,eI.useDbInfo)(),{batchConfig:d}=n??{},{dataSourceConfig:o}=d??{},{dataSourceContentData:r}=o??{},{id:s,dbName:u}=(()=>{if(l===$.DATA_SOURCE_TYPE_ENUM.BATCH){let e=null==r?void 0:r.id,t=null==r?void 0:r.dbName;return{id:(null==e?void 0:e.dataSourceId)?Number(e.dataSourceId):void 0,dbName:t};}return{};})(),c=(0,I.useMemoizedFn)((0,eu.debounce)(i.run,300)),m=(0,I.useMemoizedFn)(e=>{s&&u&&(0,eu.trim)(e)&&c({id:s,dbName:u,keyword:e});}),f=l===$.DATA_SOURCE_TYPE_ENUM.BATCH&&!!(null==r?void 0:r.tableName),g=f?null==r?void 0:r.tableName:"";return(0,h.jsxs)(h.Fragment,{children:[(0,h.jsx)("div",{className:"alert-9PQ28OkR",children:(0,h.jsxs)("span",{children:[(0,h.jsx)(eR.default,{className:"mr8",style:{color:"#2f54eb"}}),(null==a?void 0:a.toUpperCase())==="MYSQL"?x.default.get({id:"spg.DataSourceDynamicConfig.BatchData.DataSourceContent.PleaseConfirmThatTheQuery",dm:"\u8BF7\u786E\u8BA4\u5DF2\u5411\u8D26\u53F7\u6388\u4E88\u67E5\u8BE2\u548C\u6570\u636E\u4E0B\u8F7D\u6743\u9650"}):x.default.get({id:"spg.DataSourceDynamicConfig.BatchData.DataSourceContent.PleaseConfirmThatYouHave",dm:"\u8BF7\u786E\u8BA4\u5DF2\u5411\u516C\u5171\u8D26\u53F7\u6388\u6743"})]})}),(0,h.jsxs)("div",{className:"content-4O3AuwNs",children:[(0,h.jsx)(P.default.Item,{label:x.default.get({id:"spg.DataSourceDynamicConfig.BatchData.DataSourceContent.AccountName",dm:"\u8D26\u53F7\u540D\u79F0"}),labelCol:{span:24},name:["batchConfig","dataSourceConfig","dataSourceContentData","id"],rules:[{required:!0,message:x.default.get({id:"spg.DataSourceDynamicConfig.BatchData.DataSourceContent.PleaseSearchForSelection",dm:"\u8BF7\u641C\u7D22\u9009\u62E9"})}],getValueFromEvent:(e,t)=>{var a;return null===(a=(0,eu.castArray)(t)[0])||void 0===a?void 0:a.item;},getValueProps:e=>({value:null==e?void 0:e.dataSourceId}),children:(0,h.jsx)(eV.default,{disabled:!a,placeholder:a?x.default.get({id:"spg.DataSourceDynamicConfig.BatchData.DataSourceContent.PleaseSelect",dm:"\u8BF7\u9009\u62E9"}):x.default.get({id:"spg.DataSourceDynamicConfig.BatchData.DataSourceContent.PleaseSelectDataSourceType",dm:"\u8BF7\u5148\u9009\u62E9\u6570\u636E\u6E90\u7C7B\u578B"}),getPopupContainer:e=>e,showSearch:!0,allowClear:!0,filter:{type:a,category:l}})}),(0,h.jsx)(P.default.Item,{label:x.default.get({id:"spg.DataSourceDynamicConfig.BatchData.DataSourceContent.NameOfProject",dm:"\u6240\u5728\u9879\u76EE\u540D\u79F0"}),labelCol:{span:24},name:["batchConfig","dataSourceConfig","dataSourceContentData","dbName"],rules:[{required:!0,message:x.default.get({id:"spg.DataSourceDynamicConfig.BatchData.DataSourceContent.PleaseEnterTheProjectName",dm:"\u8BF7\u8F93\u5165\u6240\u5728\u9879\u76EE\u540D\u79F0"})}],children:(0,h.jsx)(z.default,{placeholder:x.default.get({id:"spg.DataSourceDynamicConfig.BatchData.DataSourceContent.PleaseEnterTheProjectName",dm:"\u8BF7\u8F93\u5165\u6240\u5728\u9879\u76EE\u540D\u79F0"}),allowClear:!0})}),(0,h.jsx)(P.default.Item,{label:x.default.get({id:"spg.DataSourceDynamicConfig.BatchData.DataSourceContent.TableName",dm:"\u8868\u540D"}),labelCol:{span:24},name:["batchConfig","dataSourceConfig","dataSourceContentData","tableName"],rules:[{required:!0,message:x.default.get({id:"spg.DataSourceDynamicConfig.BatchData.DataSourceContent.PleaseEnterATableName",dm:"\u8BF7\u8F93\u5165\u8868\u540D\u641C\u7D22\u9009\u62E9"})}],children:(0,h.jsx)(ei.default,{getPopupContainer:e=>e,showSearch:!0,onSearch:m,options:i.loading?[]:((null===(t=i.data)||void 0===t?void 0:t.result)||[]).map(e=>({label:e,value:e})),placeholder:s&&u?x.default.get({id:"spg.DataSourceDynamicConfig.BatchData.DataSourceContent.PleaseEnterATableName",dm:"\u8BF7\u8F93\u5165\u8868\u540D\u641C\u7D22\u9009\u62E9"}):x.default.get({id:"spg.DataSourceDynamicConfig.BatchData.DataSourceContent.PleaseFillInAccountName",dm:"\u8BF7\u5148\u586B\u5199\u300C\u8D26\u53F7\u540D\u79F0\u300D\u548C\u300C\u6240\u5728\u9879\u76EE\u540D\u79F0\u300D"}),showArrow:f,notFoundContent:i.loading?(0,h.jsx)(eA.default,{size:"small"}):null,suffixIcon:f&&(0,h.jsx)(e_.default,{text:g,children:(0,h.jsx)(ek.default,{})})})}),(0,h.jsx)(P.default.Item,{label:(0,h.jsxs)(G.default,{children:[(0,h.jsx)("span",{children:x.default.get({id:"spg.DataSourceDynamicConfig.BatchData.DataSourceContent.Zoning",dm:"\u5206\u533A"})}),(0,h.jsx)(eo.default,{title:(0,h.jsxs)("div",{children:[(0,h.jsx)("p",{children:x.default.get({id:"spg.DataSourceDynamicConfig.BatchData.DataSourceContent.SingleTaskPleaseSpecifyA",dm:"1\u3001\u5355\u6B21\u4EFB\u52A1\uFF1A\u8BF7\u6307\u5B9A\u5177\u4F53\u7684\u65E5\u671F\u5206\u533A\u503C\uFF0C\u5982dt=20210430\uFF0C\u76EE\u524D\u4E0D\u652F\u6301\u586B\u5199\u591A\u4E2A\u65E5\u671F\u5206\u533A\u503C\uFF0C\u60A8\u53EF\u4EE5\uFF1A1\uFF09\u5408\u5E76\u4E3A\u4E00\u4E2A\u5206\u533A\u8868\uFF0C2\uFF09\u4F7F\u7528\u5468\u671F\u4EFB\u52A1\u5BFC\u5165\uFF0C3\uFF09\u4F7F\u7528\u591A\u4E2A\u5355\u6B21\u4EFB\u52A1\u5BFC\u5165"})}),(0,h.jsx)("p",{children:x.default.get({id:"spg.DataSourceDynamicConfig.BatchData.DataSourceContent.CycleTaskPleaseSpecifyThe",dm:"2\u3001\u5468\u671F\u4EFB\u52A1\uFF1A\u8BF7\u6307\u5B9A\u65E5\u671F\u53D8\u91CF\uFF0C\u5982dt=$bizdate\uFF0C\u5982\u679C\u662F\u591A\u5206\u533A\uFF0C\u8BF7\u4F7F\u7528\u9017\u53F7\u9694\u5F00\uFF0C\u5982dt=\\${bizdate,type=FULL"})})]}),children:(0,h.jsx)(eL.default,{style:{cursor:"pointer"}})})]}),labelCol:{span:24},name:["batchConfig","dataSourceConfig","dataSourceContentData","dt"],children:(0,h.jsx)(z.default,{placeholder:x.default.get({id:"spg.DataSourceDynamicConfig.BatchData.DataSourceContent.PleaseEnterAPartitionValue",dm:"\u8BF7\u8F93\u5165\u5206\u533A\u503C, \u5982dt={20250108}"}),allowClear:!0})})]})]});},eq=()=>{var e,t,a,l,n;let{formConfigData:i,updateFormConfigData:d}=(0,X.useFormContext)(),{batchConfig:o}=i??{},{dataSourceTableType:r,dataSourceConfig:s}=o??{},{dataSourceContentData:u}=s??{},{tableDetail:c,accountList:m}=(0,eI.useDbInfo)(),f=null==u?void 0:null===(e=u.id)||void 0===e?void 0:e.dataSourceId,g=null==u?void 0:u.dbName,p=null==u?void 0:u.tableName,C=!!f&&!!g&&!!p,v=(0,I.useMemoizedFn)(()=>{C&&c.run({id:Number(f),dbName:g,tableName:p});}),y=(0,eu.uniqBy)(null===(l=m.data)||void 0===l?void 0:null===(a=l.result)||void 0===a?void 0:null===(t=a.results)||void 0===t?void 0:t.filter(e=>e.category===$.DATA_SOURCE_TYPE_ENUM.BATCH&&!!e.type).map(e=>({label:e.type,value:e.type})),"value");return(0,es.useEffect)(()=>{v();},[p]),(0,h.jsxs)(h.Fragment,{children:[(0,h.jsx)(P.default.Item,{label:x.default.get({id:"spg.DataSourceDynamicConfig.BatchData.DataSourceType",dm:"\u6570\u636E\u6E90\u7C7B\u578B"}),name:["batchConfig","dataSourceTableType"],rules:[{required:!0,message:x.default.get({id:"spg.DataSourceDynamicConfig.BatchData.PleaseSelectADataSource",dm:"\u8BF7\u9009\u62E9\u6570\u636E\u6E90\u7C7B\u578B"})}],children:(0,h.jsx)(ei.default,{getPopupContainer:e=>e,placeholder:x.default.get({id:"spg.DataSourceDynamicConfig.BatchData.PleaseSelectADataSource",dm:"\u8BF7\u9009\u62E9\u6570\u636E\u6E90\u7C7B\u578B"}),options:y,onChange:e=>{null==d||d({batchConfig:{...o||{},dataSourceTableType:e,dataSourceConfig:{dataSourceContentData:void 0,propertyColumns:[]}}});},notFoundContent:(0,h.jsx)(el.default,{image:el.default.PRESENTED_IMAGE_SIMPLE,description:(0,h.jsxs)(h.Fragment,{children:[(0,h.jsx)("span",{children:x.default.get({id:"spg.DataSourceDynamicConfig.BatchData.NoData",dm:"\u6682\u65E0\u6570\u636E,"})}),(0,h.jsx)("a",{onClick:()=>b.history.push("/home/globalConfig"),children:x.default.get({id:"spg.DataSourceDynamicConfig.BatchData.GoToConfigure",dm:"\u53BB\u914D\u7F6E"})})]})})})}),(0,h.jsx)(P.default.Item,{label:x.default.get({id:"spg.DataSourceDynamicConfig.BatchData.ContentType",dm:"\u5185\u5BB9\u7C7B\u578B"}),name:["batchConfig","structure"],rules:[{required:!0,message:x.default.get({id:"spg.DataSourceDynamicConfig.BatchData.PleaseSelectAContentType",dm:"\u8BF7\u9009\u62E9\u5185\u5BB9\u7C7B\u578B"})}],children:(0,h.jsx)(eS,{})}),(0,h.jsxs)(h.Fragment,{children:[(0,h.jsx)(P.default.Item,{label:x.default.get({id:"spg.DataSourceDynamicConfig.BatchData.DataSourceContent",dm:"\u6570\u636E\u6E90\u5185\u5BB9"}),name:["batchConfig","dataSourceConfig","dataSourceContentData"],rules:[{required:!0,message:x.default.get({id:"spg.DataSourceDynamicConfig.BatchData.PleaseConfigureDataSourceContent",dm:"\u8BF7\u914D\u7F6E\u6570\u636E\u6E90\u5185\u5BB9"})}],children:(0,h.jsx)(eG,{type:r,category:$.DATA_SOURCE_TYPE_ENUM.BATCH})}),(0,h.jsx)(P.default.Item,{className:eM.selectImportFiledContainer,label:x.default.get({id:"spg.DataSourceDynamicConfig.BatchData.SelectImportFields",dm:"\u9009\u62E9\u5BFC\u5165\u5B57\u6BB5"}),extra:(0,h.jsx)(eo.default,{title:C?"":x.default.get({id:"spg.DataSourceDynamicConfig.BatchData.PleaseCompleteTheAccountName",dm:"\u8BF7\u5148\u5B8C\u6210\u586B\u5199\u300C\u8D26\u53F7\u540D\u79F0\u300D\u300C\u6240\u5728\u9879\u76EE\u540D\u79F0\u300D\u300C\u8868\u540D\u300D"}),children:(0,h.jsx)(et.default,{className:eM.refreshBtn,icon:(0,h.jsx)(eh,{}),type:"default",size:"small",onClick:v,disabled:!C,loading:c.loading,children:x.default.get({id:"spg.DataSourceDynamicConfig.BatchData.Refresh",dm:"\u5237\u65B0"})})}),name:["batchConfig","dataSourceConfig","propertyColumns"],rules:[{required:!0,message:x.default.get({id:"spg.DataSourceDynamicConfig.BatchData.PleaseSelectAnImportField",dm:"\u8BF7\u9009\u62E9\u5BFC\u5165\u5B57\u6BB5"}),validator:(e,t)=>(0,J.isEmpty)(t)?Promise.reject(Error(x.default.get({id:"spg.DataSourceDynamicConfig.BatchData.PleaseSelectAnImportField",dm:"\u8BF7\u9009\u62E9\u5BFC\u5165\u5B57\u6BB5"}))):Promise.resolve()}],children:(0,h.jsx)(eN,{dataSource:(null===(n=c.data)||void 0===n?void 0:n.result)||[],options:{disabledColsEdit:!0}})})]})]});};var e$={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M832 64H192c-17.7 0-32 14.3-32 32v832c0 17.7 14.3 32 32 32h640c17.7 0 32-14.3 32-32V96c0-17.7-14.3-32-32-32zm-40 824H232V687h97.9c11.6 32.8 32 62.3 59.1 84.7 34.5 28.5 78.2 44.3 123 44.3s88.5-15.7 123-44.3c27.1-22.4 47.5-51.9 59.1-84.7H792v-63H643.6l-5.2 24.7C626.4 708.5 573.2 752 512 752s-114.4-43.5-126.5-103.3l-5.2-24.7H232V136h560v752zM320 341h384c4.4 0 8-3.6 8-8v-48c0-4.4-3.6-8-8-8H320c-4.4 0-8 3.6-8 8v48c0 4.4 3.6 8 8 8zm0 160h384c4.4 0 8-3.6 8-8v-48c0-4.4-3.6-8-8-8H320c-4.4 0-8 3.6-8 8v48c0 4.4 3.6 8 8 8z"}}]},name:"container",theme:"outlined"},eY=w.forwardRef(function(e,t){return w.createElement(ep.default,(0,em.default)((0,em.default)({},e),{},{ref:t,icon:e$}));}),eH=a("6625ed34"),eW=g._(eH);a("ce896539"),a("b502ec14"),a("74667962");var ez=a("84e84fa8"),eK=g._(ez);let eQ=["utf-8","utf-16be","utf-16le","gbk","gb18030","iso-8859-2","iso-8859-3","iso-8859-4","iso-8859-5","iso-8859-6","iso-8859-7","iso-8859-8","iso-8859-8i","iso-8859-10","iso-8859-13","iso-8859-14","iso-8859-15","iso-8859-16","koi8-r","koi8-u","macintosh","windows-874","windows-1250","windows-1251","windows-1252","windows-1253","windows-1254","windows-1255","windows-1256","windows-1257","windows-1258","x-mac-cyrillic","hz-gb-2312","big5","euc-jp","iso-2022-jp","shift-jis","euc-kr","iso-2022-kr","ibm866"],eJ=(e,t)=>{let a=e.split(";base64,")[1]??"",l=Uint8Array.from(atob(a),e=>e.charCodeAt(0));for(let e of t||eQ)try{return new TextDecoder(e,{fatal:!0}).decode(l),{success:!0,encoding:e};}catch(e){console.warn(`\u{89E3}\u{7801}\u{9519}\u{8BEF}\u{FF0C}\u{5C1D}\u{8BD5}\u{4E0B}\u{4E00}\u{4E2A}\u{7F16}\u{7801}`);}return{success:!1};},eZ=(e,t,a)=>{var l;let n=(null===(l=eJ(t))||void 0===l?void 0:l.encoding)||"ascii";eK.default.parse(e,{encoding:n,complete:e=>{let t=e.data;""===t[t.length-1]&&t.pop(),null==a||a(t);}});};var eX={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M400 317.7h73.9V656c0 4.4 3.6 8 8 8h60c4.4 0 8-3.6 8-8V317.7H624c6.7 0 10.4-7.7 6.3-12.9L518.3 163a8 8 0 00-12.6 0l-112 141.7c-4.1 5.3-.4 13 6.3 13zM878 626h-60c-4.4 0-8 3.6-8 8v154H214V634c0-4.4-3.6-8-8-8h-60c-4.4 0-8 3.6-8 8v198c0 17.7 14.3 32 32 32h684c17.7 0 32-14.3 32-32V634c0-4.4-3.6-8-8-8z"}}]},name:"upload",theme:"outlined"},e0=w.forwardRef(function(e,t){return w.createElement(ep.default,(0,em.default)((0,em.default)({},e),{},{ref:t,icon:eX}));});(n=s||(s={})).SUCCESS="success",n.ERROR="error",n.DONE="done",n.UPLOADING="uploading",n.REMOVED="removed";let e1={allowedFileTypes:[".csv"],showEmptyDataMessage:!0,showUploadSuccessMessage:!0,parseCsvData:!0};var e2={allowedFileTypesAlert:"allowedFileTypesAlert-jRQhD-9m",linkIcon:"linkIcon-Sa2CczXg",fileName:"fileName-1ngT9QtO",allowedFileTypesContent:"allowedFileTypesContent-A0_zl2aW",deleteIcon:"deleteIcon-OBt5YbBr",uploadTitle:"uploadTitle-mxGfwksM",uploadedFileInfo:"uploadedFileInfo-2idfY1uQ"};let e3=e=>Array.isArray(e)&&!(0,J.isEmpty)(e)?e.filter(Boolean).join(","):".csv",e4=e=>{var t;if(!Array.isArray(e)||0===e.length)return[];let a=e[0];return(null==a?void 0:null===(t=a.map((e,t)=>({name:String(e??"").trim().replace("#",""),index:t})))||void 0===t?void 0:t.filter(e=>!!e.name))??[];},e9=e=>{let{UploadComponent:t=eW.default,className:a,options:l,children:n}=e,{allowedFileTypes:i,showEmptyDataMessage:d,showUploadSuccessMessage:o,parseCsvData:r}=(0,J.defaults)(l,e1),[u,c]=(0,I.useControllableValue)(e,{defaultValue:void 0,defaultValuePropName:"defaultValue",valuePropName:"value",trigger:"onChange"}),m=(0,w.useMemo)(()=>(0,J.isEmpty)(u)?{}:{fileList:[{uid:"1",name:String(u.fileName),url:String(u.fileUrl)}]},[u]),f=async({url:e})=>{e&&window.open(e,"_blank");};return(0,h.jsx)(t,{className:(0,ev.default)(e2.uploader,a),name:"file",action:"/public/v1/reasoner/dialog/uploadFile",accept:e3(i),onPreview:f,beforeUpload:()=>{(0,J.isEmpty)(u)||c(void 0);},onChange:({file:e})=>{let{size:t,status:a,type:l,name:n,originFileObj:i,response:u}=e||{};if(t&&!(t/1024/1024<200)){F.default.error(x.default.get({id:"spg.CSVUploader.BaseCSVUploader.FileSizeCannotExceedMb",dm:"\u6587\u4EF6\u5927\u5C0F\u4E0D\u80FD\u8D85\u8FC7 200MB!"}));return;}if(a===s.ERROR)return F.default.error(x.default.get({id:"spg.CSVUploader.BaseCSVUploader.UploadFailedPleaseTryAgain",dm:"\u4E0A\u4F20\u5931\u8D25, \u8BF7\u91CD\u8BD5..."}));if(a===s.REMOVED){c(void 0);return;}if(a===s.DONE){if(!(null==u?void 0:u.success))return c(void 0),F.default.error(`\u{4E0A}\u{4F20}\u{5931}\u{8D25}, \u{8BF7}\u{91CD}\u{8BD5}...${null==u?void 0:u.errorMsg}`);if(o&&F.default.success(x.default.get({id:"spg.CSVUploader.BaseCSVUploader.FileUploadedSuccessfully",dm:"\u6587\u4EF6\u4E0A\u4F20\u6210\u529F"})),"text/csv"===l||n.includes(".csv")){if(r){let e=new FileReader;e.onload=e=>{var t;return eZ(i,null===(t=e.target)||void 0===t?void 0:t.result,e=>{if((0,J.isEmpty)(e)){d&&F.default.warning(x.default.get({id:"spg.CSVUploader.BaseCSVUploader.NoDataHasBeenExtracted",dm:"\u6587\u4EF6\u672A\u89E3\u6790\u51FA\u4EFB\u4F55\u6570\u636E\uFF0C\u8BF7\u68C0\u67E5\u6587\u4EF6\u5185\u5BB9"})),c(void 0);return;}c({fileName:n,fileUrl:(null==u?void 0:u.result)??"",fileData:e4(e)});});},e.onerror=()=>F.default.error(x.default.get({id:"spg.CSVUploader.BaseCSVUploader.FileParsingFailed",dm:"\u6587\u4EF6\u89E3\u6790\u5931\u8D25"})),i?e.readAsDataURL(i):F.default.error(x.default.get({id:"spg.CSVUploader.BaseCSVUploader.UnableToReadFile",dm:"\u65E0\u6CD5\u8BFB\u53D6\u6587\u4EF6"}));return;}c({fileName:n,fileUrl:(null==u?void 0:u.result)??"",fileData:[]});return;}c({fileName:n,fileUrl:(null==u?void 0:u.result)??"",fileData:[]});}},multiple:!1,maxCount:1,...m,children:n||(0,h.jsx)(et.default,{icon:(0,h.jsx)(e0,{}),children:x.default.get({id:"spg.CSVUploader.BaseCSVUploader.UploadFile",dm:"\u4E0A\u4F20\u6587\u4EF6"})})});},e8=e=>{var t,a;return(0,h.jsx)(e9,{UploadComponent:eW.default.Dragger,...e,children:(0,h.jsxs)(G.default,{direction:"vertical",children:[(0,h.jsx)("p",{className:"ant-upload-drag-icon",children:(0,h.jsx)(eY,{style:{fontSize:"40px"}})}),(0,h.jsx)("p",{className:e2.uploadTitle,children:x.default.get({id:"spg.CSVUploader.CSVUploadDragger.ClickOrDragTheFile",dm:"\u70B9\u51FB\u6216\u5C06\u6587\u4EF6\u62D6\u62FD\u5230\u8FD9\u91CC\u4E0A\u4F20"})}),(0,h.jsxs)("p",{className:e2.allowedFileTypesContent,children:[x.default.get({id:"spg.CSVUploader.CSVUploadDragger.SupportExtensionName",dm:"\u652F\u6301\u62D3\u5C55\u540D:"}),null==e?void 0:null===(a=e.options)||void 0===a?void 0:null===(t=a.allowedFileTypes)||void 0===t?void 0:t.join("\uFF0C")]}),(0,h.jsx)("p",{className:e2.allowedFileTypesAlert,children:x.default.get({id:"spg.CSVUploader.CSVUploadDragger.NoteOnlyOneFileCan",dm:"\u6CE8\u610F: \u5355\u6B21\u4EC5\u652F\u6301\u4E0A\u4F201\u4E2A\u6587\u4EF6\uFF0C\u5355\u4E2A\u6587\u4EF6\u5927\u5C0F\u5728200MB\u4EE5\u5185"})})]})});};var e5=a("7cf502f9"),e7=g._(e5),e6=a("5c03c6a7"),te=g._(e6);a("a816c969");let tt=(e,t)=>{let{formInstance:a}=t??{},[l,n]=(0,w.useState)(1),[i,d]=(0,I.useControllableValue)(e,{defaultValue:[],defaultValuePropName:"defaultDataSource",valuePropName:"dataSource",trigger:"onTableDataChange"}),o=i??[];return(0,w.useEffect)(()=>{if(Array.isArray(o)){var e;null==a||null===(e=a.setFieldsValue)||void 0===e||e.call(a,{items:o});}},[o]),{tableDataSource:o,setTableDataSource:d,tableRowCount:l,setTableRowCount:n,handleAddRows:e=>{var t;let l=Array.from({length:e},(e,t)=>({key:o.length+t,name:""})),n=[...o,...l];d(n),null==a||null===(t=a.setFieldsValue)||void 0===t||t.call(a,{items:n});},handleDeleteRow:e=>{var t;let l=o.filter((t,a)=>e!==a);d(l),null==a||null===(t=a.setFieldsValue)||void 0===t||t.call(a,{items:l});}};},{Link:ta,Text:tl}=eT.default,tn=e=>{let{options:t}=e,{disabled:a=!1}=t??{},[l]=P.default.useForm(),{tableDataSource:n,setTableDataSource:i,handleAddRows:d,handleDeleteRow:o,tableRowCount:r,setTableRowCount:s}=tt(e,{formInstance:l}),u=[{width:"100px",title:x.default.get({id:"spg.components.EditDataSourceFieldTable.SerialNumber",dm:"\u5E8F\u5217\u53F7"}),dataIndex:"name",render:(e,t,a)=>String(a+1)},{title:x.default.get({id:"spg.components.EditDataSourceFieldTable.FieldName",dm:"\u5B57\u6BB5\u540D\u79F0"}),dataIndex:"name",render:(e,t,l)=>(0,h.jsx)(P.default.Item,{style:{margin:"0px",padding:"0px"},name:[l,"name"],rules:[{required:!0,message:x.default.get({id:"spg.components.EditDataSourceFieldTable.PleaseEnterAFieldName",dm:"\u8BF7\u8F93\u5165\u5B57\u6BB5\u540D\u79F0"})}],children:(0,h.jsx)(z.default,{disabled:a,placeholder:x.default.get({id:"spg.components.EditDataSourceFieldTable.PleaseEnterAFieldName",dm:"\u8BF7\u8F93\u5165\u5B57\u6BB5\u540D\u79F0"})})})},{title:x.default.get({id:"spg.components.EditDataSourceFieldTable.Operation",dm:"\u64CD\u4F5C"}),dataIndex:"action",render:(e,t,l)=>(0,h.jsx)(ta,{disabled:a,onClick:()=>o(l),children:x.default.get({id:"spg.components.EditDataSourceFieldTable.Delete",dm:"\u5220\u9664"})})}];return(0,h.jsx)(P.default,{form:l,disabled:a,initialValues:{items:n},component:!1,onValuesChange:(e,t)=>{let a=null==t?void 0:t.items;if(!(0,N.default)(a)&&Array.isArray(a)){i(a.map(e=>({name:e.name})));return;}i([]);},children:(0,h.jsx)(P.default.List,{name:"items",children:e=>(0,h.jsx)(eE.default,{rowKey:"key",dataSource:e.map(e=>({key:e.key,...l.getFieldValue(`items[${e.key}]`)})),columns:u,pagination:!1,footer:()=>(0,h.jsx)(et.default,{block:!0,icon:(0,h.jsx)(e7.default,{}),type:"dashed",disabled:a,onClick:async()=>{await l.validateFields(),d(r);},children:(0,h.jsxs)(G.default,{children:[(0,h.jsx)(tl,{children:x.default.get({id:"spg.components.EditDataSourceFieldTable.AddRow",dm:"\u6DFB\u52A0\u884C"})}),(0,h.jsx)(te.default,{style:{width:"60px"},size:"small",min:1,max:10,maxLength:2,disabled:a,value:r,onChange:e=>s(e??0),onFocus:e=>e.stopPropagation(),onClick:e=>e.stopPropagation(),onMouseDown:e=>e.stopPropagation()}),(0,h.jsx)(tl,{children:x.default.get({id:"spg.components.EditDataSourceFieldTable.Field",dm:"\u4E2A\u5B57\u6BB5"})})]})})})})});},ti=e=>(0,h.jsxs)(G.default,{children:[(0,h.jsx)("span",{children:x.default.get({id:"spg.components.IgnoreFirstLineCheckbox.IgnoreFirstLine",dm:"\u662F\u5426\u5FFD\u7565\u9996\u884C"})}),(0,h.jsx)(Q.default.Group,{...e,options:[{label:x.default.get({id:"spg.components.IgnoreFirstLineCheckbox.Yes",dm:"\u662F"}),value:!0},{label:x.default.get({id:"spg.components.IgnoreFirstLineCheckbox.No",dm:"\u5426"}),value:!1}]})]}),td=()=>{var e;let{formConfigData:t,updateFormConfigData:a}=(0,X.useFormContext)(),{dataSourceConfig:l}=t??{},{structure:n,uploadFileInfo:i}=l??{},{fileName:d,fileData:o}=i??{},r=n?Z.STRUCTURE:Z.UN_STRUCTURE,s="csv"===((null===(e=String(d))||void 0===e?void 0:e.split(".")[1])??"").toLowerCase();return(0,h.jsxs)(h.Fragment,{children:[(0,h.jsx)(P.default.Item,{label:x.default.get({id:"spg.DataSourceDynamicConfig.LocalFile.ContentType",dm:"\u5185\u5BB9\u7C7B\u578B"}),name:["dataSourceConfig","structure"],rules:[{required:!0,message:x.default.get({id:"spg.DataSourceDynamicConfig.LocalFile.PleaseSelectAContentType",dm:"\u8BF7\u9009\u62E9\u5185\u5BB9\u7C7B\u578B"})}],children:(0,h.jsx)(eS,{onChange:e=>{null==a||a({dataSourceConfig:{...l,structure:e,uploadFileInfo:void 0,propertyColumns:void 0}});}})}),(0,h.jsx)(P.default.Item,{label:x.default.get({id:"spg.DataSourceDynamicConfig.LocalFile.UploadFile",dm:"\u4E0A\u4F20\u6587\u4EF6"}),name:["dataSourceConfig","uploadFileInfo"],rules:[{required:!0,message:x.default.get({id:"spg.DataSourceDynamicConfig.LocalFile.PleaseUploadTheFile",dm:"\u8BF7\u4E0A\u4F20\u6587\u4EF6"})}],children:(0,h.jsx)(e8,{onChange:e=>{let{fileData:t}=e??{};Array.isArray(t)&&(null==a||a({dataSourceConfig:{...l,uploadFileInfo:e,propertyColumns:t}}));},options:{allowedFileTypes:r}})}),n&&(0,h.jsx)(P.default.Item,{className:eM.selectImportFiledContainer,label:x.default.get({id:"spg.DataSourceDynamicConfig.LocalFile.SelectImportFields",dm:"\u9009\u62E9\u5BFC\u5165\u5B57\u6BB5"}),name:["dataSourceConfig","propertyColumns"],rules:[{required:!0,message:x.default.get({id:"spg.DataSourceDynamicConfig.LocalFile.PleaseSelectAnImportField",dm:"\u8BF7\u9009\u62E9\u5BFC\u5165\u5B57\u6BB5"}),validator:(e,t)=>(0,J.isEmpty)(t)?Promise.reject(Error(x.default.get({id:"spg.DataSourceDynamicConfig.LocalFile.PleaseSelectAnImportField",dm:"\u8BF7\u9009\u62E9\u5BFC\u5165\u5B57\u6BB5"}))):Promise.resolve()}],validateTrigger:"onTableDataChange",valuePropName:"dataSource",trigger:"onTableDataChange",children:(0,h.jsx)(tn,{})}),!n&&s&&(0,h.jsx)(P.default.Item,{className:eM.selectImportFiledContainer,label:x.default.get({id:"spg.DataSourceDynamicConfig.LocalFile.SelectImportFields",dm:"\u9009\u62E9\u5BFC\u5165\u5B57\u6BB5"}),name:["dataSourceConfig","propertyColumns"],rules:[{required:!0,message:x.default.get({id:"spg.DataSourceDynamicConfig.LocalFile.PleaseSelectAnImportField",dm:"\u8BF7\u9009\u62E9\u5BFC\u5165\u5B57\u6BB5"}),validator:(e,t)=>(0,J.isEmpty)(t)?Promise.reject(Error(x.default.get({id:"spg.DataSourceDynamicConfig.LocalFile.PleaseSelectAnImportField",dm:"\u8BF7\u9009\u62E9\u5BFC\u5165\u5B57\u6BB5"}))):Promise.resolve()}],children:(0,h.jsx)(eN,{dataSource:o||[],onDataSourceChange:e=>{null==a||a({dataSourceConfig:{...l,uploadFileInfo:{...i,fileData:e}}});}})}),s&&(0,h.jsx)(P.default.Item,{className:eM.ignoreFirstLineContainer,name:["dataSourceConfig","ignoreHeader"],labelCol:{span:4},wrapperCol:{span:12},colon:!1,children:(0,h.jsx)(ti,{})})]});};var to=a("0b69d691"),tr=a("073a1148");let{json2Object:ts}=p._(tr),tu=e=>{let{type:t,category:a,formColumns:l}=e,{list:n,loading:i}=l,d=(0,es.useMemo)(()=>{let e=n.map(e=>({name:e.name,required:!!ts(e.text).required})),t=e.slice(0,Math.ceil(e.length/2)),a=e.slice(Math.ceil(e.length/2));return t.length===a.length?t.push({name:"totalCount",required:!0}):t.length>a.length&&a.push({name:"totalCount",required:!0}),{left:t,right:a};},[n]),o=e=>"totalCount"===e.name?(0,h.jsx)(P.default.Item,{label:x.default.get({id:"spg.DataSourceDynamicConfig.StreamData.DataSourceContent.DailyUpdateDataVolume",dm:"\u65E5\u66F4\u65B0\u6570\u636E\u91CF"}),labelCol:{span:24},initialValue:1e3,name:["streamConfig","dataSourceConfig","dataSourceContentData","totalCount"],rules:[{required:!0,message:x.default.get({id:"spg.DataSourceDynamicConfig.StreamData.DataSourceContent.PleaseEnterDailyUpdateData",dm:"\u8BF7\u8F93\u5165\u65E5\u66F4\u65B0\u6570\u636E\u91CF"})}],children:(0,h.jsx)(te.default,{style:{width:"100%"},step:1,addonAfter:x.default.get({id:"spg.DataSourceDynamicConfig.StreamData.DataSourceContent.Million",dm:"\u4E07"})})}):(0,h.jsx)(P.default.Item,{label:e.name,labelCol:{span:24},name:["streamConfig","dataSourceConfig","dataSourceContentData",e.name],rules:[{required:e.required,message:x.default.get({id:"spg.DataSourceDynamicConfig.StreamData.DataSourceContent.PleaseEnterItemname",dm:"\u8BF7\u8F93\u5165{itemName}"},{itemName:e.name})}],children:(0,h.jsx)(z.default,{placeholder:x.default.get({id:"spg.DataSourceDynamicConfig.StreamData.DataSourceContent.PleaseEnterItemname",dm:"\u8BF7\u8F93\u5165{itemName}"},{itemName:e.name}),allowClear:!0})});return(0,h.jsx)(eA.default,{spinning:i,children:(0,h.jsxs)("div",{className:"content-i92Z1jd0",children:[(0,h.jsx)(P.default.Item,{label:x.default.get({id:"spg.DataSourceDynamicConfig.StreamData.DataSourceContent.AccountName",dm:"\u8D26\u53F7\u540D\u79F0"}),labelCol:{span:24},name:["streamConfig","dataSourceConfig","dataSourceContentData","id"],rules:[{required:!0,message:x.default.get({id:"spg.DataSourceDynamicConfig.StreamData.DataSourceContent.PleaseSelect",dm:"\u8BF7\u9009\u62E9"})}],getValueFromEvent:(e,t)=>{var a;return null===(a=(0,eu.castArray)(t)[0])||void 0===a?void 0:a.item;},getValueProps:e=>({value:null==e?void 0:e.dataSourceId}),children:(0,h.jsx)(eV.default,{disabled:!t,placeholder:t?x.default.get({id:"spg.DataSourceDynamicConfig.StreamData.DataSourceContent.PleaseSelect",dm:"\u8BF7\u9009\u62E9"}):x.default.get({id:"spg.DataSourceDynamicConfig.StreamData.DataSourceContent.PleaseSelectDataSourceType",dm:"\u8BF7\u5148\u9009\u62E9\u6570\u636E\u6E90\u7C7B\u578B"}),getPopupContainer:e=>e,showSearch:!0,allowClear:!0,filter:{type:t,category:a}})}),(0,h.jsxs)("div",{className:"contentParams-Jac-T_kl",children:[(0,h.jsx)("div",{className:"contentParamsLeft-5i34sUK-",children:d.left.map(e=>o(e))}),(0,h.jsx)("div",{className:"contentParamsRight-KqtE1yO8",children:d.right.map(e=>o(e))})]})]})});},tc=()=>{var e,t,a;let{formConfigData:l,updateFormConfigData:n}=(0,X.useFormContext)(),{streamConfig:i}=l??{},{dataSourceTableType:d}=i??{},{accountList:o}=(0,eI.useDbInfo)(),{data:r,loading:s,run:u}=(0,I.useRequest)(to.getEnumValues,{manual:!0});(0,es.useEffect)(()=>{d&&u({name:d});},[d]);let c=(0,eu.uniqBy)(null===(a=o.data)||void 0===a?void 0:null===(t=a.result)||void 0===t?void 0:null===(e=t.results)||void 0===e?void 0:e.filter(e=>e.category===$.DATA_SOURCE_TYPE_ENUM.STREAM&&e.type).map(e=>({label:e.type,value:e.type})),"value");return(0,h.jsxs)(h.Fragment,{children:[(0,h.jsx)(P.default.Item,{label:x.default.get({id:"spg.DataSourceDynamicConfig.StreamData.DataSourceType",dm:"\u6570\u636E\u6E90\u7C7B\u578B"}),name:["streamConfig","dataSourceTableType"],rules:[{required:!0,message:x.default.get({id:"spg.DataSourceDynamicConfig.StreamData.PleaseSelectADataSource",dm:"\u8BF7\u9009\u62E9\u6570\u636E\u6E90\u7C7B\u578B"})}],children:(0,h.jsx)(ei.default,{getPopupContainer:e=>e,placeholder:x.default.get({id:"spg.DataSourceDynamicConfig.StreamData.PleaseSelectADataSource",dm:"\u8BF7\u9009\u62E9\u6570\u636E\u6E90\u7C7B\u578B"}),options:c,onChange:e=>{null==n||n({streamConfig:{...i||{},dataSourceTableType:e,dataSourceConfig:{dataSourceContentData:void 0,propertyColumns:[]}}});}})}),(0,h.jsx)(P.default.Item,{label:x.default.get({id:"spg.DataSourceDynamicConfig.StreamData.ContentType",dm:"\u5185\u5BB9\u7C7B\u578B"}),name:["streamConfig","structure"],rules:[{required:!0,message:x.default.get({id:"spg.DataSourceDynamicConfig.StreamData.PleaseSelectAContentType",dm:"\u8BF7\u9009\u62E9\u5185\u5BB9\u7C7B\u578B"})}],children:(0,h.jsx)(eS,{})}),(0,h.jsxs)(h.Fragment,{children:[(0,h.jsx)(P.default.Item,{label:x.default.get({id:"spg.DataSourceDynamicConfig.StreamData.DataSourceContent",dm:"\u6570\u636E\u6E90\u5185\u5BB9"}),name:["streamConfig","dataSourceConfig","dataSourceContentData"],rules:[{required:!0,message:x.default.get({id:"spg.DataSourceDynamicConfig.StreamData.PleaseConfigureDataSourceContent",dm:"\u8BF7\u914D\u7F6E\u6570\u636E\u6E90\u5185\u5BB9"})}],children:(0,h.jsx)(tu,{type:d,category:$.DATA_SOURCE_TYPE_ENUM.STREAM,formColumns:{list:(null==r?void 0:r.result)||[],loading:s}})}),(0,h.jsx)(P.default.Item,{className:eM.selectImportFiledContainer,label:x.default.get({id:"spg.DataSourceDynamicConfig.StreamData.SelectImportFields",dm:"\u9009\u62E9\u5BFC\u5165\u5B57\u6BB5"}),name:["streamConfig","dataSourceConfig","propertyColumns"],rules:[{required:!0,message:x.default.get({id:"spg.DataSourceDynamicConfig.StreamData.PleaseSelectAnImportField",dm:"\u8BF7\u9009\u62E9\u5BFC\u5165\u5B57\u6BB5"})}],valuePropName:"dataSource",trigger:"onTableDataChange",children:(0,h.jsx)(tn,{})})]})]});};var tm=a("ea5a09e9"),tf=g._(tm);a("b59f8ae3");let tg=b.styled.label`
  &::after {
    content: ':';
    margin-left: 2px;
    margin-right: 8px;
  }
`,tp=()=>{let{groupLogin:e,bookSlug:t,docSlug:a}={groupLogin:"yuque",bookSlug:"developer",docSlug:"api"},l=[{label:x.default.get({id:"spg.CreateTask.components.YuQueConfTips.LanguageFinchDocumentAddress",dm:"\u8BED\u96C0\u6587\u6863\u5730\u5740"}),value:(0,h.jsx)("span",{children:`https://www.yuque.com/${e}/${t}/${a}`})},{label:x.default.get({id:"spg.CreateTask.components.BaseConfig.SparrowToken",dm:"\u8BED\u96C0Token"}),value:(0,h.jsxs)(h.Fragment,{children:[(0,h.jsx)("ul",{style:{padding:"0 24px"},children:(0,h.jsx)("a",{href:"https://yuque.antfin-inc.com/zhmydk/help/iewolsy92c01nfm0?singleDoc#",target:"_blank",rel:"noreferrer",children:x.default.get({id:"spg.EditTask.components.YuQueConfTips.HowToGetTheToken",dm:"\u5982\u4F55\u83B7\u53D6\u8BED\u96C0token\uFF1F"})})}),(0,h.jsxs)("ol",{children:[(0,h.jsx)("li",{children:x.default.get({id:"spg.EditTask.components.YuQueConfTips.TheSlangFinchAdministratorEnters",dm:"\u8BED\u96C0\u7BA1\u7406\u5458\u8FDB\u5165\u201C\u8BED\u96C0\u56E2\u961F\u6587\u6863\u201D\u3002"})}),(0,h.jsx)("li",{children:x.default.get({id:"spg.EditTask.components.YuQueConfTips.ClickSettingsAndThenSelect",dm:"\u70B9\u51FB\u201C\u8BBE\u7F6E\u201D\uFF0C\u7136\u540E\u9009\u62E9\u201C\u66F4\u591A\u8BBE\u7F6E\u201D\u3002"})}),(0,h.jsx)("li",{children:x.default.get({id:"spg.EditTask.components.YuQueConfTips.InTheMenuSelectToken",dm:"\u5728\u83DC\u5355\u4E2D\uFF0C\u9009\u62E9\u201CToken\u201D\uFF0C\u521B\u5EFA\u4E00\u4E2A\u65B0\u7684Token\uFF0C\u786E\u4FDD\u5B83\u62E5\u6709\u201C\u8BFB\u53D6\u77E5\u8BC6\u5E93/\u6587\u6863\u201D\u7684\u6743\u9650\u3002"})}),(0,h.jsx)("li",{children:x.default.get({id:"spg.EditTask.components.YuQueConfTips.ReviewTheNewlyGeneratedToken",dm:"\u67E5\u770B\u65B0\u751F\u6210\u7684Token\uFF0C\u590D\u5236\u5176\u201CAccess\u201D\u90E8\u5206\uFF0C\u7136\u540E\u7C98\u8D34\u81F3\u6240\u9700\u4F4D\u7F6E\u3002"})})]})]})}];return(0,h.jsx)("div",{style:{width:"40%"},children:(0,h.jsx)(tf.default,{content:(0,h.jsx)("ul",{children:l.map((e,t)=>(0,h.jsxs)("li",{children:[(0,h.jsx)(tg,{children:e.label}),(0,h.jsx)("span",{children:e.value})]},t))}),children:(0,h.jsx)(eL.default,{style:{cursor:"pointer"}})})});},{Text:th}=eT.default,tC=()=>(0,h.jsxs)("div",{className:"yuqueConfigContainer-PZwF1owi",children:[(0,h.jsx)(P.default.Item,{label:(0,h.jsxs)(G.default,{children:[(0,h.jsx)(th,{children:x.default.get({id:"spg.DataSourceDynamicConfig.YuQue.LanguageFinchDocumentKnowledgeBase",dm:"\u8BED\u96C0\u6587\u6863/\u77E5\u8BC6\u5E93\u5730\u5740"})}),(0,h.jsx)(tp,{})]}),name:["yuqueConfig","yuQueUrl"],rules:[{required:!0,message:x.default.get({id:"spg.DataSourceDynamicConfig.YuQue.PleaseEnterTheAddressOf",dm:"\u8BF7\u8F93\u5165\u8BED\u96C0\u6587\u6863/\u77E5\u8BC6\u5E93\u5730\u5740"})}],children:(0,h.jsx)(z.default,{allowClear:!0,placeholder:x.default.get({id:"spg.DataSourceDynamicConfig.YuQue.PleaseEnterTheAddressOf",dm:"\u8BF7\u8F93\u5165\u8BED\u96C0\u6587\u6863/\u77E5\u8BC6\u5E93\u5730\u5740"})})}),(0,h.jsx)(P.default.Item,{style:{marginBottom:"0px"},label:x.default.get({id:"spg.DataSourceDynamicConfig.YuQue.SparrowToken",dm:"\u8BED\u96C0Token"}),name:["yuqueConfig","yuQueToken"],rules:[{required:!0,message:x.default.get({id:"spg.DataSourceDynamicConfig.YuQue.PleaseEnterTheSlangFinch",dm:"\u8BF7\u8F93\u5165\u8BED\u96C0Token"})}],children:(0,h.jsx)(z.default.Password,{allowClear:!0,placeholder:x.default.get({id:"spg.DataSourceDynamicConfig.YuQue.PleaseEnterTheSlangFinch",dm:"\u8BF7\u8F93\u5165\u8BED\u96C0Token"})})})]}),tv=()=>{let{formConfigData:e}=(0,X.useFormContext)(),{type:t}=e??{};return({[$.DATA_SOURCE_TYPE_ENUM.FILE_EXTRACT]:(0,h.jsx)(td,{}),[$.DATA_SOURCE_TYPE_ENUM.YUQUE_EXTRACT]:(0,h.jsx)(tC,{}),[$.DATA_SOURCE_TYPE_ENUM.BATCH]:(0,h.jsx)(eq,{}),[$.DATA_SOURCE_TYPE_ENUM.STREAM]:(0,h.jsx)(tc,{})})[t??""]??(0,h.jsx)(h.Fragment,{});},tx=()=>{let{updateFormConfigData:e}=(0,X.useFormContext)();return(0,h.jsxs)("div",{style:{height:"100%",width:"60%"},children:[(0,h.jsx)(P.default.Item,{label:x.default.get({id:"spg.StepsConfigForm.BaseConfig.NameOfKnowledge",dm:"\u77E5\u8BC6\u540D\u79F0"}),name:"jobName",rules:[{required:!0,message:x.default.get({id:"spg.StepsConfigForm.BaseConfig.PleaseEnterAKnowledgeName",dm:"\u8BF7\u8F93\u5165\u77E5\u8BC6\u540D\u79F0"})}],children:(0,h.jsx)(z.default,{placeholder:x.default.get({id:"spg.StepsConfigForm.BaseConfig.PleaseEnterAKnowledgeName",dm:"\u8BF7\u8F93\u5165\u77E5\u8BC6\u540D\u79F0"})})}),(0,h.jsx)(P.default.Item,{label:x.default.get({id:"spg.StepsConfigForm.BaseConfig.DataSource",dm:"\u6570\u636E\u6E90"}),name:"type",rules:[{required:!0}],children:(0,h.jsx)(Q.default.Group,{className:"dataSourceTypeContainer-LYm-_P_I",options:[{label:x.default.get({id:"spg.StepsConfigForm.BaseConfig.LocalFile",dm:"\u672C\u5730\u6587\u4EF6"}),value:$.DATA_SOURCE_TYPE_ENUM.FILE_EXTRACT},{label:x.default.get({id:"spg.StepsConfigForm.BaseConfig.LanguageDocumentKnowledgeBase",dm:"\u8BED\u96C0\u6587\u6863/\u77E5\u8BC6\u5E93"}),value:$.DATA_SOURCE_TYPE_ENUM.YUQUE_EXTRACT},{label:x.default.get({id:"spg.StepsConfigForm.BaseConfig.BulkData",dm:"\u6279\u91CF\u6570\u636E"}),value:$.DATA_SOURCE_TYPE_ENUM.BATCH},{label:x.default.get({id:"spg.StepsConfigForm.BaseConfig.RealTimeData",dm:"\u5B9E\u65F6\u6570\u636E"}),value:$.DATA_SOURCE_TYPE_ENUM.STREAM}],onChange:t=>{null==e||e({type:t.target.value,...(0,J.pick)(H,["splitConfig","mappingConfig","extractConfig","importConfig"])});}})}),(0,h.jsx)(tv,{})]});};a("5ab73bad"),a("29a04be0"),a("5a70f60d");var ty=a("3834a44f");let tS=()=>{let e=Number((0,ty.getProjectId)());return(0,b.useQuery)({queryKey:["useModelDataQuery/getLlmSelect",e],queryFn:async()=>{let t=await (0,to.getLlmSelect)({projectId:e}),{success:a,result:l}=t??{};return a&&l?l:Promise.reject(t);},enabled:!(0,J.isNil)(e)});};var tb=a("2e2809ed");let tE=e=>{let{isFetching:t,data:a}=tS(),[l,n]=(0,I.useControllableValue)(e,{defaultValuePropName:"defaultValue",valuePropName:"value",trigger:"onChange"}),i=(0,w.useMemo)(()=>null==a?void 0:a.map(e=>({label:(0,h.jsx)(tb.OptionLabel,{itemRecord:e}),value:`${e.llm_id}-${e.model}`,item:e})),[a]);return(0,h.jsx)(ei.default,{allowClear:!0,showSearch:!0,placeholder:x.default.get({id:"spg.components.ModelSelect.PleaseSelect",dm:"\u8BF7\u9009\u62E9"}),value:l,onChange:e=>{if(!e){null==n||n(void 0);return;}n(e);},options:i,filterOption:(e,t)=>{if(!t||!t.item)return!1;let{llm_id:a,model:l}=t.item,n=e.toLowerCase();return a.toLowerCase().includes(n)||l.toLowerCase().includes(n);},loading:t,dropdownRender:e=>(0,h.jsx)(eA.default,{spinning:t,children:e}),notFoundContent:t?(0,h.jsx)(el.default,{image:el.default.PRESENTED_IMAGE_SIMPLE,description:x.default.get({id:"spg.components.ModelSelect.DataLoadingIn",dm:"\u6570\u636E\u52A0\u8F7D\u4E2D..."})}):(0,h.jsx)(el.default,{image:el.default.PRESENTED_IMAGE_SIMPLE,description:x.default.get({id:"spg.components.ModelSelect.NoData",dm:"\u6682\u65E0\u6570\u636E"})}),...e});};var tj=a("f5597950"),tT=g._(tj);let tD=e=>{let{fetch:t,cacheKey:a=[],customRenderOptions:l,...n}=e,{data:i}=(0,b.useQuery)(a,t,{cacheTime:36e5,staleTime:36e5}),d=l?l(i):((null==i?void 0:i.result)||[]).map(e=>({label:e.text,value:e.name}));return(0,h.jsx)(ei.default,{...n,options:d});};(i=u||(u={})).Select="select",i.AsyncSelect="asyncSelect",i.Input="input",i.InputNumber="inputNumber",i.Checkbox="checkbox",i.Textarea="textarea",i.ModelSelect="modelSelect";let tN=({formItems:e})=>(0,h.jsx)(h.Fragment,{children:e.map(e=>{let{getValueFromEvent:t,getValueProps:a}=e;switch(e.inputType){case"checkbox":return(0,h.jsx)(P.default.Item,{label:e.label,name:e.name,rules:e.rules,valuePropName:e.valuePropName,initialValue:e.initialValue,style:e.style,hidden:!!e.hidden,children:(0,h.jsxs)(tT.default,{disabled:e.disabled,children:[(0,h.jsx)("span",{children:e.text}),e.remarksText&&(0,h.jsx)("span",{style:{color:"#000a1a79"},children:e.remarksText})]})},e.name.toString());case"input":return(0,h.jsx)(P.default.Item,{label:e.label,name:e.name,rules:e.rules,style:e.style,hidden:!!e.hidden,children:(0,h.jsx)(z.default,{placeholder:x.default.get({id:"spg.KnowledgeModeling.components.DynamicFormItems.PleaseEnter",dm:"\u8BF7\u8F93\u5165"})})},e.name.toString());case"inputNumber":return(0,h.jsx)(P.default.Item,{label:e.label,name:e.name,rules:e.rules,initialValue:e.initialValue,style:e.style,hidden:!!e.hidden,children:(0,h.jsx)(te.default,{stringMode:!0,style:{width:"100%"},placeholder:x.default.get({id:"spg.KnowledgeModeling.components.DynamicFormItems.PleaseEnter",dm:"\u8BF7\u8F93\u5165"})})},e.name.toString());case"asyncSelect":return(0,h.jsx)(P.default.Item,{label:e.label,name:e.name,rules:e.rules,style:e.style,hidden:!!e.hidden,children:(0,h.jsx)(tD,{cacheKey:e.cacheKey,fetch:e.fetch,placeholder:x.default.get({id:"spg.KnowledgeModeling.components.DynamicFormItems.PleaseSelect",dm:"\u8BF7\u9009\u62E9"})})},e.name.toString());case"select":return(0,h.jsx)(P.default.Item,{label:e.label,name:e.name,rules:e.rules,style:e.style,hidden:!!e.hidden,children:(0,h.jsx)(ei.default,{options:e.options,placeholder:x.default.get({id:"spg.KnowledgeModeling.components.DynamicFormItems.PleaseSelect",dm:"\u8BF7\u9009\u62E9"})})},e.name.toString());case"textarea":return(0,h.jsx)(P.default.Item,{label:e.label,name:e.name,rules:e.rules,style:e.style,hidden:!!e.hidden,children:(0,h.jsx)(z.default.TextArea,{placeholder:x.default.get({id:"spg.KnowledgeModeling.components.DynamicFormItems.PleaseEnter",dm:"\u8BF7\u8F93\u5165"})})},e.name.toString());case"modelSelect":return(0,h.jsx)(P.default.Item,{label:e.label,name:e.name,rules:e.rules,style:e.style,hidden:!!e.hidden,getValueFromEvent:t,getValueProps:a,children:(0,h.jsx)(tE,{})},e.name.toString());default:return null;}})}),tI=[{label:x.default.get({id:"spg.KnowledgeModeling.constants.createTask.SegmentLength",dm:"\u5206\u6BB5\u6700\u5927\u957F\u5EA6"}),name:["splitConfig","splitLength"],rules:[{required:!0}],inputType:u.InputNumber},{label:x.default.get({id:"spg.KnowledgeModeling.constants.createTask.Segmentation",dm:"\u5206\u6BB5\u5904\u7406"}),name:["splitConfig","semanticSplit"],inputType:u.Checkbox,text:x.default.get({id:"spg.KnowledgeModeling.constants.createTask.UsingSemanticSegmentation",dm:"\u6839\u636E\u6587\u6863\u8BED\u4E49\u5207\u5206\u6587\u6863\uFF08\u6309\u8BED\u4E49\u5207\u5206\u53EF\u80FD\u8017\u65F6\u8F83\u957F\uFF0C\u6BB5\u843D\u957F\u5EA6\u53EF\u80FD\u5C0F\u4E8E\u5206\u6BB5\u6700\u5927\u957F\u5EA6\uFF09"}),valuePropName:"checked"}],tM=[{label:x.default.get({id:"spg.KnowledgeModeling.constants.createTask.ExtractionModel",dm:"\u62BD\u53D6\u6A21\u578B"}),name:["extractConfig","llm"],rules:[{required:!0}],inputType:u.ModelSelect,getValueFromEvent:(e,t)=>{let{item:a}=t??{};return t?JSON.stringify(a):void 0;},getValueProps:e=>{let{llm_id:t,model:a}=(0,E.json2Object)(e);return{value:t?`${t}-${a}`:void 0};}},{label:x.default.get({id:"spg.KnowledgeModeling.constants.createTask.PromptWord",dm:"\u63D0\u793A\u8BCD"}),name:["extractConfig","llmPrompt"],inputType:u.Textarea,hidden:!0},{label:x.default.get({id:"spg.KnowledgeModeling.constants.createTask.ExtractionResults",dm:"\u62BD\u53D6\u6548\u679C"}),name:["extractConfig","autoSchema"],inputType:u.Checkbox,text:x.default.get({id:"spg.KnowledgeModeling.constants.createTask.AllowLargeModelsToRefine",dm:"\u652F\u6301\u62BD\u53D6schema\u5916\u7684\u5185\u5BB9"}),remarksText:x.default.get({id:"spg.KnowledgeModeling.constants.createTask.InformationOtherThanSchemaMay",dm:"\uFF08\u62BD\u53D6\u5185\u5BB9\u66F4\u52A0\u5168\u9762\u4E30\u5BCC\uFF0C\u4F46\u53EF\u80FD\u9700\u8981\u4FEE\u6539schema\uFF09"}),valuePropName:"checked",initialValue:!0,disabled:!0,hidden:!0},{label:x.default.get({id:"spg.KnowledgeModeling.constants.createTask.ImportMethod",dm:"\u5BFC\u5165\u65B9\u5F0F"}),name:["extractConfig","autoWrite"],inputType:u.Checkbox,text:x.default.get({id:"spg.KnowledgeModeling.constants.createTask.ImportDirectlyWithoutConfirmationAfter",dm:"\u62BD\u53D6\u540E\u65E0\u9700\u786E\u8BA4\uFF0C\u76F4\u63A5\u5BFC\u5165"}),valuePropName:"checked",initialValue:!0,disabled:!0,hidden:!0}];var tP=a("4e86a915"),t_=g._(tP),tF=a("80411155"),tA=g._(tF);a("82c067a0");var tw=a("e6fc687f"),tk=g._(tw);a("74bade4e");var tO=a("85d9e535"),tR=g._(tO);a("be197705");let tU={size:"small",min:1,max:31,style:{width:100}},tL=Array.from({length:31},(e,t)=>({label:(0,h.jsx)("span",{style:{display:"inline-block",width:20},children:t+1}),value:`${t+1}`})),tB=w.default.memo(e=>{let[t,a]=(0,I.useControllableValue)(e),[l,n]=(0,I.useSetState)({selectMode:"all",fromDay:1,toDay:10,intervalStartDay:1,intervalDays:1,specificDays:["1"]});return(0,I.useUpdateEffect)(()=>{switch(l.selectMode){case"all":a("*");break;case"none":a("?");break;case"range":a(`${l.fromDay}-${l.toDay}`);break;case"interval":a(`${l.intervalStartDay}/${l.intervalDays}`);break;case"specific":a(l.specificDays.join(","));}},[l,a]),(0,I.useUpdateEffect)(()=>{switch(t){case"*":n({selectMode:"all"});break;case"?":n({selectMode:"none"});break;default:if(t.includes("-")){let[e,a]=t.split("-").map(Number);n({selectMode:"range",fromDay:Number(e||1),toDay:Number(a||10)});}else if(t.includes("/")){let[e,a]=t.split("/").map(Number);n({selectMode:"interval",intervalStartDay:Number(e||1),intervalDays:Number(a||1)});}else n({selectMode:"specific",specificDays:t?t.split(","):["1"]});}},[t]),(0,h.jsx)(Q.default.Group,{value:l.selectMode,onChange:e=>{n({selectMode:e.target.value});},children:(0,h.jsxs)(G.default,{direction:"vertical",children:[(0,h.jsx)(Q.default,{value:"all",children:x.default.get({id:"spg.components.Day.EveryDay",dm:"\u6BCF\u4E00\u65E5"})}),(0,h.jsx)(eo.default,{title:x.default.get({id:"spg.components.Day.TheServerDoesNotSupport",dm:"\u670D\u52A1\u7AEF\u4E0D\u652F\u6301\u8BE5\u914D\u7F6E\u9879"}),children:(0,h.jsx)(Q.default,{value:"none",disabled:!0,children:x.default.get({id:"spg.components.Day.DoNotSpecify",dm:"\u4E0D\u6307\u5B9A"})})}),(0,h.jsx)(Q.default,{value:"range",children:(0,h.jsxs)(G.default,{children:[(0,h.jsx)("span",{children:x.default.get({id:"spg.components.Day.From",dm:"\u4ECE"})}),(0,h.jsx)(te.default,{...tU,disabled:"range"!==l.selectMode,value:l.fromDay,onChange:e=>n({fromDay:e||1})}),(0,h.jsx)("span",{children:x.default.get({id:"spg.components.Day.To",dm:"\u81F3"})}),(0,h.jsx)(te.default,{...tU,disabled:"range"!==l.selectMode,value:l.toDay,onChange:e=>n({toDay:e||1})}),(0,h.jsx)("span",{children:x.default.get({id:"spg.components.Day.DayExecutedOnceADay",dm:"\u65E5\uFF0C\u6BCF\u65E5\u6267\u884C\u4E00\u6B21"})})]})}),(0,h.jsx)(Q.default,{value:"interval",children:(0,h.jsxs)(G.default,{children:[(0,h.jsx)("span",{children:x.default.get({id:"spg.components.Day.From",dm:"\u4ECE"})}),(0,h.jsx)(te.default,{...tU,disabled:"interval"!==l.selectMode,value:l.intervalStartDay,onChange:e=>n({intervalStartDay:e||1})}),(0,h.jsx)("span",{children:x.default.get({id:"spg.components.Day.StartingEveryDay",dm:"\u65E5\u5F00\u59CB\uFF0C \u6BCF"})}),(0,h.jsx)(te.default,{...tU,disabled:"interval"!==l.selectMode,value:l.intervalDays,onChange:e=>n({intervalDays:e||1})}),(0,h.jsx)("span",{children:x.default.get({id:"spg.components.Day.ExecuteOnceADay",dm:"\u65E5\u6267\u884C\u4E00\u6B21"})})]})}),(0,h.jsx)(G.default,{direction:"vertical",children:(0,h.jsxs)(Q.default,{value:"specific",children:[(0,h.jsx)("span",{children:x.default.get({id:"spg.components.Day.Specify",dm:"\u6307\u5B9A"})}),(0,h.jsx)(tT.default.Group,{value:l.specificDays,options:tL,disabled:"specific"!==l.selectMode,onChange:e=>n({specificDays:(0,J.isEmpty)(e)?["1"]:e})})]})})]})});});var tV=a("cc983a81"),tG=g._(tV);a("5b764170");var tq=a("7576484b"),t$=g._(tq);a("dd2a96cb");let tY=Q.default.Group,tH=tT.default.Group,tW={display:"block",paddingBottom:"6px"};function tz(e){let{value:t,onChange:a}=e,[l,n]=(0,w.useState)(1),[i,d]=(0,w.useState)(0),[o,r]=(0,w.useState)(10),[s,u]=(0,w.useState)(0),[c,m]=(0,w.useState)(1),[f,g]=(0,w.useState)(["0"]),p=w.default.useRef();!1!==p.current&&(p.current=!0),(0,w.useEffect)(()=>{if("*"===t)n(1);else if("?"===t)n(5);else if(t.indexOf("-")>-1){n(2);let[e,a]=t.split("-");d(parseInt(e,10)),r(parseInt(a,10));}else if(t.indexOf("/")>-1){n(3);let[e,a]=t.split("/");u(parseInt(e,10)),m(parseInt(a,10));}else n(4),g(t?t.split(","):["0"]);},[t]),(0,w.useEffect)(()=>{if(!p.current)switch(l){case 1:a("*");break;case 2:a(`${i}-${o}`);break;case 3:a(`${s}/${c}`);break;case 4:a(f.join(","));break;case 5:a("?");}},[l,i,o,s,c,f]);let C=(0,w.useCallback)(e=>{n(e.target.value);},[]),v=(0,w.useCallback)(e=>{d(e||0);},[]),y=(0,w.useCallback)(e=>{r(e||0);},[]),S=(0,w.useCallback)(e=>{u(e||0);},[]),b=(0,w.useCallback)(e=>{m(e||0);},[]),E=(0,w.useCallback)(e=>{g(0!==e.length?e:["0"]);},[]),j=(0,w.useMemo)(()=>{let e=4!==l,t=[];for(let a=0;a<24;a++)t.push((0,h.jsx)(tG.default,{span:4,children:(0,h.jsx)(tT.default,{disabled:e,value:a.toString(),children:a})},a));return t;},[l,f]);(0,w.useEffect)(()=>{p.current=!1;},[]);let T=(0,h.jsx)(te.default,{disabled:2!==l,min:0,max:23,value:i,size:"small",onChange:v,style:{width:100}}),D=(0,h.jsx)(te.default,{disabled:2!==l,min:0,max:23,value:o,size:"small",onChange:y,style:{width:100}}),N=(0,h.jsx)(te.default,{disabled:3!==l,min:0,max:23,value:s,size:"small",onChange:S,style:{width:100}}),I=(0,h.jsx)(te.default,{disabled:3!==l,min:0,max:23,value:c,size:"small",onChange:b,style:{width:100}});return(0,h.jsxs)(tY,{name:"radiogroup",value:l,onChange:C,children:[(0,h.jsx)(Q.default,{style:tW,value:1,children:x.default.get({id:"spg.components.Hour.EveryHour",dm:"\u6BCF\u4E00\u5C0F\u65F6"})}),(0,h.jsx)(Q.default,{style:tW,value:5,children:x.default.get({id:"spg.components.Hour.DoNotSpecify",dm:"\u4E0D\u6307\u5B9A"})}),(0,h.jsx)(Q.default,{style:tW,value:2,children:(0,h.jsxs)(h.Fragment,{children:[x.default.get({id:"spg.components.Hour.From",dm:"\u4ECE"}),T,"\xa0-\xa0",D,x.default.get({id:"spg.components.Hour.ExecuteEveryHour",dm:"\u65F6\uFF0C\u6BCF\u5C0F\u65F6\u6267\u884C\u4E00\u6B21"})]})}),(0,h.jsx)(Q.default,{style:tW,value:3,children:(0,h.jsxs)(h.Fragment,{children:[x.default.get({id:"spg.components.Hour.From",dm:"\u4ECE"}),N,x.default.get({id:"spg.components.Hour.WhenItStartsEvery",dm:"\u65F6\u5F00\u59CB\uFF0C \u6BCF"}),I,x.default.get({id:"spg.components.Hour.ExecuteOnceEveryHour",dm:"\u5C0F\u65F6\u6267\u884C\u4E00\u6B21"})]})}),(0,h.jsxs)(Q.default,{style:tW,value:4,children:[x.default.get({id:"spg.components.Hour.Specify",dm:"\u6307\u5B9A"}),(0,h.jsx)("br",{}),(0,h.jsx)(tH,{value:f,onChange:E,children:(0,h.jsxs)(t$.default,{children:[" ",j]})})]})]});}let tK=Q.default.Group,tQ=tT.default.Group,tJ={display:"block",paddingBottom:"6px"};function tZ(e){let{value:t,onChange:a}=e,[l,n]=(0,w.useState)(1),[i,d]=(0,w.useState)(0),[o,r]=(0,w.useState)(10),[s,u]=(0,w.useState)(0),[c,m]=(0,w.useState)(1),[f,g]=(0,w.useState)(["0"]),p=w.default.useRef();!1!==p.current&&(p.current=!0),(0,w.useEffect)(()=>{if("*"===t)n(1);else if("?"===t)n(5);else if(t.indexOf("-")>-1){n(2);let[e,a]=t.split("-");d(parseInt(e,10)),r(parseInt(a,10));}else if(t.indexOf("/")>-1){n(3);let[e,a]=t.split("/");u(parseInt(e,10)),m(parseInt(a,10));}else n(4),g(t?t.split(","):["0"]);},[t]),(0,w.useEffect)(()=>{if(!p.current)switch(l){case 1:a("*");break;case 2:a(`${i}-${o}`);break;case 3:a(`${s}/${c}`);break;case 4:a(f.join(","));break;case 5:a("?");}},[l,i,o,s,c,f]);let C=(0,w.useCallback)(e=>{n(e.target.value);},[]),v=(0,w.useCallback)(e=>{d(e||0);},[]),y=(0,w.useCallback)(e=>{r(e||0);},[]),S=(0,w.useCallback)(e=>{u(e||0);},[]),b=(0,w.useCallback)(e=>{m(e||0);},[]),E=(0,w.useCallback)(e=>{g(0!==e.length?e:["0"]);},[]);(0,w.useEffect)(()=>{p.current=!1;},[]);let j=(0,w.useMemo)(()=>{let e=4!==l,t=[];for(let a=0;a<60;a++)t.push((0,h.jsx)(tG.default,{span:4,children:(0,h.jsx)(tT.default,{disabled:e,value:a.toString(),children:a})},a));return t;},[l,f]),T=(0,h.jsx)(te.default,{disabled:2!==l,min:0,max:59,value:i,size:"small",onChange:v,style:{width:100}}),D=(0,h.jsx)(te.default,{disabled:2!==l,min:0,max:59,value:o,size:"small",onChange:y,style:{width:100}}),N=(0,h.jsx)(te.default,{disabled:3!==l,min:0,max:59,value:s,size:"small",onChange:S,style:{width:100}}),I=(0,h.jsx)(te.default,{disabled:3!==l,min:0,max:59,value:c,size:"small",onChange:b,style:{width:100}});return(0,h.jsxs)(tK,{name:"radiogroup",value:l,onChange:C,children:[(0,h.jsx)(Q.default,{style:tJ,value:1,children:x.default.get({id:"spg.components.Minute.EveryMinute",dm:"\u6BCF\u4E00\u5206\u949F"})}),(0,h.jsx)(Q.default,{style:tJ,value:5,children:x.default.get({id:"spg.components.Minute.DoNotSpecify",dm:"\u4E0D\u6307\u5B9A"})}),(0,h.jsx)(Q.default,{style:tJ,value:2,children:(0,h.jsxs)(h.Fragment,{children:[x.default.get({id:"spg.components.Minute.From",dm:"\u4ECE"}),T,"\xa0-\xa0",D,x.default.get({id:"spg.components.Minute.PointsExecutedOncePerPoint",dm:"\u5206\uFF0C\u6BCF\u5206\u6267\u884C\u4E00\u6B21"})]})}),(0,h.jsx)(Q.default,{style:tJ,value:3,children:(0,h.jsxs)(h.Fragment,{children:[x.default.get({id:"spg.components.Minute.From",dm:"\u4ECE"}),N,x.default.get({id:"spg.components.Minute.StartEvery",dm:"\u5206\u5F00\u59CB\uFF0C \u6BCF"}),I,x.default.get({id:"spg.components.Minute.ExecuteOnce",dm:"\u5206\u6267\u884C\u4E00\u6B21"})]})}),(0,h.jsxs)(Q.default,{style:tJ,value:4,children:[x.default.get({id:"spg.components.Minute.Specify",dm:"\u6307\u5B9A"}),(0,h.jsx)("br",{}),(0,h.jsx)(tQ,{value:f,onChange:E,children:(0,h.jsxs)(t$.default,{children:[" ",j]})})]})]});}let tX=Q.default.Group,t0=tT.default.Group,t1={display:"block",paddingBottom:"6px"};function t2(e){let{value:t,onChange:a}=e,[l,n]=(0,w.useState)(1),[i,d]=(0,w.useState)(1),[o,r]=(0,w.useState)(10),[s,u]=(0,w.useState)(1),[c,m]=(0,w.useState)(1),[f,g]=(0,w.useState)(["1"]),p=w.default.useRef();!1!==p.current&&(p.current=!0),(0,w.useEffect)(()=>{if("*"===t)n(1);else if(t.indexOf("-")>-1){n(2);let[e,a]=t.split("-");d(parseInt(e,10)),r(parseInt(a,10));}else if(t.indexOf("/")>-1){n(3);let[e,a]=t.split("/");u(parseInt(e,10)),m(parseInt(a,10));}else n(4),g(t?t.split(","):["1"]);},[t]),(0,w.useEffect)(()=>{if(!p.current)switch(l){case 1:a("*");break;case 2:a(`${i}-${o}`);break;case 3:a(`${s}/${c}`);break;case 4:a(f.join(","));}},[l,i,o,s,c,f]);let C=(0,w.useCallback)(e=>{n(e.target.value);},[]),v=(0,w.useCallback)(e=>{d(e||1);},[]),y=(0,w.useCallback)(e=>{r(e||1);},[]),S=(0,w.useCallback)(e=>{u(e||1);},[]),b=(0,w.useCallback)(e=>{m(e||1);},[]),E=(0,w.useCallback)(e=>{g(0!==e.length?e:["1"]);},[]),j=(0,w.useMemo)(()=>{let e=4!==l,t=[];for(let a=1;a<13;a++)t.push((0,h.jsx)(tG.default,{span:4,children:(0,h.jsx)(tT.default,{disabled:e,value:a.toString(),children:a})},a));return t;},[l,f]);(0,w.useEffect)(()=>{p.current=!1;},[]);let T=(0,h.jsx)(te.default,{disabled:2!==l,min:1,max:12,value:i,size:"small",onChange:v,style:{width:100}}),D=(0,h.jsx)(te.default,{disabled:2!==l,min:1,max:12,value:o,size:"small",onChange:y,style:{width:100}}),N=(0,h.jsx)(te.default,{disabled:3!==l,min:1,max:12,value:s,size:"small",onChange:S,style:{width:100}}),I=(0,h.jsx)(te.default,{disabled:3!==l,min:1,max:12,value:c,size:"small",onChange:b,style:{width:100}});return(0,h.jsxs)(tX,{name:"radiogroup",value:l,onChange:C,children:[(0,h.jsx)(Q.default,{style:t1,value:1,children:x.default.get({id:"spg.components.Month.EveryMonth",dm:"\u6BCF\u4E00\u6708"})}),(0,h.jsx)(Q.default,{style:t1,value:2,children:(0,h.jsxs)(h.Fragment,{children:[x.default.get({id:"spg.components.Month.From",dm:"\u4ECE"}),T,"\xa0-\xa0",D,x.default.get({id:"spg.components.Month.MonthlyExecutedOnceAMonth",dm:"\u6708\uFF0C\u6BCF\u6708\u6267\u884C\u4E00\u6B21"})]})}),(0,h.jsx)(Q.default,{style:t1,value:3,children:(0,h.jsxs)(h.Fragment,{children:[x.default.get({id:"spg.components.Month.From",dm:"\u4ECE"}),N,x.default.get({id:"spg.components.Month.StartingEveryMonth",dm:"\u6708\u5F00\u59CB\uFF0C \u6BCF"}),I,x.default.get({id:"spg.components.Month.ExecuteOnceAMonth",dm:"\u6708\u6267\u884C\u4E00\u6B21"})]})}),(0,h.jsxs)(Q.default,{style:t1,value:4,children:[x.default.get({id:"spg.components.Month.Specify",dm:"\u6307\u5B9A"}),(0,h.jsx)("br",{}),(0,h.jsx)(t0,{value:f,onChange:E,children:(0,h.jsx)(t$.default,{children:j})})]})]});}let t3=Q.default.Group,t4=tT.default.Group,t9={display:"block",paddingBottom:"6px"};function t8(e){let{value:t,onChange:a}=e,[l,n]=(0,w.useState)(1),[i,d]=(0,w.useState)(0),[o,r]=(0,w.useState)(10),[s,u]=(0,w.useState)(0),[c,m]=(0,w.useState)(1),[f,g]=(0,w.useState)(["0"]),p=w.default.useRef();!1!==p.current&&(p.current=!0),(0,w.useEffect)(()=>{if("*"===t)n(1);else if(t.indexOf("-")>-1){n(2);let[e,a]=t.split("-");d(parseInt(e,10)),r(parseInt(a,10));}else if(t.indexOf("/")>-1){n(3);let[e,a]=t.split("/");u(parseInt(e,10)),m(parseInt(a,10));}else"?"===t?n(5):(n(4),g(t?t.split(","):["0"]));},[t]),(0,w.useEffect)(()=>{if(!p.current)switch(l){case 1:a("*");break;case 2:a(`${i}-${o}`);break;case 3:a(`${s}/${c}`);break;case 4:a(f.join(","));break;case 5:a("?");}},[l,i,o,s,c,f]);let C=(0,w.useCallback)(e=>{n(e.target.value);},[]),v=(0,w.useCallback)(e=>{d(e||0);},[]),y=(0,w.useCallback)(e=>{r(e||0);},[]),S=(0,w.useCallback)(e=>{u(e||0);},[]),b=(0,w.useCallback)(e=>{m(e||0);},[]),E=(0,w.useCallback)(e=>{g(0!==e.length?e:["0"]);},[]),j=(0,w.useMemo)(()=>{let e=4!==l,t=[];for(let a=0;a<60;a++)t.push((0,h.jsx)(tG.default,{span:4,children:(0,h.jsx)(tT.default,{disabled:e,value:a.toString(),children:a})},a));return t;},[l,f]);(0,w.useEffect)(()=>{p.current=!1;},[]);let T=(0,h.jsx)(te.default,{disabled:2!==l,min:0,max:59,value:i,size:"small",onChange:v,style:{width:100}}),D=(0,h.jsx)(te.default,{disabled:2!==l,min:0,max:59,value:o,size:"small",onChange:y,style:{width:100}}),N=(0,h.jsx)(te.default,{disabled:3!==l,min:0,max:59,value:s,size:"small",onChange:S,style:{width:100}}),I=(0,h.jsx)(te.default,{disabled:3!==l,min:0,max:59,value:c,size:"small",onChange:b,style:{width:100}});return(0,h.jsxs)(t3,{name:"radiogroup",value:l,onChange:C,children:[(0,h.jsx)(Q.default,{style:t9,value:1,children:x.default.get({id:"spg.components.Second.EverySecond",dm:"\u6BCF\u4E00\u79D2\u949F"})}),(0,h.jsx)(Q.default,{style:t9,value:5,children:x.default.get({id:"spg.components.Second.DoNotSpecify",dm:"\u4E0D\u6307\u5B9A"})}),(0,h.jsx)(Q.default,{style:t9,value:2,children:(0,h.jsxs)(h.Fragment,{children:[x.default.get({id:"spg.components.Second.From",dm:"\u4ECE"}),T,"\xa0-\xa0",D,x.default.get({id:"spg.components.Second.SecondsExecutedOncePerSecond",dm:"\u79D2\uFF0C\u6BCF\u79D2\u6267\u884C\u4E00\u6B21"})]})}),(0,h.jsx)(Q.default,{style:t9,value:3,children:(0,h.jsxs)(h.Fragment,{children:[x.default.get({id:"spg.components.Second.From",dm:"\u4ECE"}),N,x.default.get({id:"spg.components.Second.SecondsToStartEvery",dm:"\u79D2\u5F00\u59CB\uFF0C \u6BCF"}),I,x.default.get({id:"spg.components.Second.ExecuteOncePerSecond",dm:"\u79D2\u6267\u884C\u4E00\u6B21"})]})}),(0,h.jsxs)(Q.default,{style:t9,value:4,children:[x.default.get({id:"spg.components.Second.Specify",dm:"\u6307\u5B9A"}),(0,h.jsx)("br",{}),(0,h.jsx)(t4,{value:f,onChange:E,children:(0,h.jsxs)(t$.default,{children:[" ",j]})})]})]});}let t5=()=>[{label:x.default.get({id:"spg.components.Week.Sunday",dm:"\u661F\u671F\u65E5"}),value:"SUN"},{label:x.default.get({id:"spg.components.Week.Monday",dm:"\u661F\u671F\u4E00"}),value:"MON"},{label:x.default.get({id:"spg.components.Week.Tuesday",dm:"\u661F\u671F\u4E8C"}),value:"TUE"},{label:x.default.get({id:"spg.components.Week.Wednesday",dm:"\u661F\u671F\u4E09"}),value:"WED"},{label:x.default.get({id:"spg.components.Week.Thursday",dm:"\u661F\u671F\u56DB"}),value:"THU"},{label:x.default.get({id:"spg.components.Week.Friday",dm:"\u661F\u671F\u4E94"}),value:"FRI"},{label:x.default.get({id:"spg.components.Week.Saturday",dm:"\u661F\u671F\u516D"}),value:"SAT"}],t7=w.default.memo(e=>(0,h.jsx)(ei.default,{...e,options:t5(),size:"small",style:{width:100}})),t6=w.default.memo(e=>(0,h.jsx)(tT.default.Group,{...e,options:t5(),onChange:t=>{var a;return null==e?void 0:null===(a=e.onChange)||void 0===a?void 0:a.call(e,t);}})),ae={display:"block",paddingBottom:"6px"},at=w.default.memo(e=>{let[t,a]=(0,I.useControllableValue)(e),[l,n]=(0,w.useState)(2),[i,d]=(0,w.useState)("SUN"),[o,r]=(0,w.useState)("MON"),[s,u]=(0,w.useState)(1),[c,m]=(0,w.useState)("MON"),[f,g]=(0,w.useState)("MON"),[p,C]=(0,w.useState)(["MON"]);(0,w.useEffect)(()=>{if("*"===t)n(1);else if("?"===t)n(2);else if(t.indexOf("-")>-1){n(3);let[e,a]=t.split("-");d(e),r(a);}else if(t.indexOf("#")>-1){n(4);let[e,a]=t.split("#");u(parseInt(a,10)),m(e);}else if(t.indexOf("L")>-1){n(5);let[e]=t.split("L");g(e);}else n(6),C(t?t.split(","):["MON"]);},[t]),(0,I.useUpdateEffect)(()=>{a({1:"*",2:"?",3:`${i}-${o}`,4:`${c}#${s}`,5:`${f}L`,6:p.join(",")}[l]);},[l,i,o,s,c,f,p]);let v=(0,w.useCallback)(e=>{n(e.target.value);},[]),y=(0,w.useCallback)(e=>{d(e||"MON");},[]),S=(0,w.useCallback)(e=>{r(e||"MON");},[]),b=(0,w.useCallback)(e=>{u(e||1);},[]),E=(0,w.useCallback)(e=>{m(e||"MON");},[]),j=(0,w.useCallback)(e=>{g(e||"MON");},[]),T=(0,w.useCallback)(e=>{C(0!==e.length?e:["MON"]);},[]);return(0,h.jsx)(Q.default.Group,{value:l,onChange:v,children:(0,h.jsxs)(G.default,{direction:"vertical",children:[(0,h.jsx)(Q.default,{value:1,children:x.default.get({id:"spg.components.Week.EveryWeek",dm:"\u6BCF\u4E00\u5468"})}),(0,h.jsx)(Q.default,{value:2,children:x.default.get({id:"spg.components.Week.DoNotSpecify",dm:"\u4E0D\u6307\u5B9A"})}),(0,h.jsx)(Q.default,{value:3,children:(0,h.jsxs)(G.default,{onClick:e=>{e.preventDefault();},children:[(0,h.jsx)("span",{children:x.default.get({id:"spg.components.Week.From",dm:"\u4ECE"})}),(0,h.jsx)(t7,{disabled:3!==l,value:i,onChange:y}),(0,h.jsx)("span",{children:"-"}),(0,h.jsx)(t7,{disabled:3!==l,value:o,onChange:S}),(0,h.jsx)("span",{children:x.default.get({id:"spg.components.Week.ExecuteOnceAWeek",dm:"\u6BCF\u661F\u671F\u6267\u884C\u4E00\u6B21"})})]})}),(0,h.jsx)(Q.default,{value:4,children:(0,h.jsxs)(G.default,{size:4,onClick:e=>{e.preventDefault();},children:[(0,h.jsx)("span",{children:x.default.get({id:"spg.components.Week.ThisMonthS",dm:"\u672C\u6708\u7B2C"})}),(0,h.jsx)(te.default,{disabled:4!==l,min:1,max:4,value:s,size:"small",onChange:b,style:{width:100}}),(0,h.jsx)("span",{children:x.default.get({id:"spg.components.Week.OfTheWeek",dm:"\u5468\u7684"})}),(0,h.jsx)(t7,{disabled:4!==l,value:c,onChange:E}),(0,h.jsx)("span",{children:x.default.get({id:"spg.components.Week.ExecuteOnce",dm:"\u6267\u884C\u4E00\u6B21"})})]})}),(0,h.jsx)(Q.default,{style:ae,value:5,children:(0,h.jsxs)(G.default,{size:4,onClick:e=>{e.preventDefault();},children:[(0,h.jsx)("span",{children:x.default.get({id:"spg.components.Week.TheLastOfTheMonth",dm:"\u672C\u6708\u7684\u6700\u540E\u4E00\u4E2A"})}),(0,h.jsx)(t7,{disabled:5!==l,value:f,onChange:j}),(0,h.jsx)("span",{children:x.default.get({id:"spg.components.Week.ExecuteOnce",dm:"\u6267\u884C\u4E00\u6B21"})})]})}),(0,h.jsxs)(Q.default,{style:ae,value:6,children:[(0,h.jsx)("span",{children:x.default.get({id:"spg.components.Week.Specify",dm:"\u6307\u5B9A"})}),(0,h.jsx)("div",{style:{paddingLeft:24},children:(0,h.jsx)(t6,{value:p,onChange:T,disabled:6!==l})})]})]})});});(d=c||(c={})).SECOND="second",d.MINUTE="minute",d.HOUR="hour",d.DAY="day",d.MONTH="month",d.WEEK="week";let aa={second:/^\*$|^\?$|(^([0-9]|[1-5][0-9])-([0-9]|[1-5][0-9])$)|(^([0-9]|[1-5][0-9])\/\d+$)|(^(([0-9]|[1-5][0-9]),)*([0-9]|[1-5][0-9])$)/,minute:/^\*$|^\?$|(^([0-9]|[1-5][0-9])-([0-9]|[1-5][0-9])$)|(^([0-9]|[1-5][0-9])\/\d+$)|(^(([0-9]|[1-5][0-9]),)*([0-9]|[1-5][0-9])$)/,hour:/(^\*$)|^\?$|(^([0-9]|(1[0-9])|(2[0-3]))-([0-9]|(1[0-9])|(2[0-3]))$)|(^([0-9]|(1[0-9])|(2[0-3]))\/\d+$)|(^(([0-9]|(1[0-9])|(2[0-3])),)*([0-9]|(1[0-9])|(2[0-3]))$)/,day:/^\*$|^\?$|(^([1-9]|[1-2][0-9]|3[0-1])-([1-9]|[1-2][0-9]|3[0-1])$)|(^([1-9]|[1-2][0-9]|3[0-1])\/\d+$)|(^(([1-9]|[1-2][0-9]|3[0-1]),)*([1-9]|[1-2][0-9]|3[0-1])$)/,month:/^\*$|(^([1-9]|1[0-2])-([1-9]|1[0-2])$)|(^([1-9]|1[0-2])\/\d+$)|(^(([1-9]|1[0-2]),)*([1-9]|1[0-2])$)/,week:/^\*$|^\?$|(^(SUN|MON|TUE|WED|THU|FRI|SAT)-(SUN|MON|TUE|WED|THU|FRI|SAT)$)|(^(SUN|MON|TUE|WED|THU|FRI|SAT)#\d+$)|(^(SUN|MON|TUE|WED|THU|FRI|SAT)L$)|(^((SUN|MON|TUE|WED|THU|FRI|SAT),)*(SUN|MON|TUE|WED|THU|FRI|SAT)$)/},al={second:"0",minute:"0",hour:"0",day:"*",month:"*",week:"?"},an={defaultTab:"day",minYear:2e3,maxYear:2100,panelTitle:x.default.get({id:"spg.Cron.BaseCron.constants.PleaseSelect",dm:"\u8BF7\u9009\u62E9"}),panesShow:{second:!0,minute:!0,hour:!0,day:!0,month:!0,week:!0},showFooter:!0};var ai={"react-cron-select":"react-cron-select-JLZ6IzkL",footerContainer:"footerContainer-1VxY5U_H"};let ad=(0,w.forwardRef)((e,t)=>{let{className:a,style:l,value:n,footer:i,options:d,onOk:o}=e,{defaultTab:r,panelTitle:s,panesShow:u,showFooter:m}=(0,w.useMemo)(()=>(0,J.defaultsDeep)(d,an),[d]),[f,g]=(0,w.useState)(r),[p,C]=(0,I.useSetState)(al),{second:v="",minute:y="",hour:S="",day:b="",month:E="",week:j=""}=p,T=(0,w.useMemo)(()=>[v,y,S,b,E,j].join(" "),[p]),D=async()=>{if(!n||n.length<7)return{};let e=n.split(" "),t=Object.keys(al),a=Object.values(al),l=(0,J.map)(e,(e,l)=>!function(e,t){let a=aa[t];if(!a)throw Error(x.default.get({id:"spg.Cron.BaseCron.utils.UnknownFieldTypeField",dm:"\u672A\u77E5\u7684\u5B57\u6BB5\u7C7B\u578B: {field}"},{field:t}));return a.test(e);}(e,t[l])?a[l]:e);"*"!==l[3]&&"*"===l[5]&&(l[5]="?");let i=(0,J.zipObject)(t,l);return C(i),{propsValue:n,...i};};(0,w.useImperativeHandle)(t,()=>({onParse:D,getValue:()=>T})),(0,w.useEffect)(()=>{D();},[n]);let N=(e,t)=>{if(t===c.DAY){let t="?"!==e?{week:"?"}:{week:j};C({day:e,week:t.week});return;}if(t===c.WEEK){let t="?"!==e?{day:"?"}:{day:b};C({week:e,day:t.day});return;}C({[t]:e});},M=(0,I.useMemoizedFn)(()=>(0,J.compact)([(null==u?void 0:u.second)&&{label:x.default.get({id:"spg.Cron.BaseCron.Seconds",dm:"\u79D2"}),key:c.SECOND,value:c.SECOND,children:(0,h.jsx)(t8,{value:v,onChange:e=>N(e,c.SECOND)},"Second")},(null==u?void 0:u.minute)&&{label:x.default.get({id:"spg.Cron.BaseCron.Points",dm:"\u5206"}),key:c.MINUTE,value:c.MINUTE,children:(0,h.jsx)(tZ,{value:y,onChange:e=>N(e,c.MINUTE)},"Minute")},(null==u?void 0:u.hour)&&{label:x.default.get({id:"spg.Cron.BaseCron.When",dm:"\u65F6"}),key:c.HOUR,value:c.HOUR,children:(0,h.jsx)(tz,{value:S,onChange:e=>N(e,c.HOUR)},"Hour")},(null==u?void 0:u.day)&&{label:x.default.get({id:"spg.Cron.BaseCron.Day",dm:"\u65E5"}),key:c.DAY,value:c.DAY,children:(0,h.jsx)(tB,{value:b,onChange:e=>N(e,c.DAY)},"Day")},(null==u?void 0:u.week)&&{label:x.default.get({id:"spg.Cron.BaseCron.Week",dm:"\u5468"}),key:c.WEEK,value:c.WEEK,children:(0,h.jsx)(at,{value:j,onChange:e=>N(e,c.WEEK)},"Week")},(null==u?void 0:u.month)&&{label:x.default.get({id:"spg.Cron.BaseCron.Month",dm:"\u6708"}),key:c.MONTH,value:c.MONTH,children:(0,h.jsx)(t2,{value:E,onChange:e=>N(e,c.MONTH)},"Month")}]));return(0,h.jsxs)(tA.default,{className:(0,tR.default)(ai["react-cron-select"],a),style:{width:630,...l},bodyStyle:{padding:"4px 24px 0"},title:s,children:[(0,h.jsx)(tk.default,{activeKey:f,items:M(),onChange:e=>{g(e);}}),m&&(0,h.jsx)("footer",{className:ai.footerContainer,children:i??(0,h.jsxs)(G.default,{children:[(0,h.jsx)(et.default,{type:"default",onClick:D,children:x.default.get({id:"spg.Cron.BaseCron.ReverseParsingToUi",dm:"\u53CD\u89E3\u6790\u5230UI"})}),(0,h.jsx)(et.default,{type:"primary",onClick:()=>{null==o||o(T);},children:x.default.get({id:"spg.Cron.BaseCron.Generate",dm:"\u751F\u6210"})})]})})]});}),ao={defaultTab:"day",panesShow:{day:!0,month:!0,week:!0,second:!1,minute:!1,hour:!1}};(m||(m={})).Daily="0 0 0 * * ?";let ar=e=>{let t=(0,w.useRef)(null),[a,l]=(0,I.useControllableValue)(e,{defaultValue:m.Daily,defaultValuePropName:"defaultValue",valuePropName:"defaultValue",trigger:"onChange"}),[n,i]=(0,I.useControllableValue)(e,{defaultValue:!1,defaultValuePropName:"defaultVisible",valuePropName:"visible",trigger:"onVisibleChange"}),d=(0,h.jsxs)(G.default,{children:[(0,h.jsx)(et.default,{type:"default",onClick:()=>i(!1),children:x.default.get({id:"spg.components.Cron.Close",dm:"\u5173\u95ED"})}),(0,h.jsx)(et.default,{type:"primary",onClick:()=>{t.current&&(l(t.current.getValue()),i(!1));},children:x.default.get({id:"spg.components.Cron.Confirm",dm:"\u786E\u8BA4"})})]}),o=(0,h.jsx)(ad,{ref:t,value:a,footer:d,options:ao});return(0,h.jsx)(tf.default,{content:o,trigger:"click",open:n,onOpenChange:()=>i(!1),children:(0,h.jsx)(z.default,{value:a,onChange:e=>{l(e.target.value);},placeholder:x.default.get({id:"spg.components.Cron.PleaseEnter",dm:"\u8BF7\u8F93\u5165"}),addonAfter:(0,h.jsx)(t_.default,{onClick:()=>{i(!n);}})})});};var as=a("40376759"),au=g._(as),ac=a("e388b5c1"),am=g._(ac);let af=am.default.Panel,ag=(0,w.forwardRef)((e,t)=>{let[a]=P.default.useForm(),[l,n]=(0,I.useControllableValue)(e,{defaultValuePropName:"defaultImportConfig",valuePropName:"importConfig",trigger:"onImportConfigChange"}),{isImportConfig:i}=e;return(0,w.useEffect)(()=>{a.setFieldsValue({...l});},[a,l]),(0,w.useImperativeHandle)(t,()=>({validateFields:async()=>{await a.validateFields();}})),(0,h.jsxs)(P.default,{className:"importConfigFormContainer-3NV3g7RX",name:"ImportConfigForm",labelCol:{span:24},wrapperCol:{span:24},form:a,onValuesChange:(e,t)=>{n({...t});},children:[(0,h.jsx)(P.default.Item,{name:"jobLifeCycle",label:(0,h.jsxs)(G.default,{children:[(0,h.jsx)("span",{children:x.default.get({id:"spg.ExtractionImportConfig.ImportConfigForm.CycleFrequency",dm:"\u5468\u671F\u9891\u6B21"})}),(0,h.jsx)(eo.default,{title:x.default.get({id:"spg.ExtractionImportConfig.ImportConfigForm.ATaskInstanceWhosePartition",dm:"\u6BCF\u5929\u5B9A\u65F6\u751F\u6210\u5206\u533A\u4E3A\u6628\u5929\uFF08T-1\uFF09\u7684\u4EFB\u52A1\u5B9E\u4F8B\uFF0C\u5F53\u68C0\u6D4B\u5230\u5206\u533A\u6570\u636E\u4EA7\u751F\u540E\u81EA\u52A8\u6267\u884C"}),children:(0,h.jsx)(eL.default,{style:{cursor:"pointer"}})})]}),rules:[{required:!0,message:x.default.get({id:"spg.ExtractionImportConfig.ImportConfigForm.PleaseSelectCycleFrequency",dm:"\u8BF7\u9009\u62E9\u5468\u671F\u9891\u6B21"})}],hidden:i.lifeCycle.hidden,children:(0,h.jsx)(Q.default.Group,{options:[{label:x.default.get({id:"spg.ExtractionImportConfig.ImportConfigForm.SingleTask",dm:"\u5355\u6B21\u4EFB\u52A1"}),value:$.JOB_LIFT_CYCLE_ENUM.ONCE},{label:x.default.get({id:"spg.ExtractionImportConfig.ImportConfigForm.PeriodicTasks",dm:"\u5468\u671F\u4EFB\u52A1"}),value:$.JOB_LIFT_CYCLE_ENUM.PERIOD},{label:x.default.get({id:"spg.ExtractionImportConfig.ImportConfigForm.RealTimeTasks",dm:"\u5B9E\u65F6\u4EFB\u52A1"}),value:$.JOB_LIFT_CYCLE_ENUM.REAL_TIME}].filter(e=>i.lifeCycle.opts.includes(e.value))})}),(null==l?void 0:l.jobLifeCycle)===$.JOB_LIFT_CYCLE_ENUM.PERIOD&&(0,h.jsxs)(h.Fragment,{children:[(0,h.jsx)(P.default.Item,{name:"scheduleStartDate",label:x.default.get({id:"spg.ExtractionImportConfig.ImportConfigForm.PeriodicSchedulingCronExpression",dm:"\u5468\u671F\u8C03\u5EA6 (cron\u8868\u8FBE\u5F0F)"}),rules:[{required:!0,message:x.default.get({id:"spg.ExtractionImportConfig.ImportConfigForm.PleaseEnterACronExpression",dm:"\u8BF7\u8F93\u5165cron\u8868\u8FBE\u5F0F"})}],children:(0,h.jsx)(ar,{})}),(0,h.jsx)(P.default.Item,{name:"mergeMode",label:(0,h.jsxs)(G.default,{children:[(0,h.jsx)("span",{children:x.default.get({id:"spg.ExtractionImportConfig.ImportConfigForm.SchedulingLogic",dm:"\u8C03\u5EA6\u903B\u8F91"})}),(0,h.jsx)(eo.default,{overlayStyle:{maxWidth:450},title:(0,h.jsxs)("ol",{children:[(0,h.jsx)("li",{children:x.default.get({id:"spg.ExtractionImportConfig.ImportConfigForm.DependentOnUpstreamPartitionsTask",dm:"\u4F9D\u8D56\u4E0A\u6E38\u5206\u533A\uFF1A\u6BCF\u5929\u5B9A\u65F6\u751F\u6210\u5206\u533A\u4E3A\u6628\u5929\uFF08T-1\uFF09\u7684\u4EFB\u52A1\u5B9E\u4F8B\uFF0C\u8BF7\u786E\u4FDD\u6BCF\u5929\u90FD\u6709\u5206\u533A\u4EA7\u751F\uFF0C\u5982\u679C\u4E00\u76F4\u672A\u68C0\u6D4B\u5230\u4E0A\u4E00\u4E2A\u5206\u533A\u6570\u636E\u4EA7\u751F\uFF0C\u5219\u540E\u7EED\u6240\u6709\u5206\u533A\u90FD\u5C06\u8FDB\u5165\u7B49\u5F85\u8C03\u5EA6\u7684\u72B6\u6001\uFF0C\u76F4\u5230\u4E0A\u4E00\u4E2A\u5206\u533A\u6267\u884C\u5B8C\u6210\u540E\uFF0C\u624D\u4F1A\u5F00\u59CB\u4E0B\u4E00\u4E2A\u5206\u533A\u7684\u8C03\u5EA6\uFF0C\u5982\u679C\u60A8\u9700\u8981\u8DF3\u8FC7\u67D0\u4E2A\u5206\u533A\uFF0C\u53EF\u4EE5\uFF1A1\uFF09\u751F\u6210\u4E00\u4E2A\u6570\u636E\u91CF\u4E3A0\u7684\u7A7A\u5206\u533A\uFF0C2\uFF09\u5728\u8BE5\u4EFB\u52A1\u5B9E\u4F8B\u8BE6\u60C5\u9875\u9762\u4E2D\u624B\u52A8\u70B9\u51FB\u3010\u7F6E\u6210\u529F\u3011"})}),(0,h.jsx)("li",{children:x.default.get({id:"spg.ExtractionImportConfig.ImportConfigForm.DoNotRelyOnUpstream",dm:"\u4E0D\u4F9D\u8D56\u4E0A\u6E38\u5206\u533A\uFF1A\u6BCF\u5929\u5B9A\u65F6\u751F\u6210\u5206\u533A\u4E3A\u6628\u5929\uFF08T-1\uFF09\u7684\u4EFB\u52A1\u5B9E\u4F8B\uFF0C\u8BF7\u786E\u4FDD\u6BCF\u5929\u5206\u533A\u6570\u636E\u4EA7\u751F\u65F6\u6548\uFF0C\u5982\u679C\u5F53\u592924\u70B9\u524D\u4E00\u76F4\u672A\u68C0\u6D4B\u5230\u4E0A\u4E00\u4E2A\u5206\u533A\u6570\u636E\u4EA7\u751F\uFF0C\u7B2C\u4E8C\u5929\u4F1A\u8DF3\u8FC7\u4E0D\u6267\u884C\u4E0A\u4E00\u4E2A\u5206\u533A\uFF0C\u76F4\u63A5\u6267\u884C\u4E0B\u4E00\u4E2A\u5206\u533A\uFF0C\u5982\u679C\u60A8\u9700\u8981\u8865\u56DE\u67D0\u4E2A\u5206\u533A\uFF0C\u53EF\u4EE5\uFF1A\u6682\u505C\u5F53\u524D\u5468\u671F\u4EFB\u52A1\uFF0C\u5728\u8BE5\u4EFB\u52A1\u5B9E\u4F8B\u8BE6\u60C5\u9875\u9762\u4E2D\u624B\u52A8\u70B9\u51FB\u3010\u91CD\u8DD1\u3011"})})]}),children:(0,h.jsx)(eL.default,{style:{cursor:"pointer"}})})]}),rules:[{required:!0,message:x.default.get({id:"spg.ExtractionImportConfig.ImportConfigForm.PleaseSelectSchedulingLogic",dm:"\u8BF7\u9009\u62E9\u8C03\u5EA6\u903B\u8F91"})}],children:(0,h.jsx)(Q.default.Group,{options:[{label:x.default.get({id:"spg.ExtractionImportConfig.ImportConfigForm.DependentUpstreamPartitionTheDownstream",dm:"\u4F9D\u8D56\u4E0A\u6E38\u5206\u533A (\u4E0A\u6E38\u6210\u529F\u4E0B\u6E38\u624D\u6267\u884C)"}),value:$.JOB_MERGE_MODE_ENUM.DEPENDENT},{label:x.default.get({id:"spg.ExtractionImportConfig.ImportConfigForm.DoNotRelyOnThe",dm:"\u4E0D\u4F9D\u8D56\u4E0A\u6E38\u5206\u533A (\u53EF\u8DF3\u8FC7\u4E0A\u6E38\u76F4\u63A5\u6267\u884C, \u8DF3\u8FC7\u7684\u5206\u533A\u8BB2\u4E0D\u4F1A\u518D\u5BFC\u5165\u6570\u636E, \u8BF7\u8C28\u614E\u64CD\u4F5C)"}),value:$.JOB_MERGE_MODE_ENUM.INDEPENDENT}]})})]}),(0,h.jsx)(P.default.Item,{name:"jobAction",label:x.default.get({id:"spg.ExtractionImportConfig.ImportConfigForm.UpdateMethod",dm:"\u66F4\u65B0\u65B9\u5F0F"}),rules:[{required:!0,message:x.default.get({id:"spg.ExtractionImportConfig.ImportConfigForm.PleaseSelectAnUpdateMethod",dm:"\u8BF7\u9009\u62E9\u66F4\u65B0\u65B9\u5F0F"})}],hidden:i.updateType.hidden,children:(0,h.jsx)(Q.default.Group,{options:[{label:x.default.get({id:"spg.ExtractionImportConfig.ImportConfigForm.Insert",dm:"\u63D2\u5165"}),value:$.JOB_ACTION_ENUM.UPSERT},{label:x.default.get({id:"spg.ExtractionImportConfig.ImportConfigForm.Delete",dm:"\u5220\u9664"}),value:$.JOB_ACTION_ENUM.DELETE}].filter(e=>i.updateType.opts.includes(e.value))})}),(0,h.jsx)(am.default,{className:"advancedConfig-A2IHwYGT",ghost:!0,children:(0,h.jsx)(af,{header:(0,h.jsxs)(G.default,{children:[(0,h.jsx)("b",{children:x.default.get({id:"spg.ExtractionImportConfig.ImportConfigForm.AdvancedConfiguration",dm:"\u9AD8\u7EA7\u914D\u7F6E"})}),(0,h.jsx)(au.default,{})]}),showArrow:!1,children:(0,h.jsx)(P.default.Item,{name:"advancedConfig",label:x.default.get({id:"spg.ExtractionImportConfig.ImportConfigForm.ScriptConfiguration",dm:"\u811A\u672C\u914D\u7F6E"}),rules:[{required:!1,message:x.default.get({id:"spg.ExtractionImportConfig.ImportConfigForm.PleaseEnterScriptConfiguration",dm:"\u8BF7\u8F93\u5165\u811A\u672C\u914D\u7F6E"})}],children:(0,h.jsx)(z.default.TextArea,{allowClear:!0,autoSize:{minRows:3,maxRows:5},placeholder:x.default.get({id:"spg.ExtractionImportConfig.ImportConfigForm.PleaseEnterScriptConfiguration",dm:"\u8BF7\u8F93\u5165\u811A\u672C\u914D\u7F6E"})})})},"advancedConfig")})]},"ImportConfigForm");}),ap=e=>{let{isMappingConfig:t,isImportConfig:a}=e,l=(0,w.useRef)(null);return(0,h.jsxs)("div",{style:{height:"100%",width:"60%"},children:[!t&&(0,h.jsx)(tN,{formItems:tM}),(0,h.jsx)(P.default.Item,{style:{margin:"0px",padding:"0px"},name:"importConfig",valuePropName:"importConfig",trigger:"onImportConfigChange",rules:[{required:!0,message:x.default.get({id:"spg.StepsConfigForm.ExtractionImportConfig.PleaseCheckTheImportConfiguration",dm:"\u8BF7\u68C0\u67E5\u5BFC\u5165\u914D\u7F6E"})},{validator:async()=>{try{var e,t;(0,J.isFunction)(null===(e=l.current)||void 0===e?void 0:e.validateFields)&&await (null===(t=l.current)||void 0===t?void 0:t.validateFields());}catch(e){return Promise.reject(x.default.get({id:"spg.StepsConfigForm.ExtractionImportConfig.PleaseCheckTheImportConfiguration",dm:"\u8BF7\u68C0\u67E5\u5BFC\u5165\u914D\u7F6E"}));}return Promise.resolve();}}],children:(0,h.jsx)(ag,{ref:l,isImportConfig:a})})]});};var ah=a("dad61df1"),aC=g._(ah);a("41933a94");var av={segmentedConfigFormContainer:"segmentedConfigFormContainer-Xa5IdkJ5",previewExtractionResult:"previewExtractionResult-PSIGWxQG",previewExtractionResultContent:"previewExtractionResultContent-AfzwI0Ku",knowledgeMappingContainer:"knowledgeMappingContainer-O94xoL9G",textContent:"textContent-5Z_T8OPv",previewExtractionResultTitle:"previewExtractionResultTitle-yiANRe2w"},ax=a("7acbc698"),ay=a("bcda4f95"),aS=a("4c70c3ed"),ab=a("1a998156");(f||(f={})).DYNAMIC="DYNAMIC";let aE=e=>(null==e?void 0:e.toUpperCase())===ab.RELATION_DIRECTION.BOTH?"\u2194":"\u2192",aj=e=>null==e?void 0:e.filter(e=>!(null==e?void 0:e.logicRelation)&&!(null==e?void 0:e.semanticRelation)&&String((null==e?void 0:e.relationBuildType)??"").toUpperCase()!==f.DYNAMIC),{Text:aT}=eT.default,aD=e=>{let{schemaEdge:t}=e,a=(0,aS.getMixedLocaleFieldValue)(t,{fileName:"name",fileNameZh:"nameZh"}),l=(0,aS.getMixedLocaleFieldValue)(t,{fileName:"sourceName",fileNameZh:"sourceNameZh"}),n=(0,aS.getMixedLocaleFieldValue)(t,{fileName:"targetName",fileNameZh:"targetNameZh"}),i=aE(null==t?void 0:t.direction);return(0,h.jsxs)("div",{className:"displayOptionContainer-O33qA098",children:[(0,h.jsx)(aT,{children:a}),(0,h.jsx)(aT,{className:"spoDetailsContainer-B0sFxyQe",ellipsis:{tooltip:!0},children:`${l}${i}${n}`})]});},aN=e=>{let{className:t,style:a,...l}=e,{data:n=ax.DEFAULT_GRAPH_DATA,isLoading:i}=(0,ay.useSchemaData)(),[d,o]=(0,I.useControllableValue)(e,{defaultValuePropName:"defaultValue",valuePropName:"value",trigger:"onChange"}),r=(0,w.useMemo)(()=>aj(null==n?void 0:n.edges),[n]),s=(0,w.useMemo)(()=>null==r?void 0:r.map(e=>({label:(0,h.jsx)(aD,{schemaEdge:e}),value:String(e.name),item:e})),[r]);return(0,h.jsx)(ei.default,{className:t,style:{...a},loading:i,allowClear:!0,value:d,onChange:e=>{if((0,J.isEmpty)(e)){null==o||o(void 0);return;}o(e);},showSearch:!0,placeholder:x.default.get({id:"spg.EntitySelect.SchemaRelationSelect.PleaseSelectARelationship",dm:"\u8BF7\u9009\u62E9\u5173\u7CFB"}),filterOption:(e,t)=>{let a=null==t?void 0:t.item,l=e.toLowerCase();return["name","sourceName","targetName"].some(e=>{var t,n;return null==a?void 0:null===(n=a[e])||void 0===n?void 0:null===(t=n.toLowerCase())||void 0===t?void 0:t.includes(l);})||["nameZh","sourceNameZh","targetNameZh"].some(e=>{var t;return null==a?void 0:null===(t=a[e])||void 0===t?void 0:t.includes(l);});},options:s,dropdownRender:e=>(0,h.jsx)(eA.default,{spinning:i,children:e}),notFoundContent:(0,h.jsx)(el.default,{image:el.default.PRESENTED_IMAGE_SIMPLE}),...l});};var aI=a("e37edd9f"),aM=g._(aI),aP=a("ff92314f"),a_=g._(aP),aF=a("5b3ac6b1"),aA=g._(aF),aw=a("e7977e7c"),ak=g._(aw),aO=a("5f54387e"),aR=g._(aO),aU=a("593c6e64"),aL=a("4ef94126"),aB=a("e169cea0"),aV=g._(aB),aG=a("07772179"),aq=g._(aG),a$=((o={}).R_MEMBER="R_MEMBER",o.W_MEMBER="W_MEMBER",o.OWNER="OWNER",o),aY=[a$.R_MEMBER,a$.W_MEMBER,a$.OWNER],aH=function(e){var t=e||{},a=t.permissionField,l=void 0===a?"isAccessible":a,n=t.type,i=void 0===n?"noPermission":n,d=t.keyField,o=void 0===d?"id":d,r=t.roleField,s=void 0===r?"role":r,u=t.multiple,c=void 0!==u&&u,m=t.minimumRole,f=t.targetRole,g=void 0===f?aY:f,p=t.applyingData,C=t.applyingContent,v=t.getApplyingUrl,x=t.onApplying,y=t.renderApplyContent,S=t.renderApplyAction,b=t.getApplyUrl,E=t.onApply,j=t.applyLoading,T=(0,aU.useIntl)().formatMessage,D=(0,w.useMemo)(function(){if(m){var e=aY.indexOf(m);return e=e<0?0:e,aY.slice(e);}return g;},[g,m]),N=(0,aV.default)((0,aV.default)((0,aV.default)({},a$.R_MEMBER,T({id:"role.schema-type.R_MEMBER"})),a$.W_MEMBER,T({id:"role.schema-type.W_MEMBER"})),a$.OWNER,T({id:"role.schema-type.OWNER"}));return function(e){if(!e[l]&&void 0!==e[l]){var t,a,n=null==p?void 0:p.find(function(t){return String(t[o])===String(e[o]);}),d={target:"_blank",style:{marginLeft:"4px"},rel:"noopener noreferrer"};if(n){var r={item:e,applyingRecord:n};return{disabled:!0,content:(null==C?void 0:C(r))||T({id:"role.schema-type.applying"},{role:N[n[s]||""],link:function(e){var t=v?null==v?void 0:v(r):n.ticketUrl;return(0,h.jsx)("a",(0,em.default)((0,em.default)({href:t},d),{},{onClick:function(){null==x||x(r);},children:e}));}}),type:i};}var u={item:e},m=D[0]||"";return{disabled:!0,content:(0,h.jsx)(eA.default,{spinning:!!j,children:y?null==y?void 0:y(u,m):c?(0,h.jsxs)(h.Fragment,{children:[T({id:"role.schema-type.apply-tip"},{role:N[m]}),(0,h.jsx)("br",{}),(0,h.jsxs)("div",{style:{marginTop:"10px"},children:[(0,h.jsx)(et.default,{onClick:function(){null==E||E(u);},size:"small",style:{marginRight:"10px"},children:T({id:"role.schema-type.apply-single"})}),(0,h.jsx)(et.default,{size:"small",type:"primary",onClick:function(){null==E||E((0,em.default)((0,em.default)({},u),{},{multiple:c}));},children:T({id:"role.schema-type.apply-all"})})]})]}):(a=null==b?void 0:b(u),(0,h.jsxs)(h.Fragment,{children:[T({id:"role.schema-type.apply-tip"},{role:N[m]}),null!==(t=null==S?void 0:S(u,m))&&void 0!==t?t:(0,h.jsx)("a",(0,em.default)((0,em.default)({href:a},d),{},{onClick:function(){null==E||E(u);},children:T({id:"role.schema-type.to-apply-single"})}))]}))}),type:i};}};},aW=a("a3e36212"),az={EVENT:"EVENT",CONCEPT:"CONCEPT",STANDARD:"STANDARD"},aK=function(e){var t;return(null==e||null===(t=e.name)||void 0===t?void 0:t.startsWith("STD."))||(null==e?void 0:e.entityCategory)===az.STANDARD;},aQ=w.default.memo(function(e){var t=e.category,a=(0,aU.useIntl)().formatMessage,l=a({id:"global.entity-type"});switch(t){case az.EVENT:l=a({id:"global.event-type"});break;case az.CONCEPT:l=a({id:"global.meta-concept"});break;case az.STANDARD:l=a({id:"entity-select.knowledge-category-tag.standard-property"});}return(0,h.jsx)(aR.default,{children:l});}),aJ=["withOptionOfAll","schemaTypeList","loading","getDisabledOption","schemaPermission","getTypeDetail","standardOption","tagHidden","renderExtra","onChange","onSelect","onDeselect"],aZ="akg-components-schema-type-select",aX="name",a0=function(e){var t,a,l,n=e.withOptionOfAll,i=e.schemaTypeList,d=void 0===i?[]:i,o=e.loading,r=e.getDisabledOption,s=e.schemaPermission,u=e.getTypeDetail,c=e.standardOption,m=e.tagHidden,f=void 0!==m&&m,g=e.renderExtra,p=e.onChange,C=void 0===p?J.noop:p,v=e.onSelect,x=void 0===v?J.noop:v,y=e.onDeselect,S=void 0===y?J.noop:y,b=(0,ak.default)(e,aJ),E=(0,aU.useIntl)(),j=E.formatMessage,T=E.locale,D=(0,w.useMemo)(function(){var e={id:"-1",name:"All types",nameZh:j({id:"schema-type-select.all-type-option"})},t=(0,aA.default)(d);return n&&t.length&&(t=[].concat((0,aA.default)(t),[e])),c?((0,J.isObject)(c)?c:{}).onlySpreadable&&(t=d.filter(function(e){return!aK(e)||e.spreadable;})):t=d.filter(function(e){return!aK(e);}),t;},[c,j,d,n]),N=(0,I.useRequest)(u,{manual:!0,ready:!!u}),M=N.runAsync,P=N.loading,_=(t=[r,aH(s),function(e){return e.disabled?{disabled:!0}:void 0;}],function(e){var a,l=(0,aq.default)(t);try{for(l.s();!(a=l.n()).done;){var n=a.value;if(null!=n&&n(e))return n(e);}}catch(e){l.e(e);}finally{l.f();}}),F=(0,w.useMemo)(function(){return D.map(function(e){var t=e.privacyConfirm,a=e.entityCategory,l=(0,aL.getMixedLocaleFieldValue)(e,{locale:T}),n=null==_?void 0:_(e);return{text:l,disabled:null==n?void 0:n.disabled,key:e.id||e.name,value:e[aX],label:(0,h.jsx)(aW.Tooltip,{title:null==n?void 0:n.content,getPopupContainer:function(e){var t;return null===(t=e.parentNode)||void 0===t||null===(t=t.parentNode)||void 0===t?void 0:t.parentNode;},placement:"topLeft",size:"large",overlayStyle:{maxWidth:"500px"},children:(0,h.jsxs)("div",{className:"".concat(aZ,"-option-content"),children:[l,a&&!f&&(0,h.jsx)(aQ,{category:a}),t&&!f&&(0,h.jsx)(aR.default,{children:j({id:"entity-select.privacy-confirm"})})]})})};});},[j,_,T,D,f]),A=(a=(0,a_.default)((0,aM.default)().mark(function e(t){var a,l;return(0,aM.default)().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!(t&&u&&!Array.isArray(t))||!(a=D.find(function(e){return e[aX]===t.value;}))){e.next=7;break;}return e.next=5,M(a);case 5:l=e.sent,t.item=(0,em.default)((0,em.default)({},l),a);case 7:C(t);case 8:case"end":return e.stop();}},e);})),function(e){return a.apply(this,arguments);});b.className=(0,tR.default)(aZ,b.className);var k=function(e){return function(t){var a=function(e){var t=(Array.isArray(l)?l:[]).find(function(t){return t.value===e.value;}),a=D.find(function(t){return t[aX]===e.value;});e.item=null!=a?a:null==t?void 0:t.item;};Array.isArray(t)?t.forEach(a):t&&a(t);for(var n=arguments.length,i=Array(n>1?n-1:0),d=1;d<n;d++)i[d-1]=arguments[d];e.apply(void 0,[t].concat(i));};};return(0,h.jsxs)(eA.default,{spinning:!!(P||o),size:"small",children:[(0,h.jsx)(ei.default,(0,em.default)((0,em.default)({style:{width:"100%"},popupClassName:"".concat(aZ,"-dropdown"),showSearch:!0,optionLabelProp:"label",filterOption:function(e,t){return String(null==t?void 0:t.text).toLowerCase().indexOf(e.toLowerCase())>=0;},notFoundContent:o?(0,h.jsx)(eA.default,{size:"small"}):null,placeholder:j({id:"schema-type-select.placeholder"})},b),{},{loading:o||P,labelInValue:!0,options:F,onChange:k(A),onSelect:k(x),onDeselect:k(S)})),"function"==typeof g&&g()]});},a1=w.default.memo(a0);a0.displayName="SchemaTypeSelect";let a2=e=>{let{data:t=ax.DEFAULT_GRAPH_DATA,isLoading:a}=(0,ay.useSchemaData)(),l=t.nodes??[];return(0,h.jsx)(a1,{schemaTypeList:l,loading:a,...e});};var a3=a("4fc779c0"),a4=a("02685c8b"),a9=a("ffaa3da9");let a8=(0,w.forwardRef)((e,t)=>{var a,l;let n=(0,b.getLocale)(),{formConfigData:i}=(0,X.useFormContext)(),{data:d=ax.DEFAULT_GRAPH_DATA}=(0,ay.useSchemaData)(),[o]=P.default.useForm(),[r,s]=(0,I.useControllableValue)(e,{defaultValue:Y,defaultValuePropName:"defaultMappingConfig",valuePropName:"mappingConfig",trigger:"onMappingConfigChange"}),u=null==r?void 0:r.mappingType,{sourceName:c,sourceColumns:m}=(0,w.useMemo)(()=>(0,a4.getSourcePropertyConfig)(i),[i]),{sourceName:f}=(0,w.useMemo)(()=>(0,a4.getSchemaPropertyConfig)({mappingType:null==r?void 0:r.mappingType,schemaNode:null==r?void 0:r.schemaNode,schemaEdge:null==r?void 0:r.schemaEdge}),[r]),g=(0,a4.getRequiredProperty)(u);(0,w.useEffect)(()=>{o.setFieldsValue({...r});},[o,r]),(0,w.useImperativeHandle)(t,()=>({validateFields:async()=>{await o.validateFields();}}));let p=e=>{s(t=>({...t,mappingType:e,schemaNode:void 0,schemaEdge:void 0,mapping:void 0}));};return(0,h.jsxs)(P.default,{className:av.knowledgeMappingContainer,name:"KnowledgeMapping",labelCol:{span:24},wrapperCol:{span:24},form:o,onValuesChange:()=>{s(o.getFieldsValue(!0));},children:[(0,h.jsxs)("div",{style:{width:"60%"},children:[(0,h.jsx)(P.default.Item,{name:"mappingType",label:x.default.get({id:"spg.SegmentationMappingConfig.KnowledgeMapping.ImportType",dm:"\u5BFC\u5165\u7C7B\u578B"}),rules:[{required:!0,message:x.default.get({id:"spg.SegmentationMappingConfig.KnowledgeMapping.PleaseSelectAnImportType",dm:"\u8BF7\u9009\u62E9\u5BFC\u5165\u7C7B\u578B"})}],children:(0,h.jsx)(Q.default.Group,{options:[{label:x.default.get({id:"spg.SegmentationMappingConfig.KnowledgeMapping.EntityType",dm:"\u5B9E\u4F53\u7C7B\u578B"}),value:$.MAPPING_TYPE_ENUM.SCHEMA_MAPPING},{label:x.default.get({id:"spg.SegmentationMappingConfig.KnowledgeMapping.RelationshipType",dm:"\u5173\u7CFB\u7C7B\u578B"}),value:$.MAPPING_TYPE_ENUM.RELATION_MAPPING}],onChange:e=>p(e.target.value)})}),u===$.MAPPING_TYPE_ENUM.SCHEMA_MAPPING&&(0,h.jsx)(P.default.Item,{name:"schemaNode",label:x.default.get({id:"spg.SegmentationMappingConfig.KnowledgeMapping.ImportDestination",dm:"\u5BFC\u5165\u76EE\u6807"}),rules:[{required:!0,message:x.default.get({id:"spg.SegmentationMappingConfig.KnowledgeMapping.PleaseSelectAnImportDestination",dm:"\u8BF7\u9009\u62E9\u5BFC\u5165\u76EE\u6807"})}],getValueFromEvent:e=>null==e?void 0:e.item,getValueProps:e=>({value:null==e?void 0:e.name}),children:(0,h.jsx)(a2,{})}),u===$.MAPPING_TYPE_ENUM.RELATION_MAPPING&&(0,h.jsx)(P.default.Item,{name:"schemaEdge",label:x.default.get({id:"spg.SegmentationMappingConfig.KnowledgeMapping.ImportDestination",dm:"\u5BFC\u5165\u76EE\u6807"}),rules:[{required:!0,message:x.default.get({id:"spg.SegmentationMappingConfig.KnowledgeMapping.PleaseSelectAnImportDestination",dm:"\u8BF7\u9009\u62E9\u5BFC\u5165\u76EE\u6807"})}],getValueFromEvent:(e,t)=>null==t?void 0:t.item,getValueProps:e=>({value:null==e?void 0:e.name}),children:(0,h.jsx)(aN,{})})]}),(0,h.jsx)(P.default.Item,{style:{width:"100%"},name:"mapping",rules:[{required:!0,message:x.default.get({id:"spg.SegmentationMappingConfig.KnowledgeMapping.PleaseAddAnAttributeMapping",dm:"\u8BF7\u6DFB\u52A0\u5C5E\u6027\u6620\u5C04\u5173\u7CFB"})},{validator:(e,t)=>{let a=Object.values(t).flat();return g.filter(e=>!a.includes(e)).length>0?Promise.reject(x.default.get({id:"spg.SegmentationMappingConfig.KnowledgeMapping.PleaseAddMappingRelationshipsFor",dm:"\u8BF7\u6DFB\u52A0\u5FC5\u586B\u5C5E\u6027\u7684\u6620\u5C04\u5173\u7CFB"})):Promise.resolve();}}],children:(0,h.jsx)(a3.MappingGraph,{style:{height:"400px"},locale:n,sourceData:{id:"sourceNode",label:c,type:"sourceNode",x:120,y:70,data:{propertyDataSource:m}},targetData:{id:"targetNode",label:f,type:"targetNode",x:460,y:70,data:{requiredProperty:g,propertyDataSource:(0,a9.getMappingPropertyList)(u,d,u===$.MAPPING_TYPE_ENUM.SCHEMA_MAPPING?null==r?void 0:null===(a=r.schemaNode)||void 0===a?void 0:a.name:null==r?void 0:null===(l=r.schemaEdge)||void 0===l?void 0:l.name)}}})})]},"ImportConfigForm");}),a5=e=>{let{isMappingConfig:t,previewExtractionResult:a}=e,l=(0,w.useRef)(null),n=(0,h.jsx)(tN,{formItems:tI}),i=!(0,J.isEmpty)(a)||t;return(0,h.jsxs)("div",{style:{width:i?"100%":"60%",height:"100%"},children:[!t&&(0,h.jsx)(h.Fragment,{children:(0,J.isEmpty)(a)?n:(0,h.jsxs)(t$.default,{className:av.segmentedConfigFormContainer,children:[(0,h.jsx)(tG.default,{span:10,children:n}),!(0,J.isEmpty)(a)&&(0,h.jsxs)(tG.default,{span:14,style:{display:"flex"},children:[(0,h.jsx)(aC.default,{type:"vertical",style:{height:"100%",margin:"0 24px"}}),(0,h.jsxs)("div",{className:av.previewExtractionResult,children:[(0,h.jsx)("div",{className:av.previewExtractionResultTitle,children:x.default.get({id:"spg.StepsConfigForm.SegmentationMappingConfig.SegmentPreviewEffect",dm:"\u5206\u6BB5\u9884\u89C8\u6548\u679C"})}),(0,h.jsx)("div",{className:av.previewExtractionResultContent,children:null==a?void 0:a.map((e,t)=>(0,h.jsx)("span",{className:av.textContent,children:e},t))})]})]})]})}),t&&(0,h.jsx)(P.default.Item,{style:{margin:"0px",padding:"0px"},name:"mappingConfig",valuePropName:"mappingConfig",trigger:"onMappingConfigChange",validateTrigger:"onMappingConfigChange",rules:[{required:!0,message:x.default.get({id:"spg.StepsConfigForm.SegmentationMappingConfig.PleaseCheckTheMappingConfiguration",dm:"\u8BF7\u68C0\u67E5\u6620\u5C04\u914D\u7F6E"})},{validator:async()=>{try{var e,t;(0,J.isFunction)(null===(e=l.current)||void 0===e?void 0:e.validateFields)&&await (null===(t=l.current)||void 0===t?void 0:t.validateFields());}catch(e){return Promise.reject(x.default.get({id:"spg.StepsConfigForm.SegmentationMappingConfig.PleaseCheckTheMappingConfiguration",dm:"\u8BF7\u68C0\u67E5\u6620\u5C04\u914D\u7F6E"}));}return Promise.resolve();}}],children:(0,h.jsx)(a8,{ref:l})})]});};var a7=a("22598e86"),a6=g._(a7),le=["onClick"],lt=w.default.memo(function(e){var t,a=e.onClick,l=(0,ak.default)(e,le),n=(0,w.useState)(void 0),i=(0,a6.default)(n,2),d=i[0],o=i[1],r=(t=(0,a_.default)((0,aM.default)().mark(function e(t){var l;return(0,aM.default)().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(a){e.next=2;break;}return e.abrupt("return");case 2:return(l=null==a?void 0:a(t))instanceof Promise&&(o(!0),l.finally(function(){o(!1);})),e.abrupt("return",l);case 5:case"end":return e.stop();}},e);})),function(e){return t.apply(this,arguments);});return(0,h.jsx)(et.default,(0,em.default)({loading:d,onClick:r},l));});let la=e=>{let{hasPermission:t,permissionMessage:a,children:l}=e;return(0,h.jsx)(eo.default,{title:t?void 0:a??x.default.get({id:"spg.components.PermissionTooltip.OnlyProjectAdministratorsAndCreators",dm:"\u4EC5\u9879\u76EE\u7BA1\u7406\u5458\u548C\u521B\u5EFA\u4EBA\u53EF\u64CD\u4F5C"}),children:(0,h.jsx)(h.Fragment,{children:l})});},ll=e=>{let{className:t,style:a,isEditPermission:l,type:n,isMappingConfig:i,hasFormChanged:d,form:o,currentStep:s,onCancelClick:u,onPreClick:c,onNextClick:m,onPreview:f,onSubmitClick:g}=e,[p,C]=(0,w.useState)(!1),v=(n===$.DATA_SOURCE_TYPE_ENUM.FILE_EXTRACT||n===$.DATA_SOURCE_TYPE_ENUM.YUQUE_EXTRACT)&&!i,y=(0,J.debounce)(()=>null==c?void 0:c(),500,{leading:!0,trailing:!1}),S=(0,J.debounce)(async()=>{await (null==o?void 0:o.validateFields()),null==m||m();},500,{leading:!0,trailing:!1}),b=async(...e)=>{await (null==o?void 0:o.validateFields()),await (null==f?void 0:f(...e));},E=async(...e)=>{C(!0);try{await (null==o?void 0:o.validateFields()),await (null==g?void 0:g(...e));}catch(e){console.log("submit error: ",e);}finally{C(!1);}},j={[r.BASE_CONFIG]:[d?(0,h.jsx)(B.default,{title:x.default.get({id:"spg.StepsConfigForm.StepsActions.CancelingWillLoseTheConfiguration",dm:"\u53D6\u6D88\u5C06\u4E22\u5931\u6B63\u5728\u7F16\u8F91\u7684\u914D\u7F6E\u4FE1\u606F\uFF0C\u786E\u8BA4\u53D6\u6D88\u5417?"}),onConfirm:u,children:(0,h.jsx)(et.default,{type:"default",children:x.default.get({id:"spg.StepsConfigForm.StepsActions.Cancel",dm:"\u53D6\u6D88"})},"cancelButton")},"cancelButtonPopconfirm"):(0,h.jsx)(et.default,{type:"default",onClick:u,children:x.default.get({id:"spg.StepsConfigForm.StepsActions.Cancel",dm:"\u53D6\u6D88"})},"cancelButton"),(0,h.jsx)(et.default,{type:"primary",onClick:S,children:x.default.get({id:"spg.StepsConfigForm.StepsActions.NextStep",dm:"\u4E0B\u4E00\u6B65"})},"nextButton")],[r.SEGMENTATION_MAPPING_CONFIG]:(0,J.compact)([v&&(0,h.jsx)(la,{hasPermission:l,children:(0,h.jsx)(lt,{disabled:!l,type:"primary",onClick:b,children:x.default.get({id:"spg.StepsConfigForm.StepsActions.PreviewExtractionResults",dm:"\u9884\u89C8\u62BD\u53D6\u7ED3\u679C"})},"previewButton")},"previewButtonPermissionTooltip"),(0,h.jsx)(et.default,{type:"default",onClick:y,children:x.default.get({id:"spg.StepsConfigForm.StepsActions.PreviousStep",dm:"\u4E0A\u4E00\u6B65"})},"prevButton"),(0,h.jsx)(et.default,{type:"primary",onClick:S,children:x.default.get({id:"spg.StepsConfigForm.StepsActions.NextStep",dm:"\u4E0B\u4E00\u6B65"})},"nextButton")]),[r.EXTRACTION_IMPORT_CONFIG]:[(0,h.jsx)(et.default,{type:"default",disabled:p,onClick:y,children:x.default.get({id:"spg.StepsConfigForm.StepsActions.PreviousStep",dm:"\u4E0A\u4E00\u6B65"})},"prevButton"),(0,h.jsx)(la,{hasPermission:l,children:(0,h.jsx)(lt,{disabled:!l,type:"primary",onClick:E,children:x.default.get({id:"spg.StepsConfigForm.StepsActions.Complete",dm:"\u5B8C\u6210"})},"submitButton")},"submitButtonPermissionTooltip")]};return(0,h.jsx)("div",{className:(0,ev.default)("stepsActionsContainer-hA_6xBpa",t),style:{...a},children:j[s??""]});};var ln=a("7648835d"),li=g._(ln);a("bef9aebb");let ld=e=>{let{disabled:t,...a}=e;return(0,h.jsx)(li.default,{type:"navigation",size:"small",items:[{title:x.default.get({id:"spg.StepsConfigForm.StepsNav.BasicConfiguration",dm:"\u57FA\u7840\u914D\u7F6E"}),disabled:t},{title:x.default.get({id:"spg.StepsConfigForm.StepsNav.SegmentConfigurationMappingConfiguration",dm:"\u5206\u6BB5\u914D\u7F6E/\u6620\u5C04\u914D\u7F6E"}),disabled:t},{title:x.default.get({id:"spg.StepsConfigForm.StepsNav.ExtractConfigurationImportConfiguration",dm:"\u62BD\u53D6\u914D\u7F6E/\u5BFC\u5165\u914D\u7F6E"}),disabled:t}],...a});},lo=e=>{let{isEditPermission:t,previewExtractionResult:a,hasFormChanged:l,formProps:n,stepsProps:i,stepsActionsProps:d}=e,{form:o,...s}=n??{},[u]=P.default.useForm(),c=o??u,[m,f]=(0,I.useControllableValue)(i,{defaultValue:r.BASE_CONFIG,valuePropName:"current",trigger:"onChange"}),[g,p]=(0,I.useControllableValue)(e,{defaultValue:H,valuePropName:"formConfigData",trigger:"onFormConfigDataChange"}),C=(0,a4.isMappingConfigRequired)(g),v=(0,a4.isImportConfigRequired)(g);return(0,w.useEffect)(()=>{c.setFieldsValue({...g});},[g]),(0,h.jsxs)("div",{className:"stepsFormContainer-1lXUce-8",children:[(0,h.jsxs)("div",{className:"contentContainer-jjn_0nHA",children:[(0,h.jsx)(ld,{...i,current:m,onChange:f}),(0,h.jsx)(P.default,{className:"formContainer-OlOCGqx2",form:c,labelCol:{span:24},wrapperCol:{span:24},onValuesChange:()=>{p(c.getFieldsValue(!0));},...s,children:(0,h.jsx)(X.FormContextProvider,{value:{formInstance:c,formConfigData:g,updateFormConfigData:e=>{p(t=>({...t,...e}));}},children:{[r.BASE_CONFIG]:(0,h.jsx)(tx,{}),[r.SEGMENTATION_MAPPING_CONFIG]:(0,h.jsx)(a5,{isMappingConfig:C,previewExtractionResult:a}),[r.EXTRACTION_IMPORT_CONFIG]:(0,h.jsx)(ap,{isMappingConfig:C,isImportConfig:v})}[m]})})]}),(0,h.jsx)(ll,{className:"footerContainer-Nh0i28Oa",isEditPermission:t,isMappingConfig:C,hasFormChanged:l,type:null==g?void 0:g.type,form:c,currentStep:m,...d})]});};var lr=a("a80a5b6a");let ls=()=>{let e=j.URLParams.projectId,t=j.URLParams.jobId,{userInfo:a}=(0,C.useUserInfo)(),l=a.info.account,n=!!t,{data:i,isFetching:d}=(0,k.useGetJobById)({requestParams:{id:n?Number(t):void 0}}),{createUser:o}=i??{},[s]=P.default.useForm(),u=(0,w.useRef)(!1),[c,m]=(0,w.useState)(r.BASE_CONFIG),f=!!(!n||l&&l===String(o)),[g,p]=(0,I.useSetState)(H),[v,D]=(0,w.useState)([]);(0,w.useEffect)(()=>{n&&i&&p((0,lr.transformTaskDataToFormData)(i));},[n,i]);let M=async()=>{m(c-1);},_=async()=>{m(c+1);},A=async()=>{let t=(0,lr.getSplitPreviewParams)(g);if(!(0,N.default)(t)){let{result:a}=await (0,S.splitPreview)({projectId:Number(e),...n&&{id:null==i?void 0:i.id},...t});Array.isArray(a)&&D(a);}},O=async()=>{let t=(0,lr.transformFormDataToTaskData)(g);if(!t)return F.default.error(x.default.get({id:"spg.KnowledgeModeling.EditTask.FailedToSubmit",dm:"\u63D0\u4EA4\u5931\u8D25"}));n&&(t.id=null==i?void 0:i.id);let{success:a,errorMsg:d}=await (0,S.submit)({...t,projectId:Number(e),createUser:l});if(!a){if(F.default.error(d||x.default.get({id:"spg.KnowledgeModeling.EditTask.FailedToSubmit",dm:"\u63D0\u4EA4\u5931\u8D25"})),(0,N.default)(d))return;let e=(0,E.json2Object)(d);if((0,N.default)(e))return;let t=Object.keys(e).map(t=>({name:t,errors:[(0,E.json2String)(e[t])]}));s.setFields(t);return;}let o=n?x.default.get({id:"spg.KnowledgeModeling.EditTask.ModificationSucceeded",dm:"\u4FEE\u6539\u6210\u529F"}):x.default.get({id:"spg.KnowledgeModeling.EditTask.SuccessfullyCreated",dm:"\u521B\u5EFA\u6210\u529F"});F.default.success(o),b.history.push(`/knowledgeModeling/knowledgeTask?projectId=${e}`);};return(0,h.jsxs)(y.TopBoxDiv,{children:[(0,h.jsx)(T.OverlaySpin,{spinning:d}),(0,h.jsx)(q,{isEditTask:n,hasFormChanged:u.current}),(0,h.jsx)("div",{className:"stepsConfigFormWrapperContainer-LH23wqDg",children:(0,h.jsx)(lo,{isEditPermission:f,previewExtractionResult:v,hasFormChanged:u.current,formConfigData:g,onFormConfigDataChange:e=>{u.current=!0,p(e);},formProps:{form:s},stepsProps:{current:c,disabled:!0},stepsActionsProps:{onCancelClick:()=>{let t=`/knowledgeModeling/knowledgeTask?projectId=${e}`;b.history.push(t);},onPreClick:M,onNextClick:_,onPreview:A,onSubmitClick:O}})})]});};}}]);
