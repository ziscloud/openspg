(("undefined"!=typeof globalThis?globalThis:self)["makoChunk_open-semantic-graph"]=("undefined"!=typeof globalThis?globalThis:self)["makoChunk_open-semantic-graph"]||[]).push([["lib_@antv/g6"],{"0049dcfa":function(t,e,n){"use strict";n.d(e,"__esModule",{value:!0}),e.setVisibility=function(t,e,n){let i=t=>{(!n||n(t))&&(t.style.visibility=e);};t.forEach(t=>{i(t);});};},"01355b81":function(t,e,n){"use strict";function i(t){let e=[],n=t=>{(null==t?void 0:t.children.length)&&t.children.forEach(t=>{e.push(t),n(t);});};return n(t),e;}function r(t){let e=[],n=t.parentNode;for(;n;)e.push(n),n=n.parentNode;return e;}n.d(e,"__esModule",{value:!0}),n.e(e,{getAncestorShapes:function(){return r;},getDescendantShapes:function(){return i;}});},"032436c0":function(t,e,n){"use strict";n.d(e,"__esModule",{value:!0}),n.d(e,"RectCombo",{enumerable:!0,get:function(){return s;}});var i=n("a0f386cf"),r=n("21954d01"),a=n("56a67307");class s extends a.BaseCombo{constructor(t){super(t);}drawKeyShape(t,e){return this.upsert("key",i.Rect,this.getKeyStyle(t),e);}getKeyStyle(t){let e=super.getKeyStyle(t),[n,i]=this.getKeySize(t);return Object.assign(Object.assign(Object.assign({},e),t.collapsed&&(0,r.subStyleProps)(e,"collapsed")),{width:n,height:i,x:-n/2,y:-i/2});}}},"077c654d":function(t,e,n){"use strict";n.d(e,"__esModule",{value:!0}),n.d(e,"Line",{enumerable:!0,get:function(){return a;}});var i=n("1165dca0"),r=n("8f51b603");class a extends r.BaseEdge{constructor(t){super((0,i.mergeOptions)({style:a.defaultStyleProps},t));}getKeyPath(t){let[e,n]=this.getEndpoints(t);return[["M",e[0],e[1]],["L",n[0],n[1]]];}}a.defaultStyleProps={};},"07d6b8e2":function(t,e,n){"use strict";n.d(e,"__esModule",{value:!0}),e.CubicRadial=void 0;let i=n("b326bfa9"),r=n("76595ff2"),a=n("41446765"),s=n("42c4cb50");class o extends s.Cubic{constructor(t){super((0,r.mergeOptions)({style:o.defaultStyleProps},t));}get ref(){return this.context.model.getRootsData()[0];}getEndpoints(t){if(this.sourceNode.id===this.ref.id)return super.getEndpoints(t);let e=(0,i.positionOf)(this.ref);return[this.sourceNode.getIntersectPoint(e,!0),this.targetNode.getIntersectPoint(e)];}toRadialCoordinate(t){let e=(0,i.positionOf)(this.ref);return[(0,a.distance)(t,e),(0,a.rad)((0,a.subtract)(t,e))];}getControlPoints(t,e,n,i){let[r,a]=this.toRadialCoordinate(t),[s]=this.toRadialCoordinate(e),o=s-r;return[[t[0]+(o*n[0]+i[0])*Math.cos(a),t[1]+(o*n[0]+i[0])*Math.sin(a)],[e[0]-(o*n[1]-i[0])*Math.cos(a),e[1]-(o*n[1]-i[0])*Math.sin(a)]];}}e.CubicRadial=o,o.defaultStyleProps={curvePosition:.5,curveOffset:20};},"083b2c8e":function(t,e,n){"use strict";var i,r;n.d(e,"__esModule",{value:!0}),e.GraphEvent=void 0,(r=i||(e.GraphEvent=i={})).BEFORE_CANVAS_INIT="beforecanvasinit",r.AFTER_CANVAS_INIT="aftercanvasinit",r.BEFORE_SIZE_CHANGE="beforesizechange",r.AFTER_SIZE_CHANGE="aftersizechange",r.BEFORE_ELEMENT_CREATE="beforeelementcreate",r.AFTER_ELEMENT_CREATE="afterelementcreate",r.BEFORE_ELEMENT_UPDATE="beforeelementupdate",r.AFTER_ELEMENT_UPDATE="afterelementupdate",r.BEFORE_ELEMENT_DESTROY="beforeelementdestroy",r.AFTER_ELEMENT_DESTROY="afterelementdestroy",r.BEFORE_ELEMENT_TRANSLATE="beforeelementtranslate",r.AFTER_ELEMENT_TRANSLATE="afterelementtranslate",r.BEFORE_DRAW="beforedraw",r.AFTER_DRAW="afterdraw",r.BEFORE_RENDER="beforerender",r.AFTER_RENDER="afterrender",r.BEFORE_ANIMATE="beforeanimate",r.AFTER_ANIMATE="afteranimate",r.BEFORE_LAYOUT="beforelayout",r.AFTER_LAYOUT="afterlayout",r.BEFORE_STAGE_LAYOUT="beforestagelayout",r.AFTER_STAGE_LAYOUT="afterstagelayout",r.BEFORE_TRANSFORM="beforetransform",r.AFTER_TRANSFORM="aftertransform",r.BATCH_START="batchstart",r.BATCH_END="batchend",r.BEFORE_DESTROY="beforedestroy",r.AFTER_DESTROY="afterdestroy",r.BEFORE_RENDERER_CHANGE="beforerendererchange",r.AFTER_RENDERER_CHANGE="afterrendererchange";},"0b813c5c":function(t,e,n){"use strict";n.d(e,"__esModule",{value:!0}),n.d(e,"CollapseExpandNode",{enumerable:!0,get:function(){return d;}});var i=n("d9033aa4"),r=n("e1c279a0"),a=n("8a2f2f0b"),s=n("a7082564"),o=n("50c39bee");let l=(t,e,n,i)=>{let r=`${n}s`,s=(0,a.idOf)(i);t.add[r].has(s)||t.update[r].has(s)||t[e][r].set((0,a.idOf)(i),i);};class d extends s.BaseTransform{getElement(t){return this.context.element.getElement(t);}handleExpand(t,e){if(l(e,"add","node",t),(0,r.isCollapsed)(t))return;let n=(0,a.idOf)(t);l(e,"add","node",t),this.context.model.getRelatedEdgesData(n,"out").forEach(t=>{(0,o.reassignTo)(e,"add","edge",t);}),this.context.model.getChildrenData(n).forEach(t=>{this.handleExpand(t,e);});}beforeDraw(t){let{graph:e,model:n}=this.context;if(!n.model.hasTreeStructure(i.TREE_KEY))return t;let{add:{nodes:s,edges:l},update:{nodes:d}}=t,u=new Map,c=new Map;s.forEach((t,e)=>{(0,r.isCollapsed)(t)&&u.set(e,t);}),l.forEach(t=>{if("node"!==e.getElementType(t.source))return;let n=e.getNodeData(t.source);(0,r.isCollapsed)(n)&&u.set(t.source,n);}),d.forEach((t,e)=>{let n=this.getElement(e);if(!n)return;let i=n.attributes.collapsed;(0,r.isCollapsed)(t)?i||u.set(e,t):i&&c.set(e,t);});let h=new Set;return u.forEach((e,i)=>{n.getDescendantsData(i).forEach(e=>{let i=(0,a.idOf)(e);h.has(i)||((0,o.reassignTo)(t,"remove","node",e),n.getRelatedEdgesData(i).forEach(e=>{(0,o.reassignTo)(t,"remove","edge",e);}),h.add(i));});}),c.forEach((e,a)=>{if(n.getAncestorsData(a,i.TREE_KEY).some(r.isCollapsed)){(0,o.reassignTo)(t,"remove","node",e);return;}this.handleExpand(e,t);}),t;}}},"0e886f4f":function(t,e,n){"use strict";n.d(e,"__esModule",{value:!0}),e.idOf=r,e.parentIdOf=function(t){return t.combo;},e.idsOf=function(t,e){let n={nodes:(t.nodes||[]).map(r),edges:(t.edges||[]).map(r),combos:(t.combos||[]).map(r)};return e?Object.values(n).flat():n;};let i=n("22189803");function r(t){if(void 0!==t.id)return t.id;if(void 0!==t.source&&void 0!==t.target)return`${t.source}-${t.target}`;throw Error((0,i.format)("The datum does not have available id."));}},"0ecd492e":function(t,e,n){"use strict";n.d(e,"__esModule",{value:!0}),n.d(e,"treeToGraphData",{enumerable:!0,get:function(){return a;}});var i=n("51b633a8"),r=this&&this.__rest||function(t,e){var n={};for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&0>e.indexOf(i)&&(n[i]=t[i]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols)for(var r=0,i=Object.getOwnPropertySymbols(t);r<i.length;r++)0>e.indexOf(i[r])&&Object.prototype.propertyIsEnumerable.call(t,i[r])&&(n[i[r]]=t[i[r]]);return n;};function a(t,e){let{getNodeData:n=(t,e)=>{if(t.depth=e,!t.children)return t;let{children:n}=t;return Object.assign(Object.assign({},r(t,["children"])),{children:n.map(t=>t.id)});},getEdgeData:a=(t,e)=>({source:t.id,target:e.id}),getChildren:s=t=>t.children||[]}=e||{},o=[],l=[];return(0,i.dfs)(t,(t,e)=>{for(let i of(o.push(n(t,e)),s(t)))l.push(a(t,i));},t=>s(t),"TB"),{nodes:o,edges:l};}},"0f0756eb":function(t,e,n){"use strict";n.d(e,"__esModule",{value:!0}),n.d(e,"Triangle",{enumerable:!0,get:function(){return u;}});var i=n("777fffbe")._(n("7a2084f1")),r=n("6ed5e4e8"),a=n("bf55e093"),s=n("19365c34"),o=n("21954d01"),l=n("1165dca0"),d=n("c24cd24c");class u extends d.Polygon{constructor(t){super((0,l.mergeOptions)({style:u.defaultStyleProps},t));}getPoints(t){let{direction:e}=t,[n,i]=this.getSize(t);return(0,s.getTrianglePoints)(n,i,e);}getPortXY(t,e){let{direction:n}=t,{placement:i="top"}=e,r=this.getShape("key").getLocalBounds(),[a,o]=this.getSize(t),l=(0,s.getTrianglePorts)(a,o,n);return(0,s.getPortXYByPlacement)(r,i,l,!1);}getIconStyle(t){let{icon:e,iconText:n,iconSrc:s,direction:l}=t;if(!1===e||(0,i.default)(n||s))return!1;let d=(0,o.subStyleProps)(this.getGraphicStyle(t),"icon"),u=this.getShape("key").getLocalBounds(),[c,h]=(0,a.getTriangleCenter)(u,l),p=2*(0,a.getIncircleRadius)(u,l)*r.ICON_SIZE_RATIO;return Object.assign({x:c,y:h,width:p,height:p},d);}}u.defaultStyleProps={size:40,direction:"up"};},"1165dca0":function(t,e,n){"use strict";n.d(e,"__esModule",{value:!0}),n.e(e,{computeElementCallbackStyle:function(){return r;},getSubShapeStyle:function(){return s;},mergeOptions:function(){return a;}});var i=this&&this.__rest||function(t,e){var n={};for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&0>e.indexOf(i)&&(n[i]=t[i]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols)for(var r=0,i=Object.getOwnPropertySymbols(t);r<i.length;r++)0>e.indexOf(i[r])&&Object.prototype.propertyIsEnumerable.call(t,i[r])&&(n[i[r]]=t[i[r]]);return n;};function r(t,e){let{datum:n,graph:i}=e;return"function"==typeof t?t.call(i,n):Object.fromEntries(Object.entries(t).map(([t,e])=>"function"==typeof e?[t,e.call(i,n)]:[t,e]));}function a(t,e){let n=(null==t?void 0:t.style)||{},i=(null==e?void 0:e.style)||{};for(let t in n)t in i||(i[t]=n[t]);return Object.assign({},t,e,{style:i});}function s(t){let{x:e,y:n,z:r,class:a,className:s,transform:o,transformOrigin:l,zIndex:d,visibility:u}=t;return i(t,["x","y","z","class","className","transform","transformOrigin","zIndex","visibility"]);}},"14586b74":function(t,e,n){"use strict";n.d(e,"__esModule",{value:!0}),e.dispatchPositionChange=e.connectImage=e.Image=void 0;let i=n("6824c090"),r=n("1504b518");class a extends i.Image{constructor(t){super(t),this.onMounted=()=>{this.handleRadius();},this.onAttrModified=()=>{this.handleRadius();},o=this,this.isMutationObserved=!0,this.addEventListener(i.ElementEvent.MOUNTED,this.onMounted),this.addEventListener(i.ElementEvent.ATTR_MODIFIED,this.onAttrModified);}handleRadius(){let{radius:t,clipPath:e,width:n=0,height:r=0}=this.attributes;if(t&&n&&r){let[a,s]=this.getBounds().min,o={x:a,y:s,radius:t,width:n,height:r};if(e)Object.assign(this.parsedStyle.clipPath.style,o);else{let t=new i.Rect({style:o});this.style.clipPath=t;}}else e&&(this.style.clipPath=null);}}e.Image=a;let s=new WeakMap,o=null;e.connectImage=t=>{if(o&&(0,r.getAncestorShapes)(o).includes(t)){let e=s.get(t);e?e.includes(o)||e.push(o):s.set(t,[o]);}},e.dispatchPositionChange=t=>{let e=s.get(t);e&&e.forEach(t=>t.handleRadius());};},"1504b518":function(t,e,n){"use strict";n.d(e,"__esModule",{value:!0}),e.getDescendantShapes=function(t){let e=[],n=t=>{(null==t?void 0:t.children.length)&&t.children.forEach(t=>{e.push(t),n(t);});};return n(t),e;},e.getAncestorShapes=function(t){let e=[],n=t.parentNode;for(;n;)e.push(n),n=n.parentNode;return e;};},"1540f7e4":function(t,e,n){"use strict";n.d(e,"__esModule",{value:!0}),e.isEdgeData=function(t){return"source"in t&&"target"in t;},e.isVector2=function(t){return 2===t.length;},e.isVector3=function(t){return 3===t.length;},e.isPoint=function(t){return t instanceof Float32Array||!!Array.isArray(t)&&(2===t.length||3===t.length)&&t.every(t=>"number"==typeof t);};},"16ea0f92":function(t,e,n){"use strict";n.d(e,"__esModule",{value:!0}),n.e(e,{format:function(){return r;},print:function(){return a;}});var i=n("d65d2c90");function r(t){return`[G6 v${i.version}] ${t}`;}let a={mute:!1,debug:t=>{a.mute||console.debug(r(t));},info:t=>{a.mute||console.info(r(t));},warn:t=>{a.mute||console.warn(r(t));},error:t=>{a.mute||console.error(r(t));}};},"17d5ad7d":function(t,e,n){"use strict";var i,r=this&&this.__createBinding||(Object.create?function(t,e,n,i){void 0===i&&(i=n);var r=Object.getOwnPropertyDescriptor(e,n);(!r||("get"in r?!e.__esModule:r.writable||r.configurable))&&(r={enumerable:!0,get:function(){return e[n];}}),Object.defineProperty(t,i,r);}:function(t,e,n,i){void 0===i&&(i=n),t[i]=e[n];}),a=this&&this.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e});}:function(t,e){t.default=e;}),s=this&&this.__importStar||(i=function(t){return(i=Object.getOwnPropertyNames||function(t){var e=[];for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[e.length]=n);return e;})(t);},function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n=i(t),s=0;s<n.length;s++)"default"!==n[s]&&r(e,t,n[s]);return a(e,t),e;}),o=this&&this.__rest||function(t,e){var n={};for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&0>e.indexOf(i)&&(n[i]=t[i]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols)for(var r=0,i=Object.getOwnPropertySymbols(t);r<i.length;r++)0>e.indexOf(i[r])&&Object.prototype.propertyIsEnumerable.call(t,i[r])&&(n[i[r]]=t[i[r]]);return n;};Object.defineProperty(e,"__esModule",{value:!0}),e.BaseEdge=void 0;let l=n("6824c090"),d=n("5a6910cd"),u=n("b51680dc"),c=n("f7ced0c5"),h=n("734c52ec"),p=n("50674fdc"),f=n("e0ffb410"),g=n("76595ff2"),y=s(n("9bd5908a")),m=n("c135b32a"),b=n("56418176"),v=n("2329b631");class E extends b.BaseElement{constructor(t){super((0,g.mergeOptions)({style:E.defaultStyleProps},t)),this.type="edge";}get sourceNode(){let{sourceNode:t}=this.parsedAttributes;return this.context.element.getElement(t);}get targetNode(){let{targetNode:t}=this.parsedAttributes;return this.context.element.getElement(t);}getKeyStyle(t){let e=this.getGraphicStyle(t),{loop:n}=e,i=o(e,["loop"]),{sourceNode:r,targetNode:a}=this,s={d:n&&(0,h.isSameNode)(r,a)?this.getLoopPath(t):this.getKeyPath(t)};return l.Path.PARSED_STYLE_LIST.forEach(t=>{t in i&&(s[t]=i[t]);}),s;}getLoopPath(t){let{sourcePort:e,targetPort:n}=t,i=this.sourceNode,r=(0,u.getNodeBBox)(i),a=Math.max((0,u.getBBoxWidth)(r),(0,u.getBBoxHeight)(r)),{placement:s,clockwise:o,dist:l=a}=(0,p.subStyleProps)(this.getGraphicStyle(t),"loop");return(0,c.getCubicLoopPath)(i,s,o,l,e,n);}getEndpoints(t,e=!0,n=[]){let{sourcePort:i,targetPort:r}=t,{sourceNode:a,targetNode:s}=this,[o,l]=(0,h.findPorts)(a,s,i,r);if(!e)return[o?(0,h.getPortPosition)(o):a.getCenter(),l?(0,h.getPortPosition)(l):s.getCenter()];let d="function"==typeof n?n():n;return[(0,h.getConnectionPoint)(o||a,d[0]||l||s),(0,h.getConnectionPoint)(l||s,d[d.length-1]||o||a)];}getHaloStyle(t){if(!1===t.halo)return!1;let e=this.getKeyStyle(t),n=(0,p.subStyleProps)(this.getGraphicStyle(t),"halo");return Object.assign(Object.assign({},e),n);}getLabelStyle(t){if(!1===t.label||!t.labelText)return!1;let e=(0,p.subStyleProps)(this.getGraphicStyle(t),"label"),{placement:n,offsetX:i,offsetY:r,autoRotate:a,maxWidth:s}=e,l=o(e,["placement","offsetX","offsetY","autoRotate","maxWidth"]),d=(0,c.getLabelPositionStyle)(this.shapeMap.key,n,a,i,r),u=this.shapeMap.key.getLocalBounds();return Object.assign({wordWrapWidth:(0,m.getWordWrapWidthByEnds)([u.min,u.max],s)},d,l);}getBadgeStyle(t){if(!1===t.badge||!t.badgeText)return!1;let e=(0,p.subStyleProps)(t,"badge"),{offsetX:n,offsetY:i,placement:r}=e;return Object.assign(o(e,["offsetX","offsetY","placement"]),(0,c.getBadgePositionStyle)(this.shapeMap,r,t.labelPlacement,n,i));}drawArrow(t,e){var n;let i="start"===e,r=t["start"===e?"startArrow":"endArrow"],a=this.shapeMap.key;if(r){let e=this.getArrowStyle(t,i),[n,r,s]=i?["markerStart","markerStartOffset","startArrowOffset"]:["markerEnd","markerEndOffset","endArrowOffset"],o=a.parsedStyle[n];if(o)o.attr(e);else{let t=new(e.src?l.Image:l.Path)({style:e});a.style[n]=t;}a.style[r]=t[s]||e.width/2+ +e.lineWidth;}else{let t=i?"markerStart":"markerEnd";null===(n=a.style[t])||void 0===n||n.destroy(),a.style[t]=null;}}getArrowStyle(t,e){let n=this.getShape("key").attributes,i=(0,p.subStyleProps)(this.getGraphicStyle(t),e?"startArrow":"endArrow"),{size:r,type:a}=i,s=o(i,["size","type"]),[l,u]=(0,f.parseSize)((0,c.getArrowSize)(n.lineWidth,r)),h=((0,d.isFunction)(a)?a:y[a]||y.triangle)(l,u);return Object.assign((0,d.pick)(n,["stroke","strokeOpacity","fillOpacity"]),{width:l,height:u},Object.assign({},h&&{d:h,fill:"simple"===a?"":n.stroke}),s);}drawLabelShape(t,e){let n=this.getLabelStyle(t);this.upsert("label",v.Label,n,e);}drawHaloShape(t,e){let n=this.getHaloStyle(t);this.upsert("halo",l.Path,n,e);}drawBadgeShape(t,e){let n=this.getBadgeStyle(t);this.upsert("badge",v.Badge,n,e);}drawSourceArrow(t){this.drawArrow(t,"start");}drawTargetArrow(t){this.drawArrow(t,"end");}drawKeyShape(t,e){let n=this.getKeyStyle(t);return this.upsert("key",l.Path,n,e);}render(t=this.parsedAttributes,e=this){this.drawKeyShape(t,e),this.getShape("key")&&(this.drawSourceArrow(t),this.drawTargetArrow(t),this.drawLabelShape(t,e),this.drawHaloShape(t,e),this.drawBadgeShape(t,e));}onframe(){this.drawKeyShape(this.parsedAttributes,this),this.drawSourceArrow(this.parsedAttributes),this.drawTargetArrow(this.parsedAttributes),this.drawHaloShape(this.parsedAttributes,this),this.drawLabelShape(this.parsedAttributes,this),this.drawBadgeShape(this.parsedAttributes,this);}animate(t,e){let n=super.animate(t,e);return n?new Proxy(n,{set:(t,e,n)=>("currentTime"===e&&Promise.resolve().then(()=>this.onframe()),Reflect.set(t,e,n))}):n;}}e.BaseEdge=E,E.defaultStyleProps={badge:!0,badgeOffsetX:0,badgeOffsetY:0,badgePlacement:"suffix",isBillboard:!0,label:!0,labelAutoRotate:!0,labelIsBillboard:!0,labelMaxWidth:"80%",labelOffsetX:4,labelOffsetY:0,labelPlacement:"center",labelTextBaseline:"middle",labelWordWrap:!1,halo:!1,haloDroppable:!1,haloLineDash:0,haloLineWidth:12,haloPointerEvents:"none",haloStrokeOpacity:.25,haloZIndex:-1,loop:!0,startArrow:!1,startArrowLineDash:0,startArrowLineJoin:"round",startArrowLineWidth:1,startArrowTransformOrigin:"center",startArrowType:"vee",endArrow:!1,endArrowLineDash:0,endArrowLineJoin:"round",endArrowLineWidth:1,endArrowTransformOrigin:"center",endArrowType:"vee",loopPlacement:"top",loopClockwise:!0};},"181e393e":function(t,e,n){"use strict";n.d(e,"__esModule",{value:!0}),e.CubicVertical=void 0;let i=n("76595ff2"),r=n("42c4cb50");class a extends r.Cubic{constructor(t){super((0,i.mergeOptions)({style:a.defaultStyleProps},t));}getControlPoints(t,e,n,i){let r=e[1]-t[1];return[[t[0],t[1]+r*n[0]+i[0]],[e[0],e[1]-r*n[1]+i[1]]];}}e.CubicVertical=a,a.defaultStyleProps={curvePosition:[.5,.5],curveOffset:[0,0]};},"19365c34":function(t,e,n){"use strict";n.d(e,"__esModule",{value:!0}),n.e(e,{findPort:function(){return P;},findPorts:function(){return _;},getAllPorts:function(){return x;},getConnectionPoint:function(){return C;},getDiamondPoints:function(){return N;},getHexagonPoints:function(){return j;},getNodeConnectionPoint:function(){return M;},getPortConnectionPoint:function(){return w;},getPortPosition:function(){return S;},getPortXYByPlacement:function(){return E;},getStarPoints:function(){return T;},getStarPorts:function(){return B;},getTextStyleByPlacement:function(){return A;},getTrianglePoints:function(){return D;},getTrianglePorts:function(){return L;},isCombo:function(){return y;},isEdge:function(){return g;},isElement:function(){return m;},isNode:function(){return f;},isSameNode:function(){return b;},isSimplePort:function(){return O;},isToBeDestroyed:function(){return F;},isVisible:function(){return R;},markToBeDestroyed:function(){return z;},setAttributes:function(){return I;},updateStyle:function(){return k;}});var i=n("777fffbe"),r=i._(n("5f4f7744")),a=i._(n("4c900b62")),s=i._(n("1304978e")),o=i._(n("4199ddb4")),l=n("52f60d29"),d=n("bf55e093"),u=n("ffe4817e"),c=n("e492a2d3"),h=n("2be3380d"),p=this&&this.__rest||function(t,e){var n={};for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&0>e.indexOf(i)&&(n[i]=t[i]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols)for(var r=0,i=Object.getOwnPropertySymbols(t);r<i.length;r++)0>e.indexOf(i[r])&&Object.prototype.propertyIsEnumerable.call(t,i[r])&&(n[i[r]]=t[i[r]]);return n;};function f(t){return t instanceof l.BaseNode&&"node"===t.type;}function g(t){return t instanceof l.BaseEdge;}function y(t){return t instanceof l.BaseCombo;}function m(t){return f(t)||g(t)||y(t);}function b(t,e){return!!t&&!!e&&t===e;}let v={top:[.5,0],right:[1,.5],bottom:[.5,1],left:[0,.5],"left-top":[0,0],"top-left":[0,0],"left-bottom":[0,1],"bottom-left":[0,1],"right-top":[1,0],"top-right":[1,0],"right-bottom":[1,1],"bottom-right":[1,1],default:[.5,.5]};function E(t,e,n=v,i=!0){let a=[.5,.5],o=(0,s.default)(e)?(0,r.default)(n,e.toLocaleLowerCase(),a):e;if(!i&&(0,s.default)(e))return o;let[l,u]=o||a;return[t.min[0]+(0,d.getBBoxWidth)(t)*l,t.min[1]+(0,d.getBBoxHeight)(t)*u];}function x(t){if(!t)return{};let e=t.getPorts();return(t.attributes.ports||[]).forEach((n,i)=>{var r;let{key:a,placement:s}=n;O(n)&&(e[r=a||i]||(e[r]=(0,h.getXYByPlacement)(t.getShape("key").getBounds(),s)));}),e;}function O(t){let{r:e}=t;return!e||0===Number(e);}function S(t){return(0,u.isPoint)(t)?t:t.getPosition();}function _(t,e,n,i){return[P(t,e,n,i),P(e,t,i,n)];}function P(t,e,n,i){let r=x(t);if(n)return r[n];let a=Object.values(r);if(0===a.length)return;let s=a.map(t=>S(t)),o=function(t,e){let n=x(t);if(e)return[S(n[e])];let i=Object.values(n);return i.length>0?i.map(t=>S(t)):[t.getCenter()];}(e,i),[l]=(0,c.findNearestPoints)(s,o);return a.find(t=>S(t)===l);}function C(t,e){return y(t)||f(t)?M(t,e):w(t,e);}function w(t,e){if(!t||!e)return[0,0,0];if((0,u.isPoint)(t))return t;if(t.attributes.linkToCenter)return t.getPosition();let n=(0,u.isPoint)(e)?e:f(e)?e.getCenter():e.getPosition();return(0,c.getEllipseIntersectPoint)(n,t.getBounds());}function M(t,e){if(!t||!e)return[0,0,0];let n=(0,u.isPoint)(e)?e:f(e)?e.getCenter():e.getPosition();return t.getIntersectPoint(n)||t.getCenter();}function A(t,e="bottom",n=0,i=0,r=!1){let a=e.split("-"),[s,o]=(0,h.getXYByPlacement)(t,e),[l,d]=r?["bottom","top"]:["top","bottom"];return{transform:[["translate",s+n,o+i]],textBaseline:a.includes("top")?d:a.includes("bottom")?l:"middle",textAlign:a.includes("left")?"right":a.includes("right")?"left":"center"};}function T(t,e){return[[0,-t],[e*Math.cos(3*Math.PI/10),-e*Math.sin(3*Math.PI/10)],[t*Math.cos(Math.PI/10),-t*Math.sin(Math.PI/10)],[e*Math.cos(Math.PI/10),e*Math.sin(Math.PI/10)],[t*Math.cos(3*Math.PI/10),t*Math.sin(3*Math.PI/10)],[0,e],[-t*Math.cos(3*Math.PI/10),t*Math.sin(3*Math.PI/10)],[-e*Math.cos(Math.PI/10),e*Math.sin(Math.PI/10)],[-t*Math.cos(Math.PI/10),-t*Math.sin(Math.PI/10)],[-e*Math.cos(3*Math.PI/10),-e*Math.sin(3*Math.PI/10)]];}function B(t,e){let n={};return n.top=[0,-t],n.left=[-t*Math.cos(Math.PI/10),-t*Math.sin(Math.PI/10)],n["left-bottom"]=[-t*Math.cos(3*Math.PI/10),t*Math.sin(3*Math.PI/10)],n.bottom=[0,e],n["right-bottom"]=[t*Math.cos(3*Math.PI/10),t*Math.sin(3*Math.PI/10)],n.right=n.default=[t*Math.cos(Math.PI/10),-t*Math.sin(Math.PI/10)],n;}function D(t,e,n){let i=e/2,r=t/2,a={up:[[-r,i],[r,i],[0,-i]],left:[[-r,0],[r,i],[r,-i]],right:[[-r,i],[-r,-i],[r,0]],down:[[-r,-i],[r,-i],[0,i]]};return a[n]||a.up;}function L(t,e,n){let i=e/2,r=t/2,a={};return"down"===n?(a.bottom=a.default=[0,i],a.right=[r,-i],a.left=[-r,-i]):"left"===n?(a.top=[r,-i],a.bottom=[r,i],a.left=a.default=[-r,0]):"right"===n?(a.top=[-r,-i],a.bottom=[-r,i],a.right=a.default=[r,0]):(a.left=[-r,i],a.top=a.default=[0,-i],a.right=[r,i]),a;}function N(t,e){return[[0,-e/2],[t/2,0],[0,e/2],[-t/2,0]];}function R(t){return"hidden"!==(0,r.default)(t,["style","visibility"]);}function I(t,e){let{zIndex:n,transform:i,transformOrigin:r,visibility:s,cursor:o,clipPath:l,component:d}=e,u=p(e,["zIndex","transform","transformOrigin","visibility","cursor","clipPath","component"]);Object.assign(t.attributes,u),i&&t.setAttribute("transform",i),(0,a.default)(n)&&t.setAttribute("zIndex",n),r&&t.setAttribute("transformOrigin",r),s&&t.setAttribute("visibility",s),o&&t.setAttribute("cursor",o),l&&t.setAttribute("clipPath",l),d&&t.setAttribute("component",d);}function k(t,e){"update"in t?t.update(e):t.attr(e);}function j(t){return[[0,t],[t*Math.sqrt(3)/2,t/2],[t*Math.sqrt(3)/2,-t/2],[0,-t],[-t*Math.sqrt(3)/2,-t/2],[-t*Math.sqrt(3)/2,t/2]];}function z(t){(0,o.default)(t,"__to_be_destroyed__",!0);}function F(t){return(0,r.default)(t,"__to_be_destroyed__",!1);}},"1be6853e":function(t,e,n){"use strict";n.d(e,"__esModule",{value:!0}),e.version=void 0,e.version="5.0.45";},"1db3e4d4":function(t,e,n){"use strict";n.d(e,"__esModule",{value:!0}),e.CubicHorizontal=void 0;let i=n("76595ff2"),r=n("42c4cb50");class a extends r.Cubic{constructor(t){super((0,i.mergeOptions)({style:a.defaultStyleProps},t));}getControlPoints(t,e,n,i){let r=e[0]-t[0];return[[t[0]+r*n[0]+i[0],t[1]],[e[0]-r*n[1]+i[1],e[1]]];}}e.CubicHorizontal=a,a.defaultStyleProps={curvePosition:[.5,.5],curveOffset:[0,0]};},"20ac0f24":function(t,e,n){"use strict";n.d(e,"__esModule",{value:!0}),n.d(e,"BaseShape",{enumerable:!0,get:function(){return m;}});var i=n("777fffbe"),r=n("a0f386cf"),a=i._(n("7a2084f1")),s=i._(n("7e708962")),o=i._(n("e37c4e15")),l=n("d9033aa4"),d=n("9c1281e1"),u=n("19365c34"),c=n("21954d01"),h=n("16ea0f92"),p=n("1165dca0"),f=n("399ba410"),g=n("a0877623"),y=n("e8f8b56e");class m extends r.CustomElement{constructor(t){v(t.style),super(t),this.shapeMap={},this.animateMap={},this.render(this.attributes,this),this.setVisibility(),this.bindEvents();}get parsedAttributes(){return this.attributes;}upsert(t,e,n,i,r){var a,s,o,d,c,p,f,g;let m=this.shapeMap[t];if(!1===n){m&&(null===(a=null==r?void 0:r.beforeDestroy)||void 0===a||a.call(r,m),i.removeChild(m),delete this.shapeMap[t],null===(s=null==r?void 0:r.afterDestroy)||void 0===s||s.call(r,m));return;}let b="string"==typeof e?(0,y.getExtension)(l.ExtensionCategory.SHAPE,e):e;if(!b)throw Error((0,h.format)(`Shape ${e} not found`));if(!m||m.destroyed||!(m instanceof b)){m&&(null===(o=null==r?void 0:r.beforeDestroy)||void 0===o||o.call(r,m),null==m||m.destroy(),null===(d=null==r?void 0:r.afterDestroy)||void 0===d||d.call(r,m)),null===(c=null==r?void 0:r.beforeCreate)||void 0===c||c.call(r);let e=new b({className:t,style:n});return i.appendChild(e),this.shapeMap[t]=e,null===(p=null==r?void 0:r.afterCreate)||void 0===p||p.call(r,e),e;}return null===(f=null==r?void 0:r.beforeUpdate)||void 0===f||f.call(r,m),(0,u.updateStyle)(m,n),null===(g=null==r?void 0:r.afterUpdate)||void 0===g||g.call(r,m),m;}update(t={}){let e=Object.assign({},this.attributes,t);v(e),(0,u.setAttributes)(this,e),this.render(e,this),this.setVisibility();}bindEvents(){}getGraphicStyle(t){return(0,p.getSubShapeStyle)(t);}get compositeShapes(){return[["badges","badge-"],["ports","port-"]];}animate(t,e){if(0===t.length)return null;let n=[];if(void 0!==t[0].x||void 0!==t[0].y||void 0!==t[0].z){let{x:e=0,y:n=0,z:i=0}=this.attributes;t.forEach(t=>{let{x:r=e,y:a=n,z:s=i}=t;Object.assign(t,{transform:s?[["translate3d",r,a,s]]:[["translate",r,a]]});});}let i=super.animate(t,e);if(i&&(b(this,i),n.push(i)),Array.isArray(t)&&t.length>0){let i=["transform","transformOrigin","x","y","z","zIndex"];if(Object.keys(t[0]).some(t=>!i.includes(t))){Object.entries(this.shapeMap).forEach(([i,r])=>{let a=this[`get${(0,o.default)(i)}Style`];if((0,s.default)(a)){let i=t.map(t=>a.call(this,Object.assign(Object.assign({},this.attributes),t))),s=r.animate((0,d.preprocessKeyframes)(i),e);s&&(b(r,s),n.push(s));}});let i=(i,r)=>{if(!(0,a.default)(i)){let a=this[`get${(0,o.default)(r)}Style`];if((0,s.default)(a)){let r=t.map(t=>a.call(this,Object.assign(Object.assign({},this.attributes),t)));Object.entries(r[0]).map(([t])=>{let a=r.map(e=>e[t]),s=i[t];if(s){let t=s.animate((0,d.preprocessKeyframes)(a),e);t&&(b(s,t),n.push(t));}});}}};this.compositeShapes.forEach(([t,e])=>{i((0,c.subObject)(this.shapeMap,e),t);});}}return(0,d.createAnimationsProxy)(n);}getShape(t){return this.shapeMap[t];}setVisibility(){let{visibility:t}=this.attributes;(0,g.setVisibility)(this,t);}destroy(){this.shapeMap={},this.animateMap={},super.destroy();}}function b(t,e){null==e||e.finished.then(()=>{let n=t.activeAnimations.findIndex(t=>t===e);n>-1&&t.activeAnimations.splice(n,1);});}function v(t){if(!t)return{};if("x"in t||"y"in t||"z"in t){let{x:e=0,y:n=0,z:i,transform:r}=t,a=(0,f.replaceTranslateInTransform)(e,n,i,r);a&&(t.transform=a);}return t;}},"2165ae4d":function(t,e,n){"use strict";n.d(e,"__esModule",{value:!0}),n.d(e,"Polyline",{enumerable:!0,get:function(){return u;}});var i=n("bf55e093"),r=n("b5f0d953"),a=n("21954d01"),s=n("3d52184b"),o=n("21cf84fb"),l=n("1165dca0"),d=n("8f51b603");class u extends d.BaseEdge{constructor(t){super((0,l.mergeOptions)({style:u.defaultStyleProps},t));}getControlPoints(t){let{router:e}=t,{sourceNode:n,targetNode:i}=this,[r,a]=this.getEndpoints(t,!1),l=[];if(e){if("shortest-path"===e.type){let d=this.context.element.getNodes();(l=(0,o.aStarSearch)(n,i,d,e)).length||(l=(0,s.orth)(r,a,n,i,t.controlPoints,{padding:e.offset}));}else"orth"===e.type&&(l=(0,s.orth)(r,a,n,i,t.controlPoints,e));}else l=t.controlPoints;return l;}getPoints(t){let e=this.getControlPoints(t),[n,i]=this.getEndpoints(t,!0,e);return[n,...e,i];}getKeyPath(t){let e=this.getPoints(t);return(0,r.getPolylinePath)(e,t.radius);}getLoopPath(t){let{sourcePort:e,targetPort:n,radius:s}=t,o=this.sourceNode,l=(0,i.getNodeBBox)(o),d=Math.max((0,i.getBBoxWidth)(l),(0,i.getBBoxHeight)(l))/4,{placement:u,clockwise:c,dist:h=d}=(0,a.subStyleProps)(this.getGraphicStyle(t),"loop");return(0,r.getPolylineLoopPath)(o,s,u,c,h,e,n);}}u.defaultStyleProps={radius:0,controlPoints:[],router:!1};},"2177267d":function(t,e,n){"use strict";n.d(e,"__esModule",{value:!0}),n.e(e,{ArrangeDrawOrder:function(){return i.ArrangeDrawOrder;},CollapseExpandCombo:function(){return r.CollapseExpandCombo;},CollapseExpandNode:function(){return a.CollapseExpandNode;},GetEdgeActualEnds:function(){return s.GetEdgeActualEnds;},MapNodeSize:function(){return o.MapNodeSize;},PlaceRadialLabels:function(){return l.PlaceRadialLabels;},ProcessParallelEdges:function(){return d.ProcessParallelEdges;},UpdateRelatedEdge:function(){return u.UpdateRelatedEdge;}});var i=n("6a762b67"),r=n("9ae59709"),a=n("0b813c5c"),s=n("e82833b9"),o=n("c8382489"),l=n("5776b96d"),d=n("38dda7dc"),u=n("dde3aa6f");},"21954d01":function(t,e,n){"use strict";n.d(e,"__esModule",{value:!0}),n.e(e,{addPrefix:function(){return o;},omitStyleProps:function(){return c;},removePrefix:function(){return l;},startsWith:function(){return s;},subObject:function(){return u;},subStyleProps:function(){return d;}});var i=n("777fffbe"),r=i._(n("7c2e9bd6")),a=i._(n("e37c4e15"));function s(t,e){if(!t.startsWith(e))return!1;let n=t[e.length];return n>="A"&&n<="Z";}function o(t,e){return`${e}${(0,a.default)(t)}`;}function l(t,e,n=!0){if(!e||!s(t,e))return t;let i=t.slice(e.length);return n?(0,r.default)(i):i;}function d(t,e){let n=Object.entries(t).reduce((t,[n,i])=>("className"===n||"class"===n||s(n,e)&&Object.assign(t,{[l(n,e)]:i}),t),{});if("opacity"in t){let i=o("opacity",e),r=t.opacity;i in t?Object.assign(n,{opacity:r*t[i]}):Object.assign(n,{opacity:r});}return n;}function u(t,e){let n=e.length;return Object.keys(t).reduce((i,r)=>(r.startsWith(e)&&(i[r.slice(n)]=t[r]),i),{});}function c(t,e){let n="string"==typeof e?[e]:e,i={};return Object.keys(t).forEach(e=>{n.find(t=>e.startsWith(t))||(i[e]=t[e]);}),i;}},"21cf84fb":function(t,e,n){"use strict";n.d(e,"__esModule",{value:!0}),n.e(e,{SortedArray:function(){return b;},aStarSearch:function(){return m;},estimateCost:function(){return p;},getNearestPoint:function(){return f;}});var i=n("777fffbe")._(n("4c900b62")),r=n("bf55e093"),a=n("d2a5c9ab"),s=n("6d5a1ab5");let o={enableObstacleAvoidance:!1,offset:10,maxAllowedDirectionChange:Math.PI/2,maximumLoops:3e3,gridSize:5,startDirections:["top","right","bottom","left"],endDirections:["top","right","bottom","left"],directionMap:{right:{stepX:1,stepY:0},left:{stepX:-1,stepY:0},bottom:{stepX:0,stepY:1},top:{stepX:0,stepY:-1}},penalties:{0:0,90:0},distFunc:s.manhattanDistance},l=t=>`${Math.round(t[0])}|||${Math.round(t[1])}`;function d(t,e){let n=t=>Math.round(t/e);return(0,i.default)(t)?n(t):t.map(n);}function u(t,e){let n=e[0]-t[0],i=e[1]-t[1];return n||i?Math.atan2(i,n):0;}function c(t,e,n,i){let r=u(t,e);return function(t,e){let n=Math.abs(t-e);return n>Math.PI?2*Math.PI-n:n;}(u(n[l(t)]||i,t),r);}let h=(t,e)=>{let{offset:n,gridSize:i}=e,a={};return t.forEach(t=>{if(!t||t.destroyed||!t.isVisible())return;let e=(0,r.getExpandedBBox)(t.getRenderBounds(),n);for(let t=d(e.min[0],i);t<=d(e.max[0],i);t+=1)for(let n=d(e.min[1],i);n<=d(e.max[1],i);n+=1)a[`${t}|||${n}`]=!0;}),a;};function p(t,e,n){return Math.min(...e.map(e=>n(t,e)));}function f(t,e,n){let i=t[0],r=n(t[0],e);for(let a=0;a<t.length;a++){let s=t[a],o=n(s,e);o<r&&(i=s,r=o);}return i;}let g=(t,e,n,i)=>{if(!e)return[t];let{directionMap:s,offset:o}=i,l=(0,r.getExpandedBBox)(e.getRenderBounds(),o),u=Object.keys(s).reduce((e,i)=>{if(n.includes(i)){let n=s[i],[o,d]=(0,r.getBBoxSize)(l),u=[t[0]+n.stepX*o,t[1]+n.stepY*d],c=(0,r.getBBoxSegments)(l);for(let n=0;n<c.length;n++){let i=(0,a.getLinesIntersection)([t,u],c[n]);i&&(0,r.isPointOnBBoxBoundary)(i,l)&&e.push(i);}}return e;},[]);return(0,r.isPointInBBox)(t,l)||u.push(t),u.map(t=>d(t,i.gridSize));},y=(t,e,n,i,r,a,o)=>{let d=[],u=[a[0]===i[0]?i[0]:t[0]*o,a[1]===i[1]?i[1]:t[1]*o];d.unshift(u);let h=t,p=e[l(h)];for(;p;){let t=p,i=h;c(t,i,e,n)&&(u=[t[0]===i[0]?u[0]:t[0]*o,t[1]===i[1]?u[1]:t[1]*o],d.unshift(u)),p=e[l(t)],h=t;}let g=f(r.map(t=>[t[0]*o,t[1]*o]),u,s.manhattanDistance);return d.unshift(g),d;};function m(t,e,n,i){let r;let a=(0,s.toVector2)(t.getCenter()),u=(0,s.toVector2)(e.getCenter()),f=Object.assign(o,i),{gridSize:m}=f,v=h(f.enableObstacleAvoidance?n:[t,e],f),E=d(a,m),x=d(u,m),O=g(a,t,f.startDirections,f),S=g(u,e,f.endDirections,f);O.forEach(t=>delete v[l(t)]),S.forEach(t=>delete v[l(t)]);let _={},P={},C={},w={},M={},A=new b;for(let t=0;t<O.length;t++){let e=O[t],n=l(e);_[n]=e,w[n]=0,M[n]=p(e,S,f.distFunc),A.add({id:n,value:M[n]});}let T=S.map(t=>l(t)),B=f.maximumLoops,D=1/0;for(let[t,e]of Object.entries(_))M[t]<=D&&(D=M[t],r=e);for(;Object.keys(_).length>0&&B>0;){let t=A.minId(!1);if(t)r=_[t];else break;let e=l(r);if(T.includes(e))return y(r,C,E,u,O,x,m);for(let t of(delete _[e],A.remove(e),P[e]=!0,Object.values(f.directionMap))){let n=(0,s.add)(r,[t.stepX,t.stepY]),i=l(n);if(P[i])continue;let a=c(r,n,C,E);if(a>f.maxAllowedDirectionChange||v[i])continue;_[i]||(_[i]=n);let o=f.penalties[a],d=f.distFunc(r,n)+(isNaN(o)?m:o),u=w[e]+d,h=w[i];h&&u>=h||(C[i]=r,w[i]=u,M[i]=u+p(n,S,f.distFunc),A.add({id:i,value:M[i]}));}B-=1;}return[];}class b{constructor(){this.arr=[],this.map={},this.arr=[],this.map={};}_innerAdd(t,e){let n=0,i=e-1;for(;i-n>1;){let e=Math.floor((n+i)/2);if(this.arr[e].value>t.value)i=e;else if(this.arr[e].value<t.value)n=e;else{this.arr.splice(e,0,t),this.map[t.id]=!0;return;}}this.arr.splice(i,0,t),this.map[t.id]=!0;}add(t){delete this.map[t.id];let e=this.arr.length;if(!e||this.arr[e-1].value<t.value){this.arr.push(t),this.map[t.id]=!0;return;}this._innerAdd(t,e);}remove(t){this.map[t]&&delete this.map[t];}_clearAndGetMinId(){let t;for(let e=this.arr.length-1;e>=0;e--)this.map[this.arr[e].id]?t=this.arr[e].id:this.arr.splice(e,1);return t;}_findFirstId(){for(;this.arr.length;){let t=this.arr.shift();if(this.map[t.id])return t.id;}}minId(t){return t?this._clearAndGetMinId():this._findFirstId();}}},22189803:function(t,e,n){"use strict";n.d(e,"__esModule",{value:!0}),e.print=void 0,e.format=r;let i=n("1be6853e");function r(t){return`[G6 v${i.version}] ${t}`;}e.print={mute:!1,debug:t=>{e.print.mute||console.debug(r(t));},info:t=>{e.print.mute||console.info(r(t));},warn:t=>{e.print.mute||console.warn(r(t));},error:t=>{e.print.mute||console.error(r(t));}};},"2329b631":function(t,e,n){"use strict";n.d(e,"__esModule",{value:!0}),e.Label=e.Image=e.Icon=e.Contour=e.BaseShape=e.Badge=void 0;var i=n("700d5b2d");n.d(e,"Badge",{enumerable:!0,get:function(){return i.Badge;}});var r=n("565fda94");Object.defineProperty(e,"BaseShape",{enumerable:!0,get:function(){return r.BaseShape;}});var a=n("53971a1d");Object.defineProperty(e,"Contour",{enumerable:!0,get:function(){return a.Contour;}});var s=n("f44472e8");Object.defineProperty(e,"Icon",{enumerable:!0,get:function(){return s.Icon;}});var o=n("14586b74");Object.defineProperty(e,"Image",{enumerable:!0,get:function(){return o.Image;}});var l=n("3df2bd54");Object.defineProperty(e,"Label",{enumerable:!0,get:function(){return l.Label;}});},"24a05102":function(t,e,n){"use strict";n.d(e,"__esModule",{value:!0}),n.d(e,"Rect",{enumerable:!0,get:function(){return s;}});var i=n("a0f386cf"),r=n("6ed5e4e8"),a=n("eeff6888");class s extends a.BaseNode{constructor(t){super(t);}getKeyStyle(t){let[e,n]=this.getSize(t);return Object.assign(Object.assign({},super.getKeyStyle(t)),{width:e,height:n,x:-e/2,y:-n/2});}getIconStyle(t){let e=super.getIconStyle(t),{width:n,height:i}=this.getShape("key").attributes;return!!e&&Object.assign({width:n*r.ICON_SIZE_RATIO,height:i*r.ICON_SIZE_RATIO},e);}drawKeyShape(t,e){return this.upsert("key",i.Rect,this.getKeyStyle(t),e);}}},"26b35d1c":function(t,e,n){"use strict";n.d(e,"__esModule",{value:!0}),e.isCollapsed=function(t){var e;return!!(null===(e=t.style)||void 0===e?void 0:e.collapsed);};},"2a7c25f9":function(t,e,n){"use strict";n.d(e,"__esModule",{value:!0}),e.CircleCombo=void 0;let i=n("6824c090"),r=n("b51680dc"),a=n("b3456123"),s=n("50674fdc"),o=n("e0ffb410"),l=n("885a33c3");class d extends l.BaseCombo{constructor(t){super(t);}drawKeyShape(t,e){return this.upsert("key",i.Circle,this.getKeyStyle(t),e);}getKeyStyle(t){let{collapsed:e}=t,n=super.getKeyStyle(t),[i]=this.getKeySize(t);return Object.assign(Object.assign(Object.assign({},n),e&&(0,s.subStyleProps)(n,"collapsed")),{r:i/2});}getCollapsedKeySize(t){let[e,n]=(0,o.parseSize)(t.collapsedSize),i=Math.max(e,n)/2;return[2*i,2*i,0];}getExpandedKeySize(t){let e=this.getContentBBox(t),[n,i]=(0,r.getBBoxSize)(e),a=Math.sqrt(Math.pow(n,2)+Math.pow(i,2))/2;return[2*a,2*a,0];}getIntersectPoint(t,e=!1){let n=this.getShape("key").getBounds();return(0,a.getEllipseIntersectPoint)(t,n,e);}}e.CircleCombo=d;},"2be3380d":function(t,e,n){"use strict";n.d(e,"__esModule",{value:!0}),n.e(e,{getXYByPlacement:function(){return o;},getXYByRelativePlacement:function(){return s;},hasPosition:function(){return a;},positionOf:function(){return r;}});var i=n("ecd36f8f");function r(t){let{x:e=0,y:n=0,z:i=0}=t.style||{};return[+e,+n,+i];}function a(t){let{x:e,y:n,z:i}=t.style||{};return void 0!==e||void 0!==n||void 0!==i;}function s(t,e){let[n,i]=e,{min:r,max:a}=t;return[r[0]+n*(a[0]-r[0]),r[1]+i*(a[1]-r[1])];}function o(t,e="center"){return s(t,(0,i.parsePlacement)(e));}},"2beb732a":function(t,e,n){"use strict";n.d(e,"__esModule",{value:!0}),e.Polyline=void 0;let i=n("b51680dc"),r=n("f7ced0c5"),a=n("50674fdc"),s=n("45c7872a"),o=n("66a6d83a"),l=n("76595ff2"),d=n("17d5ad7d");class u extends d.BaseEdge{constructor(t){super((0,l.mergeOptions)({style:u.defaultStyleProps},t));}getControlPoints(t){let{router:e}=t,{sourceNode:n,targetNode:i}=this,[r,a]=this.getEndpoints(t,!1),l=[];if(e){if("shortest-path"===e.type){let d=this.context.element.getNodes();(l=(0,o.aStarSearch)(n,i,d,e)).length||(l=(0,s.orth)(r,a,n,i,t.controlPoints,{padding:e.offset}));}else"orth"===e.type&&(l=(0,s.orth)(r,a,n,i,t.controlPoints,e));}else l=t.controlPoints;return l;}getPoints(t){let e=this.getControlPoints(t),[n,i]=this.getEndpoints(t,!0,e);return[n,...e,i];}getKeyPath(t){let e=this.getPoints(t);return(0,r.getPolylinePath)(e,t.radius);}getLoopPath(t){let{sourcePort:e,targetPort:n,radius:s}=t,o=this.sourceNode,l=(0,i.getNodeBBox)(o),d=Math.max((0,i.getBBoxWidth)(l),(0,i.getBBoxHeight)(l))/4,{placement:u,clockwise:c,dist:h=d}=(0,a.subStyleProps)(this.getGraphicStyle(t),"loop");return(0,r.getPolylineLoopPath)(o,s,u,c,h,e,n);}}e.Polyline=u,u.defaultStyleProps={radius:0,controlPoints:[],router:!1};},"2cab8bc1":function(t,e,n){"use strict";var i=this&&this.__awaiter||function(t,e,n,i){return new(n||(n=Promise))(function(r,a){function s(t){try{l(i.next(t));}catch(t){a(t);}}function o(t){try{l(i.throw(t));}catch(t){a(t);}}function l(t){var e;t.done?r(t.value):((e=t.value)instanceof n?e:new n(function(t){t(e);})).then(s,o);}l((i=i.apply(t,e||[])).next());});},r=this&&this.__rest||function(t,e){var n={};for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&0>e.indexOf(i)&&(n[i]=t[i]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols)for(var r=0,i=Object.getOwnPropertySymbols(t);r<i.length;r++)0>e.indexOf(i[r])&&Object.prototype.propertyIsEnumerable.call(t,i[r])&&(n[i[r]]=t[i[r]]);return n;};Object.defineProperty(e,"__esModule",{value:!0}),e.isComboLayout=function(t){let{type:e}=t;return!!["comboCombined","comboForce"].includes(e)||"antv-dagre"===e&&!!t.sortByCombo;},e.isTreeLayout=function(t){let{type:e}=t;return["compact-box","mindmap","dendrogram","indented"].includes(e);},e.isPositionSpecified=function(t){return(0,s.isNumber)(t.x)&&(0,s.isNumber)(t.y);},e.isPreLayout=function(t){return!Array.isArray(t)&&(null==t?void 0:t.preLayout);},e.layoutMapping2GraphData=c,e.layoutAdapter=function(t,e){class n extends l.BaseLayout{constructor(e,n){if(super(e,n),this.instance=new t({}),this.id=this.instance.id,"stop"in this.instance&&"tick"in this.instance){let t=this.instance;this.stop=t.stop.bind(t),this.tick=e=>c(t.tick(e));}}execute(t,e){return i(this,void 0,void 0,function*(){return c((yield this.instance.execute(this.graphData2LayoutModel(t),this.transformOptions((0,s.deepMix)({},this.options,e)))));});}transformOptions(t){let{onTick:e}=t;return e&&(t.onTick=t=>e(c(t))),t;}graphData2LayoutModel(t){let{nodes:n=[],edges:i=[],combos:s=[]}=t,l=n.map(t=>{let e=(0,d.idOf)(t),{data:n,style:i,combo:a}=t,s=r(t,["data","style","combo"]),o={id:e,data:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},n),{data:n}),a?{parentId:a}:{}),{style:i}),s)};return(null==i?void 0:i.x)&&Object.assign(o.data,{x:i.x}),(null==i?void 0:i.y)&&Object.assign(o.data,{y:i.y}),(null==i?void 0:i.z)&&Object.assign(o.data,{z:i.z}),o;}),u=new Map(l.map(t=>[t.id,t])),c=i.filter(t=>{let{source:e,target:n}=t;return u.has(e)&&u.has(n);}).map(t=>{let{source:e,target:n,data:i,style:r}=t;return{id:(0,d.idOf)(t),source:e,target:n,data:Object.assign({},i),style:Object.assign({},r)};}),h=s.map(t=>({id:(0,d.idOf)(t),data:Object.assign({_isCombo:!0},t.data),style:Object.assign({},t.style)})),p=new a.Graph({nodes:[...l,...h],edges:c});return e.model.model.hasTreeStructure(o.COMBO_KEY)&&(p.attachTreeStructure(o.COMBO_KEY),l.forEach(t=>{let n=e.model.model.getParent(t.id,o.COMBO_KEY);n&&p.hasNode(n.id)&&p.setParent(t.id,n.id,o.COMBO_KEY);})),p;}}return n;},e.invokeLayoutMethod=function(t,e,...n){if(e in t)return t[e](...n);if("instance"in t){let i=t.instance;if(e in i)return i[e](...n);}return null;},e.getLayoutProperty=function(t,e){if(e in t)return t[e];if("instance"in t){let n=t.instance;if(e in n)return n[e];}return null;};let a=n("cec48968"),s=n("5a6910cd"),o=n("d0a8fc0a"),l=n("a0d8bc6d"),d=n("0e886f4f"),u=n("b3456123");function c(t){let{nodes:e,edges:n}=t,i={nodes:[],edges:[],combos:[]};return e.forEach(t=>{let e=t.data._isCombo?i.combos:i.nodes,{x:n,y:r,z:a=0}=t.data;null==e||e.push({id:t.id,style:{x:n,y:r,z:a}});}),n.forEach(t=>{let{id:e,source:n,target:r,data:{points:a=[],controlPoints:s=a.slice(1,a.length-1)}}=t;i.edges.push({id:e,source:n,target:r,style:Object.assign({},(null==s?void 0:s.length)?{controlPoints:s.map(u.parsePoint)}:{})});}),i;}},"30e76e54":function(t,e,n){"use strict";n.d(e,"__esModule",{value:!0}),n.d(e,"BaseLayout",{enumerable:!0,get:function(){return i;}});class i{constructor(t,e){this.context=t,this.options=e||{};}}},"30e7d3ea":function(t,e,n){"use strict";var i,r;n.d(e,"__esModule",{value:!0}),e.EdgeEvent=void 0,(r=i||(e.EdgeEvent=i={})).CLICK="edge:click",r.DBLCLICK="edge:dblclick",r.POINTER_OVER="edge:pointerover",r.POINTER_LEAVE="edge:pointerleave",r.POINTER_ENTER="edge:pointerenter",r.POINTER_MOVE="edge:pointermove",r.POINTER_OUT="edge:pointerout",r.POINTER_DOWN="edge:pointerdown",r.POINTER_UP="edge:pointerup",r.CONTEXT_MENU="edge:contextmenu",r.DRAG_ENTER="edge:dragenter",r.DRAG_OVER="edge:dragover",r.DRAG_LEAVE="edge:dragleave",r.DROP="edge:drop";},"3534b48c":function(t,e,n){"use strict";n.d(e,"__esModule",{value:!0}),n.d(e,"HTML",{enumerable:!0,get:function(){return p;}});var i=n("777fffbe"),r=n("a0f386cf"),a=n("f7384b74"),s=i._(n("1c656441")),o=i._(n("df9367b2")),l=i._(n("0c915bb9")),d=i._(n("4199ddb4")),u=n("d9033aa4"),c=n("eeff6888"),h=this&&this.__rest||function(t,e){var n={};for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&0>e.indexOf(i)&&(n[i]=t[i]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols)for(var r=0,i=Object.getOwnPropertySymbols(t);r<i.length;r++)0>e.indexOf(i[r])&&Object.prototype.propertyIsEnumerable.call(t,i[r])&&(n[i[r]]=t[i[r]]);return n;};class p extends c.BaseNode{constructor(t){super(Object.assign(Object.assign({},t),{style:Object.assign({},p.defaultStyleProps,t.style)})),this.rootPointerEvent=new r.FederatedPointerEvent(null),this.forwardEvents=t=>{let e=this.context.canvas,n=e.context.renderingContext.root.ownerDocument.defaultView;this.normalizeToPointerEvent(t,n).forEach(i=>{let r=this.bootstrapEvent(this.rootPointerEvent,i,n,t);(0,d.default)(e.context.eventService,"mappingTable.pointerupoutside",[]),e.context.eventService.mapEvent(r);});};}get eventService(){return this.context.canvas.context.eventService;}get events(){return[u.CommonEvent.CLICK,u.CommonEvent.POINTER_DOWN,u.CommonEvent.POINTER_MOVE,u.CommonEvent.POINTER_UP,u.CommonEvent.POINTER_OVER,u.CommonEvent.POINTER_LEAVE];}getDomElement(){return this.getShape("key").getDomElement();}render(t=this.parsedAttributes,e=this){this.drawKeyShape(t,e),this.drawPortShapes(t,e);}getKeyStyle(t){let e=(0,l.default)(t,["dx","dy","innerHTML","pointerEvents","cursor"]),{dx:n=0,dy:i=0}=e,r=h(e,["dx","dy"]),[a,s]=this.getSize(t);return Object.assign(Object.assign({x:n,y:i},r),{width:a,height:s});}drawKeyShape(t,e){let n=this.getKeyStyle(t),{x:i,y:a,width:s=0,height:o=0}=n,l=this.upsert("key-container",r.Rect,{x:i,y:a,width:s,height:o,opacity:0},e);return this.upsert("key",r.HTML,n,l);}connectedCallback(){if(!(this.context.canvas.getRenderer("main") instanceof a.Renderer))return;let t=this.getDomElement();this.events.forEach(e=>{t.addEventListener(e,this.forwardEvents);});}attributeChangedCallback(t,e,n){"zIndex"===t&&e!==n&&(this.getDomElement().style.zIndex=n);}destroy(){let t=this.getDomElement();this.events.forEach(e=>{t.removeEventListener(e,this.forwardEvents);}),super.destroy();}normalizeToPointerEvent(t,e){let n=[];if(e.isTouchEvent(t))for(let e=0;e<t.changedTouches.length;e++){let i=t.changedTouches[e];(0,o.default)(i.button)&&(i.button=0),(0,o.default)(i.buttons)&&(i.buttons=1),(0,o.default)(i.isPrimary)&&(i.isPrimary=1===t.touches.length&&"touchstart"===t.type),(0,o.default)(i.width)&&(i.width=i.radiusX||1),(0,o.default)(i.height)&&(i.height=i.radiusY||1),(0,o.default)(i.tiltX)&&(i.tiltX=0),(0,o.default)(i.tiltY)&&(i.tiltY=0),(0,o.default)(i.pointerType)&&(i.pointerType="touch"),(0,o.default)(i.pointerId)&&(i.pointerId=i.identifier||0),(0,o.default)(i.pressure)&&(i.pressure=i.force||.5),(0,o.default)(i.twist)&&(i.twist=0),(0,o.default)(i.tangentialPressure)&&(i.tangentialPressure=0),i.isNormalized=!0,i.type=t.type,n.push(i);}else e.isMouseEvent(t)&&((0,o.default)(t.isPrimary)&&(t.isPrimary=!0),(0,o.default)(t.width)&&(t.width=1),(0,o.default)(t.height)&&(t.height=1),(0,o.default)(t.tiltX)&&(t.tiltX=0),(0,o.default)(t.tiltY)&&(t.tiltY=0),(0,o.default)(t.pointerType)&&(t.pointerType="mouse"),(0,o.default)(t.pointerId)&&(t.pointerId=1),(0,o.default)(t.pressure)&&(t.pressure=.5),(0,o.default)(t.twist)&&(t.twist=0),(0,o.default)(t.tangentialPressure)&&(t.tangentialPressure=0),t.isNormalized=!0),n.push(t);return n;}transferMouseData(t,e){t.isTrusted=e.isTrusted,t.srcElement=e.srcElement,t.timeStamp=performance.now(),t.type=e.type,t.altKey=e.altKey,t.metaKey=e.metaKey,t.shiftKey=e.shiftKey,t.ctrlKey=e.ctrlKey,t.button=e.button,t.buttons=e.buttons,t.client.x=e.clientX,t.client.y=e.clientY,t.movement.x=e.movementX,t.movement.y=e.movementY,t.page.x=e.pageX,t.page.y=e.pageY,t.screen.x=e.screenX,t.screen.y=e.screenY,t.relatedTarget=null;}bootstrapEvent(t,e,n,i){t.view=n,t.originalEvent=null,t.nativeEvent=i,t.pointerId=e.pointerId,t.width=e.width,t.height=e.height,t.isPrimary=e.isPrimary,t.pointerType=e.pointerType,t.pressure=e.pressure,t.tangentialPressure=e.tangentialPressure,t.tiltX=e.tiltX,t.tiltY=e.tiltY,t.twist=e.twist,this.transferMouseData(t,e);let{x:r,y:a}=this.getViewportXY(e);t.viewport.x=r,t.viewport.y=a;let[s,o]=this.context.canvas.getCanvasByViewport([r,a]);return t.canvas.x=s,t.canvas.y=o,t.global.copyFrom(t.canvas),t.offset.copyFrom(t.canvas),t.isTrusted=i.isTrusted,"pointerleave"===t.type&&(t.type="pointerout"),t;}getViewportXY(t){let e,n;let{offsetX:i,offsetY:r,clientX:a,clientY:o}=t;if((0,s.default)(i)||(0,s.default)(r)){let t=this.eventService.client2Viewport({x:a,y:o});e=t.x,n=t.y;}else e=i,n=r;return{x:e,y:n};}onframe(){super.onframe();let{opacity:t}=this.attributes;this.getDomElement().style.opacity=`${t}`;}}p.defaultStyleProps={size:[160,80],halo:!1,icon:!1,label:!1,pointerEvents:"auto"};},"35a30c27":function(t,e,n){"use strict";n.d(e,"__esModule",{value:!0}),n.d(e,"Cubic",{enumerable:!0,get:function(){return s;}});var i=n("b5f0d953"),r=n("1165dca0"),a=n("8f51b603");class s extends a.BaseEdge{constructor(t){super((0,r.mergeOptions)({style:s.defaultStyleProps},t));}getKeyPath(t){let[e,n]=this.getEndpoints(t),{controlPoints:r,curvePosition:a,curveOffset:s}=t,o=this.getControlPoints(e,n,(0,i.parseCurvePosition)(a),(0,i.parseCurveOffset)(s),r);return(0,i.getCubicPath)(e,n,o);}getControlPoints(t,e,n,r,a){return(null==a?void 0:a.length)===2?a:[(0,i.getCurveControlPoint)(t,e,n[0],r[0]),(0,i.getCurveControlPoint)(t,e,n[1],r[1])];}}s.defaultStyleProps={curvePosition:.5,curveOffset:20};},"35fa4d01":function(t,e,n){let i;n.d(e,"__esModule",{value:!0}),n.e(e,{Background:function(){return m;},BubbleSets:function(){return ti;},Contextmenu:function(){return tl;},EdgeBundling:function(){return tf;},EdgeFilterLens:function(){return t_;},Fisheye:function(){return tM;},Fullscreen:function(){return tB;},GridLine:function(){return tN;},History:function(){return tV;},Hull:function(){return en;},Legend:function(){return eq;},Minimap:function(){return e1;},Snapline:function(){return e8;},Timebar:function(){return rm;},Toolbar:function(){return r_;},Tooltip:function(){return rL;},Watermark:function(){return rj;}});var r,a,s,o,l,d,u=n("777fffbe"),c=n("4223a5bf"),h=u._(c),p=n("c516880f");class f extends p.BaseExtension{}var g=n("d7b73d26"),y=this&&this.__awaiter||function(t,e,n,i){return new(n||(n=Promise))(function(r,a){function s(t){try{l(i.next(t));}catch(t){a(t);}}function o(t){try{l(i.throw(t));}catch(t){a(t);}}function l(t){var e;t.done?r(t.value):((e=t.value)instanceof n?e:new n(function(t){t(e);})).then(s,o);}l((i=i.apply(t,e||[])).next());});};class m extends f{constructor(t,e){super(t,Object.assign({},m.defaultOptions,e)),this.$element=(0,g.createPluginContainer)("background"),this.context.canvas.getContainer().prepend(this.$element),this.update(e);}update(t){let e=Object.create(null,{update:{get:()=>super.update}});return y(this,void 0,void 0,function*(){e.update.call(this,t),Object.assign(this.$element.style,(0,h.default)(this.options,["key","type"]));});}destroy(){super.destroy(),this.$element.remove();}}m.defaultOptions={transition:"background 0.5s",backgroundSize:"cover",zIndex:"-1"};var b=n("bf8f013f"),v=u._(b),E=n("e602108f"),x=u._(E),O=n("7e708962"),S=u._(O);function _(t,e,n,i,r,a){let s=n-t,o=i-e,l=r-t,d=a-e,u=l*s+d*o,c=0;c=u<=0?0:(u=(l=s-l)*s+(d=o-d)*o)<=0?0:u*u/(s*s+o*o);let h=l*l+d*d-c;return h<0?0:h;}function P(t,e,n,i){return(t-n)*(t-n)+(e-i)*(e-i);}function C(t){let e=Math.min(t.x1,t.x2),n=Math.max(t.x1,t.x2),i=Math.min(t.y1,t.y2),r=Math.max(t.y1,t.y2);return{x:e,y:i,x2:n,y2:r,width:n-e,height:r-i};}class w{constructor(t,e,n,i){this.x1=t,this.y1=e,this.x2=n,this.y2=i;}equals(t){return this.x1===t.x1&&this.y1===t.y1&&this.x2===t.x2&&this.y2===t.y2;}draw(t){t.moveTo(this.x1,this.y1),t.lineTo(this.x2,this.y2);}toString(){return`Line(from=(${this.x1},${this.y1}),to=(${this.x2},${this.y2}))`;}static from(t){return new w(t.x1,t.y1,t.x2,t.y2);}cuts(t,e){return this.y1!==this.y2&&(!(e<this.y1)||!(e<=this.y2))&&(!(e>this.y1)||!(e>=this.y2))&&(!(t>this.x1)||!(t>=this.x2))&&(t<this.x1&&t<=this.x2||t<=this.x1+(e-this.y1)*(this.x2-this.x1)/(this.y2-this.y1));}distSquare(t,e){return _(this.x1,this.y1,this.x2,this.y2,t,e);}ptClose(t,e,n){if(this.x1<this.x2){if(t<this.x1-n||t>this.x2+n)return!1;}else if(t<this.x2-n||t>this.x1+n)return!1;if(this.y1<this.y2){if(e<this.y1-n||e>this.y2+n)return!1;}else if(e<this.y2-n||e>this.y1+n)return!1;return!0;}}(r=o||(o={}))[r.POINT=1]="POINT",r[r.PARALLEL=2]="PARALLEL",r[r.COINCIDENT=3]="COINCIDENT",r[r.NONE=4]="NONE";class M{constructor(t,e=0,n=0){this.state=t,this.x=e,this.y=n;}}function A(t,e){let n=(e.x2-e.x1)*(t.y1-e.y1)-(e.y2-e.y1)*(t.x1-e.x1),i=(t.x2-t.x1)*(t.y1-e.y1)-(t.y2-t.y1)*(t.x1-e.x1),r=(e.y2-e.y1)*(t.x2-t.x1)-(e.x2-e.x1)*(t.y2-t.y1);if(r){let e=n/r,a=i/r;return 0<=e&&e<=1&&0<=a&&a<=1?new M(o.POINT,t.x1+e*(t.x2-t.x1),t.y1+e*(t.y2-t.y1)):new M(o.NONE);}return new M(0===n||0===i?o.COINCIDENT:o.PARALLEL);}function T(t,e){let n=(e.x2-e.x1)*(t.y1-e.y1)-(e.y2-e.y1)*(t.x1-e.x1),i=(t.x2-t.x1)*(t.y1-e.y1)-(t.y2-t.y1)*(t.x1-e.x1),r=(e.y2-e.y1)*(t.x2-t.x1)-(e.x2-e.x1)*(t.y2-t.y1);if(r){let t=n/r,e=i/r;if(0<=t&&t<=1&&0<=e&&e<=1)return t;}return Number.POSITIVE_INFINITY;}function B(t,e,n){let i=new Set;return t.width<=0?(i.add(l.LEFT),i.add(l.RIGHT)):e<t.x?i.add(l.LEFT):e>t.x+t.width&&i.add(l.RIGHT),t.height<=0?(i.add(l.TOP),i.add(l.BOTTOM)):n<t.y?i.add(l.TOP):n>t.y+t.height&&i.add(l.BOTTOM),i;}function D(t,e){let n=e.x1,i=e.y1,r=e.x2,a=e.y2,s=Array.from(B(t,r,a));if(0===s.length)return!0;let o=B(t,n,i);for(;0!==o.size;){for(let t of s)if(o.has(t))return!1;if(o.has(l.RIGHT)||o.has(l.LEFT)){let e=t.x;o.has(l.RIGHT)&&(e+=t.width),i+=(e-n)*(a-i)/(r-n),n=e;}else{let e=t.y;o.has(l.BOTTOM)&&(e+=t.height),n+=(e-i)*(r-n)/(a-i),i=e;}o=B(t,n,i);}return!0;}(a=l||(l={}))[a.LEFT=0]="LEFT",a[a.TOP=1]="TOP",a[a.RIGHT=2]="RIGHT",a[a.BOTTOM=3]="BOTTOM";class L{constructor(t,e,n,i){this.x=t,this.y=e,this.width=n,this.height=i;}get x2(){return this.x+this.width;}get y2(){return this.y+this.height;}get cx(){return this.x+this.width/2;}get cy(){return this.y+this.height/2;}get radius(){return Math.max(this.width,this.height)/2;}static from(t){return new L(t.x,t.y,t.width,t.height);}equals(t){return this.x===t.x&&this.y===t.y&&this.width===t.width&&this.height===t.height;}clone(){return new L(this.x,this.y,this.width,this.height);}add(t){let e=Math.min(this.x,t.x),n=Math.min(this.y,t.y),i=Math.max(this.x2,t.x+t.width),r=Math.max(this.y2,t.y+t.height);this.x=e,this.y=n,this.width=i-e,this.height=r-n;}addPoint(t){let e=Math.min(this.x,t.x),n=Math.min(this.y,t.y),i=Math.max(this.x2,t.x),r=Math.max(this.y2,t.y);this.x=e,this.y=n,this.width=i-e,this.height=r-n;}toString(){return`Rectangle[x=${this.x}, y=${this.y}, w=${this.width}, h=${this.height}]`;}draw(t){t.rect(this.x,this.y,this.width,this.height);}containsPt(t,e){return t>=this.x&&t<=this.x2&&e>=this.y&&e<=this.y2;}get area(){return this.width*this.height;}intersects(t){return!(this.area<=0)&&!(t.width<=0)&&!(t.height<=0)&&t.x+t.width>this.x&&t.y+t.height>this.y&&t.x<this.x2&&t.y<this.y2;}distSquare(t,e){if(this.containsPt(t,e))return 0;let n=B(this,t,e);return n.has(l.TOP)?n.has(l.LEFT)?P(t,e,this.x,this.y):n.has(l.RIGHT)?P(t,e,this.x2,this.y):(this.y-e)*(this.y-e):n.has(l.BOTTOM)?n.has(l.LEFT)?P(t,e,this.x,this.y2):n.has(l.RIGHT)?P(t,e,this.x2,this.y2):(e-this.y2)*(e-this.y2):n.has(l.LEFT)?(this.x-t)*(this.x-t):n.has(l.RIGHT)?(t-this.x2)*(t-this.x2):0;}}class N{constructor(t,e,n){this.cx=t,this.cy=e,this.radius=n;}get x(){return this.cx-this.radius;}get x2(){return this.cx+this.radius;}get width(){return 2*this.radius;}get y(){return this.cy-this.radius;}get y2(){return this.cy+this.radius;}get height(){return 2*this.radius;}static from(t){return new N(t.cx,t.cy,t.radius);}containsPt(t,e){return P(this.cx,this.cy,t,e)<this.radius*this.radius;}distSquare(t,e){let n=P(this.cx,this.cy,t,e);if(n<this.radius*this.radius)return 0;let i=Math.sqrt(n)-this.radius;return i*i;}draw(t){t.ellipse(this.cx,this.cy,this.radius,this.radius,0,0,2*Math.PI);}}class R{constructor(t,e=0,n=0,i=0,r=0,a=10,s=10,o=new Float32Array(Math.max(0,a*s)).fill(0)){this.pixelGroup=t,this.i=e,this.j=n,this.pixelX=i,this.pixelY=r,this.width=a,this.height=s,this.area=o;}createSub(t,e){return new R(this.pixelGroup,t.x,t.y,e.x,e.y,t.width,t.height);}static fromPixelRegion(t,e){return new R(e,0,0,t.x,t.y,Math.ceil(t.width/e),Math.ceil(t.height/e));}copy(t,e){return new R(this.pixelGroup,this.scaleX(e.x),this.scaleY(e.y),e.x,e.y,t.width,t.height,t.area);}boundX(t){return t<this.i?this.i:t>=this.width?this.width-1:t;}boundY(t){return t<this.j?this.j:t>=this.height?this.height-1:t;}scaleX(t){return this.boundX(Math.floor((t-this.pixelX)/this.pixelGroup));}scaleY(t){return this.boundY(Math.floor((t-this.pixelY)/this.pixelGroup));}scale(t){let e=this.scaleX(t.x),n=this.scaleY(t.y);return new L(e,n,this.boundX(Math.ceil((t.x+t.width-this.pixelX)/this.pixelGroup))-e,this.boundY(Math.ceil((t.y+t.height-this.pixelY)/this.pixelGroup))-n);}invertScaleX(t){return Math.round(t*this.pixelGroup+this.pixelX);}invertScaleY(t){return Math.round(t*this.pixelGroup+this.pixelY);}addPadding(t,e){let n=Math.ceil(e/this.pixelGroup),i=this.boundX(t.x-n),r=this.boundY(t.y-n);return new L(i,r,this.boundX(t.x2+n)-i,this.boundY(t.y2+n)-r);}get(t,e){return t<0||e<0||t>=this.width||e>=this.height?Number.NaN:this.area[t+e*this.width];}inc(t,e,n){t<0||e<0||t>=this.width||e>=this.height||(this.area[t+e*this.width]+=n);}set(t,e,n){t<0||e<0||t>=this.width||e>=this.height||(this.area[t+e*this.width]=n);}incArea(t,e){if(t.width<=0||t.height<=0||0===e)return;let n=this.width,i=t.width,r=Math.max(0,t.i),a=Math.max(0,t.j),s=Math.min(t.i+t.width,n),o=Math.min(t.j+t.height,this.height);if(!(o<=0)&&!(s<=0)&&!(r>=n)&&!(o>=this.height))for(let l=a;l<o;l++){let a=(l-t.j)*i,o=l*n;for(let n=r;n<s;n++){let i=t.area[n-t.i+a];0!==i&&(this.area[n+o]+=e*i);}}}fill(t){this.area.fill(t);}fillArea(t,e){let n=t.x+t.y*this.width;for(let i=0;i<t.height;i++){let r=n+i*this.width;this.area.fill(e,r,r+t.width);}}fillHorizontalLine(t,e,n,i){let r=t+e*this.width;this.area.fill(i,r,r+n);}fillVerticalLine(t,e,n,i){let r=t+e*this.width;for(let t=0;t<n;t++)this.area[r+t*this.width]=i;}clear(){this.area.fill(0);}toString(){let t="";for(let e=0;e<this.height;e++){let n=e*this.width;for(let e=0;e<this.width;e++)t+=this.area[n+e].toFixed(1).padStart(6)+" ";t+="\n";}return t;}draw(t,e=!0){if(this.width<=0||this.height<=0)return;t.save(),e&&t.translate(this.pixelX,this.pixelY);let n=this.area.reduce((t,e)=>Math.min(t,e),Number.POSITIVE_INFINITY),i=this.area.reduce((t,e)=>Math.max(t,e),Number.NEGATIVE_INFINITY),r=t=>(t-n)/(i-n);t.scale(this.pixelGroup,this.pixelGroup);for(let e=0;e<this.width;e++)for(let n=0;n<this.height;n++){let i=this.area[e+n*this.width];t.fillStyle=`rgba(0, 0, 0, ${r(i)})`,t.fillRect(e,n,1,1);}t.restore();}drawThreshold(t,e,n=!0){if(!(this.width<=0)&&!(this.height<=0)){t.save(),n&&t.translate(this.pixelX,this.pixelY),t.scale(this.pixelGroup,this.pixelGroup);for(let n=0;n<this.width;n++)for(let i=0;i<this.height;i++){let r=this.area[n+i*this.width];t.fillStyle=r>e?"black":"white",t.fillRect(n,i,1,1);}t.restore();}}}function I(t,e){let n=t=>({x:t.x-e,y:t.y-e,width:t.width+2*e,height:t.height+2*e});return Array.isArray(t)?t.map(n):n(t);}function k(t,e,n){return j(Object.assign(C(t),{distSquare:(e,n)=>_(t.x1,t.y1,t.x2,t.y2,e,n)}),e,n);}function j(t,e,n){let i=I(t,n),r=e.scale(i),a=e.createSub(r,i);return function(t,e,n,i){let r=n*n;for(let a=0;a<t.height;a++)for(let s=0;s<t.width;s++){let o=i(e.invertScaleX(t.i+s),e.invertScaleY(t.j+a));if(0===o){t.set(s,a,r);continue;}if(o<r){let e=n-Math.sqrt(o);t.set(s,a,e*e);}}}(a,e,n,(e,n)=>t.distSquare(e,n)),a;}function z(t,e){return e.some(e=>e.containsPt(t.x,t.y));}function F(t,e){return e.some(e=>{var n,i,r,a;return n=e.x1,i=e.y1,1e-6>P(n,i,t.x,t.y)||(r=e.x2,a=e.y2,1e-6>P(r,a,t.x,t.y));});}function G(t,e){let n=Number.POSITIVE_INFINITY,i=null;for(let r of t){if(!D(r,e))continue;let t=function(t,e){let n=Number.POSITIVE_INFINITY,i=0;function r(t,r,a,s){let o=T(e,new w(t,r,a,s));(o=Math.abs(o-.5))>=0&&o<=1&&(i++,o<n&&(n=o));}return(r(t.x,t.y,t.x2,t.y),r(t.x,t.y,t.x,t.y2),i>1)?n:(r(t.x,t.y2,t.x2,t.y2),i>1)?n:(r(t.x2,t.y,t.x2,t.y2),0===i)?-1:n;}(r,e);t>=0&&t<n&&(i=r,n=t);}return i;}function V(t,e,n,i){let r=n.top,a=n.left,s=n.bottom,l=n.right;if(i){if(a.state===o.POINT){if(r.state===o.POINT)return{x:t.x-e,y:t.y-e};if(s.state===o.POINT)return{x:t.x-e,y:t.y2+e};let n=t.width*t.height;return t.width*((a.y-t.y+(l.y-t.y))*.5)<.5*n?a.y>l.y?{x:t.x-e,y:t.y-e}:{x:t.x2+e,y:t.y-e}:a.y<l.y?{x:t.x-e,y:t.y2+e}:{x:t.x2+e,y:t.y2+e};}if(l.state===o.POINT){if(r.state===o.POINT)return{x:t.x2+e,y:t.y-e};if(s.state===o.POINT)return{x:t.x2+e,y:t.y2+e};}let n=t.height*t.width;return t.height*((r.x-t.x+(l.x-t.x))*.5)<.5*n?r.x>s.x?{x:t.x-e,y:t.y-e}:{x:t.x-e,y:t.y2+e}:r.x<s.x?{x:t.x2+e,y:t.y-e}:{x:t.x2+e,y:t.y2+e};}if(a.state===o.POINT){if(r.state===o.POINT)return{x:t.x2+e,y:t.y2+e};if(s.state===o.POINT)return{x:t.x2+e,y:t.y-e};let n=t.height*t.width;return t.width*((a.y-t.y+(l.y-t.y))*.5)<.5*n?a.y>l.y?{x:t.x2+e,y:t.y2+e}:{x:t.x-e,y:t.y2+e}:a.y<l.y?{x:t.x2+e,y:t.y-e}:{x:t.x-e,y:t.y-e};}if(l.state===o.POINT){if(r.state===o.POINT)return{x:t.x-e,y:t.y2+e};if(s.state===o.POINT)return{x:t.x-e,y:t.y-e};}let d=t.height*t.width;return t.height*((r.x-t.x+(l.x-t.x))*.5)<.5*d?r.x>s.x?{x:t.x2+e,y:t.y2+e}:{x:t.x2+e,y:t.y-e}:r.x<s.x?{x:t.x-e,y:t.y2+e}:{x:t.x-e,y:t.y-e};}class W{constructor(t=[],e=!0){this.points=t,this.closed=e;}get(t){let e=this.points.length;return t<0?this.closed?this.get(t+e):this.points[0]:t>=e?this.closed?this.get(t-e):this.points[e-1]:this.points[t];}get length(){return this.points.length;}toString(t=1/0){let e=this.points;if(0===e.length)return"";let n="function"==typeof t?t:function(t){if(!Number.isFinite(t))return t=>t;if(0===t)return Math.round;let e=Math.pow(10,t);return t=>Math.round(t*e)/e;}(t),i="M";for(let t of e)i+=`${n(t.x)},${n(t.y)} L`;return i=i.slice(0,-1),this.closed&&(i+=" Z"),i;}draw(t){let e=this.points;if(0!==e.length){for(let n of(t.beginPath(),t.moveTo(e[0].x,e[0].y),e))t.lineTo(n.x,n.y);this.closed&&t.closePath();}}sample(t){return(function(t=8){return e=>{let n=t,i=e.length;if(n>1)for(i=Math.floor(e.length/n);i<3&&n>1;)n-=1,i=Math.floor(e.length/n);let r=[];for(let t=0,a=0;a<i;a++,t+=n)r.push(e.get(t));return new W(r);};})(t)(this);}simplify(t){return(function(t=0){return e=>{if(t<0||e.length<3)return e;let n=[],i=0,r=t*t;for(;i<e.length;){let t=i+1;for(;function(t,e,n,i){if(!(t.closed?n<t.length:n<t.length-1))return!1;let r=t.get(e),a=t.get(n+1);for(let s=e+1;s<=n;s++){let e=t.get(s);if(_(r.x,r.y,a.x,a.y,e.x,e.y)>i)return!1;}return!0;}(e,i,t,r);)t++;n.push(e.get(i)),i=t;}return new W(n);};})(t)(this);}bSplines(t){return(function(t=6){function e(t,e,n){let i=0,r=0;for(let a=-2;a<=1;a++){let s=t.get(e+a),o=function(t,e){switch(t){case -2:return(((-e+3)*e-3)*e+1)/6;case -1:return((3*e-6)*e*e+4)/6;case 0:return(((-3*e+3)*e+3)*e+1)/6;case 1:return e*e*e/6;default:throw Error("unknown error");}}(a,n);i+=o*s.x,r+=o*s.y;}return{x:i,y:r};}return n=>{if(n.length<3)return n;let i=[],r=n.closed,a=n.length+3-1+(r?0:2);i.push(e(n,2-(r?0:2),0));for(let s=2-(r?0:2);s<a;s++)for(let r=1;r<=t;r++)i.push(e(n,s,r/t));return new W(i);};})(t)(this);}apply(t){return t(this);}containsElements(t){let e=function(t){if(0===t.length)return null;let e=t[0],n=new L(e.x,e.y,0,0);for(let e of t)n.addPoint(e);return n;}(this.points);return!!e&&t.every(t=>e.containsPt(t.cx,t.cy)&&this.withinArea(t.cx,t.cy));}withinArea(t,e){if(0===this.length)return!1;let n=0,i=this.points[0],r=new w(i.x,i.y,i.x,i.y);for(let i=1;i<this.points.length;i++){let a=this.points[i];r.x1=r.x2,r.y1=r.y2,r.x2=a.x,r.y2=a.y,r.cuts(t,e)&&n++;}return r.x1=r.x2,r.y1=r.y2,r.x2=i.x,r.y2=i.y,r.cuts(t,e)&&n++,n%2==1;}}class H{constructor(t=0){this.count=0,this.arr=[],this.set=new Set,this.arr.length=t;}add(t){this.set.add(`${t.x}x${t.y}`),this.arr[this.count++]=t;}contains(t){return this.set.has(`${t.x}x${t.y}`);}isFirst(t){if(0===this.count)return!1;let e=this.arr[0];return null!=e&&e.x===t.x&&e.y===t.y;}path(){return new W(this.arr.slice(0,this.count));}clear(){this.set.clear(),this.count=0;}get(t){return this.arr[t];}get length(){return this.count;}}let K={maxRoutingIterations:100,maxMarchingIterations:20,pixelGroup:4,edgeR0:10,edgeR1:20,nodeR0:15,nodeR1:50,morphBuffer:10,threshold:1,memberInfluenceFactor:1,edgeInfluenceFactor:1,nonMemberInfluenceFactor:-.8,virtualEdges:!0};function Y(t){return null!=t&&"number"==typeof t.radius;}function $(t,e){return Y(t)===Y(e)&&(Y(t)?t.cx===e.cx&&t.cy===e.cy&&t.radius===e.radius:t.x===e.x&&t.y===e.y&&t.width===e.width&&t.height===e.height);}(s=d||(d={}))[s.MEMBERS=0]="MEMBERS",s[s.NON_MEMBERS=1]="NON_MEMBERS",s[s.EDGES=2]="EDGES";class U{constructor(t={}){this.dirty=new Set,this.members=[],this.nonMembers=[],this.virtualEdges=[],this.edges=[],this.activeRegion=new L(0,0,0,0),this.potentialArea=new R(1,0,0,0,0,0,0),this.o=Object.assign({},K,t);}pushMember(...t){if(0!==t.length)for(let e of(this.dirty.add(d.MEMBERS),t))this.members.push({raw:e,obj:Y(e)?N.from(e):L.from(e),area:null});}removeMember(t){let e=this.members.findIndex(e=>$(e.raw,t));return!(e<0)&&(this.members.splice(e,1),this.dirty.add(d.MEMBERS),!0);}removeNonMember(t){let e=this.nonMembers.findIndex(e=>$(e.raw,t));return!(e<0)&&(this.nonMembers.splice(e,1),this.dirty.add(d.NON_MEMBERS),!0);}removeEdge(t){let e=this.edges.findIndex(e=>e.obj.equals(t));return!(e<0)&&(this.edges.splice(e,1),this.dirty.add(d.NON_MEMBERS),!0);}pushNonMember(...t){if(0!==t.length)for(let e of(this.dirty.add(d.NON_MEMBERS),t))this.nonMembers.push({raw:e,obj:Y(e)?N.from(e):L.from(e),area:null});}pushEdge(...t){if(0!==t.length)for(let e of(this.dirty.add(d.EDGES),t))this.edges.push({raw:e,obj:w.from(e),area:null});}update(){let t=this.dirty.has(d.MEMBERS),e=this.dirty.has(d.NON_MEMBERS),n=this.dirty.has(d.EDGES);this.dirty.clear();let i=this.members.map(t=>t.obj);if(this.o.virtualEdges&&(t||e)){let t=function(t,e,n,i){if(0===t.length)return[];let r=function(t){if(t.length<2)return t;let e=0,n=0;return t.forEach(t=>{e+=t.cx,n+=t.cy;}),e/=t.length,n/=t.length,t.map(t=>{let i=e-t.cx,r=n-t.cy;return[t,i*i+r*r];}).sort((t,e)=>t[1]-e[1]).map(t=>t[0]);}(t);return r.map((t,a)=>(function(t,e,n,i,r){let a;let s={x:e.cx,y:e.cy},l=(a=Number.POSITIVE_INFINITY,n.reduce((e,n)=>{var i;let r=P(s.x,s.y,n.cx,n.cy);if(r>a)return e;let o=(i=new w(s.x,s.y,n.cx,n.cy),t.reduce((t,e)=>D(e,i)&&function(t,e){function n(t,n,i,r){let a=T(e,new w(t,n,i,r));return(a=Math.abs(a-.5))>=0&&a<=1?1:0;}let i=n(t.x,t.y,t.x2,t.y);return!!((i+=n(t.x,t.y,t.x,t.y2))>1||(i+=n(t.x,t.y2,t.x2,t.y2))>1)||(i+=n(t.x2,t.y,t.x2,t.y2))>0;}(e,i)?t+1:t,0));return r*(o+1)*(o+1)<a&&(e=n,a=r*(o+1)*(o+1)),e;},null));return null==l?[]:function(t,e){let n=[];for(;t.length>0;){let i=t.pop();if(0===t.length){n.push(i);break;}let r=t.pop(),a=new w(i.x1,i.y1,r.x2,r.y2);G(e,a)?(n.push(i),t.push(r)):t.push(a);}return n;}(function(t,e,n,i){let r=[],a=[];a.push(t);let s=!0;for(let t=0;t<n&&s;t++)for(s=!1;!s&&a.length>0;){let t=a.pop(),n=G(e,t),l=n?function(t,e){let n=0,i=A(t,new w(e.x,e.y,e.x2,e.y));n+=i.state===o.POINT?1:0;let r=A(t,new w(e.x,e.y,e.x,e.y2));n+=r.state===o.POINT?1:0;let a=A(t,new w(e.x,e.y2,e.x2,e.y2));n+=a.state===o.POINT?1:0;let s=A(t,new w(e.x2,e.y,e.x2,e.y2));return n+=s.state===o.POINT?1:0,{top:i,left:r,bottom:a,right:s,count:n};}(t,n):null;if(!n||!l||2!==l.count){s||r.push(t);continue;}let d=i,u=V(n,d,l,!0),c=F(u,a)||F(u,r),h=z(u,e);for(;!c&&h&&d>=1;)d/=1.5,c=F(u=V(n,d,l,!0),a)||F(u,r),h=z(u,e);if(!u||c||h||(a.push(new w(t.x1,t.y1,u.x,u.y)),a.push(new w(u.x,u.y,t.x2,t.y2)),s=!0),s)continue;let p=F(u=V(n,d=i,l,!1),a)||F(u,r);for(h=z(u,e);!p&&h&&d>=1;)d/=1.5,p=F(u=V(n,d,l,!1),a)||F(u,r),h=z(u,e);u&&!p&&(a.push(new w(t.x1,t.y1,u.x,u.y)),a.push(new w(u.x,u.y,t.x2,t.y2)),s=!0),s||r.push(t);}for(;a.length>0;)r.push(a.pop());return r;}(new w(s.x,s.y,l.cx,l.cy),t,i,r),t);})(e,t,r.slice(0,a),n,i)).flat();}(i,this.nonMembers.map(t=>t.obj),this.o.maxRoutingIterations,this.o.morphBuffer),e=new Map(this.virtualEdges.map(t=>[t.obj.toString(),t.area]));this.virtualEdges=t.map(t=>{var n;return{raw:t,obj:t,area:null!==(n=e.get(t.toString()))&&void 0!==n?n:null};}),n=!0;}let r=!1;if(t||n){let t=function(t,e){if(0===t.length)return new L(0,0,0,0);let n=L.from(t[0]);for(let e of t)n.add(e);for(let t of e)n.add(C(t));return n;}(i,this.virtualEdges.concat(this.edges).map(t=>t.obj)),e=Math.max(this.o.edgeR1,this.o.nodeR1)+this.o.morphBuffer,n=L.from(I(t,e));n.equals(this.activeRegion)||(r=!0,this.activeRegion=n);}if(r){let t=Math.ceil(this.activeRegion.width/this.o.pixelGroup),e=Math.ceil(this.activeRegion.height/this.o.pixelGroup);this.activeRegion.x!==this.potentialArea.pixelX||this.activeRegion.y!==this.potentialArea.pixelY?(this.potentialArea=R.fromPixelRegion(this.activeRegion,this.o.pixelGroup),this.members.forEach(t=>t.area=null),this.nonMembers.forEach(t=>t.area=null),this.edges.forEach(t=>t.area=null),this.virtualEdges.forEach(t=>t.area=null)):(t!==this.potentialArea.width||e!==this.potentialArea.height)&&(this.potentialArea=R.fromPixelRegion(this.activeRegion,this.o.pixelGroup));}let a=new Map,s=t=>{if(t.area){let e=`${t.obj.width}x${t.obj.height}x${t.obj instanceof L?"R":"C"}`;a.set(e,t.area);}},l=t=>{if(t.area)return;let e=`${t.obj.width}x${t.obj.height}x${t.obj instanceof L?"R":"C"}`;if(a.has(e)){let n=a.get(e);t.area=this.potentialArea.copy(n,{x:t.obj.x-this.o.nodeR1,y:t.obj.y-this.o.nodeR1});return;}let n=t.obj instanceof L?function(t,e,n){let i=e.scale(t),r=e.addPadding(i,n),a=e.createSub(r,{x:t.x-n,y:t.y-n}),s=i.x-r.x,o=i.y-r.y,l=r.x2-i.x2,d=r.y2-i.y2,u=r.width-s-l,c=r.height-o-d,h=n*n;a.fillArea({x:s,y:o,width:u+1,height:c+1},h);let p=[0],f=Math.max(o,s,l,d);{let r=e.invertScaleX(i.x+i.width/2);for(let a=1;a<f;a++){let s=e.invertScaleY(i.y-a),o=t.distSquare(r,s);if(o<h){let t=n-Math.sqrt(o);p.push(t*t);}else break;}}let g=[],y=Math.max(s,l),m=Math.max(o,l);for(let r=1;r<y;r++){let a=e.invertScaleX(i.x-r),s=[];for(let r=1;r<m;r++){let o=e.invertScaleY(i.y-r),l=t.distSquare(a,o);if(l<h){let t=n-Math.sqrt(l);s.push(t*t);}else s.push(0);}g.push(s);}for(let t=1;t<Math.min(o,p.length);t++){let e=p[t];a.fillHorizontalLine(s,o-t,u+1,e);}for(let t=1;t<Math.min(d,p.length);t++){let e=p[t];a.fillHorizontalLine(s,o+c+t,u+1,e);}for(let t=1;t<Math.min(s,p.length);t++){let e=p[t];a.fillVerticalLine(s-t,o,c+1,e);}for(let t=1;t<Math.min(d,p.length);t++){let e=p[t];a.fillVerticalLine(s+u+t,o,c+1,e);}for(let t=1;t<s;t++){let e=g[t-1],n=s-t;for(let t=1;t<o;t++)a.set(n,o-t,e[t-1]);for(let t=1;t<d;t++)a.set(n,o+c+t,e[t-1]);}for(let t=1;t<l;t++){let e=g[t-1],n=s+u+t;for(let t=1;t<o;t++)a.set(n,o-t,e[t-1]);for(let t=1;t<d;t++)a.set(n,o+c+t,e[t-1]);}return a;}(t.obj,this.potentialArea,this.o.nodeR1):j(t.obj,this.potentialArea,this.o.nodeR1);t.area=n,a.set(e,n);};this.members.forEach(s),this.nonMembers.forEach(s),this.members.forEach(l),this.nonMembers.forEach(t=>{this.activeRegion.intersects(t.obj)?l(t):t.area=null;}),this.edges.forEach(t=>{t.area||(t.area=k(t.obj,this.potentialArea,this.o.edgeR1));}),this.virtualEdges.forEach(t=>{t.area||(t.area=k(t.obj,this.potentialArea,this.o.edgeR1));});}drawMembers(t){for(let e of this.members)e.obj.draw(t);}drawNonMembers(t){for(let e of this.nonMembers)e.obj.draw(t);}drawEdges(t){for(let e of this.edges)e.obj.draw(t);}drawPotentialArea(t,e=!0){this.potentialArea.draw(t,e);}compute(){if(0===this.members.length)return new W([]);this.dirty.size>0&&this.update();let{o:t,potentialArea:e}=this,n=this.members.map(t=>t.area),i=this.virtualEdges.concat(this.edges).map(t=>t.area),r=this.nonMembers.filter(t=>null!=t.area).map(t=>t.area),a=this.members.map(t=>t.obj);return function(t,e,n,i,r,a={}){let s=Object.assign({},K,a),o=s.threshold,l=s.memberInfluenceFactor,d=s.edgeInfluenceFactor,u=s.nonMemberInfluenceFactor,c=(s.nodeR0-s.nodeR1)*(s.nodeR0-s.nodeR1),h=(s.edgeR0-s.edgeR1)*(s.edgeR0-s.edgeR1);for(let a=0;a<s.maxMarchingIterations;a++){if(t.clear(),0!==l){let n=l/c;for(let i of e)t.incArea(i,n);}if(0!==d){let e=d/h;for(let i of n)t.incArea(i,e);}if(0!==u){let e=u/c;for(let n of i)t.incArea(n,e);}let p=function(t,e){let n=new H((Math.floor(t.width)+Math.floor(t.height))*2);function i(n,i,r,a){let s=t.get(n,i);return Number.isNaN(s)?Number.NaN:s>e?r+a:r;}function r(t,e){let n=0;return(n=i(t,e,0,1),n=i(t+1,e,n,2),n=i(t,e+1,n,4),Number.isNaN(n=i(t+1,e+1,n,8)))?-1:n;}let a=1;for(let i=0;i<t.width;i++)for(let s=0;s<t.height;s++){if(t.get(i,s)<=e)continue;let o=r(i,s);if(!(o<0)&&15!==o&&function(e,i){let s=e,o=i,l=t.invertScaleX(s),d=t.invertScaleY(o);for(let e=0;e<t.width*t.height;e++){let e={x:l,y:d};if(n.contains(e)){if(n.isFirst(e))break;}else n.add(e);let i=r(s,o);switch(i){case -1:return!0;case 0:case 3:case 2:case 7:a=2;break;case 12:case 14:case 4:a=3;break;case 6:a=0===a?3:2;break;case 1:case 13:case 5:a=0;break;case 9:a=2===a?0:1;break;case 10:case 8:case 11:a=1;break;default:return console.warn("Marching squares invalid state: "+i),!0;}switch(a){case 0:o--,d-=t.pixelGroup;break;case 1:o++,d+=t.pixelGroup;break;case 3:s--,l-=t.pixelGroup;break;case 2:s++,l+=t.pixelGroup;break;default:return console.warn("Marching squares invalid state: "+i),!0;}}return!0;}(i,s))return n.path();}return null;}(t,o);if(p&&r(p))return p;if(o*=.95,a<=.5*s.maxMarchingIterations)l*=1.2,d*=1.2;else if(0!==u&&i.length>0)u*=.8;else break;}return new W([]);}(e,n,i,r,t=>t.containsElements(a),t);}}var X=n("d9033aa4"),Z=n("94ae1aef"),q=n("bf55e093"),Q=n("afd4cd55"),J=n("8a2f2f0b"),tt=n("a741c567"),te=n("e492a2d3"),tn=this&&this.__rest||function(t,e){var n={};for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&0>e.indexOf(i)&&(n[i]=t[i]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols)for(var r=0,i=Object.getOwnPropertySymbols(t);r<i.length;r++)0>e.indexOf(i[r])&&Object.prototype.propertyIsEnumerable.call(t,i[r])&&(n[i[r]]=t[i[r]]);return n;};class ti extends f{constructor(t,e){super(t,(0,v.default)({},ti.defaultOptions,e)),this.members=new Map,this.avoidMembers=new Map,this.bubbleSetOptions={},this.drawBubbleSets=()=>{let{style:t,bubbleSetOptions:e}=this.parseOptions();(0,x.default)(this.bubbleSetOptions,e)||this.init(),this.bubbleSetOptions=Object.assign({},e);let n=Object.assign(Object.assign({},t),{d:this.getPath()});this.shape?this.shape.update(n):(this.shape=new Z.Contour({style:n}),this.context.canvas.appendChild(this.shape));},this.updateBubbleSetsPath=t=>{if(!this.shape)return;let e=(0,J.idOf)(t.data);[...this.options.members,...this.options.avoidMembers].includes(e)&&this.shape.update(Object.assign(Object.assign({},this.parseOptions().style),{d:this.getPath(e)}));},this.getPath=t=>{let{graph:e}=this.context,n=this.options.members,i=[...this.members.keys()],r=this.options.avoidMembers,a=[...this.avoidMembers.keys()];if(!t&&(0,x.default)(n,i)&&(0,x.default)(r,a))return this.path;let{enter:s=[],exit:o=[]}=(0,Q.arrayDiff)(i,n,t=>t),{enter:l=[],exit:d=[]}=(0,Q.arrayDiff)(a,r,t=>t);t&&(o.push(t),s.push(t));let u=(t,n,i)=>{t.forEach(t=>{let r=i?this.members:this.avoidMembers;if(n){let n;"edge"===e.getElementType(t)?([n]=ta(e,t),this.bubbleSets.pushEdge(n)):([n]=tr(e,t),this.bubbleSets[i?"pushMember":"pushNonMember"](n)),r.set(t,n);}else{let n=r.get(t);n&&("edge"===e.getElementType(t)?this.bubbleSets.removeEdge(n):this.bubbleSets[i?"removeMember":"removeNonMember"](n),r.delete(t));}});};u(o,!1,!0),u(s,!0,!0),u(d,!1,!1),u(l,!0,!1);let c=this.bubbleSets.compute().sample(8).simplify(0).bSplines().simplify(0);return this.path=(0,tt.getClosedSpline)(c.points.map(te.parsePoint)),this.path;},this.bindEvents(),this.bubbleSets=new U(this.options);}bindEvents(){this.context.graph.on(X.GraphEvent.AFTER_RENDER,this.drawBubbleSets),this.context.graph.on(X.GraphEvent.AFTER_ELEMENT_UPDATE,this.updateBubbleSetsPath);}init(){this.bubbleSets=new U(this.options),this.members=new Map,this.avoidMembers=new Map;}parseOptions(){let t=this.options,{type:e,key:n,members:i,avoidMembers:r}=t,a=tn(t,["type","key","members","avoidMembers"]);return Object.assign({type:e,key:n,members:i,avoidMembers:r},Object.keys(a).reduce((t,e)=>(e in K?t.bubbleSetOptions[e]=a[e]:t.style[e]=a[e],t),{style:{},bubbleSetOptions:{}}));}addMember(t){let e=Array.isArray(t)?t:[t];e.some(t=>this.options.avoidMembers.includes(t))&&(this.options.avoidMembers=this.options.avoidMembers.filter(t=>!e.includes(t))),this.options.members=[...new Set([...this.options.members,...e])],this.drawBubbleSets();}removeMember(t){let e=Array.isArray(t)?t:[t];this.options.members=this.options.members.filter(t=>!e.includes(t)),this.drawBubbleSets();}updateMember(t){this.options.members=(0,S.default)(t)?t(this.options.members):t,this.drawBubbleSets();}getMember(){return this.options.members;}addAvoidMember(t){let e=Array.isArray(t)?t:[t];e.some(t=>this.options.members.includes(t))&&(this.options.members=this.options.members.filter(t=>!e.includes(t))),this.options.avoidMembers=[...new Set([...this.options.avoidMembers,...e])],this.drawBubbleSets();}removeAvoidMember(t){let e=Array.isArray(t)?t:[t];this.options.avoidMembers.some(t=>e.includes(t))&&(this.options.avoidMembers=this.options.avoidMembers.filter(t=>!e.includes(t)),this.drawBubbleSets());}updateAvoidMember(t){this.options.avoidMembers=Array.isArray(t)?t:[t],this.drawBubbleSets();}getAvoidMember(){return this.options.avoidMembers;}destroy(){this.context.graph.off(X.GraphEvent.AFTER_RENDER,this.drawBubbleSets),this.context.graph.off(X.GraphEvent.AFTER_ELEMENT_UPDATE,this.updateBubbleSetsPath),this.shape.destroy(),super.destroy();}}ti.defaultOptions=Object.assign({members:[],avoidMembers:[],fill:"lightblue",fillOpacity:.2,stroke:"blue",strokeOpacity:.2},K);let tr=(t,e)=>(Array.isArray(e)?e:[e]).map(e=>{let n=t.getElementRenderBounds(e);return new L(n.min[0],n.min[1],(0,q.getBBoxWidth)(n),(0,q.getBBoxHeight)(n));}),ta=(t,e)=>(Array.isArray(e)?e:[e]).map(e=>{let n=t.getEdgeData(e),i=t.getElementPosition(n.source),r=t.getElementPosition(n.target);return w.from({x1:i[0],y1:i[1],x2:r[0],y2:r[1]});}),ts=`
  .g6-contextmenu {
    font-size: 12px;
    background-color: rgba(255, 255, 255, 0.96);
    border-radius: 4px;
    overflow: hidden;
    box-shadow: rgba(0, 0, 0, 0.12) 0px 6px 12px 0px;
    transition: visibility 0.2s cubic-bezier(0.23, 1, 0.32, 1) 0s, left 0.4s cubic-bezier(0.23, 1, 0.32, 1) 0s, top 0.4s cubic-bezier(0.23, 1, 0.32, 1) 0s;
  }

  .g6-contextmenu-ul {
    max-width: 256px;
    min-width: 96px;
    list-style: none;
    padding: 0;
    margin: 0;
  }

  .g6-contextmenu-li {
    padding: 8px 12px;
    cursor: pointer;
    user-select: none;
  }

  .g6-contextmenu-li:hover {
    background-color: #f5f5f5;
    cursor: pointer;
  }
`;var to=this&&this.__awaiter||function(t,e,n,i){return new(n||(n=Promise))(function(r,a){function s(t){try{l(i.next(t));}catch(t){a(t);}}function o(t){try{l(i.throw(t));}catch(t){a(t);}}function l(t){var e;t.done?r(t.value):((e=t.value)instanceof n?e:new n(function(t){t(e);})).then(s,o);}l((i=i.apply(t,e||[])).next());});};class tl extends f{constructor(t,e){super(t,Object.assign({},tl.defaultOptions,e)),this.targetElement=null,this.onTriggerEvent=t=>{var e;null===(e=t.preventDefault)||void 0===e||e.call(t),this.show(t);},this.onMenuItemClick=t=>{let{onClick:e,trigger:n}=this.options;if(t.target instanceof HTMLElement&&t.target.className.includes("g6-contextmenu-li")){let n=t.target.getAttribute("value");null==e||e(n,t.target,this.targetElement),this.hide();}"click"!==n&&this.hide();},this.initElement(),this.update(e);}initElement(){this.$element=(0,g.createPluginContainer)("contextmenu",!1,{zIndex:"99"});let{className:t}=this.options;t&&this.$element.classList.add(t),this.context.canvas.getContainer().appendChild(this.$element),(0,g.insertDOM)("g6-contextmenu-css","style",{},ts,document.head);}show(t){return to(this,void 0,void 0,function*(){let{enable:e,offset:n}=this.options;if("function"==typeof e&&!e(t)||!e){this.hide();return;}let i=yield this.getDOMContent(t);i instanceof HTMLElement?(this.$element.innerHTML="",this.$element.appendChild(i)):this.$element.innerHTML=i;let r=this.context.graph.getCanvas().getContainer().getBoundingClientRect();this.$element.style.left=`${t.client.x-r.left+n[0]}px`,this.$element.style.top=`${t.client.y-r.top+n[1]}px`,this.$element.style.display="block",this.targetElement=t.target;});}hide(){this.$element.style.display="none",this.targetElement=null;}update(t){this.unbindEvents(),super.update(t),this.bindEvents();}destroy(){this.unbindEvents(),super.destroy(),this.$element.remove();}getDOMContent(t){return to(this,void 0,void 0,function*(){let{getContent:e,getItems:n}=this.options;if(n){var i;return i=yield n(t),`
    <ul class="g6-contextmenu-ul">
      ${i.map(t=>`<li  class="g6-contextmenu-li" value="${t.value}">${t.name}</li>`).join("")}
    </ul>
  `;}return yield e(t);});}bindEvents(){let{graph:t}=this.context,{trigger:e}=this.options;t.on(`canvas:${e}`,this.onTriggerEvent),t.on(`node:${e}`,this.onTriggerEvent),t.on(`edge:${e}`,this.onTriggerEvent),t.on(`combo:${e}`,this.onTriggerEvent),document.addEventListener("click",this.onMenuItemClick);}unbindEvents(){let{graph:t}=this.context,{trigger:e}=this.options;t.off(`canvas:${e}`,this.onTriggerEvent),t.off(`node:${e}`,this.onTriggerEvent),t.off(`edge:${e}`,this.onTriggerEvent),t.off(`combo:${e}`,this.onTriggerEvent),document.removeEventListener("click",this.onMenuItemClick);}}tl.defaultOptions={trigger:"contextmenu",offset:[4,4],loadingContent:'<div class="g6-contextmenu-loading">Loading...</div>',getContent:()=>"It is a empty context menu.",enable:()=>!0};var td=n("7a2084f1"),tu=u._(td),tc=n("b5f0d953"),th=n("2be3380d"),tp=n("6d5a1ab5");class tf extends f{constructor(t,e){super(t,Object.assign({},tf.defaultOptions,e)),this.edgeBundles={},this.edgePoints={},this.onBundle=()=>{let{model:t,element:e}=this.context,n=t.getEdgeData();this.divideEdges(this.options.divisions);let{cycles:i,iterRate:r,divRate:a}=this.options,{lambda:s,divisions:o,iterations:l}=this.options;for(let t=0;t<i;t++){for(let t=0;t<l;t++){let t={};n.forEach(e=>{var n;if(e.source===e.target)return;let i=(0,J.idOf)(e);t[i]=this.getEdgeForces(e,o,s);for(let e=0;e<o+1;e++)(n=this.edgePoints)[i]||(n[i]=[]),this.edgePoints[i][e]=(0,tp.add)(this.edgePoints[i][e],t[i][e]);});}s/=2,o*=a,l*=r,this.divideEdges(o);}n.forEach(t=>{let n=(0,J.idOf)(t),i=e.getElement(n);null==i||i.update({d:(0,tc.getPolylinePath)(this.edgePoints[n])});});},this.bindEvents();}get nodeMap(){return Object.fromEntries(this.context.model.getNodeData().map(t=>[(0,J.idOf)(t),(0,tp.toVector2)((0,th.positionOf)(t))]));}divideEdges(t){this.context.model.getEdgeData().forEach(e=>{var n;let i=(0,J.idOf)(e);(n=this.edgePoints)[i]||(n[i]=[]);let r=this.nodeMap[e.source],a=this.nodeMap[e.target];if(1===t)this.edgePoints[i].push(r),this.edgePoints[i].push((0,tp.divide)((0,tp.add)(r,a),2)),this.edgePoints[i].push(a);else{let e=(0===this.edgePoints[i].length?(0,tp.distance)(r,a):tx(this.edgePoints[i]))/(t+1),n=e,s=[r];for(let t=1;t<this.edgePoints[i].length;t++){let r=this.edgePoints[i][t-1],a=this.edgePoints[i][t],o=(0,tp.distance)(a,r);for(;o>n;){let t=n/o,i=(0,tp.add)(r,(0,tp.multiply)((0,tp.subtract)(a,r),t));s.push(i),o-=n,n=e;}n-=o;}s.push(a),this.edgePoints[i]=s;}});}getVectorPosition(t){let e=this.nodeMap[t.source],n=this.nodeMap[t.target],[i,r]=(0,tp.subtract)(n,e),a=(0,tp.distance)(e,n);return{source:e,target:n,vx:i,vy:r,length:a};}measureEdgeCompatibility(t,e){let n=this.getVectorPosition(t),i=this.getVectorPosition(e),r=tg(n,i);return r*ty(n,i)*tm(n,i)*tE(n,i);}getEdgeBundles(){let t={},e=this.options.bundleThreshold,n=this.context.model.getEdgeData();return n.forEach((i,r)=>{n.forEach((n,a)=>{var s,o;!(a<=r)&&this.measureEdgeCompatibility(i,n)>=e&&(t[s=(0,J.idOf)(i)]||(t[s]=[]),t[(0,J.idOf)(i)].push(n),t[o=(0,J.idOf)(n)]||(t[o]=[]),t[(0,J.idOf)(n)].push(i));});}),t;}getSpringForce(t,e){let{pre:n,cur:i,next:r}=t;return(0,tp.multiply)((0,tp.subtract)((0,tp.add)(n,r),(0,tp.multiply)(i,2)),e);}getElectrostaticForce(t,e){(0,tu.default)(this.edgeBundles)&&(this.edgeBundles=this.getEdgeBundles());let n=this.edgeBundles[(0,J.idOf)(e)],i=[0,0];return null==n||n.forEach(n=>{let r=this.edgePoints[(0,J.idOf)(n)][t],a=this.edgePoints[(0,J.idOf)(e)][t],s=(0,tp.subtract)(r,a),o=(0,tp.distance)(r,a);i=(0,tp.add)(i,(0,tp.multiply)(s,1/o));}),i;}getEdgeForces(t,e,n){let i=this.nodeMap[t.source],r=this.nodeMap[t.target],a=this.options.K/((0,tp.distance)(i,r)*(e+1)),s=[[0,0]],o=(0,J.idOf)(t);for(let i=1;i<e;i++){let e=this.getSpringForce({pre:this.edgePoints[o][i-1],cur:this.edgePoints[o][i],next:this.edgePoints[o][i+1]||[0,0]},a),r=this.getElectrostaticForce(i,t);s.push((0,tp.multiply)((0,tp.add)(e,r),n));}return s.push([0,0]),s;}bindEvents(){let{graph:t}=this.context;t.on(X.GraphEvent.AFTER_RENDER,this.onBundle);}unbindEvents(){let{graph:t}=this.context;t.off(X.GraphEvent.AFTER_RENDER,this.onBundle);}destroy(){this.unbindEvents(),super.destroy();}}tf.defaultOptions={K:.1,lambda:.1,divisions:1,divRate:2,cycles:6,iterations:90,iterRate:2/3,bundleThreshold:.6};let tg=(t,e)=>Math.abs((0,tp.dot)([t.vx,t.vy],[e.vx,e.vy])/(t.length*e.length)),ty=(t,e)=>{let n=(t.length+e.length)/2;return 2/(n/Math.min(t.length,e.length)+Math.max(t.length,e.length)/n);},tm=(t,e)=>{let n=(t.length+e.length)/2,i=(0,tp.divide)((0,tp.add)(t.source,t.target),2),r=(0,tp.divide)((0,tp.add)(e.source,e.target),2);return n/(n+(0,tp.distance)(i,r));},tb=(t,e)=>{if(e.source[0]===e.target[0])return[e.source[0],t[1]];if(e.source[1]===e.target[1])return[t[0],e.source[1]];let n=(e.source[1]-e.target[1])/(e.source[0]-e.target[0]),i=(n*n*e.source[0]+n*(t[1]-e.source[1])+t[0])/(n*n+1),r=n*(i-e.source[0])+e.source[1];return[i,r];},tv=(t,e)=>{let n=tb(e.source,t),i=tb(e.target,t),r=(0,tp.divide)((0,tp.add)(n,i),2),a=(0,tp.divide)((0,tp.add)(t.source,t.target),2);return 0===(0,tp.distance)(n,i)?0:Math.max(0,1-2*(0,tp.distance)(a,r)/(0,tp.distance)(n,i));},tE=(t,e)=>Math.min(tv(t,e),tv(e,t)),tx=t=>{let e=0;for(let n=1;n<t.length;n++)e+=(0,tp.distance)(t[n],t[n-1]);return e;};var tO=n("52f60d29");let tS={fill:"#fff",fillOpacity:1,lineWidth:1,stroke:"#000",strokeOpacity:.8,zIndex:-1/0};class t_ extends f{constructor(t,e){super(t,Object.assign({},t_.defaultOptions,e)),this.shapes=new Map,this.r=this.options.r,this.onEdgeFilter=t=>{if("drag"===this.options.trigger&&this.isLensOn)return;let e=(0,te.parsePoint)(t.canvas);this.renderLens(e),this.renderFocusElements();},this.renderLens=t=>{let e=Object.assign({},tS,this.options.style);this.isLensOn||(this.lens=new tO.Circle({style:e}),this.canvas.appendChild(this.lens)),Object.assign(e,(0,te.toPointObject)(t),{size:2*this.r}),this.lens.update(e);},this.getFilterData=()=>{let{filter:t}=this.options,{model:e}=this.context,n=e.getData();if(!t)return n;let{nodes:i,edges:r,combos:a}=n;return{nodes:i.filter(e=>t((0,J.idOf)(e),"node")),edges:r.filter(e=>t((0,J.idOf)(e),"edge")),combos:a.filter(e=>t((0,J.idOf)(e),"combo"))};},this.getFocusElements=t=>{let{nodes:e,edges:n}=this.getFilterData(),i=e.filter(e=>(0,tp.distance)((0,th.positionOf)(e),t)<this.r),r=i.map(t=>(0,J.idOf)(t));return{nodes:i,edges:n.filter(t=>{let{source:e,target:n}=t,i=r.includes(e),a=r.includes(n);switch(this.options.nodeType){case"both":return i&&a;case"either":return i!==a;case"source":return i&&!a;case"target":return!i&&a;default:return!1;}})};},this.renderFocusElements=()=>{let{element:t,graph:e}=this.context;if(!this.isLensOn)return;let n=this.lens.getCenter(),{nodes:i,edges:r}=this.getFocusElements(n),a=new Set,s=n=>{let i=(0,J.idOf)(n);a.add(i);let r=t.getElement(i);if(!r)return;let s=this.shapes.get(i)||r.cloneNode();s.setPosition(r.getPosition()),s.id=r.id,this.shapes.has(i)?Object.entries(r.attributes).forEach(([t,e])=>{s.style[t]!==e&&(s.style[t]=e);}):(this.canvas.appendChild(s),this.shapes.set(i,s));let o=e.getElementType(i),l=this.getElementStyle(o,n);s.update(l);};i.forEach(s),r.forEach(s),this.shapes.forEach((t,e)=>{a.has(e)||(t.destroy(),this.shapes.delete(e));});},this.scaleRByWheel=t=>{var e;this.options.preventDefault&&t.preventDefault();let{clientX:n,clientY:i,deltaX:r,deltaY:a}=t,{graph:s,canvas:o}=this.context,l=s.getCanvasByClient([n,i]),d=null===(e=this.lens)||void 0===e?void 0:e.getCenter();if(!this.isLensOn||(0,tp.distance)(l,d)>this.r)return;let{maxR:u,minR:c}=this.options,h=Math.min(...o.getSize())/2;this.r=Math.max(c||0,Math.min(u||h,this.r*(r+a>0?1/.95:.95))),this.renderLens(d),this.renderFocusElements();},this.isLensDragging=!1,this.onDragStart=t=>{var e;let n=(0,te.parsePoint)(t.canvas),i=null===(e=this.lens)||void 0===e?void 0:e.getCenter();!this.isLensOn||(0,tp.distance)(n,i)>this.r||(this.isLensDragging=!0);},this.onDrag=t=>{if(!this.isLensDragging)return;let e=(0,te.parsePoint)(t.canvas);this.renderLens(e),this.renderFocusElements();},this.onDragEnd=()=>{this.isLensDragging=!1;},this.bindEvents();}get canvas(){return this.context.canvas.getLayer("transient");}get isLensOn(){return this.lens&&!this.lens.destroyed;}getElementStyle(t,e){let n="node"===t?this.options.nodeStyle:this.options.edgeStyle;return"function"==typeof n?n(e):n;}get graphDom(){return this.context.graph.getCanvas().getContextService().getDomElement();}bindEvents(){var t;let{graph:e}=this.context,{trigger:n,scaleRBy:i}=this.options,r=e.getCanvas().getLayer();["click","drag"].includes(n)&&r.addEventListener(X.CommonEvent.CLICK,this.onEdgeFilter),"pointermove"===n?r.addEventListener(X.CommonEvent.POINTER_MOVE,this.onEdgeFilter):"drag"===n&&(r.addEventListener(X.CommonEvent.DRAG_START,this.onDragStart),r.addEventListener(X.CommonEvent.DRAG,this.onDrag),r.addEventListener(X.CommonEvent.DRAG_END,this.onDragEnd)),"wheel"===i&&(null===(t=this.graphDom)||void 0===t||t.addEventListener(X.CommonEvent.WHEEL,this.scaleRByWheel,{passive:!1}));}unbindEvents(){var t;let{graph:e}=this.context,{trigger:n,scaleRBy:i}=this.options,r=e.getCanvas().getLayer();["click","drag"].includes(n)&&r.removeEventListener(X.CommonEvent.CLICK,this.onEdgeFilter),"pointermove"===n?r.removeEventListener(X.CommonEvent.POINTER_MOVE,this.onEdgeFilter):"drag"===n&&(r.removeEventListener(X.CommonEvent.DRAG_START,this.onDragStart),r.removeEventListener(X.CommonEvent.DRAG,this.onDrag),r.removeEventListener(X.CommonEvent.DRAG_END,this.onDragEnd)),"wheel"===i&&(null===(t=this.graphDom)||void 0===t||t.removeEventListener(X.CommonEvent.WHEEL,this.scaleRByWheel));}update(t){var e;this.unbindEvents(),super.update(t),this.r=null!==(e=t.r)&&void 0!==e?e:this.r,this.bindEvents();}destroy(){this.unbindEvents(),this.isLensOn&&this.lens.destroy(),this.shapes.forEach((t,e)=>{t.destroy(),this.shapes.delete(e);}),super.destroy();}}t_.defaultOptions={trigger:"pointermove",r:60,nodeType:"both",filter:()=>!0,style:{lineWidth:2},nodeStyle:{label:!1},edgeStyle:{label:!0},scaleRBy:"wheel",preventDefault:!0};var tP=n("0c915bb9"),tC=u._(tP);let tw={fill:"#ccc",fillOpacity:.1,lineWidth:2,stroke:"#000",strokeOpacity:.8,labelFontSize:12};class tM extends f{constructor(t,e){super(t,Object.assign({},tM.defaultOptions,e)),this.r=this.options.r,this.d=this.options.d,this.onCreateFisheye=t=>{if("drag"===this.options.trigger&&this.isLensOn)return;let e=(0,te.parsePoint)(t.canvas);this.onMagnify(e);},this.onMagnify=t=>{t.some(isNaN)||(this.renderLens(t),this.renderFocusElements());},this.renderLens=t=>{let e=Object.assign({},tw,this.options.style);this.isLensOn||(this.lens=new tO.Circle({style:e}),this.canvas.appendChild(this.lens)),Object.assign(e,(0,te.toPointObject)(t),{size:2*this.r,label:this.options.showDPercent,labelText:this.getDPercent()}),this.lens.update(e);},this.getDPercent=()=>{let{minD:t,maxD:e}=this.options,n=Math.round((this.d-t)/(e-t)*100);return`${n}%`;},this.prevMagnifiedStyleMap=new Map,this.prevOriginStyleMap=new Map,this.renderFocusElements=()=>{if(!this.isLensOn)return;let{graph:t}=this.context,e=this.lens.getCenter(),n=(this.d+1)*this.r,i=new Map,r=new Map;t.getNodeData().forEach(a=>{let s=(0,th.positionOf)(a),o=(0,tp.distance)(s,e);if(o>this.r)return;let l=n*o/(this.d*o+this.r),[d,u]=s,[c,h]=e,p=(0,J.idOf)(a),f=this.getNodeStyle(a),g=(0,tC.default)(t.getElementRenderStyle(p),Object.keys(f));i.set(p,Object.assign(Object.assign({},(0,te.toPointObject)([c+(d-c)/o*l,h+(u-h)/o*l])),f)),r.set(p,Object.assign(Object.assign({},(0,te.toPointObject)(s)),g));}),this.updateStyle(i,r);},this.getNodeStyle=t=>{let{nodeStyle:e}=this.options;return"function"==typeof e?e(t):e;},this.updateStyle=(t,e)=>{let{graph:n,element:i}=this.context,{enter:r,exit:a,keep:s}=(0,Q.arrayDiff)(Array.from(this.prevMagnifiedStyleMap.keys()),Array.from(t.keys()),t=>t),o=new Set,l=(t,e)=>{let r=i.getElement(t);null==r||r.update(e),n.getRelatedEdgesData(t).forEach(t=>{o.add((0,J.idOf)(t));});};[...r,...s].forEach(e=>{l(e,t.get(e));}),a.forEach(t=>{l(t,this.prevOriginStyleMap.get(t)),this.prevOriginStyleMap.delete(t);}),o.forEach(t=>{let e=i.getElement(t);null==e||e.update({});}),this.prevMagnifiedStyleMap=t,e.forEach((t,e)=>{this.prevOriginStyleMap.has(e)||this.prevOriginStyleMap.set(e,t);});},this.isWheelValid=t=>{if(this.options.preventDefault&&t.preventDefault(),!this.isLensOn)return!1;let{clientX:e,clientY:n}=t,i=this.context.graph.getCanvasByClient([e,n]),r=this.lens.getCenter();return!((0,tp.distance)(i,r)>this.r);},this.scaleR=t=>{let{maxR:e,minR:n}=this.options,i=Math.min(...this.context.canvas.getSize())/2;this.r=Math.max(n||0,Math.min(e||i,this.r*(t?1/.95:.95)));},this.scaleD=t=>{let{maxD:e,minD:n}=this.options,i=t?this.d+.1:this.d-.1;this.d=Math.max(n,Math.min(e,i));},this.scaleRByWheel=t=>{if(!this.isWheelValid(t))return;let{deltaX:e,deltaY:n}=t;this.scaleR(e+n>0);let i=this.lens.getCenter();this.onMagnify(i);},this.scaleDByWheel=t=>{if(!this.isWheelValid(t))return;let{deltaX:e,deltaY:n}=t;this.scaleD(e+n>0);let i=this.lens.getCenter();this.onMagnify(i);},this.isDragValid=t=>{if(this.options.preventDefault&&t.preventDefault(),!this.isLensOn)return!1;let e=(0,te.parsePoint)(t.canvas),n=this.lens.getCenter();return!((0,tp.distance)(e,n)>this.r);},this.isLensDragging=!1,this.onDragStart=t=>{this.isDragValid(t)&&(this.isLensDragging=!0);},this.onDrag=t=>{if(!this.isLensDragging)return;let e=(0,te.parsePoint)(t.canvas);this.onMagnify(e);},this.onDragEnd=()=>{this.isLensDragging=!1;},this.scaleRByDrag=t=>{if(!this.isLensDragging)return;let{dx:e,dy:n}=t;this.scaleR(e-n>0);let i=this.lens.getCenter();this.onMagnify(i);},this.scaleDByDrag=t=>{if(!this.isLensDragging)return;let{dx:e,dy:n}=t;this.scaleD(e-n>0);let i=this.lens.getCenter();this.onMagnify(i);},this.bindEvents();}get canvas(){return this.context.canvas.getLayer("transient");}get isLensOn(){return this.lens&&!this.lens.destroyed;}get graphDom(){return this.context.graph.getCanvas().getContextService().getDomElement();}bindEvents(){var t;let{graph:e}=this.context,{trigger:n,scaleRBy:i,scaleDBy:r}=this.options,a=e.getCanvas().getLayer();if(["click","drag"].includes(n)&&a.addEventListener(X.CommonEvent.CLICK,this.onCreateFisheye),"pointermove"===n&&a.addEventListener(X.CommonEvent.POINTER_MOVE,this.onCreateFisheye),"drag"===n||"drag"===i||"drag"===r){a.addEventListener(X.CommonEvent.DRAG_START,this.onDragStart),a.addEventListener(X.CommonEvent.DRAG_END,this.onDragEnd);let t="drag"===n?this.onDrag:"drag"===i?this.scaleRByDrag:this.scaleDByDrag;a.addEventListener(X.CommonEvent.DRAG,t);}if("wheel"===i||"wheel"===r){let e="wheel"===i?this.scaleRByWheel:this.scaleDByWheel;null===(t=this.graphDom)||void 0===t||t.addEventListener(X.CommonEvent.WHEEL,e,{passive:!1});}}unbindEvents(){var t;let{graph:e}=this.context,{trigger:n,scaleRBy:i,scaleDBy:r}=this.options,a=e.getCanvas().getLayer();if(["click","drag"].includes(n)&&a.removeEventListener(X.CommonEvent.CLICK,this.onCreateFisheye),"pointermove"===n&&a.removeEventListener(X.CommonEvent.POINTER_MOVE,this.onCreateFisheye),"drag"===n||"drag"===i||"drag"===r){a.removeEventListener(X.CommonEvent.DRAG_START,this.onDragStart),a.removeEventListener(X.CommonEvent.DRAG_END,this.onDragEnd);let t="drag"===n?this.onDrag:"drag"===i?this.scaleRByDrag:this.scaleDByDrag;a.removeEventListener(X.CommonEvent.DRAG,t);}if("wheel"===i||"wheel"===r){let e="wheel"===i?this.scaleRByWheel:this.scaleDByWheel;null===(t=this.graphDom)||void 0===t||t.removeEventListener(X.CommonEvent.WHEEL,e);}}update(t){var e,n;this.unbindEvents(),super.update(t),this.r=null!==(e=t.r)&&void 0!==e?e:this.r,this.d=null!==(n=t.d)&&void 0!==n?n:this.d,this.bindEvents();}destroy(){var t;this.unbindEvents(),this.isLensOn&&(null===(t=this.lens)||void 0===t||t.destroy()),this.prevMagnifiedStyleMap.clear(),this.prevOriginStyleMap.clear(),super.destroy();}}tM.defaultOptions={trigger:"pointermove",r:120,d:1.5,maxD:5,minD:0,showDPercent:!0,style:{},nodeStyle:{label:!0},preventDefault:!0};var tA=n("16ea0f92"),tT=n("ae02b67c");class tB extends f{constructor(t,e){super(t,Object.assign({},tB.defaultOptions,e)),this.$el=this.context.canvas.getContainer(),this.graphSize=[0,0],this.onFullscreenChange=()=>{var t,e,n,i;let r=!!document.fullscreenElement;this.options.autoFit&&this.setGraphSize(r),r?null===(e=(t=this.options).onEnter)||void 0===e||e.call(t):null===(i=(n=this.options).onExit)||void 0===i||i.call(n);},this.shortcut=new tT.Shortcut(t.graph),this.bindEvents(),this.style=document.createElement("style"),document.head.appendChild(this.style),this.style.innerHTML=`
      :not(:root):fullscreen::backdrop {
        background: transparent;
      }
    `;}bindEvents(){this.unbindEvents(),this.shortcut.unbindAll();let{request:t=[],exit:e=[]}=this.options.trigger;this.shortcut.bind(t,this.request),this.shortcut.bind(e,this.exit),["webkitfullscreenchange","mozfullscreenchange","fullscreenchange","MSFullscreenChange"].forEach(t=>{document.addEventListener(t,this.onFullscreenChange,!1);});}unbindEvents(){this.shortcut.unbindAll(),["webkitfullscreenchange","mozfullscreenchange","fullscreenchange","MSFullscreenChange"].forEach(t=>{document.removeEventListener(t,this.onFullscreenChange,!1);});}setGraphSize(t=!0){var e,n;let i,r;t?(i=(null===(e=globalThis.screen)||void 0===e?void 0:e.width)||0,r=(null===(n=globalThis.screen)||void 0===n?void 0:n.height)||0,this.graphSize=this.context.graph.getSize()):[i,r]=this.graphSize,this.context.graph.setSize(i,r),this.context.graph.render();}request(){!document.fullscreenElement&&(document.fullscreenEnabled||Reflect.get(document,"webkitFullscreenEnabled")||Reflect.get(document,"mozFullscreenEnabled")||Reflect.get(document,"msFullscreenEnabled"))&&this.$el.requestFullscreen().catch(t=>{tA.print.warn(`Error attempting to enable full-screen: ${t.message} (${t.name})`);});}exit(){document.fullscreenElement&&document.exitFullscreen();}update(t){this.unbindEvents(),super.update(t),this.bindEvents();}destroy(){this.exit(),this.style.remove(),super.destroy();}}tB.defaultOptions={trigger:{},autoFit:!0};var tD=n("d7b6ece6"),tL=u._(tD);class tN extends f{constructor(t,e){super(t,Object.assign({},tN.defaultOptions,e)),this.$element=(0,g.createPluginContainer)("grid-line",!0),this.offset=[0,0],this.currentScale=1,this.followZoom=t=>{let{data:{scale:e,origin:n}}=t;if(!e)return;let i=this.currentScale;this.currentScale=e;let r=e/i,a=(0,tp.multiply)(n||this.context.graph.getCanvasCenter(),1-r),s=this.baseSize*e,o=(0,tp.multiply)(this.offset,r),l=(0,tp.mod)(o,s),d=(0,tp.add)(l,a);this.$element.style.backgroundSize=`${s}px ${s}px`,this.$element.style.backgroundPosition=`${d[0]}px ${d[1]}px`,this.offset=(0,tp.mod)(d,s);},this.followTranslate=t=>{if(!this.options.follow)return;let{data:{translate:e}}=t;e&&this.updateOffset(e);},this.onTransform=t=>{let e=this.parseFollow(this.options.follow);e.zoom&&this.followZoom(t),e.translate&&this.followTranslate(t);},this.context.canvas.getContainer().prepend(this.$element),this.baseSize=this.options.size,this.updateStyle(),this.bindEvents();}update(t){super.update(t),void 0!==t.size&&(this.baseSize=t.size),this.updateStyle();}bindEvents(){let{graph:t}=this.context;t.on(X.GraphEvent.AFTER_TRANSFORM,this.onTransform);}updateStyle(){let{stroke:t,lineWidth:e,border:n,borderLineWidth:i,borderStroke:r,borderStyle:a}=this.options,s=this.baseSize*this.currentScale;Object.assign(this.$element.style,{border:n?`${i}px ${a} ${r}`:"none",backgroundImage:`linear-gradient(${t} ${e}px, transparent ${e}px), linear-gradient(90deg, ${t} ${e}px, transparent ${e}px)`,backgroundSize:`${s}px ${s}px`,backgroundRepeat:"repeat"});}updateOffset(t){let e=this.baseSize*this.currentScale;this.offset=(0,tp.mod)((0,tp.add)(this.offset,t),e),this.$element.style.backgroundPosition=`${this.offset[0]}px ${this.offset[1]}px`;}parseFollow(t){var e,n;return(0,tL.default)(t)?{translate:t,zoom:t}:{translate:null!==(e=null==t?void 0:t.translate)&&void 0!==e&&e,zoom:null!==(n=null==t?void 0:t.zoom)&&void 0!==n&&n};}destroy(){this.context.graph.off(X.GraphEvent.AFTER_TRANSFORM,this.onTransform),this.$element.remove(),super.destroy();}}tN.defaultOptions={border:!0,borderLineWidth:1,borderStroke:"#eee",borderStyle:"solid",lineWidth:1,size:20,stroke:"#eee"};var tR=n("d9911ccf"),tI=u._(tR),tk=n("bd8433ec"),tj=n("dfd51207"),tz=u._(tj),tF=n("9c1281e1"),tG=n("4c1b528d");class tV extends f{constructor(t,e){super(t,Object.assign({},tV.defaultOptions,e)),this.batchChanges=null,this.batchAnimation=!1,this.undoStack=[],this.redoStack=[],this.freezed=!1,this.executeCommand=(t,e=!0)=>{var n,i,r;this.freezed=!0,null===(i=(n=this.options).executeCommand)||void 0===i||i.call(n,t);let a=e?t.original:t.current;this.context.graph.addData(a.add),this.context.graph.updateData(a.update),this.context.graph.removeData((0,J.idsOf)(a.remove,!1)),null===(r=this.context.element)||void 0===r||r.draw({silence:!0,animation:t.animation}),this.freezed=!1;},this.addCommand=t=>{var e;if(!this.freezed){if(t.type===X.GraphEvent.AFTER_DRAW){let{dataChanges:n=[],animation:i=!0}=t.data;if(null===(e=this.context.batch)||void 0===e?void 0:e.isBatching){if(!this.batchChanges)return;this.batchChanges.push(n),this.batchAnimation&&(this.batchAnimation=i);return;}this.batchChanges=[n],this.batchAnimation=i;}this.undoStackPush(function(t,e=!1,n){let i={animation:e,current:{add:{},update:{},remove:{}},original:{add:{},update:{},remove:{}}},{add:r,update:a,remove:s}=(0,tG.groupByChangeType)((0,tG.reduceDataChanges)(t));return["nodes","edges","combos"].forEach(t=>{a[t]&&a[t].forEach(e=>{var r,a;let s=Object.assign({},e.value),o=Object.assign({},e.original);if(n){let t=n.graph.getElementType((0,J.idOf)(e.original)),i="edge"===t?"stroke":"fill",r=n.element.getElementComputedStyle(t,e.original);o=Object.assign(Object.assign({},e.original),{style:Object.assign({[i]:r[i]},e.original.style)});}(function t(e,n){for(let i in e)(0,tz.default)(e[i])&&!Array.isArray(e[i])&&null!==e[i]?(n[i]||(n[i]={}),t(e[i],n[i])):void 0===n[i]&&(n[i]=(0,tF.inferDefaultValue)(i));})(s,o),(r=i.current.update)[t]||(r[t]=[]),i.current.update[t].push(s),(a=i.original.update)[t]||(a[t]=[]),i.original.update[t].push(o);}),r[t]&&r[t].forEach(e=>{var n,r;let a=Object.assign({},e.value);(n=i.current.add)[t]||(n[t]=[]),i.current.add[t].push(a),(r=i.original.remove)[t]||(r[t]=[]),i.original.remove[t].push(a);}),s[t]&&s[t].forEach(e=>{var n,r;let a=Object.assign({},e.value);(n=i.current.remove)[t]||(n[t]=[]),i.current.remove[t].push(a),(r=i.original.add)[t]||(r[t]=[]),i.original.add[t].push(a);});}),i;}(this.batchChanges.flat(),this.batchAnimation,this.context)),this.notify(tk.HistoryEvent.ADD,this.undoStack[this.undoStack.length-1]);}},this.initBatchCommand=t=>{let{initiate:e}=t.data;this.batchAnimation=!1,e?this.batchChanges=[]:this.undoStack.pop()||(this.batchChanges=null);},this.emitter=new tI.default;let{graph:n}=this.context;n.on(X.GraphEvent.AFTER_DRAW,this.addCommand),n.on(X.GraphEvent.BATCH_START,this.initBatchCommand),n.on(X.GraphEvent.BATCH_END,this.addCommand);}canUndo(){return this.undoStack.length>0;}canRedo(){return this.redoStack.length>0;}undo(){var t,e,n,i;let r=this.undoStack.pop();if(r){if(this.executeCommand(r),!1===(null===(e=(t=this.options).beforeAddCommand)||void 0===e?void 0:e.call(t,r,!1)))return;this.redoStack.push(r),null===(i=(n=this.options).afterAddCommand)||void 0===i||i.call(n,r,!1),this.notify(tk.HistoryEvent.UNDO,r);}return this;}redo(){let t=this.redoStack.pop();return t&&(this.executeCommand(t,!1),this.undoStackPush(t),this.notify(tk.HistoryEvent.REDO,t)),this;}undoAndCancel(){let t=this.undoStack.pop();return t&&(this.executeCommand(t,!1),this.redoStack=[],this.notify(tk.HistoryEvent.CANCEL,t)),this;}undoStackPush(t){var e,n,i,r;let{stackSize:a}=this.options;0!==a&&this.undoStack.length>=a&&this.undoStack.shift(),!1!==(null===(n=(e=this.options).beforeAddCommand)||void 0===n?void 0:n.call(e,t,!0))&&(this.undoStack.push(t),null===(r=(i=this.options).afterAddCommand)||void 0===r||r.call(i,t,!0));}clear(){this.undoStack=[],this.redoStack=[],this.batchChanges=null,this.batchAnimation=!1,this.notify(tk.HistoryEvent.CLEAR,null);}notify(t,e){this.emitter.emit(t,{cmd:e}),this.emitter.emit(tk.HistoryEvent.CHANGE,{cmd:e});}on(t,e){this.emitter.on(t,e);}destroy(){let{graph:t}=this.context;t.off(X.GraphEvent.AFTER_DRAW,this.addCommand),t.off(X.GraphEvent.BATCH_START,this.initBatchCommand),t.off(X.GraphEvent.BATCH_END,this.addCommand),this.emitter.off(),super.destroy(),this.undoStack=[],this.redoStack=[];}}tV.defaultOptions={stackSize:0};let tW={toXy(t,e){if(!e)return[...t];let n=e[0].slice(1),i=e[1].slice(1);return t.map(t=>[t[n],t[i]]);},fromXy(t,e){if(!e)return[...t];let n=e[0].slice(1),i=e[1].slice(1);return t.map(([t,e])=>({[n]:t,[i]:e}));}};class tH{constructor(t,e){for(let n of(this._cells=[],this._cellSize=e,this._reverseCellSize=1/e,t)){let t=this.coordToCellNum(n[0]),e=this.coordToCellNum(n[1]);this._cells[t]||(this._cells[t]=[]),this._cells[t][e]||(this._cells[t][e]=[]),this._cells[t][e].push(n);}}cellPoints(t,e){var n;return(null===(n=this._cells[t])||void 0===n?void 0:n[e])||[];}rangePoints(t){let e=this.coordToCellNum(t[0]),n=this.coordToCellNum(t[1]),i=this.coordToCellNum(t[2]),r=this.coordToCellNum(t[3]),a=[];for(let t=e;t<=i;t++)for(let e=n;e<=r;e++)for(let n of this.cellPoints(t,e))a.push(n);return a;}removePoint(t){let e=this.coordToCellNum(t[0]),n=this.coordToCellNum(t[1]),i=this._cells[e][n],r=i.findIndex(([e,n])=>e===t[0]&&n===t[1]);return r>-1&&i.splice(r,1),i;}trunc(t){return Math.trunc(t);}coordToCellNum(t){return this.trunc(t*this._reverseCellSize);}extendBbox(t,e){return[t[0]-e*this._cellSize,t[1]-e*this._cellSize,t[2]+e*this._cellSize,t[3]+e*this._cellSize];}}function tK(t,e,n){let i=t*e,r=134217729*t,a=r-(r-t),s=t-a,o=134217729*e,l=o-(o-e),d=e-l,u=s*d-(i-a*l-s*l-a*d);return n?(n[0]=u,n[1]=i,n):[u,i];}function tY(t,e){let n=t.length;if(1===n){let n=tK(t[0],e);return n[0]?n:[n[1]];}let i=Array(2*n),r=[.1,.1],a=[.1,.1],s=0;tK(t[0],e,r),r[0]&&(i[s++]=r[0]);for(let o=1;o<n;++o){tK(t[o],e,a),function(t,e,n){let i=t+e,r=i-t,a=e-r,s=t-(i-r);n&&(n[0]=s+a,n[1]=i);}(r[1],a[0],r),r[0]&&(i[s++]=r[0]);let n=a[1],l=r[1],d=n+l,u=l-(d-n);r[1]=d,u&&(i[s++]=u);}return r[1]&&(i[s++]=r[1]),0===s&&(i[s++]=0),i.length=s,i;}function t$(t,e){let n,i,r,a,s,o;let l=0|t.length,d=0|e.length;if(1===l&&1===d)return function(t,e){let n=t+e,i=n-t,r=t-(n-i)+(e-i);return r?[r,n]:[n];}(t[0],-e[0]);let u=Array(l+d),c=0,h=0,p=0,f=Math.abs,g=t[0],y=f(g),m=-e[p],b=f(m);y<b?(i=g,(h+=1)<l&&(y=f(g=t[h]))):(i=m,(p+=1)<d&&(b=f(m=-e[p]))),h<l&&y<b||p>=d?(n=g,(h+=1)<l&&(y=f(g=t[h]))):(n=m,(p+=1)<d&&(b=f(m=-e[p])));let v=n+i,E=v-n,x=i-E,O=x,S=v;for(;h<l&&p<d;)y<b?(n=g,(h+=1)<l&&(y=f(g=t[h]))):(n=m,(p+=1)<d&&(b=f(m=-e[p]))),E=(v=n+(i=O))-n,(x=i-E)&&(u[c++]=x),a=(r=S+v)-S,O=S-(r-a)+(v-a),S=r;for(;h<l;)E=(v=(n=g)+(i=O))-n,(x=i-E)&&(u[c++]=x),a=(r=S+v)-S,O=S-(r-a)+(v-a),S=r,(h+=1)<l&&(g=t[h]);for(;p<d;)E=(v=(n=m)+(i=O))-n,(x=i-E)&&(u[c++]=x),a=(r=S+v)-S,O=S-(r-a)+(v-a),S=r,(p+=1)<d&&(m=-e[p]);return O&&(u[c++]=O),S&&(u[c++]=S),c||(u[c++]=0),u.length=c,u;}function tU(t,e){let n,i,r,a,s,o;let l=0|t.length,d=0|e.length;if(1===l&&1===d)return function(t,e){let n=t+e,i=n-t,r=t-(n-i)+(e-i);return r?[r,n]:[n];}(t[0],e[0]);let u=Array(l+d),c=0,h=0,p=0,f=Math.abs,g=t[0],y=f(g),m=e[p],b=f(m);y<b?(i=g,(h+=1)<l&&(y=f(g=t[h]))):(i=m,(p+=1)<d&&(b=f(m=e[p]))),h<l&&y<b||p>=d?(n=g,(h+=1)<l&&(y=f(g=t[h]))):(n=m,(p+=1)<d&&(b=f(m=e[p])));let v=n+i,E=v-n,x=i-E,O=x,S=v;for(;h<l&&p<d;)y<b?(n=g,(h+=1)<l&&(y=f(g=t[h]))):(n=m,(p+=1)<d&&(b=f(m=e[p]))),E=(v=n+(i=O))-n,(x=i-E)&&(u[c++]=x),a=(r=S+v)-S,O=S-(r-a)+(v-a),S=r;for(;h<l;)E=(v=(n=g)+(i=O))-n,(x=i-E)&&(u[c++]=x),a=(r=S+v)-S,O=S-(r-a)+(v-a),S=r,(h+=1)<l&&(g=t[h]);for(;p<d;)E=(v=(n=m)+(i=O))-n,(x=i-E)&&(u[c++]=x),a=(r=S+v)-S,O=S-(r-a)+(v-a),S=r,(p+=1)<d&&(m=e[p]);return O&&(u[c++]=O),S&&(u[c++]=S),c||(u[c++]=0),u.length=c,u;}function tX(t){return(3===t?function(t,e,n,i){return function(n,r,a){let s=i(t(t(e(r[1],a[0]),e(-a[1],r[0])),t(e(n[1],r[0]),e(-r[1],n[0]))),t(e(n[1],a[0]),e(-a[1],n[0])));return s[s.length-1];};}:4===t?function(t,e,n,i){return function(r,a,s,o){let l=i(t(t(n(t(e(s[1],o[0]),e(-o[1],s[0])),a[2]),t(n(t(e(a[1],o[0]),e(-o[1],a[0])),-s[2]),n(t(e(a[1],s[0]),e(-s[1],a[0])),o[2]))),t(n(t(e(a[1],o[0]),e(-o[1],a[0])),r[2]),t(n(t(e(r[1],o[0]),e(-o[1],r[0])),-a[2]),n(t(e(r[1],a[0]),e(-a[1],r[0])),o[2])))),t(t(n(t(e(s[1],o[0]),e(-o[1],s[0])),r[2]),t(n(t(e(r[1],o[0]),e(-o[1],r[0])),-s[2]),n(t(e(r[1],s[0]),e(-s[1],r[0])),o[2]))),t(n(t(e(a[1],s[0]),e(-s[1],a[0])),r[2]),t(n(t(e(r[1],s[0]),e(-s[1],r[0])),-a[2]),n(t(e(r[1],a[0]),e(-a[1],r[0])),s[2])))));return l[l.length-1];};}:function(t,e,n,i){return function(r,a,s,o,l){let d=i(t(t(t(n(t(n(t(e(o[1],l[0]),e(-l[1],o[0])),s[2]),t(n(t(e(s[1],l[0]),e(-l[1],s[0])),-o[2]),n(t(e(s[1],o[0]),e(-o[1],s[0])),l[2]))),a[3]),t(n(t(n(t(e(o[1],l[0]),e(-l[1],o[0])),a[2]),t(n(t(e(a[1],l[0]),e(-l[1],a[0])),-o[2]),n(t(e(a[1],o[0]),e(-o[1],a[0])),l[2]))),-s[3]),n(t(n(t(e(s[1],l[0]),e(-l[1],s[0])),a[2]),t(n(t(e(a[1],l[0]),e(-l[1],a[0])),-s[2]),n(t(e(a[1],s[0]),e(-s[1],a[0])),l[2]))),o[3]))),t(n(t(n(t(e(s[1],o[0]),e(-o[1],s[0])),a[2]),t(n(t(e(a[1],o[0]),e(-o[1],a[0])),-s[2]),n(t(e(a[1],s[0]),e(-s[1],a[0])),o[2]))),-l[3]),t(n(t(n(t(e(o[1],l[0]),e(-l[1],o[0])),a[2]),t(n(t(e(a[1],l[0]),e(-l[1],a[0])),-o[2]),n(t(e(a[1],o[0]),e(-o[1],a[0])),l[2]))),r[3]),n(t(n(t(e(o[1],l[0]),e(-l[1],o[0])),r[2]),t(n(t(e(r[1],l[0]),e(-l[1],r[0])),-o[2]),n(t(e(r[1],o[0]),e(-o[1],r[0])),l[2]))),-a[3])))),t(t(n(t(n(t(e(a[1],l[0]),e(-l[1],a[0])),r[2]),t(n(t(e(r[1],l[0]),e(-l[1],r[0])),-a[2]),n(t(e(r[1],a[0]),e(-a[1],r[0])),l[2]))),o[3]),t(n(t(n(t(e(a[1],o[0]),e(-o[1],a[0])),r[2]),t(n(t(e(r[1],o[0]),e(-o[1],r[0])),-a[2]),n(t(e(r[1],a[0]),e(-a[1],r[0])),o[2]))),-l[3]),n(t(n(t(e(s[1],o[0]),e(-o[1],s[0])),a[2]),t(n(t(e(a[1],o[0]),e(-o[1],a[0])),-s[2]),n(t(e(a[1],s[0]),e(-s[1],a[0])),o[2]))),r[3]))),t(n(t(n(t(e(s[1],o[0]),e(-o[1],s[0])),r[2]),t(n(t(e(r[1],o[0]),e(-o[1],r[0])),-s[2]),n(t(e(r[1],s[0]),e(-s[1],r[0])),o[2]))),-a[3]),t(n(t(n(t(e(a[1],o[0]),e(-o[1],a[0])),r[2]),t(n(t(e(r[1],o[0]),e(-o[1],r[0])),-a[2]),n(t(e(r[1],a[0]),e(-a[1],r[0])),o[2]))),s[3]),n(t(n(t(e(a[1],s[0]),e(-s[1],a[0])),r[2]),t(n(t(e(r[1],s[0]),e(-s[1],r[0])),-a[2]),n(t(e(r[1],a[0]),e(-a[1],r[0])),s[2]))),-o[3]))))),t(t(t(n(t(n(t(e(o[1],l[0]),e(-l[1],o[0])),s[2]),t(n(t(e(s[1],l[0]),e(-l[1],s[0])),-o[2]),n(t(e(s[1],o[0]),e(-o[1],s[0])),l[2]))),r[3]),n(t(n(t(e(o[1],l[0]),e(-l[1],o[0])),r[2]),t(n(t(e(r[1],l[0]),e(-l[1],r[0])),-o[2]),n(t(e(r[1],o[0]),e(-o[1],r[0])),l[2]))),-s[3])),t(n(t(n(t(e(s[1],l[0]),e(-l[1],s[0])),r[2]),t(n(t(e(r[1],l[0]),e(-l[1],r[0])),-s[2]),n(t(e(r[1],s[0]),e(-s[1],r[0])),l[2]))),o[3]),n(t(n(t(e(s[1],o[0]),e(-o[1],s[0])),r[2]),t(n(t(e(r[1],o[0]),e(-o[1],r[0])),-s[2]),n(t(e(r[1],s[0]),e(-s[1],r[0])),o[2]))),-l[3]))),t(t(n(t(n(t(e(s[1],l[0]),e(-l[1],s[0])),a[2]),t(n(t(e(a[1],l[0]),e(-l[1],a[0])),-s[2]),n(t(e(a[1],s[0]),e(-s[1],a[0])),l[2]))),r[3]),n(t(n(t(e(s[1],l[0]),e(-l[1],s[0])),r[2]),t(n(t(e(r[1],l[0]),e(-l[1],r[0])),-s[2]),n(t(e(r[1],s[0]),e(-s[1],r[0])),l[2]))),-a[3])),t(n(t(n(t(e(a[1],l[0]),e(-l[1],a[0])),r[2]),t(n(t(e(r[1],l[0]),e(-l[1],r[0])),-a[2]),n(t(e(r[1],a[0]),e(-a[1],r[0])),l[2]))),s[3]),n(t(n(t(e(a[1],s[0]),e(-s[1],a[0])),r[2]),t(n(t(e(r[1],s[0]),e(-s[1],r[0])),-a[2]),n(t(e(r[1],a[0]),e(-a[1],r[0])),s[2]))),-l[3])))));return d[d.length-1];};})(tU,tK,tY,t$);}let tZ=tX(3),tq=tX(4),tQ=[function(){return 0;},function(){return 0;},function(t,e){return e[0]-t[0];},function(t,e,n){let i;let r=(t[1]-n[1])*(e[0]-n[0]),a=(t[0]-n[0])*(e[1]-n[1]),s=r-a;if(r>0){if(a<=0)return s;i=r+a;}else{if(!(r<0)||a>=0)return s;i=-(r+a);}let o=33306690738754716e-32*i;return s>=o||s<=-o?s:tZ(t,e,n);},function(t,e,n,i){let r=t[0]-i[0],a=e[0]-i[0],s=n[0]-i[0],o=t[1]-i[1],l=e[1]-i[1],d=n[1]-i[1],u=t[2]-i[2],c=e[2]-i[2],h=n[2]-i[2],p=a*d,f=s*l,g=s*o,y=r*d,m=r*l,b=a*o,v=u*(p-f)+c*(g-y)+h*(m-b),E=7771561172376103e-31*((Math.abs(p)+Math.abs(f))*Math.abs(u)+(Math.abs(g)+Math.abs(y))*Math.abs(c)+(Math.abs(m)+Math.abs(b))*Math.abs(h));return v>E||-v>E?v:tq(t,e,n,i);}];var tJ=function(){for(;tQ.length<=5;)tQ.push(tX(tQ.length));let t=function(t,e,n,i,r,a,s){return function(...e){switch(e.length){case 0:case 1:return 0;case 2:return i(e[0],e[1]);case 3:return r(e[0],e[1],e[2]);case 4:return a(e[0],e[1],e[2],e[3]);case 5:return s(e[0],e[1],e[2],e[3],e[4]);}return t(e);};}(void 0,0,...tQ);for(let e=0;e<=5;++e)t[e]=tQ[e];return t;}();let t0=tJ[3];function t1(t,e){return Math.pow(e[0]-t[0],2)+Math.pow(e[1]-t[1],2);}function t2(t,e,n){let i=[e[0]-t[0],e[1]-t[1]],r=[n[0]-t[0],n[1]-t[1]];return(i[0]*r[0]+i[1]*r[1])/Math.sqrt(t1(t,e)*t1(t,n));}function t3(t,e){for(let n=0;n<e.length-1;n++){let i=[e[n],e[n+1]];if((t[0][0]!==i[0][0]||t[0][1]!==i[0][1])&&(t[0][0]!==i[1][0]||t[0][1]!==i[1][1])&&function(t,e,n,i){let r=tJ(t,n,i),a=tJ(e,n,i);if(r>0&&a>0||r<0&&a<0)return!1;let s=tJ(n,t,e),o=tJ(i,t,e);return(!(s>0)||!(o>0))&&(!(s<0)||!(o<0))&&(0!==r||0!==a||0!==s||0!==o||function(t,e,n,i){for(let r=0;r<2;++r){let a=t[r],s=e[r],[o,l]=[Math.min(a,s),Math.max(a,s)],d=n[r],u=i[r],[c,h]=[Math.min(d,u),Math.max(d,u)];if(h<o||l<c)return!1;}return!0;}(t,e,n,i));}(t[0],t[1],i[0],i[1]))return!0;}return!1;}let t6=Math.cos(90/(180/Math.PI));var t5=n("d2a5c9ab");let t4=(t,e,n)=>{if("sharp"===n)return[["M",t[0]-e,t[1]-e],["L",t[0]+e,t[1]-e],["L",t[0]+e,t[1]+e],["L",t[0]-e,t[1]+e],["Z"]];let i=[e,e,0,0,0];return[["M",t[0],t[1]-e],["A",...i,t[0],t[1]+e],["A",...i,t[0],t[1]-e]];},t8=(t,e,n)=>{let i=[e,e,0,0,0],r="sharp"===n?(0,tp.add)(t[0],(0,tp.scale)((0,tp.normalize)((0,tp.subtract)(t[0],t[1])),e)):t[0],a="sharp"===n?(0,tp.add)(t[1],(0,tp.scale)((0,tp.normalize)((0,tp.subtract)(t[1],t[0])),e)):t[1],s=(0,tp.scale)((0,tp.normalize)((0,tp.perpendicular)((0,tp.subtract)(r,a),!1)),e),o=(0,tp.scale)(s,-1),l=(0,tp.add)(r,s),d=(0,tp.add)(a,s),u=(0,tp.add)(a,o),c=(0,tp.add)(r,o);return"sharp"===n?[["M",l[0],l[1]],["L",d[0],d[1]],["L",u[0],u[1]],["L",c[0],c[1]],["Z"]]:[["M",l[0],l[1]],["L",d[0],d[1]],["A",...i,u[0],u[1]],["L",c[0],c[1]],["A",...i,l[0],l[1]]];},t9=(t,e)=>{let n=(0,te.sortByClockwise)(t).map((n,i)=>{let r=(i-2+t.length)%t.length,a=(i-1+t.length)%t.length,s=(i+1)%t.length,o=t[r],l=t[a],d=t[s],u=(0,tp.subtract)(o,l),c=(0,tp.subtract)(l,n),h=(0,tp.subtract)(n,d),p=(t,e)=>(0,tp.angle)(t,e,!0)<Math.PI,f=p(u,c),g=p(c,h),y=t=>(0,tp.scale)((0,tp.normalize)((0,tp.perpendicular)(t,!1)),e),m=y(c);return[{p:(0,tp.toVector2)(f?(0,tp.add)(l,y(u)):(0,tp.add)(l,m)),concave:f&&l},{p:(0,tp.toVector2)(g?(0,tp.add)(n,y(h)):(0,tp.add)(n,m)),concave:g&&n}];}),i=[e,e,0,0,0],r=n.findIndex((t,e)=>!n[(e-1+n.length)%n.length][0].concave&&!n[(e-1+n.length)%n.length][1].concave&&!t[0].concave&&!t[0].concave&&!t[1].concave),a=n.slice(r).concat(n.slice(0,r)),s=[];return a.flatMap((t,e)=>{let r=[],o=a[n.length-1];return 0===e&&r.push(["M",...o[1].p]),t[0].concave?s.push(t[0].p,t[1].p):r.push(["A",...i,...t[0].p]),t[1].concave?s.unshift(t[1].p):r.push(["L",...t[1].p]),3===s.length&&(r.pop(),r.push(["C",...s.flat()]),s=[]),r;});},t7=(t,e)=>{let n=(0,te.sortByClockwise)(t).map((e,n)=>{let i=t[(n+1)%t.length];return{p:e,v:(0,tp.normalize)((0,tp.subtract)(i,e))};});return n.forEach((i,r)=>{let a=n[r>0?r-1:t.length-1].v,s=(0,tp.normalize)((0,tp.add)(a,(0,tp.scale)(i.v,(0,tp.angle)(a,i.v,!0)<Math.PI?1:-1)));i.p=(0,tp.add)(i.p,(0,tp.scale)(s,e));}),(0,tt.getClosedSpline)(n.map(t=>t.p));},et=(t,e)=>{let n=t.map((n,i)=>{let r=t[0===i?t.length-1:i-1],a=(0,tp.toVector3)((0,tp.scale)((0,tp.normalize)((0,tp.perpendicular)((0,tp.subtract)(r,n),!1)),e));return[(0,tp.add)(r,a),(0,tp.add)(n,a)];}).flat();return n.map((t,e)=>{if(e%2==0)return null;let i=[n[(e-1)%n.length],n[e%n.length]],r=[n[(e+1)%n.length],n[(e+2)%n.length]];return(0,t5.getLinesIntersection)(i,r,!0);}).filter(Boolean).map((t,e)=>[0===e?"M":"L",t[0],t[1]]).concat([["Z"]]);};var ee=this&&this.__rest||function(t,e){var n={};for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&0>e.indexOf(i)&&(n[i]=t[i]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols)for(var r=0,i=Object.getOwnPropertySymbols(t);r<i.length;r++)0>e.indexOf(i[r])&&Object.prototype.propertyIsEnumerable.call(t,i[r])&&(n[i[r]]=t[i[r]]);return n;};class en extends f{constructor(t,e){super(t,Object.assign({},en.defaultOptions,e)),this.hullMemberIds=[],this.drawHull=()=>{if(this.shape){let t=!(0,x.default)(this.optionsCache,this.options);this.shape.update(this.getHullStyle(t));}else this.shape=new Z.Contour({style:this.getHullStyle()}),this.context.canvas.appendChild(this.shape);this.optionsCache=Object.assign({},this.options);},this.updateHullPath=t=>{this.shape&&this.options.members.includes((0,J.idOf)(t.data))&&this.shape.update({d:this.getHullPath(!0)});},this.getHullPath=(t=!1)=>{let{graph:e}=this.context,n=this.getMember();if(0===n.length)return"";let i=n.map(t=>e.getNodeData(t)),r=(function(t,e,n){let i=function(t){let e=[t[0]],n=t[0];for(let i=1;i<t.length;i++){let r=t[i];(n[0]!==r[0]||n[1]!==r[1])&&e.push(r),n=r;}return e;}(tW.toXy(t,void 0).sort(function(t,e){return t[0]-e[0]||t[1]-e[1];}));if(i.length<4)return i.concat([i[0]]);let r=function(t){let e=1/0,n=1/0,i=-1/0,r=-1/0;for(let a=t.length-1;a>=0;a--)t[a][0]<e&&(e=t[a][0]),t[a][1]<n&&(n=t[a][1]),t[a][0]>i&&(i=t[a][0]),t[a][1]>r&&(r=t[a][1]);return[i-e,r-n];}(i),a=[.6*r[0],.6*r[1]],s=(function(t){let e=t.length;if(e<3){let n=Array(e);for(let t=0;t<e;++t)n[t]=t;return 2===e&&t[0][0]===t[1][0]&&t[0][1]===t[1][1]?[0]:n;}let n=Array(e);for(let t=0;t<e;++t)n[t]=t;n.sort((e,n)=>t[e][0]-t[n][0]||t[e][1]-t[n][1]);let i=[n[0],n[1]],r=[n[0],n[1]];for(let a=2;a<e;++a){let e=n[a],s=t[e],o=i.length;for(;o>1&&0>=t0(t[i[o-2]],t[i[o-1]],s);)o-=1,i.pop();for(i.push(e),o=r.length;o>1&&t0(t[r[o-2]],t[r[o-1]],s)>=0;)o-=1,r.pop();r.push(e);}let a=Array(r.length+i.length-2),s=0;for(let t=0,e=i.length;t<e;++t)a[s++]=i[t];for(let t=r.length-2;t>0;--t)a[s++]=r[t];return a;})(i).reverse().map(t=>i[t]);s.push(s[0]);let o=i.filter(function(t){return 0>s.indexOf(t);}),l=function t(e,n,i,r,a){let s=!1;for(let t=0;t<e.length-1;t++){let o,l,d;let u=[e[t],e[t+1]],c=u[0][0]+","+u[0][1]+","+u[1][0]+","+u[1][1];if(t1(u[0],u[1])<n||a.has(c))continue;let h=0,p=[Math.min(u[0][0],u[1][0]),Math.min(u[0][1],u[1][1]),Math.max(u[0][0],u[1][0]),Math.max(u[0][1],u[1][1])];do o=(p=r.extendBbox(p,h))[2]-p[0],l=p[3]-p[1],d=function(t,e,n){let i=null,r=t6,a=t6,s,o;for(let l=0;l<e.length;l++)s=t2(t[0],t[1],e[l]),o=t2(t[1],t[0],e[l]),s>r&&o>a&&!t3([t[0],e[l]],n)&&!t3([t[1],e[l]],n)&&(r=s,a=o,i=e[l]);return i;}(u,r.rangePoints(p),e),h++;while(null===d&&(i[0]>o||i[1]>l))o>=i[0]&&l>=i[1]&&a.add(c),null!==d&&(e.splice(t+1,0,d),r.removePoint(d),s=!0);}return s?t(e,n,i,r,a):e;}(s,Math.pow(e||20,2),a,new tH(o,Math.ceil(1/(i.length/(r[0]*r[1])))),new Set);return l;})(i.map(th.positionOf),this.options.concavity).slice(1).reverse(),a=r.flatMap(t=>i.filter(e=>(0,x.default)((0,th.positionOf)(e),t)).map(J.idOf));return(0,x.default)(a,this.hullMemberIds)&&!t||(this.hullMemberIds=a,this.path=function(t,e,n){if(1===t.length)return t4(t[0],e,n);if(2===t.length)return t8(t,e,n);if(3===t.length){let[i,r,a]=(0,te.sortByClockwise)(t);if((0,te.isCollinear)(i,r,a))return t8([i,a],e,n);}switch(n){case"smooth":return t7(t,e);case"sharp":return et(t,e);default:return t9(t,e);}}(r,this.getPadding(),this.options.corner)),this.path;},this.bindEvents();}bindEvents(){this.context.graph.on(X.GraphEvent.AFTER_RENDER,this.drawHull),this.context.graph.on(X.GraphEvent.AFTER_ELEMENT_UPDATE,this.updateHullPath);}getHullStyle(t){let e=this.options,{members:n,padding:i,corner:r}=e;return Object.assign(Object.assign({},ee(e,["members","padding","corner"])),{d:this.getHullPath(t)});}getPadding(){let{graph:t}=this.context;return this.hullMemberIds.reduce((e,n)=>{let{halfExtents:i}=t.getElementRenderBounds(n);return Math.max(e,Math.max(i[0],i[1]));},0)+this.options.padding;}addMember(t){let e=Array.isArray(t)?t:[t];this.options.members=[...new Set([...this.options.members,...e])],this.shape.update({d:this.getHullPath()});}removeMember(t){let e=Array.isArray(t)?t:[t];this.options.members=this.options.members.filter(t=>!e.includes(t)),e.some(t=>this.hullMemberIds.includes(t))&&this.shape.update({d:this.getHullPath()});}updateMember(t){this.options.members=(0,S.default)(t)?t(this.options.members):t,this.shape.update(this.getHullStyle(!0));}getMember(){return this.options.members;}destroy(){this.context.graph.off(X.GraphEvent.AFTER_DRAW,this.drawHull),this.shape.destroy(),this.hullMemberIds=[],super.destroy();}}en.defaultOptions={members:[],padding:10,corner:"rounded",concavity:1/0,fill:"lightblue",fillOpacity:.2,labelOpacity:1,stroke:"blue",strokeOpacity:.2};var ei=n("51e076c8"),er=n("064fd088"),ea=n("5fe8ba0b"),es=n("0cb6be40"),eo=n("3db90dfd"),el=n("3aab110c"),ed=n("a0f386cf"),eu=n("71812f5e"),ec=u._(eu),eh=n("4199ddb4"),ep=u._(eh),ef=n("1f0b0133"),eg=n("253d4afd"),ey=n("2e319aba"),em=n("b7e3e58a"),eb=u._(em),ev=n("30da05e7"),eE=u._(ev),ex=n("e9d4b694"),eO=n("3fd6f3f0"),eS=n("aa476cdd"),e_=n("870a38a6"),eP=(0,ef.classNames)({prevBtnGroup:"prev-btn-group",prevBtn:"prev-btn",nextBtnGroup:"next-btn-group",nextBtn:"next-btn",pageInfoGroup:"page-info-group",pageInfo:"page-info",playWindow:"play-window",contentGroup:"content-group",controller:"controller",clipPath:"clip-path"},"navigator"),eC=function(t){function e(e){var n=t.call(this,e,{x:0,y:0,animate:{easing:"linear",duration:200,fill:"both"},buttonCursor:"pointer",buttonFill:"black",buttonD:(0,e_.button)(0,0,6),buttonSize:12,controllerPadding:5,controllerSpacing:5,formatter:function(t,e){return"".concat(t,"/").concat(e);},defaultPage:0,loop:!1,orientation:"horizontal",pageNumFill:"black",pageNumFontSize:12,pageNumTextAlign:"start",pageNumTextBaseline:"middle"})||this;return n.playState="idle",n.contentGroup=n.appendChild(new ed.Group({class:eP.contentGroup.name})),n.playWindow=n.contentGroup.appendChild(new ed.Group({class:eP.playWindow.name})),n.innerCurrPage=n.defaultPage,n;}return(0,ei.__extends)(e,t),Object.defineProperty(e.prototype,"defaultPage",{get:function(){var t=this.attributes.defaultPage;return(0,eb.default)(t,0,Math.max(this.pageViews.length-1,0));},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"pageViews",{get:function(){return this.playWindow.children;},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"controllerShape",{get:function(){return this.totalPages>1?{width:55,height:0}:{width:0,height:0};},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"pageShape",{get:function(){var t,e,n=this.pageViews,i=(0,ei.__read)(((null===(e=(t=n.map(function(t){var e=t.getBBox();return[e.width,e.height];}))[0])||void 0===e?void 0:e.map(function(e,n){return t.map(function(t){return t[n];});}))||[]).map(function(t){return Math.max.apply(Math,(0,ei.__spreadArray)([],(0,ei.__read)(t),!1));}),2),r=i[0],a=i[1],s=this.attributes,o=s.pageWidth,l=s.pageHeight;return{pageWidth:void 0===o?r:o,pageHeight:void 0===l?a:l};},enumerable:!1,configurable:!0}),e.prototype.getContainer=function(){return this.playWindow;},Object.defineProperty(e.prototype,"totalPages",{get:function(){return this.pageViews.length;},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"currPage",{get:function(){return this.innerCurrPage;},enumerable:!1,configurable:!0}),e.prototype.getBBox=function(){var e=t.prototype.getBBox.call(this),n=e.x,i=e.y,r=this.controllerShape,a=this.pageShape,s=a.pageWidth,o=a.pageHeight;return new ea.BBox(n,i,s+r.width,o);},e.prototype.goTo=function(t){var e=this,n=this.attributes.animate,i=this.currPage,r=this.playState,a=this.playWindow,s=this.pageViews;if("idle"!==r||t<0||s.length<=0||t>=s.length)return null;s[i].setLocalPosition(0,0),this.prepareFollowingPage(t);var o=(0,ei.__read)(this.getFollowingPageDiff(t),2),l=o[0],d=o[1];this.playState="running";var u=(0,ex.animate)(a,[{transform:"translate(0, 0)"},{transform:"translate(".concat(-l,", ").concat(-d,")")}],n);return(0,ex.onAnimateFinished)(u,function(){e.innerCurrPage=t,e.playState="idle",e.setVisiblePages([t]),e.updatePageInfo();}),u;},e.prototype.prev=function(){var t=this.attributes.loop,e=this.pageViews.length,n=this.currPage;if(!t&&n<=0)return null;var i=t?(n-1+e)%e:(0,eb.default)(n-1,0,e);return this.goTo(i);},e.prototype.next=function(){var t=this.attributes.loop,e=this.pageViews.length,n=this.currPage;if(!t&&n>=e-1)return null;var i=t?(n+1)%e:(0,eb.default)(n+1,0,e);return this.goTo(i);},e.prototype.renderClipPath=function(t){var e=this.pageShape,n=e.pageWidth,i=e.pageHeight;if(!n||!i){this.contentGroup.style.clipPath=void 0;return;}this.clipPath=t.maybeAppendByClassName(eP.clipPath,"rect").styles({width:n,height:i}),this.contentGroup.attr("clipPath",this.clipPath.node());},e.prototype.setVisiblePages=function(t){this.playWindow.children.forEach(function(e,n){t.includes(n)?(0,eO.show)(e):(0,eO.hide)(e);});},e.prototype.adjustControllerLayout=function(){var t=this.prevBtnGroup,e=this.nextBtnGroup,n=this.pageInfoGroup,i=this.attributes,r=i.orientation,a=i.controllerPadding,s=n.getBBox(),o=s.width;s.height;var l=(0,ei.__read)("horizontal"===r?[-180,0]:[-90,90],2),d=l[0],u=l[1];t.setLocalEulerAngles(d),e.setLocalEulerAngles(u);var c=t.getBBox(),h=c.width,p=c.height,f=e.getBBox(),g=f.width,y=f.height,m=Math.max(h,o,g),b="horizontal"===r?{offset:[[0,0],[h/2+a,0],[h+o+2*a,0]],textAlign:"start"}:{offset:[[m/2,-p-a],[m/2,0],[m/2,y+a]],textAlign:"center"},v=(0,ei.__read)(b.offset,3),E=(0,ei.__read)(v[0],2),x=E[0],O=E[1],S=(0,ei.__read)(v[1],2),_=S[0],P=S[1],C=(0,ei.__read)(v[2],2),w=C[0],M=C[1],A=b.textAlign,T=n.querySelector("text");T&&(T.style.textAlign=A),t.setLocalPosition(x,O),n.setLocalPosition(_,P),e.setLocalPosition(w,M);},e.prototype.updatePageInfo=function(){var t,e=this.currPage,n=this.pageViews,i=this.attributes.formatter;n.length<2||(null===(t=this.pageInfoGroup.querySelector(eP.pageInfo.class))||void 0===t||t.attr("text",i(e+1,n.length)),this.adjustControllerLayout());},e.prototype.getFollowingPageDiff=function(t){var e=this.currPage;if(e===t)return[0,0];var n=this.attributes.orientation,i=this.pageShape,r=i.pageWidth,a=i.pageHeight,s=t<e?-1:1;return"horizontal"===n?[s*r,0]:[0,s*a];},e.prototype.prepareFollowingPage=function(t){var e=this.currPage,n=this.pageViews;if(this.setVisiblePages([t,e]),t!==e){var i=(0,ei.__read)(this.getFollowingPageDiff(t),2),r=i[0],a=i[1];n[t].setLocalPosition(r,a);}},e.prototype.renderController=function(t){var e=this,n=this.attributes.controllerSpacing,i=this.pageShape,r=i.pageWidth,a=i.pageHeight,s=this.pageViews.length>=2,o=t.maybeAppendByClassName(eP.controller,"g");if((0,eO.visibility)(o.node(),s),s){var l=(0,eo.subStyleProps)(this.attributes,"button"),d=(0,eo.subStyleProps)(this.attributes,"pageNum"),u=(0,ei.__read)((0,eo.splitStyle)(l),2),c=u[0],h=u[1],p=c.size,f=(0,ei.__rest)(c,["size"]),g=!o.select(eP.prevBtnGroup.class).node(),y=o.maybeAppendByClassName(eP.prevBtnGroup,"g").styles(h);this.prevBtnGroup=y.node();var m=y.maybeAppendByClassName(eP.prevBtn,"path"),b=o.maybeAppendByClassName(eP.nextBtnGroup,"g").styles(h);this.nextBtnGroup=b.node(),[m,b.maybeAppendByClassName(eP.nextBtn,"path")].forEach(function(t){t.styles((0,ei.__assign)((0,ei.__assign)({},f),{transformOrigin:"center"})),(0,eS.scaleToPixel)(t.node(),p,!0);});var v=o.maybeAppendByClassName(eP.pageInfoGroup,"g");this.pageInfoGroup=v.node(),v.maybeAppendByClassName(eP.pageInfo,"text").styles(d),this.updatePageInfo(),o.node().setLocalPosition(r+n,a/2),g&&(this.prevBtnGroup.addEventListener("click",function(){e.prev();}),this.nextBtnGroup.addEventListener("click",function(){e.next();}));}},e.prototype.render=function(t,e){var n=t.x,i=t.y;this.attr("transform","translate(".concat(void 0===n?0:n,", ").concat(void 0===i?0:i,")"));var r=(0,es.select)(e);this.renderClipPath(r),this.renderController(r),this.setVisiblePages([this.defaultPage]),this.goTo(this.defaultPage);},e.prototype.bindEvents=function(){var t=this,e=(0,eE.default)(function(){return t.render(t.attributes,t);},50);this.playWindow.addEventListener(ed.ElementEvent.INSERTED,e),this.playWindow.addEventListener(ed.ElementEvent.REMOVED,e);},e;}(er.Component),ew=n("876e0ee0"),eM=n("ad85227e"),eA=n("fb7c6270"),eT=n("78b768f4"),eB=n("53557509"),eD=n("e6f1b3eb"),eL=n("f6c69ac8"),eN=(0,ef.classNames)({layout:"flex",markerGroup:"marker-group",marker:"marker",labelGroup:"label-group",label:"label",valueGroup:"value-group",value:"value",backgroundGroup:"background-group",background:"background"},"legend-category-item"),eR=function(t){function e(e){return t.call(this,e,{span:[1,1],marker:function(){return new ed.Circle({style:{r:6}});},markerSize:10,labelFill:"#646464",valueFill:"#646464",labelFontSize:12,valueFontSize:12,labelTextBaseline:"middle",valueTextBaseline:"middle"})||this;}return(0,ei.__extends)(e,t),Object.defineProperty(e.prototype,"showValue",{get:function(){var t=this.attributes.valueText;return!!t&&("string"==typeof t||"number"==typeof t?""!==t:"function"==typeof t||""!==t.attr("text"));},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"actualSpace",{get:function(){var t=this.labelGroup,e=this.valueGroup,n=this.attributes.markerSize,i=t.node().getBBox(),r=i.width,a=i.height,s=e.node().getBBox();return{markerWidth:n,labelWidth:r,valueWidth:s.width,height:Math.max(n,a,s.height)};},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"span",{get:function(){var t=this.attributes.span;if(!t)return[1,1];var e=(0,ei.__read)((0,eD.parseSeriesAttr)(t),2),n=e[0],i=e[1],r=this.showValue?i:0,a=n+r;return[n/a,r/a];},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"shape",{get:function(){var t,e=this.attributes,n=e.markerSize,i=e.width,r=this.actualSpace,a=r.markerWidth,s=r.height,o=this.actualSpace,l=o.labelWidth,d=o.valueWidth,u=(0,ei.__read)(this.spacing,2),c=u[0],h=u[1];if(i){var p=i-n-c-h,f=(0,ei.__read)(this.span,2),g=f[0],y=f[1];l=(t=(0,ei.__read)([g*p,y*p],2))[0],d=t[1];}return{width:a+l+d+c+h,height:s,markerWidth:a,labelWidth:l,valueWidth:d};},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"spacing",{get:function(){var t=this.attributes.spacing;if(!t)return[0,0];var e=(0,ei.__read)((0,eD.parseSeriesAttr)(t),2),n=e[0],i=e[1];return this.showValue?[n,i]:[n,0];},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"layout",{get:function(){var t=this.shape,e=t.markerWidth,n=t.labelWidth,i=t.valueWidth,r=t.width,a=t.height,s=(0,ei.__read)(this.spacing,2),o=s[0];return{height:a,width:r,markerWidth:e,labelWidth:n,valueWidth:i,position:[e/2,e+o,e+n+o+s[1]]};},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"scaleSize",{get:function(){var t,e=(t=this.markerGroup.node().querySelector(eN.marker.class))?t.style:{},n=this.attributes,i=n.markerSize,r=n.markerStrokeWidth,a=void 0===r?e.strokeWidth:r,s=n.markerLineWidth,o=void 0===s?e.lineWidth:s,l=n.markerStroke,d=void 0===l?e.stroke:l,u=+(a||o||(d?1:0))*Math.sqrt(2),c=this.markerGroup.node().getBBox();return(1-u/Math.max(c.width,c.height))*i;},enumerable:!1,configurable:!0}),e.prototype.renderMarker=function(t){var e=this,n=this.attributes.marker,i=(0,eo.subStyleProps)(this.attributes,"marker");this.markerGroup=t.maybeAppendByClassName(eN.markerGroup,"g").style("zIndex",0),(0,eB.ifShow)(!!n,this.markerGroup,function(){var t,r=e.markerGroup.node(),a=null===(t=r.childNodes)||void 0===t?void 0:t[0],s="string"==typeof n?new eM.Marker({style:{symbol:n},className:eN.marker.name}):n();a?s.nodeName===a.nodeName?a instanceof eM.Marker?a.update((0,ei.__assign)((0,ei.__assign)({},i),{symbol:n})):((0,eA.copyAttributes)(a,s),(0,es.select)(a).styles(i)):(a.remove(),(0,es.select)(s).attr("className",eN.marker.name).styles(i),r.appendChild(s)):(s instanceof eM.Marker||(0,es.select)(s).attr("className",eN.marker.name).styles(i),r.appendChild(s)),e.markerGroup.node().scale(1/e.markerGroup.node().getScale()[0]);var o=(0,eS.scaleToPixel)(e.markerGroup.node(),e.scaleSize,!0);e.markerGroup.node().style._transform="scale(".concat(o,")");});},e.prototype.renderLabel=function(t){var e=(0,eo.subStyleProps)(this.attributes,"label"),n=e.text,i=(0,ei.__rest)(e,["text"]);this.labelGroup=t.maybeAppendByClassName(eN.labelGroup,"g").style("zIndex",0),this.labelGroup.maybeAppendByClassName(eN.label,function(){return(0,eL.renderExtDo)(n);}).styles(i);},e.prototype.renderValue=function(t){var e=this,n=(0,eo.subStyleProps)(this.attributes,"value"),i=n.text,r=(0,ei.__rest)(n,["text"]);this.valueGroup=t.maybeAppendByClassName(eN.valueGroup,"g").style("zIndex",0),(0,eB.ifShow)(this.showValue,this.valueGroup,function(){e.valueGroup.maybeAppendByClassName(eN.value,function(){return(0,eL.renderExtDo)(i);}).styles(r);});},e.prototype.renderBackground=function(t){var e=this.shape,n=e.width,i=e.height,r=(0,eo.subStyleProps)(this.attributes,"background");this.background=t.maybeAppendByClassName(eN.backgroundGroup,"g").style("zIndex",-1),this.background.maybeAppendByClassName(eN.background,"rect").styles((0,ei.__assign)({width:n,height:i},r));},e.prototype.adjustLayout=function(){var t=this.layout,e=t.labelWidth,n=t.valueWidth,i=t.height,r=(0,ei.__read)(t.position,3),a=r[0],s=r[1],o=r[2],l=i/2;this.markerGroup.styles({transform:"translate(".concat(a,", ").concat(l,")").concat(this.markerGroup.node().style._transform)}),this.labelGroup.styles({transform:"translate(".concat(s,", ").concat(l,")")}),(0,eT.ellipsisIt)(this.labelGroup.select(eN.label.class).node(),Math.ceil(e)),this.showValue&&(this.valueGroup.styles({transform:"translate(".concat(o,", ").concat(l,")")}),(0,eT.ellipsisIt)(this.valueGroup.select(eN.value.class).node(),Math.ceil(n)));},e.prototype.render=function(t,e){var n=(0,es.select)(e),i=t.x,r=t.y;n.styles({transform:"translate(".concat(void 0===i?0:i,", ").concat(void 0===r?0:r,")")}),this.renderMarker(n),this.renderLabel(n),this.renderValue(n),this.renderBackground(n),this.adjustLayout();},e;}(er.Component),eI=(0,ef.classNames)({page:"item-page",navigator:"navigator",item:"item"},"items"),ek=function(t,e,n){return(void 0===n&&(n=!0),t)?e(t):n;},ej=function(t){function e(e){var n=t.call(this,e,{data:[],gridRow:1/0,gridCol:void 0,padding:0,width:1e3,height:100,rowPadding:0,colPadding:0,layout:"flex",orientation:"horizontal",click:ec.default,mouseenter:ec.default,mouseleave:ec.default})||this;return n.navigatorShape=[0,0],n;}return(0,ei.__extends)(e,t),Object.defineProperty(e.prototype,"pageViews",{get:function(){return this.navigator.getContainer();},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"grid",{get:function(){var t=this.attributes,e=t.gridRow,n=t.gridCol,i=t.data;if(!e&&!n)throw Error("gridRow and gridCol can not be set null at the same time");return e&&n?[e,n]:e?[e,i.length]:[i.length,n];},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"renderData",{get:function(){var t=this.attributes,e=t.data,n=t.layout,i=(0,eo.subStyleProps)(this.attributes,"item");return e.map(function(t,r){var a=t.id,s=void 0===a?r:a,o=t.label,l=t.value;return{id:"".concat(s),index:r,style:(0,ei.__assign)({layout:n,labelText:o,valueText:l},Object.fromEntries(Object.entries(i).map(function(n){var i=(0,ei.__read)(n,2),a=i[0],s=i[1];return[a,(0,ey.getCallbackValue)(s,[t,r,e])];})))};});},enumerable:!1,configurable:!0}),e.prototype.getGridLayout=function(){var t=this,e=this.attributes,n=e.orientation,i=e.width,r=e.rowPadding,a=e.colPadding,s=(0,ei.__read)(this.navigatorShape,1)[0],o=(0,ei.__read)(this.grid,2),l=o[0],d=o[1],u=d*l,c=0;return this.pageViews.children.map(function(e,o){var h,p,f=Math.floor(o/u),g=o%u,y=t.ifHorizontal(d,l),m=[Math.floor(g/y),g%y];"vertical"===n&&m.reverse();var b=(0,ei.__read)(m,2),v=b[0],E=b[1],x=(i-s-(d-1)*a)/d,O=e.getBBox().height,S=(0,ei.__read)([0,0],2),_=S[0],P=S[1];return"horizontal"===n?(_=(h=(0,ei.__read)([c,v*(O+r)],2))[0],P=h[1],c=E===d-1?0:c+x+a):(_=(p=(0,ei.__read)([E*(x+a),c],2))[0],P=p[1],c=v===l-1?0:c+O+r),{page:f,index:o,row:v,col:E,pageIndex:g,width:x,height:O,x:_,y:P};});},e.prototype.getFlexLayout=function(){var t=this.attributes,e=t.width,n=t.height,i=t.rowPadding,r=t.colPadding,a=(0,ei.__read)(this.navigatorShape,1)[0],s=(0,ei.__read)(this.grid,2),o=s[0],l=s[1],d=(0,ei.__read)([e-a,n],2),u=d[0],c=d[1],h=(0,ei.__read)([0,0,0,0,0,0,0,0],8),p=h[0],f=h[1],g=h[2],y=h[3],m=h[4],b=h[5],v=h[6],E=h[7];return this.pageViews.children.map(function(t,e){var n,a,s,d,h=t.getBBox(),x=h.width,O=h.height,S=0===v?0:r,_=v+S+x;return _<=u&&ek(m,function(t){return t<l;})?(p=(n=(0,ei.__read)([v+S,E,_],3))[0],f=n[1],v=n[2]):(b=(a=(0,ei.__read)([b+1,0,0,E+O+i],4))[0],m=a[1],v=a[2],(E=a[3])+O<=c&&ek(b,function(t){return t<o;}))?(p=(s=(0,ei.__read)([v,E,x],3))[0],f=s[1],v=s[2]):(p=(d=(0,ei.__read)([0,0,x,0,g+1,0,0,0],8))[0],f=d[1],v=d[2],E=d[3],g=d[4],y=d[5],b=d[6],m=d[7]),{width:x,height:O,x:p,y:f,page:g,index:e,pageIndex:y++,row:b,col:m++};});},Object.defineProperty(e.prototype,"itemsLayout",{get:function(){this.navigatorShape=[0,0];var t="grid"===this.attributes.layout?this.getGridLayout:this.getFlexLayout,e=t.call(this);return e.slice(-1)[0].page>0?(this.navigatorShape=[55,0],t.call(this)):e;},enumerable:!1,configurable:!0}),e.prototype.ifHorizontal=function(t,e){var n=this.attributes.orientation;return(0,ew.ifHorizontal)(n,t,e);},e.prototype.flattenPage=function(t){t.querySelectorAll(eI.item.class).forEach(function(e){t.appendChild(e);}),t.querySelectorAll(eI.page.class).forEach(function(e){t.removeChild(e).destroy();});},e.prototype.renderItems=function(t){var e=this.attributes,n=e.click,i=e.mouseenter,r=e.mouseleave;this.flattenPage(t);var a=this.dispatchCustomEvent.bind(this);(0,es.select)(t).selectAll(eI.item.class).data(this.renderData,function(t){return t.id;}).join(function(t){return t.append(function(t){return new eR({style:t.style});}).attr("className",eI.item.name).on("click",function(){null==n||n(this),a("itemClick",{item:this});}).on("pointerenter",function(){null==i||i(this),a("itemMouseenter",{item:this});}).on("pointerleave",function(){null==r||r(this),a("itemMouseleave",{item:this});});},function(t){return t.each(function(t){var e=t.style;this.update(e);});},function(t){return t.remove();});},e.prototype.relayoutNavigator=function(){var t,e=this.attributes,n=e.layout,i=e.width,r=(null===(t=this.pageViews.children[0])||void 0===t?void 0:t.getBBox().height)||0,a=(0,ei.__read)(this.navigatorShape,2),s=a[0],o=a[1];this.navigator.update("grid"===n?{pageWidth:i-s,pageHeight:r-o}:{});},e.prototype.adjustLayout=function(){var t,e,n=this,i=Object.entries((t=this.itemsLayout,e="page",t.reduce(function(t,n){return(t[n[e]]=t[n[e]]||[]).push(n),t;},{}))).map(function(t){var e=(0,ei.__read)(t,2);return{page:e[0],layouts:e[1]};}),r=(0,ei.__spreadArray)([],(0,ei.__read)(this.navigator.getContainer().children),!1);i.forEach(function(t){var e=t.layouts,i=n.pageViews.appendChild(new ed.Group({className:eI.page.name}));e.forEach(function(t){var e=t.x,n=t.y,a=t.index,s=t.width,o=t.height,l=r[a];i.appendChild(l),(0,ep.default)(l,"__layout__",t),l.update({x:e,y:n,width:s,height:o});});}),this.relayoutNavigator();},e.prototype.renderNavigator=function(t){var e=this.attributes.orientation,n=(0,eo.subStyleProps)(this.attributes,"nav"),i=(0,eg.deepAssign)({orientation:e},n),r=this;return t.selectAll(eI.navigator.class).data(["nav"]).join(function(t){return t.append(function(){return new eC({style:i});}).attr("className",eI.navigator.name).each(function(){r.navigator=this;});},function(t){return t.each(function(){this.update(i);});},function(t){return t.remove();}),this.navigator;},e.prototype.getBBox=function(){return this.navigator.getBBox();},e.prototype.render=function(t,e){var n=this.attributes.data;if(n&&0!==n.length){var i=this.renderNavigator((0,es.select)(e));this.renderItems(i.getContainer()),this.adjustLayout();}},e.prototype.dispatchCustomEvent=function(t,e){var n=new ed.CustomEvent(t,{detail:e});this.dispatchEvent(n);},e;}(er.Component),ez=(0,ef.classNames)({markerGroup:"marker-group",marker:"marker",labelGroup:"label-group",label:"label"},"handle"),eF={showLabel:!0,formatter:function(t){return t.toString();},markerSize:25,markerStroke:"#c5c5c5",markerFill:"#fff",markerLineWidth:1,labelFontSize:12,labelFill:"#c5c5c5",labelText:"",orientation:"vertical",spacing:0};!function(t){function e(e){return t.call(this,e,eF)||this;}(0,ei.__extends)(e,t),e.prototype.render=function(t,e){var n=(0,es.select)(e).maybeAppendByClassName(ez.markerGroup,"g");this.renderMarker(n);var i=(0,es.select)(e).maybeAppendByClassName(ez.labelGroup,"g");this.renderLabel(i);},e.prototype.renderMarker=function(t){var e=this,n=this.attributes,i=n.orientation,r=n.markerSymbol,a=void 0===r?(0,ew.ifHorizontal)(i,"horizontalHandle","verticalHandle"):r;(0,eB.ifShow)(!!a,t,function(t){var n=(0,eo.subStyleProps)(e.attributes,"marker"),i=(0,ei.__assign)({symbol:a},n);e.marker=t.maybeAppendByClassName(ez.marker,function(){return new eM.Marker({style:i});}).update(i);});},e.prototype.renderLabel=function(t){var e=this,n=this.attributes,i=n.showLabel,r=n.orientation,a=n.spacing,s=void 0===a?0:a,o=n.formatter;(0,eB.ifShow)(i,t,function(t){var n,i=(0,eo.subStyleProps)(e.attributes,"label"),a=i.text,l=(0,ei.__rest)(i,["text"]),d=(null===(n=t.select(ez.marker.class))||void 0===n?void 0:n.node().getBBox())||{},u=d.width,c=d.height,h=(0,ei.__read)((0,ew.ifHorizontal)(r,[0,(void 0===c?0:c)+s,"center","top"],[(void 0===u?0:u)+s,0,"start","middle"]),4),p=h[0],f=h[1],g=h[2],y=h[3];t.maybeAppendByClassName(ez.label,"text").styles((0,ei.__assign)((0,ei.__assign)({},l),{x:p,y:f,text:o(a).toString(),textAlign:g,textBaseline:y}));});};}(er.Component);var eG={showTitle:!0,padding:0,orientation:"horizontal",backgroundFill:"transparent",titleText:"",titleSpacing:4,titlePosition:"top-left",titleFill:"#2C3542",titleFontWeight:"bold",titleFontFamily:"sans-serif",titleFontSize:12},eV=(0,eg.deepAssign)({},eG,{});(0,eg.deepAssign)({},eG,(0,eo.superStyleProps)(eF,"handle"),{color:["#d0e3fa","#acc7f6","#8daaf2","#6d8eea","#4d73cd","#325bb1","#5a3e75","#8c3c79","#e23455","#e7655b"],indicatorBackgroundFill:"#262626",indicatorLabelFill:"white",indicatorLabelFontSize:12,indicatorVisibility:"hidden",labelAlign:"value",labelDirection:"positive",labelSpacing:5,showHandle:!0,showIndicator:!0,showLabel:!0,slidable:!0,titleText:"",type:"continuous"});var eW=(0,ef.classNames)({title:"title",titleGroup:"title-group",items:"items",itemsGroup:"items-group",contentGroup:"content-group",ribbonGroup:"ribbon-group",ribbon:"ribbon",handlesGroup:"handles-group",handle:"handle",startHandle:"start-handle",endHandle:"end-handle",labelGroup:"label-group",label:"label",indicator:"indicator"},"legend"),eH=function(t){function e(e){return t.call(this,e,eV)||this;}return(0,ei.__extends)(e,t),e.prototype.renderTitle=function(t,e,n){var i=this.attributes,r=i.showTitle,a=i.titleText,s=(0,eo.subStyleProps)(this.attributes,"title"),o=(0,ei.__read)((0,eo.splitStyle)(s),2),l=o[0],d=o[1];this.titleGroup=t.maybeAppendByClassName(eW.titleGroup,"g").styles(d);var u=(0,ei.__assign)((0,ei.__assign)({width:e,height:n},l),{text:r?a:""});this.title=this.titleGroup.maybeAppendByClassName(eW.title,function(){return new el.Title({style:u});}).update(u);},e.prototype.renderItems=function(t,e){var n=e.x,i=e.y,r=e.width,a=e.height,s=(0,eo.subStyleProps)(this.attributes,"title",!0),o=(0,ei.__read)((0,eo.splitStyle)(s),2),l=o[0],d=o[1],u=(0,ei.__assign)((0,ei.__assign)({},l),{width:r,height:a,x:0,y:0});this.itemsGroup=t.maybeAppendByClassName(eW.itemsGroup,"g").styles((0,ei.__assign)((0,ei.__assign)({},d),{transform:"translate(".concat(n,", ").concat(i,")")}));var c=this;this.itemsGroup.selectAll(eW.items.class).data(["items"]).join(function(t){return t.append(function(){return new ej({style:u});}).attr("className",eW.items.name).each(function(){c.items=(0,es.select)(this);});},function(t){return t.update(u);},function(t){return t.remove();});},e.prototype.adjustLayout=function(){if(this.attributes.showTitle){var t=this.title.node().getAvailableSpace(),e=t.x,n=t.y;this.itemsGroup.node().style.transform="translate(".concat(e,", ").concat(n,")");}},Object.defineProperty(e.prototype,"availableSpace",{get:function(){var t=this.attributes,e=t.showTitle,n=t.width,i=t.height;return e?this.title.node().getAvailableSpace():new ea.BBox(0,0,n,i);},enumerable:!1,configurable:!0}),e.prototype.getBBox=function(){var e,n,i=null===(e=this.title)||void 0===e?void 0:e.node(),r=null===(n=this.items)||void 0===n?void 0:n.node();return i&&r?(0,el.getBBox)(i,r):t.prototype.getBBox.call(this);},e.prototype.render=function(t,e){var n=this.attributes,i=n.width,r=n.height,a=n.x,s=n.y,o=(0,es.select)(e);e.style.transform="translate(".concat(void 0===a?0:a,", ").concat(void 0===s?0:s,")"),this.renderTitle(o,i,r),this.renderItems(o,this.availableSpace),this.adjustLayout();},e;}(er.Component),eK=n("5f4f7744"),eY=u._(eK),e$=n("f7384b74"),eU=n("ecd36f8f");function eX(t){let{width:e,height:n,renderer:i}=t,r=function(t){var e;let{container:n,className:i,graphCanvas:r}=t;if(n)return"string"==typeof n?document.getElementById(n):n;let a=(0,g.createPluginContainer)(i,!1),{width:s,height:o,containerStyle:l}=t,[d,u]=function(t){let{width:e,height:n,placement:i,graphCanvas:r}=t,[a,s]=r.getSize(),[o,l]=(0,eU.parsePlacement)(i);return[o*(a-e),l*(s-n)];}(t);return Object.assign(a.style,Object.assign({position:"absolute",left:d+"px",top:u+"px",width:s+"px",height:o+"px"},l)),null===(e=r.getContainer())||void 0===e||e.appendChild(a),a;}(t),a=new ed.Canvas({width:e,height:n,container:r,renderer:i||new e$.Renderer});return[r,a];}var eZ=this&&this.__rest||function(t,e){var n={};for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&0>e.indexOf(i)&&(n[i]=t[i]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols)for(var r=0,i=Object.getOwnPropertySymbols(t);r<i.length;r++)0>e.indexOf(i[r])&&Object.prototype.propertyIsEnumerable.call(t,i[r])&&(n[i[r]]=t[i[r]]);return n;};class eq extends f{constructor(t,e){super(t,Object.assign({},eq.defaultOptions,e)),this.typePrefix="__data__",this.draw=!1,this.fieldMap={node:new Map,edge:new Map,combo:new Map},this.selectedItems=[],this.bindEvents=()=>{let{graph:t}=this.context;t.on(X.GraphEvent.AFTER_DRAW,this.createElement);},this.changeState=(t,e)=>{let{graph:n}=this.context,{typePrefix:i}=this,r=(0,eY.default)(t,[i,"id"]),a=(0,eY.default)(t,[i,"style","labelText"]),[s]=r.split("__"),o=this.fieldMap[s].get(a)||[];n.setElementState(Object.fromEntries(null==o?void 0:o.map(t=>[t,e])));},this.click=t=>{if("hover"===this.options.trigger)return;let e=(0,eY.default)(t,[this.typePrefix,"id"]);this.selectedItems.includes(e)?(this.selectedItems=this.selectedItems.filter(t=>t!==e),this.changeState(t,[])):(this.selectedItems.push(e),this.changeState(t,"selected"));},this.mouseleave=t=>{"click"!==this.options.trigger&&(this.selectedItems=[],this.changeState(t,[]));},this.mouseenter=t=>{if("click"===this.options.trigger)return;let e=(0,eY.default)(t,[this.typePrefix,"id"]);this.selectedItems.includes(e)?this.selectedItems=this.selectedItems.filter(t=>t!==e):(this.selectedItems.push(e),this.changeState(t,"active"));},this.setFieldMap=(t,e,n)=>{if(!t)return;let i=this.fieldMap[n];if(i){if(i.has(t)){let n=i.get(t);n&&(n.push(e),i.set(t,n));}else i.set(t,[e]);}},this.getEvents=()=>({mouseenter:this.mouseenter,mouseleave:this.mouseleave,click:this.click}),this.getMarkerData=(t,e)=>{if(!t)return[];let{model:n,element:i}=this.context,{nodes:r,edges:a,combos:s}=n.getData(),o={},l=e=>(0,S.default)(t)?t(e):t,d={node:"circle",edge:"line",combo:"rect"},u={circle:"circle",ellipse:"circle",image:"bowtie",rect:"square",star:"cross",triangle:"triangle",diamond:"diamond",cubic:"dot",line:"hyphen",polyline:"hyphen",quadratic:"hv","cubic-horizontal":"hyphen","cubic-vertical":"line"},c=(t,e)=>null==i?void 0:i.getElementComputedStyle(t,e),h=(t,e)=>{t.forEach(t=>{let{id:n}=t,r=(0,eY.default)(t,["data",l(t)]),a=(null==i?void 0:i.getElementType(e,t))||"circle",s=c(e,t),h=("edge"===e?null==s?void 0:s.stroke:null==s?void 0:s.fill)||"#1783ff";n&&r&&r.replace(/\s+/g,"")&&(this.setFieldMap(r,n,e),o[r]||(o[r]={id:`${e}__${n}`,label:r,marker:u[a]||d[e],elementType:e,lineWidth:1,stroke:h,fill:h}));});};switch(e){case"node":h(r,"node");break;case"edge":h(a,"edge");break;case"combo":h(s,"combo");break;default:return[];}return Object.values(o);},this.createElement=()=>{if(this.draw){this.updateElement();return;}let t=this.options,{width:e,height:n,nodeField:i,edgeField:r,comboField:a,trigger:s,position:o,container:l,containerStyle:d,className:u}=t,c=eZ(t,["width","height","nodeField","edgeField","comboField","trigger","position","container","containerStyle","className"]),h=this.getMarkerData(i,"node"),p=this.getMarkerData(r,"edge"),f=new eH({className:"legend",style:Object.assign({width:e,height:n,data:[...h,...this.getMarkerData(a,"combo"),...p],itemMarkerLineWidth:({lineWidth:t})=>t,itemMarker:({marker:t})=>t,itemMarkerStroke:({stroke:t})=>t,itemMarkerFill:({fill:t})=>t,gridCol:h.length},c,this.getEvents())});this.category=f,this.upsertCanvas().appendChild(f),this.draw=!0;},this.bindEvents();}update(t){super.update(t),this.clear(),this.createElement();}clear(){var t,e;null===(t=this.canvas)||void 0===t||t.destroy(),null===(e=this.container)||void 0===e||e.remove(),this.canvas=void 0,this.container=void 0,this.draw=!1;}updateElement(){this.category&&this.category.update({itemMarkerOpacity:({id:t})=>!this.selectedItems.length||this.selectedItems.includes(t)?1:.5,itemLabelOpacity:({id:t})=>!this.selectedItems.length||this.selectedItems.includes(t)?1:.5});}upsertCanvas(){if(this.canvas)return this.canvas;let t=this.context.canvas,[e,n]=t.getSize(),{width:i=e,height:r=n,position:a,container:s,containerStyle:o,className:l}=this.options,[d,u]=eX({width:i,height:r,graphCanvas:t,container:s,containerStyle:o,placement:a,className:"legend"});return this.container=d,l&&d.classList.add(l),this.canvas=u,this.canvas;}destroy(){this.clear(),this.context.graph.off(X.GraphEvent.AFTER_DRAW,this.createElement),super.destroy();}}eq.defaultOptions={position:"bottom",trigger:"hover",orientation:"horizontal",layout:"flex",itemSpacing:4,rowPadding:10,colPadding:10,itemMarkerSize:16,itemLabelFontSize:16,width:240,height:160};var eQ=n("ae60ca9f"),eJ=u._(eQ),e0=n("50905a3a");class e1 extends f{constructor(t,e){super(t,Object.assign({},e1.defaultOptions,e)),this.onDraw=t=>{var e;null!==(e=null==t?void 0:t.data)&&void 0!==e&&e.render||this.onRender();},this.shapes=new Map,this.landmarkMap=new Map,this.mask=null,this.isMaskDragging=!1,this.onMaskDragStart=t=>{this.mask&&(this.isMaskDragging=!0,this.mask.setPointerCapture(t.pointerId),this.mask.addEventListener("pointermove",this.onMaskDrag),this.mask.addEventListener("pointerup",this.onMaskDragEnd),this.mask.addEventListener("pointercancel",this.onMaskDragEnd));},this.onMaskDrag=t=>{if(!this.mask||!this.isMaskDragging)return;let{size:[e,n]}=this.options,{movementX:i,movementY:r}=t,{left:a,top:s,width:o,height:l}=this.mask.style,[,,d,u]=this.maskBBox,c=parseInt(a)+i,h=parseInt(s)+r,p=parseInt(o),f=parseInt(l);c<0&&(c=0),h<0&&(h=0),c+p>e&&(c=e3(e-p,0)),h+f>n&&(h=e3(n-f,0)),p<d&&(i>0?(c=e3(c-i,0),p=e2(p+i,e)):i<0&&(p=e2(p-i,e))),f<u&&(r>0?(h=e3(h-r,0),f=e2(f+r,n)):r<0&&(f=e2(f-r,n))),Object.assign(this.mask.style,{left:c+"px",top:h+"px",width:p+"px",height:f+"px"});let g=parseInt(a)-c,y=parseInt(s)-h;if(0===g&&0===y)return;let m=this.context.canvas.getCamera().getZoom()/this.canvas.getCamera().getZoom();this.context.graph.translateBy([g*m,y*m],!1);},this.onMaskDragEnd=t=>{this.mask&&(this.isMaskDragging=!1,this.mask.releasePointerCapture(t.pointerId),this.mask.removeEventListener("pointermove",this.onMaskDrag),this.mask.removeEventListener("pointerup",this.onMaskDragEnd),this.mask.removeEventListener("pointercancel",this.onMaskDragEnd));},this.onTransform=(0,eJ.default)(()=>{this.isMaskDragging||(this.updateMask(),this.setCamera());},32,{leading:!0}),this.setOnRender(),this.bindEvents();}update(t){this.unbindEvents(),super.update(t),"delay"in t&&this.setOnRender(),this.bindEvents();}setOnRender(){this.onRender=(0,eE.default)(()=>{this.renderMinimap(),this.renderMask();},this.options.delay);}bindEvents(){let{graph:t}=this.context;t.on(X.GraphEvent.AFTER_DRAW,this.onDraw),t.on(X.GraphEvent.AFTER_RENDER,this.onRender),t.on(X.GraphEvent.AFTER_TRANSFORM,this.onTransform);}unbindEvents(){let{graph:t}=this.context;t.off(X.GraphEvent.AFTER_DRAW,this.onDraw),t.off(X.GraphEvent.AFTER_RENDER,this.onRender),t.off(X.GraphEvent.AFTER_TRANSFORM,this.onTransform);}renderMinimap(){let t=this.getElements(),e=this.initCanvas();this.setShapes(e,t);}getElements(){let{filter:t}=this.options,{model:e}=this.context,n=e.getData();if(!t)return n;let{nodes:i,edges:r,combos:a}=n;return{nodes:i.filter(e=>t((0,J.idOf)(e),"node")),edges:r.filter(e=>t((0,J.idOf)(e),"edge")),combos:a.filter(e=>t((0,J.idOf)(e),"combo"))};}setShapes(t,e){let{nodes:n,edges:i,combos:r}=e,{shape:a}=this.options,{element:s}=this.context;if("key"===a){let e=new Set,a=n=>{let i=(0,J.idOf)(n);e.add(i);let r=s.getElement(i);if(!r)return;let a=r.getShape("key"),o=this.shapes.get(i)||a.cloneNode();o.setPosition(a.getPosition()),r.style.zIndex&&(o.style.zIndex=r.style.zIndex),o.id=r.id,this.shapes.has(i)?Object.entries(a.attributes).forEach(([t,e])=>{o.style[t]!==e&&(o.style[t]=e);}):(t.appendChild(o),this.shapes.set(i,o));};i.forEach(a),r.forEach(a),n.forEach(a),this.shapes.forEach((n,i)=>{e.has(i)||(t.removeChild(n),this.shapes.delete(i));});return;}let o=(t,e)=>{let n=s.getElement(t).getPosition();return e.setPosition(n),e;};t.removeChildren(),i.forEach(e=>t.appendChild(a((0,J.idOf)(e),"edge"))),r.forEach(e=>{t.appendChild(o((0,J.idOf)(e),a((0,J.idOf)(e),"combo")));}),n.forEach(e=>{t.appendChild(o((0,J.idOf)(e),a((0,J.idOf)(e),"node")));});}initCanvas(){let{renderer:t,size:[e,n]}=this.options;if(this.canvas){let{width:i,height:r}=this.canvas.getConfig();(e!==i||n!==r)&&this.canvas.resize(e,n),t&&this.canvas.setRenderer(t);}else{let{className:i,position:r,container:a,containerStyle:s}=this.options,[o,l]=eX({renderer:t,width:e,height:n,placement:r,className:"minimap",container:a,containerStyle:s,graphCanvas:this.context.canvas});i&&o.classList.add(i),this.container=o,this.canvas=l;}return this.setCamera(),this.canvas;}createLandmark(t,e,n){let i=`${t.join(",")}-${e.join(",")}-${n}`;if(this.landmarkMap.has(i))return this.landmarkMap.get(i);let r=this.canvas.getCamera().createLandmark(i,{position:t,focalPoint:e,zoom:n});return this.landmarkMap.set(i,r),r;}setCamera(){var t;let{canvas:e}=this.context,n=null===(t=this.canvas)||void 0===t?void 0:t.getCamera();if(!n)return;let{size:[i,r],padding:a}=this.options,[s,o,l,d]=(0,e0.parsePadding)(a),{min:u,max:c,center:h}=e.getBounds("elements"),p=Math.min((i-d-o)/(c[0]-u[0]),(r-s-l)/(c[1]-u[1])),f=this.createLandmark(h,h,p);n.gotoLandmark(f,0);}get maskBBox(){let{canvas:t}=this.context,e=t.getSize(),n=t.getCanvasByViewport([0,0]),i=t.getCanvasByViewport(e),r=this.canvas.canvas2Viewport((0,te.toPointObject)(n)),a=this.canvas.canvas2Viewport((0,te.toPointObject)(i)),s=a.x-r.x,o=a.y-r.y;return[r.x,r.y,s,o];}calculateMaskBBox(){let{size:[t,e]}=this.options,[n,i,r,a]=this.maskBBox;return n<0&&(r=e2(r+n,t),n=0),i<0&&(a=e2(a+i,e),i=0),n+r>t&&(r=e3(t-n,0)),i+a>e&&(a=e3(e-i,0)),[e2(n,t),e2(i,e),e3(r,0),e3(a,0)];}renderMask(){let{maskStyle:t}=this.options;this.mask||(this.mask=document.createElement("div"),this.mask.addEventListener("pointerdown",this.onMaskDragStart)),this.container.appendChild(this.mask),Object.assign(this.mask.style,Object.assign(Object.assign({},t),{cursor:"move",position:"absolute",pointerEvents:"auto"})),this.updateMask();}updateMask(){if(!this.mask)return;let[t,e,n,i]=this.calculateMaskBBox();Object.assign(this.mask.style,{top:e+"px",left:t+"px",width:n+"px",height:i+"px"});}destroy(){var t;this.unbindEvents(),this.canvas.destroy(),null===(t=this.mask)||void 0===t||t.remove(),super.destroy();}}e1.defaultOptions={size:[240,160],shape:"key",padding:10,position:"right-bottom",maskStyle:{border:"1px solid #ddd",background:"rgba(0, 0, 0, 0.1)"},containerStyle:{border:"1px solid #ddd",background:"#fff"},delay:128};let e2=(t,e)=>Math.min(t,e),e3=(t,e)=>Math.max(t,e);var e6=n("19365c34"),e5=this&&this.__awaiter||function(t,e,n,i){return new(n||(n=Promise))(function(r,a){function s(t){try{l(i.next(t));}catch(t){a(t);}}function o(t){try{l(i.throw(t));}catch(t){a(t);}}function l(t){var e;t.done?r(t.value):((e=t.value)instanceof n?e:new n(function(t){t(e);})).then(s,o);}l((i=i.apply(t,e||[])).next());});};let e4={x1:0,y1:0,x2:0,y2:0,visibility:"hidden"};class e8 extends f{constructor(t,e){super(t,Object.assign({},e8.defaultOptions,e)),this.initSnapline=()=>{let t=this.context.canvas.getLayer("transient");this.horizontalLine||(this.horizontalLine=t.appendChild(new ed.Line({style:Object.assign(Object.assign({},e4),this.options.horizontalLineStyle)}))),this.verticalLine||(this.verticalLine=t.appendChild(new ed.Line({style:Object.assign(Object.assign({},e4),this.options.verticalLineStyle)})));},this.isHorizontalSticking=!1,this.isVerticalSticking=!1,this.enableStick=!0,this.autoSnapToLine=(t,e,n)=>e5(this,void 0,void 0,function*(){let{verticalX:i,horizontalY:r}=n,{tolerance:a}=this.options,{min:[s,o],max:[l,d],center:[u,c]}=e,h=0,p=0;null!==i&&(e9(l,i)<a&&(h=i-l),e9(s,i)<a&&(h=i-s),e9(u,i)<a&&(h=i-u),0!==h&&(this.isVerticalSticking=!0)),null!==r&&(e9(d,r)<a&&(p=r-d),e9(o,r)<a&&(p=r-o),e9(c,r)<a&&(p=r-c),0!==p&&(this.isHorizontalSticking=!0)),(0!==h||0!==p)&&(yield this.context.graph.translateElementBy({[t]:[h,p]},!1));}),this.enableSnap=t=>{let{target:e}=t;if(this.isHorizontalSticking||this.isVerticalSticking){let[n,i]=this.getDelta(t);if(this.isHorizontalSticking&&this.isVerticalSticking&&.5>=Math.abs(n)&&.5>=Math.abs(i))return this.context.graph.translateElementBy({[e.id]:[-n,-i]},!1),!1;if(this.isHorizontalSticking&&.5>=Math.abs(i))return this.context.graph.translateElementBy({[e.id]:[0,-i]},!1),!1;if(this.isVerticalSticking&&.5>=Math.abs(n))return this.context.graph.translateElementBy({[e.id]:[-n,0]},!1),!1;this.isHorizontalSticking=!1,this.isVerticalSticking=!1,this.enableStick=!1,setTimeout(()=>{this.enableStick=!0;},200);}return this.enableStick;},this.calcSnaplineMetadata=(t,e)=>{let{tolerance:n,shape:i}=this.options,{min:[r,a],max:[s,o],center:[l,d]}=e,u=null,c=null,h=null,p=null,f=null,g=null;return this.getNodes().some(e=>{if((0,x.default)(t.id,e.id))return!1;let{min:[y,m],max:[b,v],center:[E,O]}=e7(e,i).getRenderBounds();return null===u&&(e9(E,l)<n?u=E:e9(y,r)<n?u=y:e9(y,s)<n?u=y:e9(b,s)<n?u=b:e9(b,r)<n&&(u=b),null!==u&&(c=Math.min(m,a),h=Math.max(v,o))),null===p&&(e9(O,d)<n?p=O:e9(m,a)<n?p=m:e9(m,o)<n?p=m:e9(v,o)<n?p=v:e9(v,a)<n&&(p=v),null!==p&&(f=Math.min(y,r),g=Math.max(b,s))),null!==u&&null!==p;}),{verticalX:u,verticalMinY:c,verticalMaxY:h,horizontalY:p,horizontalMinX:f,horizontalMaxX:g};},this.onDragStart=()=>{this.initSnapline();},this.onDrag=t=>e5(this,void 0,void 0,function*(){let{target:e}=t;if(this.options.autoSnap&&!this.enableSnap(t))return;let n=e7(e,this.options.shape).getRenderBounds(),i=this.calcSnaplineMetadata(e,n);this.hideSnapline(),(null!==i.verticalX||null!==i.horizontalY)&&this.updateSnapline(i),this.options.autoSnap&&(yield this.autoSnapToLine(e.id,n,i));}),this.onDragEnd=()=>{this.hideSnapline();},this.bindEvents();}getNodes(){var t;let{filter:e}=this.options,n=((null===(t=this.context.element)||void 0===t?void 0:t.getNodes())||[]).filter(t=>{var e;return(0,e6.isVisible)(t)&&(null===(e=this.context.viewport)||void 0===e?void 0:e.isInViewport(t.getRenderBounds()));});return e?n.filter(t=>e(t)):n;}hideSnapline(){this.horizontalLine.style.visibility="hidden",this.verticalLine.style.visibility="hidden";}getLineWidth(t){let{lineWidth:e}=this.options[`${t}LineStyle`];return+(e||e4.lineWidth||1)/this.context.graph.getZoom();}updateSnapline(t){let{verticalX:e,verticalMinY:n,verticalMaxY:i,horizontalY:r,horizontalMinX:a,horizontalMaxX:s}=t,[o,l]=this.context.canvas.getSize(),{offset:d}=this.options;null!==r?Object.assign(this.horizontalLine.style,{x1:d===1/0?0:a-d,y1:r,x2:d===1/0?o:s+d,y2:r,visibility:"visible",lineWidth:this.getLineWidth("horizontal")}):this.horizontalLine.style.visibility="hidden",null!==e?Object.assign(this.verticalLine.style,{x1:e,y1:d===1/0?0:n-d,x2:e,y2:d===1/0?l:i+d,visibility:"visible",lineWidth:this.getLineWidth("vertical")}):this.verticalLine.style.visibility="hidden";}getDelta(t){let e=this.context.graph.getZoom();return(0,tp.divide)([t.dx,t.dy],e);}bindEvents(){return e5(this,void 0,void 0,function*(){let{graph:t}=this.context;t.on(X.NodeEvent.DRAG_START,this.onDragStart),t.on(X.NodeEvent.DRAG,this.onDrag),t.on(X.NodeEvent.DRAG_END,this.onDragEnd);});}unbindEvents(){let{graph:t}=this.context;t.off(X.NodeEvent.DRAG_START,this.onDragStart),t.off(X.NodeEvent.DRAG,this.onDrag),t.off(X.NodeEvent.DRAG_END,this.onDragEnd);}destroyElements(){var t,e;null===(t=this.horizontalLine)||void 0===t||t.destroy(),null===(e=this.verticalLine)||void 0===e||e.destroy();}destroy(){this.destroyElements(),this.unbindEvents(),super.destroy();}}e8.defaultOptions={tolerance:5,offset:20,autoSnap:!0,shape:"key",verticalLineStyle:{stroke:"#1783FF"},horizontalLineStyle:{stroke:"#1783FF"},filter:()=>!0};let e9=(t,e)=>Math.abs(t-e),e7=(t,e)=>"function"==typeof e?e(t):t.getShape(e);function nt(t,e){var n={YYYY:t.getFullYear(),MM:t.getMonth()+1,DD:t.getDate(),HH:t.getHours(),mm:t.getMinutes(),ss:t.getSeconds()},i=e;return Object.keys(n).forEach(function(t){var e=n[t];i=i.replace(t,"YYYY"===t?"".concat(e):"".concat(e).padStart(2,"0"));}),i;}var ne=n("5611056c"),nn=n("92411432"),ni=n("5cfebd90"),nr=function(t,e){return t.style.opacity||(t.style.opacity=1),(0,ex.transition)(t,{opacity:0},e);},na=["$el","cx","cy","d","dx","dy","fill","fillOpacity","filter","fontFamily","fontSize","fontStyle","fontVariant","fontWeight","height","img","increasedLineWidthForHitTesting","innerHTML","isBillboard","billboardRotation","isSizeAttenuation","isClosed","isOverflowing","leading","letterSpacing","lineDash","lineHeight","lineWidth","markerEnd","markerEndOffset","markerMid","markerStart","markerStartOffset","maxLines","metrics","miterLimit","offsetX","offsetY","opacity","path","points","r","radius","rx","ry","shadowColor","src","stroke","strokeOpacity","text","textAlign","textBaseline","textDecorationColor","textDecorationLine","textDecorationStyle","textOverflow","textPath","textPathSide","textPathStartOffset","transform","transformOrigin","visibility","width","wordWrap","wordWrapWidth","x","x1","x2","y","y1","y2","z1","z2","zIndex"];function ns(t){var e={};for(var n in t)na.includes(n)&&(e[n]=t[n]);return e;}var no=(0,ef.classNames)({lineGroup:"line-group",line:"line",regionGroup:"region-group",region:"region"},"grid");function nl(t){return t.reduce(function(t,e,n){return t.push((0,ei.__spreadArray)([0===n?"M":"L"],(0,ei.__read)(e),!1)),t;},[]);}function nd(t,e,n){return"surround"===e.type?function(t,e,n){var i=e.connect,r=e.center;if("line"===(void 0===i?"line":i))return nl(t);if(!r)return[];var a=(0,ni.distance)(t[0],r),s=n?0:1;return t.reduce(function(t,e,n){return 0===n?t.push((0,ei.__spreadArray)(["M"],(0,ei.__read)(e),!1)):t.push((0,ei.__spreadArray)(["A",a,a,0,0,s],(0,ei.__read)(e),!1)),t;},[]);}(t,e,n):nl(t);}var nu=function(t){function e(){return null!==t&&t.apply(this,arguments)||this;}return(0,ei.__extends)(e,t),e.prototype.render=function(t,e){t.type,t.center,t.areaFill,t.closed;var n,i,r,a,s,o=(0,ei.__rest)(t,["type","center","areaFill","closed"]),l=(i=void 0===(n=t.data)?[]:n,t.closed?i.map(function(t){var e=t.points,n=(0,ei.__read)(e,1)[0];return(0,ei.__assign)((0,ei.__assign)({},t),{points:(0,ei.__spreadArray)((0,ei.__spreadArray)([],(0,ei.__read)(e),!1),[n],!1)});}):i),d=(0,es.select)(e).maybeAppendByClassName(no.lineGroup,"g"),u=(0,es.select)(e).maybeAppendByClassName(no.regionGroup,"g"),c=(r=t.animate,a=t.isBillboard,s=l.map(function(e,n){return{id:e.id||"grid-line-".concat(n),d:nd(e.points,t)};}),d.selectAll(no.line.class).data(s,function(t){return t.id;}).join(function(t){return t.append("path").each(function(t,e){var n=(0,ey.getCallbackValue)(ns((0,ei.__assign)({d:t.d},o)),[t,e,s]);this.attr((0,ei.__assign)({class:no.line.name,stroke:"#D9D9D9",lineWidth:1,lineDash:[4,4],isBillboard:a},n));});},function(t){return t.transition(function(t,e){var n=(0,ey.getCallbackValue)(ns((0,ei.__assign)({d:t.d},o)),[t,e,s]);return(0,ex.transition)(this,n,r.update);});},function(t){return t.transition(function(){var t=this,e=nr(this,r.exit);return(0,ex.onAnimateFinished)(e,function(){return t.remove();}),e;});}).transitions()),h=function(t,e,n){var i=n.animate,r=n.connect,a=n.areaFill;if(e.length<2||!a||!r)return[];for(var s=Array.isArray(a)?a:[a,"transparent"],o=[],l=0;l<e.length-1;l++){var d=(0,ei.__read)([e[l].points,e[l+1].points],2),u=function(t,e,n){var i=n.type,r=n.connect,a=n.center,s=n.closed?[["Z"]]:[],o=(0,ei.__read)([nd(t,n),nd(e.slice().reverse(),n,!0)],2),l=o[0],d=o[1],u=(0,ei.__read)([t[0],e.slice(-1)[0]],2),c=u[0],h=u[1],p=function(t,e){return[l,t,d,e,s].flat();};if("line"===r||"surround"===i)return p([(0,ei.__spreadArray)(["L"],(0,ei.__read)(h),!1)],[(0,ei.__spreadArray)(["L"],(0,ei.__read)(c),!1)]);if(!a)throw Error("Arc grid need to specified center");var f=(0,ei.__read)([(0,ni.distance)(h,a),(0,ni.distance)(c,a)],2),g=f[0],y=f[1];return p([(0,ei.__spreadArray)(["A",g,g,0,0,1],(0,ei.__read)(h),!1),(0,ei.__spreadArray)(["L"],(0,ei.__read)(h),!1)],[(0,ei.__spreadArray)(["A",y,y,0,0,0],(0,ei.__read)(c),!1),(0,ei.__spreadArray)(["L"],(0,ei.__read)(c),!1)]);}(d[0],d[1],n);o.push({d:u,fill:s[l%s.length]});}return t.selectAll(no.region.class).data(o,function(t,e){return e;}).join(function(t){return t.append("path").each(function(t,e){var n=(0,ey.getCallbackValue)(t,[t,e,o]);this.attr(n);}).attr("className",no.region.name);},function(t){return t.transition(function(t,e){var n=(0,ey.getCallbackValue)(t,[t,e,o]);return(0,ex.transition)(this,n,i.update);});},function(t){return t.transition(function(){var t=this,e=nr(this,i.exit);return(0,ex.onAnimateFinished)(e,function(){return t.remove();}),e;});}).transitions();}(u,l,t);return(0,ei.__spreadArray)((0,ei.__spreadArray)([],(0,ei.__read)(c),!1),(0,ei.__read)(h),!1);},e;}(er.Component),nc=n("fd874913"),nh=n("df7ebc79");function np(t){var e=t.type,n=t.gridCenter;return"linear"===e?n:n||t.center;}var nf=n("b3c7b6b4");function ng(t,e,n,i,r){return void 0===i&&(i=!0),void 0===r&&(r=!1),!!i&&t===e||!!r&&t===n||t>e&&t<n;}function ny(t,e){if(e)try{var n=e.replace(/translate\(([+-]*[\d]+[%]*),[ ]*([+-]*[\d]+[%]*)\)/g,function(e,n,i){var r,a,s,o;return"translate(".concat((a=(r=t.getBBox()).width,s=r.height,[(o=(0,ei.__read)([n,i].map(function(t,e){var n;return t.includes("%")?parseFloat((null===(n=t.match(/[+-]?([0-9]*[.])?[0-9]+/))||void 0===n?void 0:n[0])||"0")/100*(0===e?a:s):t;}),2))[0],o[1]]),")");});t.attr("transform",n);}catch(t){}}var nm=n("8a72171f"),nb=n("7790be94"),nv=n("1c656441"),nE=u._(nv),nx=n("3aba4fd0");function nO(t,e){return(void 0===e&&(e={}),(0,nE.default)(t))?0:"number"==typeof t?t:Math.floor((0,nm.measureTextWidth)(t,e));}var nS={parity:function(t,e){var n=e.seq,i=void 0===n?2:n;return t.filter(function(t,e){return!(e%i)||((0,eO.hide)(t),!1);});}},n_=new Map([["hide",function(t,e,n,i){var r,a,s=t.length,o=e.keepHeader,l=e.keepTail;if(!(s<=1)&&(2!==s||!o||!l)){var d=nS.parity,u=function(t){return t.forEach(i.show),t;},c=2,h=t.slice(),p=t.slice(),f=Math.min.apply(Math,(0,ei.__spreadArray)([1],(0,ei.__read)(t.map(function(t){return t.getBBox().width;})),!1));if("linear"===n.type&&((0,nc.isAxisHorizontal)(n)||(0,nc.isAxisVertical)(n))){var g=(0,eA.getLocalBBox)(t[0]).left,y=Math.abs((0,eA.getLocalBBox)(t[s-1]).right-g)||1;c=Math.max(Math.floor(s*f/y),c);}for(o&&(r=h.splice(0,1)[0]),l&&(a=h.splice(-1,1)[0],h.reverse()),u(h);c<t.length&&(0,nx.boundTest)((a?(0,ei.__spreadArray)((0,ei.__spreadArray)([a],(0,ei.__read)(p),!1),[r],!1):(0,ei.__spreadArray)([r],(0,ei.__read)(p),!1)).filter(nf.defined),n,null==e?void 0:e.margin).length;){if(a&&!r&&c%2==0){var m=h.splice(0,1);m.forEach(i.hide);}else if(a&&r){var m=h.splice(0,1);m.forEach(i.hide);}p=d(u(h),{seq:c}),c++;}}}],["rotate",function(t,e,n,i){var r,a,s=e.optionalAngles,o=e.margin,l=e.recoverWhenFailed,d=t.map(function(t){return t.getLocalEulerAngles();}),u=function(e){return t.forEach(function(t,n){var r=Array.isArray(e)?e[n]:e;i.rotate(t,+r);});};try{for(var c=(0,ei.__values)(void 0===s?[0,45,90]:s),h=c.next();!h.done;h=c.next()){var p=h.value;if(u(p),(0,nx.boundTest)(t,n,o).length<1)return;}}catch(t){r={error:t};}finally{try{h&&!h.done&&(a=c.return)&&a.call(c);}finally{if(r)throw r.error;}}(void 0===l||l)&&u(d);}],["ellipsis",function(t,e,n,i){if(!(t.length<=1)){var r=e.suffix,a=void 0===r?"...":r,s=e.minLength,o=e.maxLength,l=void 0===o?1/0:o,d=e.step,u=e.margin,c=void 0===u?[0,0,0,0]:u,h=(0,nm.getFont)(i.getTextShape(t[0])),p=nO(void 0===d?" ":d,h),f=s?nO(s,h):p,g=nO(l,h);((0,nE.default)(g)||g===1/0)&&(g=Math.max.apply(null,t.map(function(t){return t.getBBox().width;})));var y=t.slice(),m=(0,ei.__read)(c,4);m[0],m[1],m[2],m[3];for(var b=function(e){if(y.forEach(function(t){i.ellipsis(i.getTextShape(t),e,a);}),(y=(0,nx.boundTest)(t,n,c)).length<1)return{value:void 0};},v=g;v>f+p;v-=p){var E=b(v);if("object"==typeof E)return E.value;}}}],["wrap",function(t,e,n,i){var r,a,s=e.wordWrapWidth,o=void 0===s?50:s,l=e.maxLines,d=void 0===l?3:l,u=e.recoverWhenFailed,c=e.margin,h=void 0===c?[0,0,0,0]:c,p=t.map(function(t){return t.attr("maxLines")||1;}),f=Math.min.apply(Math,(0,ei.__spreadArray)([],(0,ei.__read)(p),!1)),g=(r=n.type,a=n.labelDirection,"linear"===r&&(0,nc.isAxisHorizontal)(n)?"negative"===a?"bottom":"top":"middle"),y=function(e){return t.forEach(function(t,n){var r=Array.isArray(e)?e[n]:e;i.wrap(t,o,r,g);});};if(!(f>d)){for(var m=f;m<=d;m++)if(y(m),(0,nx.boundTest)(t,n,h).length<1)return;(void 0===u||u)&&y(p);}}]]),nP=n("d5e6375b");function nC(t){for(var e=t;e<0;)e+=360;return Math.round(e%360);}function nw(t,e){var n=(0,ei.__read)(t,2),i=n[0],r=n[1],a=(0,ei.__read)(e,2),s=a[0],o=a[1],l=(0,ei.__read)([i*s+r*o,i*o-r*s],2),d=l[0];return Math.atan2(l[1],d);}function nM(t,e,n){var i=n.type,r=n.labelAlign,a=(0,nh.getLabelVector)(t,n),s=nC(e),o=nC((0,nn.radToDeg)(nw([1,0],a))),l="center",d="middle";return"linear"===i?[90,270].includes(o)&&0===s?(l="center",d=1===a[1]?"top":"bottom"):!(o%180)&&[90,270].includes(s)?l="center":0===o?ng(s,0,90,!1,!0)?l="start":(ng(s,0,90)||ng(s,270,360))&&(l="start"):90===o?ng(s,0,90,!1,!0)?l="start":(ng(s,90,180)||ng(s,270,360))&&(l="end"):270===o?ng(s,0,90,!1,!0)?l="end":(ng(s,90,180)||ng(s,270,360))&&(l="start"):180===o&&(90===s?l="start":(ng(s,0,90)||ng(s,270,360))&&(l="end")):"parallel"===r?d=ng(o,0,180,!0)?"top":"bottom":"horizontal"===r?ng(o,90,270,!1)?l="end":(ng(o,270,360,!1)||ng(o,0,90))&&(l="start"):"perpendicular"===r&&(l=ng(o,90,270)?"end":"start"),{textAlign:l,textBaseline:d};}function nA(t,e,n){var i=n.showTick,r=n.tickLength,a=n.tickDirection,s=n.labelDirection,o=n.labelSpacing,l=e.indexOf(t),d=(0,ey.getCallbackValue)(o,[t,l,e]),u=(0,ei.__read)([(0,nh.getLabelVector)(t.value,n),(0,nP.getFactor)(s,a)],2),c=u[0],h=1===u[1]?(0,ey.getCallbackValue)(i?r:0,[t,l,e]):0,p=(0,ei.__read)((0,ni.add)((0,ni.scale)(c,d+h),(0,nc.getValuePos)(t.value,n)),2);return{x:p[0],y:p[1]};}function nT(t,e){"text"===t.nodeName&&t.attr(e);}function nB(t){var e,n,i,r;e=this.node().childNodes,n={hide:eO.hide,show:eO.show,rotate:function(e,n){!function(t,e,n){e.setLocalEulerAngles(t);var i=nM(e.__data__.value,t,n),r=e.querySelector(ne.CLASS_NAMES.labelItem.class);r&&nT(r,i);}(+n,e,t);},ellipsis:function(t,e,n){t&&(0,eT.ellipsisIt)(t,e||1/0,n);},wrap:function(t,e,n){var i,r;t&&(void 0===(i=n)&&(i=2),void 0===r&&(r="top"),(0,nm.applyToText)(t,{wordWrap:!0,wordWrapWidth:e,maxLines:i,textBaseline:r}));},getTextShape:function(t){return t.querySelector("text");}},(r=void 0===(i=t.labelOverlap)?[]:i).length&&r.forEach(function(i){var r=i.type,a=n_.get(r);t.labelOverlap.length<1||("hide"===r?(0,nb.isInOffscreenGroup)(e[0]):"rotate"===r?e.some(function(t){var e;return!!(null===(e=t.attr("transform"))||void 0===e?void 0:e.includes("rotate"));}):("ellipsis"===r||"wrap"===r)&&!(e.filter(function(t){return t.querySelector("text");}).length>1))||null==a||a(e,i,t,n);});}function nD(t,e,n,i,r){var a,s=n.indexOf(e),o=(0,es.select)(t).append((a=r.labelFormatter,(0,S.default)(a)?function(){return(0,eL.renderExtDo)((0,ey.getCallbackValue)(a,[e,s,n,(0,nh.getLabelVector)(e.value,r)]));}:function(){return(0,eL.renderExtDo)(e.label||"");})).attr("className",ne.CLASS_NAMES.labelItem.name).node(),l=(0,ei.__read)((0,eo.splitStyle)((0,nh.getCallbackStyle)(i,[e,s,n])),2),d=l[0],u=l[1],c=u.transform,h=(0,ei.__rest)(u,["transform"]);ny(o,c);var p=function(t,e,n){var i,r,a=n.labelAlign;if(null===(r=e.style.transform)||void 0===r?void 0:r.includes("rotate"))return e.getLocalEulerAngles();var s=0,o=(0,nh.getLabelVector)(t.value,n),l=(0,nh.getLineTangentVector)(t.value,n);return"horizontal"===a?0:(s="perpendicular"===a?nw([1,0],o):nw([l[0]<0?-1:1,0],l),ng(i=((0,nn.radToDeg)(s)+360)%180,-90,90)||(i+=180),i);}(e,o,r);return o.getLocalEulerAngles()||o.setLocalEulerAngles(p),nT(o,(0,ei.__assign)((0,ei.__assign)({},nM(e.value,p,r)),d)),t.attr(h),o;}function nL(t,e){return(0,nh.getDirectionVector)(t,e.tickDirection,e);}function nN(t,e,n,i,r,a){var s,o,l,d,u,c,h,p,f,g,y,m,b,v,E,x,O,_,P,C,w,M=(s=(0,es.select)(this),o=i.tickFormatter,l=nL(t.value,i),d="line",(0,S.default)(o)&&(d=function(){return(0,ey.getCallbackValue)(o,[t,e,n,l]);}),s.append(d).attr("className",ne.CLASS_NAMES.tickItem.name));u=nL(t.value,i),E=(c=i.tickLength,f=(0,ei.__read)((h=(0,ey.getCallbackValue)(c,[t,e,n]),[[0,0],[(p=(0,ei.__read)(u,2))[0]*h,p[1]*h]]),2),y=(g=(0,ei.__read)(f[0],2))[0],m=g[1],v={x1:y,x2:(b=(0,ei.__read)(f[1],2))[0],y1:m,y2:b[1]}).x1,x=v.x2,O=v.y1,_=v.y2,C=(P=(0,ei.__read)((0,eo.splitStyle)((0,nh.getCallbackStyle)(r,[t,e,n,u])),2))[0],w=P[1],"line"===M.node().nodeName&&M.styles((0,ei.__assign)({x1:E,x2:x,y1:O,y2:_},C)),this.attr(w),M.styles(C);var A=(0,ei.__read)((0,nc.getValuePos)(t.value,i),2),T=A[0],B=A[1];return(0,ex.transition)(this,{transform:"translate(".concat(T,", ").concat(B,")")},a);}function nR(t,e,n,i,r){var a=(0,eo.subStyleProps)(i,"title"),s=(0,ei.__read)((0,eo.splitStyle)(a),2),o=s[0],l=s[1],d=l.transform,u=l.transformOrigin,c=(0,ei.__rest)(l,["transform","transformOrigin"]);e.styles(c);var h=d||function(t,e,n){var i=2*t.getGeometryBounds().halfExtents[1];if("vertical"===e){if("left"===n)return"rotate(-90) translate(0, ".concat(i/2,")");if("right"===n)return"rotate(-90) translate(0, -".concat(i/2,")");}return"";}(t.node(),o.direction,o.position);t.styles((0,ei.__assign)((0,ei.__assign)({},o),{transformOrigin:u})),ny(t.node(),h);var p=function(t,e,n){var i=n.titlePosition,r=void 0===i?"lb":i,a=n.titleSpacing,s=(0,el.parsePosition)(r),o=t.node().getLocalBounds(),l=(0,ei.__read)(o.min,2),d=l[0],u=l[1],c=(0,ei.__read)(o.halfExtents,2),h=c[0],p=c[1],f=(0,ei.__read)(e.node().getLocalBounds().halfExtents,2),g=f[0],y=f[1],m=(0,ei.__read)([d+h,u+p],2),b=m[0],v=m[1],E=(0,ei.__read)((0,eD.parseSeriesAttr)(a),4),x=E[0],O=E[1],S=E[2],_=E[3];if(["start","end"].includes(r)&&"linear"===n.type){var P=n.startPos,C=n.endPos,w=(0,ei.__read)("start"===r?[P,C]:[C,P],2),M=w[0],A=w[1],T=(0,ni.normalize)([-A[0]+M[0],-A[1]+M[1]]),B=(0,ei.__read)((0,ni.scale)(T,x),2),D=B[0],L=B[1];return{x:M[0]+D,y:M[1]+L};}return s.includes("t")&&(v-=p+y+x),s.includes("r")&&(b+=h+g+O),s.includes("l")&&(b-=h+g+_),s.includes("b")&&(v+=p+y+S),{x:b,y:v};}((0,es.select)(n._offscreen||n.querySelector(ne.CLASS_NAMES.mainGroup.class)),e,i),f=p.x,g=p.y;return(0,ex.transition)(e.node(),{transform:"translate(".concat(f,", ").concat(g,")")},r);}function nI(t,e,n,i){var r=t.showLine,a=t.showTick,s=t.showLabel,o=e.maybeAppendByClassName(ne.CLASS_NAMES.lineGroup,"g"),l=(0,eB.ifShow)(r,o,function(e){return(0,nc.renderAxisLine)(e,t,i);})||[],d=e.maybeAppendByClassName(ne.CLASS_NAMES.tickGroup,"g"),u=(0,eB.ifShow)(a,d,function(e){var r,a;return r=(0,nh.filterExec)(n,t.tickFilter),a=(0,eo.subStyleProps)(t,"tick"),e.selectAll(ne.CLASS_NAMES.tick.class).data(r,function(t){return t.id||t.label;}).join(function(e){return e.append("g").attr("className",ne.CLASS_NAMES.tick.name).transition(function(e,n){return nN.call(this,e,n,r,t,a,!1);});},function(e){return e.transition(function(e,n){return this.removeChildren(),nN.call(this,e,n,r,t,a,i.update);});},function(t){return t.transition(function(){var t=this,e=nr(this.childNodes[0],i.exit);return(0,ex.onAnimateFinished)(e,function(){return t.remove();}),e;});}).transitions();})||[],c=e.maybeAppendByClassName(ne.CLASS_NAMES.labelGroup,"g"),h=(0,eB.ifShow)(s,c,function(e){var r,a;return r=(0,nh.filterExec)(n,t.labelFilter),a=(0,eo.subStyleProps)(t,"label"),e.selectAll(ne.CLASS_NAMES.label.class).data(r,function(t,e){return e;}).join(function(i){return i.append("g").attr("className",ne.CLASS_NAMES.label.name).transition(function(e){nD(this,e,n,a,t);var i=nA(e,n,t),r=i.x,s=i.y;return this.style.transform="translate(".concat(r,", ").concat(s,")"),null;}).call(function(){nB.call(e,t);});},function(r){return r.transition(function(e){var r=this.querySelector(ne.CLASS_NAMES.labelItem.class),s=nD(this,e,n,a,t),o=(0,ex.transitionShape)(r,s,i.update),l=nA(e,n,t),d=l.x,u=l.y,c=(0,ex.transition)(this,{transform:"translate(".concat(d,", ").concat(u,")")},i.update);return(0,ei.__spreadArray)((0,ei.__spreadArray)([],(0,ei.__read)(o),!1),[c],!1);}).call(function(n){var i=(0,eY.default)(n,"_transitions").flat().filter(nf.defined);(0,ex.onAnimatesFinished)(i,function(){nB.call(e,t);});});},function(t){return t.transition(function(){var t=this,e=nr(this.childNodes[0],i.exit);return(0,ex.onAnimateFinished)(e,function(){return(0,es.select)(t).remove();}),e;});}).transitions();})||[];return(0,ei.__spreadArray)((0,ei.__spreadArray)((0,ei.__spreadArray)([],(0,ei.__read)(l),!1),(0,ei.__read)(u),!1),(0,ei.__read)(h),!1).filter(function(t){return!!t;});}var nk=function(t){function e(e){return t.call(this,e,ne.AXIS_BASE_DEFAULT_ATTR)||this;}return(0,ei.__extends)(e,t),e.prototype.render=function(t,e,n){var i=this,r=t.titleText,a=t.data,s=t.animate,o=t.showTitle,l=t.showGrid,d=t.dataThreshold,u=t.truncRange,c=(function(t,e){if(t.length<=e)return t;for(var n=Math.floor(t.length/e),i=[],r=0;r<t.length;r+=n)i.push(t[r]);return i;})(a,d).filter(function(t){var e=t.value;return!u||!(e>u[0])||!(e<u[1]);}),h=(0,ex.parseAnimationOption)(void 0===n?s:n),p=(0,es.select)(e).maybeAppendByClassName(ne.CLASS_NAMES.gridGroup,"g"),f=(0,eB.ifShow)(l,p,function(e){var n,i,r,a,s,o,l,d;return i=(n=(0,eo.subStyleProps)(t,"grid")).type,r=n.areaFill,a=np(t),s=(0,nh.filterExec)(c,t.gridFilter),l="segment"===i?(o=t.gridLength,s.map(function(e,n){var i=e.value,r=(0,ei.__read)((0,nc.getValuePos)(i,t),2),a=r[0],s=r[1],l=(0,ei.__read)((0,ni.scale)((0,nh.getDirectionVector)(i,t.gridDirection,t),o),2);return{id:n,points:[[a,s],[a+l[0],s+l[1]]]};})):function(t,e){var n=e.gridControlAngles,i=np(e);if(!i)throw Error("grid center is not provide");if(t.length<2)throw Error("Invalid grid data");if(!n||0===n.length)throw Error("Invalid gridControlAngles");var r=(0,ei.__read)(i,2),a=r[0],s=r[1];return t.map(function(t,i){var r=t.value,o=(0,ei.__read)((0,nc.getValuePos)(r,e),2),l=o[0],d=o[1],u=(0,ei.__read)([l-a,d-s],2),c=u[0],h=u[1],p=[];return n.forEach(function(t){var e=(0,nn.degToRad)(t),n=(0,ei.__read)([Math.cos(e),Math.sin(e)],2),i=n[0],r=n[1];p.push([c*i-h*r+a,c*r+h*i+s]);}),{points:p,id:i};});}(s,t),d=(0,ei.__assign)((0,ei.__assign)({},n),{center:a,areaFill:(0,S.default)(r)?s.map(function(t,e){return(0,ey.getCallbackValue)(r,[t,e,s]);}):r,animate:h,data:l}),e.selectAll(ne.CLASS_NAMES.grid.class).data([1]).join(function(t){return t.append(function(){return new nu({style:d});}).attr("className",ne.CLASS_NAMES.grid.name);},function(t){return t.transition(function(){return this.update(d);});},function(t){return t.remove();}).transitions();})||[],g=(0,es.select)(e).maybeAppendByClassName(ne.CLASS_NAMES.mainGroup,"g");r&&(!this.initialized&&h.enter||this.initialized&&h.update)&&nI(t,(0,es.select)(this.offscreenGroup),c,(0,ex.parseAnimationOption)(!1));var y=nI(t,(0,es.select)(g.node()),c,h),m=(0,es.select)(e).maybeAppendByClassName(ne.CLASS_NAMES.titleGroup,"g"),b=(0,eB.ifShow)(o,m,function(e){var n;return n=t.titleText,e.selectAll(ne.CLASS_NAMES.title.class).data([{title:n}].filter(function(t){return!!t.title;}),function(t,e){return t.title;}).join(function(r){return r.append(function(){return(0,eL.renderExtDo)(n);}).attr("className",ne.CLASS_NAMES.title.name).transition(function(){return nR((0,es.select)(this),e,i,t,h.enter);});},function(n){return n.transition(function(){return nR((0,es.select)(this),e,i,t,h.update);});},function(t){return t.remove();}).transitions();})||[];return(0,ei.__spreadArray)((0,ei.__spreadArray)((0,ei.__spreadArray)([],(0,ei.__read)(f),!1),(0,ei.__read)(y),!1),(0,ei.__read)(b),!1).flat().filter(function(t){return!!t;});},e;}(er.Component),nj=n("1e3aa55f");function nz(t){var e=t.canvas,n=t.touches,i=t.offsetX,r=t.offsetY;if(e)return[e.x,e.y];if(n){var a=n[0];return[a.clientX,a.clientY];}return i&&r?[i,r]:[0,0];}function nF(t,e){return+t.toPrecision(e);}function nG({map:t,initKey:e},n){let i=e(n);return t.has(i)?t.get(i):n;}function nV(t){return"object"==typeof t?t.valueOf():t;}class nW extends Map{constructor(t){if(super(),this.map=new Map,this.initKey=nV,null!==t)for(let[e,n]of t)this.set(e,n);}get(t){return super.get(nG({map:this.map,initKey:this.initKey},t));}has(t){return super.has(nG({map:this.map,initKey:this.initKey},t));}set(t,e){return super.set(function({map:t,initKey:e},n){let i=e(n);return t.has(i)?t.get(i):(t.set(i,n),n);}({map:this.map,initKey:this.initKey},t),e);}delete(t){return super.delete(function({map:t,initKey:e},n){let i=e(n);return t.has(i)&&(n=t.get(i),t.delete(i)),n;}({map:this.map,initKey:this.initKey},t));}}var nH=n("008e3e89");let nK=Symbol("defaultUnknown");function nY(t,e,n){for(let i=0;i<e.length;i+=1)t.has(e[i])||t.set(n(e[i]),i);}function n$(t){let{value:e,from:n,to:i,mapper:r,notFoundReturn:a}=t,s=r.get(e);if(void 0===s){if(a!==nK)return a;s=n.push(e)-1,r.set(e,s);}return i[s%i.length];}function nU(t){return t instanceof Date?t=>`${t}`:"object"==typeof t?t=>JSON.stringify(t):t=>t;}class nX extends nH.Base{getDefaultOptions(){return{domain:[],range:[],unknown:nK};}constructor(t){super(t);}map(t){return 0===this.domainIndexMap.size&&nY(this.domainIndexMap,this.getDomain(),this.domainKey),n$({value:this.domainKey(t),mapper:this.domainIndexMap,from:this.getDomain(),to:this.getRange(),notFoundReturn:this.options.unknown});}invert(t){return 0===this.rangeIndexMap.size&&nY(this.rangeIndexMap,this.getRange(),this.rangeKey),n$({value:this.rangeKey(t),mapper:this.rangeIndexMap,from:this.getRange(),to:this.getDomain(),notFoundReturn:this.options.unknown});}rescale(t){let[e]=this.options.domain,[n]=this.options.range;if(this.domainKey=nU(e),this.rangeKey=nU(n),!this.rangeIndexMap){this.rangeIndexMap=new Map,this.domainIndexMap=new Map;return;}(!t||t.range)&&this.rangeIndexMap.clear(),(!t||t.domain||t.compare)&&(this.domainIndexMap.clear(),this.sortedDomain=void 0);}clone(){return new nX(this.options);}getRange(){return this.options.range;}getDomain(){if(this.sortedDomain)return this.sortedDomain;let{domain:t,compare:e}=this.options;return this.sortedDomain=e?[...t].sort(e):t,this.sortedDomain;}}class nZ extends nX{getDefaultOptions(){return{domain:[],range:[0,1],align:.5,round:!1,paddingInner:0,paddingOuter:0,padding:0,unknown:nK,flex:[]};}constructor(t){super(t);}clone(){return new nZ(this.options);}getStep(t){return void 0===this.valueStep?1:"number"==typeof this.valueStep?this.valueStep:void 0===t?Array.from(this.valueStep.values())[0]:this.valueStep.get(t);}getBandWidth(t){return void 0===this.valueBandWidth?1:"number"==typeof this.valueBandWidth?this.valueBandWidth:void 0===t?Array.from(this.valueBandWidth.values())[0]:this.valueBandWidth.get(t);}getRange(){return this.adjustedRange;}getPaddingInner(){let{padding:t,paddingInner:e}=this.options;return t>0?t:e;}getPaddingOuter(){let{padding:t,paddingOuter:e}=this.options;return t>0?t:e;}rescale(){super.rescale();let{align:t,domain:e,range:n,round:i,flex:r}=this.options,{adjustedRange:a,valueBandWidth:s,valueStep:o}=function(t){var e;let n,i;let{domain:r}=t,a=r.length;if(0===a)return{valueBandWidth:void 0,valueStep:void 0,adjustedRange:[]};if(null===(e=t.flex)||void 0===e?void 0:e.length)return function(t){let{domain:e,range:n,paddingOuter:i,paddingInner:r,flex:a,round:s,align:o}=t,l=e.length,d=function(t,e){let n=e-t.length;return n>0?[...t,...Array(n).fill(1)]:n<0?t.slice(0,e):t;}(a,l),[u,c]=n,h=c-u,p=h/(2/l*i+1-1/l*r),f=p*r/l,g=p-l*f,y=function(t){let e=Math.min(...t);return t.map(t=>t/e);}(d),m=g/y.reduce((t,e)=>t+e),b=new nW(e.map((t,e)=>{let n=y[e]*m;return[t,s?Math.floor(n):n];})),v=new nW(e.map((t,e)=>{let n=y[e]*m+f;return[t,s?Math.floor(n):n];})),E=Array.from(v.values()).reduce((t,e)=>t+e),x=u+(h-(E-E/l*r))*o,O=s?Math.round(x):x,S=Array(l);for(let t=0;t<l;t+=1){S[t]=Math.round(1e12*O)/1e12;let n=e[t];O+=v.get(n);}return{valueBandWidth:b,valueStep:v,adjustedRange:S};}(t);let{range:s,paddingOuter:o,paddingInner:l,round:d,align:u}=t,c=s[0],h=s[1]-c;n=h/Math.max(1,2*o+(a-l)),d&&(n=Math.floor(n)),c+=(h-n*(a-l))*u,i=n*(1-l),d&&(c=Math.round(c),i=Math.round(i));let p=Array(a).fill(0).map((t,e)=>c+e*n);return{valueStep:n,valueBandWidth:i,adjustedRange:p};}({align:t,range:n,round:i,flex:r,paddingInner:this.getPaddingInner(),paddingOuter:this.getPaddingOuter(),domain:e});this.valueStep=o,this.valueBandWidth=s,this.adjustedRange=a;}}var nq=n("e9ef072a"),nQ=u._(nq),nJ=n("f4c8f323"),n0=u._(nJ);function n1(t,e,n){let i=n;return(i<0&&(i+=1),i>1&&(i-=1),i<1/6)?t+(e-t)*6*i:i<.5?e:i<2/3?t+(e-t)*(2/3-i)*6:t;}function n2(t){let e=n0.default.get(t);if(!e)return null;let{model:n,value:i}=e;return"rgb"===n?i:"hsl"===n?function(t){let e=t[0]/360,n=t[1]/100,i=t[2]/100,r=t[3];if(0===n)return[255*i,255*i,255*i,r];let a=i<.5?i*(1+n):i+n-i*n,s=2*i-a;return[255*n1(s,a,e+1/3),255*n1(s,a,e),255*n1(s,a,e-1/3),r];}(i):null;}let n3=(t,e)=>n=>t*(1-n)+e*n,n6=(t,e)=>{let n=n2(t),i=n2(e);return null===n||null===i?n?()=>t:()=>e:t=>{let e=[,,,,];for(let r=0;r<4;r+=1){let a=n[r],s=i[r];e[r]=a*(1-t)+s*t;}let[r,a,s,o]=e;return`rgba(${Math.round(r)}, ${Math.round(a)}, ${Math.round(s)}, ${o})`;};},n5=(t,e)=>"number"==typeof t&&"number"==typeof e?n3(t,e):"string"==typeof t&&"string"==typeof e?n6(t,e):()=>t,n4=(t,e)=>{let n=n3(t,e);return t=>Math.round(n(t));};function n8(t,e){return e-t?n=>(n-t)/(e-t):t=>.5;}function n9(t,...e){return e.reduce((t,e)=>n=>t(e(n)),t);}let n7=Math.sqrt(50),it=Math.sqrt(10),ie=Math.sqrt(2);function ii(t,e,n){let i=(e-t)/Math.max(0,n),r=Math.floor(Math.log(i)/Math.LN10),a=i/10**r;return r>=0?(a>=n7?10:a>=it?5:a>=ie?2:1)*10**r:-(10**-r)/(a>=n7?10:a>=it?5:a>=ie?2:1);}let ir=(t,e,n=5)=>{let i;let r=[t,e],a=0,s=r.length-1,o=r[a],l=r[s];return l<o&&([o,l]=[l,o],[a,s]=[s,a]),(i=ii(o,l,n))>0?i=ii(o=Math.floor(o/i)*i,l=Math.ceil(l/i)*i,n):i<0&&(i=ii(o=Math.ceil(o*i)/i,l=Math.floor(l*i)/i,n)),i>0?(r[a]=Math.floor(o/i)*i,r[s]=Math.ceil(l/i)*i):i<0&&(r[a]=Math.ceil(o*i)/i,r[s]=Math.floor(l*i)/i),r;};var ia=n("bda85153"),is=u._(ia),io=n("df9367b2"),il=u._(io);function id(t){return!(0,il.default)(t)&&!(0,is.default)(t)&&!Number.isNaN(t);}let iu=(t,e,n)=>{let i,r;let[a,s]=t,[o,l]=e;return a<s?(i=n8(a,s),r=n(o,l)):(i=n8(s,a),r=n(l,o)),n9(r,i);},ic=(t,e,n)=>{let i=Math.min(t.length,e.length)-1,r=Array(i),a=Array(i),s=t[0]>t[i],o=s?[...t].reverse():t,l=s?[...e].reverse():e;for(let t=0;t<i;t+=1)r[t]=n8(o[t],o[t+1]),a[t]=n(l[t],l[t+1]);return e=>{let n=function(t,e,n,i,r){let a=1,s=i||t.length,o=t=>t;for(;a<s;){let n=Math.floor((a+s)/2);o(t[n])>e?s=n:a=n+1;}return a;}(t,e,0,i)-1,s=r[n];return n9(a[n],s)(e);};},ih=(t,e,n,i)=>(Math.min(t.length,e.length)>2?ic:iu)(t,e,i?n4:n);class ip extends nH.Base{getDefaultOptions(){return{domain:[0,1],range:[0,1],nice:!1,clamp:!1,round:!1,interpolate:n3,tickCount:5};}map(t){return id(t)?this.output(t):this.options.unknown;}invert(t){return id(t)?this.input(t):this.options.unknown;}nice(){if(!this.options.nice)return;let[t,e,n,...i]=this.getTickMethodOptions();this.options.domain=this.chooseNice()(t,e,n,...i);}getTicks(){let{tickMethod:t}=this.options,[e,n,i,...r]=this.getTickMethodOptions();return t(e,n,i,...r);}getTickMethodOptions(){let{domain:t,tickCount:e}=this.options;return[t[0],t[t.length-1],e];}chooseNice(){return ir;}rescale(){this.nice();let[t,e]=this.chooseTransforms();this.composeOutput(t,this.chooseClamp(t)),this.composeInput(t,e,this.chooseClamp(e));}chooseClamp(t){let{clamp:e,range:n}=this.options,i=this.options.domain.map(t),r=Math.min(i.length,n.length);return e?function(t,e){let n=e<t?e:t,i=t>e?t:e;return t=>Math.min(Math.max(n,t),i);}(i[0],i[r-1]):nQ.default;}composeOutput(t,e){let{domain:n,range:i,round:r,interpolate:a}=this.options,s=ih(n.map(t),i,a,r);this.output=n9(s,e,t);}composeInput(t,e,n){let{domain:i,range:r}=this.options,a=ih(r,i.map(t),n3);this.input=n9(e,n,a);}}let ig=(t,e,n)=>{let i,r;let a=t,s=e;if(a===s&&n>0)return[a];let o=ii(a,s,n);if(0===o||!Number.isFinite(o))return[];if(o>0){a=Math.ceil(a/o),r=Array(i=Math.ceil((s=Math.floor(s/o))-a+1));for(let t=0;t<i;t+=1)r[t]=(a+t)*o;}else{a=Math.ceil(a*(o=-o)),r=Array(i=Math.ceil((s=Math.floor(s*o))-a+1));for(let t=0;t<i;t+=1)r[t]=(a+t)/o;}return r;};class iy extends ip{getDefaultOptions(){return{domain:[0,1],range:[0,1],unknown:void 0,nice:!1,clamp:!1,round:!1,interpolate:n5,tickMethod:ig,tickCount:5};}chooseTransforms(){return[nQ.default,nQ.default];}clone(){return new iy(this.options);}}var im=n("d8d8eaf5"),ib=u._(im),iv=n("2b50fa22"),iE=u._(iv),ix=n("4c900b62"),iO=u._(ix),iS=function(t){function e(e){var n=this,i=e.style,r=(0,ei.__rest)(e,["style"]);return(n=t.call(this,(0,v.default)({},{type:"column"},(0,ei.__assign)({style:i},r)))||this).columnsGroup=new ed.Group({name:"columns"}),n.appendChild(n.columnsGroup),n.render(),n;}return(0,ei.__extends)(e,t),e.prototype.render=function(){var t=this.attributes,e=t.columns,n=t.x,i=t.y;this.columnsGroup.style.transform="translate(".concat(n,", ").concat(i,")"),(0,es.select)(this.columnsGroup).selectAll(".column").data(e.flat()).join(function(t){return t.append("rect").attr("className","column").each(function(t){this.attr(t);});},function(t){return t.each(function(t){this.attr(t);});},function(t){return t.remove();});},e.prototype.update=function(t){this.attr((0,eg.deepAssign)({},this.attributes,t)),this.render();},e.prototype.clear=function(){this.removeChildren();},e;}(ed.DisplayObject),i_=function(t){function e(e){var n=this,i=e.style,r=(0,ei.__rest)(e,["style"]);return(n=t.call(this,(0,v.default)({},{type:"lines"},(0,ei.__assign)({style:i},r)))||this).linesGroup=n.appendChild(new ed.Group),n.areasGroup=n.appendChild(new ed.Group),n.render(),n;}return(0,ei.__extends)(e,t),e.prototype.render=function(){var t=this.attributes,e=t.lines,n=t.areas,i=t.x,r=t.y;this.style.transform="translate(".concat(i,", ").concat(r,")"),e&&this.renderLines(e),n&&this.renderAreas(n);},e.prototype.clear=function(){this.linesGroup.removeChildren(),this.areasGroup.removeChildren();},e.prototype.update=function(t){this.attr((0,eg.deepAssign)({},this.attributes,t)),this.render();},e.prototype.renderLines=function(t){(0,es.select)(this.linesGroup).selectAll(".line").data(t).join(function(t){return t.append("path").attr("className","line").each(function(t){this.attr(t);});},function(t){return t.each(function(t){this.attr(t);});},function(t){return t.remove();});},e.prototype.renderAreas=function(t){(0,es.select)(this.linesGroup).selectAll(".area").data(t).join(function(t){return t.append("path").attr("className","area").each(function(t){this.attr(t);});},function(t){return t.each(function(t){this.style(t);});},function(t){return t.remove();});},e;}(ed.DisplayObject);function iP(t,e){void 0===e&&(e=!1);var n=e?t.length-1:0,i=t.map(function(t,e){return(0,ei.__spreadArray)([e===n?"M":"L"],(0,ei.__read)(t),!1);});return e?i.reverse():i;}function iC(t,e){if(void 0===e&&(e=!1),t.length<=2)return iP(t);for(var n=[],i=t.length,r=0;r<i;r+=1){var a=e?t[i-r-1]:t[r];(0,x.default)(a,n.slice(-2))||n.push.apply(n,(0,ei.__spreadArray)([],(0,ei.__read)(a),!1));}var s=function(t,e,n){void 0===e&&(e=!1),void 0===n&&(n=[[0,0],[1,1]]);for(var i,r,a,s=!!e,o=[],l=0,d=t.length;l<d;l+=2)o.push([t[l],t[l+1]]);for(var u=function(t,e,n,i){var r,a,s,o,l,d,u=[],c=!!i,h=[1/0,1/0],p=[-1/0,-1/0];if(c){h=(r=(0,ei.__read)(i,2))[0],p=r[1];for(var f=0,g=t.length;f<g;f+=1){var y=t[f];h=(0,ni.min)(h,y),p=(0,ni.max)(p,y);}}for(var f=0,m=t.length;f<m;f+=1){var y=t[f];if(0!==f||n){if(f!==m-1||n){a=t[[f?f-1:m-1,f-1][n?0:1]],s=t[n?(f+1)%m:f+1];var b=[0,0];b=(0,ni.sub)(s,a),b=(0,ni.scale)(b,.4);var v=(0,ni.distance)(y,a),E=(0,ni.distance)(y,s),x=v+E;0!==x&&(v/=x,E/=x);var O=(0,ni.scale)(b,-v),S=(0,ni.scale)(b,E);l=(0,ni.add)(y,O),o=(0,ni.add)(y,S),o=(0,ni.min)(o,(0,ni.max)(s,y)),o=(0,ni.max)(o,(0,ni.min)(s,y)),O=(0,ni.sub)(o,y),O=(0,ni.scale)(O,-v/E),l=(0,ni.add)(y,O),l=(0,ni.min)(l,(0,ni.max)(a,y)),l=(0,ni.max)(l,(0,ni.min)(a,y)),S=(0,ni.sub)(y,l),S=(0,ni.scale)(S,E/v),o=(0,ni.add)(y,S),c&&(l=(0,ni.max)(l,h),l=(0,ni.min)(l,p),o=(0,ni.max)(o,h),o=(0,ni.min)(o,p)),u.push(d),u.push(l),d=o;}else l=y,u.push(d),u.push(l);}else d=y;}return n&&u.push(u.shift()),u;}(o,0,s,n),c=o.length,h=[],l=0;l<c-1;l+=1)i=u[2*l],r=u[2*l+1],a=o[l+1],h.push(["C",i[0],i[1],r[0],r[1],a[0],a[1]]);return s&&(i=u[c],r=u[c+1],a=(0,ei.__read)(o,1)[0],h.push(["C",i[0],i[1],r[0],r[1],a[0],a[1]])),h;}(n,!1);return e?s.unshift((0,ei.__spreadArray)(["M"],(0,ei.__read)(t[i-1]),!1)):s.unshift((0,ei.__spreadArray)(["M"],(0,ei.__read)(t[0]),!1)),s;}function iw(t,e,n){var i=(0,ib.default)(t);return i.push(["L",e,n],["L",0,n],["Z"]),i;}var iM=n("963a1007"),iA=u._(iM),iT=n("c9eabafa"),iB=u._(iT),iD=n("aba98ab8"),iL=u._(iD),iN=n("f99902ff"),iR=u._(iN);function iI(t){return 0===t.length?[0,0]:[(0,iA.default)((0,iB.default)(t,function(t){return(0,iA.default)(t)||0;})),(0,iL.default)((0,iR.default)(t,function(t){return(0,iL.default)(t)||0;}))];}function ik(t){for(var e=(0,ib.default)(t),n=e[0].length,i=(0,ei.__read)([Array(n).fill(0),Array(n).fill(0)],2),r=i[0],a=i[1],s=0;s<e.length;s+=1)for(var o=e[s],l=0;l<n;l+=1)o[l]>=0?(o[l]+=r[l],r[l]=o[l]):(o[l]+=a[l],a[l]=o[l]);return e;}var ij=function(t){function e(e){return t.call(this,e,{type:"line",x:0,y:0,width:200,height:20,isStack:!1,color:["#83daad","#edbf45","#d2cef9","#e290b3","#6f63f4"],smooth:!0,lineLineWidth:1,areaOpacity:0,isGroup:!1,columnLineWidth:1,columnStroke:"#fff",scale:1,spacing:0})||this;}return(0,ei.__extends)(e,t),Object.defineProperty(e.prototype,"rawData",{get:function(){var t=this.attributes.data;if(!t||(null==t?void 0:t.length)===0)return[[]];var e=(0,ib.default)(t);return(0,iO.default)(e[0])?[e]:e;},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"data",{get:function(){return this.attributes.isStack?ik(this.rawData):this.rawData;},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"scales",{get:function(){return this.createScales(this.data);},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"baseline",{get:function(){var t=this.scales.y,e=(0,ei.__read)(t.getOptions().domain||[0,0],2),n=e[0],i=e[1];return i<0?t.map(i):t.map(n<0?0:n);},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"containerShape",{get:function(){var t=this.attributes;return{width:t.width,height:t.height};},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"linesStyle",{get:function(){var t=this,e=this.attributes,n=e.type,i=e.isStack,r=e.smooth;if("line"!==n)throw Error("linesStyle can only be used in line type");var a=(0,eo.subStyleProps)(this.attributes,"area"),s=(0,eo.subStyleProps)(this.attributes,"line"),o=this.containerShape.width,l=this.data;if(0===l[0].length)return{lines:[],areas:[]};var d=this.scales,u=(f=(h={type:"line",x:d.x,y:d.y}).x,g=h.y,m=(y=(0,ei.__read)(g.getOptions().range||[0,0],2))[0],(b=y[1])>m&&(b=(p=(0,ei.__read)([m,b],2))[0],m=p[1]),l.map(function(t){return t.map(function(t,e){return[f.map(e),(0,eb.default)(g.map(t),b,m)];});})),c=[];if(a){var h,p,f,g,y,m,b,v=this.baseline;c=i?r?function(t,e,n){for(var i=[],r=t.length-1;r>=0;r-=1){var a=t[r],s=iC(a),o=void 0;if(0===r)o=iw(s,e,n);else{var l=iC(t[r-1],!0),d=a[0];l[0][0]="L",o=(0,ei.__spreadArray)((0,ei.__spreadArray)((0,ei.__spreadArray)([],(0,ei.__read)(s),!1),(0,ei.__read)(l),!1),[(0,ei.__spreadArray)(["M"],(0,ei.__read)(d),!1),["Z"]],!1);}i.push(o);}return i;}(u,o,v):function(t,e,n){for(var i=[],r=t.length-1;r>=0;r-=1){var a=iP(t[r]),s=void 0;if(0===r)s=iw(a,e,n);else{var o=iP(t[r-1],!0);o[0][0]="L",s=(0,ei.__spreadArray)((0,ei.__spreadArray)((0,ei.__spreadArray)([],(0,ei.__read)(a),!1),(0,ei.__read)(o),!1),[["Z"]],!1);}i.push(s);}return i;}(u,o,v):u.map(function(t){return iw(r?iC(t):iP(t),o,v);});}return{lines:u.map(function(e,n){return(0,ei.__assign)({stroke:t.getColor(n),d:r?iC(e):iP(e)},s);}),areas:c.map(function(e,n){return(0,ei.__assign)({d:e,fill:t.getColor(n)},a);})};},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"columnsStyle",{get:function(){var t=this,e=(0,eo.subStyleProps)(this.attributes,"column"),n=this.attributes,i=n.isStack,r=n.type,a=n.scale;if("column"!==r)throw Error("columnsStyle can only be used in column type");var s=this.containerShape.height,o=this.rawData;if(!o)return{columns:[]};i&&(o=ik(o));var l=this.createScales(o),d=l.x,u=l.y,c=(0,ei.__read)(iI(o),2),h=c[0],p=new iy({domain:[0,c[1]-(h>0?0:h)],range:[0,s*a]}),f=d.getBandWidth(),g=this.rawData;return{columns:o.map(function(n,r){return n.map(function(n,a){var s=f/o.length;return(0,ei.__assign)((0,ei.__assign)({fill:t.getColor(r)},e),i?{x:d.map(a),y:u.map(n),width:f,height:p.map(g[r][a])}:{x:d.map(a)+s*r,y:n>=0?u.map(n):u.map(0),width:s,height:p.map(Math.abs(n))});});})};},enumerable:!1,configurable:!0}),e.prototype.render=function(t,e){(0,es.maybeAppend)(e,".container","rect").attr("className","container").node();var n=t.type,i=t.x,r=t.y,a="spark".concat(n),s=(0,ei.__assign)({x:i,y:r},"line"===n?this.linesStyle:this.columnsStyle);(0,es.select)(e).selectAll(".spark").data([n]).join(function(t){return t.append(function(t){return"line"===t?new i_({className:a,style:s}):new iS({className:a,style:s});}).attr("className","spark ".concat(a));},function(t){return t.update(s);},function(t){return t.remove();});},e.prototype.getColor=function(t){var e=this.attributes.color;return(0,iE.default)(e)?e[t%e.length]:(0,S.default)(e)?e.call(null,t):e;},e.prototype.createScales=function(t){var e,n,i=this.attributes,r=i.type,a=i.scale,s=i.range,o=void 0===s?[]:s,l=i.spacing,d=this.containerShape,u=d.width,c=d.height,h=(0,ei.__read)(iI(t),2),p=h[0],f=h[1],g=new iy({domain:[null!==(e=o[0])&&void 0!==e?e:p,null!==(n=o[1])&&void 0!==n?n:f],range:[c,c*(1-a)]});return"line"===r?{type:r,x:new iy({domain:[0,t[0].length-1],range:[0,u]}),y:g}:{type:r,x:new nZ({domain:t[0].map(function(t,e){return e;}),range:[0,u],paddingInner:l,paddingOuter:l/2,align:.5}),y:g};},e.tag="sparkline",e;}(er.Component),iz={fill:"#fff",lineWidth:1,radius:2,size:10,stroke:"#bfbfbf",strokeOpacity:1,zIndex:0},iF={fill:"#000",fillOpacity:.45,fontSize:12,textAlign:"center",textBaseline:"middle",zIndex:1},iG={x:0,y:0,orientation:"horizontal",showLabel:!0,type:"start"},iV=(0,ef.classNames)({foreground:"foreground",handle:"handle",selection:"selection",sparkline:"sparkline",sparklineGroup:"sparkline-group",track:"track",brushArea:"brush-area"},"slider"),iW=(0,ef.classNames)({labelGroup:"label-group",label:"label",iconGroup:"icon-group",icon:"icon",iconRect:"icon-rect",iconLine:"icon-line"},"handle"),iH=function(t){function e(){return null!==t&&t.apply(this,arguments)||this;}return(0,ei.__extends)(e,t),e.prototype.render=function(t,e){var n=t.x,i=t.y,r=t.size,a=void 0===r?10:r,s=t.radius,o=t.orientation,l=(0,ei.__rest)(t,["x","y","size","radius","orientation"]),d=2.4*a,u=(0,es.select)(e).maybeAppendByClassName(iW.iconRect,"rect").styles((0,ei.__assign)((0,ei.__assign)({},l),{width:a,height:d,radius:void 0===s?a/4:s,x:n-a/2,y:i-d/2,transformOrigin:"center"})),c=n+1/3*a-a/2,h=n+2/3*a-a/2,p=i+1/4*d-d/2,f=i+3/4*d-d/2;u.maybeAppendByClassName("".concat(iW.iconLine,"-1"),"line").styles((0,ei.__assign)({x1:c,x2:c,y1:p,y2:f},l)),u.maybeAppendByClassName("".concat(iW.iconLine,"-2"),"line").styles((0,ei.__assign)({x1:h,x2:h,y1:p,y2:f},l)),"vertical"===o&&(u.node().style.transform="rotate(90)");},e;}(er.Component),iK=function(t){function e(e){return t.call(this,e,iG)||this;}return(0,ei.__extends)(e,t),e.prototype.renderLabel=function(t){var e=this,n=this.attributes,i=n.x,r=n.y,a=n.showLabel,s=(0,eo.subStyleProps)(this.attributes,"label"),o=s.x,l=void 0===o?0:o,d=s.y,u=void 0===d?0:d,c=s.transform,h=s.transformOrigin,p=(0,ei.__rest)(s,["x","y","transform","transformOrigin"]),f=(0,ei.__read)((0,eo.splitStyle)(p,[]),2),g=f[0],y=f[1],m=(0,es.select)(t).maybeAppendByClassName(iW.labelGroup,"g").styles(y),b=(0,ei.__assign)((0,ei.__assign)({},iF),g),v=b.text,E=(0,ei.__rest)(b,["text"]);(0,eB.ifShow)(!!a,m,function(t){e.label=t.maybeAppendByClassName(iW.label,"text").styles((0,ei.__assign)((0,ei.__assign)({},E),{x:i+l,y:r+u,transform:c,transformOrigin:h,text:"".concat(v)})),e.label.on("mousedown",function(t){t.stopPropagation();}),e.label.on("touchstart",function(t){t.stopPropagation();});});},e.prototype.renderIcon=function(t){var e=this.attributes,n=e.x,i=e.y,r=e.orientation,a=e.type,s=(0,ei.__assign)((0,ei.__assign)({x:n,y:i,orientation:r},iz),(0,eo.subStyleProps)(this.attributes,"icon")),o=this.attributes.iconShape,l=void 0===o?function(){return new iH({style:s});}:o;(0,es.select)(t).maybeAppendByClassName(iW.iconGroup,"g").selectAll(iW.icon.class).data([l]).join(function(t){return t.append("string"==typeof l?l:function(){return l(a);}).attr("className",iW.icon.name);},function(t){return t.update(s);},function(t){return t.remove();});},e.prototype.render=function(t,e){this.renderIcon(e),this.renderLabel(e);},e;}(er.Component),iY=function(t){function e(e){var n=t.call(this,e,(0,ei.__assign)((0,ei.__assign)((0,ei.__assign)({x:0,y:0,animate:{duration:100,fill:"both"},brushable:!0,formatter:function(t){return t.toString();},handleSpacing:2,orientation:"horizontal",padding:0,autoFitLabel:!0,scrollable:!0,selectionFill:"#5B8FF9",selectionFillOpacity:.45,selectionZIndex:2,showHandle:!0,showLabel:!0,slidable:!0,trackFill:"#416180",trackLength:200,trackOpacity:.05,trackSize:20,trackZIndex:-1,values:[0,1],type:"range",selectionType:"select",handleIconOffset:0},(0,eo.superStyleProps)(iG,"handle")),(0,eo.superStyleProps)(iz,"handleIcon")),(0,eo.superStyleProps)(iF,"handleLabel")))||this;return n.range=[0,1],n.onDragStart=function(t){return function(e){e.stopPropagation(),n.target=t,n.prevPos=n.getOrientVal(nz(e));var i=n.availableSpace,r=i.x,a=i.y,s=n.getBBox(),o=s.x,l=s.y;n.selectionStartPos=n.getRatio(n.prevPos-n.getOrientVal([r,a])-n.getOrientVal([+o,+l])),n.selectionWidth=0,document.addEventListener("pointermove",n.onDragging),document.addEventListener("pointerup",n.onDragEnd);};},n.onDragging=function(t){var e=n.attributes,i=e.slidable,r=e.brushable,a=e.type;t.stopPropagation();var s=n.getOrientVal(nz(t)),o=s-n.prevPos;if(o){var l=n.getRatio(o);switch(n.target){case"start":i&&n.setValuesOffset(l);break;case"end":i&&n.setValuesOffset(0,l);break;case"selection":i&&n.setValuesOffset(l,l);break;case"track":if(!r)return;n.selectionWidth+=l,"range"===a?n.innerSetValues([n.selectionStartPos,n.selectionStartPos+n.selectionWidth].sort(),!0):n.innerSetValues([0,n.selectionStartPos+n.selectionWidth],!0);}n.prevPos=s;}},n.onDragEnd=function(){document.removeEventListener("pointermove",n.onDragging),document.removeEventListener("pointermove",n.onDragging),document.removeEventListener("pointerup",n.onDragEnd),n.target="",n.updateHandlesPosition(!1);},n.onValueChange=function(t){var e=n.attributes,i=e.onChange,r=e.type,a="range"===r?t:t[1],s="range"===r?n.getValues():n.getValues()[1],o=new ed.CustomEvent("valuechange",{detail:{oldValue:a,value:s}});n.dispatchEvent(o),null==i||i(s);},n.selectionStartPos=0,n.selectionWidth=0,n.prevPos=0,n.target="",n;}return(0,ei.__extends)(e,t),Object.defineProperty(e.prototype,"values",{get:function(){return this.attributes.values;},set:function(t){this.attributes.values=this.clampValues(t);},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"sparklineStyle",{get:function(){if("horizontal"!==this.attributes.orientation)return null;var t=(0,eo.subStyleProps)(this.attributes,"sparkline");return(0,ei.__assign)((0,ei.__assign)({zIndex:0},this.availableSpace),t);},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"shape",{get:function(){var t=this.attributes,e=t.trackLength,n=t.trackSize,i=(0,ei.__read)(this.getOrientVal([[e,n],[n,e]]),2);return{width:i[0],height:i[1]};},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"availableSpace",{get:function(){var t=this.attributes,e=(t.x,t.y,t.padding),n=(0,ei.__read)((0,eD.parseSeriesAttr)(e),4),i=n[0],r=n[1],a=n[2],s=n[3],o=this.shape;return{x:s,y:i,width:o.width-(s+r),height:o.height-(i+a)};},enumerable:!1,configurable:!0}),e.prototype.getValues=function(){return this.values;},e.prototype.setValues=function(t,e){void 0===t&&(t=[0,0]),void 0===e&&(e=!1),this.attributes.values=t;var n=!1!==e&&this.attributes.animate;this.updateSelectionArea(n),this.updateHandlesPosition(n);},e.prototype.updateSelectionArea=function(t){var e=this.calcSelectionArea();this.foregroundGroup.selectAll(iV.selection.class).each(function(n,i){(0,ex.transition)(this,e[i],t);});},e.prototype.updateHandlesPosition=function(t){this.attributes.showHandle&&(this.startHandle&&(0,ex.transition)(this.startHandle,this.getHandleStyle("start"),t),this.endHandle&&(0,ex.transition)(this.endHandle,this.getHandleStyle("end"),t));},e.prototype.innerSetValues=function(t,e){void 0===t&&(t=[0,0]),void 0===e&&(e=!1);var n=this.values,i=this.clampValues(t);this.attributes.values=i,this.setValues(i),e&&this.onValueChange(n);},e.prototype.renderTrack=function(t){var e=this.attributes,n=e.x,i=e.y,r=(0,eo.subStyleProps)(this.attributes,"track");this.trackShape=(0,es.select)(t).maybeAppendByClassName(iV.track,"rect").styles((0,ei.__assign)((0,ei.__assign)({x:n,y:i},this.shape),r));},e.prototype.renderBrushArea=function(t){var e=this.attributes,n=e.x,i=e.y,r=e.brushable;this.brushArea=(0,es.select)(t).maybeAppendByClassName(iV.brushArea,"rect").styles((0,ei.__assign)({x:n,y:i,fill:"transparent",cursor:r?"crosshair":"default"},this.shape));},e.prototype.renderSparkline=function(t){var e=this,n=this.attributes,i=n.x,r=n.y,a=n.orientation,s=(0,es.select)(t).maybeAppendByClassName(iV.sparklineGroup,"g");(0,eB.ifShow)("horizontal"===a,s,function(t){var n=(0,ei.__assign)((0,ei.__assign)({},e.sparklineStyle),{x:i,y:r});t.maybeAppendByClassName(iV.sparkline,function(){return new ij({style:n});}).update(n);});},e.prototype.renderHandles=function(){var t,e=this,n=this.attributes,i=n.showHandle,r=n.type,a=this;null===(t=this.foregroundGroup)||void 0===t||t.selectAll(iV.handle.class).data((i?"range"===r?["start","end"]:["end"]:[]).map(function(t){return{type:t};}),function(t){return t.type;}).join(function(t){return t.append(function(t){var n=t.type;return new iK({style:e.getHandleStyle(n)});}).each(function(t){var e=t.type;this.attr("class","".concat(iV.handle.name," ").concat(e,"-handle")),a["".concat(e,"Handle")]=this,this.addEventListener("pointerdown",a.onDragStart(e));});},function(t){return t.each(function(t){var e=t.type;this.update(a.getHandleStyle(e));});},function(t){return t.each(function(t){var e=t.type;a["".concat(e,"Handle")]=void 0;}).remove();});},e.prototype.renderSelection=function(t){var e=this.attributes,n=e.x,i=e.y,r=e.type,a=e.selectionType;this.foregroundGroup=(0,es.select)(t).maybeAppendByClassName(iV.foreground,"g");var s=(0,eo.subStyleProps)(this.attributes,"selection"),o=function(t){return t.style("visibility",function(t){return t.show?"visible":"hidden";}).style("cursor",function(t){return"select"===a?"grab":"invert"===a?"crosshair":"default";}).styles((0,ei.__assign)((0,ei.__assign)({},s),{transform:"translate(".concat(n,", ").concat(i,")")}));},l=this;this.foregroundGroup.selectAll(iV.selection.class).data("value"===r?[]:this.calcSelectionArea().map(function(t,e){return{style:(0,ei.__assign)({},t),index:e,show:"select"===a?1===e:1!==e};}),function(t){return t.index;}).join(function(t){return t.append("rect").attr("className",iV.selection.name).call(o).each(function(t,e){var n=this;1===e?(l.selectionShape=(0,es.select)(this),this.on("pointerdown",function(t){n.attr("cursor","grabbing"),l.onDragStart("selection")(t);}),l.dispatchCustomEvent(this,"pointerenter","selectionMouseenter"),l.dispatchCustomEvent(this,"pointerleave","selectionMouseleave"),l.dispatchCustomEvent(this,"click","selectionClick"),this.addEventListener("pointerdown",function(){n.attr("cursor","grabbing");}),this.addEventListener("pointerup",function(){n.attr("cursor","pointer");}),this.addEventListener("pointerover",function(){n.attr("cursor","pointer");})):this.on("pointerdown",l.onDragStart("track"));});},function(t){return t.call(o);},function(t){return t.remove();}),this.updateSelectionArea(!1),this.renderHandles();},e.prototype.render=function(t,e){this.renderTrack(e),this.renderSparkline(e),this.renderBrushArea(e),this.renderSelection(e);},e.prototype.clampValues=function(t,e){void 0===e&&(e=4);var n,i=(0,ei.__read)(this.range,2),r=i[0],a=i[1],s=(0,ei.__read)(this.getValues().map(function(t){return nF(t,e);}),2),o=s[0],l=s[1],d=Array.isArray(t)?t:[o,null!=t?t:l],u=(0,ei.__read)((d||[o,l]).map(function(t){return nF(t,e);}),2),c=u[0],h=u[1];if("value"===this.attributes.type)return[0,(0,eb.default)(h,r,a)];c>h&&(c=(n=(0,ei.__read)([h,c],2))[0],h=n[1]);var p=h-c;return p>a-r?[r,a]:c<r?o===r&&l===h?[r,h]:[r,p+r]:h>a?l===a&&o===c?[c,a]:[a-p,a]:[c,h];},e.prototype.calcSelectionArea=function(t){var e=(0,ei.__read)(this.clampValues(t),2),n=e[0],i=e[1],r=this.availableSpace,a=r.x,s=r.y,o=r.width,l=r.height;return this.getOrientVal([[{y:s,height:l,x:a,width:n*o},{y:s,height:l,x:n*o+a,width:(i-n)*o},{y:s,height:l,x:i*o,width:(1-i)*o}],[{x:a,width:o,y:s,height:n*l},{x:a,width:o,y:n*l+s,height:(i-n)*l},{x:a,width:o,y:i*l,height:(1-i)*l}]]);},e.prototype.calcHandlePosition=function(t){var e=this.attributes.handleIconOffset,n=this.availableSpace,i=n.x,r=n.y,a=n.width,s=n.height,o=(0,ei.__read)(this.clampValues(),2),l=o[0],d=o[1],u=("start"===t?l:d)*this.getOrientVal([a,s])+("start"===t?-e:e);return{x:i+this.getOrientVal([u,a/2]),y:r+this.getOrientVal([s/2,u])};},e.prototype.inferTextStyle=function(t){return"horizontal"===this.attributes.orientation?{}:"start"===t?{transformOrigin:"left center",transform:"rotate(90)",textAlign:"start"}:"end"===t?{transformOrigin:"right center",transform:"rotate(90)",textAlign:"end"}:{};},e.prototype.calcHandleText=function(t){var e,n=this.attributes,i=n.type,r=n.orientation,a=n.formatter,s=n.autoFitLabel,o=(0,eo.subStyleProps)(this.attributes,"handle"),l=(0,eo.subStyleProps)(o,"label"),d=o.spacing,u=this.getHandleSize(),c=this.clampValues(),h=a("start"===t?c[0]:c[1]),p=new nj.Text({style:(0,ei.__assign)((0,ei.__assign)((0,ei.__assign)({},l),this.inferTextStyle(t)),{text:h})}),f=p.getBBox(),g=f.width,y=f.height;if(p.destroy(),!s){if("value"===i)return{text:h,x:0,y:-y-d};var m=d+u+("horizontal"===r?g/2:0);return(e={text:h})["horizontal"===r?"x":"y"]="start"===t?-m:m,e;}var b=0,v=0,E=this.availableSpace,x=E.width,O=E.height,S=this.calcSelectionArea()[1],_=S.x,P=S.y,C=S.width,w=S.height,M=d+u;if("horizontal"===r){var A=M+g/2;b="start"===t?_-M-g>0?-A:A:x-_-C-M>g?A:-A;}else{var T=y+M;v="start"===t?P-u>y?-T:M:O-(P+w)-u>y?T:-M;}return{x:b,y:v,text:h};},e.prototype.getHandleLabelStyle=function(t){var e=(0,eo.subStyleProps)(this.attributes,"handleLabel");return(0,ei.__assign)((0,ei.__assign)((0,ei.__assign)({},e),this.calcHandleText(t)),this.inferTextStyle(t));},e.prototype.getHandleIconStyle=function(){var t=this.attributes.handleIconShape,e=(0,eo.subStyleProps)(this.attributes,"handleIcon"),n=this.getOrientVal(["ew-resize","ns-resize"]),i=this.getHandleSize();return(0,ei.__assign)({cursor:n,shape:t,size:i},e);},e.prototype.getHandleStyle=function(t){var e=this.attributes,n=e.x,i=e.y,r=e.showLabel,a=e.showLabelOnInteraction,s=e.orientation,o=this.calcHandlePosition(t),l=o.x,d=o.y,u=this.calcHandleText(t),c=r;return!r&&a&&(c=!!this.target),(0,ei.__assign)((0,ei.__assign)((0,ei.__assign)({},(0,eo.superStyleProps)(this.getHandleIconStyle(),"icon")),(0,eo.superStyleProps)((0,ei.__assign)((0,ei.__assign)({},this.getHandleLabelStyle(t)),u),"label")),{transform:"translate(".concat(l+n,", ").concat(d+i,")"),orientation:s,showLabel:c,type:t,zIndex:3});},e.prototype.getHandleSize=function(){var t=this.attributes,e=t.handleIconSize,n=t.width,i=t.height;return e||Math.floor((this.getOrientVal([+i,+n])+4)/2.4);},e.prototype.getOrientVal=function(t){var e=(0,ei.__read)(t,2),n=e[0],i=e[1];return"horizontal"===this.attributes.orientation?n:i;},e.prototype.setValuesOffset=function(t,e,n){void 0===e&&(e=0),void 0===n&&(n=!1);var i=this.attributes.type,r=(0,ei.__read)(this.getValues(),2),a=[r[0]+("range"===i?t:0),r[1]+e].sort();n?this.setValues(a):this.innerSetValues(a,!0);},e.prototype.getRatio=function(t){var e=this.availableSpace,n=e.width,i=e.height;return t/this.getOrientVal([n,i]);},e.prototype.dispatchCustomEvent=function(t,e,n){var i=this;t.on(e,function(t){t.stopPropagation(),i.dispatchEvent(new ed.CustomEvent(n,{detail:t}));});},e.prototype.bindEvents=function(){this.addEventListener("wheel",this.onScroll);var t=this.brushArea;this.dispatchCustomEvent(t,"click","trackClick"),this.dispatchCustomEvent(t,"pointerenter","trackMouseenter"),this.dispatchCustomEvent(t,"pointerleave","trackMouseleave"),t.on("pointerdown",this.onDragStart("track"));},e.prototype.onScroll=function(t){if(this.attributes.scrollable){var e=t.deltaX,n=t.deltaY,i=this.getRatio(n||e);this.setValuesOffset(i,i,!0);}},e.tag="slider",e;}(er.Component),i$={backgroundFill:"#262626",backgroundLineCap:"round",backgroundLineWidth:1,backgroundStroke:"#333",backgroundZIndex:-1,formatter:function(t){return t.toString();},labelFill:"#fff",labelFontSize:12,labelTextBaseline:"middle",padding:[2,4],position:"right",radius:0,zIndex:999},iU=(0,ef.classNames)({background:"background",labelGroup:"label-group",label:"label"},"indicator"),iX=function(t){function e(e){var n=t.call(this,e,i$)||this;return n.point=[0,0],n.group=n.appendChild(new ed.Group({})),n.isMutationObserved=!0,n;}return(0,ei.__extends)(e,t),e.prototype.renderBackground=function(){if(this.label){var t=this.attributes,e=t.position,n=t.padding,i=(0,ei.__read)((0,eD.parseSeriesAttr)(n),4),r=i[0],a=i[1],s=i[2],o=i[3],l=this.label.node().getLocalBounds(),d=l.min,u=l.max,c=new ea.BBox(d[0]-o,d[1]-r,u[0]+a-d[0]+o,u[1]+s-d[1]+r),h=this.getPath(e,c),p=(0,eo.subStyleProps)(this.attributes,"background");this.background=(0,es.select)(this.group).maybeAppendByClassName(iU.background,"path").styles((0,ei.__assign)((0,ei.__assign)({},p),{d:h})),this.group.appendChild(this.label.node());}},e.prototype.renderLabel=function(){var t=this.attributes,e=t.formatter,n=t.labelText,i=(0,eo.subStyleProps)(this.attributes,"label"),r=(0,ei.__read)((0,eo.splitStyle)(i),2),a=r[0],s=r[1],o=(a.text,(0,ei.__rest)(a,["text"]));this.label=(0,es.select)(this.group).maybeAppendByClassName(iU.labelGroup,"g").styles(s),n&&this.label.maybeAppendByClassName(iU.label,function(){return(0,eL.renderExtDo)(e(n));}).style("text",e(n).toString()).selectAll("text").styles(o);},e.prototype.adjustLayout=function(){var t=(0,ei.__read)(this.point,2),e=t[0],n=t[1],i=this.attributes,r=i.x,a=i.y;this.group.attr("transform","translate(".concat(r-e,", ").concat(a-n,")"));},e.prototype.getPath=function(t,e){var n=this.attributes.radius,i=e.x,r=e.y,a=e.width,s=e.height,o=[["M",i+n,r],["L",i+a-n,r],["A",n,n,0,0,1,i+a,r+n],["L",i+a,r+s-n],["A",n,n,0,0,1,i+a-n,r+s],["L",i+n,r+s],["A",n,n,0,0,1,i,r+s-n],["L",i,r+n],["A",n,n,0,0,1,i+n,r],["Z"]],l={top:4,right:6,bottom:0,left:2}[t],d=this.createCorner([o[l].slice(-2),o[l+1].slice(-2)]);return o.splice.apply(o,(0,ei.__spreadArray)([l+1,1],(0,ei.__read)(d),!1)),o[0][0]="M",o;},e.prototype.createCorner=function(t,e){void 0===e&&(e=10);var n=eA.isHorizontal.apply(void 0,(0,ei.__spreadArray)([],(0,ei.__read)(t),!1)),i=(0,ei.__read)(t,2),r=(0,ei.__read)(i[0],2),a=r[0],s=r[1],o=(0,ei.__read)(i[1],2),l=o[0],d=o[1],u=(0,ei.__read)(n?[l-a,[a,l]]:[d-s,[s,d]],2),c=u[0],h=(0,ei.__read)(u[1],2),p=h[0],f=h[1],g=c/2,y=c/Math.abs(c)*e,m=y/2,b=y*Math.sqrt(3)/2*.8,v=(0,ei.__read)([p,p+g-m,p+g,p+g+m,f],5),E=v[0],x=v[1],O=v[2],S=v[3],_=v[4];return n?(this.point=[O,s-b],[["L",E,s],["L",x,s],["L",O,s-b],["L",S,s],["L",_,s]]):(this.point=[a+b,O],[["L",a,E],["L",a,x],["L",a+b,O],["L",a,S],["L",a,_]]);},e.prototype.applyVisibility=function(){"hidden"===this.attributes.visibility?(0,eO.hide)(this):(0,eO.show)(this);},e.prototype.bindEvents=function(){this.label.on(ed.ElementEvent.BOUNDS_CHANGED,this.renderBackground);},e.prototype.render=function(){this.renderLabel(),this.renderBackground(),this.adjustLayout(),this.applyVisibility();},e;}(er.Component),iZ=function(t){function e(n){var i=t.call(this,(0,eg.deepAssign)({},e.defaultOptions,n))||this;return i.hoverColor="#f5f5f5",i.selectedColor="#e6f7ff",i.background=i.appendChild(new ed.Rect({})),i.label=i.background.appendChild(new ed.Group({})),i;}return(0,ei.__extends)(e,t),Object.defineProperty(e.prototype,"padding",{get:function(){return(0,eD.parseSeriesAttr)(this.style.padding);},enumerable:!1,configurable:!0}),e.prototype.renderLabel=function(){var t=this.style,e=t.label,n=t.value,i=(0,eo.subStyleProps)(this.attributes,"label");(0,es.select)(this.label).maybeAppend(".label",function(){return(0,eL.renderExtDo)(e);}).attr("className","label").styles(i),this.label.attr("__data__",n);},e.prototype.renderBackground=function(){var t=this.label.getBBox(),e=(0,ei.__read)(this.padding,4),n=e[0],i=e[1],r=e[2],a=e[3],s=t.width,o=t.height,l=o+n+r,d=(0,eo.subStyleProps)(this.attributes,"background"),u=this.style,c=u.width,h=u.height,p=u.selected;this.background.attr((0,ei.__assign)((0,ei.__assign)({},d),{width:Math.max(s+a+i,void 0===c?0:c),height:Math.max(l,void 0===h?0:h),fill:p?this.selectedColor:"#fff"})),this.label.attr({transform:"translate(".concat(a,", ").concat((l-o)/2,")")});},e.prototype.render=function(){this.renderLabel(),this.renderBackground();},e.prototype.bindEvents=function(){var t=this;this.addEventListener("pointerenter",function(){t.style.selected||t.background.attr("fill",t.hoverColor);}),this.addEventListener("pointerleave",function(){t.style.selected||t.background.attr("fill",t.style.backgroundFill);});var e=this;this.addEventListener("click",function(){var n=t.style,i=n.label,r=n.value,a=n.onClick;null==a||a(r,{label:i,value:r},e);});},e.defaultOptions={style:{value:"",label:"",cursor:"pointer"}},e;}(er.Component),iq=function(t){function e(n){var i,r,a=t.call(this,(0,eg.deepAssign)({},e.defaultOptions,n))||this;a.currentValue=null===(i=e.defaultOptions.style)||void 0===i?void 0:i.defaultValue,a.isPointerInSelect=!1,a.select=a.appendChild(new ed.Rect({className:"select",style:{cursor:"pointer",width:0,height:0}})),a.dropdown=a.appendChild(new ed.Rect({className:"dropdown"}));var s=a.style.defaultValue;return s&&(null===(r=a.style.options)||void 0===r?void 0:r.some(function(t){return t.value===s;}))&&(a.currentValue=s),a;}return(0,ei.__extends)(e,t),e.prototype.setValue=function(t){this.currentValue=t,this.render();},e.prototype.getValue=function(){return this.currentValue;},Object.defineProperty(e.prototype,"dropdownPadding",{get:function(){return(0,eD.parseSeriesAttr)(this.style.dropdownPadding);},enumerable:!1,configurable:!0}),e.prototype.renderSelect=function(){var t,e=this,n=this.style,i=n.x,r=n.y,a=n.width,s=n.height,o=n.bordered,l=n.showDropdownIcon,d=(0,eo.subStyleProps)(this.attributes,"select"),u=(0,eo.subStyleProps)(this.attributes,"placeholder");this.select.attr((0,ei.__assign)((0,ei.__assign)({x:i,y:r,width:a,height:s},d),{fill:"#fff",strokeWidth:o?1:0}));var c=this.dropdownPadding;l&&(0,es.select)(this.select).maybeAppend(".dropdown-icon","path").style("d","M-5,-3.5 L0,3.5 L5,-3.5").style("transform","translate(".concat(i+a-10-c[1]-c[3],", ").concat(r+s/2,")")).style("lineWidth",1).style("stroke",this.select.style.stroke);var h=null===(t=this.style.options)||void 0===t?void 0:t.find(function(t){return t.value===e.currentValue;}),p=(0,ei.__assign)({x:i+c[3]},u);(0,es.select)(this.select).selectAll(".placeholder").data(h?[]:[1]).join(function(t){return t.append("text").attr("className","placeholder").styles(p).style("y",function(){return r+(s-this.getBBox().height)/2;});},function(t){return t.styles(p);},function(t){return t.remove();});var f=(0,eo.subStyleProps)(this.attributes,"optionLabel"),g=(0,ei.__assign)({x:i+c[3]},f);(0,es.select)(this.select).selectAll(".value").data(h?[h]:[]).join(function(t){return t.append(function(t){return(0,eL.renderExtDo)(t.label);}).attr("className","value").styles(g).style("y",function(){return r+(s-this.getBBox().height)/2;});},function(t){return t.styles(g);},function(t){return t.remove();});},e.prototype.renderDropdown=function(){var t,e,n=this,i=this.style,r=i.x,a=i.y,s=i.width,o=i.height,l=i.options,d=i.onSelect,u=i.open,c=(0,eo.subStyleProps)(this.attributes,"dropdown"),h=(0,eo.subStyleProps)(this.attributes,"option"),p=this.dropdownPadding;(0,es.select)(this.dropdown).maybeAppend(".dropdown-container","g").attr("className","dropdown-container").selectAll(".dropdown-item").data(l,function(t){return t.value;}).join(function(t){return t.append(function(t){return new iZ({className:"dropdown-item",style:(0,ei.__assign)((0,ei.__assign)((0,ei.__assign)({},t),h),{width:s-p[1]-p[3],selected:t.value===n.currentValue,onClick:function(t,e,i){n.setValue(t),null==d||d(t,e,i),n.dispatchEvent(new ed.CustomEvent("change",{detail:{value:t,option:e,item:i}})),(0,eO.hide)(n.dropdown);}})});}).each(function(t,e){var n,i=(null===(n=this.parentNode)||void 0===n?void 0:n.children).reduce(function(t,n,i){return i<e&&(t+=n.getBBox().height),t;},0);this.attr("transform","translate(".concat(p[3],", ").concat(p[0]+i,")"));});},function(t){return t.update(function(t){return{selected:t.value===n.currentValue};});},function(t){return t.remove();});var f=null===(e=null===(t=this.dropdown.getElementsByClassName("dropdown-container"))||void 0===t?void 0:t[0])||void 0===e?void 0:e.getBBox(),g=c.spacing;this.dropdown.attr((0,ei.__assign)({transform:"translate(".concat(r,", ").concat(a+o+g,")"),width:f.width+p[1]+p[3],height:f.height+p[0]+p[2]},c)),u||(0,eO.hide)(this.dropdown);},e.prototype.render=function(){this.renderSelect(),this.renderDropdown();},e.prototype.bindEvents=function(){var t=this;this.addEventListener("click",function(t){t.stopPropagation();}),this.select.addEventListener("click",function(){"visible"===t.dropdown.style.visibility?(0,eO.hide)(t.dropdown):(0,eO.show)(t.dropdown);}),this.addEventListener("pointerenter",function(){t.isPointerInSelect=!0;}),this.addEventListener("pointerleave",function(){t.isPointerInSelect=!1;}),null==document||document.addEventListener("click",function(){t.isPointerInSelect||(0,eO.hide)(t.dropdown);});},e.defaultOptions={style:{x:0,y:0,width:140,height:32,options:[],bordered:!0,defaultValue:"",selectRadius:8,selectStroke:"#d9d9d9",showDropdownIcon:!0,placeholderText:"\u8BF7\u9009\u62E9",placeholderFontSize:12,placeholderTextBaseline:"top",placeholderFill:"#c2c2c2",dropdownFill:"#fff",dropdownStroke:"#d9d9d9",dropdownRadius:8,dropdownShadowBlur:4,dropdownShadowColor:"rgba(0, 0, 0, 0.08)",dropdownPadding:8,dropdownSpacing:10,optionPadding:[8,12],optionFontSize:12,optionTextBaseline:"top",optionBackgroundFill:"#fff",optionBackgroundRadius:4,optionLabelFontSize:12,optionLabelTextBaseline:"top"}},e;}(er.Component),iQ=function(t){function e(n){var i=t.call(this,(0,eg.deepAssign)({},{style:{backgroundOpacity:e.backgroundOpacities.default}},e.defaultOptions,n))||this;return i.showBackground=!0,i.background=i.appendChild(new ed.Rect({})),i.icon=i.appendChild(new ed.Group({})),i;}return(0,ei.__extends)(e,t),Object.defineProperty(e.prototype,"label",{get:function(){return"BaseIcon";},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"lineWidth",{get:function(){return Math.log10(this.attributes.size);},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"padding",{get:function(){return(0,eD.parseSeriesAttr)(this.attributes.size/5);},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"iconSize",{get:function(){var t=this.attributes.size,e=(0,ei.__read)(this.padding,4),n=e[0],i=e[1],r=e[2];return Math.max(t-Math.max(e[3]+i,n+r),2*this.lineWidth+1);},enumerable:!1,configurable:!0}),e.prototype.renderBackground=function(){var t=this.attributes,e=t.x,n=t.y,i=t.size,r=i/2,a=(0,eo.subStyleProps)(this.attributes,"background");this.background.attr((0,ei.__assign)({x:e-r,y:n-r,width:i,height:i},a));},e.prototype.showIndicator=function(){if(this.label){var t=this.attributes.size,e=this.background.getBBox(),n=e.x,i=e.y;this.indicator.update({x:n+t/2,y:i-5,labelText:this.label,visibility:"visible"});}},e.prototype.hideIndicator=function(){this.indicator.update({visibility:"hidden"});},e.prototype.connectedCallback=function(){t.prototype.connectedCallback.call(this);var e,n=this.attributes.size,i=this.background.getBBox(),r=i.x,a=i.y,s=null===(e=this.ownerDocument)||void 0===e?void 0:e.defaultView;s&&(this.indicator=s.appendChild(new iX({style:{x:r+n/2,y:a-n/2,visibility:"hidden",position:"top",radius:3,zIndex:100}})));},e.prototype.disconnectedCallback=function(){this.indicator.destroy();},e.prototype.render=function(){this.renderIcon(),this.showBackground&&this.renderBackground();},e.prototype.bindEvents=function(){var t=this,n=this.attributes.onClick;if(this.addEventListener("click",function(){null==n||n(t);}),this.showBackground){var i=function(){return t.background.attr({opacity:e.backgroundOpacities.default});};this.addEventListener("pointerenter",function(){t.background.attr({opacity:e.backgroundOpacities.hover}),t.showIndicator();}),this.addEventListener("pointerleave",function(){i(),t.hideIndicator();}),this.addEventListener("pointerdown",function(){t.background.attr({opacity:e.backgroundOpacities.active});}),this.addEventListener("pointerup",function(){i();});}},e.tag="IconBase",e.defaultOptions={style:{x:0,y:0,size:10,color:"#565758",backgroundRadius:4,backgroundFill:"#e2e2e2"}},e.backgroundOpacities={default:0,hover:.8,active:1},e;}(er.Component),iJ=function(t,e){return void 0===e&&(e="#565758"),new ed.Path({style:{fill:e,d:"M ".concat(t,",").concat(t," L -").concat(t,",0 L ").concat(t,",-").concat(t," Z"),transformOrigin:"center"}});},i0=function(t){function e(){return null!==t&&t.apply(this,arguments)||this;}return(0,ei.__extends)(e,t),e.prototype.arcPath=function(t,e,n){var i=(0,ei.__read)([n,n],2),r=i[0],a=i[1],s=function(i){return[t+n*Math.cos(i),e+n*Math.sin(i)];},o=(0,ei.__read)(s(-5/4*Math.PI),2),l=o[0],d=o[1],u=(0,ei.__read)(s(1/4*Math.PI),2),c=u[0],h=u[1];return"M".concat(l,",").concat(d,",A").concat(r,",").concat(a,",0,1,1,").concat(c,",").concat(h);},Object.defineProperty(e.prototype,"label",{get:function(){return"\u91CD\u7F6E";},enumerable:!1,configurable:!0}),e.prototype.renderIcon=function(){var t=this.attributes,e=t.x,n=t.y,i=t.color,r=this.iconSize,a=this.lineWidth;(0,es.select)(this.icon).maybeAppend(".reset","path").styles({stroke:i,lineWidth:a,d:this.arcPath(e,n,r/2-a),markerStart:iJ(a+.5,i)});},e;}(iQ),i1=function(t){function e(){return null!==t&&t.apply(this,arguments)||this;}return(0,ei.__extends)(e,t),Object.defineProperty(e.prototype,"label",{get:function(){return"\u5FEB\u9000";},enumerable:!1,configurable:!0}),e.prototype.renderIcon=function(){var t=this.attributes,e=t.x,n=t.y,i=t.color,r=this.iconSize,a=r/2,s=r/2/1.7320508075688772;(0,es.select)(this.icon).maybeAppend(".backward","polygon").styles({points:[[e,n],[e,n-s],[e-a,n],[e,n+s],[e,n],[e+a,n-s],[e+a,n+s],[e,n]],fill:i});},e;}(iQ),i2=function(t){function e(){return null!==t&&t.apply(this,arguments)||this;}return(0,ei.__extends)(e,t),Object.defineProperty(e.prototype,"label",{get:function(){return"\u5FEB\u8FDB";},enumerable:!1,configurable:!0}),e.prototype.renderIcon=function(){var t=this.attributes,e=t.x,n=t.y,i=t.color,r=this.iconSize,a=r/2,s=r/2/1.7320508075688772;(0,es.select)(this.icon).maybeAppend(".forward","polygon").styles({points:[[e,n],[e,n-s],[e+a,n],[e,n+s],[e,n],[e-a,n-s],[e-a,n+s],[e,n]],fill:i});},e;}(iQ),i3=function(t){function e(){return null!==t&&t.apply(this,arguments)||this;}return(0,ei.__extends)(e,t),Object.defineProperty(e.prototype,"label",{get:function(){return"\u64AD\u653E";},enumerable:!1,configurable:!0}),e.prototype.renderIcon=function(){var t=this.attributes,e=t.x,n=t.y,i=t.color,r=this.iconSize,a=r/3*1.3856406460551018;(0,es.select)(this.icon).maybeAppend(".play","polygon").styles({points:[[e+a,n],[e-a/2,n-r/2*.8],[e-a/2,n+r/2*.8],[e+a,n]],fill:i});},e;}(iQ),i6=function(t){function e(){return null!==t&&t.apply(this,arguments)||this;}return(0,ei.__extends)(e,t),Object.defineProperty(e.prototype,"label",{get:function(){return"\u6682\u505C";},enumerable:!1,configurable:!0}),e.prototype.renderIcon=function(){var t=this.attributes,e=t.x,n=t.y,i=t.color,r=this.iconSize,a=r/3;(0,es.select)(this.icon).maybeAppend(".pause","polygon").styles({points:[[e-a,n-r/2],[e-a,n+r/2],[e-a/2,n+r/2],[e-a/2,n-r/2],[e-a,n-r/2],[e+a/2,n-r/2],[e+a/2,n+r/2],[e+a,n+r/2],[e+a,n-r/2]],fill:i});},e;}(iQ),i5=function(t){function e(){return null!==t&&t.apply(this,arguments)||this;}return(0,ei.__extends)(e,t),Object.defineProperty(e.prototype,"label",{get:function(){return"\u8303\u56F4\u65F6\u95F4";},enumerable:!1,configurable:!0}),e.prototype.renderIcon=function(){var t=this.attributes,e=t.x,n=t.y,i=t.color,r=this.iconSize,a=this.lineWidth;(0,es.select)(this.icon).maybeAppend(".left-line","line").styles({x1:e-r/2,y1:n-r/2,x2:e-r/2,y2:n+r/2,stroke:i,lineWidth:a}),(0,es.select)(this.icon).maybeAppend(".right-line","line").styles({x1:e+r/2,y1:n-r/2,x2:e+r/2,y2:n+r/2,stroke:i,lineWidth:a}),(0,es.select)(this.icon).maybeAppend(".left-arrow","line").styles({x1:e,y1:n,x2:e-r/2+2*a,y2:n,stroke:i,lineWidth:a,markerEnd:iJ(2*a,i)}),(0,es.select)(this.icon).maybeAppend(".right-arrow","line").styles({x1:e,y1:n,x2:e+r/2-2*a,y2:n,stroke:i,lineWidth:a,markerEnd:iJ(2*a,i)});},e;}(iQ),i4=function(t){function e(){return null!==t&&t.apply(this,arguments)||this;}return(0,ei.__extends)(e,t),Object.defineProperty(e.prototype,"label",{get:function(){return"\u5355\u4E00\u65F6\u95F4";},enumerable:!1,configurable:!0}),e.prototype.renderIcon=function(){var t=this.attributes,e=t.x,n=t.y,i=t.color,r=this.iconSize,a=this.lineWidth;(0,es.select)(this.icon).maybeAppend(".line","line").styles({x1:e,y1:n-r/2,x2:e,y2:n+r/2,stroke:i,lineWidth:a}),(0,es.select)(this.icon).maybeAppend(".left-arrow","line").styles({x1:e-r/2-2*a,y1:n,x2:e-2*a,y2:n,stroke:i,lineWidth:a,markerEnd:iJ(2*a,i)}),(0,es.select)(this.icon).maybeAppend(".right-arrow","line").styles({x1:e+r/2+2*a,y1:n,x2:e+2*a,y2:n,stroke:i,lineWidth:a,markerEnd:iJ(2*a,i)});},e;}(iQ),i8=function(t){return[[-t/2,-t/2],[-t/2,t/2],[t/2,t/2]];},i9=function(t){function e(){return null!==t&&t.apply(this,arguments)||this;}return(0,ei.__extends)(e,t),Object.defineProperty(e.prototype,"label",{get:function(){return"\u6298\u7EBF\u56FE";},enumerable:!1,configurable:!0}),e.prototype.renderIcon=function(){var t=this.attributes,e=t.x,n=t.y,i=t.color,r=this.iconSize,a=this.lineWidth,s=(r-2*a-a)/4,o=(r-2*a-a)/2,l=(0,ei.__read)([e-r/2+a,n+r/2-2*a],2),d=l[0],u=l[1];(0,es.select)(this.icon).maybeAppend(".coordinate","polyline").styles({points:i8(r).map(function(t){var i=(0,ei.__read)(t,2);return[i[0]+e,i[1]+n];}),stroke:i,lineWidth:a}),(0,es.select)(this.icon).maybeAppend(".line","polyline").styles({points:[[d,u],[d+s,u-o],[d+2*s,u],[d+4*s,u-2*o]],stroke:i,lineWidth:a});},e;}(iQ),i7=function(t){function e(){return null!==t&&t.apply(this,arguments)||this;}return(0,ei.__extends)(e,t),Object.defineProperty(e.prototype,"label",{get:function(){return"\u6761\u5F62\u56FE";},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"data",{get:function(){return[1,4,2,4,3];},enumerable:!1,configurable:!0}),e.prototype.renderIcon=function(){var t=this.data,e=this.attributes,n=e.x,i=e.y,r=e.color,a=this.iconSize,s=this.lineWidth,o=(a-s)/t.length,l=(a-2*s)/4,d=(0,ei.__read)([n-a/2+2*s,i+a/2-s],2),u=d[0],c=d[1];(0,es.select)(this.icon).maybeAppend(".coordinate","polyline").styles({points:i8(a).map(function(t){var e=(0,ei.__read)(t,2);return[e[0]+n,e[1]+i];}),stroke:r,lineWidth:s}),(0,es.select)(this.icon).maybeAppend(".bars","g").selectAll(".column").data(this.data.map(function(t,e){return{value:t,index:e};})).join(function(t){return t.append("line").attr("className","column").style("x1",function(t){return u+o*t.index;}).style("y1",c).style("x2",function(t){return u+o*t.index;}).style("y2",function(t){return c-l*t.value;}).styles({y1:c,stroke:r,lineWidth:s});});},e;}(iQ),rt=function(t){function e(e){var n=t.call(this,(0,eg.deepAssign)({},{style:{color:"#d8d9d9"}},e))||this;return n.showBackground=!1,n;}return(0,ei.__extends)(e,t),e.prototype.renderIcon=function(){var t=this.attributes,e=t.x,n=t.y,i=t.color,r=this.iconSize,a=this.lineWidth;(0,es.select)(this.icon).maybeAppend(".split","line").styles({x1:e,y1:n-r/2,x2:e,y2:n+r/2,stroke:i,lineWidth:a});},e;}(iQ),re=function(t){function e(){var e=t.apply(this,(0,ei.__spreadArray)([],(0,ei.__read)(arguments),!1))||this;return e.showBackground=!1,e;}return(0,ei.__extends)(e,t),Object.defineProperty(e.prototype,"padding",{get:function(){return(0,eD.parseSeriesAttr)(0);},enumerable:!1,configurable:!0}),e.prototype.renderIcon=function(){var t=this.iconSize,e=this.attributes,n=e.x,i=e.y,r=e.speed,a=(0,h.default)(this.attributes,["x","y","transform","transformOrigin","width","height","size","color","speed"]),s=(0,eb.default)(t,20,1/0),o=(0,ei.__assign)((0,ei.__assign)({},a),{x:n-s/2,y:i-10,width:s,height:20,defaultValue:void 0===r?1:r,bordered:!1,showDropdownIcon:!1,selectRadius:2,dropdownPadding:this.padding,dropdownRadius:2,dropdownSpacing:t/5,placeholderFontSize:t/2,optionPadding:0,optionLabelFontSize:t/2,optionBackgroundRadius:1,options:[{label:"1x",value:1},{label:"1.5x",value:1.5},{label:"2x",value:2}]});(0,es.select)(this.icon).maybeAppend(".speed",function(){return new iq({style:o});}).attr("className","speed").each(function(){this.update(o);});},e.tag="SpeedSelect",e;}(iQ),rn=function(t){function e(e){var n=t.call(this,e)||this;return n.icon=n.appendChild(new ed.Group({})),n.currentType=n.attributes.type,n;}return(0,ei.__extends)(e,t),e.prototype.getType=function(){return this.currentType;},e.prototype.render=function(){var t=this,e=this.attributes,n=(e.onChange,(0,ei.__rest)(e,["onChange"]));(0,es.select)(this.icon).selectAll(".icon").data([this.currentType]).join(function(e){return e.append(function(e){var n,i=null===(n=t.toggles.find(function(t){return(0,ei.__read)(t,1)[0]===e;}))||void 0===n?void 0:n[1];if(!i)throw Error("Invalid type: ".concat(e));return new i({});}).attr("className","icon").styles(n,!1).update({});},function(t){return t.styles({restStyles:n}).update({});},function(t){return t.remove();});},e.prototype.bindEvents=function(){var t=this,e=this.attributes.onChange;this.addEventListener("click",function(n){n.preventDefault(),n.stopPropagation();var i=(t.toggles.findIndex(function(e){return(0,ei.__read)(e,1)[0]===t.currentType;})+1)%t.toggles.length,r=t.toggles[i][0];null==e||e(t.currentType),t.currentType=r,t.render();});},e.tag="ToggleIcon",e;}(er.Component),ri=function(t){function e(e){var n=t.call(this,(0,eg.deepAssign)({},{style:{type:"play"}},e))||this;return n.toggles=[["play",i3],["pause",i6]],n;}return(0,ei.__extends)(e,t),e;}(rn),rr=function(t){function e(e){var n=t.call(this,(0,eg.deepAssign)({},{style:{type:"range"}},e))||this;return n.toggles=[["range",i5],["value",i4]],n;}return(0,ei.__extends)(e,t),e;}(rn),ra=function(t){function e(e){var n=t.call(this,(0,eg.deepAssign)({},{style:{type:"column"}},e))||this;return n.toggles=[["line",i9],["column",i7]],n;}return(0,ei.__extends)(e,t),e;}(rn),rs={reset:i0,speed:re,backward:i1,playPause:ri,forward:i2,selectionType:rr,chartType:ra,split:rt},ro=function(t){function e(n){var i=t.call(this,(0,eg.deepAssign)({},e.defaultOptions,n))||this;return i.background=i.appendChild(new ed.Rect({})),i.functions=i.appendChild(new ed.Group({})),i;}return(0,ei.__extends)(e,t),Object.defineProperty(e.prototype,"padding",{get:function(){return(0,eD.parseSeriesAttr)(this.attributes.padding);},enumerable:!1,configurable:!0}),e.prototype.renderBackground=function(){var t=this.style,e=t.x,n=t.y,i=t.width,r=t.height,a=(0,eo.subStyleProps)(this.attributes,"background");this.background.attr((0,ei.__assign)({x:e,y:n,width:i,height:r},a));},e.prototype.renderFunctions=function(){var t,e=this,n=this.attributes,i=n.functions,r=n.iconSize,a=n.iconSpacing,s=n.x,o=n.y,l=n.width,d=n.height,u=n.align,c=(0,ei.__read)(this.padding,4),h=c[1],p=c[3],f=i.reduce(function(t,e){return t.length&&e.length?t.concat.apply(t,(0,ei.__spreadArray)(["split"],(0,ei.__read)(e),!1)):t.concat.apply(t,(0,ei.__spreadArray)([],(0,ei.__read)(e),!1));},[]),g=f.length*(r+a)-a,y={left:p+r/2,center:(l-g)/2+r/2,right:l-g-p-h+r/2}[u]||0;null===(t=this.speedSelect)||void 0===t||t.destroy(),this.functions.removeChildren(),f.forEach(function(t,n){var i,l=rs[t],u={x:s+n*(r+a)+y,y:o+d/2,size:r};if(l===re?(u.speed=e.attributes.speed,u.onSelect=function(n){return e.handleFunctionChange(t,{value:n});}):[ri,rr,ra].includes(l)?(u.onChange=function(n){return e.handleFunctionChange(t,{value:n});},l===ri&&(u.type="play"===e.attributes.state?"pause":"play"),l===rr&&(u.type="range"===e.attributes.selectionType?"value":"range"),l===ra&&(u.type="line"===e.attributes.chartType?"column":"line")):u.onClick=function(){return e.handleFunctionChange(t,{value:t});},l===re){var c=null===(i=e.ownerDocument)||void 0===i?void 0:i.defaultView;c&&(e.speedSelect=new l({style:(0,ei.__assign)((0,ei.__assign)({},u),{zIndex:100})}),c.appendChild(e.speedSelect));}else e.functions.appendChild(new l({style:u}));});},e.prototype.disconnectedCallback=function(){var e;t.prototype.disconnectedCallback.call(this),null===(e=this.speedSelect)||void 0===e||e.destroy();},e.prototype.render=function(){this.renderBackground(),this.renderFunctions();},e.prototype.handleFunctionChange=function(t,e){var n=this.attributes.onChange;null==n||n(t,e);},e.defaultOptions={style:{x:0,y:0,width:300,height:40,padding:0,align:"center",iconSize:25,iconSpacing:0,speed:1,state:"pause",chartType:"line",selectionType:"range",backgroundFill:"#fbfdff",backgroundStroke:"#ebedf0",functions:[["reset","speed"],["backward","playPause","forward"],["selectionType","chartType"]]}},e;}(er.Component),rl=function(t){function e(n){var i=t.call(this,(0,eg.deepAssign)({},e.defaultOptions,n))||this;return i.bindEvents(),i;}return(0,ei.__extends)(e,t),e.prototype.bindEvents=function(){var t=this;this.addEventListener("mouseenter",function(){t.attr("lineWidth",Math.ceil(+(t.style.r||0)/2));}),this.addEventListener("mouseleave",function(){t.attr("lineWidth",0);});},e.defaultOptions={style:{r:5,fill:"#3f7cf7",lineWidth:0,stroke:"#3f7cf7",strokeOpacity:.5,cursor:"pointer"}},e;}(ed.Circle),rd=function(t){function e(n){return t.call(this,(0,eg.deepAssign)({},e.defaultOptions,n))||this;}return(0,ei.__extends)(e,t),e.prototype.renderBackground=function(){var t=this.attributes,e=t.x,n=t.y,i=t.width,r=t.height,a=(0,eo.subStyleProps)(this.attributes,"background");(0,es.select)(this).maybeAppend("background","rect").attr("className","background").styles((0,ei.__assign)({x:e-i/2,y:n-r/2,width:i,height:r},a));},e.prototype.renderIcon=function(){var t=this.attributes,e=t.x,n=t.y,i=t.iconSize,r=(0,eo.subStyleProps)(this.attributes,"icon"),a=i/2;(0,es.select)(this).maybeAppend("icon-left-line","line").attr("className","icon-left-line").styles((0,ei.__assign)({x1:e-1,y1:n-a,x2:e-1,y2:n+a},r)),(0,es.select)(this).maybeAppend("icon-right-line","line").attr("className","icon-right-line").styles((0,ei.__assign)({x1:e+1,y1:n-a,x2:e+1,y2:n+a},r));},e.prototype.renderBorder=function(){var t=this.attributes,e=t.x,n=t.y,i=t.width,r=t.height,a=t.type,s=(0,eo.subStyleProps)(this.attributes,"border"),o="start"===a?+i/2:-i/2;(0,es.select)(this).maybeAppend("border","line").attr("className","border").styles((0,ei.__assign)({x1:o+e,y1:n-r/2,x2:o+e,y2:n+r/2},s));},e.prototype.render=function(){this.renderBackground(),this.renderIcon(),this.renderBorder();},e.defaultOptions={style:{x:0,y:0,width:10,height:50,iconSize:10,type:"start",backgroundFill:"#fff",backgroundFillOpacity:.5,iconStroke:"#9a9a9a",iconLineWidth:1,borderStroke:"#e8e8e8",borderLineWidth:1}},e;}(er.Component);function ru(t){var e=String(Math.floor(t/3600)).padStart(2,"0"),n=String(Math.floor(t%3600/60)).padStart(2,"0"),i=String(Math.floor(t%60)).padStart(2,"0");return t<3600?"".concat(n,":").concat(i):"".concat(e,":").concat(n,":").concat(i);}var rc=function(t){function e(n){var i=t.call(this,(0,eg.deepAssign)({},e.defaultOptions,n))||this;i.axis=i.appendChild(new nk({style:{type:"linear",startPos:[0,0],endPos:[0,0],data:[],showArrow:!1,animate:!1}})),i.timeline=i.appendChild(new iY({style:{onChange:function(t){i.handleSliderChange(t);}}})),i.controller=i.appendChild(new ro({})),i.states={},i.handleSliderChange=function(t){var e,n=Array.isArray(e=i.states.values)?(0,ei.__spreadArray)([],(0,ei.__read)(e),!1):e;i.setBySliderValues(t),i.dispatchOnChange(n);};var r=i.attributes,a=r.selectionType,s=r.chartType,o=r.speed,l=r.state,d=r.playMode,u=r.values;return i.states={chartType:s,playMode:d,selectionType:a,speed:o,state:l},i.setByTimebarValues(u),i;}return(0,ei.__extends)(e,t),Object.defineProperty(e.prototype,"data",{get:function(){return this.attributes.data.sort(function(t,e){return t.time<e.time?-1:t.time>e.time?1:0;});},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"space",{get:function(){var t,e=this.attributes,n=e.x,i=e.y,r=e.width,a=e.height,s=e.type,o=e.controllerHeight,l=(0,eb.default)(+a-o,0,+a),d=new ea.BBox(n,i+ +a-o,+r,o),u=0;"chart"===s?(u=35,t=new ea.BBox(n,i+l-u,+r,u)):t=new ea.BBox;var c="time"===s?10:l;return{axisBBox:t,controllerBBox:d,timelineBBox:new ea.BBox(n,i+("time"===s?l:l-c),+r,c-u)};},enumerable:!1,configurable:!0}),e.prototype.setBySliderValues=function(t){var e,n,i=this.data,r=(0,ei.__read)(Array.isArray(t)?t:[0,t],2),a=r[0],s=r[1],o=i.length,l=i[Math.floor(a*o)],d=i[Math.ceil(s*o)-(Array.isArray(t)?0:1)];this.states.values=[null!==(e=null==l?void 0:l.time)&&void 0!==e?e:i[0].time,null!==(n=null==d?void 0:d.time)&&void 0!==n?n:1/0];},e.prototype.setByTimebarValues=function(t){var e,n,i,r=this.data,a=(0,ei.__read)(Array.isArray(t)?t:[void 0,t],2),s=a[0],o=a[1],l=r.find(function(t){return t.time===s;}),d=r.find(function(t){return t.time===o;});this.states.values=[null!==(e=null==l?void 0:l.time)&&void 0!==e?e:null===(n=r[0])||void 0===n?void 0:n.time,null!==(i=null==d?void 0:d.time)&&void 0!==i?i:1/0];},e.prototype.setByIndex=function(t){var e,n,i,r,a=this.data,s=(0,ei.__read)(t,2),o=s[0],l=s[1];this.states.values=[null!==(n=null===(e=a[o])||void 0===e?void 0:e.time)&&void 0!==n?n:a[0].time,null!==(r=null===(i=this.data[l])||void 0===i?void 0:i.time)&&void 0!==r?r:1/0];},Object.defineProperty(e.prototype,"sliderValues",{get:function(){var t,e=this.states,n=e.values,i=e.selectionType,r=(0,ei.__read)(Array.isArray(n)?n:[void 0,n],2),a=r[0],s=r[1],o=this.data,l=o.length,d="value"===i;return[(t=o.findIndex(function(t){return t.time===a;}),d?0:t>-1?t/l:0),function(){if(s===1/0)return 1;var t=o.findIndex(function(t){return t.time===s;});return t>-1?t/l:d?.5:1;}()];},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"values",{get:function(){var t=this.states,e=t.values,n=t.selectionType,i=(0,ei.__read)(Array.isArray(e)?e:[this.data[0].time,e],2),r=i[0],a=i[1];return"value"===n?a:[r,a];},enumerable:!1,configurable:!0}),e.prototype.getDatumByRatio=function(t){var e=this.data,n=Math.floor(t*(e.length-1));return e[n];},Object.defineProperty(e.prototype,"chartHandleIconShape",{get:function(){var t=this.states.selectionType,e=this.space.timelineBBox.height;return"range"===t?function(t){return new rd({style:{type:t,height:e,iconSize:e/6}});}:function(){return new ed.Line({style:{x1:0,y1:-e/2,x2:0,y2:e/2,lineWidth:2,stroke:"#c8c8c8"}});};},enumerable:!1,configurable:!0}),e.prototype.getChartStyle=function(t){var e=this,n=t.x,i=t.y,r=t.width,a=t.height,s=this.states,o=s.selectionType,l=s.chartType,d=this.data,u=this.attributes,c=u.type,h=u.labelFormatter,p=(0,eo.subStyleProps)(this.attributes,"chart"),f=(p.type,(0,ei.__rest)(p,["type"])),g="range"===o;if("time"===c)return(0,ei.__assign)({handleIconShape:function(){return new rl({});},selectionFill:"#2e7ff8",selectionFillOpacity:1,showLabelOnInteraction:!0,handleLabelDy:g?-15:0,autoFitLabel:g,handleSpacing:g?-15:0,trackFill:"#edeeef",trackLength:r,trackOpacity:.5,trackRadius:a/2,trackSize:a/2,type:o,values:this.sliderValues,formatter:function(t){if(h)return h(t);var n=e.getDatumByRatio(t).time;return"number"==typeof n?ru(n):nt(n,"YYYY-MM-DD HH:mm:ss");},transform:"translate(".concat(n,", ").concat(i,")"),zIndex:1},f);var y="range"===o?5:0,m=d.map(function(t){return t.value;});return(0,ei.__assign)({handleIconOffset:y,handleIconShape:this.chartHandleIconShape,selectionFill:"#fff",selectionFillOpacity:.5,selectionType:"invert",sparklineSpacing:.1,sparklineColumnLineWidth:0,sparklineColor:"#d4e5fd",sparklineAreaOpacity:1,sparklineAreaLineWidth:0,sparklineData:m,sparklineType:l,sparklineScale:.8,trackLength:r,trackSize:a,type:o,values:this.sliderValues,transform:"translate(".concat(n,", ").concat(i,")"),zIndex:1},f);},e.prototype.renderChart=function(t){void 0===t&&(t=this.space.timelineBBox),this.timeline.update(this.getChartStyle(t));},e.prototype.updateSelection=function(){this.timeline.setValues(this.sliderValues,!0),this.handleSliderChange(this.sliderValues);},e.prototype.getAxisStyle=function(t){var e=this.data,n=this.attributes,i=n.interval,r=n.labelFormatter,a=(0,eo.subStyleProps)(this.attributes,"axis"),s=t.x,o=t.y,l=t.width,d=(0,ei.__spreadArray)((0,ei.__spreadArray)([],(0,ei.__read)(e),!1),[{time:0}],!1).map(function(t,e,n){var i=t.time;return{label:"".concat(i),value:e/(n.length-1),time:i};});return(0,ei.__assign)({startPos:[s,o],endPos:[s+l,o],data:d,labelFilter:function(t,e){return e<d.length-1;},labelFormatter:function(t){var e=t.time;return r?r(e):"number"==typeof e?ru(e):function(t,e){var n=new Date(t);switch(e){case"half-hour":case"hour":case"four-hour":if([0,6,12,18].includes(n.getHours())&&0===n.getMinutes())return nt(n,"HH:mm\nYYYY-MM-DD");return nt(n,"HH:mm");case"half-day":if(12>n.getHours())return"AM\n".concat(nt(n,"YYYY-MM-DD"));return"PM";case"day":if([1,10,20].includes(n.getDate()))return nt(n,"DD\nYYYY-MM");return nt(n,"DD");case"week":if(7>=n.getDate())return nt(n,"DD\nYYYY-MM");return nt(n,"DD");case"month":if([0,6].includes(n.getMonth()))return nt(n,"MM\u6708\nYYYY");return nt(n,"MM\u6708");case"season":if([0].includes(n.getMonth()))return nt(n,"MM\u6708\nYYYY");return nt(n,"MM\u6708");case"year":return nt(n,"YYYY");default:return nt(n,"YYYY-MM-DD HH:mm");}}(e,i);}},a);},e.prototype.renderAxis=function(t){void 0===t&&(t=this.space.axisBBox),"chart"===this.attributes.type&&this.axis.update(this.getAxisStyle(t));},e.prototype.renderController=function(t){void 0===t&&(t=this.space.controllerBBox);var e=this.attributes.type,n=this.states,i=n.state,r=n.speed,a=n.selectionType,s=n.chartType,o=(0,eo.subStyleProps)(this.attributes,"controller"),l=this,d=(0,ei.__assign)((0,ei.__assign)((0,ei.__assign)({},t),{iconSize:20,speed:r,state:i,selectionType:a,chartType:s,onChange:function(t,e){var n=e.value;switch(t){case"reset":l.internalReset();break;case"speed":l.handleSpeedChange(n);break;case"backward":l.internalBackward();break;case"playPause":"play"===n?l.internalPlay():l.internalPause();break;case"forward":l.internalForward();break;case"selectionType":l.handleSelectionTypeChange(n);break;case"chartType":l.handleChartTypeChange(n);}}}),o);"time"===e&&(d.functions=[["reset","speed"],["backward","playPause","forward"],["selectionType"]]),this.controller.update(d);},e.prototype.dispatchOnChange=function(t){var e,n=this.data,i=this.attributes.onChange,r=this.states,a=r.values,s=r.selectionType,o=(0,ei.__read)(a,2),l=o[0],d=o[1],u=d===1/0?n.at(-1).time:d;(!t||(e="range"===s?[l,u]:u,Array.isArray(t)?!Array.isArray(e)||t[0]!==e[0]||t[1]!==e[1]&&t[1]!==1/0&&e[1]!==1/0:Array.isArray(e)||t!==e))&&null!=i&&i("range"===s?[l,u]:u);},e.prototype.internalReset=function(t){var e,n,i=this.states.selectionType;this.internalPause(),this.setBySliderValues("range"===i?[0,1]:[0,0]),this.renderController(),this.updateSelection(),t||(null===(n=null===(e=this.attributes)||void 0===e?void 0:e.onReset)||void 0===n||n.call(e),this.dispatchOnChange());},e.prototype.reset=function(){this.internalReset();},e.prototype.moveSelection=function(t,e){var n,i,r,a,s,o,l=this.data,d=l.length,u=this.states,c=u.values,h=u.selectionType,p=u.playMode,f=(0,ei.__read)(c,2),g=f[0],y=f[1],m=l.findIndex(function(t){return t.time===g;}),b=l.findIndex(function(t){return t.time===y;});-1===b&&(b=d);var v="backward"===t?-1:1;"range"===h?"acc"===p?(o=[m,b+v],-1===v&&m===b&&(o=[m,d])):o=[m+v,b+v]:o=[m,b+v];var E=(n=o,r=(i=(0,ei.__read)(n.sort(function(t,e){return t-e;}),2))[0],a=i[1],s=function(t){return(0,eb.default)(t,0,d);},a>d?"value"===h?[0,0]:"acc"===p?[s(r),s(r)]:[0,s(a-r)]:r<0?"acc"===p?[0,s(a)]:[s(r+d-a),d]:[s(r),s(a)]);return this.setByIndex(E),this.updateSelection(),E;},e.prototype.internalBackward=function(t){var e,n,i=this.moveSelection("backward",t);return t||(null===(n=null===(e=this.attributes)||void 0===e?void 0:e.onBackward)||void 0===n||n.call(e),this.dispatchOnChange()),i;},e.prototype.backward=function(){this.internalBackward();},e.prototype.internalPlay=function(t){var e,n,i=this,r=this.data,a=this.attributes.loop,s=this.states.speed;this.playInterval=window.setInterval(function(){i.internalForward()[1]!==r.length||a||(i.internalPause(),i.renderController());},1e3/(void 0===s?1:s)),this.states.state="play",t||null===(n=null===(e=this.attributes)||void 0===e?void 0:e.onPlay)||void 0===n||n.call(e);},e.prototype.play=function(){this.internalPlay();},e.prototype.internalPause=function(t){var e,n;clearInterval(this.playInterval),this.states.state="pause",t||null===(n=null===(e=this.attributes)||void 0===e?void 0:e.onPause)||void 0===n||n.call(e);},e.prototype.pause=function(){this.internalPause();},e.prototype.internalForward=function(t){var e,n,i=this.moveSelection("forward",t);return t||(null===(n=null===(e=this.attributes)||void 0===e?void 0:e.onForward)||void 0===n||n.call(e),this.dispatchOnChange()),i;},e.prototype.forward=function(){this.internalForward();},e.prototype.handleSpeedChange=function(t){var e,n;this.states.speed=t,"play"===this.states.state&&(this.internalPause(!0),this.internalPlay(!0)),null===(n=null===(e=this.attributes)||void 0===e?void 0:e.onSpeedChange)||void 0===n||n.call(e,t);},e.prototype.handleSelectionTypeChange=function(t){var e,n;this.states.selectionType=t,this.renderChart(),null===(n=null===(e=this.attributes)||void 0===e?void 0:e.onSelectionTypeChange)||void 0===n||n.call(e,t);},e.prototype.handleChartTypeChange=function(t){var e,n;this.states.chartType=t,this.renderChart(),null===(n=null===(e=this.attributes)||void 0===e?void 0:e.onChartTypeChange)||void 0===n||n.call(e,t);},e.prototype.render=function(){var t=this.space,e=t.axisBBox,n=t.controllerBBox,i=t.timelineBBox;this.renderController(n),this.renderAxis(e),this.renderChart(i),"play"===this.states.state&&this.internalPlay();},e.prototype.destroy=function(){t.prototype.destroy.call(this),this.internalPause(!0);},e.defaultOptions={style:{x:0,y:0,axisLabelFill:"#6e6e6e",axisLabelTextAlign:"left",axisLabelTextBaseline:"top",axisLabelTransform:"translate(5, -12)",axisLineLineWidth:1,axisLineStroke:"#cacdd1",axisTickLength:15,axisTickLineWidth:1,axisTickStroke:"#cacdd1",chartShowLabel:!1,chartType:"line",controllerAlign:"center",controllerHeight:40,data:[],interval:"day",loop:!1,playMode:"acc",selectionType:"range",type:"time"}},e;}(er.Component),rh=n("d2e5a2ed"),rp=u._(rh),rf=this&&this.__awaiter||function(t,e,n,i){return new(n||(n=Promise))(function(r,a){function s(t){try{l(i.next(t));}catch(t){a(t);}}function o(t){try{l(i.throw(t));}catch(t){a(t);}}function l(t){var e;t.done?r(t.value):((e=t.value)instanceof n?e:new n(function(t){t(e);})).then(s,o);}l((i=i.apply(t,e||[])).next());});},rg=this&&this.__rest||function(t,e){var n={};for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&0>e.indexOf(i)&&(n[i]=t[i]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols)for(var r=0,i=Object.getOwnPropertySymbols(t);r<i.length;r++)0>e.indexOf(i[r])&&Object.prototype.propertyIsEnumerable.call(t,i[r])&&(n[i[r]]=t[i[r]]);return n;};let ry=["timestamp","time","date","datetime"];class rm extends f{get padding(){return(0,e0.parsePadding)(this.options.padding);}constructor(t,e){super(t,Object.assign({},rm.defaultOptions,e)),this.backup(),this.upsertTimebar();}play(){var t;null===(t=this.timebar)||void 0===t||t.play();}pause(){var t;null===(t=this.timebar)||void 0===t||t.pause();}forward(){var t;null===(t=this.timebar)||void 0===t||t.forward();}backward(){var t;null===(t=this.timebar)||void 0===t||t.backward();}reset(){var t;null===(t=this.timebar)||void 0===t||t.reset();}update(t){super.update(t),this.backup(),this.upsertTimebar();}backup(){this.originalData=rb(this.context.graph.getData());}upsertTimebar(){let{canvas:t}=this.context,e=this.options,{onChange:n,timebarType:i,data:r,x:a,y:s,width:o,height:l,mode:d}=e,u=rg(e,["onChange","timebarType","data","x","y","width","height","mode"]),c=t.getSize(),[h]=this.padding;this.upsertCanvas().ready.then(()=>{var t;let e=Object.assign(Object.assign({x:c[0]/2-o/2,y:h,onChange:t=>{let e=((0,iE.default)(t)?t:[t,t]).map(t=>(0,rp.default)(t)?t.getTime():t);"modify"===this.options.mode?this.filterElements(e):this.hiddenElements(e),null==n||n(e);}},u),{data:r.map(t=>(0,iO.default)(t)?{time:t,value:0}:t),width:o,height:l,type:i});this.timebar?this.timebar.update(e):(this.timebar=new rc({style:e}),null===(t=this.canvas)||void 0===t||t.appendChild(this.timebar));});}upsertCanvas(){if(this.canvas)return this.canvas;let{className:t,height:e,position:n}=this.options,i=this.context.canvas,[r]=i.getSize(),[a,,s]=this.padding,[o,l]=eX({width:r,height:e+a+s,graphCanvas:i,className:"timebar",placement:n});return this.container=o,t&&o.classList.add(t),this.canvas=l,this.canvas;}filterElements(t){return rf(this,void 0,void 0,function*(){var e;if(!this.originalData)return;let{elementTypes:n,getTime:i}=this.options,{graph:r,element:a}=this.context,s=rb(this.originalData);n.forEach(e=>{let n=`${e}s`;s[n]=(this.originalData[n]||[]).filter(e=>!!rv(i(e),t));});let o=[...s.nodes,...s.combos].map(t=>(0,J.idOf)(t));s.edges=s.edges.filter(t=>{let e=t.source,n=t.target;return o.includes(e)&&o.includes(n);}),r.setData(s),yield null===(e=a.draw({animation:!1,silence:!0}))||void 0===e?void 0:e.finished;});}hiddenElements(t){let{graph:e}=this.context,{elementTypes:n,getTime:i}=this.options,r=[],a=[];n.forEach(e=>{var n;let s=`${e}s`;((null===(n=this.originalData)||void 0===n?void 0:n[s])||[]).forEach(e=>{let n=(0,J.idOf)(e);rv(i(e),t)?a.push(n):r.push(n);});}),e.hideElement(r,!1),e.showElement(a,!1);}destroy(){var t,e,n;let{graph:i}=this.context;this.originalData&&i.setData(Object.assign({},this.originalData)),null===(t=this.timebar)||void 0===t||t.destroy(),null===(e=this.canvas)||void 0===e||e.destroy(),null===(n=this.container)||void 0===n||n.remove(),this.originalData=void 0,this.container=void 0,this.timebar=void 0,this.canvas=void 0,super.destroy();}}rm.defaultOptions={position:"bottom",enable:!0,timebarType:"time",className:"g6-timebar",width:450,height:60,zIndex:3,elementTypes:["node"],padding:10,mode:"modify",getTime:t=>rE(t,ry,void 0),loop:!1};let rb=t=>{let{nodes:e=[],edges:n=[],combos:i=[]}=t;return{nodes:[...e],edges:[...n],combos:[...i]};},rv=(t,e)=>{if((0,iO.default)(e))return t===e;let[n,i]=e;return t>=n&&t<=i;},rE=(t,e,n)=>{var i;for(let n=0;n<e.length;n++){let r=e[n],a=null===(i=t.data)||void 0===i?void 0:i[r];if(a)return a;}return n;},rx=`
  .g6-toolbar {
    position: absolute;
    z-index: 100;
    display: flex;
    flex-direction: row;
    align-items: center;
    justify-content: center;
    border-radius: 4px;
    box-shadow: 0px 0px 8px rgba(0, 0, 0, 0.1);
    opacity: 0.65;
  }
  .g6-toolbar .g6-toolbar-item {
    display: inline-block;
    width: 16px;
    height: 16px;
    padding: 4px;
    cursor: pointer;
    box-sizing: content-box;
  }

  .g6-toolbar .g6-toolbar-item:hover {
    background-color: #f0f0f0;
  }

  .g6-toolbar .g6-toolbar-item svg {
    display: inline-block;
    width: 100%;
    height: 100%;
    pointer-events: none;
  }
`,rO=`
  <svg>
    <symbol id="zoom-in" viewBox="64 64 896 896">
      <path d="M637 443H519V309c0-4.4-3.6-8-8-8h-60c-4.4 0-8 3.6-8 8v134H325c-4.4 0-8 3.6-8 8v60c0 4.4 3.6 8 8 8h118v134c0 4.4 3.6 8 8 8h60c4.4 0 8-3.6 8-8V519h118c4.4 0 8-3.6 8-8v-60c0-4.4-3.6-8-8-8zm284 424L775 721c122.1-148.9 113.6-369.5-26-509-148-148.1-388.4-148.1-537 0-148.1 148.6-148.1 389 0 537 139.5 139.6 360.1 148.1 509 26l146 146c3.2 2.8 8.3 2.8 11 0l43-43c2.8-2.7 2.8-7.8 0-11zM696 696c-118.8 118.7-311.2 118.7-430 0-118.7-118.8-118.7-311.2 0-430 118.8-118.7 311.2-118.7 430 0 118.7 118.8 118.7 311.2 0 430z"></path>
    </symbol>
    <symbol id="zoom-out" viewBox="64 64 896 896">
      <path d="M637 443H325c-4.4 0-8 3.6-8 8v60c0 4.4 3.6 8 8 8h312c4.4 0 8-3.6 8-8v-60c0-4.4-3.6-8-8-8zm284 424L775 721c122.1-148.9 113.6-369.5-26-509-148-148.1-388.4-148.1-537 0-148.1 148.6-148.1 389 0 537 139.5 139.6 360.1 148.1 509 26l146 146c3.2 2.8 8.3 2.8 11 0l43-43c2.8-2.7 2.8-7.8 0-11zM696 696c-118.8 118.7-311.2 118.7-430 0-118.7-118.8-118.7-311.2 0-430 118.8-118.7 311.2-118.7 430 0 118.7 118.8 118.7 311.2 0 430z"></path>
    </symbol>
    <symbol id="edit" viewBox="64 64 896 896">
      <path d="M257.7 752c2 0 4-.2 6-.5L431.9 722c2-.4 3.9-1.3 5.3-2.8l423.9-423.9a9.96 9.96 0 000-14.1L694.9 114.9c-1.9-1.9-4.4-2.9-7.1-2.9s-5.2 1-7.1 2.9L256.8 538.8c-1.5 1.5-2.4 3.3-2.8 5.3l-29.5 168.2a33.5 33.5 0 009.4 29.8c6.6 6.4 14.9 9.9 23.8 9.9zm67.4-174.4L687.8 215l73.3 73.3-362.7 362.6-88.9 15.7 15.6-89zM880 836H144c-17.7 0-32 14.3-32 32v36c0 4.4 3.6 8 8 8h784c4.4 0 8-3.6 8-8v-36c0-17.7-14.3-32-32-32z"></path>
    </symbol>
    <symbol id="delete" viewBox="64 64 896 896">
      <path d="M360 184h-8c4.4 0 8-3.6 8-8v8h304v-8c0 4.4 3.6 8 8 8h-8v72h72v-80c0-35.3-28.7-64-64-64H352c-35.3 0-64 28.7-64 64v80h72v-72zm504 72H160c-17.7 0-32 14.3-32 32v32c0 4.4 3.6 8 8 8h60.4l24.7 523c1.6 34.1 29.8 61 63.9 61h454c34.2 0 62.3-26.8 63.9-61l24.7-523H888c4.4 0 8-3.6 8-8v-32c0-17.7-14.3-32-32-32zM731.3 840H292.7l-24.2-512h487l-24.2 512z"></path>
    </symbol>
    <symbol id="redo" viewBox="64 64 896 896">
      <path d="M758.2 839.1C851.8 765.9 912 651.9 912 523.9 912 303 733.5 124.3 512.6 124 291.4 123.7 112 302.8 112 523.9c0 125.2 57.5 236.9 147.6 310.2 3.5 2.8 8.6 2.2 11.4-1.3l39.4-50.5c2.7-3.4 2.1-8.3-1.2-11.1-8.1-6.6-15.9-13.7-23.4-21.2a318.64 318.64 0 01-68.6-101.7C200.4 609 192 567.1 192 523.9s8.4-85.1 25.1-124.5c16.1-38.1 39.2-72.3 68.6-101.7 29.4-29.4 63.6-52.5 101.7-68.6C426.9 212.4 468.8 204 512 204s85.1 8.4 124.5 25.1c38.1 16.1 72.3 39.2 101.7 68.6 29.4 29.4 52.5 63.6 68.6 101.7 16.7 39.4 25.1 81.3 25.1 124.5s-8.4 85.1-25.1 124.5a318.64 318.64 0 01-68.6 101.7c-9.3 9.3-19.1 18-29.3 26L668.2 724a8 8 0 00-14.1 3l-39.6 162.2c-1.2 5 2.6 9.9 7.7 9.9l167 .8c6.7 0 10.5-7.7 6.3-12.9l-37.3-47.9z"></path>
    </symbol>
    <symbol id="undo" viewBox="64 64 896 896">
      <path d="M511.4 124C290.5 124.3 112 303 112 523.9c0 128 60.2 242 153.8 315.2l-37.5 48c-4.1 5.3-.3 13 6.3 12.9l167-.8c5.2 0 9-4.9 7.7-9.9L369.8 727a8 8 0 00-14.1-3L315 776.1c-10.2-8-20-16.7-29.3-26a318.64 318.64 0 01-68.6-101.7C200.4 609 192 567.1 192 523.9s8.4-85.1 25.1-124.5c16.1-38.1 39.2-72.3 68.6-101.7 29.4-29.4 63.6-52.5 101.7-68.6C426.9 212.4 468.8 204 512 204s85.1 8.4 124.5 25.1c38.1 16.1 72.3 39.2 101.7 68.6 29.4 29.4 52.5 63.6 68.6 101.7 16.7 39.4 25.1 81.3 25.1 124.5s-8.4 85.1-25.1 124.5a318.64 318.64 0 01-68.6 101.7c-7.5 7.5-15.3 14.5-23.4 21.2a7.93 7.93 0 00-1.2 11.1l39.4 50.5c2.8 3.5 7.9 4.1 11.4 1.3C854.5 760.8 912 649.1 912 523.9c0-221.1-179.4-400.2-400.6-399.9z"></path>
    </symbol>
    <symbol id="export" viewBox="64 64 896 896">
      <path d="M880 912H144c-17.7 0-32-14.3-32-32V144c0-17.7 14.3-32 32-32h360c4.4 0 8 3.6 8 8v56c0 4.4-3.6 8-8 8H184v656h656V520c0-4.4 3.6-8 8-8h56c4.4 0 8 3.6 8 8v360c0 17.7-14.3 32-32 32zM770.87 199.13l-52.2-52.2a8.01 8.01 0 014.7-13.6l179.4-21c5.1-.6 9.5 3.7 8.9 8.9l-21 179.4c-.8 6.6-8.9 9.4-13.6 4.7l-52.4-52.4-256.2 256.2a8.03 8.03 0 01-11.3 0l-42.4-42.4a8.03 8.03 0 010-11.3l256.1-256.3z"></path>
    </symbol>
    <symbol id="auto-fit" viewBox="64 64 896 896">
      <path d="M952 474H829.8C812.5 327.6 696.4 211.5 550 194.2V72c0-4.4-3.6-8-8-8h-60c-4.4 0-8 3.6-8 8v122.2C327.6 211.5 211.5 327.6 194.2 474H72c-4.4 0-8 3.6-8 8v60c0 4.4 3.6 8 8 8h122.2C211.5 696.4 327.6 812.5 474 829.8V952c0 4.4 3.6 8 8 8h60c4.4 0 8-3.6 8-8V829.8C696.4 812.5 812.5 696.4 829.8 550H952c4.4 0 8-3.6 8-8v-60c0-4.4-3.6-8-8-8zM512 756c-134.8 0-244-109.2-244-244s109.2-244 244-244 244 109.2 244 244-109.2 244-244 244z"></path>
      <path d="M512 392c-32.1 0-62.1 12.4-84.8 35.2-22.7 22.7-35.2 52.7-35.2 84.8s12.5 62.1 35.2 84.8C449.9 619.4 480 632 512 632s62.1-12.5 84.8-35.2C619.4 574.1 632 544 632 512s-12.5-62.1-35.2-84.8A118.57 118.57 0 00512 392z"></path>
    </symbol>
    <symbol id="reset" viewBox="64 64 896 896">
      <path d="M909.1 209.3l-56.4 44.1C775.8 155.1 656.2 92 521.9 92 290 92 102.3 279.5 102 511.5 101.7 743.7 289.8 932 521.9 932c181.3 0 335.8-115 394.6-276.1 1.5-4.2-.7-8.9-4.9-10.3l-56.7-19.5a8 8 0 00-10.1 4.8c-1.8 5-3.8 10-5.9 14.9-17.3 41-42.1 77.8-73.7 109.4A344.77 344.77 0 01655.9 829c-42.3 17.9-87.4 27-133.8 27-46.5 0-91.5-9.1-133.8-27A341.5 341.5 0 01279 755.2a342.16 342.16 0 01-73.7-109.4c-17.9-42.4-27-87.4-27-133.9s9.1-91.5 27-133.9c17.3-41 42.1-77.8 73.7-109.4 31.6-31.6 68.4-56.4 109.3-73.8 42.3-17.9 87.4-27 133.8-27 46.5 0 91.5 9.1 133.8 27a341.5 341.5 0 01109.3 73.8c9.9 9.9 19.2 20.4 27.8 31.4l-60.2 47a8 8 0 003 14.1l175.6 43c5 1.2 9.9-2.6 9.9-7.7l.8-180.9c-.1-6.6-7.8-10.3-13-6.2z"></path>
    </symbol>
    <symbol id="exit-fullscreen" viewBox="0 0 1024 1024">
      <path d="M418.13333333 361.43786666c0 0.2048-0.13653333 0.4096-0.13653334 0.68266667C417.99679999 362.32533333 418.13333333 362.53013333 418.13333333 362.73493333 418.13333333 371.54133333 414.44693333 379.392 408.78079999 385.39946666 408.43946666 385.7408 408.30293333 386.21866666 408.02986666 386.49173333c-1.09226667 1.09226667-2.59413333 1.77493333-3.82293333 2.73066667C398.40426666 393.65973333 391.64586666 396.8 383.93173333 396.8 383.72693333 396.8 383.59039999 396.73173333 383.38559999 396.73173333S382.97599999 396.8 382.77119999 396.8L112.29866666 396.8C92.50133333 396.8 76.79999999 381.50826666 76.79999999 362.66666666 76.66346666 343.89333333 92.63786666 328.53333333 112.16213333 328.53333333l189.44 0L87.44959999 114.51733333C73.59146666 100.59093333 73.25013333 78.5408 86.63039999 65.29706666c13.17546667-13.44853333 35.36213333-12.97066667 49.152 0.88746667l214.08426667 214.08426667L349.86666666 90.89706666C349.79839999 71.23626666 365.22666666 55.46666666 383.99999999 55.46666666 402.77333333 55.33013333 418.13333333 71.30453333 418.13333333 90.8288L418.13333333 361.43786666zM928.90453333 328.53333333l-189.44 0 214.15253333-214.08426667c13.85813333-13.9264 14.19946667-35.90826667 0.88746667-49.22026666-13.17546667-13.44853333-35.36213333-12.97066667-49.152 0.88746666l-214.08426667 214.08426667L691.26826666 90.89706666C691.26826666 71.23626666 675.83999999 55.46666666 657.06666666 55.46666666 638.29333333 55.33013333 622.93333333 71.30453333 622.93333333 90.8288l0 270.60906666c0 0.2048 0.13653333 0.4096 0.13653333 0.68266667C623.06986666 362.32533333 622.93333333 362.53013333 622.93333333 362.73493333 622.93333333 371.54133333 626.61973333 379.392 632.28586666 385.39946666c0.34133333 0.34133333 0.47786667 0.8192 0.8192 1.09226667 1.09226667 1.09226667 2.59413333 1.77493333 3.8912 2.73066667C642.66239999 393.65973333 649.42079999 396.8 657.13493333 396.8c0.2048 0 0.34133333-0.06826667 0.54613333-0.06826667S658.09066666 396.8 658.29546666 396.8l270.5408 0C948.56533333 396.8 964.26666666 381.50826666 964.26666666 362.66666666 964.40319999 343.89333333 948.42879999 328.53333333 928.90453333 328.53333333zM418.13333333 635.73333333c0-8.8064-3.6864-16.5888-9.35253334-22.66453333C408.43946666 612.72746666 408.30293333 612.2496 408.02986666 611.90826666 406.86933333 610.88426666 405.43573333 610.2016 404.20693333 609.24586666 398.47253333 604.80853333 391.64586666 601.6 383.93173333 601.6 383.72693333 601.6 383.59039999 601.73653333 383.38559999 601.73653333S382.97599999 601.6 382.77119999 601.6L112.29866666 601.6C92.50133333 601.6 76.79999999 616.96 76.79999999 635.73333333 76.66346666 654.50666666 92.63786666 669.86666666 112.16213333 669.86666666l189.44 0-214.15253334 214.15253334c-13.85813333 13.85813333-14.19946667 35.84-0.88746666 49.22026666 13.17546667 13.44853333 35.36213333 12.9024 49.152-0.95573333l214.08426666-214.08426667 0 189.37173334c0 19.59253333 15.42826667 35.49866667 34.2016 35.36213333C402.77333333 943.2064 418.13333333 927.232 418.13333333 907.5712L418.13333333 637.09866666c0-0.27306667-0.13653333-0.47786667-0.13653334-0.68266666C417.99679999 636.14293333 418.13333333 635.93813333 418.13333333 635.73333333zM739.46453333 669.86666666l189.44 0c19.456 0 35.49866667-15.36 35.36213333-34.13333333C964.26666666 616.96 948.56533333 601.6 928.76799999 601.6L658.29546666 601.6C658.09066666 601.6 657.88586666 601.73653333 657.68106666 601.73653333S657.33973333 601.6 657.13493333 601.6C649.42079999 601.6 642.59413333 604.80853333 636.85973333 609.24586666 635.63093333 610.2016 634.19733333 610.88426666 633.03679999 611.90826666 632.76373333 612.2496 632.62719999 612.72746666 632.28586666 613.0688 626.61973333 619.14453333 622.93333333 626.92693333 622.93333333 635.73333333c0 0.2048 0.13653333 0.4096 0.13653333 0.68266667C623.06986666 636.6208 622.93333333 636.8256 622.93333333 637.09866666l0 270.5408C622.93333333 927.232 638.29333333 943.2064 657.06666666 942.93333333c18.77333333 0.13653333 34.2016-15.70133333 34.2016-35.36213333l0-189.37173334 214.08426667 214.08426667c13.78986667 13.85813333 35.90826667 14.40426667 49.152 0.95573333 13.312-13.312 12.97066667-35.36213333-0.88746667-49.22026666L739.46453333 669.86666666z"  ></path></symbol>
    <symbol id="request-fullscreen" viewBox="0 0 1024 1024">
      <path d="M69.818182 87.598545v273.128728a34.909091 34.909091 0 0 0 69.818182 0V163.653818l221.928727 222.021818a33.512727 33.512727 0 0 0 47.383273-47.383272L186.926545 116.363636h197.073455a34.909091 34.909091 0 0 0 0-69.818181H110.871273C85.364364 46.545455 69.818182 59.671273 69.818182 87.598545zM938.542545 46.545455H665.413818a34.909091 34.909091 0 0 0 0 69.818181h197.073455L640.465455 338.292364a33.512727 33.512727 0 0 0 47.383272 47.383272l221.928728-222.021818v197.073455a34.909091 34.909091 0 0 0 69.818181 0V87.598545c0-27.927273-15.453091-41.053091-40.96-41.05309z m-827.671272 907.636363h273.128727a34.909091 34.909091 0 0 0 0-69.818182H186.926545l222.021819-221.928727a33.512727 33.512727 0 0 0-47.383273-47.383273L139.636364 837.073455V640a34.909091 34.909091 0 0 0-69.818182 0v273.128727c0 27.927273 15.546182 41.053091 41.053091 41.053091z m868.724363-41.053091V640a34.909091 34.909091 0 0 0-69.818181 0v197.073455L687.941818 615.051636a33.512727 33.512727 0 0 0-47.383273 47.383273L862.487273 884.363636H665.413818a34.909091 34.909091 0 0 0 0 69.818182h273.128727c25.6 0 41.053091-13.125818 41.053091-41.053091z"  ></path></symbol>
  </svg>
`;var rS=this&&this.__awaiter||function(t,e,n,i){return new(n||(n=Promise))(function(r,a){function s(t){try{l(i.next(t));}catch(t){a(t);}}function o(t){try{l(i.throw(t));}catch(t){a(t);}}function l(t){var e;t.done?r(t.value):((e=t.value)instanceof n?e:new n(function(t){t(e);})).then(s,o);}l((i=i.apply(t,e||[])).next());});};class r_ extends f{constructor(t,e){super(t,Object.assign({},r_.defaultOptions,e)),this.$element=(0,g.createPluginContainer)("toolbar",!1),this.onToolbarItemClick=t=>{let{onClick:e}=this.options;if(t.target instanceof Element&&t.target.className.includes("g6-toolbar-item")){let n=t.target.getAttribute("value");null==e||e(n,t.target);}};let n=this.context.canvas.getContainer();this.$element.style.display="flex",n.appendChild(this.$element),(0,g.insertDOM)("g6-toolbar-css","style",{},rx,document.head),(0,g.insertDOM)("g6-toolbar-svgicon","div",{display:"none"},rO),this.$element.addEventListener("click",this.onToolbarItemClick),this.update(e);}update(t){let e=Object.create(null,{update:{get:()=>super.update}});return rS(this,void 0,void 0,function*(){e.update.call(this,t);let{className:n,position:i,style:r}=this.options;this.$element.className=`g6-toolbar ${n||""}`,Object.assign(this.$element.style,r,function(t){let e={top:"unset",right:"unset",bottom:"unset",left:"unset"};return t.split("-").forEach(t=>{e[t]="8px";}),e.flexDirection=t.startsWith("top")||t.startsWith("bottom")?"row":"column",e;}(i)),this.$element.innerHTML=yield this.getDOMContent();});}destroy(){this.$element.removeEventListener("click",this.onToolbarItemClick),this.$element.remove(),super.destroy();}getDOMContent(){return rS(this,void 0,void 0,function*(){return(yield this.options.getItems()).map(t=>{var e;return`
          <div class="g6-toolbar-item" value="${t.value}" title="${null!==(e=t.title)&&void 0!==e?e:""}">
            <svg aria-hidden="true" focusable="false">
              <use xlink:href="#${t.id}"></use>
            </svg>
          </div>`;}).join("");});}}r_.defaultOptions={position:"top-left"};var rP=n("a31456e0"),rC=u._(rP),rw=n("bda63c26"),rM=function(t,e){if(null==e){t.innerHTML="";return;}t.replaceChildren?Array.isArray(e)?t.replaceChildren.apply(t,(0,ei.__spreadArray)([],(0,ei.__read)(e),!1)):t.replaceChildren(e):(t.innerHTML="",Array.isArray(e)?e.forEach(function(e){return t.appendChild(e);}):t.appendChild(e));};function rA(t){return void 0===t&&(t=""),{CONTAINER:"".concat(t,"tooltip"),TITLE:"".concat(t,"tooltip-title"),LIST:"".concat(t,"tooltip-list"),LIST_ITEM:"".concat(t,"tooltip-list-item"),NAME:"".concat(t,"tooltip-list-item-name"),MARKER:"".concat(t,"tooltip-list-item-marker"),NAME_LABEL:"".concat(t,"tooltip-list-item-name-label"),VALUE:"".concat(t,"tooltip-list-item-value"),CROSSHAIR_X:"".concat(t,"tooltip-crosshair-x"),CROSSHAIR_Y:"".concat(t,"tooltip-crosshair-y")};}var rT={overflow:"hidden","white-space":"nowrap","text-overflow":"ellipsis"},rB=function(t){function e(e){var n,i,r,a,s,o=this,l=null===(s=null===(a=e.style)||void 0===a?void 0:a.template)||void 0===s?void 0:s.prefixCls,d=rA(l);return(o=t.call(this,e,{data:[],x:0,y:0,visibility:"visible",title:"",position:"bottom-right",offset:[5,5],enterable:!1,container:{x:0,y:0},bounding:null,template:{prefixCls:"",container:'<div class="'.concat(d.CONTAINER,'"></div>'),title:'<div class="'.concat(d.TITLE,'"></div>'),item:'<li class="'.concat(d.LIST_ITEM,'" data-index={index}>\n        <span class="').concat(d.NAME,'">\n          <span class="').concat(d.MARKER,'" style="background:{color}"></span>\n          <span class="').concat(d.NAME_LABEL,'" title="{name}">{name}</span>\n        </span>\n        <span class="').concat(d.VALUE,'" title="{value}">{value}</span>\n      </li>')},style:(void 0===(n=l)&&(n=""),r=rA(n),(i={})[".".concat(r.CONTAINER)]={position:"absolute",visibility:"visible","z-index":8,transition:"visibility 0.2s cubic-bezier(0.23, 1, 0.32, 1), left 0.4s cubic-bezier(0.23, 1, 0.32, 1), top 0.4s cubic-bezier(0.23, 1, 0.32, 1)","background-color":"rgba(255, 255, 255, 0.96)","box-shadow":"0 6px 12px 0 rgba(0, 0, 0, 0.12)","border-radius":"4px",color:"rgba(0, 0, 0, 0.65)","font-size":"12px","line-height":"20px",padding:"12px","min-width":"120px","max-width":"360px","font-family":"Roboto-Regular"},i[".".concat(r.TITLE)]={color:"rgba(0, 0, 0, 0.45)"},i[".".concat(r.LIST)]={margin:"0px","list-style-type":"none",padding:"0px"},i[".".concat(r.LIST_ITEM)]={"list-style-type":"none",display:"flex","line-height":"2em","align-items":"center","justify-content":"space-between","white-space":"nowrap"},i[".".concat(r.MARKER)]={width:"8px",height:"8px","border-radius":"50%",display:"inline-block","margin-right":"4px"},i[".".concat(r.NAME)]={display:"flex","align-items":"center","max-width":"216px"},i[".".concat(r.NAME_LABEL)]=(0,ei.__assign)({flex:1},rT),i[".".concat(r.VALUE)]=(0,ei.__assign)({display:"inline-block",float:"right",flex:1,"text-align":"right","min-width":"28px","margin-left":"30px",color:"rgba(0, 0, 0, 0.85)"},rT),i[".".concat(r.CROSSHAIR_X)]={position:"absolute",width:"1px","background-color":"rgba(0, 0, 0, 0.25)"},i[".".concat(r.CROSSHAIR_Y)]={position:"absolute",height:"1px","background-color":"rgba(0, 0, 0, 0.25)"},i)})||this).timestamp=-1,o.prevCustomContentKey=o.attributes.contentKey,o.initShape(),o.render(o.attributes,o),o;}return(0,ei.__extends)(e,t),Object.defineProperty(e.prototype,"HTMLTooltipElement",{get:function(){return this.element;},enumerable:!1,configurable:!0}),e.prototype.getContainer=function(){return this.element;},Object.defineProperty(e.prototype,"elementSize",{get:function(){return{width:this.element.offsetWidth,height:this.element.offsetHeight};},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"HTMLTooltipItemsElements",{get:function(){var t=this.attributes,e=t.data,n=t.template;return e.map(function(t,e){var i=t.name,r=t.color,a=t.index,s=(0,ei.__rest)(t,["name","color","index"]),o=(0,ei.__assign)({name:void 0===i?"":i,color:void 0===r?"black":r,index:null!=a?a:e},s);return(0,rw.createDOM)((0,rC.default)(n.item,o));});},enumerable:!1,configurable:!0}),e.prototype.render=function(t,e){this.renderHTMLTooltipElement(),this.updatePosition();},e.prototype.destroy=function(){var e;null===(e=this.element)||void 0===e||e.remove(),t.prototype.destroy.call(this);},e.prototype.show=function(t,e){var n=this;if(void 0!==t&&void 0!==e){var i="hidden"===this.element.style.visibility,r=function(){n.attributes.x=null!=t?t:n.attributes.x,n.attributes.y=null!=e?e:n.attributes.y,n.updatePosition();};i?this.closeTransition(r):r();}this.element.style.visibility="visible";},e.prototype.hide=function(t,e){void 0===t&&(t=0),void 0===e&&(e=0),this.attributes.enterable&&this.isCursorEntered(t,e)||(this.element.style.visibility="hidden");},e.prototype.initShape=function(){var t=this.attributes.template;this.element=(0,rw.createDOM)(t.container),this.id&&this.element.setAttribute("id",this.id);},e.prototype.renderCustomContent=function(){if(void 0===this.prevCustomContentKey||this.prevCustomContentKey!==this.attributes.contentKey){this.prevCustomContentKey=this.attributes.contentKey;var t=this.attributes.content;t&&("string"==typeof t?this.element.innerHTML=t:rM(this.element,t));}},e.prototype.renderHTMLTooltipElement=function(){var t,e,n=this.attributes,i=n.template,r=n.title,a=n.enterable,s=n.style,o=n.content,l=rA(i.prefixCls),d=this.element;if(this.element.style.pointerEvents=a?"auto":"none",o)this.renderCustomContent();else{r?(d.innerHTML=i.title,d.getElementsByClassName(l.TITLE)[0].innerHTML=r):null===(e=null===(t=d.getElementsByClassName(l.TITLE))||void 0===t?void 0:t[0])||void 0===e||e.remove();var u=this.HTMLTooltipItemsElements,c=document.createElement("ul");c.className=l.LIST,rM(c,u);var h=this.element.querySelector(".".concat(l.LIST));h?h.replaceWith(c):d.appendChild(c);}(0,eo.applyStyleSheet)(d,s);},e.prototype.getRelativeOffsetFromCursor=function(t){var e=this.attributes,n=e.position,i=e.offset,r=(t||n).split("-"),a={left:[-1,0],right:[1,0],top:[0,-1],bottom:[0,1]},s=this.elementSize,o=s.width,l=s.height,d=[-o/2,-l/2];return r.forEach(function(t){var e=(0,ei.__read)(d,2),n=e[0],r=e[1],s=(0,ei.__read)(a[t],2),u=s[0],c=s[1];d=[n+(o/2+i[0])*u,r+(l/2+i[1])*c];}),d;},e.prototype.setOffsetPosition=function(t){var e=(0,ei.__read)(t,2),n=e[0],i=e[1],r=this.attributes,a=r.x,s=r.y,o=r.container,l=o.x,d=o.y;this.element.style.left="".concat(+(void 0===a?0:a)+l+n,"px"),this.element.style.top="".concat(+(void 0===s?0:s)+d+i,"px");},e.prototype.updatePosition=function(){var t=this.attributes.showDelay,e=Date.now();this.timestamp>0&&e-this.timestamp<(void 0===t?60:t)||(this.timestamp=e,this.setOffsetPosition(this.autoPosition(this.getRelativeOffsetFromCursor())));},e.prototype.autoPosition=function(t){var e=(0,ei.__read)(t,2),n=e[0],i=e[1],r=this.attributes,a=r.x,s=r.y,o=r.bounding,l=r.position;if(!o)return[n,i];var d=this.element,u=d.offsetWidth,c=d.offsetHeight,h=(0,ei.__read)([+a+n,+s+i],2),p=h[0],f=h[1],g={left:"right",right:"left",top:"bottom",bottom:"top"},y=o.x,m=o.y,b={left:p<y,right:p+u>y+o.width,top:f<m,bottom:f+c>m+o.height},v=[];l.split("-").forEach(function(t){b[t]?v.push(g[t]):v.push(t);});var E=v.join("-");return this.getRelativeOffsetFromCursor(E);},e.prototype.isCursorEntered=function(t,e){if(this.element){var n=this.element.getBoundingClientRect(),i=n.x,r=n.y,a=n.width,s=n.height;return new ea.BBox(i,r,a,s).isPointIn(t,e);}return!1;},e.prototype.closeTransition=function(t){var e=this,n=this.element.style.transition;this.element.style.transition="none",t(),setTimeout(function(){e.element.style.transition=n;},10);},e.tag="tooltip",e;}(er.Component),rD=this&&this.__awaiter||function(t,e,n,i){return new(n||(n=Promise))(function(r,a){function s(t){try{l(i.next(t));}catch(t){a(t);}}function o(t){try{l(i.throw(t));}catch(t){a(t);}}function l(t){var e;t.done?r(t.value):((e=t.value)instanceof n?e:new n(function(t){t(e);})).then(s,o);}l((i=i.apply(t,e||[])).next());});};class rL extends f{constructor(t,e){super(t,Object.assign({},rL.defaultOptions,e)),this.currentTarget=null,this.tooltipElement=null,this.container=null,this.isEnable=(t,e)=>{let{enable:n}=this.options;return"function"==typeof n?n(t,e):n;},this.onClick=t=>{let{target:{id:e}}=t;this.currentTarget===e?this.hide(t):this.show(t);},this.onPointerMove=t=>{let{target:e}=t;this.currentTarget&&e.id!==this.currentTarget&&this.show(t);},this.onPointerLeave=t=>{this.hide(t);},this.onCanvasMove=t=>{this.hide(t);},this.onPointerEnter=t=>{this.show(t);},this.showById=t=>rD(this,void 0,void 0,function*(){yield this.show({target:{id:t}});}),this.getElementData=(t,e)=>{let{model:n}=this.context;switch(e){case"node":return n.getNodeData([t]);case"edge":return n.getEdgeData([t]);case"combo":return n.getComboData([t]);default:return[];}},this.show=t=>rD(this,void 0,void 0,function*(){var e,n;let i,r;let{client:a,target:{id:s}}=t;if((0,e6.isToBeDestroyed)(t.target))return;let o=this.context.graph.getElementType(s),{getContent:l,title:d}=this.options,u=this.getElementData(s,o);if(!this.tooltipElement||!this.isEnable(t,u))return;let c={};if(l){if(c.content=yield l(t,u),!c.content)return;}else{let t=this.context.graph.getElementRenderStyle(s),e="node"===o?t.fill:t.stroke;c={title:d||o,data:u.map(t=>({name:"ID",value:t.id||`${t.source} -> ${t.target}`,color:e}))};}if(this.currentTarget=s,a)i=a.x,r=a.y;else{let t=(0,eY.default)(u,"0.style",{x:0,y:0});i=t.x,r=t.y;}null===(n=(e=this.options).onOpenChange)||void 0===n||n.call(e,!0),this.tooltipElement.update(Object.assign(Object.assign(Object.assign({},this.tooltipStyleProps),{x:i,y:r,style:{".tooltip":{visibility:"visible"}}}),c));}),this.hide=t=>{var e,n,i,r,a;if(!t){null===(n=(e=this.options).onOpenChange)||void 0===n||n.call(e,!1),null===(i=this.tooltipElement)||void 0===i||i.hide(),this.currentTarget=null;return;}if(!this.tooltipElement||!this.currentTarget)return;let{client:{x:s,y:o}}=t;null===(a=(r=this.options).onOpenChange)||void 0===a||a.call(r,!1),this.tooltipElement.hide(s,o),this.currentTarget=null;},this.initTooltip=()=>{var t;let e=new rB({className:"tooltip",style:this.tooltipStyleProps});return null===(t=this.container)||void 0===t||t.appendChild(e.HTMLTooltipElement),e;},this.render(),this.bindEvents();}getEvents(){return"click"===this.options.trigger?{"node:click":this.onClick,"edge:click":this.onClick,"combo:click":this.onClick,"canvas:click":this.onPointerLeave,contextmenu:this.onPointerLeave,drag:this.onPointerLeave}:{"node:pointerenter":this.onPointerEnter,"node:pointermove":this.onPointerMove,"canvas:pointermove":this.onCanvasMove,"edge:pointerenter":this.onPointerEnter,"edge:pointermove":this.onPointerMove,"combo:pointerenter":this.onPointerEnter,"combo:pointermove":this.onPointerMove,contextmenu:this.onPointerLeave,"node:drag":this.onPointerLeave};}update(t){var e;this.unbindEvents(),super.update(t),this.tooltipElement&&(null===(e=this.container)||void 0===e||e.removeChild(this.tooltipElement.HTMLTooltipElement)),this.tooltipElement=this.initTooltip(),this.bindEvents();}render(){let{canvas:t}=this.context,e=t.getContainer();e&&(this.container=e,this.tooltipElement=this.initTooltip());}unbindEvents(){let{graph:t}=this.context,e=this.getEvents();Object.keys(e).forEach(n=>{t.off(n,e[n]);});}bindEvents(){let{graph:t}=this.context,e=this.getEvents();Object.keys(e).forEach(n=>{t.on(n,e[n]);});}get tooltipStyleProps(){let{canvas:t}=this.context,{center:e}=t.getBounds(),{top:n,left:i}=t.getContainer().getBoundingClientRect(),{style:r,position:a,enterable:s,container:o={x:-i,y:-n},title:l,offset:d}=this.options,[u,c]=e,[h,p]=t.getSize();return{x:u,y:c,container:o,title:l,bounding:{x:0,y:0,width:h,height:p},position:a,enterable:s,offset:d,style:r};}destroy(){var t;this.unbindEvents(),this.tooltipElement&&(null===(t=this.container)||void 0===t||t.removeChild(this.tooltipElement.HTMLTooltipElement)),super.destroy();}}rL.defaultOptions={trigger:"hover",position:"top-right",enterable:!1,enable:!0,offset:[10,10],style:{".tooltip":{visibility:"hidden"}}};var rN=this&&this.__awaiter||function(t,e,n,i){return new(n||(n=Promise))(function(r,a){function s(t){try{l(i.next(t));}catch(t){a(t);}}function o(t){try{l(i.throw(t));}catch(t){a(t);}}function l(t){var e;t.done?r(t.value):((e=t.value)instanceof n?e:new n(function(t){t(e);})).then(s,o);}l((i=i.apply(t,e||[])).next());});};function rR(t,e){return i||(i=document.createElement("canvas")),i.width=t,i.height=e,i.getContext("2d").clearRect(0,0,t,e),i;}var rI=this&&this.__awaiter||function(t,e,n,i){return new(n||(n=Promise))(function(r,a){function s(t){try{l(i.next(t));}catch(t){a(t);}}function o(t){try{l(i.throw(t));}catch(t){a(t);}}function l(t){var e;t.done?r(t.value):((e=t.value)instanceof n?e:new n(function(t){t(e);})).then(s,o);}l((i=i.apply(t,e||[])).next());});},rk=this&&this.__rest||function(t,e){var n={};for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&0>e.indexOf(i)&&(n[i]=t[i]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols)for(var r=0,i=Object.getOwnPropertySymbols(t);r<i.length;r++)0>e.indexOf(i[r])&&Object.prototype.propertyIsEnumerable.call(t,i[r])&&(n[i[r]]=t[i[r]]);return n;};class rj extends f{constructor(t,e){super(t,Object.assign({},rj.defaultOptions,e)),this.$element=(0,g.createPluginContainer)("watermark"),this.context.canvas.getContainer().appendChild(this.$element),this.update(e);}update(t){let e=Object.create(null,{update:{get:()=>super.update}});return rI(this,void 0,void 0,function*(){e.update.call(this,t);let n=this.options,{width:i,height:r,text:a,imageURL:s}=n,o=rk(n,["width","height","text","imageURL"]);Object.keys(o).forEach(e=>{e.startsWith("background")&&(this.$element.style[e]=t[e]);});let l=s?yield function(t,e,n,i){return rN(this,void 0,void 0,function*(){let r=rR(t,e),a=r.getContext("2d"),{rotate:s,opacity:o}=i;s&&a.rotate(s),o&&(a.globalAlpha=o);let l=new Image;return l.crossOrigin="anonymous",l.src=n,new Promise(n=>{l.onload=function(){let i=t>l.width?(t-l.width)/2:0,s=e>l.height?(e-l.height)/2:0;a.drawImage(l,0,0,l.width,l.height,i,s,t-2*i,e-2*s),n(r.toDataURL());};});});}(i,r,s,o):yield function(t,e,n,i){return rN(this,void 0,void 0,function*(){let r=rR(t,e),a=r.getContext("2d"),{rotate:s,opacity:o,textFill:l,textFontSize:d,textFontFamily:u,textFontVariant:c,textFontWeight:h,textAlign:p,textBaseline:f}=i;return a.textAlign=p,a.textBaseline=f,a.translate(t/2,e/2),a.font=`${d}px ${u} ${c} ${h}`,s&&a.rotate(s),o&&(a.globalAlpha=o),l&&(a.fillStyle=l,a.fillText(`${n}`,0,0)),r.toDataURL();});}(i,r,a,o);this.$element.style.backgroundImage=`url(${l})`;});}destroy(){super.destroy(),this.$element.remove();}}rj.defaultOptions={width:200,height:100,opacity:.2,rotate:Math.PI/12,text:"",textFill:"#000",textFontSize:16,textAlign:"center",textBaseline:"middle",backgroundRepeat:"repeat"};},37005793:function(t,e,n){"use strict";n.d(e,"__esModule",{value:!0}),n.e(e,{assignColorByPalette:function(){return l;},getPaletteColors:function(){return d;},parsePalette:function(){return o;}});var i=n("777fffbe")._(n("26cd548e")),r=n("e8f8b56e"),a=n("8a2f2f0b"),s=n("16ea0f92");function o(t){if(t)return"string"==typeof t||"function"==typeof t||Array.isArray(t)?{type:"group",field:t=>t.id,color:t,invert:!1}:t;}function l(t,e){if(!e)return{};let{type:n,color:o,field:l,invert:d}=e,u=t=>{let e="string"==typeof o?(0,r.getExtension)("palette",o):o;if("function"==typeof e){let n={};return t.forEach(([t,i])=>{n[t]=e(d?1-i:i);}),n;}if(Array.isArray(e)){let n=d?[...e].reverse():e,i={};return t.forEach(([t,r])=>{i[t]=n[r%e.length];}),i;}return{};},c=(t,e)=>{var n;return"string"==typeof t?null===(n=e.data)||void 0===n?void 0:n[t]:null==t?void 0:t(e);};if("group"===n){let e=(0,i.default)(t,t=>{if(!l)return"default";let e=c(l,t);return e?String(e):"default";}),n=u(Object.keys(e).map((t,e)=>[t,e])),r={};return Object.entries(e).forEach(([t,e])=>{e.forEach(e=>{r[(0,a.idOf)(e)]=n[t];});}),r;}if("value"===n){let[e,n]=t.reduce(([t,e],n)=>{let i=c(l,n);if("number"!=typeof i)throw Error((0,s.format)(`Palette field ${l} is not a number`));return[Math.min(t,i),Math.max(e,i)];},[1/0,-1/0]),i=n-e;return u(t.map(t=>[t.id,(c(l,t)-e)/i]));}}function d(t){let e="string"==typeof t?(0,r.getExtension)("palette",t):t;if("function"!=typeof e)return e;}},"38dda7dc":function(t,e,n){"use strict";n.d(e,"__esModule",{value:!0}),n.e(e,{ProcessParallelEdges:function(){return f;},getParallelEdges:function(){return y;},groupByEndpoints:function(){return g;},isParallelEdges:function(){return m;}});var i=n("777fffbe"),r=i._(n("d7b6ece6")),a=i._(n("7a2084f1")),s=i._(n("e602108f")),o=i._(n("7e708962")),l=n("4c1b528d"),d=n("8a2f2f0b"),u=n("a7082564"),c=n("e82833b9"),h=n("50c39bee");let p=["top","top-right","right","right-bottom","bottom","bottom-left","left","left-top"];class f extends u.BaseTransform{constructor(t,e){super(t,Object.assign({},f.defaultOptions,e)),this.cacheMergeStyle=new Map,this.getAffectedParallelEdges=t=>{let{add:{edges:e},update:{nodes:n,edges:i,combos:r},remove:{edges:s}}=t,{model:o}=this.context,u=new Map,h=(t,e)=>{o.getRelatedEdgesData(e).forEach(t=>!u.has((0,d.idOf)(t))&&u.set((0,d.idOf)(t),t));};n.forEach(h),r.forEach(h);let p=t=>{y(t,o.getEdgeData().map(t=>(0,c.getEdgeEndsContext)(o,t)),!0).forEach(t=>!u.has((0,d.idOf)(t))&&u.set((0,d.idOf)(t),t));};if(s.size&&s.forEach(p),e.size&&e.forEach(p),i.size){let t=(0,l.groupByChangeType)((0,l.reduceDataChanges)(o.getChanges())).update.edges;i.forEach(e=>{var n;p(e);let i=null===(n=t.find(t=>(0,d.idOf)(t.value)===(0,d.idOf)(e)))||void 0===n?void 0:n.original;i&&!m(e,i)&&p(i);});}(0,a.default)(this.options.edges)||u.forEach((t,e)=>!this.options.edges.includes(e)&&u.delete(e));let f=o.getEdgeData().map(d.idOf);return new Map([...u].sort((t,e)=>f.indexOf(t[0])-f.indexOf(e[0])));},this.applyBundlingStyle=(t,e,n)=>{let{edgeMap:i,reverses:r}=g(e);i.forEach(e=>{e.forEach((e,i,a)=>{var s;let o=a.length,l=e.style||{};if(e.source===e.target){let t=p.length;l.loopPlacement=p[i%t],l.loopDist=Math.floor(i/t)*n+50;}else if(1===o)l.curveOffset=0;else{let t=(i%2==0?1:-1)*(r[`${e.source}|${e.target}|${i}`]?-1:1);l.curveOffset=o%2==1?t*Math.ceil(i/2)*n*2:t*(Math.floor(i/2)*n*2+n);}let u=Object.assign(e,{type:"quadratic",style:l}),c=null===(s=this.context.element)||void 0===s?void 0:s.getElement((0,d.idOf)(e));c&&(0,h.isStyleEqual)(u.style,c.attributes)||(0,h.reassignTo)(t,c?"update":"add","edge",u,!0);});});},this.resetEdgeStyle=t=>{let e=t.style||{},n=this.cacheMergeStyle.get((0,d.idOf)(t))||{};return Object.keys(n).forEach(i=>{(0,s.default)(e[i],n[i])&&(t[i]?e[i]=t[i]:delete e[i]);}),Object.assign(t,{style:e});},this.applyMergingStyle=(t,e)=>{let{edgeMap:n,reverses:i}=g(e);n.forEach(e=>{var n;if(1===e.length){let i=e[0],r=null===(n=this.context.element)||void 0===n?void 0:n.getElement((0,d.idOf)(i)),a=this.resetEdgeStyle(i);r&&(0,h.isStyleEqual)(a,r.attributes)||(0,h.reassignTo)(t,r?"update":"add","edge",a);return;}let a=e.map(({source:t,target:e,style:n={}},a)=>{let{startArrow:s,endArrow:o}=n,l={},[d,u]=i[`${t}|${e}|${a}`]?["endArrow","startArrow"]:["startArrow","endArrow"];return(0,r.default)(s)&&(l[d]=s),(0,r.default)(o)&&(l[u]=o),l;}).reduce((t,e)=>Object.assign(Object.assign({},t),e),{});e.forEach((e,n,i)=>{var r;if(0!==n){(0,h.reassignTo)(t,"remove","edge",e);return;}let s=Object.assign({},(0,o.default)(this.options.style)?this.options.style(i):this.options.style,{childrenData:i});this.cacheMergeStyle.set((0,d.idOf)(e),s);let l=Object.assign(Object.assign({},e),{type:"line",style:Object.assign(Object.assign(Object.assign({},e.style),a),s)}),u=null===(r=this.context.element)||void 0===r?void 0:r.getElement((0,d.idOf)(e));u&&(0,h.isStyleEqual)(l.style,u.attributes)||(0,h.reassignTo)(t,u?"update":"add","edge",l,!0);});});};}beforeDraw(t){let e=this.getAffectedParallelEdges(t);return 0===e.size||("bundle"===this.options.mode?this.applyBundlingStyle(t,e,this.options.distance):this.applyMergingStyle(t,e)),t;}}f.defaultOptions={mode:"bundle",distance:15};let g=t=>{let e=new Map,n=new Set,i={},r=new Map;for(let[a,s]of t){if(n.has(a))continue;let{source:o,target:l}=s,d=`${o}-${l}`;e.has(d)||(e.set(d,[]),r.set(d,new Set));let u=e.get(d),c=r.get(d);for(let[h,p]of(u&&c&&!c.has(a)&&(u.push(s),c.add(a),n.add(a)),t))if(!n.has(h)&&h!==a&&m(s,p)){let t=e.get(d),a=r.get(d);t&&a&&!a.has(h)&&(t.push(p),a.add(h),o===p.target&&l===p.source&&(i[`${p.source}|${p.target}|${t.length-1}`]=!0),n.add(h));}}return{edgeMap:e,reverses:i};},y=(t,e,n)=>e.filter(e=>(n||(0,d.idOf)(e)!==(0,d.idOf)(t))&&m(e,t)),m=(t,e)=>{let{sourceNode:n,targetNode:i}=t.style||{},{sourceNode:r,targetNode:a}=e.style||{};return n===r&&i===a||n===a&&i===r;};},"399ba410":function(t,e,n){"use strict";n.d(e,"__esModule",{value:!0}),n.d(e,"replaceTranslateInTransform",{enumerable:!0,get:function(){return r;}});var i=n("777fffbe")._(n("4c900b62"));function r(t,e,n,a=[]){if(!a&&0===t&&0===e&&0===n)return null;if(Array.isArray(a)){let r=-1,s=[];for(let i=0;i<a.length;i++){let o=a[i];if("translate"===o[0]){if(o[1]===t&&o[2]===e)return null;r=i,s.push(["translate",t,e]);}else if("translate3d"===o[0]){if(o[1]===t&&o[2]===e&&o[3]===n)return null;r=i,s.push(["translate3d",t,e,null!=n?n:0]);}else s.push(o);}return(-1===r&&s.splice(0,0,(0,i.default)(n)?["translate3d",t,e,null!=n?n:0]:["translate",t,e]),0===s.length)?null:s;}let s=a?a.replace(/translate(3d)?\([^)]*\)/g,""):"";return 0===n?`translate(${t}, ${e})${s}`:`translate3d(${t}, ${e}, ${n})${s}`;}},"3ad6e8f3":function(t,e,n){"use strict";var i,r;n.d(e,"__esModule",{value:!0}),e.AnimationType=void 0,(r=i||(e.AnimationType=i={})).DRAW="draw",r.COLLAPSE="collapse",r.EXPAND="expand",r.TRANSFORM="transform";},"3c81881a":function(t,e,n){"use strict";var i,r;n.d(e,"__esModule",{value:!0}),e.ExtensionCategory=void 0,(r=i||(e.ExtensionCategory=i={})).NODE="node",r.EDGE="edge",r.COMBO="combo",r.THEME="theme",r.PALETTE="palette",r.LAYOUT="layout",r.BEHAVIOR="behavior",r.PLUGIN="plugin",r.ANIMATION="animation",r.TRANSFORM="transform",r.SHAPE="shape";},"3d52184b":function(t,e,n){"use strict";n.d(e,"__esModule",{value:!0}),n.e(e,{freeJoin:function(){return E;},getBBoxSize:function(){return f;},getDirection:function(){return p;},insideNode:function(){return v;},nodeToNode:function(){return b;},nodeToPoint:function(){return y;},orth:function(){return u;},pointToNode:function(){return m;},pointToPoint:function(){return g;}});var i=n("777fffbe"),r=i._(n("229e1869")),a=i._(n("e602108f")),s=n("bf55e093"),o=n("e492a2d3"),l=n("6d5a1ab5");let d={padding:10};function u(t,e,n,i,r,a){let{padding:u}=Object.assign(d,a),c=(0,s.getNodeBBox)(n,u),h=(0,s.getNodeBBox)(i,u),f=[t,...r,e],E=null,x=[];for(let t=0,e=f.length;t<e-1;t++){let n=t+1,i=f[t],r=f[n],a=(0,o.isOrthogonal)(i,r),l=null;if(0===t){if(n===e-1){if(c.intersects(h))l=v(i,r,c,h);else if((0,s.isPointBBoxCenter)(i,c)||(0,s.isPointBBoxCenter)(r,h))a||(l=b(i,r,c,h));else{let t=(0,s.getNearestBoundaryPoint)(i,c),e=(0,s.getNearestBoundaryPoint)(r,h);(l=g(t,e,p(t,e))).points.unshift(t),l.points.push(e);}}else(0,s.isPointInBBox)(r,c)?l=v(i,r,c,(0,s.getNodeBBox)(r,u),E):a||(l=y(i,r,c));}else n===e-1?(0,s.isPointInBBox)(i,h)?l=v(i,r,(0,s.getNodeBBox)(i,u),h,E):a||(l=m(i,r,h,E)):a||(l=g(i,r,E));l?(x.push(...l.points),E=l.direction):E=p(i,r),n<e-1&&x.push(r);}return x.map(l.toVector2);}let c={N:"S",S:"N",W:"E",E:"W"},h={N:-Math.PI/2,S:Math.PI/2,E:0,W:Math.PI};function p(t,e){let[n,i]=t,[r,a]=e;return n===r?i>a?"N":"S":i===a?n>r?"W":"E":null;}function f(t,e){return"N"===e||"S"===e?(0,s.getBBoxHeight)(t):(0,s.getBBoxWidth)(t);}function g(t,e,n){let i=[t[0],e[1]],r=[e[0],t[1]],a=p(t,i),s=p(t,r),o=n?c[n]:null,l=a===n||a!==o&&s!==n?i:r;return{points:[l],direction:p(l,e)};}function y(t,e,n){if((0,s.isPointBBoxCenter)(t,n)){let i=E(t,e,n);return{points:[i],direction:p(i,e)};}{let i=(0,s.getNearestBoundaryPoint)(t,n),r=["left","right"].includes((0,s.getNearestBoundarySide)(t,n))?[e[0],i[1]]:[i[0],e[1]];return{points:[r],direction:p(r,e)};}}function m(t,e,n,i){let a=(0,s.isPointBBoxCenter)(e,n)?e:(0,s.getNearestBoundaryPoint)(e,n),l=[[a[0],t[1]],[t[0],a[1]]],d=l.filter(t=>(0,s.isPointOutsideBBox)(t,n)&&!(0,s.isPointOnBBoxBoundary)(t,n,!0)),u=d.filter(e=>p(e,t)!==i);if(u.length>0){let n=u.find(e=>p(t,e)===i)||u[0];return{points:[n],direction:p(n,e)};}{let a=(0,r.default)(l,d)[0],s=(0,o.moveTo)(e,a,f(n,i)/2);return{points:[E(s,t,n),s],direction:p(s,e)};}}function b(t,e,n,i){let r=y(t,e,n),a=(0,l.toVector3)(r.points[0]);if((0,s.isPointInBBox)(a,i)){r=y(e,t,i);let d=(0,l.toVector3)(r.points[0]);if((0,s.isPointInBBox)(d,n)){let s=(0,o.moveTo)(t,a,f(n,p(t,a))/2),l=(0,o.moveTo)(e,d,f(i,p(e,d))/2),u=[(s[0]+l[0])/2,(s[1]+l[1])/2],c=y(t,u,n),h=m(u,e,i,c.direction);r.points=[c.points[0],h.points[0]],r.direction=h.direction;}}return r;}function v(t,e,n,i,r){let d;let u=(0,s.getCombinedBBox)([n,i]),c=(0,l.distance)(e,u.center)>(0,l.distance)(t,u.center),[f,g]=c?[e,t]:[t,e],y=(0,s.getBBoxHeight)(u)+(0,s.getBBoxWidth)(u);if(r){let t=[f[0]+y*Math.cos(h[r]),f[1]+y*Math.sin(h[r])];d=(0,o.moveTo)((0,s.getNearestBoundaryPoint)(t,u),t,.01);}else d=(0,o.moveTo)((0,s.getNearestBoundaryPoint)(f,u),f,-.01);let m=E(d,g,u),b=[(0,o.round)(d,2),(0,o.round)(m,2)];if((0,a.default)((0,o.round)(d),(0,o.round)(m))){let t=(0,l.angle)((0,l.subtract)(d,f),[1,0,0])+Math.PI/2;m=[g[0]+y*Math.cos(t),g[1]+y*Math.sin(t),0];let e=E(d,m=(0,o.round)((0,o.moveTo)((0,s.getNearestBoundaryPoint)(m,u),g,-.01),2),u);b=[d,e,m];}return{points:c?b.reverse():b,direction:c?p(d,e):p(m,e)};}function E(t,e,n){let i=[t[0],e[1]];return(0,s.isPointInBBox)(i,n)&&(i=[e[0],t[1]]),i;}},"3dc2e39f":function(t,e,n){"use strict";function i(t=0){if(Array.isArray(t)){let[e=0,n=e,i=e,r=n]=t;return[e,n,i,r];}return[t,t,t,t];}n.d(e,"__esModule",{value:!0}),e.parsePadding=i,e.getVerticalPadding=function(t=0){let e=i(t);return e[0]+e[2];},e.getHorizontalPadding=function(t=0){let e=i(t);return e[1]+e[3];};},"3df2bd54":function(t,e,n){"use strict";var i=this&&this.__rest||function(t,e){var n={};for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&0>e.indexOf(i)&&(n[i]=t[i]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols)for(var r=0,i=Object.getOwnPropertySymbols(t);r<i.length;r++)0>e.indexOf(i[r])&&Object.prototype.propertyIsEnumerable.call(t,i[r])&&(n[i[r]]=t[i[r]]);return n;};Object.defineProperty(e,"__esModule",{value:!0}),e.Label=void 0;let r=n("6824c090"),a=n("3dc2e39f"),s=n("50674fdc"),o=n("76595ff2"),l=n("565fda94");class d extends l.BaseShape{constructor(t){super((0,o.mergeOptions)({style:d.defaultStyleProps},t));}isTextStyle(t){return(0,s.startsWith)(t,"label");}isBackgroundStyle(t){return(0,s.startsWith)(t,"background");}getTextStyle(t){let e=this.getGraphicStyle(t),{padding:n}=e,r=i(e,["padding"]);return(0,s.omitStyleProps)(r,"background");}getBackgroundStyle(t){if(!1===t.background)return!1;let e=this.getGraphicStyle(t),{wordWrap:n,wordWrapWidth:i,padding:r}=e,o=(0,s.subStyleProps)(e,"background"),{min:[l,d],center:[u,c],halfExtents:[h,p]}=this.shapeMap.text.getGeometryBounds(),[f,g,y,m]=(0,a.parsePadding)(r),b=2*h+m+g,{width:v,height:E}=o;v&&E?Object.assign(o,{x:u-Number(v)/2,y:c-Number(E)/2}):Object.assign(o,{x:l-m,y:d-f,width:n?Math.min(b,i+m+g):b,height:2*p+f+y});let{radius:x}=o;if("string"==typeof x&&x.endsWith("%")){let t=Number(x.replace("%",""))/100;o.radius=Math.min(+o.width,+o.height)*t;}return o;}render(t=this.parsedAttributes,e=this){this.upsert("text",r.Text,this.getTextStyle(t),e),this.upsert("background",r.Rect,this.getBackgroundStyle(t),e);}getGeometryBounds(){return(this.getShape("background")||this.getShape("text")).getGeometryBounds();}}e.Label=d,d.defaultStyleProps={padding:0,fontSize:12,fontFamily:"system-ui, sans-serif",wordWrap:!0,maxLines:1,wordWrapWidth:128,textOverflow:"...",textBaseline:"middle",backgroundOpacity:.75,backgroundZIndex:-1,backgroundLineWidth:0};},41446765:function(t,e,n){"use strict";n.d(e,"__esModule",{value:!0}),e.add=function(t,e){return t.map((t,n)=>t+e[n]);},e.subtract=function(t,e){return t.map((t,n)=>t-e[n]);},e.multiply=a,e.divide=function(t,e){return"number"==typeof e?t.map(t=>t/e):t.map((t,n)=>t/e[n]);},e.dot=function(t,e){return t.reduce((t,n,i)=>t+n*e[i],0);},e.cross=function(t,e){let n=o(t),i=o(e);return[n[1]*i[2]-n[2]*i[1],n[2]*i[0]-n[0]*i[2],n[0]*i[1]-n[1]*i[0]];},e.scale=function(t,e){return t.map(t=>t*e);},e.distance=s,e.manhattanDistance=function(t,e){return t.reduce((t,n,i)=>t+Math.abs(n-e[i]),0);},e.normalize=function(t){let e=t.reduce((t,e)=>t+Math.pow(e,2),0);return t.map(t=>t/Math.sqrt(e));},e.angle=function(t,e,n=!1){let i=t[0]*e[1]-t[1]*e[0],o=Math.acos(a(t,e).reduce((t,e)=>t+e,0)/(s(t,r)*s(e,r)));return n&&i<0&&(o=2*Math.PI-o),o;},e.exactEquals=function(t,e){return t.every((t,n)=>t===e[n]);},e.perpendicular=function(t,e=!0){return e?[-t[1],t[0]]:[t[1],-t[0]];},e.mod=function(t,e){return t.map(t=>t%e);},e.toVector2=function(t){return[t[0],t[1]];},e.toVector3=o,e.rad=function(t){let[e,n]=t;return e||n?Math.atan2(n,e):0;};let i=n("1540f7e4"),r=[0,0,0];function a(t,e){return"number"==typeof e?t.map(t=>t*e):t.map((t,n)=>t*e[n]);}function s(t,e){return Math.sqrt(t.reduce((t,n,i)=>t+Math.pow(n-e[i]||0,2),0));}function o(t){return(0,i.isVector2)(t)?[t[0],t[1],0]:t;}},"41a7ed3a":function(t,e,n){"use strict";n.d(e,"__esModule",{value:!0}),e.RectCombo=e.CircleCombo=e.BaseCombo=void 0;var i=n("885a33c3");n.d(e,"BaseCombo",{enumerable:!0,get:function(){return i.BaseCombo;}});var r=n("2a7c25f9");Object.defineProperty(e,"CircleCombo",{enumerable:!0,get:function(){return r.CircleCombo;}});var a=n("9a4bd378");Object.defineProperty(e,"RectCombo",{enumerable:!0,get:function(){return a.RectCombo;}});},"42c4cb50":function(t,e,n){"use strict";n.d(e,"__esModule",{value:!0}),e.Cubic=void 0;let i=n("f7ced0c5"),r=n("76595ff2"),a=n("17d5ad7d");class s extends a.BaseEdge{constructor(t){super((0,r.mergeOptions)({style:s.defaultStyleProps},t));}getKeyPath(t){let[e,n]=this.getEndpoints(t),{controlPoints:r,curvePosition:a,curveOffset:s}=t,o=this.getControlPoints(e,n,(0,i.parseCurvePosition)(a),(0,i.parseCurveOffset)(s),r);return(0,i.getCubicPath)(e,n,o);}getControlPoints(t,e,n,r,a){return(null==a?void 0:a.length)===2?a:[(0,i.getCurveControlPoint)(t,e,n[0],r[0]),(0,i.getCurveControlPoint)(t,e,n[1],r[1])];}}e.Cubic=s,s.defaultStyleProps={curvePosition:.5,curveOffset:20};},"44ea4380":function(t,e,n){"use strict";n.d(e,"__esModule",{value:!0}),e.parseAnchor=function(t){let e="string"==typeof t?t.split(" ").map(t=>parseFloat(t)):t.slice(0,2);return(0,i.isBetween)(e[0],0,1)&&(0,i.isBetween)(e[1],0,1)?e:[.5,.5];};let i=n("9d4ee1c4");},"4557e62d":function(t,e,n){"use strict";n.d(e,"__esModule",{value:!0}),n.e(e,{getLayoutProperty:function(){return m;},invokeLayoutMethod:function(){return y;},isPreLayout:function(){return p;},isTreeLayout:function(){return h;},layoutAdapter:function(){return g;},layoutMapping2GraphData:function(){return f;}});var i=n("777fffbe"),r=n("c536c45f"),a=i._(n("bf8f013f")),s=n("d9033aa4"),o=n("30e76e54"),l=n("8a2f2f0b"),d=n("e492a2d3"),u=this&&this.__awaiter||function(t,e,n,i){return new(n||(n=Promise))(function(r,a){function s(t){try{l(i.next(t));}catch(t){a(t);}}function o(t){try{l(i.throw(t));}catch(t){a(t);}}function l(t){var e;t.done?r(t.value):((e=t.value)instanceof n?e:new n(function(t){t(e);})).then(s,o);}l((i=i.apply(t,e||[])).next());});},c=this&&this.__rest||function(t,e){var n={};for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&0>e.indexOf(i)&&(n[i]=t[i]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols)for(var r=0,i=Object.getOwnPropertySymbols(t);r<i.length;r++)0>e.indexOf(i[r])&&Object.prototype.propertyIsEnumerable.call(t,i[r])&&(n[i[r]]=t[i[r]]);return n;};function h(t){let{type:e}=t;return["compact-box","mindmap","dendrogram","indented"].includes(e);}function p(t){return!Array.isArray(t)&&(null==t?void 0:t.preLayout);}function f(t){let{nodes:e,edges:n}=t,i={nodes:[],edges:[],combos:[]};return e.forEach(t=>{let e=t.data._isCombo?i.combos:i.nodes,{x:n,y:r,z:a=0}=t.data;null==e||e.push({id:t.id,style:{x:n,y:r,z:a}});}),n.forEach(t=>{let{id:e,source:n,target:r,data:{points:a=[],controlPoints:s=a.slice(1,a.length-1)}}=t;i.edges.push({id:e,source:n,target:r,style:Object.assign({},(null==s?void 0:s.length)?{controlPoints:s.map(d.parsePoint)}:{})});}),i;}function g(t,e){class n extends o.BaseLayout{constructor(e,n){if(super(e,n),this.instance=new t({}),this.id=this.instance.id,"stop"in this.instance&&"tick"in this.instance){let t=this.instance;this.stop=t.stop.bind(t),this.tick=e=>f(t.tick(e));}}execute(t,e){return u(this,void 0,void 0,function*(){return f((yield this.instance.execute(this.graphData2LayoutModel(t),this.transformOptions((0,a.default)({},this.options,e)))));});}transformOptions(t){let{onTick:e}=t;return e&&(t.onTick=t=>e(f(t))),t;}graphData2LayoutModel(t){let{nodes:n=[],edges:i=[],combos:a=[]}=t,o=n.map(t=>{let e=(0,l.idOf)(t),{data:n,style:i,combo:r}=t,a=c(t,["data","style","combo"]),s={id:e,data:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},n),{data:n}),r?{parentId:r}:{}),{style:i}),a)};return(null==i?void 0:i.x)&&Object.assign(s.data,{x:i.x}),(null==i?void 0:i.y)&&Object.assign(s.data,{y:i.y}),(null==i?void 0:i.z)&&Object.assign(s.data,{z:i.z}),s;}),d=new Map(o.map(t=>[t.id,t])),u=i.filter(t=>{let{source:e,target:n}=t;return d.has(e)&&d.has(n);}).map(t=>{let{source:e,target:n,data:i,style:r}=t;return{id:(0,l.idOf)(t),source:e,target:n,data:Object.assign({},i),style:Object.assign({},r)};}),h=a.map(t=>({id:(0,l.idOf)(t),data:Object.assign({_isCombo:!0},t.data),style:Object.assign({},t.style)})),p=new r.Graph({nodes:[...o,...h],edges:u});return e.model.model.hasTreeStructure(s.COMBO_KEY)&&(p.attachTreeStructure(s.COMBO_KEY),o.forEach(t=>{let n=e.model.model.getParent(t.id,s.COMBO_KEY);n&&p.hasNode(n.id)&&p.setParent(t.id,n.id,s.COMBO_KEY);})),p;}}return n;}function y(t,e,...n){if(e in t)return t[e](...n);if("instance"in t){let i=t.instance;if(e in i)return i[e](...n);}return null;}function m(t,e){if(e in t)return t[e];if("instance"in t){let n=t.instance;if(e in n)return n[e];}return null;}},"45c7872a":function(t,e,n){"use strict";n.d(e,"__esModule",{value:!0}),e.orth=function(t,e,n,i,l,d){let{padding:c}=Object.assign(o,d),m=(0,r.getNodeBBox)(n,c),b=(0,r.getNodeBBox)(i,c),v=[t,...l,e],E=null,x=[];for(let t=0,e=v.length;t<e-1;t++){let n=t+1,i=v[t],s=v[n],o=(0,a.isOrthogonal)(i,s),l=null;if(0===t){if(n===e-1){if(m.intersects(b))l=y(i,s,m,b);else if((0,r.isPointBBoxCenter)(i,m)||(0,r.isPointBBoxCenter)(s,b))o||(l=g(i,s,m,b));else{let t=(0,r.getNearestBoundaryPoint)(i,m),e=(0,r.getNearestBoundaryPoint)(s,b);(l=h(t,e,u(t,e))).points.unshift(t),l.points.push(e);}}else(0,r.isPointInBBox)(s,m)?l=y(i,s,m,(0,r.getNodeBBox)(s,c),E):o||(l=p(i,s,m));}else n===e-1?(0,r.isPointInBBox)(i,b)?l=y(i,s,(0,r.getNodeBBox)(i,c),b,E):o||(l=f(i,s,b,E)):o||(l=h(i,s,E));l?(x.push(...l.points),E=l.direction):E=u(i,s),n<e-1&&x.push(s);}return x.map(s.toVector2);},e.getDirection=u,e.getBBoxSize=c,e.pointToPoint=h,e.nodeToPoint=p,e.pointToNode=f,e.nodeToNode=g,e.insideNode=y,e.freeJoin=m;let i=n("5a6910cd"),r=n("b51680dc"),a=n("b3456123"),s=n("41446765"),o={padding:10},l={N:"S",S:"N",W:"E",E:"W"},d={N:-Math.PI/2,S:Math.PI/2,E:0,W:Math.PI};function u(t,e){let[n,i]=t,[r,a]=e;return n===r?i>a?"N":"S":i===a?n>r?"W":"E":null;}function c(t,e){return"N"===e||"S"===e?(0,r.getBBoxHeight)(t):(0,r.getBBoxWidth)(t);}function h(t,e,n){let i=[t[0],e[1]],r=[e[0],t[1]],a=u(t,i),s=u(t,r),o=n?l[n]:null,d=a===n||a!==o&&s!==n?i:r;return{points:[d],direction:u(d,e)};}function p(t,e,n){if((0,r.isPointBBoxCenter)(t,n)){let i=m(t,e,n);return{points:[i],direction:u(i,e)};}{let i=(0,r.getNearestBoundaryPoint)(t,n),a=["left","right"].includes((0,r.getNearestBoundarySide)(t,n))?[e[0],i[1]]:[i[0],e[1]];return{points:[a],direction:u(a,e)};}}function f(t,e,n,s){let o=(0,r.isPointBBoxCenter)(e,n)?e:(0,r.getNearestBoundaryPoint)(e,n),l=[[o[0],t[1]],[t[0],o[1]]],d=l.filter(t=>(0,r.isPointOutsideBBox)(t,n)&&!(0,r.isPointOnBBoxBoundary)(t,n,!0)),h=d.filter(e=>u(e,t)!==s);if(h.length>0){let n=h.find(e=>u(t,e)===s)||h[0];return{points:[n],direction:u(n,e)};}{let r=(0,i.difference)(l,d)[0],o=(0,a.moveTo)(e,r,c(n,s)/2);return{points:[m(o,t,n),o],direction:u(o,e)};}}function g(t,e,n,i){let o=p(t,e,n),l=(0,s.toVector3)(o.points[0]);if((0,r.isPointInBBox)(l,i)){o=p(e,t,i);let d=(0,s.toVector3)(o.points[0]);if((0,r.isPointInBBox)(d,n)){let r=(0,a.moveTo)(t,l,c(n,u(t,l))/2),s=(0,a.moveTo)(e,d,c(i,u(e,d))/2),h=[(r[0]+s[0])/2,(r[1]+s[1])/2],g=p(t,h,n),y=f(h,e,i,g.direction);o.points=[g.points[0],y.points[0]],o.direction=y.direction;}}return o;}function y(t,e,n,o,l){let c;let h=(0,r.getCombinedBBox)([n,o]),p=(0,s.distance)(e,h.center)>(0,s.distance)(t,h.center),[f,g]=p?[e,t]:[t,e],y=(0,r.getBBoxHeight)(h)+(0,r.getBBoxWidth)(h);if(l){let t=[f[0]+y*Math.cos(d[l]),f[1]+y*Math.sin(d[l])];c=(0,a.moveTo)((0,r.getNearestBoundaryPoint)(t,h),t,.01);}else c=(0,a.moveTo)((0,r.getNearestBoundaryPoint)(f,h),f,-.01);let b=m(c,g,h),v=[(0,a.round)(c,2),(0,a.round)(b,2)];if((0,i.isEqual)((0,a.round)(c),(0,a.round)(b))){let t=(0,s.angle)((0,s.subtract)(c,f),[1,0,0])+Math.PI/2;b=[g[0]+y*Math.cos(t),g[1]+y*Math.sin(t),0];let e=m(c,b=(0,a.round)((0,a.moveTo)((0,r.getNearestBoundaryPoint)(b,h),g,-.01),2),h);v=[c,e,b];}return{points:p?v.reverse():v,direction:p?u(c,e):u(b,e)};}function m(t,e,n){let i=[t[0],e[1]];return(0,r.isPointInBBox)(i,n)&&(i=[e[0],t[1]]),i;}},"49a6c2f9":function(t,e,n){"use strict";var i,r;n.d(e,"__esModule",{value:!0}),e.CommonEvent=void 0,(r=i||(e.CommonEvent=i={})).CLICK="click",r.DBLCLICK="dblclick",r.POINTER_OVER="pointerover",r.POINTER_LEAVE="pointerleave",r.POINTER_ENTER="pointerenter",r.POINTER_MOVE="pointermove",r.POINTER_OUT="pointerout",r.POINTER_DOWN="pointerdown",r.POINTER_UP="pointerup",r.CONTEXT_MENU="contextmenu",r.DRAG_START="dragstart",r.DRAG="drag",r.DRAG_END="dragend",r.DRAG_ENTER="dragenter",r.DRAG_OVER="dragover",r.DRAG_LEAVE="dragleave",r.DROP="drop",r.KEY_DOWN="keydown",r.KEY_UP="keyup",r.WHEEL="wheel",r.PINCH="pinch";},"4bc796b0":function(t,e,n){"use strict";n.d(e,"__esModule",{value:!0}),e.EXTENSION_REGISTRY=void 0,e.EXTENSION_REGISTRY={animation:{},behavior:{},combo:{},edge:{},layout:{},node:{},palette:{},theme:{},plugin:{},transform:{},shape:{}};},"4c1b528d":function(t,e,n){"use strict";n.d(e,"__esModule",{value:!0}),n.e(e,{groupByChangeType:function(){return s;},reduceDataChanges:function(){return a;}});var i=n("777fffbe")._(n("26cd548e")),r=n("8a2f2f0b");function a(t){let e={Added:new Map,Updated:new Map,Removed:new Map};return t.forEach(t=>{let{type:n,value:i}=t,a=(0,r.idOf)(i);if("NodeAdded"===n||"EdgeAdded"===n||"ComboAdded"===n)e.Added.set(a,t);else if("NodeUpdated"===n||"EdgeUpdated"===n||"ComboUpdated"===n){if(e.Added.has(a))e.Added.set(a,{type:n.replace("Updated","Added"),value:i});else if(e.Updated.has(a)){let{original:t}=e.Updated.get(a);e.Updated.set(a,{type:n,value:i,original:t});}else e.Removed.has(a)||e.Updated.set(a,t);}else("NodeRemoved"===n||"EdgeRemoved"===n||"ComboRemoved"===n)&&(e.Added.has(a)?e.Added.delete(a):(e.Updated.has(a)&&e.Updated.delete(a),e.Removed.set(a,t)));}),[...Array.from(e.Added.values()),...Array.from(e.Updated.values()),...Array.from(e.Removed.values())];}function s(t){let{NodeAdded:e=[],NodeUpdated:n=[],NodeRemoved:r=[],EdgeAdded:a=[],EdgeUpdated:s=[],EdgeRemoved:o=[],ComboAdded:l=[],ComboUpdated:d=[],ComboRemoved:u=[]}=(0,i.default)(t,t=>t.type);return{add:{nodes:e,edges:a,combos:l},update:{nodes:n,edges:s,combos:d},remove:{nodes:r,edges:o,combos:u}};}},"4c372554":function(t,e,n){"use strict";function i(t=0){if("number"==typeof t)return[t,t,t];let[e,n=e,r=e]=t;return[e,n,r];}n.d(e,"__esModule",{value:!0}),n.d(e,"parseSize",{enumerable:!0,get:function(){return i;}});},"4d3c39dc":function(t,e,n){"use strict";n.d(e,"__esModule",{value:!0}),n.d(e,"Ellipse",{enumerable:!0,get:function(){return l;}});var i=n("a0f386cf"),r=n("6ed5e4e8"),a=n("e492a2d3"),s=n("1165dca0"),o=n("eeff6888");class l extends o.BaseNode{constructor(t){super((0,s.mergeOptions)({style:l.defaultStyleProps},t));}drawKeyShape(t,e){return this.upsert("key",i.Ellipse,this.getKeyStyle(t),e);}getKeyStyle(t){let e=super.getKeyStyle(t),[n,i]=this.getSize(t);return Object.assign(Object.assign({},e),{rx:n/2,ry:i/2});}getIconStyle(t){let e=super.getIconStyle(t),{rx:n,ry:i}=this.getShape("key").attributes,a=2*Math.min(+n,+i)*r.ICON_SIZE_RATIO;return!!e&&Object.assign({width:a,height:a},e);}getIntersectPoint(t,e=!1){let n=this.getShape("key").getBounds();return(0,a.getEllipseIntersectPoint)(t,n,e);}}l.defaultStyleProps={size:[45,35]};},"4e152f1d":function(t,e,n){n.d(e,"__esModule",{value:!0}),n.e(e,{AutoAdaptLabel:function(){return m;},BaseBehavior:function(){return y;},BrushSelect:function(){return _;},ClickSelect:function(){return D;},CollapseExpand:function(){return I;},CreateEdge:function(){return G;},DragCanvas:function(){return Z;},DragElement:function(){return J;},DragElementForce:function(){return ti;},FixElementSize:function(){return tu;},FocusElement:function(){return th;},HoverActivate:function(){return tp;},LassoSelect:function(){return tg;},OptimizeViewportTransform:function(){return ty;},ScrollCanvas:function(){return tb;},ZoomCanvas:function(){return tO;}});var i=n("777fffbe"),r=n("26cd548e"),a=i._(r),s=n("7e708962"),o=i._(s),l=n("ae60ca9f"),d=i._(l),u=n("d9033aa4"),c=n("bf55e093"),h=n("cd44001a"),p=n("afd4cd55"),f=n("a0877623"),g=n("c516880f");class y extends g.BaseExtension{}class m extends y{constructor(t,e){super(t,Object.assign({},m.defaultOptions,e)),this.isOverlapping=(t,e)=>e.some(e=>t.intersects(e)),this.occupiedBounds=[],this.detectLabelCollision=t=>{let e=this.context.viewport,n={show:[],hide:[]};return this.occupiedBounds=[],t.forEach(t=>{let i=t.getShape("label").getRenderBounds();e.isInViewport(i,!0)&&!this.isOverlapping(i,this.occupiedBounds)?(n.show.push(t),this.occupiedBounds.push((0,c.getExpandedBBox)(i,this.options.padding))):n.hide.push(t);}),n;},this.hideLabelIfExceedViewport=(t,e)=>{let{exit:n}=(0,p.arrayDiff)(t,e,t=>t.id);null==n||n.forEach(this.hideLabel);},this.nodeCentralities=new Map,this.sortNodesByCentrality=(t,e)=>{let{model:n}=this.context,i=n.getData(),r=n.getRelatedEdgesData.bind(n);return t.map(t=>(this.nodeCentralities.has(t.id)||(this.nodeCentralities=(0,h.getNodeCentralities)(i,r,e)),{node:t,centrality:this.nodeCentralities.get(t.id)})).sort((t,e)=>e.centrality-t.centrality).map(t=>t.node);},this.sortLabelElementsInView=t=>{let{sort:e,sortNode:n,sortCombo:i,sortEdge:r}=this.options,{model:s}=this.context;if((0,o.default)(e))return t.sort((t,n)=>e(s.getElementDataById(t.id),s.getElementDataById(n.id)));let{node:l=[],edge:d=[],combo:u=[]}=(0,a.default)(t,t=>t.type);return[...(0,o.default)(i)?u.sort((t,e)=>i(...s.getComboData([t.id,e.id]))):u,...(0,o.default)(n)?l.sort((t,e)=>n(...s.getNodeData([t.id,e.id]))):this.sortNodesByCentrality(l,n),...(0,o.default)(r)?d.sort((t,e)=>r(...s.getEdgeData([t.id,e.id]))):d];},this.labelElementsInView=[],this.isFirstRender=!0,this.onToggleVisibility=t=>{var e;if((null===(e=t.data)||void 0===e?void 0:e.stage)==="zIndex")return;if(!this.validate(t)){this.hiddenElements.size>0&&(this.hiddenElements.forEach(this.showLabel),this.hiddenElements.clear());return;}let n=this.isFirstRender?this.getLabelElements():this.getLabelElementsInView();this.hideLabelIfExceedViewport(this.labelElementsInView,n),this.labelElementsInView=n;let i=this.sortLabelElementsInView(this.labelElementsInView),{show:r,hide:a}=this.detectLabelCollision(i);for(let t=r.length-1;t>=0;t--)this.showLabel(r[t]);a.forEach(this.hideLabel);},this.hiddenElements=new Map,this.hideLabel=t=>{let e=t.getShape("label");e&&(0,f.setVisibility)(e,"hidden"),this.hiddenElements.set(t.id,t);},this.showLabel=t=>{let e=t.getShape("label");e&&(0,f.setVisibility)(e,"visible"),t.toFront(),this.hiddenElements.delete(t.id);},this.onTransform=(0,d.default)(this.onToggleVisibility,this.options.throttle,{leading:!0}),this.enableToggle=!0,this.toggle=t=>{this.enableToggle&&this.onToggleVisibility(t);},this.onBeforeRender=()=>{this.enableToggle=!1;},this.onAfterRender=t=>{this.onToggleVisibility(t),this.enableToggle=!0;},this.bindEvents();}update(t){this.unbindEvents(),super.update(t),this.bindEvents(),this.onToggleVisibility({});}getLabelElements(){let{elementMap:t}=this.context.element,e=[];for(let n in t){let i=t[n];i.isVisible()&&i.getShape("label")&&e.push(i);}return e;}getLabelElementsInView(){let t=this.context.viewport;return this.getLabelElements().filter(e=>t.isInViewport(e.getShape("key").getRenderBounds()));}bindEvents(){let{graph:t}=this.context;t.on(u.GraphEvent.BEFORE_RENDER,this.onBeforeRender),t.on(u.GraphEvent.AFTER_RENDER,this.onAfterRender),t.on(u.GraphEvent.AFTER_DRAW,this.toggle),t.on(u.GraphEvent.AFTER_LAYOUT,this.toggle),t.on(u.GraphEvent.AFTER_TRANSFORM,this.onTransform);}unbindEvents(){let{graph:t}=this.context;t.off(u.GraphEvent.BEFORE_RENDER,this.onBeforeRender),t.off(u.GraphEvent.AFTER_RENDER,this.onAfterRender),t.off(u.GraphEvent.AFTER_DRAW,this.toggle),t.off(u.GraphEvent.AFTER_LAYOUT,this.toggle),t.off(u.GraphEvent.AFTER_TRANSFORM,this.onTransform);}validate(t){if(this.destroyed)return!1;let{enable:e}=this.options;return(0,o.default)(e)?e(t):!!e;}destroy(){this.unbindEvents(),super.destroy();}}m.defaultOptions={enable:!0,throttle:100,padding:0,sortNode:{type:"degree"}};var b=n("a0f386cf"),v=n("bf8f013f"),E=i._(v),x=n("8a2f2f0b"),O=n("e492a2d3"),S=n("ae02b67c");class _ extends y{constructor(t,e){super(t,(0,E.default)({},_.defaultOptions,e)),this.shortcut=new S.Shortcut(t.graph),this.onPointerDown=this.onPointerDown.bind(this),this.onPointerMove=this.onPointerMove.bind(this),this.onPointerUp=this.onPointerUp.bind(this),this.clearStates=this.clearStates.bind(this),this.bindEvents();}onPointerDown(t){if(!this.validate(t)||!this.isKeydown()||this.startPoint)return;let{canvas:e,graph:n}=this.context,i=Object.assign({},this.options.style);this.options.style.lineWidth&&(i.lineWidth=+this.options.style.lineWidth/n.getZoom()),this.rectShape=new b.Rect({id:"g6-brush-select",style:i}),e.appendChild(this.rectShape),this.startPoint=[t.canvas.x,t.canvas.y];}onPointerMove(t){var e;if(!this.startPoint)return;let{immediately:n,mode:i}=this.options;this.endPoint=P(t),null===(e=this.rectShape)||void 0===e||e.attr({x:Math.min(this.endPoint[0],this.startPoint[0]),y:Math.min(this.endPoint[1],this.startPoint[1]),width:Math.abs(this.endPoint[0]-this.startPoint[0]),height:Math.abs(this.endPoint[1]-this.startPoint[1])}),n&&"default"===i&&this.updateElementsStates((0,O.getBoundingPoints)(this.startPoint,this.endPoint));}onPointerUp(t){if(this.startPoint){if(!this.endPoint){this.clearBrush();return;}this.endPoint=P(t),this.updateElementsStates((0,O.getBoundingPoints)(this.startPoint,this.endPoint)),this.clearBrush();}}clearStates(){this.endPoint||this.clearElementsStates();}clearElementsStates(){let{graph:t}=this.context,e=Object.values(t.getData()).reduce((t,e)=>Object.assign({},t,e.reduce((t,e)=>(t[(0,x.idOf)(e)]=[],t),{})),{});t.setElementState(e,this.options.animation);}updateElementsStates(t){let{graph:e}=this.context,{enableElements:n,state:i,mode:r,onSelect:a}=this.options,s=this.selector(e,t,n),l={};switch(r){case"union":s.forEach(t=>{l[t]=[...e.getElementState(t),i];});break;case"diff":s.forEach(t=>{let n=e.getElementState(t);l[t]=n.includes(i)?n.filter(t=>t!==i):[...n,i];});break;case"intersect":s.forEach(t=>{let n=e.getElementState(t);l[t]=n.includes(i)?[i]:[];});break;default:s.forEach(t=>{l[t]=[i];});}(0,o.default)(a)&&(l=a(l)),e.setElementState(l,this.options.animation);}selector(t,e,n){if(!n||0===n.length)return[];let i=[],r=t.getData();if(n.forEach(n=>{r[`${n}s`].forEach(n=>{let r=(0,x.idOf)(n);"hidden"!==t.getElementVisibility(r)&&(0,O.isPointInPolygon)(t.getElementPosition(r),e)&&i.push(r);});}),n.includes("edge")){let t=r.edges;null==t||t.forEach(t=>{let{source:e,target:n}=t;i.includes(e)&&i.includes(n)&&i.push((0,x.idOf)(t));});}return i;}clearBrush(){var t;null===(t=this.rectShape)||void 0===t||t.remove(),this.rectShape=void 0,this.startPoint=void 0,this.endPoint=void 0;}isKeydown(){let{trigger:t}=this.options,e=Array.isArray(t)?t:[t];return this.shortcut.match(e.filter(t=>"drag"!==t));}validate(t){if(this.destroyed)return!1;let{enable:e}=this.options;return(0,o.default)(e)?e(t):!!e;}bindEvents(){let{graph:t}=this.context;t.on(u.CommonEvent.POINTER_DOWN,this.onPointerDown),t.on(u.CommonEvent.POINTER_MOVE,this.onPointerMove),t.on(u.CommonEvent.POINTER_UP,this.onPointerUp),t.on(u.CanvasEvent.CLICK,this.clearStates);}unbindEvents(){let{graph:t}=this.context;t.off(u.CommonEvent.POINTER_DOWN,this.onPointerDown),t.off(u.CommonEvent.POINTER_MOVE,this.onPointerMove),t.off(u.CommonEvent.POINTER_UP,this.onPointerUp),t.off(u.CanvasEvent.CLICK,this.clearStates);}update(t){this.unbindEvents(),this.options=(0,E.default)(this.options,t),this.bindEvents();}destroy(){this.unbindEvents(),super.destroy();}}_.defaultOptions={animation:!1,enable:!0,enableElements:["node","combo","edge"],immediately:!1,mode:"default",state:"selected",trigger:["shift"],style:{width:0,height:0,lineWidth:1,fill:"#1677FF",stroke:"#1677FF",fillOpacity:.1,zIndex:2,pointerEvents:"none"}};let P=t=>[t.canvas.x,t.canvas.y];var C=n("6ed5e4e8"),w=n("51b633a8");function M(t,e,n,i,r="both"){if("combo"===e||"node"===e)return A(t,n,i,r);let a=t.getEdgeData(n);return a?Array.from(new Set([...A(t,a.source,i-1,r),...A(t,a.target,i-1,r),n])):[];}function A(t,e,n,i="both"){let r=new Set,a=new Set,s=new Set;return(0,w.bfs)(e,(e,r)=>{r>n||(s.add(e),t.getRelatedEdgesData(e,i).forEach(t=>{let e=(0,x.idOf)(t);!a.has(e)&&r<n&&(s.add(e),a.add(e));}));},e=>t.getRelatedEdgesData(e,i).map(t=>t.source===e?t.target:t.source).filter(t=>!r.has(t)&&(r.add(t),!0))),Array.from(s);}function T(t){return t.states||[];}var B=this&&this.__awaiter||function(t,e,n,i){return new(n||(n=Promise))(function(r,a){function s(t){try{l(i.next(t));}catch(t){a(t);}}function o(t){try{l(i.throw(t));}catch(t){a(t);}}function l(t){var e;t.done?r(t.value):((e=t.value)instanceof n?e:new n(function(t){t(e);})).then(s,o);}l((i=i.apply(t,e||[])).next());});};class D extends y{constructor(t,e){super(t,Object.assign({},D.defaultOptions,e)),this.onClickSelect=t=>B(this,void 0,void 0,function*(){var e,n;this.validate(t)&&(yield this.updateState(t),null===(n=(e=this.options).onClick)||void 0===n||n.call(e,t));}),this.onClickCanvas=t=>B(this,void 0,void 0,function*(){var e,n;this.validate(t)&&(yield this.clearState(),null===(n=(e=this.options).onClick)||void 0===n||n.call(e,t));}),this.shortcut=new S.Shortcut(t.graph),this.bindEvents();}bindEvents(){let{graph:t}=this.context;this.unbindEvents(),C.ELEMENT_TYPES.forEach(e=>{t.on(`${e}:${u.CommonEvent.CLICK}`,this.onClickSelect);}),t.on(u.CanvasEvent.CLICK,this.onClickCanvas);}get isMultipleSelect(){let{multiple:t,trigger:e}=this.options;return t&&this.shortcut.match(e);}getNeighborIds(t){let{target:e,targetType:n}=t,{graph:i}=this.context,{degree:r}=this.options;return M(i,n,e.id,"function"==typeof r?r(t):r).filter(t=>t!==e.id);}updateState(t){return B(this,void 0,void 0,function*(){let{state:e,unselectedState:n,neighborState:i,animation:r}=this.options;if(!e&&!i&&!n)return;let{target:a}=t,{graph:s}=this.context,o=T(s.getElementData(a.id)).includes(e)?"unselect":"select",l={},d=this.isMultipleSelect,u=[a.id],c=this.getNeighborIds(t);if(d){if(Object.assign(l,this.getDataStates()),"select"===o){let t=(t,e)=>{t.forEach(t=>{let i=new Set(s.getElementState(t));i.add(e),i.delete(n),l[t]=Array.from(i);});};t(u,e),t(c,i),n&&Object.keys(l).forEach(t=>{let r=l[t];r.includes(e)||r.includes(i)||r.includes(n)||l[t].push(n);});}else{let t=l[a.id];l[a.id]=t.filter(t=>t!==e&&t!==i),t.includes(n)||l[a.id].push(n),c.forEach(t=>{l[t]=l[t].filter(t=>t!==i),l[t].includes(e)||l[t].push(n);});}}else if("select"===o){Object.assign(l,this.getClearStates(!!n));let t=(t,e)=>{t.forEach(t=>{l[t]||(l[t]=s.getElementState(t)),l[t].push(e);});};t(u,e),t(c,i),n&&Object.keys(l).forEach(t=>{u.includes(t)||c.includes(t)||l[t].push(n);});}else Object.assign(l,this.getClearStates());yield s.setElementState(l,r);});}getDataStates(){let{graph:t}=this.context,{nodes:e,edges:n,combos:i}=t.getData(),r={};return[...e,...n,...i].forEach(t=>{r[(0,x.idOf)(t)]=T(t);}),r;}getClearStates(t=!1){let{graph:e}=this.context,{state:n,unselectedState:i,neighborState:r}=this.options,a=new Set([n,i,r]),{nodes:s,edges:o,combos:l}=e.getData(),d={};return[...s,...o,...l].forEach(e=>{let n=T(e),i=n.filter(t=>!a.has(t));t?d[(0,x.idOf)(e)]=i:i.length!==n.length&&(d[(0,x.idOf)(e)]=i);}),d;}clearState(){return B(this,void 0,void 0,function*(){let{graph:t}=this.context;yield t.setElementState(this.getClearStates(),this.options.animation);});}validate(t){if(this.destroyed)return!1;let{enable:e}=this.options;return(0,o.default)(e)?e(t):!!e;}unbindEvents(){let{graph:t}=this.context;C.ELEMENT_TYPES.forEach(e=>{t.off(`${e}:${u.CommonEvent.CLICK}`,this.onClickSelect);}),t.off(u.CanvasEvent.CLICK,this.onClickCanvas);}destroy(){this.unbindEvents(),super.destroy();}}D.defaultOptions={animation:!0,enable:!0,multiple:!1,trigger:["shift"],state:"selected",neighborState:"selected",unselectedState:void 0,degree:0};var L=n("e1c279a0"),N=n("19365c34"),R=this&&this.__awaiter||function(t,e,n,i){return new(n||(n=Promise))(function(r,a){function s(t){try{l(i.next(t));}catch(t){a(t);}}function o(t){try{l(i.throw(t));}catch(t){a(t);}}function l(t){var e;t.done?r(t.value):((e=t.value)instanceof n?e:new n(function(t){t(e);})).then(s,o);}l((i=i.apply(t,e||[])).next());});};class I extends y{constructor(t,e){super(t,Object.assign({},I.defaultOptions,e)),this.onCollapseExpand=t=>R(this,void 0,void 0,function*(){if(!this.validate(t))return;let{target:e}=t;if(!(0,N.isElement)(e))return;let n=e.id,{model:i,graph:r}=this.context,a=i.getElementDataById(n);if(!a)return!1;let{onCollapse:s,onExpand:o,animation:l,align:d}=this.options;(0,L.isCollapsed)(a)?(yield r.expandElement(n,{animation:l,align:d}),null==o||o(n)):(yield r.collapseElement(n,{animation:l,align:d}),null==s||s(n));}),this.bindEvents();}update(t){this.unbindEvents(),super.update(t),this.bindEvents();}bindEvents(){let{graph:t}=this.context,{trigger:e}=this.options;t.on(`node:${e}`,this.onCollapseExpand),t.on(`combo:${e}`,this.onCollapseExpand);}unbindEvents(){let{graph:t}=this.context,{trigger:e}=this.options;t.off(`node:${e}`,this.onCollapseExpand),t.off(`combo:${e}`,this.onCollapseExpand);}validate(t){if(this.destroyed)return!1;let{enable:e}=this.options;return(0,o.default)(e)?e(t):!!e;}destroy(){this.unbindEvents(),super.destroy();}}I.defaultOptions={enable:!0,animation:!0,trigger:u.CommonEvent.DBLCLICK,align:!0};var k=n("d09bf851"),j=i._(k),z=this&&this.__awaiter||function(t,e,n,i){return new(n||(n=Promise))(function(r,a){function s(t){try{l(i.next(t));}catch(t){a(t);}}function o(t){try{l(i.throw(t));}catch(t){a(t);}}function l(t){var e;t.done?r(t.value):((e=t.value)instanceof n?e:new n(function(t){t(e);})).then(s,o);}l((i=i.apply(t,e||[])).next());});};let F="g6-create-edge-assist-node-id";class G extends y{constructor(t,e){super(t,Object.assign({},G.defaultOptions,e)),this.drop=t=>z(this,void 0,void 0,function*(){let{targetType:e}=t;["combo","node"].includes(e)&&this.source?yield this.handleCreateEdge(t):yield this.cancelEdge();}),this.handleCreateEdge=t=>z(this,void 0,void 0,function*(){var e,n,i;if(!this.validate(t))return;let{graph:r,canvas:a,batch:s,element:o}=this.context,{style:l}=this.options;if(this.source){this.createEdge(t),yield this.cancelEdge();return;}s.startBatch(),a.setCursor("crosshair"),this.source=this.getSelectedNodeIDs([t.target.id])[0];let d=r.getElementData(this.source);r.addNodeData([{id:F,style:{visibility:"hidden",ports:[{key:"port-1",placement:[.5,.5]}],x:null===(e=d.style)||void 0===e?void 0:e.x,y:null===(n=d.style)||void 0===n?void 0:n.y}}]),r.addEdgeData([{id:"g6-create-edge-assist-edge-id",source:this.source,target:F,style:Object.assign({pointerEvents:"none"},l)}]),yield null===(i=o.draw({animation:!1}))||void 0===i?void 0:i.finished;}),this.updateAssistEdge=t=>z(this,void 0,void 0,function*(){var e;if(!this.source)return;let{model:n,element:i}=this.context;n.translateNodeTo(F,[t.canvas.x,t.canvas.y]),yield null===(e=i.draw({animation:!1,silence:!0}))||void 0===e?void 0:e.finished;}),this.createEdge=t=>{var e,n;let{graph:i}=this.context,{style:r,onFinish:a,onCreate:s}=this.options;if(void 0===(null===(e=t.target)||void 0===e?void 0:e.id)||void 0===this.source)return;let o=null===(n=this.getSelectedNodeIDs([t.target.id]))||void 0===n?void 0:n[0],l=s({id:`${this.source}-${o}-${(0,j.default)()}`,source:this.source,target:o,style:r});i.addEdgeData([l]),a(l);},this.cancelEdge=()=>z(this,void 0,void 0,function*(){var t;if(!this.source)return;let{graph:e,element:n,batch:i}=this.context;e.removeNodeData([F]),this.source=void 0,yield null===(t=n.draw({animation:!1}))||void 0===t?void 0:t.finished,i.endBatch();}),this.bindEvents();}update(t){super.update(t),this.bindEvents();}bindEvents(){let{graph:t}=this.context,{trigger:e}=this.options;this.unbindEvents(),"click"===e?(t.on(u.NodeEvent.CLICK,this.handleCreateEdge),t.on(u.ComboEvent.CLICK,this.handleCreateEdge),t.on(u.CanvasEvent.CLICK,this.cancelEdge),t.on(u.EdgeEvent.CLICK,this.cancelEdge)):(t.on(u.NodeEvent.DRAG_START,this.handleCreateEdge),t.on(u.ComboEvent.DRAG_START,this.handleCreateEdge),t.on(u.CommonEvent.POINTER_UP,this.drop)),t.on(u.CommonEvent.POINTER_MOVE,this.updateAssistEdge);}getSelectedNodeIDs(t){return Array.from(new Set(this.context.graph.getElementDataByState("node",this.options.state).map(t=>t.id).concat(t)));}validate(t){if(this.destroyed)return!1;let{enable:e}=this.options;return(0,o.default)(e)?e(t):!!e;}unbindEvents(){let{graph:t}=this.context;t.off(u.NodeEvent.CLICK,this.handleCreateEdge),t.off(u.ComboEvent.CLICK,this.handleCreateEdge),t.off(u.CanvasEvent.CLICK,this.cancelEdge),t.off(u.EdgeEvent.CLICK,this.cancelEdge),t.off(u.NodeEvent.DRAG_START,this.handleCreateEdge),t.off(u.ComboEvent.DRAG_START,this.handleCreateEdge),t.off(u.CommonEvent.POINTER_UP,this.drop),t.off(u.CommonEvent.POINTER_MOVE,this.updateAssistEdge);}destroy(){this.unbindEvents(),super.destroy();}}G.defaultOptions={animation:!0,enable:!0,style:{},trigger:"drag",onCreate:t=>t,onFinish:()=>{}};var V=n("30da05e7"),W=i._(V),H=n("dfd51207"),K=i._(H),Y=n("50905a3a"),$=n("8c2b6959"),U=n("6d5a1ab5"),X=this&&this.__awaiter||function(t,e,n,i){return new(n||(n=Promise))(function(r,a){function s(t){try{l(i.next(t));}catch(t){a(t);}}function o(t){try{l(i.throw(t));}catch(t){a(t);}}function l(t){var e;t.done?r(t.value):((e=t.value)instanceof n?e:new n(function(t){t(e);})).then(s,o);}l((i=i.apply(t,e||[])).next());});};class Z extends y{constructor(t,e){super(t,Object.assign({},Z.defaultOptions,e)),this.isDragging=!1,this.onDragStart=t=>{this.validate(t)&&(this.isDragging=!0,this.context.canvas.setCursor("grabbing"));},this.onDrag=t=>{var e,n,i,r;if(!this.isDragging||$.PinchHandler.isPinching)return;let a=null!==(n=null===(e=t.movement)||void 0===e?void 0:e.x)&&void 0!==n?n:t.dx,s=null!==(r=null===(i=t.movement)||void 0===i?void 0:i.y)&&void 0!==r?r:t.dy;(a|s)!=0&&this.translate([a,s],!1);},this.onDragEnd=()=>{var t,e;this.isDragging=!1,this.context.canvas.setCursor(this.defaultCursor),null===(e=(t=this.options).onFinish)||void 0===e||e.call(t);},this.invokeOnFinish=(0,W.default)(()=>{var t,e;null===(e=(t=this.options).onFinish)||void 0===e||e.call(t);},300),this.shortcut=new S.Shortcut(t.graph),this.bindEvents(),this.defaultCursor=this.context.canvas.getConfig().cursor||"default";}update(t){this.unbindEvents(),super.update(t),this.bindEvents();}bindEvents(){let{trigger:t}=this.options;if((0,K.default)(t)){let{up:e=[],down:n=[],left:i=[],right:r=[]}=t;this.shortcut.bind(e,t=>this.onTranslate([0,1],t)),this.shortcut.bind(n,t=>this.onTranslate([0,-1],t)),this.shortcut.bind(i,t=>this.onTranslate([1,0],t)),this.shortcut.bind(r,t=>this.onTranslate([-1,0],t));}else{let{graph:t}=this.context;t.on(u.CommonEvent.DRAG_START,this.onDragStart),t.on(u.CommonEvent.DRAG,this.onDrag),t.on(u.CommonEvent.DRAG_END,this.onDragEnd);}}onTranslate(t,e){return X(this,void 0,void 0,function*(){if(!this.validate(e))return;let{sensitivity:n}=this.options;yield this.translate((0,U.multiply)(t,-1*n),this.options.animation),this.invokeOnFinish();});}translate(t,e){return X(this,void 0,void 0,function*(){t=this.clampByDirection(t),t=this.clampByRange(t),yield this.context.graph.translateBy(t,e);});}clampByDirection([t,e]){let{direction:n}=this.options;return"x"===n?e=0:"y"===n&&(t=0),[t,e];}clampByRange([t,e]){let{viewport:n,canvas:i}=this.context,[r,a]=i.getSize(),[s,o,l,d]=(0,Y.parsePadding)(this.options.range),u=(0,c.getExpandedBBox)((0,c.getPointBBox)(n.getCanvasCenter()),[a*s,r*o,a*l,r*d]),h=(0,U.subtract)(n.getViewportCenter(),[t,e,0]);if(!(0,c.isPointInBBox)(h,u)){let{min:[n,i],max:[r,a]}=u;(h[0]<n&&t>0||h[0]>r&&t<0)&&(t=0),(h[1]<i&&e>0||h[1]>a&&e<0)&&(e=0);}return[t,e];}validate(t){if(this.destroyed)return!1;let{enable:e}=this.options;return"function"==typeof e?e(t):!!e;}unbindEvents(){this.shortcut.unbindAll();let{graph:t}=this.context;t.off(u.CommonEvent.DRAG_START,this.onDragStart),t.off(u.CommonEvent.DRAG,this.onDrag),t.off(u.CommonEvent.DRAG_END,this.onDragEnd);}destroy(){this.shortcut.destroy(),this.unbindEvents(),this.context.canvas.setCursor(this.defaultCursor),super.destroy();}}Z.defaultOptions={enable:t=>!("targetType"in t)||"canvas"===t.targetType,sensitivity:10,direction:"both",range:1/0};var q=n("21954d01"),Q=this&&this.__awaiter||function(t,e,n,i){return new(n||(n=Promise))(function(r,a){function s(t){try{l(i.next(t));}catch(t){a(t);}}function o(t){try{l(i.throw(t));}catch(t){a(t);}}function l(t){var e;t.done?r(t.value):((e=t.value)instanceof n?e:new n(function(t){t(e);})).then(s,o);}l((i=i.apply(t,e||[])).next());});};class J extends y{constructor(t,e){super(t,Object.assign({},J.defaultOptions,e)),this.enable=!1,this.enableElements=["node","combo"],this.target=[],this.shadowOrigin=[0,0],this.hiddenEdges=[],this.isDragging=!1,this.onDrop=t=>Q(this,void 0,void 0,function*(){var e;if("link"!==this.options.dropEffect)return;let{model:n,element:i}=this.context,r=t.target.id;this.target.forEach(t=>{let e=n.getParentData(t,u.COMBO_KEY);e&&(0,x.idOf)(e)===r&&n.refreshComboData(r),n.setParent(t,r,u.COMBO_KEY);}),yield null===(e=null==i?void 0:i.draw({animation:!0}))||void 0===e?void 0:e.finished;}),this.setCursor=t=>{if(this.isDragging)return;let{type:e}=t,{canvas:n}=this.context,{cursor:i}=this.options;e===u.CommonEvent.POINTER_ENTER?n.setCursor((null==i?void 0:i.grab)||"grab"):n.setCursor((null==i?void 0:i.default)||"default");},this.onDragStart=this.onDragStart.bind(this),this.onDrag=this.onDrag.bind(this),this.onDragEnd=this.onDragEnd.bind(this),this.onDrop=this.onDrop.bind(this),this.bindEvents();}update(t){this.unbindEvents(),super.update(t),this.bindEvents();}bindEvents(){let{graph:t,canvas:e}=this.context,n=e.getLayer().getContextService().$canvas;n&&(n.addEventListener("blur",this.onDragEnd),n.addEventListener("contextmenu",this.onDragEnd)),this.enableElements.forEach(e=>{t.on(`${e}:${u.CommonEvent.DRAG_START}`,this.onDragStart),t.on(`${e}:${u.CommonEvent.DRAG}`,this.onDrag),t.on(`${e}:${u.CommonEvent.DRAG_END}`,this.onDragEnd),t.on(`${e}:${u.CommonEvent.POINTER_ENTER}`,this.setCursor),t.on(`${e}:${u.CommonEvent.POINTER_LEAVE}`,this.setCursor);}),["link"].includes(this.options.dropEffect)&&(t.on(u.ComboEvent.DROP,this.onDrop),t.on(u.CanvasEvent.DROP,this.onDrop));}getSelectedNodeIDs(t){return Array.from(new Set(this.context.graph.getElementDataByState("node",this.options.state).map(t=>t.id).concat(t)));}getDelta(t){let e=this.context.graph.getZoom();return(0,U.divide)([t.dx,t.dy],e);}onDragStart(t){var e;if(this.enable=this.validate(t),!this.enable)return;let{batch:n,canvas:i,graph:r}=this.context;i.setCursor((null===(e=this.options.cursor)||void 0===e?void 0:e.grabbing)||"grabbing"),this.isDragging=!0,n.startBatch();let a=t.target.id;r.getElementState(a).includes(this.options.state)?this.target=this.getSelectedNodeIDs([a]):this.target=[a],this.hideEdge(),this.context.graph.frontElement(this.target),this.options.shadow&&this.createShadow(this.target);}onDrag(t){if(!this.enable)return;let e=this.getDelta(t);this.options.shadow?this.moveShadow(e):this.moveElement(this.target,e);}onDragEnd(){var t,e,n;if(this.enable=!1,this.options.shadow){if(!this.shadow)return;this.shadow.style.visibility="hidden";let{x:t=0,y:e=0}=this.shadow.attributes,[n,i]=(0,U.subtract)([+t,+e],this.shadowOrigin);this.moveElement(this.target,[n,i]);}this.showEdges(),null===(e=(t=this.options).onFinish)||void 0===e||e.call(t,this.target);let{batch:i,canvas:r}=this.context;i.endBatch(),r.setCursor((null===(n=this.options.cursor)||void 0===n?void 0:n.grab)||"grab"),this.isDragging=!1,this.target=[];}validate(t){if(this.destroyed)return!1;let{enable:e}=this.options;return(0,o.default)(e)?e(t):!!e;}moveElement(t,e){return Q(this,void 0,void 0,function*(){let{graph:n,model:i}=this.context,{dropEffect:r}=this.options;"move"===r&&t.forEach(t=>i.refreshComboData(t)),n.translateElementBy(Object.fromEntries(t.map(t=>[t,e])),!1);});}moveShadow(t){if(!this.shadow)return;let{x:e=0,y:n=0}=this.shadow.attributes,[i,r]=t;this.shadow.attr({x:+e+i,y:+n+r});}createShadow(t){let e=(0,q.subStyleProps)(this.options,"shadow"),n=(0,c.getCombinedBBox)(t.map(t=>this.context.element.getElement(t).getBounds())),[i,r]=n.min;this.shadowOrigin=[i,r];let[a,s]=(0,c.getBBoxSize)(n),o={width:a,height:s,x:i,y:r};this.shadow?this.shadow.attr(Object.assign(Object.assign(Object.assign({},e),o),{visibility:"visible"})):(this.shadow=new b.Rect({style:Object.assign(Object.assign(Object.assign({$layer:"transient"},e),o),{pointerEvents:"none"})}),this.context.canvas.appendChild(this.shadow));}showEdges(){this.options.shadow||0===this.hiddenEdges.length||(this.context.graph.showElement(this.hiddenEdges),this.hiddenEdges=[]);}hideEdge(){let{hideEdge:t,shadow:e}=this.options;if("none"===t||e)return;let{graph:n}=this.context;"all"===t?this.hiddenEdges=n.getEdgeData().map(x.idOf):this.hiddenEdges=Array.from(new Set(this.target.map(e=>n.getRelatedEdgesData(e,t).map(x.idOf)).flat())),n.hideElement(this.hiddenEdges);}unbindEvents(){let{graph:t,canvas:e}=this.context,n=e.getLayer().getContextService().$canvas;n&&(n.removeEventListener("blur",this.onDragEnd),n.removeEventListener("contextmenu",this.onDragEnd)),this.enableElements.forEach(e=>{t.off(`${e}:${u.CommonEvent.DRAG_START}`,this.onDragStart),t.off(`${e}:${u.CommonEvent.DRAG}`,this.onDrag),t.off(`${e}:${u.CommonEvent.DRAG_END}`,this.onDragEnd),t.off(`${e}:${u.CommonEvent.POINTER_ENTER}`,this.setCursor),t.off(`${e}:${u.CommonEvent.POINTER_LEAVE}`,this.setCursor);}),t.off(`combo:${u.CommonEvent.DROP}`,this.onDrop),t.off(`canvas:${u.CommonEvent.DROP}`,this.onDrop);}destroy(){var t;this.unbindEvents(),null===(t=this.shadow)||void 0===t||t.destroy(),super.destroy();}}J.defaultOptions={animation:!0,enable:t=>["node","combo"].includes(t.targetType),dropEffect:"move",state:"selected",hideEdge:"none",shadow:!1,shadowZIndex:100,shadowFill:"#F3F9FF",shadowFillOpacity:.5,shadowStroke:"#1890FF",shadowStrokeOpacity:.9,shadowLineDash:[5,5],cursor:{default:"default",grab:"grab",grabbing:"grabbing"}};var tt=n("4557e62d"),te=n("16ea0f92"),tn=this&&this.__awaiter||function(t,e,n,i){return new(n||(n=Promise))(function(r,a){function s(t){try{l(i.next(t));}catch(t){a(t);}}function o(t){try{l(i.throw(t));}catch(t){a(t);}}function l(t){var e;t.done?r(t.value):((e=t.value)instanceof n?e:new n(function(t){t(e);})).then(s,o);}l((i=i.apply(t,e||[])).next());});};class ti extends J{get forceLayoutInstance(){return this.context.layout.getLayoutInstance().find(t=>["d3-force","d3-force-3d"].includes(null==t?void 0:t.id));}validate(t){return!!this.context.layout&&(this.forceLayoutInstance?super.validate(t):(te.print.warn("DragElementForce only works with d3-force or d3-force-3d layout"),!1));}moveElement(t,e){return tn(this,void 0,void 0,function*(){let n=this.forceLayoutInstance;this.context.graph.getNodeData(t).forEach((i,r)=>{let{x:a=0,y:s=0}=i.style||{};n&&(0,tt.invokeLayoutMethod)(n,"setFixedPosition",t[r],[...(0,U.add)([+a,+s],e)]);});});}onDragStart(t){if(this.enable=this.validate(t),!this.enable)return;this.target=this.getSelectedNodeIDs([t.target.id]),this.hideEdge(),this.context.graph.frontElement(this.target);let e=this.forceLayoutInstance;e&&(0,tt.getLayoutProperty)(e,"simulation").alphaTarget(.3).restart(),this.context.graph.getNodeData(this.target).forEach(t=>{let{x:n=0,y:i=0}=t.style||{};e&&(0,tt.invokeLayoutMethod)(e,"setFixedPosition",(0,x.idOf)(t),[+n,+i]);});}onDrag(t){if(!this.enable)return;let e=this.getDelta(t);this.moveElement(this.target,e);}onDragEnd(){let t=this.forceLayoutInstance;t&&(0,tt.getLayoutProperty)(t,"simulation").alphaTarget(0),this.options.fixed||this.context.graph.getNodeData(this.target).forEach(e=>{t&&(0,tt.invokeLayoutMethod)(t,"setFixedPosition",(0,x.idOf)(e),[null,null,null]);});}}var tr=n("7a2084f1"),ta=i._(tr),ts=n("4c900b62"),to=i._(ts),tl=n("01355b81"),td=this&&this.__awaiter||function(t,e,n,i){return new(n||(n=Promise))(function(r,a){function s(t){try{l(i.next(t));}catch(t){a(t);}}function o(t){try{l(i.throw(t));}catch(t){a(t);}}function l(t){var e;t.done?r(t.value):((e=t.value)instanceof n?e:new n(function(t){t(e);})).then(s,o);}l((i=i.apply(t,e||[])).next());});};class tu extends y{constructor(t,e){super(t,Object.assign({},tu.defaultOptions,e)),this.isZoomEvent=t=>!!(t.data&&"scale"in t.data),this.relatedEdgeToUpdate=new Set,this.zoom=this.context.graph.getZoom(),this.fixElementSize=t=>td(this,void 0,void 0,function*(){if(!this.validate(t))return;let{graph:e}=this.context,{state:n,nodeFilter:i,edgeFilter:r,comboFilter:a}=this.options,s=(n?e.getElementDataByState("node",n):e.getNodeData()).filter(i),o=(n?e.getElementDataByState("edge",n):e.getEdgeData()).filter(r),l=(n?e.getElementDataByState("combo",n):e.getComboData()).filter(a),d=this.isZoomEvent(t)?this.zoom=Math.max(.01,Math.min(t.data.scale,10)):this.zoom,u=[...s,...l];u.length>0&&u.forEach(t=>this.fixNodeLike(t,d)),this.updateRelatedEdges(),o.length>0&&o.forEach(t=>this.fixEdge(t,d));}),this.cachedStyles=new Map,this.getOriginalFieldValue=(t,e,n)=>{var i;let r=this.cachedStyles.get(t)||[],a=(null===(i=r.find(t=>t.shape===e))||void 0===i?void 0:i.style)||{};return n in a||(a[n]=e.attributes[n],this.cachedStyles.set(t,[...r.filter(t=>t.shape!==e),{shape:e,style:a}])),a[n];},this.scaleEntireElement=(t,e,n)=>{e.setLocalScale(1/n);let i=this.cachedStyles.get(t)||[];i.push({shape:e}),this.cachedStyles.set(t,i);},this.scaleSpecificShapes=(t,e,n)=>{let i=(0,tl.getDescendantShapes)(t);(Array.isArray(n)?n:[n]).forEach(n=>{let{shape:r,fields:a}=n,s="function"==typeof r?r(i):t.getShape(r);if(s){if(!a){this.scaleEntireElement(t.id,s,e);return;}a.forEach(n=>{let i=this.getOriginalFieldValue(t.id,s,n);(0,to.default)(i)&&(s.style[n]=i/e);});}});},this.skipIfExceedViewport=t=>{let{viewport:e}=this.context;return!(null==e?void 0:e.isInViewport(t.getRenderBounds(),!1,30));},this.fixNodeLike=(t,e)=>{let n=(0,x.idOf)(t),{element:i,model:r}=this.context,a=i.getElement(n);if(!a||this.skipIfExceedViewport(a))return;r.getRelatedEdgesData(n).forEach(t=>this.relatedEdgeToUpdate.add((0,x.idOf)(t)));let s=this.options[a.type];if(!s){this.scaleEntireElement(n,a,e);return;}this.scaleSpecificShapes(a,e,s);},this.fixEdge=(t,e)=>{let n=(0,x.idOf)(t),i=this.context.element.getElement(n);if(!i||this.skipIfExceedViewport(i))return;let r=this.options.edge;if(!r){i.style.transformOrigin="center",this.scaleEntireElement(n,i,e);return;}this.scaleSpecificShapes(i,e,r);},this.updateRelatedEdges=()=>{let{element:t}=this.context;this.relatedEdgeToUpdate.size>0&&this.relatedEdgeToUpdate.forEach(e=>{let n=t.getElement(e);null==n||n.update({});}),this.relatedEdgeToUpdate.clear();},this.resetTransform=t=>td(this,void 0,void 0,function*(){var e;null!==(e=t.data)&&void 0!==e&&e.firstRender||(this.options.reset?this.restoreCachedStyles():this.fixElementSize({data:{scale:this.zoom}}));}),this.bindEvents();}restoreCachedStyles(){if(this.cachedStyles.size>0){this.cachedStyles.forEach(t=>{t.forEach(({shape:t,style:e})=>{if((0,ta.default)(e))t.setLocalScale(1);else{if(this.options.state)return;Object.entries(e).forEach(([e,n])=>t.style[e]=n);}});});let{graph:t,element:e}=this.context,n=Object.keys(Object.fromEntries(this.cachedStyles)).filter(e=>e&&"node"===t.getElementType(e));if(n.length>0){let i=new Set;n.forEach(e=>{t.getRelatedEdgesData(e).forEach(t=>i.add((0,x.idOf)(t)));}),i.forEach(t=>{let n=null==e?void 0:e.getElement(t);null==n||n.update({});});}}}bindEvents(){let{graph:t}=this.context;t.on(u.GraphEvent.AFTER_DRAW,this.resetTransform),t.on(u.GraphEvent.AFTER_TRANSFORM,this.fixElementSize);}unbindEvents(){let{graph:t}=this.context;t.off(u.GraphEvent.AFTER_DRAW,this.resetTransform),t.off(u.GraphEvent.AFTER_TRANSFORM,this.fixElementSize);}validate(t){if(this.destroyed)return!1;let{enable:e}=this.options;return(0,o.default)(e)?e(t):!!e;}destroy(){this.unbindEvents(),super.destroy();}}tu.defaultOptions={enable:t=>t.data.scale<1,nodeFilter:()=>!0,edgeFilter:()=>!0,comboFilter:()=>!0,edge:[{shape:"key",fields:["lineWidth"]},{shape:"halo",fields:["lineWidth"]},{shape:"label"}],reset:!1};var tc=this&&this.__awaiter||function(t,e,n,i){return new(n||(n=Promise))(function(r,a){function s(t){try{l(i.next(t));}catch(t){a(t);}}function o(t){try{l(i.throw(t));}catch(t){a(t);}}function l(t){var e;t.done?r(t.value):((e=t.value)instanceof n?e:new n(function(t){t(e);})).then(s,o);}l((i=i.apply(t,e||[])).next());});};class th extends y{constructor(t,e){super(t,Object.assign({},th.defaultOptions,e)),this.focus=t=>tc(this,void 0,void 0,function*(){if(!this.validate(t))return;let{graph:e}=this.context;yield e.focusElement(t.target.id,this.options.animation);}),this.bindEvents();}bindEvents(){let{graph:t}=this.context;this.unbindEvents(),C.ELEMENT_TYPES.forEach(e=>{t.on(`${e}:${u.CommonEvent.CLICK}`,this.focus);});}validate(t){if(this.destroyed)return!1;let{enable:e}=this.options;return(0,o.default)(e)?e(t):!!e;}unbindEvents(){let{graph:t}=this.context;C.ELEMENT_TYPES.forEach(e=>{t.off(`${e}:${u.CommonEvent.CLICK}`,this.focus);});}destroy(){this.unbindEvents(),super.destroy();}}th.defaultOptions={animation:{easing:"ease-in",duration:500},enable:!0};class tp extends y{constructor(t,e){super(t,Object.assign({},tp.defaultOptions,e)),this.isFrozen=!1,this.toggleFrozen=t=>{this.isFrozen="dragstart"===t.type;},this.hoverElement=t=>{if(!this.validate(t))return;let e=t.type===u.CommonEvent.POINTER_ENTER;this.updateElementsState(t,e);let{onHover:n,onHoverEnd:i}=this.options;e?null==n||n(t):null==i||i(t);},this.updateElementsState=(t,e)=>{if(!this.options.state&&!this.options.inactiveState)return;let{graph:n}=this.context,{state:i,animation:r,inactiveState:a}=this.options,s=this.getActiveIds(t),o={};if(i&&Object.assign(o,this.getElementsState(s,i,e)),a){let t=(0,x.idsOf)(n.getData(),!0).filter(t=>!s.includes(t));Object.assign(o,this.getElementsState(t,a,e));}n.setElementState(o,r);},this.getElementsState=(t,e,n)=>{let{graph:i}=this.context,r={};return t.forEach(t=>{let a=i.getElementState(t);n?r[t]=a.includes(e)?a:[...a,e]:r[t]=a.filter(t=>t!==e);}),r;},this.bindEvents();}bindEvents(){let{graph:t}=this.context;this.unbindEvents(),C.ELEMENT_TYPES.forEach(e=>{t.on(`${e}:${u.CommonEvent.POINTER_ENTER}`,this.hoverElement),t.on(`${e}:${u.CommonEvent.POINTER_LEAVE}`,this.hoverElement);});let e=this.context.canvas.document;e.addEventListener(`${u.CommonEvent.DRAG_START}`,this.toggleFrozen),e.addEventListener(`${u.CommonEvent.DRAG_END}`,this.toggleFrozen);}getActiveIds(t){let{graph:e}=this.context,{degree:n,direction:i}=this.options,r=t.target.id;return n?M(e,t.targetType,r,"function"==typeof n?n(t):n,i):[r];}validate(t){if(this.destroyed||this.isFrozen||(0,N.isToBeDestroyed)(t.target)||this.context.graph.isCollapsingExpanding)return!1;let{enable:e}=this.options;return(0,o.default)(e)?e(t):!!e;}unbindEvents(){let{graph:t}=this.context;C.ELEMENT_TYPES.forEach(e=>{t.off(`${e}:${u.CommonEvent.POINTER_ENTER}`,this.hoverElement),t.off(`${e}:${u.CommonEvent.POINTER_LEAVE}`,this.hoverElement);});let e=this.context.canvas.document;e.removeEventListener(`${u.CommonEvent.DRAG_START}`,this.toggleFrozen),e.removeEventListener(`${u.CommonEvent.DRAG_END}`,this.toggleFrozen);}destroy(){this.unbindEvents(),super.destroy();}}tp.defaultOptions={animation:!1,enable:!0,degree:0,direction:"both",state:"active",inactiveState:void 0};var tf=n("a741c567");class tg extends _{onPointerDown(t){if(!super.validate(t)||!super.isKeydown()||this.points)return;let{canvas:e}=this.context;this.pathShape=new b.Path({id:"g6-lasso-select",style:this.options.style}),e.appendChild(this.pathShape),this.points=[P(t)];}onPointerMove(t){var e;if(!this.points)return;let{immediately:n,mode:i}=this.options;this.points.push(P(t)),null===(e=this.pathShape)||void 0===e||e.setAttribute("d",(0,tf.pointsToPath)(this.points)),n&&"default"===i&&this.points.length>2&&super.updateElementsStates(this.points);}onPointerUp(){if(this.points){if(this.points.length<2){this.clearLasso();return;}super.updateElementsStates(this.points),this.clearLasso();}}clearLasso(){var t;null===(t=this.pathShape)||void 0===t||t.remove(),this.pathShape=void 0,this.points=void 0;}}class ty extends y{constructor(t,e){super(t,Object.assign({},ty.defaultOptions,e)),this.hiddenShapes=[],this.isVisible=!0,this.setElementsVisibility=(t,e,n)=>{t.filter(Boolean).forEach(t=>{"hidden"!==e||t.isVisible()?"visible"===e&&this.hiddenShapes.includes(t)?this.hiddenShapes.splice(this.hiddenShapes.indexOf(t),1):(0,f.setVisibility)(t,e,n):this.hiddenShapes.push(t);});},this.filterShapes=(t,e)=>{if((0,o.default)(e))return n=>!e(t,n);let n=null==e?void 0:e[t];return t=>!t.className||!(null==n?void 0:n.includes(t.className));},this.hideShapes=t=>{if(!this.validate(t)||!this.isVisible)return;let{element:e}=this.context,{shapes:n={}}=this.options;this.setElementsVisibility(e.getNodes(),"hidden",this.filterShapes("node",n)),this.setElementsVisibility(e.getEdges(),"hidden",this.filterShapes("edge",n)),this.setElementsVisibility(e.getCombos(),"hidden",this.filterShapes("combo",n)),this.isVisible=!1;},this.showShapes=(0,W.default)(t=>{if(!this.validate(t)||this.isVisible)return;let{element:e}=this.context;this.setElementsVisibility(e.getNodes(),"visible"),this.setElementsVisibility(e.getEdges(),"visible"),this.setElementsVisibility(e.getCombos(),"visible"),this.isVisible=!0;},this.options.debounce),this.bindEvents();}bindEvents(){let{graph:t}=this.context;t.on(u.GraphEvent.BEFORE_TRANSFORM,this.hideShapes),t.on(u.GraphEvent.AFTER_TRANSFORM,this.showShapes);}unbindEvents(){let{graph:t}=this.context;t.off(u.GraphEvent.BEFORE_TRANSFORM,this.hideShapes),t.off(u.GraphEvent.AFTER_TRANSFORM,this.showShapes);}validate(t){if(this.destroyed)return!1;let{enable:e}=this.options;return(0,o.default)(e)?e(t):!!e;}update(t){this.unbindEvents(),super.update(t),this.bindEvents();}destroy(){this.unbindEvents(),super.destroy();}}ty.defaultOptions={enable:!0,debounce:200,shapes:t=>"node"===t};var tm=this&&this.__awaiter||function(t,e,n,i){return new(n||(n=Promise))(function(r,a){function s(t){try{l(i.next(t));}catch(t){a(t);}}function o(t){try{l(i.throw(t));}catch(t){a(t);}}function l(t){var e;t.done?r(t.value):((e=t.value)instanceof n?e:new n(function(t){t(e);})).then(s,o);}l((i=i.apply(t,e||[])).next());});};class tb extends y{constructor(t,e){super(t,Object.assign({},tb.defaultOptions,e)),this.onWheel=t=>tm(this,void 0,void 0,function*(){this.options.preventDefault&&t.preventDefault();let e=t.deltaX,n=t.deltaY;yield this.scroll([-e,-n],t);}),this.shortcut=new S.Shortcut(t.graph),this.bindEvents();}update(t){super.update(t),this.bindEvents();}bindEvents(){var t,e;let{trigger:n}=this.options;if(this.shortcut.unbindAll(),(0,K.default)(n)){null===(t=this.graphDom)||void 0===t||t.removeEventListener(u.CommonEvent.WHEEL,this.onWheel);let{up:e=[],down:i=[],left:r=[],right:a=[]}=n;this.shortcut.bind(e,t=>this.scroll([0,-10],t)),this.shortcut.bind(i,t=>this.scroll([0,10],t)),this.shortcut.bind(r,t=>this.scroll([-10,0],t)),this.shortcut.bind(a,t=>this.scroll([10,0],t));}else null===(e=this.graphDom)||void 0===e||e.addEventListener(u.CommonEvent.WHEEL,this.onWheel,{passive:!1});}get graphDom(){return this.context.graph.getCanvas().getContextService().getDomElement();}formatDisplacement(t){let{sensitivity:e}=this.options;return t=(0,U.multiply)(t,e),t=this.clampByDirection(t),t=this.clampByRange(t);}clampByDirection([t,e]){let{direction:n}=this.options;return"x"===n?e=0:"y"===n&&(t=0),[t,e];}clampByRange([t,e]){let{viewport:n,canvas:i}=this.context,[r,a]=i.getSize(),[s,o,l,d]=(0,Y.parsePadding)(this.options.range),u=(0,c.getExpandedBBox)((0,c.getPointBBox)(n.getCanvasCenter()),[a*s,r*o,a*l,r*d]),h=(0,U.subtract)(n.getViewportCenter(),[t,e,0]);if(!(0,c.isPointInBBox)(h,u)){let{min:[n,i],max:[r,a]}=u;(h[0]<n&&t>0||h[0]>r&&t<0)&&(t=0),(h[1]<i&&e>0||h[1]>a&&e<0)&&(e=0);}return[t,e];}scroll(t,e){return tm(this,void 0,void 0,function*(){if(!this.validate(e))return;let{onFinish:n}=this.options,i=this.context.graph,r=this.formatDisplacement(t);yield i.translateBy(r,!1),null==n||n();});}validate(t){if(this.destroyed)return!1;let{enable:e}=this.options;return(0,o.default)(e)?e(t):!!e;}destroy(){var t;this.shortcut.destroy(),null===(t=this.graphDom)||void 0===t||t.removeEventListener(u.CommonEvent.WHEEL,this.onWheel),super.destroy();}}tb.defaultOptions={enable:!0,sensitivity:1,preventDefault:!0,range:1/0};var tv=n("b7e3e58a"),tE=i._(tv),tx=this&&this.__awaiter||function(t,e,n,i){return new(n||(n=Promise))(function(r,a){function s(t){try{l(i.next(t));}catch(t){a(t);}}function o(t){try{l(i.throw(t));}catch(t){a(t);}}function l(t){var e;t.done?r(t.value):((e=t.value)instanceof n?e:new n(function(t){t(e);})).then(s,o);}l((i=i.apply(t,e||[])).next());});};class tO extends y{constructor(t,e){super(t,Object.assign({},tO.defaultOptions,e)),this.zoom=(t,e,n)=>tx(this,void 0,void 0,function*(){let i;if(!this.validate(e))return;let{graph:r}=this.context;"viewport"in e&&(i=(0,O.parsePoint)(e.viewport));let{sensitivity:a,onFinish:s}=this.options,o=1+(0,tE.default)(t,-50,50)*a/100,l=r.getZoom();yield r.zoomTo(l*o,n,i),null==s||s();}),this.onReset=()=>tx(this,void 0,void 0,function*(){yield this.context.graph.zoomTo(1,this.options.animation);}),this.preventDefault=t=>{this.options.preventDefault&&t.preventDefault();},this.shortcut=new S.Shortcut(t.graph),this.bindEvents();}update(t){super.update(t),this.bindEvents();}bindEvents(){let{trigger:t}=this.options;if(this.shortcut.unbindAll(),Array.isArray(t)){if(t.includes(u.CommonEvent.PINCH))this.shortcut.bind([u.CommonEvent.PINCH],t=>{this.zoom(t.scale,t,!1);});else{let e=this.context.canvas.getContainer();null==e||e.addEventListener(u.CommonEvent.WHEEL,this.preventDefault),this.shortcut.bind([...t,u.CommonEvent.WHEEL],t=>{let{deltaX:e,deltaY:n}=t;this.zoom(-(null!=n?n:e),t,!1);});}}if("object"==typeof t){let{zoomIn:e=[],zoomOut:n=[],reset:i=[]}=t;this.shortcut.bind(e,t=>this.zoom(10,t,this.options.animation)),this.shortcut.bind(n,t=>this.zoom(-10,t,this.options.animation)),this.shortcut.bind(i,this.onReset);}}validate(t){if(this.destroyed)return!1;let{enable:e}=this.options;return(0,o.default)(e)?e(t):!!e;}destroy(){var t;this.shortcut.destroy(),null===(t=this.context.canvas.getContainer())||void 0===t||t.removeEventListener(u.CommonEvent.WHEEL,this.preventDefault),super.destroy();}}tO.defaultOptions={animation:{duration:200},enable:!0,sensitivity:1,trigger:[],preventDefault:!0};},"50674fdc":function(t,e,n){"use strict";n.d(e,"__esModule",{value:!0}),e.startsWith=r,e.addPrefix=a,e.removePrefix=s,e.subStyleProps=function(t,e){let n=Object.entries(t).reduce((t,[n,i])=>("className"===n||"class"===n||r(n,e)&&Object.assign(t,{[s(n,e)]:i}),t),{});if("opacity"in t){let i=a("opacity",e),r=t.opacity;i in t?Object.assign(n,{opacity:r*t[i]}):Object.assign(n,{opacity:r});}return n;},e.subObject=function(t,e){let n=e.length;return Object.keys(t).reduce((i,r)=>(r.startsWith(e)&&(i[r.slice(n)]=t[r]),i),{});},e.omitStyleProps=function(t,e){let n="string"==typeof e?[e]:e,i={};return Object.keys(t).forEach(e=>{n.find(t=>e.startsWith(t))||(i[e]=t[e]);}),i;},e.replacePrefix=function(t,e,n){return Object.entries(t).reduce((t,[i,o])=>(r(i,e)?t[a(s(i,e,!1),n)]=o:t[i]=o,t),{});};let i=n("5a6910cd");function r(t,e){if(!t.startsWith(e))return!1;let n=t[e.length];return n>="A"&&n<="Z";}function a(t,e){return`${e}${(0,i.upperFirst)(t)}`;}function s(t,e,n=!0){if(!e||!r(t,e))return t;let a=t.slice(e.length);return n?(0,i.lowerFirst)(a):a;}},"50905a3a":function(t,e,n){"use strict";function i(t=0){if(Array.isArray(t)){let[e=0,n=e,i=e,r=n]=t;return[e,n,i,r];}return[t,t,t,t];}function r(t=0){let e=i(t);return e[0]+e[2];}n.d(e,"__esModule",{value:!0}),n.e(e,{getVerticalPadding:function(){return r;},parsePadding:function(){return i;}});},"50c39bee":function(t,e,n){"use strict";n.d(e,"__esModule",{value:!0}),n.e(e,{isStyleEqual:function(){return a;},reassignTo:function(){return r;}});var i=n("8a2f2f0b");function r(t,e,n,r,a){let s=(0,i.idOf)(r),o=`${n}s`,l=a?r:t.add[o].get(s)||t.update[o].get(s)||t.remove[o].get(s)||r;Object.entries(t).forEach(([t,n])=>{e===t?n[o].set(s,l):n[o].delete(s);});}function a(t,e){return Object.keys(t).every(n=>t[n]===e[n]);}},"51b633a8":function(t,e,n){"use strict";function i(t,e,n){let i=[[t,0]];for(;i.length;){let[t,r]=i.shift();e(t,r);let a=n(t);if(a)for(let t of a)i.push([t,r+1]);}}n.d(e,"__esModule",{value:!0}),n.e(e,{bfs:function(){return i;},dfs:function(){return function t(e,n,i,r,a=0){"TB"===r&&n(e,a);let s=i(e);if(s)for(let e of s)t(e,n,i,r,a+1);"BT"===r&&n(e,a);};}});},"52f60d29":function(t,e,n){"use strict";n.d(e,"__esModule",{value:!0});var i=n("d1751d7c");i._(n("ee303ea5"),e),i._(n("8691a1cd"),e),i._(n("91a7def3"),e);},"53971a1d":function(t,e,n){"use strict";var i=this&&this.__rest||function(t,e){var n={};for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&0>e.indexOf(i)&&(n[i]=t[i]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols)for(var r=0,i=Object.getOwnPropertySymbols(t);r<i.length;r++)0>e.indexOf(i[r])&&Object.prototype.propertyIsEnumerable.call(t,i[r])&&(n[i[r]]=t[i[r]]);return n;};Object.defineProperty(e,"__esModule",{value:!0}),e.Contour=void 0;let r=n("6824c090"),a=n("b0aee266"),s=n("50674fdc"),o=n("76595ff2"),l=n("c135b32a"),d=n("565fda94"),u=n("3df2bd54");class c extends d.BaseShape{constructor(t){super((0,o.mergeOptions)({style:c.defaultStyleProps},t));}getLabelStyle(t){if(!t.label||!t.d||0===t.d.length)return!1;let e=(0,s.subStyleProps)(this.getGraphicStyle(t),"label"),{maxWidth:n,offsetX:r,offsetY:o,autoRotate:d,placement:u,closeToPath:c}=e,h=i(e,["maxWidth","offsetX","offsetY","autoRotate","placement","closeToPath"]),p=this.shapeMap.key,f=null==p?void 0:p.getRenderBounds();return Object.assign((0,a.getPolygonTextStyleByPlacement)(f,u,r,o,c,t.d,d),{wordWrapWidth:(0,l.getWordWrapWidthByBox)(f,n)},h);}getKeyStyle(t){return this.getGraphicStyle(t);}render(t,e){this.upsert("key",r.Path,this.getKeyStyle(t),e),this.upsert("label",u.Label,this.getLabelStyle(t),e);}}e.Contour=c,c.defaultStyleProps={label:!0,labelPlacement:"bottom",labelCloseToPath:!0,labelAutoRotate:!0,labelOffsetX:0,labelOffsetY:0};},"54524b09":function(t,e,n){"use strict";n.d(e,"__esModule",{value:!0}),e.getClosedSpline=void 0,e.pointsToPath=function(t,e=!0){let n=[];return t.forEach((t,e)=>{n.push([0===e?"M":"L",...t]);}),e&&n.push(["Z"]),n;},e.parsePath=r,e.pathToPoints=function(t){let e=[];return("string"==typeof t?r(t):t).forEach(t=>{let n=t[0];if("Z"===n){e.push(e[0]);return;}if("A"!==n)for(let n=1;n<t.length;n+=2)e.push([t[n],t[n+1],0]);else{let n=t.length;e.push([t[n-2],t[n-1],0]);}}),e;};let i={M:["x","y"],m:["dx","dy"],H:["x"],h:["dx"],V:["y"],v:["dy"],L:["x","y"],l:["dx","dy"],Z:[],z:[],C:["x1","y1","x2","y2","x","y"],c:["dx1","dy1","dx2","dy2","dx","dy"],S:["x2","y2","x","y"],s:["dx2","dy2","dx","dy"],Q:["x1","y1","x","y"],q:["dx1","dy1","dx","dy"],T:["x","y"],t:["dx","dy"],A:["rx","ry","rotation","large-arc","sweep","x","y"],a:["rx","ry","rotation","large-arc","sweep","dx","dy"]};function r(t){let e=t.replace(/[\n\r]/g,"").replace(/-/g," -").replace(/(\d*\.)(\d+)(?=\.)/g,"$1$2 ").trim().split(/\s*,|\s+/),n=[],r="",a={};for(;e.length>0;){let t=e.shift();t in i?r=t:e.unshift(t),a={type:r},i[r].forEach(n=>{t=e.shift(),a[n]=t;}),"M"===r?r="L":"m"===r&&(r="l");let[s,...o]=Object.values(a);n.push([s,...o.map(Number)]);}return n;}e.getClosedSpline=t=>{if(t.length<2)return[["M",0,0],["L",0,0]];let e=t[0],n=t[1],i=t[t.length-1],r=t[t.length-2];t.unshift(r,i),t.push(e,n);let a=[["M",i[0],i[1]]];for(let e=1;e<t.length-2;e+=1){let[n,i]=t[e-1],[r,s]=t[e],[o,l]=t[e+1],[d,u]=e!==t.length-2?t[e+2]:[o,l],c=r+(o-n)/6,h=s+(l-i)/6,p=o-(d-r)/6,f=l-(u-s)/6;a.push(["C",c,h,p,f,o,l]);}return a;};},56418176:function(t,e,n){"use strict";n.d(e,"__esModule",{value:!0}),e.BaseElement=void 0;let i=n("2329b631");class r extends i.BaseShape{get context(){return this.config.context;}get parsedAttributes(){return this.attributes;}onframe(){}animate(t,e){let n=super.animate(t,e);return n&&(n.onframe=()=>this.onframe(),n.finished.then(()=>this.onframe())),n;}}e.BaseElement=r;},"565fda94":function(t,e,n){"use strict";n.d(e,"__esModule",{value:!0}),e.BaseShape=void 0;let i=n("6824c090"),r=n("5a6910cd"),a=n("d0a8fc0a"),s=n("b7985b6d"),o=n("734c52ec"),l=n("50674fdc"),d=n("22189803"),u=n("76595ff2"),c=n("b8a5bc3c"),h=n("0049dcfa"),p=n("b83e3ebb");class f extends i.CustomElement{constructor(t){y(t.style),super(t),this.shapeMap={},this.animateMap={},this.render(this.attributes,this),this.setVisibility(),this.bindEvents();}get parsedAttributes(){return this.attributes;}upsert(t,e,n,i,r){var s,l,u,c,h,f,g,y;let m=this.shapeMap[t];if(!1===n){m&&(null===(s=null==r?void 0:r.beforeDestroy)||void 0===s||s.call(r,m),i.removeChild(m),delete this.shapeMap[t],null===(l=null==r?void 0:r.afterDestroy)||void 0===l||l.call(r,m));return;}let b="string"==typeof e?(0,p.getExtension)(a.ExtensionCategory.SHAPE,e):e;if(!b)throw Error((0,d.format)(`Shape ${e} not found`));if(!m||m.destroyed||!(m instanceof b)){m&&(null===(u=null==r?void 0:r.beforeDestroy)||void 0===u||u.call(r,m),null==m||m.destroy(),null===(c=null==r?void 0:r.afterDestroy)||void 0===c||c.call(r,m)),null===(h=null==r?void 0:r.beforeCreate)||void 0===h||h.call(r);let e=new b({className:t,style:n});return i.appendChild(e),this.shapeMap[t]=e,null===(f=null==r?void 0:r.afterCreate)||void 0===f||f.call(r,e),e;}return null===(g=null==r?void 0:r.beforeUpdate)||void 0===g||g.call(r,m),(0,o.updateStyle)(m,n),null===(y=null==r?void 0:r.afterUpdate)||void 0===y||y.call(r,m),m;}update(t={}){let e=Object.assign({},this.attributes,t);y(e),(0,o.setAttributes)(this,e),this.render(e,this),this.setVisibility();}bindEvents(){}getGraphicStyle(t){return(0,u.getSubShapeStyle)(t);}get compositeShapes(){return[["badges","badge-"],["ports","port-"]];}animate(t,e){if(0===t.length)return null;let n=[];if(void 0!==t[0].x||void 0!==t[0].y||void 0!==t[0].z){let{x:e=0,y:n=0,z:i=0}=this.attributes;t.forEach(t=>{let{x:r=e,y:a=n,z:s=i}=t;Object.assign(t,{transform:s?[["translate3d",r,a,s]]:[["translate",r,a]]});});}let i=super.animate(t,e);if(i&&(g(this,i),n.push(i)),Array.isArray(t)&&t.length>0){let i=["transform","transformOrigin","x","y","z","zIndex"];if(Object.keys(t[0]).some(t=>!i.includes(t))){Object.entries(this.shapeMap).forEach(([i,a])=>{let o=this[`get${(0,r.upperFirst)(i)}Style`];if((0,r.isFunction)(o)){let i=t.map(t=>o.call(this,Object.assign(Object.assign({},this.attributes),t))),r=a.animate((0,s.preprocessKeyframes)(i),e);r&&(g(a,r),n.push(r));}});let i=(i,a)=>{if(!(0,r.isEmpty)(i)){let o=this[`get${(0,r.upperFirst)(a)}Style`];if((0,r.isFunction)(o)){let r=t.map(t=>o.call(this,Object.assign(Object.assign({},this.attributes),t)));Object.entries(r[0]).map(([t])=>{let a=r.map(e=>e[t]),o=i[t];if(o){let t=o.animate((0,s.preprocessKeyframes)(a),e);t&&(g(o,t),n.push(t));}});}}};this.compositeShapes.forEach(([t,e])=>{i((0,l.subObject)(this.shapeMap,e),t);});}}return(0,s.createAnimationsProxy)(n);}getShape(t){return this.shapeMap[t];}setVisibility(){let{visibility:t}=this.attributes;(0,h.setVisibility)(this,t);}destroy(){this.shapeMap={},this.animateMap={},super.destroy();}}function g(t,e){null==e||e.finished.then(()=>{let n=t.activeAnimations.findIndex(t=>t===e);n>-1&&t.activeAnimations.splice(n,1);});}function y(t){if(!t)return{};if("x"in t||"y"in t||"z"in t){let{x:e=0,y:n=0,z:i,transform:r}=t,a=(0,c.replaceTranslateInTransform)(e,n,i,r);a&&(t.transform=a);}return t;}e.BaseShape=f;},"56a67307":function(t,e,n){"use strict";n.d(e,"__esModule",{value:!0}),n.d(e,"BaseCombo",{enumerable:!0,get:function(){return b;}});var i=n("777fffbe"),r=n("a0f386cf"),a=i._(n("7e708962")),s=n("bf55e093"),o=n("8a2f2f0b"),l=n("50905a3a"),d=n("2be3380d"),u=n("21954d01"),c=n("4c372554"),h=n("1165dca0"),p=n("6d5a1ab5"),f=n("91a7def3"),g=n("94ae1aef"),y=n("9a8606f2"),m=this&&this.__rest||function(t,e){var n={};for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&0>e.indexOf(i)&&(n[i]=t[i]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols)for(var r=0,i=Object.getOwnPropertySymbols(t);r<i.length;r++)0>e.indexOf(i[r])&&Object.prototype.propertyIsEnumerable.call(t,i[r])&&(n[i[r]]=t[i[r]]);return n;};class b extends f.BaseNode{constructor(t){super((0,h.mergeOptions)({style:b.defaultStyleProps},t)),this.type="combo",this.updateComboPosition(this.parsedAttributes);}getKeySize(t){let{collapsed:e,childrenNode:n=[]}=t;return 0===n.length?this.getEmptyKeySize(t):e?this.getCollapsedKeySize(t):this.getExpandedKeySize(t);}getEmptyKeySize(t){let{padding:e,collapsedSize:n}=t,[i,r,a,s]=(0,l.parsePadding)(e);return(0,p.add)((0,c.parseSize)(n),[s+r,i+a,0]);}getCollapsedKeySize(t){return(0,c.parseSize)(t.collapsedSize);}getExpandedKeySize(t){let e=this.getContentBBox(t);return[(0,s.getBBoxWidth)(e),(0,s.getBBoxHeight)(e),0];}getContentBBox(t){let{childrenNode:e=[],padding:n}=t,i=e.map(t=>this.context.element.getElement(t)).filter(Boolean);if(0===i.length){let e=new r.AABB,{x:n=0,y:i=0,size:a}=t,[s,o]=(0,c.parseSize)(a);return e.setMinMax([n-s/2,i-o/2,0],[n+s/2,i+o/2,0]),e;}let a=(0,s.getCombinedBBox)(i.map(t=>t.getBounds()));return n?(0,s.getExpandedBBox)(a,n):a;}drawCollapsedMarkerShape(t,e){let n=this.getCollapsedMarkerStyle(t);this.upsert("collapsed-marker",g.Icon,n,e),(0,y.connectImage)(this);}getCollapsedMarkerStyle(t){if(!t.collapsed||!t.collapsedMarker)return!1;let e=(0,u.subStyleProps)(this.getGraphicStyle(t),"collapsedMarker"),{type:n}=e,i=m(e,["type"]),r=this.getShape("key"),[a,s]=(0,d.getXYByPlacement)(r.getLocalBounds(),"center"),o=Object.assign(Object.assign({},i),{x:a,y:s});return n&&Object.assign(o,{text:this.getCollapsedMarkerText(n,t)}),o;}getCollapsedMarkerText(t,e){let{childrenData:n=[]}=e,{model:i}=this.context;return"descendant-count"===t?i.getDescendantsData(this.id).length.toString():"child-count"===t?n.length.toString():"node-count"===t?i.getDescendantsData(this.id).filter(t=>"node"===i.getElementType((0,o.idOf)(t))).length.toString():(0,a.default)(t)?t(n):"";}getComboPosition(t){let{x:e=0,y:n=0,collapsed:i,childrenData:r=[]}=t;if(0===r.length)return[+e,+n,0];if(i){let{model:t}=this.context,i=t.getDescendantsData(this.id).filter(e=>!t.isCombo((0,o.idOf)(e)));if(i.length>0&&i.some(d.hasPosition)){let t=i.reduce((t,e)=>(0,p.add)(t,(0,d.positionOf)(e)),[0,0,0]);return(0,p.divide)(t,i.length);}return[+e,+n,0];}return this.getContentBBox(t).center;}getComboStyle(t){let[e,n]=this.getComboPosition(t);return{x:e,y:n,transform:[["translate",e,n]]};}updateComboPosition(t){let e=this.getComboStyle(t);Object.assign(this.style,e);let{x:n,y:i}=e;this.context.model.syncNodeLikeDatum({id:this.id,style:{x:n,y:i}}),(0,y.dispatchPositionChange)(this);}render(t,e=this){super.render(t,e),this.drawCollapsedMarkerShape(t,e);}update(t={}){super.update(t),this.updateComboPosition(this.parsedAttributes);}onframe(){super.onframe(),this.attributes.collapsed||this.updateComboPosition(this.parsedAttributes),this.drawKeyShape(this.parsedAttributes,this);}animate(t,e){let n=super.animate(this.attributes.collapsed?t:t.map(t=>{var{x:e,y:n,z:i,transform:r}=t;return m(t,["x","y","z","transform"]);}),e);return n?new Proxy(n,{set:(t,e,n)=>("currentTime"===e&&Promise.resolve().then(()=>this.onframe()),Reflect.set(t,e,n))}):n;}}b.defaultStyleProps={childrenNode:[],droppable:!0,draggable:!0,collapsed:!1,collapsedSize:32,collapsedMarker:!0,collapsedMarkerZIndex:1,collapsedMarkerFontSize:12,collapsedMarkerTextAlign:"center",collapsedMarkerTextBaseline:"middle",collapsedMarkerType:"child-count"};},"56ca1d0f":function(t,e,n){"use strict";n.d(e,"__esModule",{value:!0}),n.d(e,"Diamond",{enumerable:!0,get:function(){return a;}});var i=n("19365c34"),r=n("c24cd24c");class a extends r.Polygon{constructor(t){super(t);}getPoints(t){let[e,n]=this.getSize(t);return(0,i.getDiamondPoints)(e,n);}}},"5776b96d":function(t,e,n){"use strict";n.d(e,"__esModule",{value:!0}),n.d(e,"PlaceRadialLabels",{enumerable:!0,get:function(){return d;}});var i=n("a0f386cf"),r=n("8a2f2f0b"),a=n("2be3380d"),s=n("4c372554"),o=n("6d5a1ab5"),l=n("a7082564");class d extends l.BaseTransform{constructor(t,e){super(t,Object.assign({},d.defaultOptions,e));}get ref(){return this.context.model.getRootsData()[0];}afterLayout(){var t;let e=(0,a.positionOf)(this.ref),{graph:n,model:l}=this.context;null===(t=l.getData().nodes)||void 0===t||t.forEach(t=>{var d;if((0,r.idOf)(t)===(0,r.idOf)(this.ref))return;let u=(0,o.rad)((0,o.subtract)((0,a.positionOf)(t),e)),c=Math.abs(u)>Math.PI/2,h=!t.children||0===t.children.length,p=(0,r.idOf)(t),f=null===(d=this.context.element)||void 0===d?void 0:d.getElement(p);if(!f||!f.isVisible())return;let g=(h?1:-1)*((0,s.parseSize)(n.getElementRenderStyle(p).size)[0]/2+this.options.offset),y=[["translate",g*Math.cos(u),g*Math.sin(u)],["rotate",c?(0,i.rad2deg)(u)+180:(0,i.rad2deg)(u)]];l.updateNodeData([{id:(0,r.idOf)(t),style:{labelTextAlign:c===h?"right":"left",labelTextBaseline:"middle",labelTransform:y}}]);}),n.draw();}}d.defaultOptions={offset:5};},"5a60cfec":function(t,e,n){"use strict";n.d(e,"__esModule",{value:!0}),n.d(e,"getPolygonTextStyleByPlacement",{enumerable:!0,get:function(){return o;}});var i=n("777fffbe")._(n("e602108f")),r=n("a741c567"),a=n("e492a2d3"),s=n("2be3380d");function o(t,e,n,o,l,d,u){let[c,h]=(0,s.getXYByPlacement)(t,e),p={textAlign:"left"===e?"right":"right"===e?"left":"center",textBaseline:"top"===e?"bottom":"bottom"===e?"top":"middle",transform:[["translate",c+n,h+o]]};if("center"===e||!l)return p;let f=(0,r.pathToPoints)(d);if(!f||f.length<=3)return p;let g=f.map((t,e)=>{let n=f[(e+1)%f.length];return(0,i.default)(t,n)?null:[t,n];}).filter(Boolean),y=(0,a.findNearestLine)([c,h],g),m=(0,a.findNearestPointOnLine)([c,h],y);if(m&&y&&(p.transform=[["translate",m[0]+n,m[1]+o]],u)){let t=Math.atan((y[0][1]-y[1][1])/(y[0][0]-y[1][0]));p.transform.push(["rotate",t/Math.PI*180]),p.textAlign="center",("right"===e||"left"===e)&&(t>0?p.textBaseline="right"===e?"bottom":"top":p.textBaseline="right"===e?"top":"bottom");}return p;}},"5df5c1a7":function(t,e,n){"use strict";n.d(e,"__esModule",{value:!0}),n.d(e,"Icon",{enumerable:!0,get:function(){return s;}});var i=n("a0f386cf"),r=n("20ac0f24"),a=n("9a8606f2");class s extends r.BaseShape{constructor(t){super(t);}isImage(){let{src:t}=this.attributes;return!!t;}getIconStyle(t=this.attributes){let{width:e=0,height:n=0}=t,i=this.getGraphicStyle(t);return this.isImage()?Object.assign({x:-e/2,y:-n/2},i):Object.assign({textBaseline:"middle",textAlign:"center"},i);}render(t=this.attributes,e=this){this.upsert("icon",this.isImage()?a.Image:i.Text,this.getIconStyle(t),e);}}},"6219eb03":function(t,e,n){new WeakMap;},"6220e010":function(t,e,n){"use strict";n.d(e,"__esModule",{value:!0}),n.d(e,"Label",{enumerable:!0,get:function(){return d;}});var i=n("a0f386cf"),r=n("50905a3a"),a=n("21954d01"),s=n("1165dca0"),o=n("20ac0f24"),l=this&&this.__rest||function(t,e){var n={};for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&0>e.indexOf(i)&&(n[i]=t[i]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols)for(var r=0,i=Object.getOwnPropertySymbols(t);r<i.length;r++)0>e.indexOf(i[r])&&Object.prototype.propertyIsEnumerable.call(t,i[r])&&(n[i[r]]=t[i[r]]);return n;};class d extends o.BaseShape{constructor(t){super((0,s.mergeOptions)({style:d.defaultStyleProps},t));}isTextStyle(t){return(0,a.startsWith)(t,"label");}isBackgroundStyle(t){return(0,a.startsWith)(t,"background");}getTextStyle(t){let e=this.getGraphicStyle(t),{padding:n}=e,i=l(e,["padding"]);return(0,a.omitStyleProps)(i,"background");}getBackgroundStyle(t){if(!1===t.background)return!1;let e=this.getGraphicStyle(t),{wordWrap:n,wordWrapWidth:i,padding:s}=e,o=(0,a.subStyleProps)(e,"background"),{min:[l,d],center:[u,c],halfExtents:[h,p]}=this.shapeMap.text.getGeometryBounds(),[f,g,y,m]=(0,r.parsePadding)(s),b=2*h+m+g,{width:v,height:E}=o;v&&E?Object.assign(o,{x:u-Number(v)/2,y:c-Number(E)/2}):Object.assign(o,{x:l-m,y:d-f,width:n?Math.min(b,i+m+g):b,height:2*p+f+y});let{radius:x}=o;if("string"==typeof x&&x.endsWith("%")){let t=Number(x.replace("%",""))/100;o.radius=Math.min(+o.width,+o.height)*t;}return o;}render(t=this.parsedAttributes,e=this){this.upsert("text",i.Text,this.getTextStyle(t),e),this.upsert("background",i.Rect,this.getBackgroundStyle(t),e);}getGeometryBounds(){return(this.getShape("background")||this.getShape("text")).getGeometryBounds();}}d.defaultStyleProps={padding:0,fontSize:12,fontFamily:"system-ui, sans-serif",wordWrap:!0,maxLines:1,wordWrapWidth:128,textOverflow:"...",textBaseline:"middle",backgroundOpacity:.75,backgroundZIndex:-1,backgroundLineWidth:0};},"66244d96":function(t,e,n){"use strict";n.d(e,"__esModule",{value:!0}),n.d(e,"Circle",{enumerable:!0,get:function(){return l;}});var i=n("a0f386cf"),r=n("6ed5e4e8"),a=n("e492a2d3"),s=n("1165dca0"),o=n("eeff6888");class l extends o.BaseNode{constructor(t){super((0,s.mergeOptions)({style:l.defaultStyleProps},t));}drawKeyShape(t,e){return this.upsert("key",i.Circle,this.getKeyStyle(t),e);}getKeyStyle(t){return Object.assign(Object.assign({},super.getKeyStyle(t)),{r:Math.min(...this.getSize(t))/2});}getIconStyle(t){let e=super.getIconStyle(t),{r:n}=this.getShape("key").attributes,i=2*n*r.ICON_SIZE_RATIO;return!!e&&Object.assign({width:i,height:i},e);}getIntersectPoint(t,e=!1){let n=this.getShape("key").getBounds();return(0,a.getEllipseIntersectPoint)(t,n,e);}}l.defaultStyleProps={size:32};},"66a6d83a":function(t,e,n){"use strict";n.d(e,"__esModule",{value:!0}),e.SortedArray=void 0,e.estimateCost=p,e.getNearestPoint=f,e.aStarSearch=function(t,e,n,i){let r;let a=(0,s.toVector2)(t.getCenter()),u=(0,s.toVector2)(e.getCenter()),f=Object.assign(o,i),{gridSize:b}=f,v=h(f.enableObstacleAvoidance?n:[t,e],f),E=d(a,b),x=d(u,b),O=g(a,t,f.startDirections,f),S=g(u,e,f.endDirections,f);O.forEach(t=>delete v[l(t)]),S.forEach(t=>delete v[l(t)]);let _={},P={},C={},w={},M={},A=new m;for(let t=0;t<O.length;t++){let e=O[t],n=l(e);_[n]=e,w[n]=0,M[n]=p(e,S,f.distFunc),A.add({id:n,value:M[n]});}let T=S.map(t=>l(t)),B=f.maximumLoops,D=1/0;for(let[t,e]of Object.entries(_))M[t]<=D&&(D=M[t],r=e);for(;Object.keys(_).length>0&&B>0;){let t=A.minId(!1);if(t)r=_[t];else break;let e=l(r);if(T.includes(e))return y(r,C,E,u,O,x,b);for(let t of(delete _[e],A.remove(e),P[e]=!0,Object.values(f.directionMap))){let n=(0,s.add)(r,[t.stepX,t.stepY]),i=l(n);if(P[i])continue;let a=c(r,n,C,E);if(a>f.maxAllowedDirectionChange||v[i])continue;_[i]||(_[i]=n);let o=f.penalties[a],d=f.distFunc(r,n)+(isNaN(o)?b:o),u=w[e]+d,h=w[i];h&&u>=h||(C[i]=r,w[i]=u,M[i]=u+p(n,S,f.distFunc),A.add({id:i,value:M[i]}));}B-=1;}return[];};let i=n("5a6910cd"),r=n("b51680dc"),a=n("bfe0f394"),s=n("41446765"),o={enableObstacleAvoidance:!1,offset:10,maxAllowedDirectionChange:Math.PI/2,maximumLoops:3e3,gridSize:5,startDirections:["top","right","bottom","left"],endDirections:["top","right","bottom","left"],directionMap:{right:{stepX:1,stepY:0},left:{stepX:-1,stepY:0},bottom:{stepX:0,stepY:1},top:{stepX:0,stepY:-1}},penalties:{0:0,90:0},distFunc:s.manhattanDistance},l=t=>`${Math.round(t[0])}|||${Math.round(t[1])}`;function d(t,e){let n=t=>Math.round(t/e);return(0,i.isNumber)(t)?n(t):t.map(n);}function u(t,e){let n=e[0]-t[0],i=e[1]-t[1];return n||i?Math.atan2(i,n):0;}function c(t,e,n,i){let r=u(t,e);return function(t,e){let n=Math.abs(t-e);return n>Math.PI?2*Math.PI-n:n;}(u(n[l(t)]||i,t),r);}let h=(t,e)=>{let{offset:n,gridSize:i}=e,a={};return t.forEach(t=>{if(!t||t.destroyed||!t.isVisible())return;let e=(0,r.getExpandedBBox)(t.getRenderBounds(),n);for(let t=d(e.min[0],i);t<=d(e.max[0],i);t+=1)for(let n=d(e.min[1],i);n<=d(e.max[1],i);n+=1)a[`${t}|||${n}`]=!0;}),a;};function p(t,e,n){return Math.min(...e.map(e=>n(t,e)));}function f(t,e,n){let i=t[0],r=n(t[0],e);for(let a=0;a<t.length;a++){let s=t[a],o=n(s,e);o<r&&(i=s,r=o);}return i;}let g=(t,e,n,i)=>{if(!e)return[t];let{directionMap:s,offset:o}=i,l=(0,r.getExpandedBBox)(e.getRenderBounds(),o),u=Object.keys(s).reduce((e,i)=>{if(n.includes(i)){let n=s[i],[o,d]=(0,r.getBBoxSize)(l),u=[t[0]+n.stepX*o,t[1]+n.stepY*d],c=(0,r.getBBoxSegments)(l);for(let n=0;n<c.length;n++){let i=(0,a.getLinesIntersection)([t,u],c[n]);i&&(0,r.isPointOnBBoxBoundary)(i,l)&&e.push(i);}}return e;},[]);return(0,r.isPointInBBox)(t,l)||u.push(t),u.map(t=>d(t,i.gridSize));},y=(t,e,n,i,r,a,o)=>{let d=[],u=[a[0]===i[0]?i[0]:t[0]*o,a[1]===i[1]?i[1]:t[1]*o];d.unshift(u);let h=t,p=e[l(h)];for(;p;){let t=p,i=h;c(t,i,e,n)&&(u=[t[0]===i[0]?u[0]:t[0]*o,t[1]===i[1]?u[1]:t[1]*o],d.unshift(u)),p=e[l(t)],h=t;}let g=f(r.map(t=>[t[0]*o,t[1]*o]),u,s.manhattanDistance);return d.unshift(g),d;};class m{constructor(){this.arr=[],this.map={},this.arr=[],this.map={};}_innerAdd(t,e){let n=0,i=e-1;for(;i-n>1;){let e=Math.floor((n+i)/2);if(this.arr[e].value>t.value)i=e;else if(this.arr[e].value<t.value)n=e;else{this.arr.splice(e,0,t),this.map[t.id]=!0;return;}}this.arr.splice(i,0,t),this.map[t.id]=!0;}add(t){delete this.map[t.id];let e=this.arr.length;if(!e||this.arr[e-1].value<t.value){this.arr.push(t),this.map[t.id]=!0;return;}this._innerAdd(t,e);}remove(t){this.map[t]&&delete this.map[t];}_clearAndGetMinId(){let t;for(let e=this.arr.length-1;e>=0;e--)this.map[this.arr[e].id]?t=this.arr[e].id:this.arr.splice(e,1);return t;}_findFirstId(){for(;this.arr.length;){let t=this.arr.shift();if(this.map[t.id])return t.id;}}minId(t){return t?this._clearAndGetMinId():this._findFirstId();}}e.SortedArray=m;},"67578fc2":function(t,e,n){"use strict";n.d(e,"__esModule",{value:!0}),e.Quadratic=e.Polyline=e.Line=e.CubicVertical=e.CubicRadial=e.CubicHorizontal=e.Cubic=e.BaseEdge=void 0;var i=n("17d5ad7d");n.d(e,"BaseEdge",{enumerable:!0,get:function(){return i.BaseEdge;}});var r=n("42c4cb50");Object.defineProperty(e,"Cubic",{enumerable:!0,get:function(){return r.Cubic;}});var a=n("1db3e4d4");Object.defineProperty(e,"CubicHorizontal",{enumerable:!0,get:function(){return a.CubicHorizontal;}});var s=n("07d6b8e2");Object.defineProperty(e,"CubicRadial",{enumerable:!0,get:function(){return s.CubicRadial;}});var o=n("181e393e");Object.defineProperty(e,"CubicVertical",{enumerable:!0,get:function(){return o.CubicVertical;}});var l=n("aeb8daed");Object.defineProperty(e,"Line",{enumerable:!0,get:function(){return l.Line;}});var d=n("2beb732a");Object.defineProperty(e,"Polyline",{enumerable:!0,get:function(){return d.Polyline;}});var u=n("6c1754bc");Object.defineProperty(e,"Quadratic",{enumerable:!0,get:function(){return u.Quadratic;}});},"6a5d81f1":function(t,e,n){"use strict";n.d(e,"__esModule",{value:!0}),e.Diamond=void 0;let i=n("734c52ec"),r=n("aaa87daa");class a extends r.Polygon{constructor(t){super(t);}getPoints(t){let[e,n]=this.getSize(t);return(0,i.getDiamondPoints)(e,n);}}e.Diamond=a;},"6a762b67":function(t,e,n){"use strict";n.d(e,"__esModule",{value:!0}),n.d(e,"ArrangeDrawOrder",{enumerable:!0,get:function(){return a;}});var i=n("8a2f2f0b"),r=n("a7082564");class a extends r.BaseTransform{beforeDraw(t){let{model:e}=this.context,n=t.add.combos,r=t=>{let n=[];return t.forEach((t,r)=>{let a=e.getAncestorsData(r,"combo").map(t=>(0,i.idOf)(t)).reverse();n.push([r,t,a.length]);}),new Map(n.sort(([,,t],[,,e])=>e-t).map(([t,e])=>[t,e]));};return t.add.combos=r(n),t.update.combos=r(t.update.combos),t;}}},"6c1754bc":function(t,e,n){"use strict";n.d(e,"__esModule",{value:!0}),e.Quadratic=void 0;let i=n("f7ced0c5"),r=n("76595ff2"),a=n("17d5ad7d");class s extends a.BaseEdge{constructor(t){super((0,r.mergeOptions)({style:s.defaultStyleProps},t));}getKeyPath(t){let{curvePosition:e,curveOffset:n}=t,[r,a]=this.getEndpoints(t),s=t.controlPoint||(0,i.getCurveControlPoint)(r,a,e,n);return(0,i.getQuadraticPath)(r,a,s);}}e.Quadratic=s,s.defaultStyleProps={curvePosition:.5,curveOffset:30};},"6d16dfc1":function(t,e,n){"use strict";var i=this&&this.__rest||function(t,e){var n={};for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&0>e.indexOf(i)&&(n[i]=t[i]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols)for(var r=0,i=Object.getOwnPropertySymbols(t);r<i.length;r++)0>e.indexOf(i[r])&&Object.prototype.propertyIsEnumerable.call(t,i[r])&&(n[i[r]]=t[i[r]]);return n;};Object.defineProperty(e,"__esModule",{value:!0}),e.BaseNode=void 0;let r=n("6824c090"),a=n("734c52ec"),s=n("d9bf10cb"),o=n("9188883e"),l=n("b3456123"),d=n("50674fdc"),u=n("e0ffb410"),c=n("76595ff2"),h=n("c135b32a"),p=n("0049dcfa"),f=n("56418176"),g=n("2329b631"),y=n("14586b74");class m extends f.BaseElement{constructor(t){super((0,c.mergeOptions)({style:m.defaultStyleProps},t)),this.type="node";}getSize(t=this.attributes){let{size:e}=t;return(0,u.parseSize)(e);}getKeyStyle(t){let e=this.getGraphicStyle(t);return Object.assign((0,d.omitStyleProps)(e,["label","halo","icon","badge","port"]));}getLabelStyle(t){if(!1===t.label||!t.labelText)return!1;let e=(0,d.subStyleProps)(this.getGraphicStyle(t),"label"),{placement:n,maxWidth:r,offsetX:s,offsetY:o}=e,l=i(e,["placement","maxWidth","offsetX","offsetY"]),u=this.getShape("key").getLocalBounds();return Object.assign((0,a.getTextStyleByPlacement)(u,n,s,o),{wordWrapWidth:(0,h.getWordWrapWidthByBox)(u,r)},l);}getHaloStyle(t){if(!1===t.halo)return!1;let e=this.getKeyStyle(t),{fill:n}=e,r=i(e,["fill"]),a=(0,d.subStyleProps)(this.getGraphicStyle(t),"halo");return Object.assign(Object.assign(Object.assign({},r),{stroke:n}),a);}getIconStyle(t){if(!1===t.icon||!t.iconText&&!t.iconSrc)return!1;let e=(0,d.subStyleProps)(this.getGraphicStyle(t),"icon");return Object.assign((0,s.inferIconStyle)(t.size,e),e);}getBadgesStyle(t){var e;let n=(0,d.subObject)(this.shapeMap,"badge-"),r={};if(Object.keys(n).forEach(t=>{r[t]=!1;}),!1===t.badge||!(null===(e=t.badges)||void 0===e?void 0:e.length))return r;let{badges:a=[],badgePalette:s,opacity:l=1}=t,u=i(t,["badges","badgePalette","opacity"]),c=(0,o.getPaletteColors)(s),h=(0,d.subStyleProps)(this.getGraphicStyle(u),"badge");return a.forEach((t,e)=>{r[e]=Object.assign(Object.assign({backgroundFill:c?c[e%(null==c?void 0:c.length)]:void 0,opacity:l},h),this.getBadgeStyle(t));}),r;}getBadgeStyle(t){let e=this.getShape("key"),{placement:n="top",offsetX:r,offsetY:s}=t,o=i(t,["placement","offsetX","offsetY"]);return Object.assign(Object.assign({},(0,a.getTextStyleByPlacement)(e.getLocalBounds(),n,r,s,!0)),o);}getPortsStyle(t){var e;let n=this.getPorts(),i={};if(Object.keys(n).forEach(t=>{i[t]=!1;}),!1===t.port||!(null===(e=t.ports)||void 0===e?void 0:e.length))return i;let r=(0,d.subStyleProps)(this.getGraphicStyle(t),"port"),{ports:s=[]}=t;return s.forEach((e,n)=>{let s=e.key||n,o=Object.assign(Object.assign({},r),e);if((0,a.isSimplePort)(o))i[s]=!1;else{let[n,r]=this.getPortXY(t,e);i[s]=Object.assign({transform:[["translate",n,r]]},o);}}),i;}getPortXY(t,e){let{placement:n="left"}=e,i=this.getShape("key");return(0,a.getPortXYByPlacement)(function(t,e){if(!t)return e.getLocalBounds();let n=t.canvas.getLayer(),i=e.cloneNode();(0,p.setVisibility)(i,"hidden"),n.appendChild(i);let r=i.getLocalBounds();return i.destroy(),r;}(this.context,i),n);}getPorts(){return(0,d.subObject)(this.shapeMap,"port-");}getCenter(){return this.getShape("key").getBounds().center;}getIntersectPoint(t,e=!1){let n=this.getShape("key").getBounds();return(0,l.getRectIntersectPoint)(t,n,e);}drawHaloShape(t,e){let n=this.getHaloStyle(t),i=this.getShape("key");this.upsert("halo",i.constructor,n,e);}drawIconShape(t,e){let n=this.getIconStyle(t);this.upsert("icon",g.Icon,n,e),(0,y.connectImage)(this);}drawBadgeShapes(t,e){let n=this.getBadgesStyle(t);Object.keys(n).forEach(t=>{let i=n[t];this.upsert(`badge-${t}`,g.Badge,i,e);});}drawPortShapes(t,e){let n=this.getPortsStyle(t);Object.keys(n).forEach(t=>{let i=n[t],a=`port-${t}`;this.upsert(a,r.Circle,i,e);});}drawLabelShape(t,e){let n=this.getLabelStyle(t);this.upsert("label",g.Label,n,e);}_drawKeyShape(t,e){return this.drawKeyShape(t,e);}render(t=this.parsedAttributes,e=this){this._drawKeyShape(t,e),this.getShape("key")&&(this.drawHaloShape(t,e),this.drawIconShape(t,e),this.drawBadgeShapes(t,e),this.drawLabelShape(t,e),this.drawPortShapes(t,e));}update(t){super.update(t),t&&("x"in t||"y"in t||"z"in t)&&(0,y.dispatchPositionChange)(this);}onframe(){this.drawBadgeShapes(this.parsedAttributes,this),this.drawLabelShape(this.parsedAttributes,this);}}e.BaseNode=m,m.defaultStyleProps={x:0,y:0,size:32,droppable:!0,draggable:!0,port:!0,ports:[],portZIndex:2,portLinkToCenter:!1,badge:!0,badges:[],badgeZIndex:3,halo:!1,haloDroppable:!1,haloLineDash:0,haloLineWidth:12,haloStrokeOpacity:.25,haloPointerEvents:"none",haloZIndex:-1,icon:!0,iconZIndex:1,label:!0,labelIsBillboard:!0,labelMaxWidth:"200%",labelPlacement:"bottom",labelWordWrap:!1,labelZIndex:0};},"6d5a1ab5":function(t,e,n){"use strict";n.d(e,"__esModule",{value:!0}),n.e(e,{add:function(){return a;},angle:function(){return g;},cross:function(){return u;},distance:function(){return h;},divide:function(){return l;},dot:function(){return d;},manhattanDistance:function(){return p;},mod:function(){return m;},multiply:function(){return o;},normalize:function(){return f;},perpendicular:function(){return y;},rad:function(){return E;},scale:function(){return c;},subtract:function(){return s;},toVector2:function(){return b;},toVector3:function(){return v;}});var i=n("ffe4817e");let r=[0,0,0];function a(t,e){return t.map((t,n)=>t+e[n]);}function s(t,e){return t.map((t,n)=>t-e[n]);}function o(t,e){return"number"==typeof e?t.map(t=>t*e):t.map((t,n)=>t*e[n]);}function l(t,e){return"number"==typeof e?t.map(t=>t/e):t.map((t,n)=>t/e[n]);}function d(t,e){return t.reduce((t,n,i)=>t+n*e[i],0);}function u(t,e){let n=v(t),i=v(e);return[n[1]*i[2]-n[2]*i[1],n[2]*i[0]-n[0]*i[2],n[0]*i[1]-n[1]*i[0]];}function c(t,e){return t.map(t=>t*e);}function h(t,e){return Math.sqrt(t.reduce((t,n,i)=>t+Math.pow(n-e[i]||0,2),0));}function p(t,e){return t.reduce((t,n,i)=>t+Math.abs(n-e[i]),0);}function f(t){let e=t.reduce((t,e)=>t+Math.pow(e,2),0);return t.map(t=>t/Math.sqrt(e));}function g(t,e,n=!1){let i=t[0]*e[1]-t[1]*e[0],a=Math.acos(o(t,e).reduce((t,e)=>t+e,0)/(h(t,r)*h(e,r)));return n&&i<0&&(a=2*Math.PI-a),a;}function y(t,e=!0){return e?[-t[1],t[0]]:[t[1],-t[0]];}function m(t,e){return t.map(t=>t%e);}function b(t){return[t[0],t[1]];}function v(t){return(0,i.isVector2)(t)?[t[0],t[1],0]:t;}function E(t){let[e,n]=t;return e||n?Math.atan2(n,e):0;}},"6e7a0d7a":function(t,e,n){"use strict";n.d(e,"__esModule",{value:!0}),n.d(e,"Badge",{enumerable:!0,get:function(){return s;}});var i=n("1165dca0"),r=n("20ac0f24"),a=n("6220e010");class s extends r.BaseShape{constructor(t){super((0,i.mergeOptions)({style:s.defaultStyleProps},t));}getBadgeStyle(t){return this.getGraphicStyle(t);}render(t=this.parsedAttributes,e=this){this.upsert("label",a.Label,this.getBadgeStyle(t),e);}getGeometryBounds(){let t=this.getShape("label");return(t.getShape("background")||t.getShape("text")).getGeometryBounds();}}s.defaultStyleProps={padding:[2,4,2,4],fontSize:10,wordWrap:!1,backgroundRadius:"50%",backgroundOpacity:1};},"6ed5e4e8":function(t,e,n){"use strict";n.d(e,"__esModule",{value:!0}),n.e(e,{ELEMENT_TYPES:function(){return r;},ICON_SIZE_RATIO:function(){return i;}});let i=.8,r=["node","edge","combo"];},"6f823a3e":function(t,e,n){"use strict";var i,r;n.d(e,"__esModule",{value:!0}),e.ComboEvent=void 0,(r=i||(e.ComboEvent=i={})).CLICK="combo:click",r.DBLCLICK="combo:dblclick",r.POINTER_OVER="combo:pointerover",r.POINTER_LEAVE="combo:pointerleave",r.POINTER_ENTER="combo:pointerenter",r.POINTER_MOVE="combo:pointermove",r.POINTER_OUT="combo:pointerout",r.POINTER_DOWN="combo:pointerdown",r.POINTER_UP="combo:pointerup",r.CONTEXT_MENU="combo:contextmenu",r.DRAG_START="combo:dragstart",r.DRAG="combo:drag",r.DRAG_END="combo:dragend",r.DRAG_ENTER="combo:dragenter",r.DRAG_OVER="combo:dragover",r.DRAG_LEAVE="combo:dragleave",r.DROP="combo:drop";},"700d5b2d":function(t,e,n){"use strict";n.d(e,"__esModule",{value:!0}),e.Badge=void 0;let i=n("76595ff2"),r=n("565fda94"),a=n("3df2bd54");class s extends r.BaseShape{constructor(t){super((0,i.mergeOptions)({style:s.defaultStyleProps},t));}getBadgeStyle(t){return this.getGraphicStyle(t);}render(t=this.parsedAttributes,e=this){this.upsert("label",a.Label,this.getBadgeStyle(t),e);}getGeometryBounds(){let t=this.getShape("label");return(t.getShape("background")||t.getShape("text")).getGeometryBounds();}}e.Badge=s,s.defaultStyleProps={padding:[2,4,2,4],fontSize:10,wordWrap:!1,backgroundRadius:"50%",backgroundOpacity:1};},"734c52ec":function(t,e,n){"use strict";var i=this&&this.__rest||function(t,e){var n={};for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&0>e.indexOf(i)&&(n[i]=t[i]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols)for(var r=0,i=Object.getOwnPropertySymbols(t);r<i.length;r++)0>e.indexOf(i[r])&&Object.prototype.propertyIsEnumerable.call(t,i[r])&&(n[i[r]]=t[i[r]]);return n;};Object.defineProperty(e,"__esModule",{value:!0}),e.isNode=u,e.isEdge=c,e.isCombo=h,e.isElement=function(t){return u(t)||c(t)||h(t);},e.isSameNode=function(t,e){return!!t&&!!e&&t===e;},e.getPortXYByPlacement=function(t,e,n=p,i=!0){let a=[.5,.5],o=(0,r.isString)(e)?(0,r.get)(n,e.toLocaleLowerCase(),a):e;if(!i&&(0,r.isString)(e))return o;let[l,d]=o||a;return[t.min[0]+(0,s.getBBoxWidth)(t)*l,t.min[1]+(0,s.getBBoxHeight)(t)*d];},e.getAllPorts=f,e.isSimplePort=g,e.getPortPosition=y,e.findPorts=function(t,e,n,i){return[m(t,e,n,i),m(e,t,i,n)];},e.findPort=m,e.getConnectionPoint=function(t,e){return h(t)||u(t)?v(t,e):b(t,e);},e.getPortConnectionPoint=b,e.getNodeConnectionPoint=v,e.getTextStyleByPlacement=function(t,e="bottom",n=0,i=0,r=!1){let a=e.split("-"),[s,o]=(0,d.getXYByPlacement)(t,e),[l,u]=r?["bottom","top"]:["top","bottom"];return{transform:[["translate",s+n,o+i]],textBaseline:a.includes("top")?u:a.includes("bottom")?l:"middle",textAlign:a.includes("left")?"right":a.includes("right")?"left":"center"};},e.getStarPoints=function(t,e){return[[0,-t],[e*Math.cos(3*Math.PI/10),-e*Math.sin(3*Math.PI/10)],[t*Math.cos(Math.PI/10),-t*Math.sin(Math.PI/10)],[e*Math.cos(Math.PI/10),e*Math.sin(Math.PI/10)],[t*Math.cos(3*Math.PI/10),t*Math.sin(3*Math.PI/10)],[0,e],[-t*Math.cos(3*Math.PI/10),t*Math.sin(3*Math.PI/10)],[-e*Math.cos(Math.PI/10),e*Math.sin(Math.PI/10)],[-t*Math.cos(Math.PI/10),-t*Math.sin(Math.PI/10)],[-e*Math.cos(3*Math.PI/10),-e*Math.sin(3*Math.PI/10)]];},e.getStarPorts=function(t,e){let n={};return n.top=[0,-t],n.left=[-t*Math.cos(Math.PI/10),-t*Math.sin(Math.PI/10)],n["left-bottom"]=[-t*Math.cos(3*Math.PI/10),t*Math.sin(3*Math.PI/10)],n.bottom=[0,e],n["right-bottom"]=[t*Math.cos(3*Math.PI/10),t*Math.sin(3*Math.PI/10)],n.right=n.default=[t*Math.cos(Math.PI/10),-t*Math.sin(Math.PI/10)],n;},e.getTrianglePoints=function(t,e,n){let i=e/2,r=t/2,a={up:[[-r,i],[r,i],[0,-i]],left:[[-r,0],[r,i],[r,-i]],right:[[-r,i],[-r,-i],[r,0]],down:[[-r,-i],[r,-i],[0,i]]};return a[n]||a.up;},e.getTrianglePorts=function(t,e,n){let i=e/2,r=t/2,a={};return"down"===n?(a.bottom=a.default=[0,i],a.right=[r,-i],a.left=[-r,-i]):"left"===n?(a.top=[r,-i],a.bottom=[r,i],a.left=a.default=[-r,0]):"right"===n?(a.top=[-r,-i],a.bottom=[-r,i],a.right=a.default=[r,0]):(a.left=[-r,i],a.top=a.default=[0,-i],a.right=[r,i]),a;},e.getBoundingPoints=function(t,e){return[[t/2,-e/2],[t/2,e/2],[-t/2,e/2],[-t/2,-e/2]];},e.getDiamondPoints=function(t,e){return[[0,-e/2],[t/2,0],[0,e/2],[-t/2,0]];},e.isVisible=function(t){return"hidden"!==(0,r.get)(t,["style","visibility"]);},e.setAttributes=function(t,e){let{zIndex:n,transform:a,transformOrigin:s,visibility:o,cursor:l,clipPath:d,component:u}=e,c=i(e,["zIndex","transform","transformOrigin","visibility","cursor","clipPath","component"]);Object.assign(t.attributes,c),a&&t.setAttribute("transform",a),(0,r.isNumber)(n)&&t.setAttribute("zIndex",n),s&&t.setAttribute("transformOrigin",s),o&&t.setAttribute("visibility",o),l&&t.setAttribute("cursor",l),d&&t.setAttribute("clipPath",d),u&&t.setAttribute("component",u);},e.updateStyle=function(t,e){"update"in t?t.update(e):t.attr(e);},e.getHexagonPoints=function(t){return[[0,t],[t*Math.sqrt(3)/2,t/2],[t*Math.sqrt(3)/2,-t/2],[0,-t],[-t*Math.sqrt(3)/2,-t/2],[-t*Math.sqrt(3)/2,t/2]];},e.markToBeDestroyed=function(t){(0,r.set)(t,"__to_be_destroyed__",!0);},e.isToBeDestroyed=function(t){return(0,r.get)(t,"__to_be_destroyed__",!1);};let r=n("5a6910cd"),a=n("9e9508a0"),s=n("b51680dc"),o=n("1540f7e4"),l=n("b3456123"),d=n("b326bfa9");function u(t){return t instanceof a.BaseNode&&"node"===t.type;}function c(t){return t instanceof a.BaseEdge;}function h(t){return t instanceof a.BaseCombo;}let p={top:[.5,0],right:[1,.5],bottom:[.5,1],left:[0,.5],"left-top":[0,0],"top-left":[0,0],"left-bottom":[0,1],"bottom-left":[0,1],"right-top":[1,0],"top-right":[1,0],"right-bottom":[1,1],"bottom-right":[1,1],default:[.5,.5]};function f(t){if(!t)return{};let e=t.getPorts();return(t.attributes.ports||[]).forEach((n,i)=>{var r;let{key:a,placement:s}=n;g(n)&&(e[r=a||i]||(e[r]=(0,d.getXYByPlacement)(t.getShape("key").getBounds(),s)));}),e;}function g(t){let{r:e}=t;return!e||0===Number(e);}function y(t){return(0,o.isPoint)(t)?t:t.getPosition();}function m(t,e,n,i){let r=f(t);if(n)return r[n];let a=Object.values(r);if(0===a.length)return;let s=a.map(t=>y(t)),o=function(t,e){let n=f(t);if(e)return[y(n[e])];let i=Object.values(n);return i.length>0?i.map(t=>y(t)):[t.getCenter()];}(e,i),[d]=(0,l.findNearestPoints)(s,o);return a.find(t=>y(t)===d);}function b(t,e){if(!t||!e)return[0,0,0];if((0,o.isPoint)(t))return t;if(t.attributes.linkToCenter)return t.getPosition();let n=(0,o.isPoint)(e)?e:u(e)?e.getCenter():e.getPosition();return(0,l.getEllipseIntersectPoint)(n,t.getBounds());}function v(t,e){if(!t||!e)return[0,0,0];let n=(0,o.isPoint)(e)?e:u(e)?e.getCenter():e.getPosition();return t.getIntersectPoint(n)||t.getCenter();}},"739d9a81":function(t,e,n){"use strict";n.d(e,"__esModule",{value:!0}),n.d(e,"CubicRadial",{enumerable:!0,get:function(){return o;}});var i=n("2be3380d"),r=n("1165dca0"),a=n("6d5a1ab5"),s=n("35a30c27");class o extends s.Cubic{constructor(t){super((0,r.mergeOptions)({style:o.defaultStyleProps},t));}get ref(){return this.context.model.getRootsData()[0];}getEndpoints(t){if(this.sourceNode.id===this.ref.id)return super.getEndpoints(t);let e=(0,i.positionOf)(this.ref);return[this.sourceNode.getIntersectPoint(e,!0),this.targetNode.getIntersectPoint(e)];}toRadialCoordinate(t){let e=(0,i.positionOf)(this.ref);return[(0,a.distance)(t,e),(0,a.rad)((0,a.subtract)(t,e))];}getControlPoints(t,e,n,i){let[r,a]=this.toRadialCoordinate(t),[s]=this.toRadialCoordinate(e),o=s-r;return[[t[0]+(o*n[0]+i[0])*Math.cos(a),t[1]+(o*n[0]+i[0])*Math.sin(a)],[e[0]-(o*n[1]-i[0])*Math.cos(a),e[1]-(o*n[1]-i[0])*Math.sin(a)]];}}o.defaultStyleProps={curvePosition:.5,curveOffset:20};},"757ae0a3":function(t,e,n){"use strict";n.d(e,"__esModule",{value:!0}),e.ELEMENT_TYPES=e.ICON_SIZE_RATIO=void 0,e.ICON_SIZE_RATIO=.8,e.ELEMENT_TYPES=["node","edge","combo"];},"76595ff2":function(t,e,n){"use strict";var i=this&&this.__rest||function(t,e){var n={};for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&0>e.indexOf(i)&&(n[i]=t[i]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols)for(var r=0,i=Object.getOwnPropertySymbols(t);r<i.length;r++)0>e.indexOf(i[r])&&Object.prototype.propertyIsEnumerable.call(t,i[r])&&(n[i[r]]=t[i[r]]);return n;};Object.defineProperty(e,"__esModule",{value:!0}),e.computeElementCallbackStyle=function(t,e){let{datum:n,graph:i}=e;return"function"==typeof t?t.call(i,n):Object.fromEntries(Object.entries(t).map(([t,e])=>"function"==typeof e?[t,e.call(i,n)]:[t,e]));},e.mergeOptions=function(t,e){let n=(null==t?void 0:t.style)||{},i=(null==e?void 0:e.style)||{};for(let t in n)t in i||(i[t]=n[t]);return Object.assign({},t,e,{style:i});},e.getSubShapeStyle=function(t){let{x:e,y:n,z:r,class:a,className:s,transform:o,transformOrigin:l,zIndex:d,visibility:u}=t;return i(t,["x","y","z","class","className","transform","transformOrigin","zIndex","visibility"]);};},"76853a1e":function(t,e,n){"use strict";var i,r;n.d(e,"__esModule",{value:!0}),e.ContainerEvent=void 0,(r=i||(e.ContainerEvent=i={})).KEY_DOWN="keydown",r.KEY_UP="keyup";},82395519:function(t,e,n){"use strict";n.d(e,"__esModule",{value:!0}),n.e(e,{getWordWrapWidthByBox:function(){return a;},getWordWrapWidthByEnds:function(){return s;},getWordWrapWidthWithBase:function(){return r;}});var i=n("6d5a1ab5");function r(t,e){let n=2*t;return"string"==typeof e?n=t*Number(e.replace("%",""))/100:"number"==typeof e&&(n=e),isNaN(n)&&(n=2*t),n;}function a(t,e,n=1,i=!1){return r((t.max[0]-t.min[0])*(i?n:1),e);}function s(t,e,n=1){return r((0,i.distance)(t[0],t[1])*n,e);}},"85d3dffa":function(t,e,n){"use strict";n.d(e,"__esModule",{value:!0}),n.d(e,"CircleCombo",{enumerable:!0,get:function(){return d;}});var i=n("a0f386cf"),r=n("bf55e093"),a=n("e492a2d3"),s=n("21954d01"),o=n("4c372554"),l=n("56a67307");class d extends l.BaseCombo{constructor(t){super(t);}drawKeyShape(t,e){return this.upsert("key",i.Circle,this.getKeyStyle(t),e);}getKeyStyle(t){let{collapsed:e}=t,n=super.getKeyStyle(t),[i]=this.getKeySize(t);return Object.assign(Object.assign(Object.assign({},n),e&&(0,s.subStyleProps)(n,"collapsed")),{r:i/2});}getCollapsedKeySize(t){let[e,n]=(0,o.parseSize)(t.collapsedSize),i=Math.max(e,n)/2;return[2*i,2*i,0];}getExpandedKeySize(t){let e=this.getContentBBox(t),[n,i]=(0,r.getBBoxSize)(e),a=Math.sqrt(Math.pow(n,2)+Math.pow(i,2))/2;return[2*a,2*a,0];}getIntersectPoint(t,e=!1){let n=this.getShape("key").getBounds();return(0,a.getEllipseIntersectPoint)(t,n,e);}}},"8691a1cd":function(t,e,n){"use strict";n.d(e,"__esModule",{value:!0}),n.e(e,{BaseEdge:function(){return i.BaseEdge;},Cubic:function(){return r.Cubic;},CubicHorizontal:function(){return a.CubicHorizontal;},CubicRadial:function(){return s.CubicRadial;},CubicVertical:function(){return o.CubicVertical;},Line:function(){return l.Line;},Polyline:function(){return d.Polyline;},Quadratic:function(){return u.Quadratic;}});var i=n("8f51b603"),r=n("35a30c27"),a=n("c334d8c0"),s=n("739d9a81"),o=n("b218cfa2"),l=n("077c654d"),d=n("2165ae4d"),u=n("df866aac");},"870fd70e":function(t,e,n){"use strict";function i(t,e,n){return t>=e&&t<=n;}n.d(e,"__esModule",{value:!0}),n.d(e,"isBetween",{enumerable:!0,get:function(){return i;}});},"875ed127":function(t,e,n){"use strict";n.d(e,"__esModule",{value:!0}),n.d(e,"EXTENSION_REGISTRY",{enumerable:!0,get:function(){return i;}});let i={animation:{},behavior:{},combo:{},edge:{},layout:{},node:{},palette:{},theme:{},plugin:{},transform:{},shape:{}};},"88349fc2":function(t,e,n){"use strict";n.d(e,"__esModule",{value:!0}),e.Triangle=void 0;let i=n("5a6910cd"),r=n("757ae0a3"),a=n("b51680dc"),s=n("734c52ec"),o=n("50674fdc"),l=n("76595ff2"),d=n("aaa87daa");class u extends d.Polygon{constructor(t){super((0,l.mergeOptions)({style:u.defaultStyleProps},t));}getPoints(t){let{direction:e}=t,[n,i]=this.getSize(t);return(0,s.getTrianglePoints)(n,i,e);}getPortXY(t,e){let{direction:n}=t,{placement:i="top"}=e,r=this.getShape("key").getLocalBounds(),[a,o]=this.getSize(t),l=(0,s.getTrianglePorts)(a,o,n);return(0,s.getPortXYByPlacement)(r,i,l,!1);}getIconStyle(t){let{icon:e,iconText:n,iconSrc:s,direction:l}=t;if(!1===e||(0,i.isEmpty)(n||s))return!1;let d=(0,o.subStyleProps)(this.getGraphicStyle(t),"icon"),u=this.getShape("key").getLocalBounds(),[c,h]=(0,a.getTriangleCenter)(u,l),p=2*(0,a.getIncircleRadius)(u,l)*r.ICON_SIZE_RATIO;return Object.assign({x:c,y:h,width:p,height:p},d);}}e.Triangle=u,u.defaultStyleProps={size:40,direction:"up"};},"885a33c3":function(t,e,n){"use strict";var i=this&&this.__rest||function(t,e){var n={};for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&0>e.indexOf(i)&&(n[i]=t[i]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols)for(var r=0,i=Object.getOwnPropertySymbols(t);r<i.length;r++)0>e.indexOf(i[r])&&Object.prototype.propertyIsEnumerable.call(t,i[r])&&(n[i[r]]=t[i[r]]);return n;};Object.defineProperty(e,"__esModule",{value:!0}),e.BaseCombo=void 0;let r=n("6824c090"),a=n("5a6910cd"),s=n("b51680dc"),o=n("0e886f4f"),l=n("3dc2e39f"),d=n("b326bfa9"),u=n("50674fdc"),c=n("e0ffb410"),h=n("76595ff2"),p=n("41446765"),f=n("d0ddde0e"),g=n("2329b631"),y=n("14586b74");class m extends f.BaseNode{constructor(t){super((0,h.mergeOptions)({style:m.defaultStyleProps},t)),this.type="combo",this.updateComboPosition(this.parsedAttributes);}getKeySize(t){let{collapsed:e,childrenNode:n=[]}=t;return 0===n.length?this.getEmptyKeySize(t):e?this.getCollapsedKeySize(t):this.getExpandedKeySize(t);}getEmptyKeySize(t){let{padding:e,collapsedSize:n}=t,[i,r,a,s]=(0,l.parsePadding)(e);return(0,p.add)((0,c.parseSize)(n),[s+r,i+a,0]);}getCollapsedKeySize(t){return(0,c.parseSize)(t.collapsedSize);}getExpandedKeySize(t){let e=this.getContentBBox(t);return[(0,s.getBBoxWidth)(e),(0,s.getBBoxHeight)(e),0];}getContentBBox(t){let{childrenNode:e=[],padding:n}=t,i=e.map(t=>this.context.element.getElement(t)).filter(Boolean);if(0===i.length){let e=new r.AABB,{x:n=0,y:i=0,size:a}=t,[s,o]=(0,c.parseSize)(a);return e.setMinMax([n-s/2,i-o/2,0],[n+s/2,i+o/2,0]),e;}let a=(0,s.getCombinedBBox)(i.map(t=>t.getBounds()));return n?(0,s.getExpandedBBox)(a,n):a;}drawCollapsedMarkerShape(t,e){let n=this.getCollapsedMarkerStyle(t);this.upsert("collapsed-marker",g.Icon,n,e),(0,y.connectImage)(this);}getCollapsedMarkerStyle(t){if(!t.collapsed||!t.collapsedMarker)return!1;let e=(0,u.subStyleProps)(this.getGraphicStyle(t),"collapsedMarker"),{type:n}=e,r=i(e,["type"]),a=this.getShape("key"),[s,o]=(0,d.getXYByPlacement)(a.getLocalBounds(),"center"),l=Object.assign(Object.assign({},r),{x:s,y:o});return n&&Object.assign(l,{text:this.getCollapsedMarkerText(n,t)}),l;}getCollapsedMarkerText(t,e){let{childrenData:n=[]}=e,{model:i}=this.context;return"descendant-count"===t?i.getDescendantsData(this.id).length.toString():"child-count"===t?n.length.toString():"node-count"===t?i.getDescendantsData(this.id).filter(t=>"node"===i.getElementType((0,o.idOf)(t))).length.toString():(0,a.isFunction)(t)?t(n):"";}getComboPosition(t){let{x:e=0,y:n=0,collapsed:i,childrenData:r=[]}=t;if(0===r.length)return[+e,+n,0];if(i){let{model:t}=this.context,i=t.getDescendantsData(this.id).filter(e=>!t.isCombo((0,o.idOf)(e)));if(i.length>0&&i.some(d.hasPosition)){let t=i.reduce((t,e)=>(0,p.add)(t,(0,d.positionOf)(e)),[0,0,0]);return(0,p.divide)(t,i.length);}return[+e,+n,0];}return this.getContentBBox(t).center;}getComboStyle(t){let[e,n]=this.getComboPosition(t);return{x:e,y:n,transform:[["translate",e,n]]};}updateComboPosition(t){let e=this.getComboStyle(t);Object.assign(this.style,e);let{x:n,y:i}=e;this.context.model.syncNodeLikeDatum({id:this.id,style:{x:n,y:i}}),(0,y.dispatchPositionChange)(this);}render(t,e=this){super.render(t,e),this.drawCollapsedMarkerShape(t,e);}update(t={}){super.update(t),this.updateComboPosition(this.parsedAttributes);}onframe(){super.onframe(),this.attributes.collapsed||this.updateComboPosition(this.parsedAttributes),this.drawKeyShape(this.parsedAttributes,this);}animate(t,e){let n=super.animate(this.attributes.collapsed?t:t.map(t=>{var{x:e,y:n,z:r,transform:a}=t;return i(t,["x","y","z","transform"]);}),e);return n?new Proxy(n,{set:(t,e,n)=>("currentTime"===e&&Promise.resolve().then(()=>this.onframe()),Reflect.set(t,e,n))}):n;}}e.BaseCombo=m,m.defaultStyleProps={childrenNode:[],droppable:!0,draggable:!0,collapsed:!1,collapsedSize:32,collapsedMarker:!0,collapsedMarkerZIndex:1,collapsedMarkerFontSize:12,collapsedMarkerTextAlign:"center",collapsedMarkerTextBaseline:"middle",collapsedMarkerType:"child-count"};},"8911aa19":function(t,e,n){"use strict";n.d(e,"__esModule",{value:!0}),n.d(e,"themeOf",{enumerable:!0,get:function(){return s;}});var i=n("d9033aa4"),r=n("e8f8b56e"),a=n("16ea0f92");function s(t){let{theme:e}=t;return e?(0,r.getExtension)(i.ExtensionCategory.THEME,e)||(a.print.warn(`The theme of ${e} is not registered.`),{}):{};}},"89ac127e":function(t,e,n){n.d(e,"__esModule",{value:!0}),n.e(e,{AntVDagreLayout:function(){return a.AntVDagreLayout;},BaseLayout:function(){return b.BaseLayout;},CircularLayout:function(){return s.CircularLayout;},ComboCombinedLayout:function(){return o.ComboCombinedLayout;},ConcentricLayout:function(){return l.ConcentricLayout;},D3ForceLayout:function(){return d.D3ForceLayout;},DagreLayout:function(){return u.DagreLayout;},FishboneLayout:function(){return C;},ForceAtlas2Layout:function(){return c.ForceAtlas2Layout;},ForceLayout:function(){return h.ForceLayout;},FruchtermanLayout:function(){return p.FruchtermanLayout;},GridLayout:function(){return f.GridLayout;},MDSLayout:function(){return g.MDSLayout;},RadialLayout:function(){return y.RadialLayout;},RandomLayout:function(){return m.RandomLayout;},SnakeLayout:function(){return D;},compactBox:function(){return r.compactBox;},dendrogram:function(){return r.dendrogram;},indented:function(){return r.indented;},mindmap:function(){return r.mindmap;}});var i=n("777fffbe"),r=n("9494acd4"),a=n("f4c1b9f6"),s=n("527399aa"),o=n("d9f14199"),l=n("b5b42fff"),d=n("24f97374"),u=n("bbf70139"),c=n("a490bd11"),h=n("99782438"),p=n("15e70668"),f=n("22556cc8"),g=n("3e4364ad"),y=n("ca4d2b2e"),m=n("00475e93"),b=n("30e76e54"),v=n("7a2084f1"),E=i._(v),x=n("f63d175b"),O=i._(x),S=n("8a2f2f0b"),_=n("4c372554"),P=this&&this.__awaiter||function(t,e,n,i){return new(n||(n=Promise))(function(r,a){function s(t){try{l(i.next(t));}catch(t){a(t);}}function o(t){try{l(i.throw(t));}catch(t){a(t);}}function l(t){var e;t.done?r(t.value):((e=t.value)instanceof n?e:new n(function(t){t(e);})).then(s,o);}l((i=i.apply(t,e||[])).next());});};class C extends b.BaseLayout{constructor(){super(...arguments),this.id="fishbone";}getRoot(){let t=this.context.model.getRootsData();if(!(0,E.default)(t)&&!(t.length>2))return t[0];}formatSize(t){let e="function"==typeof t?t:()=>t;return t=>(0,_.parseSize)(e(t));}doLayout(t,e){let{hGap:n,getRibSep:i,vGap:r,nodeSize:a,height:s}=e,{model:o}=this.context,l=this.formatSize(a),d=l(t)[0]+i(t),u=(t,e=0)=>{var i;return e+=n*((t.children||[]).length+1),null===(i=t.children)||void 0===i||i.forEach(t=>{var n;null===(n=o.getNodeLikeDatum(t).children)||void 0===n||n.forEach(t=>{e=u(o.getNodeLikeDatum(t),e);});}),e;},c=t=>{if(1===t.depth)return d;let e=o.getParentData(t.id,"tree");if(A(t)){let i=o.getParentData(e.id,"tree"),a=f(t)-f(i);return c(e)+a*n/r;}{let n=(e.children||[]).indexOf(t.id),i=o.getNodeData((e.children||[]).slice(n));return h(e)-i.reduce((t,e)=>t+u(e),0)-l(e)[0]/2;}},h=(0,O.default)(t=>{if(M(t))return l(t)[0]/2;let e=o.getParentData(t.id,"tree");if(A(t))return c(t)+u(t)+l(t)[0]/2;{let i=f(t)-f(e);return c(t)+n/r*i;}},t=>t.id),p=t=>f(o.getParentData(t,"tree")),f=(0,O.default)(t=>{if(M(t))return s/2;if(A(t)){let e=o.getParentData(t.id,"tree"),n=e.children.indexOf(t.id);if(0===n)return p(e.id)+r;let i=o.getNodeLikeDatum(e.children[n-1]);return(0,E.default)(i.children)?f(i)+r:Math.max(...o.getDescendantsData(i.id).map(t=>A(t)?p(t.id):f(t)))+r;}{if((0,E.default)(t.children))return p(t.id)+r;let e=o.getNodeLikeDatum(t.children.slice(-1)[0]);if((0,E.default)(e.children))return f(e)+r;let n=o.getDescendantsData(t.id).slice(-1)[0];return(A(n)?p(n.id):f(n))+r;}},t=>t.id),g=0,y={nodes:[],edges:[]},m=t=>{var e;null===(e=t.children)||void 0===e||e.forEach(t=>m(o.getNodeLikeDatum(t)));let n=f(t),r=h(t);if(y.nodes.push({id:t.id,x:r,y:n}),M(t))return;let a=o.getRelatedEdgesData(t.id,"in")[0],s=[c(t),A(t)?n:p(t.id)];y.edges.push({id:(0,S.idOf)(a),controlPoints:[s],relatedNodeId:t.id}),g=Math.max(g,r+i(t)),1===t.depth&&(d=g);};return m(t),y;}placeAlterative(t,e){let n=(e.children||[]).filter((t,e)=>e%2!=0);if(0===n.length)return t;let{model:i}=this.context,r=t.nodes.find(t=>t.id===e.id).y,a=t=>{let e=i.getAncestorsData(t,"tree");if((0,E.default)(e))return!1;let r=1===e.length?t:e[e.length-2].id;return n.includes(r);};t.nodes.forEach(t=>{a(t.id)&&(t.y=2*r-t.y);}),t.edges.forEach(t=>{a(t.relatedNodeId)&&(t.controlPoints=t.controlPoints.map(t=>[t[0],2*r-t[1]]));});}rightToLeft(t,e){return t.nodes.forEach(t=>t.x=e.width-t.x),t.edges.forEach(t=>{t.controlPoints=t.controlPoints.map(t=>[e.width-t[0],t[1]]);}),t;}execute(t,e){return P(this,void 0,void 0,function*(){let n=Object.assign(Object.assign(Object.assign({},C.defaultOptions),this.options),e),{direction:i,nodeSize:r}=n,a=this.getRoot();if(!a)return t;let s=this.formatSize(r);n.vGap||(n.vGap=Math.max(...(t.nodes||[]).map(t=>s(t)[1]))),n.hGap||(n.hGap=Math.max(...(t.nodes||[]).map(t=>s(t)[0])));let o=this.doLayout(a,n);this.placeAlterative(o,a),"RL"===i&&(o=this.rightToLeft(o,n));let{model:l}=this.context,d=[],u=[];return o.nodes.forEach(t=>{let{id:e,x:n,y:i}=t,r=l.getNodeLikeDatum(e);d.push(w(r,{x:n,y:i}));}),o.edges.forEach(t=>{let{id:e,controlPoints:n}=t,i=l.getEdgeDatum(e);u.push(w(i,{controlPoints:n}));}),{nodes:d,edges:u};});}}C.defaultOptions={direction:"RL",getRibSep:()=>60};let w=(t,e)=>Object.assign(Object.assign({},t),{style:Object.assign(Object.assign({},t.style||{}),e)}),M=t=>0===t.depth,A=t=>(t.depth||(t.depth=0))%2==0;var T=n("50905a3a"),B=this&&this.__awaiter||function(t,e,n,i){return new(n||(n=Promise))(function(r,a){function s(t){try{l(i.next(t));}catch(t){a(t);}}function o(t){try{l(i.throw(t));}catch(t){a(t);}}function l(t){var e;t.done?r(t.value):((e=t.value)instanceof n?e:new n(function(t){t(e);})).then(s,o);}l((i=i.apply(t,e||[])).next());});};class D extends b.BaseLayout{constructor(){super(...arguments),this.id="snake";}formatSize(t,e){let n="function"==typeof e?e:()=>e;return t.reduce((t,e)=>{let[i,r]=(0,_.parseSize)(n(e))||[0,0];return[Math.max(t[0],i),Math.max(t[1],r)];},[0,0]);}validate(t){let{nodes:e=[],edges:n=[]}=t,i={},r={},a={};e.forEach(t=>{i[t.id]=0,r[t.id]=0,a[t.id]=[];}),n.forEach(t=>{i[t.target]++,r[t.source]++,a[t.source].push(t.target);});let s=new Set,o=t=>{s.has(t)||(s.add(t),a[t].forEach(o));};if(o(e[0].id),s.size!==e.length)return!1;let l=e.filter(t=>0===i[t.id]),d=e.filter(t=>0===r[t.id]);return 1===l.length&&1===d.length&&e.filter(t=>1===i[t.id]&&1===r[t.id]).length===e.length-2;}execute(t,e){return B(this,void 0,void 0,function*(){var n;if(!this.validate(t))return t;let{nodeSize:i,padding:r,sortBy:a,cols:s,colGap:o,rowGap:l,clockwise:d,width:u,height:c}=Object.assign({},D.defaultOptions,this.options,e),[h,p,f,g]=(0,T.parsePadding)(r),y=this.formatSize(t.nodes||[],i),m=Math.ceil((t.nodes||[]).length/s),b=o||(u-g-p-s*y[0])/(s-1),v=l||(c-h-f-m*y[1])/(m-1);return(v===1/0||v<0)&&(v=0),(b===1/0||b<0)&&(b=0),{nodes:((a?null===(n=t.nodes)||void 0===n?void 0:n.sort(a):function(t){let{nodes:e=[],edges:n=[]}=t,i={},r={};e.forEach(t=>{i[t.id]=0,r[t.id]=[];}),n.forEach(t=>{i[t.target]++,r[t.source].push(t.target);});let a=[],s=[];for(e.forEach(t=>{0===i[t.id]&&a.push(t.id);});a.length>0;){let t=a.shift(),n=e.find(e=>e.id===t);s.push(n),r[t].forEach(t=>{i[t]--,0===i[t]&&a.push(t);});}return s;}(t))||[]).map((t,e)=>{let n=Math.floor(e/s),i=e%s,r=g+(d?n%2==0?i:s-1-i:n%2==0?s-1-i:i)*(y[0]+b)+y[0]/2,a=h+n*(y[1]+v)+y[1]/2;return{id:t.id,style:{x:r,y:a}};})};});}}D.defaultOptions={padding:0,cols:5,clockwise:!0};},"8a2f2f0b":function(t,e,n){"use strict";n.d(e,"__esModule",{value:!0}),n.e(e,{idOf:function(){return r;},idsOf:function(){return s;},parentIdOf:function(){return a;}});var i=n("16ea0f92");function r(t){if(void 0!==t.id)return t.id;if(void 0!==t.source&&void 0!==t.target)return`${t.source}-${t.target}`;throw Error((0,i.format)("The datum does not have available id."));}function a(t){return t.combo;}function s(t,e){let n={nodes:(t.nodes||[]).map(r),edges:(t.edges||[]).map(r),combos:(t.combos||[]).map(r)};return e?Object.values(n).flat():n;}},"8bee604c":function(t,e,n){"use strict";n.d(e,"__esModule",{value:!0}),n.d(e,"BaseElement",{enumerable:!0,get:function(){return r;}});var i=n("94ae1aef");class r extends i.BaseShape{get context(){return this.config.context;}get parsedAttributes(){return this.attributes;}onframe(){}animate(t,e){let n=super.animate(t,e);return n&&(n.onframe=()=>this.onframe(),n.finished.then(()=>this.onframe())),n;}}},"8c2b6959":function(t,e,n){"use strict";n.d(e,"__esModule",{value:!0}),n.d(e,"PinchHandler",{enumerable:!0,get:function(){return r;}});var i=n("d9033aa4");class r{constructor(t,e,n){if(this.phase=e,this.pointerByTouch=[],this.initialDistance=null,this.emitter=t,r.instance)return r.callbacks[this.phase].push(n),r.instance;this.onPointerDown=this.onPointerDown.bind(this),this.onPointerMove=this.onPointerMove.bind(this),this.onPointerUp=this.onPointerUp.bind(this),this.bindEvents(),r.instance=this,r.callbacks[this.phase].push(n);}bindEvents(){let{emitter:t}=this;t.on(i.CommonEvent.POINTER_DOWN,this.onPointerDown),t.on(i.CommonEvent.POINTER_MOVE,this.onPointerMove),t.on(i.CommonEvent.POINTER_UP,this.onPointerUp);}updatePointerPosition(t,e,n){let i=this.pointerByTouch.findIndex(e=>e.pointerId===t);i>=0&&(this.pointerByTouch[i]={x:e,y:n,pointerId:t});}onPointerDown(t){let{x:e,y:n}=t.client||{};if(void 0!==e&&void 0!==n&&(this.pointerByTouch.push({x:e,y:n,pointerId:t.pointerId}),"touch"===t.pointerType&&2===this.pointerByTouch.length)){r.isPinching=!0;let e=this.pointerByTouch[0].x-this.pointerByTouch[1].x,n=this.pointerByTouch[0].y-this.pointerByTouch[1].y;this.initialDistance=Math.sqrt(e*e+n*n),r.callbacks.pinchstart.forEach(e=>e(t,{scale:0}));}}onPointerMove(t){if(2!==this.pointerByTouch.length||null===this.initialDistance)return;let{x:e,y:n}=t.client||{};if(void 0===e||void 0===n)return;this.updatePointerPosition(t.pointerId,e,n);let i=this.pointerByTouch[0].x-this.pointerByTouch[1].x,a=this.pointerByTouch[0].y-this.pointerByTouch[1].y,s=Math.sqrt(i*i+a*a)/this.initialDistance;r.callbacks.pinchmove.forEach(e=>e(t,{scale:(s-1)*5}));}onPointerUp(t){var e;r.callbacks.pinchend.forEach(e=>e(t,{scale:0})),r.isPinching=!1,this.initialDistance=null,this.pointerByTouch=[],null===(e=r.instance)||void 0===e||e.tryDestroy();}destroy(){this.emitter.off(i.CommonEvent.POINTER_DOWN,this.onPointerDown),this.emitter.off(i.CommonEvent.POINTER_MOVE,this.onPointerMove),this.emitter.off(i.CommonEvent.POINTER_UP,this.onPointerUp),r.instance=null;}off(t,e){let n=r.callbacks[t].indexOf(e);n>-1&&r.callbacks[t].splice(n,1),this.tryDestroy();}tryDestroy(){Object.values(r.callbacks).every(t=>0===t.length)&&this.destroy();}}r.isPinching=!1,r.instance=null,r.callbacks={pinchstart:[],pinchmove:[],pinchend:[]};},"8c785db6":function(t,e,n){"use strict";var i=this&&this.__rest||function(t,e){var n={};for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&0>e.indexOf(i)&&(n[i]=t[i]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols)for(var r=0,i=Object.getOwnPropertySymbols(t);r<i.length;r++)0>e.indexOf(i[r])&&Object.prototype.propertyIsEnumerable.call(t,i[r])&&(n[i[r]]=t[i[r]]);return n;};Object.defineProperty(e,"__esModule",{value:!0}),e.HTML=void 0;let r=n("6824c090"),a=n("6ed2d3ba"),s=n("5a6910cd"),o=n("d0a8fc0a"),l=n("6d16dfc1");class d extends l.BaseNode{constructor(t){super(Object.assign(Object.assign({},t),{style:Object.assign({},d.defaultStyleProps,t.style)})),this.rootPointerEvent=new r.FederatedPointerEvent(null),this.forwardEvents=t=>{let e=this.context.canvas,n=e.context.renderingContext.root.ownerDocument.defaultView;this.normalizeToPointerEvent(t,n).forEach(i=>{let r=this.bootstrapEvent(this.rootPointerEvent,i,n,t);(0,s.set)(e.context.eventService,"mappingTable.pointerupoutside",[]),e.context.eventService.mapEvent(r);});};}get eventService(){return this.context.canvas.context.eventService;}get events(){return[o.CommonEvent.CLICK,o.CommonEvent.POINTER_DOWN,o.CommonEvent.POINTER_MOVE,o.CommonEvent.POINTER_UP,o.CommonEvent.POINTER_OVER,o.CommonEvent.POINTER_LEAVE];}getDomElement(){return this.getShape("key").getDomElement();}render(t=this.parsedAttributes,e=this){this.drawKeyShape(t,e),this.drawPortShapes(t,e);}getKeyStyle(t){let e=(0,s.pick)(t,["dx","dy","innerHTML","pointerEvents","cursor"]),{dx:n=0,dy:r=0}=e,a=i(e,["dx","dy"]),[o,l]=this.getSize(t);return Object.assign(Object.assign({x:n,y:r},a),{width:o,height:l});}drawKeyShape(t,e){let n=this.getKeyStyle(t),{x:i,y:a,width:s=0,height:o=0}=n,l=this.upsert("key-container",r.Rect,{x:i,y:a,width:s,height:o,opacity:0},e);return this.upsert("key",r.HTML,n,l);}connectedCallback(){if(!(this.context.canvas.getRenderer("main") instanceof a.Renderer))return;let t=this.getDomElement();this.events.forEach(e=>{t.addEventListener(e,this.forwardEvents);});}attributeChangedCallback(t,e,n){"zIndex"===t&&e!==n&&(this.getDomElement().style.zIndex=n);}destroy(){let t=this.getDomElement();this.events.forEach(e=>{t.removeEventListener(e,this.forwardEvents);}),super.destroy();}normalizeToPointerEvent(t,e){let n=[];if(e.isTouchEvent(t))for(let e=0;e<t.changedTouches.length;e++){let i=t.changedTouches[e];(0,s.isUndefined)(i.button)&&(i.button=0),(0,s.isUndefined)(i.buttons)&&(i.buttons=1),(0,s.isUndefined)(i.isPrimary)&&(i.isPrimary=1===t.touches.length&&"touchstart"===t.type),(0,s.isUndefined)(i.width)&&(i.width=i.radiusX||1),(0,s.isUndefined)(i.height)&&(i.height=i.radiusY||1),(0,s.isUndefined)(i.tiltX)&&(i.tiltX=0),(0,s.isUndefined)(i.tiltY)&&(i.tiltY=0),(0,s.isUndefined)(i.pointerType)&&(i.pointerType="touch"),(0,s.isUndefined)(i.pointerId)&&(i.pointerId=i.identifier||0),(0,s.isUndefined)(i.pressure)&&(i.pressure=i.force||.5),(0,s.isUndefined)(i.twist)&&(i.twist=0),(0,s.isUndefined)(i.tangentialPressure)&&(i.tangentialPressure=0),i.isNormalized=!0,i.type=t.type,n.push(i);}else e.isMouseEvent(t)&&((0,s.isUndefined)(t.isPrimary)&&(t.isPrimary=!0),(0,s.isUndefined)(t.width)&&(t.width=1),(0,s.isUndefined)(t.height)&&(t.height=1),(0,s.isUndefined)(t.tiltX)&&(t.tiltX=0),(0,s.isUndefined)(t.tiltY)&&(t.tiltY=0),(0,s.isUndefined)(t.pointerType)&&(t.pointerType="mouse"),(0,s.isUndefined)(t.pointerId)&&(t.pointerId=1),(0,s.isUndefined)(t.pressure)&&(t.pressure=.5),(0,s.isUndefined)(t.twist)&&(t.twist=0),(0,s.isUndefined)(t.tangentialPressure)&&(t.tangentialPressure=0),t.isNormalized=!0),n.push(t);return n;}transferMouseData(t,e){t.isTrusted=e.isTrusted,t.srcElement=e.srcElement,t.timeStamp=performance.now(),t.type=e.type,t.altKey=e.altKey,t.metaKey=e.metaKey,t.shiftKey=e.shiftKey,t.ctrlKey=e.ctrlKey,t.button=e.button,t.buttons=e.buttons,t.client.x=e.clientX,t.client.y=e.clientY,t.movement.x=e.movementX,t.movement.y=e.movementY,t.page.x=e.pageX,t.page.y=e.pageY,t.screen.x=e.screenX,t.screen.y=e.screenY,t.relatedTarget=null;}bootstrapEvent(t,e,n,i){t.view=n,t.originalEvent=null,t.nativeEvent=i,t.pointerId=e.pointerId,t.width=e.width,t.height=e.height,t.isPrimary=e.isPrimary,t.pointerType=e.pointerType,t.pressure=e.pressure,t.tangentialPressure=e.tangentialPressure,t.tiltX=e.tiltX,t.tiltY=e.tiltY,t.twist=e.twist,this.transferMouseData(t,e);let{x:r,y:a}=this.getViewportXY(e);t.viewport.x=r,t.viewport.y=a;let[s,o]=this.context.canvas.getCanvasByViewport([r,a]);return t.canvas.x=s,t.canvas.y=o,t.global.copyFrom(t.canvas),t.offset.copyFrom(t.canvas),t.isTrusted=i.isTrusted,"pointerleave"===t.type&&(t.type="pointerout"),t;}getViewportXY(t){let e,n;let{offsetX:i,offsetY:r,clientX:a,clientY:o}=t;if((0,s.isNil)(i)||(0,s.isNil)(r)){let t=this.eventService.client2Viewport({x:a,y:o});e=t.x,n=t.y;}else e=i,n=r;return{x:e,y:n};}onframe(){super.onframe();let{opacity:t}=this.attributes;this.getDomElement().style.opacity=`${t}`;}}e.HTML=d,d.defaultStyleProps={size:[160,80],halo:!1,icon:!1,label:!1,pointerEvents:"auto"};},"8f51b603":function(t,e,n){"use strict";n.d(e,"__esModule",{value:!0}),n.d(e,"BaseEdge",{enumerable:!0,get:function(){return v;}});var i=n("777fffbe"),r=n("852bbaa9"),a=n("a0f386cf"),s=i._(n("7e708962")),o=i._(n("0c915bb9")),l=n("bf55e093"),d=n("b5f0d953"),u=n("19365c34"),c=n("21954d01"),h=n("4c372554"),p=n("1165dca0"),f=r._(n("bfd3e1a0")),g=n("82395519"),y=n("8bee604c"),m=n("94ae1aef"),b=this&&this.__rest||function(t,e){var n={};for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&0>e.indexOf(i)&&(n[i]=t[i]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols)for(var r=0,i=Object.getOwnPropertySymbols(t);r<i.length;r++)0>e.indexOf(i[r])&&Object.prototype.propertyIsEnumerable.call(t,i[r])&&(n[i[r]]=t[i[r]]);return n;};class v extends y.BaseElement{constructor(t){super((0,p.mergeOptions)({style:v.defaultStyleProps},t)),this.type="edge";}get sourceNode(){let{sourceNode:t}=this.parsedAttributes;return this.context.element.getElement(t);}get targetNode(){let{targetNode:t}=this.parsedAttributes;return this.context.element.getElement(t);}getKeyStyle(t){let e=this.getGraphicStyle(t),{loop:n}=e,i=b(e,["loop"]),{sourceNode:r,targetNode:s}=this,o={d:n&&(0,u.isSameNode)(r,s)?this.getLoopPath(t):this.getKeyPath(t)};return a.Path.PARSED_STYLE_LIST.forEach(t=>{t in i&&(o[t]=i[t]);}),o;}getLoopPath(t){let{sourcePort:e,targetPort:n}=t,i=this.sourceNode,r=(0,l.getNodeBBox)(i),a=Math.max((0,l.getBBoxWidth)(r),(0,l.getBBoxHeight)(r)),{placement:s,clockwise:o,dist:u=a}=(0,c.subStyleProps)(this.getGraphicStyle(t),"loop");return(0,d.getCubicLoopPath)(i,s,o,u,e,n);}getEndpoints(t,e=!0,n=[]){let{sourcePort:i,targetPort:r}=t,{sourceNode:a,targetNode:s}=this,[o,l]=(0,u.findPorts)(a,s,i,r);if(!e)return[o?(0,u.getPortPosition)(o):a.getCenter(),l?(0,u.getPortPosition)(l):s.getCenter()];let d="function"==typeof n?n():n;return[(0,u.getConnectionPoint)(o||a,d[0]||l||s),(0,u.getConnectionPoint)(l||s,d[d.length-1]||o||a)];}getHaloStyle(t){if(!1===t.halo)return!1;let e=this.getKeyStyle(t),n=(0,c.subStyleProps)(this.getGraphicStyle(t),"halo");return Object.assign(Object.assign({},e),n);}getLabelStyle(t){if(!1===t.label||!t.labelText)return!1;let e=(0,c.subStyleProps)(this.getGraphicStyle(t),"label"),{placement:n,offsetX:i,offsetY:r,autoRotate:a,maxWidth:s}=e,o=b(e,["placement","offsetX","offsetY","autoRotate","maxWidth"]),l=(0,d.getLabelPositionStyle)(this.shapeMap.key,n,a,i,r),u=this.shapeMap.key.getLocalBounds();return Object.assign({wordWrapWidth:(0,g.getWordWrapWidthByEnds)([u.min,u.max],s)},l,o);}getBadgeStyle(t){if(!1===t.badge||!t.badgeText)return!1;let e=(0,c.subStyleProps)(t,"badge"),{offsetX:n,offsetY:i,placement:r}=e;return Object.assign(b(e,["offsetX","offsetY","placement"]),(0,d.getBadgePositionStyle)(this.shapeMap,r,t.labelPlacement,n,i));}drawArrow(t,e){var n;let i="start"===e,r=t["start"===e?"startArrow":"endArrow"],s=this.shapeMap.key;if(r){let e=this.getArrowStyle(t,i),[n,r,o]=i?["markerStart","markerStartOffset","startArrowOffset"]:["markerEnd","markerEndOffset","endArrowOffset"],l=s.parsedStyle[n];if(l)l.attr(e);else{let t=new(e.src?a.Image:a.Path)({style:e});s.style[n]=t;}s.style[r]=t[o]||e.width/2+ +e.lineWidth;}else{let t=i?"markerStart":"markerEnd";null===(n=s.style[t])||void 0===n||n.destroy(),s.style[t]=null;}}getArrowStyle(t,e){let n=this.getShape("key").attributes,i=(0,c.subStyleProps)(this.getGraphicStyle(t),e?"startArrow":"endArrow"),{size:r,type:a}=i,l=b(i,["size","type"]),[u,p]=(0,h.parseSize)((0,d.getArrowSize)(n.lineWidth,r)),g=((0,s.default)(a)?a:f[a]||f.triangle)(u,p);return Object.assign((0,o.default)(n,["stroke","strokeOpacity","fillOpacity"]),{width:u,height:p},Object.assign({},g&&{d:g,fill:"simple"===a?"":n.stroke}),l);}drawLabelShape(t,e){let n=this.getLabelStyle(t);this.upsert("label",m.Label,n,e);}drawHaloShape(t,e){let n=this.getHaloStyle(t);this.upsert("halo",a.Path,n,e);}drawBadgeShape(t,e){let n=this.getBadgeStyle(t);this.upsert("badge",m.Badge,n,e);}drawSourceArrow(t){this.drawArrow(t,"start");}drawTargetArrow(t){this.drawArrow(t,"end");}drawKeyShape(t,e){let n=this.getKeyStyle(t);return this.upsert("key",a.Path,n,e);}render(t=this.parsedAttributes,e=this){this.drawKeyShape(t,e),this.getShape("key")&&(this.drawSourceArrow(t),this.drawTargetArrow(t),this.drawLabelShape(t,e),this.drawHaloShape(t,e),this.drawBadgeShape(t,e));}onframe(){this.drawKeyShape(this.parsedAttributes,this),this.drawSourceArrow(this.parsedAttributes),this.drawTargetArrow(this.parsedAttributes),this.drawHaloShape(this.parsedAttributes,this),this.drawLabelShape(this.parsedAttributes,this),this.drawBadgeShape(this.parsedAttributes,this);}animate(t,e){let n=super.animate(t,e);return n?new Proxy(n,{set:(t,e,n)=>("currentTime"===e&&Promise.resolve().then(()=>this.onframe()),Reflect.set(t,e,n))}):n;}}v.defaultStyleProps={badge:!0,badgeOffsetX:0,badgeOffsetY:0,badgePlacement:"suffix",isBillboard:!0,label:!0,labelAutoRotate:!0,labelIsBillboard:!0,labelMaxWidth:"80%",labelOffsetX:4,labelOffsetY:0,labelPlacement:"center",labelTextBaseline:"middle",labelWordWrap:!1,halo:!1,haloDroppable:!1,haloLineDash:0,haloLineWidth:12,haloPointerEvents:"none",haloStrokeOpacity:.25,haloZIndex:-1,loop:!0,startArrow:!1,startArrowLineDash:0,startArrowLineJoin:"round",startArrowLineWidth:1,startArrowTransformOrigin:"center",startArrowType:"vee",endArrow:!1,endArrowLineDash:0,endArrowLineJoin:"round",endArrowLineWidth:1,endArrowTransformOrigin:"center",endArrowType:"vee",loopPlacement:"top",loopClockwise:!0};},"90e176a1":function(t,e,n){"use strict";n.d(e,"__esModule",{value:!0}),e.Hexagon=void 0;let i=n("757ae0a3"),r=n("734c52ec"),a=n("aaa87daa");class s extends a.Polygon{constructor(t){super(t);}getOuterR(t){return t.outerR||Math.min(...this.getSize(t))/2;}getPoints(t){return(0,r.getHexagonPoints)(this.getOuterR(t));}getIconStyle(t){let e=super.getIconStyle(t),n=this.getOuterR(t)*i.ICON_SIZE_RATIO;return!!e&&Object.assign({width:n,height:n},e);}}e.Hexagon=s;},"910c4676":function(t,e,n){"use strict";n.d(e,"__esModule",{value:!0}),n.d(e,"Donut",{enumerable:!0,get:function(){return p;}});var i=n("777fffbe"),r=n("a0f386cf"),a=i._(n("4c900b62")),s=i._(n("1304978e")),o=n("37005793"),l=n("21954d01"),d=n("4c372554"),u=n("1165dca0"),c=n("66244d96"),h=this&&this.__rest||function(t,e){var n={};for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&0>e.indexOf(i)&&(n[i]=t[i]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols)for(var r=0,i=Object.getOwnPropertySymbols(t);r<i.length;r++)0>e.indexOf(i[r])&&Object.prototype.propertyIsEnumerable.call(t,i[r])&&(n[i[r]]=t[i[r]]);return n;};class p extends c.Circle{constructor(t){super((0,u.mergeOptions)({style:p.defaultStyleProps},t));}parseOuterR(){let{size:t}=this.parsedAttributes;return Math.min(...(0,d.parseSize)(t))/2;}parseInnerR(){let{innerR:t}=this.parsedAttributes;return(0,s.default)(t)?parseInt(t)/100*this.parseOuterR():t;}drawDonutShape(t,e){let{donuts:n}=t;if(!(null==n?void 0:n.length))return;let i=n.map(t=>(0,a.default)(t)?{value:t}:t),s=(0,l.subStyleProps)(this.getGraphicStyle(t),"donut"),d=(0,o.getPaletteColors)(t.donutPalette);if(!d)return;let u=i.reduce((t,e)=>{var n;return t+(null!==(n=e.value)&&void 0!==n?n:0);},0),c=this.parseOuterR(),p=this.parseInnerR(),f=0;i.forEach((t,n)=>{let{value:a=0,color:o=d[n%d.length]}=t,l=h(t,["value","color"]),g=(0===u?1/i.length:a/u)*360;this.upsert(`round${n}`,r.Path,Object.assign(Object.assign(Object.assign({},s),{d:m(c,p,f,f+g),fill:o}),l),e),f+=g;});}render(t,e=this){super.render(t,e),this.drawDonutShape(t,e);}}p.defaultStyleProps={innerR:"50%",donuts:[],donutPalette:"tableau"};let f=(t,e,n,i)=>[t+Math.sin(i)*n,e-Math.cos(i)*n],g=(t,e,n,i)=>i<=0||n<=i?[["M",t-n,e],["A",n,n,0,1,1,t+n,e],["A",n,n,0,1,1,t-n,e],["Z"]]:[["M",t-n,e],["A",n,n,0,1,1,t+n,e],["A",n,n,0,1,1,t-n,e],["Z"],["M",t+i,e],["A",i,i,0,1,0,t-i,e],["A",i,i,0,1,0,t+i,e],["Z"]],y=(t,e,n,i,r,a)=>{let[s,o]=[r/360*2*Math.PI,a/360*2*Math.PI],l=[f(t,e,i,s),f(t,e,n,s),f(t,e,n,o),f(t,e,i,o)],d=o-s>Math.PI?1:0;return[["M",l[0][0],l[0][1]],["L",l[1][0],l[1][1]],["A",n,n,0,d,1,l[2][0],l[2][1]],["L",l[3][0],l[3][1]],["A",i,i,0,d,0,l[0][0],l[0][1]],["Z"]];},m=(t=0,e=0,n,i)=>{let[r,a]=[0,0];return Math.abs(n-i)%360<1e-6?g(r,a,t,e):y(r,a,t,e,n,i);};},"9188883e":function(t,e,n){"use strict";n.d(e,"__esModule",{value:!0}),e.parsePalette=function(t){if(t)return"string"==typeof t||"function"==typeof t||Array.isArray(t)?{type:"group",field:t=>t.id,color:t,invert:!1}:t;},e.assignColorByPalette=function(t,e){if(!e)return{};let{type:n,color:o,field:l,invert:d}=e,u=t=>{let e="string"==typeof o?(0,r.getExtension)("palette",o):o;if("function"==typeof e){let n={};return t.forEach(([t,i])=>{n[t]=e(d?1-i:i);}),n;}if(Array.isArray(e)){let n=d?[...e].reverse():e,i={};return t.forEach(([t,r])=>{i[t]=n[r%e.length];}),i;}return{};},c=(t,e)=>{var n;return"string"==typeof t?null===(n=e.data)||void 0===n?void 0:n[t]:null==t?void 0:t(e);};if("group"===n){let e=(0,i.groupBy)(t,t=>{if(!l)return"default";let e=c(l,t);return e?String(e):"default";}),n=u(Object.keys(e).map((t,e)=>[t,e])),r={};return Object.entries(e).forEach(([t,e])=>{e.forEach(e=>{r[(0,a.idOf)(e)]=n[t];});}),r;}if("value"===n){let[e,n]=t.reduce(([t,e],n)=>{let i=c(l,n);if("number"!=typeof i)throw Error((0,s.format)(`Palette field ${l} is not a number`));return[Math.min(t,i),Math.max(e,i)];},[1/0,-1/0]),i=n-e;return u(t.map(t=>[t.id,(c(l,t)-e)/i]));}},e.getPaletteColors=function(t){let e="string"==typeof t?(0,r.getExtension)("palette",t):t;if("function"!=typeof e)return e;};let i=n("5a6910cd"),r=n("b83e3ebb"),a=n("0e886f4f"),s=n("22189803");},"91a7def3":function(t,e,n){"use strict";n.d(e,"__esModule",{value:!0}),n.e(e,{BaseNode:function(){return i.BaseNode;},Circle:function(){return r.Circle;},Diamond:function(){return a.Diamond;},Donut:function(){return s.Donut;},Ellipse:function(){return o.Ellipse;},HTML:function(){return d.HTML;},Hexagon:function(){return l.Hexagon;},Image:function(){return u.Image;},Rect:function(){return c.Rect;},Star:function(){return h.Star;},Triangle:function(){return p.Triangle;}});var i=n("eeff6888"),r=n("66244d96"),a=n("56ca1d0f"),s=n("910c4676"),o=n("4d3c39dc"),l=n("aa22965f"),d=n("3534b48c"),u=n("bb586283"),c=n("24a05102"),h=n("9472950b"),p=n("0f0756eb");},"9472950b":function(t,e,n){"use strict";n.d(e,"__esModule",{value:!0}),n.d(e,"Star",{enumerable:!0,get:function(){return s;}});var i=n("6ed5e4e8"),r=n("19365c34"),a=n("c24cd24c");class s extends a.Polygon{constructor(t){super(t);}getInnerR(t){return t.innerR||3*this.getOuterR(t)/8;}getOuterR(t){return Math.min(...this.getSize(t))/2;}getPoints(t){return(0,r.getStarPoints)(this.getOuterR(t),this.getInnerR(t));}getIconStyle(t){let e=super.getIconStyle(t),n=2*this.getInnerR(t)*i.ICON_SIZE_RATIO;return!!e&&Object.assign({width:n,height:n},e);}getPortXY(t,e){let{placement:n="top"}=e,i=this.getShape("key").getLocalBounds(),a=(0,r.getStarPorts)(this.getOuterR(t),this.getInnerR(t));return(0,r.getPortXYByPlacement)(i,n,a,!1);}}},"94ae1aef":function(t,e,n){"use strict";n.d(e,"__esModule",{value:!0}),n.e(e,{Badge:function(){return i.Badge;},BaseShape:function(){return r.BaseShape;},Contour:function(){return a.Contour;},Icon:function(){return s.Icon;},Image:function(){return o.Image;},Label:function(){return l.Label;}});var i=n("6e7a0d7a"),r=n("20ac0f24"),a=n("dd9e7004"),s=n("5df5c1a7"),o=n("9a8606f2"),l=n("6220e010");},"9a4bd378":function(t,e,n){"use strict";n.d(e,"__esModule",{value:!0}),e.RectCombo=void 0;let i=n("6824c090"),r=n("50674fdc"),a=n("885a33c3");class s extends a.BaseCombo{constructor(t){super(t);}drawKeyShape(t,e){return this.upsert("key",i.Rect,this.getKeyStyle(t),e);}getKeyStyle(t){let e=super.getKeyStyle(t),[n,i]=this.getKeySize(t);return Object.assign(Object.assign(Object.assign({},e),t.collapsed&&(0,r.subStyleProps)(e,"collapsed")),{width:n,height:i,x:-n/2,y:-i/2});}}e.RectCombo=s;},"9a8606f2":function(t,e,n){"use strict";n.d(e,"__esModule",{value:!0}),n.e(e,{Image:function(){return a;},connectImage:function(){return l;},dispatchPositionChange:function(){return d;}});var i=n("a0f386cf"),r=n("01355b81");class a extends i.Image{constructor(t){super(t),this.onMounted=()=>{this.handleRadius();},this.onAttrModified=()=>{this.handleRadius();},o=this,this.isMutationObserved=!0,this.addEventListener(i.ElementEvent.MOUNTED,this.onMounted),this.addEventListener(i.ElementEvent.ATTR_MODIFIED,this.onAttrModified);}handleRadius(){let{radius:t,clipPath:e,width:n=0,height:r=0}=this.attributes;if(t&&n&&r){let[a,s]=this.getBounds().min,o={x:a,y:s,radius:t,width:n,height:r};if(e)Object.assign(this.parsedStyle.clipPath.style,o);else{let t=new i.Rect({style:o});this.style.clipPath=t;}}else e&&(this.style.clipPath=null);}}let s=new WeakMap,o=null,l=t=>{if(o&&(0,r.getAncestorShapes)(o).includes(t)){let e=s.get(t);e?e.includes(o)||e.push(o):s.set(t,[o]);}},d=t=>{let e=s.get(t);e&&e.forEach(t=>t.handleRadius());};},"9a99919f":function(t,e,n){"use strict";n.d(e,"__esModule",{value:!0}),n.d(e,"executor",{enumerable:!0,get:function(){return o;}});var i=n("777fffbe")._(n("e37c4e15")),r=n("9c1281e1"),a=n("399ba410"),s=this&&this.__rest||function(t,e){var n={};for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&0>e.indexOf(i)&&(n[i]=t[i]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols)for(var r=0,i=Object.getOwnPropertySymbols(t);r<i.length;r++)0>e.indexOf(i[r])&&Object.prototype.propertyIsEnumerable.call(t,i[r])&&(n[i[r]]=t[i[r]]);return n;};let o=(t,e,n)=>{let o;if(!n.length)return null;let[l,d]=e,u=e=>{var n;if(!e)return{shape:t,fromStyle:l,toStyle:d};{let r=t.getShape(e);if(!r)return null;let a=`get${(0,i.default)(e)}Style`,s=(null===(n=null==t?void 0:t[a])||void 0===n?void 0:n.bind(t))||(t=>t);return{shape:r,fromStyle:(null==s?void 0:s(l))||{},toStyle:(null==s?void 0:s(d))||{}};}},c=n.map(t=>{var{fields:e,shape:n,states:i}=t,l=s(t,["fields","shape","states"]);let d=u(n);if(!d)return null;let{shape:c,fromStyle:h,toStyle:p}=d,f=[{},{}];if(e.forEach(t=>{var e,n;Object.assign(f[0],{[t]:null!==(e=h[t])&&void 0!==e?e:(0,r.inferDefaultValue)(t)}),Object.assign(f[1],{[t]:null!==(n=p[t])&&void 0!==n?n:(0,r.inferDefaultValue)(t)});}),f.some(t=>Object.keys(t).some(t=>["x","y","z"].includes(t)))){let{x:t=0,y:e=0,z:n,transform:i=""}=c.attributes||{};f.forEach(r=>{var s,o,l;r.transform=(0,a.replaceTranslateInTransform)(null!==(s=r.x)&&void 0!==s?s:t,null!==(o=r.y)&&void 0!==o?o:e,null!==(l=r.z)&&void 0!==l?l:n,i);});}let g=c.animate((0,r.preprocessKeyframes)(f),l);return void 0===n&&(o=g),g;}).filter(Boolean),h=o||(null==c?void 0:c[0]);return h?(0,r.createAnimationsProxy)(h,c.filter(t=>t!=t)):null;};},"9ab824f6":function(t,e,n){n.d(e,"__esModule",{value:!0});var i=n("d1751d7c"),r=n("a0f386cf");n("9a99919f");let a=[{fields:["x","y"]}],s=[{fields:["sourceNode","targetNode"]}],o=[{fields:["childrenNode","x","y"]}];var l=n("4e152f1d"),d=n("52f60d29"),u=n("94ae1aef"),c=n("89ac127e"),h=n("35fa4d01");let p=["#7E92B5","#F4664A","#FFBE3A"],f={type:"group",color:["#1783FF","#00C9C9","#F08F56","#D580FF","#7863FF","#DB9D0D","#60C42D","#FF80CA","#2491B3","#17C76F"]},g={type:"group",color:["#99ADD1","#1783FF","#00C9C9","#F08F56","#D580FF","#7863FF","#DB9D0D","#60C42D","#FF80CA","#2491B3","#17C76F"]};function y(t){let{bgColor:e,textColor:n,nodeColor:i,nodeColorDisabled:r,nodeStroke:a,nodeHaloStrokeOpacityActive:s=.15,nodeHaloStrokeOpacitySelected:o=.25,nodeOpacityDisabled:l=.06,nodeIconOpacityInactive:d=.85,nodeOpacityInactive:u=.25,nodeBadgePalette:c=p,nodePaletteOptions:h=f,edgeColor:y,edgeColorDisabled:m,edgePaletteOptions:b=g,comboColor:v,comboColorDisabled:E,comboStroke:x,comboStrokeDisabled:O,edgeColorInactive:S}=t;return{background:e,node:{palette:h,style:{donutOpacity:1,badgeBackgroundOpacity:1,badgeFill:"#fff",badgeFontSize:8,badgePadding:[0,4],badgePalette:c,fill:i,fillOpacity:1,halo:!1,iconFill:"#fff",iconOpacity:1,labelBackground:!1,labelBackgroundFill:e,labelBackgroundLineWidth:0,labelBackgroundOpacity:.75,labelFill:n,labelFillOpacity:.85,labelLineHeight:16,labelPadding:[0,2],labelFontSize:12,labelFontWeight:400,labelOpacity:1,labelOffsetY:2,lineWidth:0,portFill:i,portLineWidth:1,portStroke:a,portStrokeOpacity:.65,size:32,stroke:a,strokeOpacity:1,zIndex:2},state:{selected:{halo:!0,haloLineWidth:24,haloStrokeOpacity:o,labelFontSize:12,labelFontWeight:"bold",lineWidth:4,stroke:a},active:{halo:!0,haloLineWidth:12,haloStrokeOpacity:s},highlight:{labelFontWeight:"bold",lineWidth:4,stroke:a,strokeOpacity:.85},inactive:{badgeBackgroundOpacity:u,donutOpacity:u,fillOpacity:u,iconOpacity:d,labelFill:n,labelFillOpacity:u,strokeOpacity:u},disabled:{badgeBackgroundOpacity:.25,donutOpacity:l,fill:r,fillOpacity:l,iconFill:r,iconOpacity:.25,labelFill:n,labelFillOpacity:.25,strokeOpacity:l}},animation:{enter:"fade",exit:"fade",show:"fade",hide:"fade",expand:"node-expand",collapse:"node-collapse",update:[{fields:["x","y","fill","stroke"]}],translate:[{fields:["x","y"]}]}},edge:{palette:b,style:{badgeBackgroundFill:y,badgeFill:"#fff",badgeFontSize:8,badgeOffsetX:10,fillOpacity:1,halo:!1,haloLineWidth:12,haloStrokeOpacity:1,increasedLineWidthForHitTesting:2,labelBackground:!1,labelBackgroundFill:e,labelBackgroundLineWidth:0,labelBackgroundOpacity:.75,labelBackgroundPadding:[4,4,4,4],labelFill:n,labelFontSize:12,labelFontWeight:400,labelOpacity:1,labelPlacement:"center",labelTextBaseline:"middle",lineWidth:1,stroke:y,strokeOpacity:1,zIndex:1},state:{selected:{halo:!0,haloStrokeOpacity:.25,labelFontSize:14,labelFontWeight:"bold",lineWidth:3},active:{halo:!0,haloStrokeOpacity:.15},highlight:{labelFontWeight:"bold",lineWidth:3},inactive:{stroke:S,fillOpacity:.08,labelOpacity:.25,strokeOpacity:.08,badgeBackgroundOpacity:.25},disabled:{stroke:m,fillOpacity:.45,strokeOpacity:.45,labelOpacity:.25,badgeBackgroundOpacity:.45}},animation:{enter:"fade",exit:"fade",expand:"path-in",collapse:"path-out",show:"fade",hide:"fade",update:[{fields:["sourceNode","targetNode"]},{fields:["stroke"],shape:"key"}],translate:[{fields:["sourceNode","targetNode"]}]}},combo:{style:{collapsedMarkerFill:e,collapsedMarkerFontSize:12,collapsedMarkerFillOpacity:1,collapsedSize:32,collapsedFillOpacity:1,fill:v,halo:!1,haloLineWidth:12,haloStroke:x,haloStrokeOpacity:.25,labelBackground:!1,labelBackgroundFill:e,labelBackgroundLineWidth:0,labelBackgroundOpacity:.75,labelBackgroundPadding:[2,4,2,4],labelFill:n,labelFontSize:12,labelFontWeight:400,labelOpacity:1,lineDash:0,lineWidth:1,fillOpacity:.04,strokeOpacity:1,padding:10,stroke:x},state:{selected:{halo:!0,labelFontSize:14,labelFontWeight:700,lineWidth:4},active:{halo:!0},highlight:{labelFontWeight:700,lineWidth:4},inactive:{fillOpacity:.65,labelOpacity:.25,strokeOpacity:.65},disabled:{fill:E,fillOpacity:.25,labelOpacity:.25,stroke:O,strokeOpacity:.25}},animation:{enter:"fade",exit:"fade",show:"fade",hide:"fade",expand:"combo-expand",collapse:"combo-collapse",update:[{fields:["x","y"]},{fields:["fill","stroke","lineWidth"],shape:"key"}],translate:[{fields:["x","y"]}]}}};}let m=y({bgColor:"#000000",comboColor:"#fdfdfd",comboColorDisabled:"#d0e4ff",comboStroke:"#99add1",comboStrokeDisabled:"#969696",edgeColor:"#637088",edgeColorDisabled:"#637088",edgeColorInactive:"#D0E4FF",edgePaletteOptions:{type:"group",color:["#637088","#0F55A6","#008383","#9C5D38","#8B53A6","#4E40A6","#8F6608","#3E801D","#A65383","#175E75","#0F8248"]},nodeColor:"#1783ff",nodeColorDisabled:"#D0E4FF",nodeHaloStrokeOpacityActive:.25,nodeHaloStrokeOpacitySelected:.45,nodeIconOpacityInactive:.45,nodeOpacityDisabled:.25,nodeOpacityInactive:.45,nodeStroke:"#d0e4ff",textColor:"#ffffff"}),b=y({bgColor:"#ffffff",comboColor:"#99ADD1",comboColorDisabled:"#f0f0f0",comboStroke:"#99add1",comboStrokeDisabled:"#d9d9d9",edgeColor:"#99add1",edgeColorDisabled:"#d9d9d9",edgeColorInactive:"#1B324F",nodeColor:"#1783ff",nodeColorDisabled:"#1B324F",nodeHaloStrokeOpacityActive:.15,nodeHaloStrokeOpacitySelected:.25,nodeIconOpacityInactive:.85,nodeOpacityDisabled:.06,nodeOpacityInactive:.25,nodeStroke:"#000000",textColor:"#000000"});var v=n("2177267d"),E=n("c2d5d9cb");Object.entries({animation:{"combo-collapse":o,"combo-expand":o,"node-collapse":a,"node-expand":a,"path-in":s,"path-out":s,fade:[{fields:["opacity"]}],translate:[{fields:["x","y"]}]},behavior:{"brush-select":l.BrushSelect,"click-select":l.ClickSelect,"collapse-expand":l.CollapseExpand,"create-edge":l.CreateEdge,"drag-canvas":l.DragCanvas,"drag-element-force":l.DragElementForce,"drag-element":l.DragElement,"fix-element-size":l.FixElementSize,"focus-element":l.FocusElement,"hover-activate":l.HoverActivate,"lasso-select":l.LassoSelect,"auto-adapt-label":l.AutoAdaptLabel,"optimize-viewport-transform":l.OptimizeViewportTransform,"scroll-canvas":l.ScrollCanvas,"zoom-canvas":l.ZoomCanvas},combo:{circle:d.CircleCombo,rect:d.RectCombo},edge:{cubic:d.Cubic,line:d.Line,polyline:d.Polyline,quadratic:d.Quadratic,"cubic-horizontal":d.CubicHorizontal,"cubic-radial":d.CubicRadial,"cubic-vertical":d.CubicVertical},layout:{"antv-dagre":c.AntVDagreLayout,"combo-combined":c.ComboCombinedLayout,"compact-box":c.compactBox,"d3-force":c.D3ForceLayout,"force-atlas2":c.ForceAtlas2Layout,circular:c.CircularLayout,concentric:c.ConcentricLayout,dagre:c.DagreLayout,dendrogram:c.dendrogram,fishbone:c.FishboneLayout,force:c.ForceLayout,fruchterman:c.FruchtermanLayout,grid:c.GridLayout,indented:c.indented,mds:c.MDSLayout,mindmap:c.mindmap,radial:c.RadialLayout,random:c.RandomLayout,snake:c.SnakeLayout},node:{circle:d.Circle,diamond:d.Diamond,ellipse:d.Ellipse,hexagon:d.Hexagon,html:d.HTML,image:d.Image,rect:d.Rect,star:d.Star,donut:d.Donut,triangle:d.Triangle},palette:{spectral:["rgb(158, 1, 66)","rgb(213, 62, 79)","rgb(244, 109, 67)","rgb(253, 174, 97)","rgb(254, 224, 139)","rgb(255, 255, 191)","rgb(230, 245, 152)","rgb(171, 221, 164)","rgb(102, 194, 165)","rgb(50, 136, 189)","rgb(94, 79, 162)"],tableau:["rgb(78, 121, 167)","rgb(242, 142, 44)","rgb(225, 87, 89)","rgb(118, 183, 178)","rgb(89, 161, 79)","rgb(237, 201, 73)","rgb(175, 122, 161)","rgb(255, 157, 167)","rgb(156, 117, 95)","rgb(186, 176, 171)"],oranges:["rgb(255, 245, 235)","rgb(254, 230, 206)","rgb(253, 208, 162)","rgb(253, 174, 107)","rgb(253, 141, 60)","rgb(241, 105, 19)","rgb(217, 72, 1)","rgb(166, 54, 3)","rgb(127, 39, 4)"],greens:["rgb(247, 252, 245)","rgb(229, 245, 224)","rgb(199, 233, 192)","rgb(161, 217, 155)","rgb(116, 196, 118)","rgb(65, 171, 93)","rgb(35, 139, 69)","rgb(0, 109, 44)","rgb(0, 68, 27)"],blues:["rgb(247, 251, 255)","rgb(222, 235, 247)","rgb(198, 219, 239)","rgb(158, 202, 225)","rgb(107, 174, 214)","rgb(66, 146, 198)","rgb(33, 113, 181)","rgb(8, 81, 156)","rgb(8, 48, 107)"]},theme:{dark:m,light:b},plugin:{"bubble-sets":h.BubbleSets,"edge-bundling":h.EdgeBundling,"edge-filter-lens":h.EdgeFilterLens,"grid-line":h.GridLine,background:h.Background,contextmenu:h.Contextmenu,fisheye:h.Fisheye,fullscreen:h.Fullscreen,history:h.History,hull:h.Hull,legend:h.Legend,minimap:h.Minimap,snapline:h.Snapline,timebar:h.Timebar,toolbar:h.Toolbar,tooltip:h.Tooltip,watermark:h.Watermark},transform:{"arrange-draw-order":v.ArrangeDrawOrder,"collapse-expand-combo":v.CollapseExpandCombo,"collapse-expand-node":v.CollapseExpandNode,"get-edge-actual-ends":v.GetEdgeActualEnds,"map-node-size":v.MapNodeSize,"place-radial-labels":v.PlaceRadialLabels,"process-parallel-edges":v.ProcessParallelEdges,"update-related-edges":v.UpdateRelatedEdge},shape:{circle:r.Circle,ellipse:r.Ellipse,group:r.Group,html:r.HTML,image:u.Image,line:r.Line,path:r.Path,polygon:r.Polygon,polyline:r.Polyline,rect:r.Rect,text:r.Text,label:u.Label,badge:u.Badge}}).forEach(([t,e])=>{Object.entries(e).forEach(([e,n])=>{(0,E.register)(t,e,n);});}),i._(n("ff2f2802"),e),n("d65d2c90");},"9ae59709":function(t,e,n){"use strict";n.d(e,"__esModule",{value:!0}),n.d(e,"CollapseExpandCombo",{enumerable:!0,get:function(){return d;}});var i=n("d9033aa4"),r=n("e1c279a0"),a=n("b5f0d953"),s=n("8a2f2f0b"),o=n("a7082564"),l=n("50c39bee");class d extends o.BaseTransform{beforeDraw(t,e){if("visibility"===e.stage||!this.context.model.model.hasTreeStructure(i.COMBO_KEY))return t;let{model:n}=this.context,{add:o,update:d}=t,u=[...t.update.combos.entries(),...t.add.combos.entries()];for(;u.length;){let[e,i]=u.pop();if((0,r.isCollapsed)(i)){let i=n.getDescendantsData(e),r=i.map(s.idOf),{internal:c,external:h}=(0,a.getSubgraphRelatedEdges)(r,t=>n.getRelatedEdgesData(t));i.forEach(e=>{let i=(0,s.idOf)(e),r=u.findIndex(([t])=>t===i);-1!==r&&u.splice(r,1);let a=n.getElementType(i);(0,l.reassignTo)(t,"remove",a,e);}),c.forEach(e=>(0,l.reassignTo)(t,"remove","edge",e)),h.forEach(t=>{var e;let n=(0,s.idOf)(t);(null===(e=this.context.element)||void 0===e?void 0:e.getElement(n))?d.edges.set(n,t):o.edges.set(n,t);});}else{let i=n.getChildrenData(e),r=i.map(s.idOf),{edges:o}=(0,a.getSubgraphRelatedEdges)(r,t=>n.getRelatedEdgesData(t));[...i,...o].forEach(e=>{var i;let r=(0,s.idOf)(e),a=n.getElementType(r);(null===(i=this.context.element)||void 0===i?void 0:i.getElement(r))?(0,l.reassignTo)(t,"update",a,e):(0,l.reassignTo)(t,"add",a,e),"combo"===a&&u.push([r,e]);});}}return t;}}},"9bd5908a":function(t,e,n){"use strict";n.d(e,"__esModule",{value:!0}),e.simple=e.triangleRect=e.rect=e.vee=e.diamond=e.triangle=e.circle=void 0,e.circle=(t,e)=>{let n=Math.max(t,e)/2;return[["M",-t/2,0],["A",n,n,0,1,0,2*n-t/2,0],["A",n,n,0,1,0,-t/2,0],["Z"]];},e.triangle=(t,e)=>[["M",-t/2,0],["L",t/2,-e/2],["L",t/2,e/2],["Z"]],e.diamond=(t,e)=>[["M",-t/2,0],["L",0,-e/2],["L",t/2,0],["L",0,e/2],["Z"]],e.vee=(t,e)=>[["M",-t/2,0],["L",t/2,-e/2],["L",4*t/5-t/2,0],["L",t/2,e/2],["Z"]],e.rect=(t,e)=>[["M",-t/2,-e/2],["L",t/2,-e/2],["L",t/2,e/2],["L",-t/2,e/2],["Z"]],e.triangleRect=(t,e)=>{let n=t/2,i=t/7,r=t-i;return[["M",-n,0],["L",0,-e/2],["L",0,e/2],["Z"],["M",r-n,-e/2],["L",r+i-n,-e/2],["L",r+i-n,e/2],["L",r-n,e/2],["Z"]];},e.simple=(t,e)=>[["M",t/2,-e/2],["L",-t/2,0],["L",t/2,0],["L",-t/2,0],["L",t/2,e/2]];},"9c1281e1":function(t,e,n){"use strict";n.d(e,"__esModule",{value:!0}),n.e(e,{createAnimationsProxy:function(){return c;},getAnimationOptions:function(){return f;},getElementAnimationOptions:function(){return g;},inferDefaultValue:function(){return p;},preprocessKeyframes:function(){return h;}});var i=n("777fffbe"),r=i._(n("e602108f")),a=i._(n("1c656441")),s=i._(n("dfd51207")),o=n("d9033aa4"),l=n("e8f8b56e"),d=n("16ea0f92"),u=n("8911aa19");function c(t,e){if(Array.isArray(t)&&0===t.length)return null;let n=Array.isArray(t)?t[0]:t,i=Array.isArray(t)?t.slice(1):e||[];return new Proxy(n,{get:(t,e)=>"function"!=typeof t[e]||["onframe","onfinish"].includes(e)?"finished"===e?Promise.all([n.finished,...i.map(t=>t.finished)]):Reflect.get(t,e):(...n)=>{t[e](...n),i.forEach(t=>{var i;return null===(i=t[e])||void 0===i?void 0:i.call(t,...n);});},set:(t,e,n)=>(["onframe","onfinish"].includes(e)||i.forEach(t=>{t[e]=n;}),Reflect.set(t,e,n))});}function h(t){let e=t.reduce((t,e)=>(Object.entries(e).forEach(([e,n])=>{void 0===t[e]?t[e]=[n]:t[e].push(n);}),t),{});Object.entries(e).forEach(([n,i])=>{(i.length!==t.length||i.some(t=>(0,a.default)(t))||i.every(t=>!["sourceNode","targetNode","childrenNode"].includes(n)&&(0,r.default)(t,i[0])))&&delete e[n];});let n=Object.entries(e).reduce((t,[e,n])=>(n.forEach((n,i)=>{t[i]?t[i][e]=n:t[i]={[e]:n};}),t),[]);return 0!==t.length&&0===n.length&&n.push({_:0},{_:0}),n;}function p(t){switch(t){case"opacity":return 1;case"x":case"y":case"z":case"zIndex":return 0;case"visibility":return"visible";case"collapsed":return!1;case"states":return[];default:return;}}function f(t,e){let{animation:n}=t;if(!1===n||!1===e)return!1;let i=Object.assign({},o.DEFAULT_ANIMATION_OPTIONS);return(0,s.default)(n)&&Object.assign(i,n),(0,s.default)(e)&&Object.assign(i,e),i;}function g(t,e,n,i){var r,a;let{animation:c}=t;if(!1===c||!1===i)return[];let h=null===(r=null==t?void 0:t[e])||void 0===r?void 0:r.animation;if(!1===h)return[];let p=null==h?void 0:h[n];if(!1===p)return[];let f=null===(a=(0,u.themeOf)(t)[e])||void 0===a?void 0:a.animation,g=(t=[])=>{var e;return("string"==typeof(e=t)?(0,l.getExtension)(o.ExtensionCategory.ANIMATION,e)||(d.print.warn(`The animation of ${e} is not registered.`),[]):e).map(t=>Object.assign(Object.assign(Object.assign(Object.assign({},o.DEFAULT_ELEMENTS_ANIMATION_OPTIONS),(0,s.default)(c)&&c),t),(0,s.default)(i)&&i));};if(p)return g(p);if(!f)return[];let y=f[n];return!1===y?[]:g(y);}},"9d4ee1c4":function(t,e,n){"use strict";n.d(e,"__esModule",{value:!0}),e.isBetween=function(t,e,n){return t>=e&&t<=n;};},"9e9508a0":function(t,e,n){"use strict";var i=this&&this.__createBinding||(Object.create?function(t,e,n,i){void 0===i&&(i=n);var r=Object.getOwnPropertyDescriptor(e,n);(!r||("get"in r?!e.__esModule:r.writable||r.configurable))&&(r={enumerable:!0,get:function(){return e[n];}}),Object.defineProperty(t,i,r);}:function(t,e,n,i){void 0===i&&(i=n),t[i]=e[n];}),r=this&&this.__exportStar||function(t,e){for(var n in t)"default"===n||Object.prototype.hasOwnProperty.call(e,n)||i(e,t,n);};Object.defineProperty(e,"__esModule",{value:!0}),r(n("41a7ed3a"),e),r(n("67578fc2"),e),r(n("d0ddde0e"),e);},a0877623:function(t,e,n){"use strict";function i(t,e,n){let i=t=>{(!n||n(t))&&(t.style.visibility=e);};t.forEach(t=>{i(t);});}n.d(e,"__esModule",{value:!0}),n.d(e,"setVisibility",{enumerable:!0,get:function(){return i;}});},a0d8bc6d:function(t,e,n){"use strict";n.d(e,"__esModule",{value:!0}),e.BaseLayout=void 0,e.BaseLayout=class{constructor(t,e){this.context=t,this.options=e||{};}};},a7082564:function(t,e,n){"use strict";n.d(e,"__esModule",{value:!0}),n.d(e,"BaseTransform",{enumerable:!0,get:function(){return r;}});var i=n("c516880f");class r extends i.BaseExtension{beforeDraw(t,e){return t;}afterLayout(t,e){}}},a741c567:function(t,e,n){"use strict";function i(t,e=!0){let n=[];return t.forEach((t,e)=>{n.push([0===e?"M":"L",...t]);}),e&&n.push(["Z"]),n;}n.d(e,"__esModule",{value:!0}),n.e(e,{getClosedSpline:function(){return o;},parsePath:function(){return a;},pathToPoints:function(){return s;},pointsToPath:function(){return i;}});let r={M:["x","y"],m:["dx","dy"],H:["x"],h:["dx"],V:["y"],v:["dy"],L:["x","y"],l:["dx","dy"],Z:[],z:[],C:["x1","y1","x2","y2","x","y"],c:["dx1","dy1","dx2","dy2","dx","dy"],S:["x2","y2","x","y"],s:["dx2","dy2","dx","dy"],Q:["x1","y1","x","y"],q:["dx1","dy1","dx","dy"],T:["x","y"],t:["dx","dy"],A:["rx","ry","rotation","large-arc","sweep","x","y"],a:["rx","ry","rotation","large-arc","sweep","dx","dy"]};function a(t){let e=t.replace(/[\n\r]/g,"").replace(/-/g," -").replace(/(\d*\.)(\d+)(?=\.)/g,"$1$2 ").trim().split(/\s*,|\s+/),n=[],i="",a={};for(;e.length>0;){let t=e.shift();t in r?i=t:e.unshift(t),a={type:i},r[i].forEach(n=>{t=e.shift(),a[n]=t;}),"M"===i?i="L":"m"===i&&(i="l");let[s,...o]=Object.values(a);n.push([s,...o.map(Number)]);}return n;}function s(t){let e=[];return("string"==typeof t?a(t):t).forEach(t=>{let n=t[0];if("Z"===n){e.push(e[0]);return;}if("A"!==n)for(let n=1;n<t.length;n+=2)e.push([t[n],t[n+1],0]);else{let n=t.length;e.push([t[n-2],t[n-1],0]);}}),e;}let o=t=>{if(t.length<2)return[["M",0,0],["L",0,0]];let e=t[0],n=t[1],i=t[t.length-1],r=t[t.length-2];t.unshift(r,i),t.push(e,n);let a=[["M",i[0],i[1]]];for(let e=1;e<t.length-2;e+=1){let[n,i]=t[e-1],[r,s]=t[e],[o,l]=t[e+1],[d,u]=e!==t.length-2?t[e+2]:[o,l],c=r+(o-n)/6,h=s+(l-i)/6,p=o-(d-r)/6,f=l-(u-s)/6;a.push(["C",c,h,p,f,o,l]);}return a;};},a742fdc2:function(t,e,n){"use strict";n.d(e,"__esModule",{value:!0}),n.d(e,"inferIconStyle",{enumerable:!0,get:function(){return r;}});var i=n("4c372554");function r(t,e){let n=(0,i.parseSize)(t),r={};return e.text&&!e.fontSize&&(r={fontSize:.5*Math.min(...n)}),!e.src||e.width&&e.height||(r={width:.5*n[0],height:.5*n[1]}),r;}},a99ecbda:function(t,e,n){"use strict";var i,r;n.d(e,"__esModule",{value:!0}),e.ChangeType=e.ChangeEvent=void 0,e.ChangeEvent={CHANGE:"change"},(r=i||(e.ChangeType=i={})).NodeAdded="NodeAdded",r.NodeUpdated="NodeUpdated",r.NodeRemoved="NodeRemoved",r.EdgeAdded="EdgeAdded",r.EdgeUpdated="EdgeUpdated",r.EdgeRemoved="EdgeRemoved",r.ComboAdded="ComboAdded",r.ComboUpdated="ComboUpdated",r.ComboRemoved="ComboRemoved";},aa22965f:function(t,e,n){"use strict";n.d(e,"__esModule",{value:!0}),n.d(e,"Hexagon",{enumerable:!0,get:function(){return s;}});var i=n("6ed5e4e8"),r=n("19365c34"),a=n("c24cd24c");class s extends a.Polygon{constructor(t){super(t);}getOuterR(t){return t.outerR||Math.min(...this.getSize(t))/2;}getPoints(t){return(0,r.getHexagonPoints)(this.getOuterR(t));}getIconStyle(t){let e=super.getIconStyle(t),n=this.getOuterR(t)*i.ICON_SIZE_RATIO;return!!e&&Object.assign({width:n,height:n},e);}}},aaa87daa:function(t,e,n){"use strict";n.d(e,"__esModule",{value:!0}),e.Polygon=void 0;let i=n("6824c090"),r=n("b3456123"),a=n("6d16dfc1");class s extends a.BaseNode{constructor(t){super(t);}get parsedAttributes(){return this.attributes;}drawKeyShape(t,e){return this.upsert("key",i.Polygon,this.getKeyStyle(t),e);}getKeyStyle(t){return Object.assign(Object.assign({},super.getKeyStyle(t)),{points:this.getPoints(t)});}getIntersectPoint(t,e=!1){var n,i;let{points:a}=this.getShape("key").attributes,s=[+((null===(n=this.attributes)||void 0===n?void 0:n.x)||0),+((null===(i=this.attributes)||void 0===i?void 0:i.y)||0)];return(0,r.getPolygonIntersectPoint)(t,s,a,!0,e).point;}}e.Polygon=s;},ae02b67c:function(t,e,n){"use strict";n.d(e,"__esModule",{value:!0}),n.d(e,"Shortcut",{enumerable:!0,get:function(){return d;}});var i=n("777fffbe"),r=i._(n("e602108f")),a=i._(n("1304978e")),s=n("d9033aa4"),o=n("8c2b6959");let l=t=>t.map(t=>(0,a.default)(t)?t.toLocaleLowerCase():t);class d{constructor(t){this.map=new Map,this.boundHandlePinch=()=>{},this.recordKey=new Set,this.onKeyDown=t=>{(null==t?void 0:t.key)&&(this.recordKey.add(t.key),this.trigger(t));},this.onKeyUp=t=>{(null==t?void 0:t.key)&&this.recordKey.delete(t.key);},this.onWheel=t=>{this.triggerExtendKey(s.CommonEvent.WHEEL,t);},this.onDrag=t=>{this.triggerExtendKey(s.CommonEvent.DRAG,t);},this.handlePinch=(t,e)=>{this.triggerExtendKey(s.CommonEvent.PINCH,Object.assign(Object.assign({},t),e));},this.onFocus=()=>{this.recordKey.clear();},this.emitter=t,this.bindEvents();}bind(t,e){0!==t.length&&(t.includes(s.CommonEvent.PINCH)&&!this.pinchHandler&&(this.boundHandlePinch=this.handlePinch.bind(this),this.pinchHandler=new o.PinchHandler(this.emitter,"pinchmove",this.boundHandlePinch)),this.map.set(t,e));}unbind(t,e){this.map.forEach((n,i)=>{(0,r.default)(i,t)&&(!e||e===n)&&this.map.delete(i);});}unbindAll(){this.map.clear();}match(t){let e=l(Array.from(this.recordKey)).sort(),n=l(t).sort();return(0,r.default)(e,n);}bindEvents(){var t;let{emitter:e}=this;e.on(s.CommonEvent.KEY_DOWN,this.onKeyDown),e.on(s.CommonEvent.KEY_UP,this.onKeyUp),e.on(s.CommonEvent.WHEEL,this.onWheel),e.on(s.CommonEvent.DRAG,this.onDrag),null===(t=globalThis.addEventListener)||void 0===t||t.call(globalThis,"focus",this.onFocus);}trigger(t){this.map.forEach((e,n)=>{this.match(n)&&e(t);});}triggerExtendKey(t,e){this.map.forEach((n,i)=>{i.includes(t)&&(0,r.default)(Array.from(this.recordKey),i.filter(e=>e!==t))&&n(e);});}destroy(){var t,e;this.unbindAll(),this.emitter.off(s.CommonEvent.KEY_DOWN,this.onKeyDown),this.emitter.off(s.CommonEvent.KEY_UP,this.onKeyUp),this.emitter.off(s.CommonEvent.WHEEL,this.onWheel),this.emitter.off(s.CommonEvent.DRAG,this.onDrag),null===(t=this.pinchHandler)||void 0===t||t.off("pinchmove",this.boundHandlePinch),null===(e=globalThis.removeEventListener)||void 0===e||e.call(globalThis,"blur",this.onFocus);}}},aeb8daed:function(t,e,n){"use strict";n.d(e,"__esModule",{value:!0}),e.Line=void 0;let i=n("76595ff2"),r=n("17d5ad7d");class a extends r.BaseEdge{constructor(t){super((0,i.mergeOptions)({style:a.defaultStyleProps},t));}getKeyPath(t){let[e,n]=this.getEndpoints(t);return[["M",e[0],e[1]],["L",n[0],n[1]]];}}e.Line=a,a.defaultStyleProps={};},aebc04bc:function(t,e,n){"use strict";n.d(e,"__esModule",{value:!0}),e.DEFAULT_ELEMENTS_ANIMATION_OPTIONS=e.DEFAULT_ANIMATION_OPTIONS=void 0,e.DEFAULT_ANIMATION_OPTIONS={duration:500},e.DEFAULT_ELEMENTS_ANIMATION_OPTIONS={duration:1e3,easing:"cubic-bezier(0.250, 0.460, 0.450, 0.940)",iterations:1,fill:"both"};},afd4cd55:function(t,e,n){"use strict";n.d(e,"__esModule",{value:!0}),n.d(e,"arrayDiff",{enumerable:!0,get:function(){return r;}});var i=n("777fffbe")._(n("e602108f"));function r(t,e,n,a=i.default){let s=new Map(t.map(t=>[n(t),t])),o=new Map(e.map(t=>[n(t),t])),l=new Set(s.keys()),d=new Set(o.keys()),u=[],c=[],h=[],p=[];return d.forEach(t=>{l.has(t)?a(s.get(t),o.get(t))?p.push(o.get(t)):c.push(o.get(t)):u.push(o.get(t));}),l.forEach(t=>{d.has(t)||h.push(s.get(t));}),{enter:u,exit:h,keep:p,update:c};}},b0aee266:function(t,e,n){"use strict";n.d(e,"__esModule",{value:!0}),e.getPolygonTextStyleByPlacement=function(t,e,n,o,l,d,u){let[c,h]=(0,s.getXYByPlacement)(t,e),p={textAlign:"left"===e?"right":"right"===e?"left":"center",textBaseline:"top"===e?"bottom":"bottom"===e?"top":"middle",transform:[["translate",c+n,h+o]]};if("center"===e||!l)return p;let f=(0,r.pathToPoints)(d);if(!f||f.length<=3)return p;let g=f.map((t,e)=>{let n=f[(e+1)%f.length];return(0,i.isEqual)(t,n)?null:[t,n];}).filter(Boolean),y=(0,a.findNearestLine)([c,h],g),m=(0,a.findNearestPointOnLine)([c,h],y);if(m&&y&&(p.transform=[["translate",m[0]+n,m[1]+o]],u)){let t=Math.atan((y[0][1]-y[1][1])/(y[0][0]-y[1][0]));p.transform.push(["rotate",t/Math.PI*180]),p.textAlign="center",("right"===e||"left"===e)&&(t>0?p.textBaseline="right"===e?"bottom":"top":p.textBaseline="right"===e?"top":"bottom");}return p;};let i=n("5a6910cd"),r=n("54524b09"),a=n("b3456123"),s=n("b326bfa9");},b218cfa2:function(t,e,n){"use strict";n.d(e,"__esModule",{value:!0}),n.d(e,"CubicVertical",{enumerable:!0,get:function(){return a;}});var i=n("1165dca0"),r=n("35a30c27");class a extends r.Cubic{constructor(t){super((0,i.mergeOptions)({style:a.defaultStyleProps},t));}getControlPoints(t,e,n,i){let r=e[1]-t[1];return[[t[0],t[1]+r*n[0]+i[0]],[e[0],e[1]-r*n[1]+i[1]]];}}a.defaultStyleProps={curvePosition:[.5,.5],curveOffset:[0,0]};},b326bfa9:function(t,e,n){"use strict";n.d(e,"__esModule",{value:!0}),e.getPositionByRectPoints=void 0,e.positionOf=function(t){let{x:e=0,y:n=0,z:i=0}=t.style||{};return[+e,+n,+i];},e.hasPosition=function(t){let{x:e,y:n,z:i}=t.style||{};return void 0!==e||void 0!==n||void 0!==i;},e.getXYByRelativePlacement=a,e.getXYByPlacement=function(t,e="center"){return a(t,(0,r.parsePlacement)(e));},e.getXYByAnchor=function(t,e){return a(t,(0,i.parseAnchor)(e));};let i=n("44ea4380"),r=n("eb7ae39a");function a(t,e){let[n,i]=e,{min:r,max:a}=t;return[r[0]+n*(a[0]-r[0]),r[1]+i*(a[1]-r[1])];}e.getPositionByRectPoints=t=>{let[e,n]=t;return{left:Math.min(e[0],n[0]),right:Math.max(e[0],n[0]),top:Math.min(e[1],n[1]),bottom:Math.max(e[1],n[1])};};},b3456123:function(t,e,n){"use strict";n.d(e,"__esModule",{value:!0}),e.parsePoint=function(t){var e;return[t.x,t.y,null!==(e=t.z)&&void 0!==e?e:0];},e.toPointObject=function(t){var e;return{x:t[0],y:t[1],z:null!==(e=t[2])&&void 0!==e?e:0};},e.sortByX=function(t){return t.sort((t,e)=>t[0]-e[0]||t[1]-e[1]);},e.deduplicate=function(t){let e=new Set;return t.filter(t=>{let n=t.join(",");return!e.has(n)&&(e.add(n),!0);});},e.round=function(t,e=0){return t.map(t=>parseFloat(t.toFixed(e)));},e.moveTo=function(t,e,n,r=!1){if((0,i.isEqual)(t,e))return t;let a=r?(0,o.subtract)(t,e):(0,o.subtract)(e,t),s=(0,o.normalize)(a),l=[s[0]*n,s[1]*n];return(0,o.add)((0,o.toVector2)(t),l);},e.isHorizontal=l,e.isVertical=d,e.isOrthogonal=function(t,e){return l(t,e)||d(t,e);},e.isCollinear=function(t,e,n){return(0,a.isLinesParallel)([t,e],[e,n]);},e.getSymmetricPoint=u,e.getPolygonIntersectPoint=c,e.isPointInPolygon=function(t,e,n,i){let r=t[0],a=t[1],s=!1;void 0===n&&(n=0),void 0===i&&(i=e.length);let o=i-n;for(let t=0,i=o-1;t<o;i=t++){let o=e[t+n][0],l=e[t+n][1],d=e[i+n][0],u=e[i+n][1];l>a!=u>a&&r<(d-o)*(a-l)/(u-l)+o&&(s=!s);}return s;},e.getRectIntersectPoint=function(t,e,n=!1){return c(t,(0,s.getXYByPlacement)(e,"center"),[(0,s.getXYByPlacement)(e,"left-top"),(0,s.getXYByPlacement)(e,"right-top"),(0,s.getXYByPlacement)(e,"right-bottom"),(0,s.getXYByPlacement)(e,"left-bottom")],!1,n).point;},e.getEllipseIntersectPoint=function(t,e,n=!1){let i=e.center,a=n?u(t,i):t,s=(0,o.subtract)(a,e.center),l=Math.atan2(s[1],s[0]);if(isNaN(l))return i;let d=(0,r.getBBoxWidth)(e)/2,c=(0,r.getBBoxHeight)(e)/2;return[i[0]+d*Math.cos(l),i[1]+c*Math.sin(l)];},e.findNearestPoints=function(t,e){let n=1/0,i=[t[0],e[0]];return t.forEach(t=>{e.forEach(e=>{let r=(0,o.distance)(t,e);r<n&&(n=r,i=[t,e]);});}),i;},e.findNearestLine=function(t,e){let n=1/0,i=[[0,0],[0,0]];return e.forEach(e=>{let r=h(t,e);r<n&&(n=r,i=e);}),i;},e.getDistanceToLine=h,e.findNearestPointOnLine=p,e.centerOf=f,e.sortByClockwise=function(t,e=!0){let n=f(t);return t.sort(([t,i],[r,a])=>{let s=Math.atan2(i-n[1],t-n[0]),o=Math.atan2(a-n[1],r-n[0]);return e?o-s:s-o;});},e.getBoundingPoints=function(t,e){return[t,[t[0],e[1]],e,[e[0],t[1]]];};let i=n("5a6910cd"),r=n("b51680dc"),a=n("bfe0f394"),s=n("b326bfa9"),o=n("41446765");function l(t,e){return t[1]===e[1];}function d(t,e){return t[0]===e[0];}function u(t,e){return[2*e[0]-t[0],2*e[1]-t[1]];}function c(t,e,n,i=!0,r=!1){for(let s=0;s<n.length;s++){let l=n[s],d=n[(s+1)%n.length];i&&(l=(0,o.add)(e,l),d=(0,o.add)(e,d));let c=r?u(t,e):t,h=(0,a.getLinesIntersection)([e,c],[l,d]);if(h)return{point:h,line:[l,d]};}return{point:e,line:void 0};}function h(t,e){let n=p(t,e);return(0,o.distance)(t,n);}function p(t,e){let[n,i]=e[0],[r,a]=e[1],[s,o]=t,l=r-n,d=a-i;if(0===l&&0===d)return[n,i];let u=((s-n)*l+(o-i)*d)/(l*l+d*d);return u>1?u=1:u<0&&(u=0),[n+u*l,i+u*d];}function f(t){let e=t.reduce((t,e)=>(0,o.add)(t,e),[0,0]);return(0,o.divide)(e,t.length);}},b51680dc:function(t,e,n){"use strict";n.d(e,"__esModule",{value:!0}),e.getBBoxWidth=l,e.getBBoxHeight=d,e.getBBoxSize=u,e.getNodeBBox=function(t,e){let n=(0,a.isPoint)(t)?c(t):t.getShape("key").getBounds();return e?h(n,e):n;},e.getPointBBox=c,e.getExpandedBBox=h,e.getCombinedBBox=function(t){if(0===t.length)return new i.AABB;if(1===t.length)return t[0];let e=new i.AABB;e.setMinMax(t[0].min,t[0].max);for(let n=1;n<t.length;n++){let i=t[n];e.setMinMax([Math.min(e.min[0],i.min[0]),Math.min(e.min[1],i.min[1]),Math.min(e.min[2],i.min[2])],[Math.max(e.max[0],i.max[0]),Math.max(e.max[1],i.max[1]),Math.max(e.max[2],i.max[2])]);}return e;},e.isBBoxInside=function(t,e){let[n,i]=t.min,[r,a]=t.max,[s,o]=e.min,[l,d]=e.max;return n>=s&&r<=l&&i>=o&&a<=d;},e.isPointInBBox=p,e.isPointOnBBoxBoundary=function(t,e,n=!1){let{min:[i,r],max:[a,o]}=e,l=(t[1]===r||t[1]===o)&&(n||(0,s.isBetween)(t[0],i,a)),d=(t[0]===i||t[0]===a)&&(n||(0,s.isBetween)(t[1],r,o));return l||d;},e.isPointOutsideBBox=function(t,e){return!p(t,e);},e.isPointBBoxCenter=function(t,e){let{center:n}=e;return t[0]===n[0]&&t[1]===n[1];},e.getNearestBoundarySide=f,e.getNearestBoundaryPoint=function(t,e){let n=(0,r.clone)(t);if(p(t,e))switch(f(t,e)){case"left":n[0]=e.min[0];break;case"right":n[0]=e.max[0];break;case"top":n[1]=e.min[1];break;case"bottom":n[1]=e.max[1];}else{let[i,r]=t,[a,o]=e.min,[l,d]=e.max;n[0]=(0,s.isBetween)(i,a,l)?i:i<a?a:l,n[1]=(0,s.isBetween)(r,o,d)?r:r<o?o:d;}return n;},e.getTriangleCenter=function(t,e){let{center:n}=t,[i,r]=u(t);return["up"===e||"down"===e?n[0]:"right"===e?n[0]-i/6:n[0]+i/6,"left"===e||"right"===e?n[1]:"down"===e?n[1]-r/6:n[1]+r/6];},e.getIncircleRadius=function(t,e){let[n,i]=u(t);return[n,i]="up"===e||"down"===e?[n,i]:[i,n],(Math.pow(i,2)-Math.pow(Math.sqrt(Math.pow(n/2,2)+Math.pow(i,2))-n/2,2))/(2*i);},e.getBBoxSegments=function(t){let{min:[e,n],max:[i,r]}=t,a=[e,r],s=[i,r],o=[i,n],l=[e,n];return[[a,s],[s,o],[o,l],[l,a]];};let i=n("6824c090"),r=n("5a6910cd"),a=n("1540f7e4"),s=n("9d4ee1c4"),o=n("3dc2e39f");function l(t){return t.max[0]-t.min[0];}function d(t){return t.max[1]-t.min[1];}function u(t){return[l(t),d(t)];}function c(t){let[e,n,r=0]=t,a=new i.AABB;return a.setMinMax([e,n,r],[e,n,r]),a;}function h(t,e){let[n,r,a,s]=(0,o.parsePadding)(e),[l,d,u]=t.min,[c,h,p]=t.max,f=new i.AABB;return f.setMinMax([l-s,d-n,u],[c+r,h+a,p]),f;}function p(t,e){return(0,s.isBetween)(t[0],e.min[0],e.max[0])&&(0,s.isBetween)(t[1],e.min[1],e.max[1]);}function f(t,e){let[n,i]=t,[r,a]=e.min,[s,o]=e.max,l=n-r,d=s-n,u=i-a,c=o-i,h=Math.min(l,d,u,c);return h===l?"left":h===d?"right":h===u?"top":h===c?"bottom":"left";}},b5f0d953:function(t,e,n){"use strict";n.d(e,"__esModule",{value:!0}),n.e(e,{findActualConnectNodeData:function(){return T;},getArrowSize:function(){return B;},getBadgePositionStyle:function(){return f;},getBorderRadiusPoints:function(){return O;},getCubicLoopControlPoints:function(){return C;},getCubicLoopPath:function(){return P;},getCubicPath:function(){return E;},getCurveControlPoint:function(){return y;},getLabelPositionStyle:function(){return p;},getLoopEndpoints:function(){return _;},getPolylineLoopControlPoints:function(){return M;},getPolylineLoopPath:function(){return w;},getPolylinePath:function(){return x;},getQuadraticPath:function(){return v;},getRadians:function(){return S;},getSubgraphRelatedEdges:function(){return A;},parseCurveOffset:function(){return m;},parseCurvePosition:function(){return b;}});var i=n("777fffbe"),r=i._(n("e602108f")),a=i._(n("4c900b62")),s=n("bf55e093"),o=n("e1c279a0"),l=n("19365c34"),d=n("8a2f2f0b"),u=n("e492a2d3"),c=n("3d52184b"),h=n("6d5a1ab5");function p(t,e,n,i,r){let a="number"==typeof e?e:.5;"start"===e&&(a=0),"end"===e&&(a=.99);let s=(0,u.parsePoint)(t.getPoint(a)),o=(0,u.parsePoint)(t.getPoint(a+.01)),l="start"===e?"left":"end"===e?"right":"center";if((0,u.isHorizontal)(s,o)||!n){let[e,n]=g(t,a,i,r);return{transform:[["translate",e,n]],textAlign:l};}let d=Math.atan2(o[1]-s[1],o[0]-s[0]);o[0]<s[0]&&(l="center"===l?l:"left"===l?"right":"left",i*=-1,d+=Math.PI);let[c,h]=g(t,a,i,r,d);return{textAlign:l,transform:[["translate",c,h],["rotate",d/Math.PI*180]]};}function f(t,e,n,i,r){var a,s;let o=(null===(a=t.badge)||void 0===a?void 0:a.getGeometryBounds().halfExtents[0])*2||0,l=(null===(s=t.label)||void 0===s?void 0:s.getGeometryBounds().halfExtents[0])*2||0;return p(t.key,n,!0,(l?(l/2+o/2)*("suffix"===e?1:-1):0)+i,r);}function g(t,e,n,i,r){let[a,s]=(0,u.parsePoint)(t.getPoint(e)),o=n,l=i;return r&&(o=n*Math.cos(r)-i*Math.sin(r),l=n*Math.sin(r)+i*Math.cos(r)),[a+o,s+l];}function y(t,e,n,i){if((0,r.default)(t,e))return t;let a=(0,h.subtract)(e,t),s=[t[0]+n*a[0],t[1]+n*a[1]],o=(0,h.normalize)((0,h.perpendicular)(a,!1));return s[0]+=i*o[0],s[1]+=i*o[1],s;}function m(t){return(0,a.default)(t)?[t,-t]:t;}function b(t){return(0,a.default)(t)?[t,1-t]:t;}function v(t,e,n){return[["M",t[0],t[1]],["Q",n[0],n[1],e[0],e[1]]];}function E(t,e,n){return[["M",t[0],t[1]],["C",n[0][0],n[0][1],n[1][0],n[1][1],e[0],e[1]]];}function x(t,e=0,n=!1){let i=t.length-1,r=t[0],a=t[i],s=t.slice(1,i),o=[["M",r[0],r[1]]];return s.forEach((t,n)=>{let i=s[n-1]||r,l=s[n+1]||a;if(!(0,u.isCollinear)(i,t,l)&&e){let[n,r]=O(i,t,l,e);o.push(["L",n[0],n[1]],["Q",t[0],t[1],r[0],r[1]],["L",r[0],r[1]]);}else o.push(["L",t[0],t[1]]);}),o.push(["L",a[0],a[1]]),n&&o.push(["Z"]),o;}function O(t,e,n,i){let r=(0,h.manhattanDistance)(t,e),a=(0,h.manhattanDistance)(n,e),s=Math.min(i,Math.min(r,a)/2);return[[e[0]-s/r*(e[0]-t[0]),e[1]-s/r*(e[1]-t[1])],[e[0]-s/a*(e[0]-n[0]),e[1]-s/a*(e[1]-n[1])]];}let S=t=>{let e=Math.PI/2,n=(0,s.getBBoxHeight)(t)/2,i=(0,s.getBBoxWidth)(t)/2,r=Math.atan2(n,i)/2,a=Math.atan2(i,n)/2;return{top:[-e-a,-e+a],"top-right":[-e+a,-r],"right-top":[-e+a,-r],right:[-r,r],"bottom-right":[r,e-a],"right-bottom":[r,e-a],bottom:[e-a,e+a],"bottom-left":[e+a,Math.PI-r],"left-bottom":[e+a,Math.PI-r],left:[Math.PI-r,Math.PI+r],"top-left":[Math.PI+r,-e-a],"left-top":[Math.PI+r,-e-a]};};function _(t,e,n,i,r){let a=(0,s.getNodeBBox)(t),o=t.getCenter(),d=i&&(0,l.getPortPosition)(i),u=r&&(0,l.getPortPosition)(r);if(!d||!u){let i=S(a),r=i[e][0],c=i[e][1],[p,f]=(0,s.getBBoxSize)(a),g=Math.max(p,f),y=(0,h.add)(o,[g*Math.cos(r),g*Math.sin(r),0]),m=(0,h.add)(o,[g*Math.cos(c),g*Math.sin(c),0]);d=(0,l.getNodeConnectionPoint)(t,y),u=(0,l.getNodeConnectionPoint)(t,m),n||([d,u]=[u,d]);}return[d,u];}function P(t,e,n,i,r,a){let s=t.getPorts()[r||a],o=t.getPorts()[a||r],[d,u]=_(t,e,n,s,o),c=C(t,d,u,i);return s&&(d=(0,l.getPortConnectionPoint)(s,c[0])),o&&(u=(0,l.getPortConnectionPoint)(o,c.at(-1))),E(d,u,c);}function C(t,e,n,i){let a=t.getCenter();if((0,r.default)(e,n)){let t=(0,h.subtract)(e,a),r=[i*Math.sign(t[0])||i/2,i*Math.sign(t[1])||-i/2,0];return[(0,h.add)(e,r),(0,h.add)(n,(0,h.multiply)(r,[1,-1,1]))];}return[(0,u.moveTo)(a,e,(0,h.distance)(a,e)+i),(0,u.moveTo)(a,n,(0,h.distance)(a,n)+i)];}function w(t,e,n,i,r,a,s){let o=(0,l.getAllPorts)(t),d=o[a||s],u=o[s||a],[c,h]=_(t,n,i,d,u),p=M(t,c,h,r);return d&&(c=(0,l.getPortConnectionPoint)(d,p[0])),u&&(h=(0,l.getPortConnectionPoint)(u,p.at(-1))),x([c,...p,h],e);}function M(t,e,n,i){let a=[],o=(0,s.getNodeBBox)(t);if((0,r.default)(e,n))switch((0,s.getNearestBoundarySide)(e,o)){case"left":a.push([e[0]-i,e[1]]),a.push([e[0]-i,e[1]+i]),a.push([e[0],e[1]+i]);break;case"right":a.push([e[0]+i,e[1]]),a.push([e[0]+i,e[1]+i]),a.push([e[0],e[1]+i]);break;case"top":a.push([e[0],e[1]-i]),a.push([e[0]+i,e[1]-i]),a.push([e[0]+i,e[1]]);break;case"bottom":a.push([e[0],e[1]+i]),a.push([e[0]+i,e[1]+i]),a.push([e[0]+i,e[1]]);}else{let t=(0,s.getNearestBoundarySide)(e,o),r=(0,s.getNearestBoundarySide)(n,o);if(t===r){let r,s;switch(t){case"left":r=Math.min(e[0],n[0])-i,a.push([r,e[1]]),a.push([r,n[1]]);break;case"right":r=Math.max(e[0],n[0])+i,a.push([r,e[1]]),a.push([r,n[1]]);break;case"top":s=Math.min(e[1],n[1])-i,a.push([e[0],s]),a.push([n[0],s]);break;case"bottom":s=Math.max(e[1],n[1])+i,a.push([e[0],s]),a.push([n[0],s]);}}else{let s=(t,e)=>({left:[e[0]-i,e[1]],right:[e[0]+i,e[1]],top:[e[0],e[1]-i],bottom:[e[0],e[1]+i]})[t],l=s(t,e),d=s(r,n),u=(0,c.freeJoin)(l,d,o);a.push(l,u,d);}}return a;}function A(t,e){let n=new Set,i=new Set,r=new Set;return t.forEach(a=>{e(a).forEach(e=>{n.add(e),t.includes(e.source)&&t.includes(e.target)?i.add(e):r.add(e);});}),{edges:Array.from(n),internal:Array.from(i),external:Array.from(r)};}function T(t,e){let n=[],i=t;for(;i;){n.push(i);let t=e((0,d.idOf)(i));if(t)i=t;else break;}if(n.some(t=>{var e;return null===(e=t.style)||void 0===e?void 0:e.collapsed;})){let t=n.reverse().findIndex(o.isCollapsed);return n[t]||n.at(-1);}return t;}function B(t,e){return e||(t<4?10:4===t?12:2.5*t);}},b76a2fe9:function(t,e,n){"use strict";var i=this&&this.__rest||function(t,e){var n={};for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&0>e.indexOf(i)&&(n[i]=t[i]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols)for(var r=0,i=Object.getOwnPropertySymbols(t);r<i.length;r++)0>e.indexOf(i[r])&&Object.prototype.propertyIsEnumerable.call(t,i[r])&&(n[i[r]]=t[i[r]]);return n;};Object.defineProperty(e,"__esModule",{value:!0}),e.Image=void 0;let r=n("6824c090"),a=n("757ae0a3"),s=n("50674fdc"),o=n("76595ff2"),l=n("41446765"),d=n("2329b631"),u=n("14586b74"),c=n("6d16dfc1");class h extends c.BaseNode{constructor(t){super((0,o.mergeOptions)({style:h.defaultStyleProps},t));}getKeyStyle(t){let[e,n]=this.getSize(t),r=super.getKeyStyle(t),{fillOpacity:a,opacity:s=a}=r;return Object.assign(Object.assign({opacity:s},i(r,["fillOpacity","opacity"])),{width:e,height:n,x:-e/2,y:-n/2});}getHaloStyle(t){if(!1===t.halo)return!1;let e=this.getShape("key").attributes,{fill:n,stroke:r}=e;i(e,["fill","stroke"]);let a=(0,s.subStyleProps)(this.getGraphicStyle(t),"halo"),o=Number(a.lineWidth),[d,u]=(0,l.add)(this.getSize(t),[o,o]);return Object.assign(Object.assign({},a),{width:d,height:u,fill:"transparent",x:-d/2,y:-u/2});}getIconStyle(t){let e=super.getIconStyle(t),[n,i]=this.getSize(t);return!!e&&Object.assign({width:n*a.ICON_SIZE_RATIO,height:i*a.ICON_SIZE_RATIO},e);}drawKeyShape(t,e){let n=this.upsert("key",d.Image,this.getKeyStyle(t),e);return(0,u.connectImage)(this),n;}drawHaloShape(t,e){this.upsert("halo",r.Rect,this.getHaloStyle(t),e);}update(t){super.update(t),t&&("x"in t||"y"in t||"z"in t)&&(0,u.dispatchPositionChange)(this);}}e.Image=h,h.defaultStyleProps={size:32};},b7985b6d:function(t,e,n){"use strict";n.d(e,"__esModule",{value:!0}),e.createAnimationsProxy=function(t,e){if(Array.isArray(t)&&0===t.length)return null;let n=Array.isArray(t)?t[0]:t,i=Array.isArray(t)?t.slice(1):e||[];return new Proxy(n,{get:(t,e)=>"function"!=typeof t[e]||["onframe","onfinish"].includes(e)?"finished"===e?Promise.all([n.finished,...i.map(t=>t.finished)]):Reflect.get(t,e):(...n)=>{t[e](...n),i.forEach(t=>{var i;return null===(i=t[e])||void 0===i?void 0:i.call(t,...n);});},set:(t,e,n)=>(["onframe","onfinish"].includes(e)||i.forEach(t=>{t[e]=n;}),Reflect.set(t,e,n))});},e.preprocessKeyframes=function(t){let e=t.reduce((t,e)=>(Object.entries(e).forEach(([e,n])=>{void 0===t[e]?t[e]=[n]:t[e].push(n);}),t),{});Object.entries(e).forEach(([n,r])=>{(r.length!==t.length||r.some(t=>(0,i.isNil)(t))||r.every(t=>!["sourceNode","targetNode","childrenNode"].includes(n)&&(0,i.isEqual)(t,r[0])))&&delete e[n];});let n=Object.entries(e).reduce((t,[e,n])=>(n.forEach((n,i)=>{t[i]?t[i][e]=n:t[i]={[e]:n};}),t),[]);return 0!==t.length&&0===n.length&&n.push({_:0},{_:0}),n;},e.inferDefaultValue=function(t){switch(t){case"opacity":return 1;case"x":case"y":case"z":case"zIndex":return 0;case"visibility":return"visible";case"collapsed":return!1;case"states":return[];default:return;}},e.getAnimationOptions=function(t,e){let{animation:n}=t;if(!1===n||!1===e)return!1;let a=Object.assign({},r.DEFAULT_ANIMATION_OPTIONS);return(0,i.isObject)(n)&&Object.assign(a,n),(0,i.isObject)(e)&&Object.assign(a,e),a;},e.getElementAnimationOptions=function(t,e,n,l){var d,u;let{animation:c}=t;if(!1===c||!1===l)return[];let h=null===(d=null==t?void 0:t[e])||void 0===d?void 0:d.animation;if(!1===h)return[];let p=null==h?void 0:h[n];if(!1===p)return[];let f=null===(u=(0,o.themeOf)(t)[e])||void 0===u?void 0:u.animation,g=(t=[])=>{var e;return("string"==typeof(e=t)?(0,a.getExtension)(r.ExtensionCategory.ANIMATION,e)||(s.print.warn(`The animation of ${e} is not registered.`),[]):e).map(t=>Object.assign(Object.assign(Object.assign(Object.assign({},r.DEFAULT_ELEMENTS_ANIMATION_OPTIONS),(0,i.isObject)(c)&&c),t),(0,i.isObject)(l)&&l));};if(p)return g(p);if(!f)return[];let y=f[n];return!1===y?[]:g(y);};let i=n("5a6910cd"),r=n("d0a8fc0a"),a=n("b83e3ebb"),s=n("22189803"),o=n("e96ae902");},b83e3ebb:function(t,e,n){"use strict";n.d(e,"__esModule",{value:!0}),e.getExtension=function(t,e){var n;let r=null===(n=i.EXTENSION_REGISTRY[t])||void 0===n?void 0:n[e];if(r)return r;},e.getExtensions=function(t){return i.EXTENSION_REGISTRY[t];};let i=n("4bc796b0");},b8a5bc3c:function(t,e,n){"use strict";n.d(e,"__esModule",{value:!0}),e.replaceTranslateInTransform=function(t,e,n,r=[]){if(!r&&0===t&&0===e&&0===n)return null;if(Array.isArray(r)){let a=-1,s=[];for(let i=0;i<r.length;i++){let o=r[i];if("translate"===o[0]){if(o[1]===t&&o[2]===e)return null;a=i,s.push(["translate",t,e]);}else if("translate3d"===o[0]){if(o[1]===t&&o[2]===e&&o[3]===n)return null;a=i,s.push(["translate3d",t,e,null!=n?n:0]);}else s.push(o);}return(-1===a&&s.splice(0,0,(0,i.isNumber)(n)?["translate3d",t,e,null!=n?n:0]:["translate",t,e]),0===s.length)?null:s;}let a=r?r.replace(/translate(3d)?\([^)]*\)/g,""):"";return 0===n?`translate(${t}, ${e})${a}`:`translate3d(${t}, ${e}, ${n})${a}`;};let i=n("5a6910cd");},bb3d2b80:function(t,e,n){"use strict";var i=this&&this.__rest||function(t,e){var n={};for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&0>e.indexOf(i)&&(n[i]=t[i]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols)for(var r=0,i=Object.getOwnPropertySymbols(t);r<i.length;r++)0>e.indexOf(i[r])&&Object.prototype.propertyIsEnumerable.call(t,i[r])&&(n[i[r]]=t[i[r]]);return n;};Object.defineProperty(e,"__esModule",{value:!0}),e.Donut=void 0;let r=n("6824c090"),a=n("5a6910cd"),s=n("9188883e"),o=n("50674fdc"),l=n("e0ffb410"),d=n("76595ff2"),u=n("e938b423");class c extends u.Circle{constructor(t){super((0,d.mergeOptions)({style:c.defaultStyleProps},t));}parseOuterR(){let{size:t}=this.parsedAttributes;return Math.min(...(0,l.parseSize)(t))/2;}parseInnerR(){let{innerR:t}=this.parsedAttributes;return(0,a.isString)(t)?parseInt(t)/100*this.parseOuterR():t;}drawDonutShape(t,e){let{donuts:n}=t;if(!(null==n?void 0:n.length))return;let l=n.map(t=>(0,a.isNumber)(t)?{value:t}:t),d=(0,o.subStyleProps)(this.getGraphicStyle(t),"donut"),u=(0,s.getPaletteColors)(t.donutPalette);if(!u)return;let c=l.reduce((t,e)=>{var n;return t+(null!==(n=e.value)&&void 0!==n?n:0);},0),h=this.parseOuterR(),p=this.parseInnerR(),f=0;l.forEach((t,n)=>{let{value:a=0,color:s=u[n%u.length]}=t,o=i(t,["value","color"]),y=(0===c?1/l.length:a/c)*360;this.upsert(`round${n}`,r.Path,Object.assign(Object.assign(Object.assign({},d),{d:g(h,p,f,f+y),fill:s}),o),e),f+=y;});}render(t,e=this){super.render(t,e),this.drawDonutShape(t,e);}}e.Donut=c,c.defaultStyleProps={innerR:"50%",donuts:[],donutPalette:"tableau"};let h=(t,e,n,i)=>[t+Math.sin(i)*n,e-Math.cos(i)*n],p=(t,e,n,i)=>i<=0||n<=i?[["M",t-n,e],["A",n,n,0,1,1,t+n,e],["A",n,n,0,1,1,t-n,e],["Z"]]:[["M",t-n,e],["A",n,n,0,1,1,t+n,e],["A",n,n,0,1,1,t-n,e],["Z"],["M",t+i,e],["A",i,i,0,1,0,t-i,e],["A",i,i,0,1,0,t+i,e],["Z"]],f=(t,e,n,i,r,a)=>{let[s,o]=[r/360*2*Math.PI,a/360*2*Math.PI],l=[h(t,e,i,s),h(t,e,n,s),h(t,e,n,o),h(t,e,i,o)],d=o-s>Math.PI?1:0;return[["M",l[0][0],l[0][1]],["L",l[1][0],l[1][1]],["A",n,n,0,d,1,l[2][0],l[2][1]],["L",l[3][0],l[3][1]],["A",i,i,0,d,0,l[0][0],l[0][1]],["Z"]];},g=(t=0,e=0,n,i)=>{let[r,a]=[0,0];return Math.abs(n-i)%360<1e-6?p(r,a,t,e):f(r,a,t,e,n,i);};},bb586283:function(t,e,n){"use strict";n.d(e,"__esModule",{value:!0}),n.d(e,"Image",{enumerable:!0,get:function(){return h;}});var i=n("a0f386cf"),r=n("6ed5e4e8"),a=n("21954d01"),s=n("1165dca0"),o=n("6d5a1ab5"),l=n("94ae1aef"),d=n("9a8606f2"),u=n("eeff6888"),c=this&&this.__rest||function(t,e){var n={};for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&0>e.indexOf(i)&&(n[i]=t[i]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols)for(var r=0,i=Object.getOwnPropertySymbols(t);r<i.length;r++)0>e.indexOf(i[r])&&Object.prototype.propertyIsEnumerable.call(t,i[r])&&(n[i[r]]=t[i[r]]);return n;};class h extends u.BaseNode{constructor(t){super((0,s.mergeOptions)({style:h.defaultStyleProps},t));}getKeyStyle(t){let[e,n]=this.getSize(t),i=super.getKeyStyle(t),{fillOpacity:r,opacity:a=r}=i;return Object.assign(Object.assign({opacity:a},c(i,["fillOpacity","opacity"])),{width:e,height:n,x:-e/2,y:-n/2});}getHaloStyle(t){if(!1===t.halo)return!1;let e=this.getShape("key").attributes,{fill:n,stroke:i}=e;c(e,["fill","stroke"]);let r=(0,a.subStyleProps)(this.getGraphicStyle(t),"halo"),s=Number(r.lineWidth),[l,d]=(0,o.add)(this.getSize(t),[s,s]);return Object.assign(Object.assign({},r),{width:l,height:d,fill:"transparent",x:-l/2,y:-d/2});}getIconStyle(t){let e=super.getIconStyle(t),[n,i]=this.getSize(t);return!!e&&Object.assign({width:n*r.ICON_SIZE_RATIO,height:i*r.ICON_SIZE_RATIO},e);}drawKeyShape(t,e){let n=this.upsert("key",l.Image,this.getKeyStyle(t),e);return(0,d.connectImage)(this),n;}drawHaloShape(t,e){this.upsert("halo",i.Rect,this.getHaloStyle(t),e);}update(t){super.update(t),t&&("x"in t||"y"in t||"z"in t)&&(0,d.dispatchPositionChange)(this);}}h.defaultStyleProps={size:32};},bd8433ec:function(t,e,n){"use strict";var i,r;n.d(e,"__esModule",{value:!0}),n.d(e,"HistoryEvent",{enumerable:!0,get:function(){return i;}}),(r=i||(i={})).UNDO="undo",r.REDO="redo",r.CANCEL="cancel",r.ADD="add",r.CLEAR="clear",r.CHANGE="change";},be1f153d:function(t,e,n){n.d(e,"__esModule",{value:!0}),n.e(e,{Canvas:function(){return B;}});var i=n("777fffbe"),r=n("a0f386cf"),a=n("f7384b74"),s=n("1043743b"),o=i._(s),l=n("ebf3ca84"),d=i._(l),u=n("70e30bcd"),c=i._(u),h=n("30d0a261"),p=i._(h),f=n("30856420"),g=i._(f),y=n("3c37732d"),m=n("e37edd9f"),b=i._(m),v=n("ff92314f"),E=i._(v),x=n("3b3c61e8"),O=function(){function t(e){(0,d.default)(this,t),this.dragndropPluginOptions=e;}return(0,c.default)(t,[{key:"apply",value:function(e){var n=this,i=e.renderingService,r=e.renderingContext.root.ownerDocument,a=r.defaultView,s=function(t){var e=t.target,i=e===r,s=i&&n.dragndropPluginOptions.isDocumentDraggable?r:e.closest&&e.closest("[draggable=true]");if(s){var o,l=!1,d=t.timeStamp,u=[t.clientX,t.clientY],c=null,h=[t.clientX,t.clientY],p=(o=(0,E.default)((0,b.default)().mark(function t(a){var o,p,f,g,y,m;return(0,b.default)().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(l){t.next=8;break;}if(o=a.timeStamp-d,p=(0,x.distanceSquareRoot)([a.clientX,a.clientY],u),!(o<=n.dragndropPluginOptions.dragstartTimeThreshold||p<=n.dragndropPluginOptions.dragstartDistanceThreshold)){t.next=5;break;}return t.abrupt("return");case 5:a.type="dragstart",s.dispatchEvent(a),l=!0;case 8:if(a.type="drag",a.dx=a.clientX-h[0],a.dy=a.clientY-h[1],s.dispatchEvent(a),h=[a.clientX,a.clientY],i){t.next=21;break;}return f="pointer"===n.dragndropPluginOptions.overlap?[a.canvasX,a.canvasY]:e.getBounds().center,t.next=17,r.elementsFromPoint(f[0],f[1]);case 17:m=(null==(y=(g=t.sent)[g.indexOf(e)+1])?void 0:y.closest("[droppable=true]"))||(n.dragndropPluginOptions.isDocumentDroppable?r:null),c!==m&&(c&&(a.type="dragleave",a.target=c,c.dispatchEvent(a)),m&&(a.type="dragenter",a.target=m,m.dispatchEvent(a)),(c=m)&&(a.type="dragover",a.target=c,c.dispatchEvent(a)));case 21:case"end":return t.stop();}},t);})),function(t){return o.apply(this,arguments);});a.addEventListener("pointermove",p);var f=function(t){if(l){t.detail={preventClick:!0};var e=t.clone();c&&(e.type="drop",e.target=c,c.dispatchEvent(e)),e.type="dragend",s.dispatchEvent(e),l=!1;}a.removeEventListener("pointermove",p);};e.addEventListener("pointerup",f,{once:!0}),e.addEventListener("pointerupoutside",f,{once:!0});}};i.hooks.init.tap(t.tag,function(){a.addEventListener("pointerdown",s);}),i.hooks.destroy.tap(t.tag,function(){a.removeEventListener("pointerdown",s);});}}]);}();O.tag="Dragndrop";var S=function(t){function e(){var t,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(0,d.default)(this,e),(t=(0,p.default)(this,e)).name="dragndrop",t.options=n,t;}return(0,g.default)(e,t),(0,c.default)(e,[{key:"init",value:function(){this.addRenderingPlugin(new O((0,o.default)({overlap:"pointer",isDocumentDraggable:!1,isDocumentDroppable:!1,dragstartDistanceThreshold:0,dragstartTimeThreshold:0},this.options)));}},{key:"destroy",value:function(){this.removeAllRenderingPlugins();}},{key:"setOptions",value:function(t){Object.assign(this.plugins[0].dragndropPluginOptions,t);}}]);}(y.AbstractRendererPlugin),_=n("bda63c26"),P=n("bf55e093"),C=n("e492a2d3"),w=this&&this.__awaiter||function(t,e,n,i){return new(n||(n=Promise))(function(r,a){function s(t){try{l(i.next(t));}catch(t){a(t);}}function o(t){try{l(i.throw(t));}catch(t){a(t);}}function l(t){var e;t.done?r(t.value):((e=t.value)instanceof n?e:new n(function(t){t(e);})).then(s,o);}l((i=i.apply(t,e||[])).next());});},M=this&&this.__rest||function(t,e){var n={};for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&0>e.indexOf(i)&&(n[i]=t[i]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols)for(var r=0,i=Object.getOwnPropertySymbols(t);r<i.length;r++)0>e.indexOf(i[r])&&Object.prototype.propertyIsEnumerable.call(t,i[r])&&(n[i[r]]=t[i[r]]);return n;};let A=["main"],T=["background","main","label","transient"];class B{getConfig(){return this.config;}getLayer(t="main"){return this.extends.layers[t]||this.getLayers().main;}getLayers(){return this.extends.layers;}getRenderer(t){return this.extends.renderers[t];}getCamera(t="main"){return this.getLayer(t).getCamera();}getRoot(t="main"){return this.getLayer(t).getRoot();}getContextService(t="main"){return this.getLayer(t).getContextService();}setCursor(t){this.config.cursor=t,this.getLayer().setCursor(t);}get document(){return this.getLayer().document;}get context(){return this.getLayer().context;}constructor(t){this.config={enableMultiLayer:!0},Object.assign(this.config,t);let e=this.config,{renderer:n,background:i,cursor:a,enableMultiLayer:s}=e,o=M(e,["renderer","background","cursor","enableMultiLayer"]),l=s?T:A,d=D(n,l),u=Object.fromEntries(l.map(t=>{let e=new r.Canvas(Object.assign(Object.assign({},o),{supportsMutipleCanvasesInOneContainer:s,renderer:d[t],background:s?"background"===t?i:void 0:i}));return[t,e];}));L(u),this.extends={config:this.config,renderer:n,renderers:d,layers:u};}get ready(){return Promise.all(Object.entries(this.getLayers()).map(([,t])=>t.ready));}resize(t,e){Object.assign(this.extends.config,{width:t,height:e}),Object.values(this.getLayers()).forEach(n=>{let i=n.getCamera(),r=i.getPosition(),a=i.getFocalPoint();n.resize(t,e),i.setPosition(r),i.setFocalPoint(a);});}getBounds(t){return(0,P.getCombinedBBox)(Object.values(this.getLayers()).map(e=>t?e.getRoot().childNodes.find(e=>e.classList.includes(t)):e.getRoot()).filter(t=>(null==t?void 0:t.childNodes.length)>0).map(t=>t.getBounds()));}getContainer(){let t=this.extends.config.container;return"string"==typeof t?document.getElementById(t):t;}getSize(){return[this.extends.config.width||0,this.extends.config.height||0];}appendChild(t,e){var n;let i=(null===(n=t.style)||void 0===n?void 0:n.$layer)||"main";return this.getLayer(i).appendChild(t,e);}setRenderer(t){if(t===this.extends.renderer)return;let e=D(t,this.config.enableMultiLayer?T:A);this.extends.renderers=e,Object.entries(e).forEach(([t,e])=>this.getLayer(t).setRenderer(e)),L(this.getLayers());}getCanvasByViewport(t){return(0,C.parsePoint)(this.getLayer().viewport2Canvas((0,C.toPointObject)(t)));}getViewportByCanvas(t){return(0,C.parsePoint)(this.getLayer().canvas2Viewport((0,C.toPointObject)(t)));}getViewportByClient(t){return(0,C.parsePoint)(this.getLayer().client2Viewport((0,C.toPointObject)(t)));}getClientByViewport(t){return(0,C.parsePoint)(this.getLayer().viewport2Client((0,C.toPointObject)(t)));}getClientByCanvas(t){return this.getClientByViewport(this.getViewportByCanvas(t));}getCanvasByClient(t){let e=this.getLayer(),n=e.client2Viewport((0,C.toPointObject)(t));return(0,C.parsePoint)(e.viewport2Canvas(n));}toDataURL(){return w(this,arguments,void 0,function*(t={}){let e=globalThis.devicePixelRatio||1,{mode:n="viewport"}=t,i=M(t,["mode"]),[s,o,l,d]=[0,0,0,0];if("viewport"===n)[l,d]=this.getSize();else if("overall"===n){let t=this.getBounds(),e=(0,P.getBBoxSize)(t);[s,o]=t.min,[l,d]=e;}let u=(0,_.createDOM)('<div id="virtual-image"></div>'),c=new r.Canvas({width:l,height:d,renderer:new a.Renderer,devicePixelRatio:e,container:u,background:this.extends.config.background});yield c.ready,c.appendChild(this.getLayer("background").getRoot().cloneNode(!0)),c.appendChild(this.getRoot().cloneNode(!0));let h=this.getLayer("label").getRoot().cloneNode(!0),p=c.viewport2Canvas({x:0,y:0}),f=this.getCanvasByViewport([0,0]);h.translate([f[0]-p.x,f[1]-p.y]),h.scale(1/this.getCamera().getZoom()),c.appendChild(h),c.appendChild(this.getLayer("transient").getRoot().cloneNode(!0));let g=this.getCamera(),y=c.getCamera();if("viewport"===n)y.setZoom(g.getZoom()),y.setPosition(g.getPosition()),y.setFocalPoint(g.getFocalPoint());else if("overall"===n){let[t,e,n]=y.getPosition(),[i,r,a]=y.getFocalPoint();y.setPosition([t+s,e+o,n]),y.setFocalPoint([i+s,r+o,a]);}let m=c.getContextService();return new Promise(t=>{c.addEventListener(r.CanvasEvent.RERENDER,()=>w(this,void 0,void 0,function*(){yield new Promise(t=>setTimeout(t,300)),t((yield m.toDataURL(i)));}));});});}destroy(){Object.values(this.getLayers()).forEach(t=>{t.getCamera().cancelLandmarkAnimation(),t.destroy();});}}function D(t,e){return Object.fromEntries(e.map(e=>{let n=(null==t?void 0:t(e))||new a.Renderer;return n instanceof a.Renderer&&n.setConfig({enableDirtyRectangleRendering:!1}),"main"===e?n.registerPlugin(new S({isDocumentDraggable:!0,isDocumentDroppable:!0,dragstartDistanceThreshold:10,dragstartTimeThreshold:100})):n.unregisterPlugin(n.getPlugin("dom-interaction")),[e,n];}));}function L(t){Object.entries(t).forEach(([t,e])=>{let n=e.getContextService().getDomElement();(null==n?void 0:n.style)&&(n.style.gridArea="1 / 1 / 2 / 2",n.style.outline="none",n.tabIndex=1,"main"!==t&&(n.style.pointerEvents="none")),(null==n?void 0:n.parentElement)&&(n.parentElement.style.display="grid");});}},bf55e093:function(t,e,n){"use strict";n.d(e,"__esModule",{value:!0}),n.e(e,{getBBoxHeight:function(){return u;},getBBoxSegments:function(){return P;},getBBoxSize:function(){return c;},getBBoxWidth:function(){return d;},getCombinedBBox:function(){return g;},getExpandedBBox:function(){return f;},getIncircleRadius:function(){return _;},getNearestBoundaryPoint:function(){return O;},getNearestBoundarySide:function(){return x;},getNodeBBox:function(){return h;},getPointBBox:function(){return p;},getTriangleCenter:function(){return S;},isBBoxInside:function(){return y;},isPointBBoxCenter:function(){return E;},isPointInBBox:function(){return m;},isPointOnBBoxBoundary:function(){return b;},isPointOutsideBBox:function(){return v;}});var i=n("777fffbe"),r=n("a0f386cf"),a=i._(n("d8d8eaf5")),s=n("ffe4817e"),o=n("870fd70e"),l=n("50905a3a");function d(t){return t.max[0]-t.min[0];}function u(t){return t.max[1]-t.min[1];}function c(t){return[d(t),u(t)];}function h(t,e){let n=(0,s.isPoint)(t)?p(t):t.getShape("key").getBounds();return e?f(n,e):n;}function p(t){let[e,n,i=0]=t,a=new r.AABB;return a.setMinMax([e,n,i],[e,n,i]),a;}function f(t,e){let[n,i,a,s]=(0,l.parsePadding)(e),[o,d,u]=t.min,[c,h,p]=t.max,f=new r.AABB;return f.setMinMax([o-s,d-n,u],[c+i,h+a,p]),f;}function g(t){if(0===t.length)return new r.AABB;if(1===t.length)return t[0];let e=new r.AABB;e.setMinMax(t[0].min,t[0].max);for(let n=1;n<t.length;n++){let i=t[n];e.setMinMax([Math.min(e.min[0],i.min[0]),Math.min(e.min[1],i.min[1]),Math.min(e.min[2],i.min[2])],[Math.max(e.max[0],i.max[0]),Math.max(e.max[1],i.max[1]),Math.max(e.max[2],i.max[2])]);}return e;}function y(t,e){let[n,i]=t.min,[r,a]=t.max,[s,o]=e.min,[l,d]=e.max;return n>=s&&r<=l&&i>=o&&a<=d;}function m(t,e){return(0,o.isBetween)(t[0],e.min[0],e.max[0])&&(0,o.isBetween)(t[1],e.min[1],e.max[1]);}function b(t,e,n=!1){let{min:[i,r],max:[a,s]}=e,l=(t[1]===r||t[1]===s)&&(n||(0,o.isBetween)(t[0],i,a)),d=(t[0]===i||t[0]===a)&&(n||(0,o.isBetween)(t[1],r,s));return l||d;}function v(t,e){return!m(t,e);}function E(t,e){let{center:n}=e;return t[0]===n[0]&&t[1]===n[1];}function x(t,e){let[n,i]=t,[r,a]=e.min,[s,o]=e.max,l=n-r,d=s-n,u=i-a,c=o-i,h=Math.min(l,d,u,c);return h===l?"left":h===d?"right":h===u?"top":h===c?"bottom":"left";}function O(t,e){let n=(0,a.default)(t);if(m(t,e))switch(x(t,e)){case"left":n[0]=e.min[0];break;case"right":n[0]=e.max[0];break;case"top":n[1]=e.min[1];break;case"bottom":n[1]=e.max[1];}else{let[i,r]=t,[a,s]=e.min,[l,d]=e.max;n[0]=(0,o.isBetween)(i,a,l)?i:i<a?a:l,n[1]=(0,o.isBetween)(r,s,d)?r:r<s?s:d;}return n;}function S(t,e){let{center:n}=t,[i,r]=c(t);return["up"===e||"down"===e?n[0]:"right"===e?n[0]-i/6:n[0]+i/6,"left"===e||"right"===e?n[1]:"down"===e?n[1]-r/6:n[1]+r/6];}function _(t,e){let[n,i]=c(t);return[n,i]="up"===e||"down"===e?[n,i]:[i,n],(Math.pow(i,2)-Math.pow(Math.sqrt(Math.pow(n/2,2)+Math.pow(i,2))-n/2,2))/(2*i);}function P(t){let{min:[e,n],max:[i,r]}=t,a=[e,r],s=[i,r],o=[i,n],l=[e,n];return[[a,s],[s,o],[o,l],[l,a]];}},bfd3e1a0:function(t,e,n){"use strict";n.d(e,"__esModule",{value:!0}),n.e(e,{circle:function(){return i;},diamond:function(){return a;},rect:function(){return o;},simple:function(){return d;},triangle:function(){return r;},triangleRect:function(){return l;},vee:function(){return s;}});let i=(t,e)=>{let n=Math.max(t,e)/2;return[["M",-t/2,0],["A",n,n,0,1,0,2*n-t/2,0],["A",n,n,0,1,0,-t/2,0],["Z"]];},r=(t,e)=>[["M",-t/2,0],["L",t/2,-e/2],["L",t/2,e/2],["Z"]],a=(t,e)=>[["M",-t/2,0],["L",0,-e/2],["L",t/2,0],["L",0,e/2],["Z"]],s=(t,e)=>[["M",-t/2,0],["L",t/2,-e/2],["L",4*t/5-t/2,0],["L",t/2,e/2],["Z"]],o=(t,e)=>[["M",-t/2,-e/2],["L",t/2,-e/2],["L",t/2,e/2],["L",-t/2,e/2],["Z"]],l=(t,e)=>{let n=t/2,i=t/7,r=t-i;return[["M",-n,0],["L",0,-e/2],["L",0,e/2],["Z"],["M",r-n,-e/2],["L",r+i-n,-e/2],["L",r+i-n,e/2],["L",r-n,e/2],["Z"]];},d=(t,e)=>[["M",t/2,-e/2],["L",-t/2,0],["L",t/2,0],["L",-t/2,0],["L",t/2,e/2]];},bfe0f394:function(t,e,n){"use strict";n.d(e,"__esModule",{value:!0}),e.isLinesParallel=a,e.getLinesIntersection=function(t,e,n=!1){if(a(t,e))return;let[r,s]=t,[o,l]=e,d=((r[0]-o[0])*(o[1]-l[1])-(r[1]-o[1])*(o[0]-l[0]))/((r[0]-s[0])*(o[1]-l[1])-(r[1]-s[1])*(o[0]-l[0])),u=l[0]-o[0]?(r[0]-o[0]+d*(s[0]-r[0]))/(l[0]-o[0]):(r[1]-o[1]+d*(s[1]-r[1]))/(l[1]-o[1]);if(n||(0,i.isBetween)(d,0,1)&&(0,i.isBetween)(u,0,1))return[r[0]+d*(s[0]-r[0]),r[1]+d*(s[1]-r[1])];};let i=n("9d4ee1c4"),r=n("41446765");function a(t,e){let[n,i]=t,[a,s]=e,o=(0,r.subtract)(n,i),l=(0,r.subtract)(a,s);return(0,r.cross)(o,l).every(t=>0===t);}},c135b32a:function(t,e,n){"use strict";n.d(e,"__esModule",{value:!0}),e.getWordWrapWidthWithBase=r,e.getWordWrapWidthByBox=function(t,e,n=1,i=!1){return r((t.max[0]-t.min[0])*(i?n:1),e);},e.getWordWrapWidthByEnds=function(t,e,n=1){return r((0,i.distance)(t[0],t[1])*n,e);};let i=n("41446765");function r(t,e){let n=2*t;return"string"==typeof e?n=t*Number(e.replace("%",""))/100:"number"==typeof e&&(n=e),isNaN(n)&&(n=2*t),n;}},c24cd24c:function(t,e,n){"use strict";n.d(e,"__esModule",{value:!0}),n.d(e,"Polygon",{enumerable:!0,get:function(){return s;}});var i=n("a0f386cf"),r=n("e492a2d3"),a=n("eeff6888");class s extends a.BaseNode{constructor(t){super(t);}get parsedAttributes(){return this.attributes;}drawKeyShape(t,e){return this.upsert("key",i.Polygon,this.getKeyStyle(t),e);}getKeyStyle(t){return Object.assign(Object.assign({},super.getKeyStyle(t)),{points:this.getPoints(t)});}getIntersectPoint(t,e=!1){var n,i;let{points:a}=this.getShape("key").attributes,s=[+((null===(n=this.attributes)||void 0===n?void 0:n.x)||0),+((null===(i=this.attributes)||void 0===i?void 0:i.y)||0)];return(0,r.getPolygonIntersectPoint)(t,s,a,!0,e).point;}}},c2d5d9cb:function(t,e,n){"use strict";n.d(e,"__esModule",{value:!0}),n.d(e,"register",{enumerable:!0,get:function(){return a;}});var i=n("16ea0f92"),r=n("875ed127");function a(t,e,n,s=!1){let o=r.EXTENSION_REGISTRY[t][e];!s&&o?o!==n&&i.print.warn(`The extension ${e} of ${t} has been registered before.`):Object.assign(r.EXTENSION_REGISTRY[t],{[e]:n});}},c334d8c0:function(t,e,n){"use strict";n.d(e,"__esModule",{value:!0}),n.d(e,"CubicHorizontal",{enumerable:!0,get:function(){return a;}});var i=n("1165dca0"),r=n("35a30c27");class a extends r.Cubic{constructor(t){super((0,i.mergeOptions)({style:a.defaultStyleProps},t));}getControlPoints(t,e,n,i){let r=e[0]-t[0];return[[t[0]+r*n[0]+i[0],t[1]],[e[0]-r*n[1]+i[1],e[1]]];}}a.defaultStyleProps={curvePosition:[.5,.5],curveOffset:[0,0]};},c50ccc52:function(t,e,n){"use strict";n.d(e,"__esModule",{value:!0}),e.NodeEvent=e.HistoryEvent=e.GraphEvent=e.EdgeEvent=e.ContainerEvent=e.CommonEvent=e.ComboEvent=e.CanvasEvent=e.AnimationType=void 0;var i=n("3ad6e8f3");n.d(e,"AnimationType",{enumerable:!0,get:function(){return i.AnimationType;}});var r=n("eea70c0e");Object.defineProperty(e,"CanvasEvent",{enumerable:!0,get:function(){return r.CanvasEvent;}});var a=n("6f823a3e");Object.defineProperty(e,"ComboEvent",{enumerable:!0,get:function(){return a.ComboEvent;}});var s=n("49a6c2f9");Object.defineProperty(e,"CommonEvent",{enumerable:!0,get:function(){return s.CommonEvent;}});var o=n("76853a1e");Object.defineProperty(e,"ContainerEvent",{enumerable:!0,get:function(){return o.ContainerEvent;}});var l=n("30e7d3ea");Object.defineProperty(e,"EdgeEvent",{enumerable:!0,get:function(){return l.EdgeEvent;}});var d=n("083b2c8e");Object.defineProperty(e,"GraphEvent",{enumerable:!0,get:function(){return d.GraphEvent;}});var u=n("d1a22e59");Object.defineProperty(e,"HistoryEvent",{enumerable:!0,get:function(){return u.HistoryEvent;}});var c=n("c5facbe5");Object.defineProperty(e,"NodeEvent",{enumerable:!0,get:function(){return c.NodeEvent;}});},c516880f:function(t,e,n){n.d(e,"__esModule",{value:!0}),n.e(e,{BaseExtension:function(){return o;},ExtensionController:function(){return s;}});var i=n("afd4cd55"),r=n("16ea0f92"),a=n("e8f8b56e");class s{constructor(t){this.extensions=[],this.extensionMap={},this.context=t;}setExtensions(t){let e=function(t,e,n){let i={},r=t=>(t in i||(i[t]=0),`${e}-${t}-${i[t]++}`);return n.map(e=>"string"==typeof e?{type:e,key:r(e)}:"function"==typeof e?e.call(t):e.key?e:Object.assign(Object.assign({},e),{key:r(e.type)}));}(this.context.graph,this.category,t),{enter:n,update:r,exit:a,keep:s}=(0,i.arrayDiff)(this.extensions,e,t=>t.key);this.createExtensions(n),this.updateExtensions([...r,...s]),this.destroyExtensions(a),this.extensions=e;}createExtension(t){let{category:e}=this,{key:n,type:i}=t,s=(0,a.getExtension)(e,i);if(!s)return r.print.warn(`The extension ${i} of ${e} is not registered.`);let o=new s(this.context,t);this.extensionMap[n]=o;}createExtensions(t){t.forEach(t=>this.createExtension(t));}updateExtension(t){let{key:e}=t,n=this.extensionMap[e];n&&n.update(t);}updateExtensions(t){t.forEach(t=>this.updateExtension(t));}destroyExtension(t){let e=this.extensionMap[t];e&&(e.destroy(),delete this.extensionMap[t]);}destroyExtensions(t){t.forEach(({key:t})=>this.destroyExtension(t));}destroy(){Object.values(this.extensionMap).forEach(t=>t.destroy()),this.context={},this.extensions=[],this.extensionMap={};}}class o{constructor(t,e){this.events=[],this.destroyed=!1,this.context=t,this.options=e;}update(t){this.options=Object.assign(this.options,t);}destroy(){this.context={},this.options={},this.destroyed=!0;}}},c5facbe5:function(t,e,n){"use strict";var i,r;n.d(e,"__esModule",{value:!0}),e.NodeEvent=void 0,(r=i||(e.NodeEvent=i={})).CLICK="node:click",r.DBLCLICK="node:dblclick",r.POINTER_OVER="node:pointerover",r.POINTER_LEAVE="node:pointerleave",r.POINTER_ENTER="node:pointerenter",r.POINTER_MOVE="node:pointermove",r.POINTER_OUT="node:pointerout",r.POINTER_DOWN="node:pointerdown",r.POINTER_UP="node:pointerup",r.CONTEXT_MENU="node:contextmenu",r.DRAG_START="node:dragstart",r.DRAG="node:drag",r.DRAG_END="node:dragend",r.DRAG_ENTER="node:dragenter",r.DRAG_OVER="node:dragover",r.DRAG_LEAVE="node:dragleave",r.DROP="node:drop";},c662c876:function(t,e,n){"use strict";n.d(e,"__esModule",{value:!0}),e.TREE_KEY=e.COMBO_KEY=void 0,e.COMBO_KEY="combo",e.TREE_KEY="tree";},c8382489:function(t,e,n){n.d(e,"__esModule",{value:!0}),n.e(e,{MapNodeSize:function(){return b;}});var i=n("777fffbe"),r=n("bf8f013f"),a=i._(r),s=n("0c915bb9"),o=i._(s),l=n("cd44001a"),d=n("8a2f2f0b"),u=n("50905a3a");let c=(t,e,n)=>{let[i,r]=e,[a,s]=n;return r===i?a:a+(t-i)/(r-i)*(s-a);},h=(t,e,n)=>{let[i,r]=e,[a,s]=n;return a+Math.log(t-i+1)/Math.log(r-i+1)*(s-a);},p=(t,e,n,i=2)=>{let[r,a]=e,[s,o]=n;return s+Math.pow((t-r)/(a-r),i)*(o-s);},f=(t,e,n)=>{let[i,r]=e,[a,s]=n;return a+Math.sqrt((t-i)/(r-i))*(s-a);};var g=n("4c372554"),y=n("a7082564"),m=n("50c39bee");class b extends y.BaseTransform{constructor(t,e){super(t,(0,a.default)({},b.defaultOptions,e)),this.assignSizeByCentrality=(t,e,n,i,r,a)=>{let s=[e,n],o=[i[0],r[0]],l=[i[1],r[1]],d=[i[2],r[2]],u=(t,e)=>{if("function"==typeof a)return a(t,s,e);switch(a){case"linear":return c(t,s,e);case"log":return h(t,s,e);case"pow":return p(t,s,e,2);case"sqrt":return f(t,s,e);default:return e[0];}};return[u(t,o),u(t,l),u(t,d)];};}beforeDraw(t){let{model:e}=this.context,n=e.getNodeData(),i=(0,g.parseSize)(this.options.maxSize),r=(0,g.parseSize)(this.options.minSize),s=this.getCentralities(this.options.centrality),o=s.size>0?Math.max(...s.values()):0,l=s.size>0?Math.min(...s.values()):0;return n.forEach(e=>{var n;let u=this.assignSizeByCentrality(s.get((0,d.idOf)(e))||0,l,o,r,i,this.options.scale),c=null===(n=this.context.element)||void 0===n?void 0:n.getElement((0,d.idOf)(e)),h={size:u};this.assignLabelStyle(h,u,e,c),c&&(0,m.isStyleEqual)(h,c.attributes)||(0,m.reassignTo)(t,c?"update":"add","node",(0,a.default)(e,{style:h}),!0);}),t;}assignLabelStyle(t,e,n,i){var r;let a=i?i.config.style:null===(r=this.context.element)||void 0===r?void 0:r.getElementComputedStyle("node",n);if(Object.assign(t,(0,o.default)(a,["labelFontSize","labelLineHeight"])),this.options.mapLabelSize){let n=this.getLabelSizeByNodeSize(e,1/0,Number(t.labelFontSize));Object.assign(t,{labelFontSize:n,labelLineHeight:n+(0,u.getVerticalPadding)(t.labelPadding)});}return t;}getLabelSizeByNodeSize(t,e,n){let i=Math.min(...t)/2,[r,a]=Array.isArray(this.options.mapLabelSize)?this.options.mapLabelSize:[n,e];return Math.min(a,Math.max(i,r));}getCentralities(t){let{model:e}=this.context,n=e.getData();if("function"==typeof t)return t(n);let i=e.getRelatedEdgesData.bind(e);return(0,l.getNodeCentralities)(n,i,t);}}b.defaultOptions={centrality:{type:"degree"},maxSize:80,minSize:20,scale:"linear",mapLabelSize:!1};},cd44001a:function(t,e,n){"use strict";n.d(e,"__esModule",{value:!0}),n.e(e,{computeNodeBetweennessCentrality:function(){return o;},computeNodeClosenessCentrality:function(){return l;},computeNodeEigenvectorCentrality:function(){return u;},computeNodePageRankCentrality:function(){return d;},createAdjacencyMatrix:function(){return c;},getNodeCentralities:function(){return a;},initCentralityResult:function(){return s;}});var i=n("44ea6cce"),r=n("8a2f2f0b");let a=(t,e,n)=>{var i;switch(n.type){case"degree":{let a=new Map;return null===(i=t.nodes)||void 0===i||i.forEach(t=>{let i=e((0,r.idOf)(t),n.direction).length;a.set((0,r.idOf)(t),i);}),a;}case"betweenness":return o(t,n.directed,n.weightPropertyName);case"closeness":return l(t,n.directed,n.weightPropertyName);case"eigenvector":return u(t,n.directed);case"pagerank":return d(t,n.epsilon,n.linkProb);default:return s(t);}},s=t=>{var e;let n=new Map;return null===(e=t.nodes)||void 0===e||e.forEach(t=>{n.set((0,r.idOf)(t),0);}),n;},o=(t,e,n)=>{let a=s(t),{nodes:o=[]}=t;return o.forEach(s=>{o.forEach(o=>{if(s!==o){let{allPath:l}=(0,i.findShortestPath)(t,(0,r.idOf)(s),(0,r.idOf)(o),e,n),d=l.length;l.flat().forEach(t=>{t!==(0,r.idOf)(s)&&t!==(0,r.idOf)(o)&&a.set(t,a.get(t)+1/d);});}});}),a;},l=(t,e,n)=>{let a=new Map,{nodes:s=[]}=t;return s.forEach(o=>{let l=s.reduce((a,s)=>{if(o!==s){let{length:l}=(0,i.findShortestPath)(t,(0,r.idOf)(o),(0,r.idOf)(s),e,n);a+=l;}return a;},0);a.set((0,r.idOf)(o),1/l);}),a;},d=(t,e,n)=>{var a;let s=new Map,o=(0,i.pageRank)(t,e,n);return null===(a=t.nodes)||void 0===a||a.forEach(t=>{s.set((0,r.idOf)(t),o[(0,r.idOf)(t)]);}),s;},u=(t,e)=>{let{nodes:n=[]}=t,i=h(c(t,e),n.length),a=new Map;return n.forEach((t,e)=>{a.set((0,r.idOf)(t),i[e]);}),a;},c=(t,e)=>{let{nodes:n=[],edges:i=[]}=t,a=Array(n.length).fill(null).map(()=>Array(n.length).fill(0));return i.forEach(({source:t,target:i})=>{let s=n.findIndex(e=>(0,r.idOf)(e)===t),o=n.findIndex(t=>(0,r.idOf)(t)===i);e?a[s][o]=1:(a[s][o]=1,a[o][s]=1);}),a;},h=(t,e,n=100,i=1e-6)=>{let r=Array(e).fill(1),a=1/0;for(let s=0;s<n&&a>i;s++){let n=Array(e).fill(0);for(let i=0;i<e;i++)for(let a=0;a<e;a++)n[i]+=t[i][a]*r[a];let i=Math.sqrt(n.reduce((t,e)=>t+e*e,0));for(let t=0;t<e;t++)n[t]/=i;a=Math.sqrt(n.reduce((t,e,n)=>t+(e-r[n])*e,0)),r=n;}return r;};},d0a8fc0a:function(t,e,n){"use strict";var i=this&&this.__createBinding||(Object.create?function(t,e,n,i){void 0===i&&(i=n);var r=Object.getOwnPropertyDescriptor(e,n);(!r||("get"in r?!e.__esModule:r.writable||r.configurable))&&(r={enumerable:!0,get:function(){return e[n];}}),Object.defineProperty(t,i,r);}:function(t,e,n,i){void 0===i&&(i=n),t[i]=e[n];}),r=this&&this.__exportStar||function(t,e){for(var n in t)"default"===n||Object.prototype.hasOwnProperty.call(e,n)||i(e,t,n);};Object.defineProperty(e,"__esModule",{value:!0}),r(n("aebc04bc"),e),r(n("a99ecbda"),e),r(n("c50ccc52"),e),r(n("c662c876"),e),r(n("3c81881a"),e);},d0ddde0e:function(t,e,n){"use strict";n.d(e,"__esModule",{value:!0}),e.Triangle=e.Star=e.Rect=e.Image=e.HTML=e.Hexagon=e.Ellipse=e.Donut=e.Diamond=e.Circle=e.BaseNode=void 0;var i=n("6d16dfc1");n.d(e,"BaseNode",{enumerable:!0,get:function(){return i.BaseNode;}});var r=n("e938b423");Object.defineProperty(e,"Circle",{enumerable:!0,get:function(){return r.Circle;}});var a=n("6a5d81f1");Object.defineProperty(e,"Diamond",{enumerable:!0,get:function(){return a.Diamond;}});var s=n("bb3d2b80");Object.defineProperty(e,"Donut",{enumerable:!0,get:function(){return s.Donut;}});var o=n("e6443357");Object.defineProperty(e,"Ellipse",{enumerable:!0,get:function(){return o.Ellipse;}});var l=n("90e176a1");Object.defineProperty(e,"Hexagon",{enumerable:!0,get:function(){return l.Hexagon;}});var d=n("8c785db6");Object.defineProperty(e,"HTML",{enumerable:!0,get:function(){return d.HTML;}});var u=n("b76a2fe9");Object.defineProperty(e,"Image",{enumerable:!0,get:function(){return u.Image;}});var c=n("ecd954f4");Object.defineProperty(e,"Rect",{enumerable:!0,get:function(){return c.Rect;}});var h=n("fd188c8a");Object.defineProperty(e,"Star",{enumerable:!0,get:function(){return h.Star;}});var p=n("88349fc2");Object.defineProperty(e,"Triangle",{enumerable:!0,get:function(){return p.Triangle;}});},d1a22e59:function(t,e,n){"use strict";var i,r;n.d(e,"__esModule",{value:!0}),e.HistoryEvent=void 0,(r=i||(e.HistoryEvent=i={})).UNDO="undo",r.REDO="redo",r.CANCEL="cancel",r.ADD="add",r.CLEAR="clear",r.CHANGE="change";},d2a5c9ab:function(t,e,n){"use strict";n.d(e,"__esModule",{value:!0}),n.e(e,{getLinesIntersection:function(){return s;},isLinesParallel:function(){return a;}});var i=n("870fd70e"),r=n("6d5a1ab5");function a(t,e){let[n,i]=t,[a,s]=e,o=(0,r.subtract)(n,i),l=(0,r.subtract)(a,s);return(0,r.cross)(o,l).every(t=>0===t);}function s(t,e,n=!1){if(a(t,e))return;let[r,o]=t,[l,d]=e,u=((r[0]-l[0])*(l[1]-d[1])-(r[1]-l[1])*(l[0]-d[0]))/((r[0]-o[0])*(l[1]-d[1])-(r[1]-o[1])*(l[0]-d[0])),c=d[0]-l[0]?(r[0]-l[0]+u*(o[0]-r[0]))/(d[0]-l[0]):(r[1]-l[1]+u*(o[1]-r[1]))/(d[1]-l[1]);if(n||(0,i.isBetween)(u,0,1)&&(0,i.isBetween)(c,0,1))return[r[0]+u*(o[0]-r[0]),r[1]+u*(o[1]-r[1])];}},d65d2c90:function(t,e,n){"use strict";n.d(e,"__esModule",{value:!0}),n.d(e,"version",{enumerable:!0,get:function(){return i;}});let i="5.0.45";},d65e9677:function(t,e,n){n.d(e,"__esModule",{value:!0}),n.e(e,{Graph:function(){return tW;}});var i=n("777fffbe"),r=n("d9911ccf"),a=i._(r),s=n("30da05e7"),o=i._(s),l=n("e602108f"),d=i._(l),u=n("7e708962"),c=i._(u),h=n("4c900b62"),p=i._(h),f=n("dfd51207"),g=i._(f),y=n("1304978e"),m=i._(y),b=n("4223a5bf"),v=i._(b),E=n("d9033aa4"),x=n("e1c279a0");let O=t=>t?parseInt(t):0;function S(t){if(!t)return[0,0];let e=640,n=480,[i,r]=function(t){let e=getComputedStyle(t),n=t.clientWidth||O(e.width),i=t.clientHeight||O(e.height);return[n-(O(e.paddingLeft)+O(e.paddingRight)),i-(O(e.paddingTop)+O(e.paddingBottom))];}(t);return e=i||e,n=r||n,[Math.max((0,p.default)(e)?e:1,1),Math.max((0,p.default)(n)?n:1,1)];}var _=n("b5f0d953"),P=n("f9f7922b"),C=n("8a2f2f0b"),w=n("4557e62d"),M=n("16ea0f92"),A=n("6d5a1ab5");function T(t){var e;return(null===(e=null==t?void 0:t.style)||void 0===e?void 0:e.zIndex)||0;}var B=n("9a99919f"),D=n("9c1281e1"),L=n("5f4f7744"),N=i._(L),R=n("4199ddb4"),I=i._(R);let k="cachedStyle",j=t=>`__${t}__`;function z(t,e){return(0,N.default)(t,[k,j(e)]);}class F{constructor(t){this.tasks=[],this.animations=new Set,this.context=t;}getTasks(){let t=[...this.tasks];return this.tasks=[],t;}add(t,e){this.tasks.push([t,e]);}animate(t,e,n){var i,r,a;null===(i=null==e?void 0:e.before)||void 0===i||i.call(e);let s=this.getTasks().map(([e,i])=>{var r,a,s;let{element:o,elementType:l,stage:d}=e,u=(0,D.getElementAnimationOptions)(this.context.options,l,d,t);null===(r=null==i?void 0:i.before)||void 0===r||r.call(i);let c=u.length?(0,B.executor)(o,this.inferStyle(e,n),u):null;return c?(null===(a=null==i?void 0:i.beforeAnimate)||void 0===a||a.call(i,c),c.finished.then(()=>{var t,e;null===(t=null==i?void 0:i.afterAnimate)||void 0===t||t.call(i,c),null===(e=null==i?void 0:i.after)||void 0===e||e.call(i),this.animations.delete(c);})):null===(s=null==i?void 0:i.after)||void 0===s||s.call(i),c;}).filter(Boolean);s.forEach(t=>this.animations.add(t));let o=(0,D.createAnimationsProxy)(s);return o?(null===(r=null==e?void 0:e.beforeAnimate)||void 0===r||r.call(e,o),o.finished.then(()=>{var t,n;null===(t=null==e?void 0:e.afterAnimate)||void 0===t||t.call(e,o),null===(n=null==e?void 0:e.after)||void 0===n||n.call(e),this.release();})):null===(a=null==e?void 0:e.after)||void 0===a||a.call(e),o;}inferStyle(t,e){var n,i;let{element:r,elementType:a,stage:s,originalStyle:o,updatedStyle:l={}}=t;t.modifiedStyle||(t.modifiedStyle=Object.assign(Object.assign({},o),l));let{modifiedStyle:d}=t,u={},c={};if("enter"===s)Object.assign(u,{opacity:0});else if("exit"===s)Object.assign(c,{opacity:0});else if("show"===s)Object.assign(u,{opacity:0}),Object.assign(c,{opacity:null!==(n=z(r,"opacity"))&&void 0!==n?n:(0,D.inferDefaultValue)("opacity")});else if("hide"===s)Object.assign(u,{opacity:null!==(i=z(r,"opacity"))&&void 0!==i?i:(0,D.inferDefaultValue)("opacity")}),Object.assign(c,{opacity:0});else if("collapse"===s){let{collapse:t}=e||{},{target:n,descendants:i,position:s}=t;if("node"===a){if(i.includes(r.id)){let[t,e,n]=s;Object.assign(c,{x:t,y:e,z:n});}}else if("combo"===a){if(r.id===n||i.includes(r.id)){let[t,e]=s;Object.assign(c,{x:t,y:e,childrenNode:o.childrenNode});}}else"edge"===a&&Object.assign(c,{sourceNode:d.sourceNode,targetNode:d.targetNode});}else if("expand"===s){let{expand:t}=e||{},{target:n,descendants:i,position:s}=t;if("node"===a){if(r.id===n||i.includes(r.id)){let[t,e,n]=s;Object.assign(u,{x:t,y:e,z:n});}}else if("combo"===a){if(r.id===n||i.includes(r.id)){let[t,e,n]=s;Object.assign(u,{x:t,y:e,z:n,childrenNode:d.childrenNode});}}else"edge"===a&&Object.assign(u,{sourceNode:d.sourceNode,targetNode:d.targetNode});}return[Object.keys(u).length>0?Object.assign({},o,u):o,Object.keys(c).length>0?Object.assign({},d,c):d];}stop(){this.animations.forEach(t=>t.cancel());}clear(){this.tasks=[];}release(){var t,e;let{canvas:n}=this.context,i=null===(e=null===(t=n.document)||void 0===t?void 0:t.timeline)||void 0===e?void 0:e.animationsWithPromises;i&&(n.document.timeline.animationsWithPromises=i.filter(t=>"finished"!==t.playState));}destroy(){this.stop(),this.animations.clear(),this.tasks=[];}}class G{constructor(t){this.batchCount=0,this.context=t;}emit(t){let{graph:e}=this.context;e.emit(t.type,t);}startBatch(t=!0){this.batchCount++,1===this.batchCount&&this.emit(new P.GraphLifeCycleEvent(E.GraphEvent.BATCH_START,{initiate:t}));}endBatch(){this.batchCount--,0===this.batchCount&&this.emit(new P.GraphLifeCycleEvent(E.GraphEvent.BATCH_END));}get isBatching(){return this.batchCount>0;}destroy(){this.context=null;}}var V=n("c516880f"),W=n("19365c34");class H extends V.ExtensionController{constructor(t){super(t),this.currentTarget=null,this.currentTargetType=null,this.category="behavior",this.forwardCanvasEvents=t=>{let{target:e}=t,n=(0,P.eventTargetOf)(e);if(!n)return;let{graph:i,canvas:r}=this.context,{type:a,element:s}=n;if("destroyed"in s&&((0,W.isToBeDestroyed)(s)||s.destroyed))return;let{type:o,detail:l,button:d}=t,u=Object.assign(Object.assign({},t),{target:s,targetType:a,originalTarget:e});o===E.CommonEvent.POINTER_MOVE&&(this.currentTarget!==s&&(this.currentTarget&&i.emit(`${this.currentTargetType}:${E.CommonEvent.POINTER_LEAVE}`,Object.assign(Object.assign({},u),{type:E.CommonEvent.POINTER_LEAVE,target:this.currentTarget,targetType:this.currentTargetType})),s&&(Object.assign(u,{type:E.CommonEvent.POINTER_ENTER}),i.emit(`${a}:${E.CommonEvent.POINTER_ENTER}`,u))),this.currentTarget=s,this.currentTargetType=a),o===E.CommonEvent.CLICK&&2===d||(i.emit(`${a}:${o}`,u),i.emit(o,u)),o===E.CommonEvent.CLICK&&2===l&&(Object.assign(u,{type:E.CommonEvent.DBLCLICK}),i.emit(`${a}:${E.CommonEvent.DBLCLICK}`,u),i.emit(E.CommonEvent.DBLCLICK,u)),o===E.CommonEvent.POINTER_DOWN&&2===d&&(Object.assign(u,{type:E.CommonEvent.CONTEXT_MENU,preventDefault:()=>{var t;null===(t=r.getContainer())||void 0===t||t.addEventListener(E.CommonEvent.CONTEXT_MENU,t=>t.preventDefault(),{once:!0});}}),i.emit(`${a}:${E.CommonEvent.CONTEXT_MENU}`,u),i.emit(E.CommonEvent.CONTEXT_MENU,u));},this.forwardContainerEvents=t=>{this.context.graph.emit(t.type,t);},this.forwardEvents(),this.setBehaviors(this.context.options.behaviors||[]);}setBehaviors(t){this.setExtensions(t);}forwardEvents(){let t=this.context.canvas.getContainer();t&&[E.ContainerEvent.KEY_DOWN,E.ContainerEvent.KEY_UP].forEach(e=>{t.addEventListener(e,this.forwardContainerEvents);});let e=this.context.canvas.document;e&&[E.CommonEvent.CLICK,E.CommonEvent.DBLCLICK,E.CommonEvent.POINTER_OVER,E.CommonEvent.POINTER_LEAVE,E.CommonEvent.POINTER_ENTER,E.CommonEvent.POINTER_MOVE,E.CommonEvent.POINTER_OUT,E.CommonEvent.POINTER_DOWN,E.CommonEvent.POINTER_UP,E.CommonEvent.CONTEXT_MENU,E.CommonEvent.DRAG_START,E.CommonEvent.DRAG,E.CommonEvent.DRAG_END,E.CommonEvent.DRAG_ENTER,E.CommonEvent.DRAG_OVER,E.CommonEvent.DRAG_LEAVE,E.CommonEvent.DROP,E.CommonEvent.WHEEL].forEach(t=>{e.addEventListener(t,this.forwardCanvasEvents);});}destroy(){let t=this.context.canvas.getContainer();t&&[E.ContainerEvent.KEY_DOWN,E.ContainerEvent.KEY_UP].forEach(e=>{t.removeEventListener(e,this.forwardContainerEvents);}),this.context.canvas.document.removeAllEventListeners(),super.destroy();}}var K=n("be1f153d"),Y=n("c536c45f"),$=n("1c656441"),U=i._($),X=n("ae054c14"),Z=i._(X),q=this&&this.__rest||function(t,e){var n={};for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&0>e.indexOf(i)&&(n[i]=t[i]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols)for(var r=0,i=Object.getOwnPropertySymbols(t);r<i.length;r++)0>e.indexOf(i[r])&&Object.prototype.propertyIsEnumerable.call(t,i[r])&&(n[i[r]]=t[i[r]]);return n;};function Q(t,e){let{data:n,style:i}=t,r=q(t,["data","style"]),{data:a,style:s}=e,o=q(e,["data","style"]),l=Object.assign(Object.assign({},r),o);return(n||a)&&Object.assign(l,{data:Object.assign(Object.assign({},n),a)}),(i||s)&&Object.assign(l,{style:Object.assign(Object.assign({},i),s)}),l;}function J(t){let{data:e,style:n}=t,i=q(t,["data","style"]);return e&&(i.data=Object.assign({},e)),n&&(i.style=Object.assign({},n)),i;}function tt(t={},e={}){let{states:n=[],data:i={},style:r={},children:a=[]}=t,s=q(t,["states","data","style","children"]),{states:o=[],data:l={},style:d={},children:u=[]}=e,c=q(e,["states","data","style","children"]),h=(t,e)=>t.length===e.length&&t.every((t,n)=>t===e[n]),p=(t,e)=>{let n=Object.keys(t),i=Object.keys(e);return n.length===i.length&&n.every(n=>t[n]===e[n]);};return!!(p(s,c)&&h(a,u)&&h(n,o)&&p(i,l)&&p(r,d));}var te=n("afd4cd55"),tn=n("ffe4817e"),ti=this&&this.__rest||function(t,e){var n={};for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&0>e.indexOf(i)&&(n[i]=t[i]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols)for(var r=0,i=Object.getOwnPropertySymbols(t);r<i.length;r++)0>e.indexOf(i[r])&&Object.prototype.propertyIsEnumerable.call(t,i[r])&&(n[i[r]]=t[i[r]]);return n;};function tr(t){let{id:e=(0,C.idOf)(t),style:n,data:i}=t,r=ti(t,["id","style","data"]),a=Object.assign(Object.assign({},t),{style:Object.assign({},n),data:Object.assign({},i)});return(0,tn.isEdgeData)(t)?Object.assign({id:e,data:a},r):{id:e,data:a};}function ta(t){return t.data;}var ts=n("2be3380d"),to=n("51b633a8");class tl{constructor(){this.latestRemovedComboIds=new Set,this.comboIds=new Set,this.changes=[],this.batchCount=0,this.isTraceless=!1,this.enableUpdateNodeLikeHierarchy=!0,this.model=new Y.Graph;}pushChange(t){if(this.isTraceless)return;let{type:e}=t;if(e===E.ChangeType.NodeUpdated||e===E.ChangeType.EdgeUpdated||e===E.ChangeType.ComboUpdated){let{value:n,original:i}=t;this.changes.push({value:J(n),original:J(i),type:e});}else this.changes.push({value:J(t.value),type:e});}getChanges(){return this.changes;}clearChanges(){this.changes=[];}batch(t){this.batchCount++,this.model.batch(t),this.batchCount--;}isBatching(){return this.batchCount>0;}silence(t){this.isTraceless=!0,t(),this.isTraceless=!1;}isCombo(t){return this.comboIds.has(t)||this.latestRemovedComboIds.has(t);}getData(){return{nodes:this.getNodeData(),edges:this.getEdgeData(),combos:this.getComboData()};}getNodeData(t){return this.model.getAllNodes().reduce((e,n)=>{let i=ta(n);return this.isCombo((0,C.idOf)(i))||(void 0===t?e.push(i):t.includes((0,C.idOf)(i))&&e.push(i)),e;},[]);}getEdgeDatum(t){return ta(this.model.getEdge(t));}getEdgeData(t){return this.model.getAllEdges().reduce((e,n)=>{let i=ta(n);return void 0===t?e.push(i):t.includes((0,C.idOf)(i))&&e.push(i),e;},[]);}getComboData(t){return this.model.getAllNodes().reduce((e,n)=>{let i=ta(n);return this.isCombo((0,C.idOf)(i))&&(void 0===t?e.push(i):t.includes((0,C.idOf)(i))&&e.push(i)),e;},[]);}getRootsData(t=E.TREE_KEY){return this.model.getRoots(t).map(ta);}getAncestorsData(t,e){let{model:n}=this;return n.hasNode(t)&&n.hasTreeStructure(e)?n.getAncestors(t,e).map(ta):[];}getDescendantsData(t){let e=this.getElementDataById(t),n=[];return(0,to.dfs)(e,t=>{t!==e&&n.push(t);},t=>this.getChildrenData((0,C.idOf)(t)),"TB"),n;}getParentData(t,e){let{model:n}=this;if(!e){M.print.warn("The hierarchy structure key is not specified");return;}if(!n.hasNode(t)||!n.hasTreeStructure(e))return;let i=n.getParent(t,e);return i?ta(i):void 0;}getChildrenData(t){let e="node"===this.getElementType(t)?E.TREE_KEY:E.COMBO_KEY,{model:n}=this;return n.hasNode(t)&&n.hasTreeStructure(e)?n.getChildren(t,e).map(ta):[];}getElementsDataByType(t){return"node"===t?this.getNodeData():"edge"===t?this.getEdgeData():"combo"===t?this.getComboData():[];}getElementDataById(t){return"edge"===this.getElementType(t)?this.getEdgeDatum(t):this.getNodeLikeDatum(t);}getNodeLikeDatum(t){return ta(this.model.getNode(t));}getNodeLikeData(t){return this.model.getAllNodes().reduce((e,n)=>{let i=ta(n);return t?t.includes((0,C.idOf)(i))&&e.push(i):e.push(i),e;},[]);}getElementDataByState(t,e){return this.getElementsDataByType(t).filter(t=>{var n;return null===(n=t.states)||void 0===n?void 0:n.includes(e);});}getElementState(t){var e;return(null===(e=this.getElementDataById(t))||void 0===e?void 0:e.states)||[];}hasNode(t){return this.model.hasNode(t)&&!this.isCombo(t);}hasEdge(t){return this.model.hasEdge(t);}hasCombo(t){return this.model.hasNode(t)&&this.isCombo(t);}getRelatedEdgesData(t,e="both"){return this.model.getRelatedEdges(t,e).map(ta);}getNeighborNodesData(t){return this.model.getNeighbors(t).map(ta);}setData(t){let{nodes:e=[],edges:n=[],combos:i=[]}=t,{nodes:r,edges:a,combos:s}=this.getData(),o=(0,te.arrayDiff)(r,e,t=>(0,C.idOf)(t),tt),l=(0,te.arrayDiff)(a,n,t=>(0,C.idOf)(t),tt),d=(0,te.arrayDiff)(s,i,t=>(0,C.idOf)(t),tt);this.batch(()=>{let t={nodes:o.enter,edges:l.enter,combos:d.enter};this.addData(t),this.computeZIndex(t,"add",!0);let e={nodes:o.update,edges:l.update,combos:d.update};this.updateData(e),this.computeZIndex(e,"update",!0);let n={nodes:o.exit.map(C.idOf),edges:l.exit.map(C.idOf),combos:d.exit.map(C.idOf)};this.removeData(n);});}addData(t){let{nodes:e,edges:n,combos:i}=t;this.batch(()=>{this.addComboData(i),this.addNodeData(e),this.addEdgeData(n);}),this.computeZIndex(t,"add");}addNodeData(t=[]){t.length&&(this.model.addNodes(t.map(t=>(this.pushChange({value:t,type:E.ChangeType.NodeAdded}),tr(t)))),this.updateNodeLikeHierarchy(t),this.computeZIndex({nodes:t},"add"));}addEdgeData(t=[]){t.length&&(this.model.addEdges(t.map(t=>(this.pushChange({value:t,type:E.ChangeType.EdgeAdded}),tr(t)))),this.computeZIndex({edges:t},"add"));}addComboData(t=[]){if(!t.length)return;let{model:e}=this;e.hasTreeStructure(E.COMBO_KEY)||e.attachTreeStructure(E.COMBO_KEY),e.addNodes(t.map(t=>(this.comboIds.add((0,C.idOf)(t)),this.pushChange({value:t,type:E.ChangeType.ComboAdded}),tr(t)))),this.updateNodeLikeHierarchy(t),this.computeZIndex({combos:t},"add");}addChildrenData(t,e){let n=this.getNodeLikeDatum(t),i=e.map(C.idOf);this.addNodeData(e),this.updateNodeData([{id:t,children:[...n.children||[],...i]}]),this.addEdgeData(i.map(e=>({source:t,target:e})));}computeZIndex(t,e,n=!1){!n&&this.isBatching()||this.batch(()=>{let{nodes:n=[],edges:i=[],combos:r=[]}=t;r.forEach(t=>{var n,i,r;let a=(0,C.idOf)(t);if("add"===e&&(0,p.default)(null===(n=t.style)||void 0===n?void 0:n.zIndex)||"update"===e&&!("combo"in t))return;let s=this.getParentData(a,E.COMBO_KEY),o=s?(null!==(r=null===(i=s.style)||void 0===i?void 0:i.zIndex)&&void 0!==r?r:0)+1:0;this.preventUpdateNodeLikeHierarchy(()=>{this.updateComboData([{id:a,style:{zIndex:o}}]);});}),n.forEach(t=>{var n,i,r;let a=(0,C.idOf)(t);if("add"===e&&(0,p.default)(null===(n=t.style)||void 0===n?void 0:n.zIndex)||"update"===e&&!("combo"in t)&&!("children"in t))return;let s=0,o=this.getParentData(a,E.COMBO_KEY);if(o)s=((null===(i=o.style)||void 0===i?void 0:i.zIndex)||0)+1;else{let t=this.getParentData(a,E.TREE_KEY);t&&(s=(null===(r=null==t?void 0:t.style)||void 0===r?void 0:r.zIndex)||0);}this.preventUpdateNodeLikeHierarchy(()=>{this.updateNodeData([{id:a,style:{zIndex:s}}]);});}),i.forEach(t=>{var e,n,i,r,a;if((0,p.default)(null===(e=t.style)||void 0===e?void 0:e.zIndex))return;let{id:s,source:o,target:l}=t;if(s){let t=this.getEdgeDatum(s);o=t.source,l=t.target;}else s=(0,C.idOf)(t);if(!o||!l)return;let d=(null===(i=null===(n=this.getNodeLikeDatum(o))||void 0===n?void 0:n.style)||void 0===i?void 0:i.zIndex)||0,u=(null===(a=null===(r=this.getNodeLikeDatum(l))||void 0===r?void 0:r.style)||void 0===a?void 0:a.zIndex)||0;this.updateEdgeData([{id:(0,C.idOf)(t),style:{zIndex:Math.max(d,u)-1}}]);});});}getFrontZIndex(t){var e;let n=this.getElementType(t),i=this.getElementDataById(t),r=this.getData();if(Object.assign(r,{[`${n}s`]:r[`${n}s`].filter(e=>(0,C.idOf)(e)!==t)}),"combo"===n&&!(0,x.isCollapsed)(i)){let e=new Set(this.getAncestorsData(t,E.COMBO_KEY).map(C.idOf));r.nodes=r.nodes.filter(t=>!e.has((0,C.idOf)(t))),r.combos=r.combos.filter(t=>!e.has((0,C.idOf)(t))),r.edges=r.edges.filter(({source:t,target:n})=>!e.has(t)&&!e.has(n));}return Math.max((null===(e=i.style)||void 0===e?void 0:e.zIndex)||0,0,...Object.values(r).flat().map(t=>{var e;return((null===(e=null==t?void 0:t.style)||void 0===e?void 0:e.zIndex)||0)+1;}));}updateNodeLikeHierarchy(t){if(!this.enableUpdateNodeLikeHierarchy)return;let{model:e}=this;t.forEach(t=>{let n=(0,C.idOf)(t),i=(0,C.parentIdOf)(t);void 0!==i&&(e.hasTreeStructure(E.COMBO_KEY)||e.attachTreeStructure(E.COMBO_KEY),null===i&&this.refreshComboData(n),this.setParent(n,(0,C.parentIdOf)(t),E.COMBO_KEY));let r=t.children||[];if(r.length){e.hasTreeStructure(E.TREE_KEY)||e.attachTreeStructure(E.TREE_KEY);let t=r.filter(t=>e.hasNode(t));t.forEach(t=>this.setParent(t,n,E.TREE_KEY)),t.length!==r.length&&this.updateNodeData([{id:n,children:t}]);}});}preventUpdateNodeLikeHierarchy(t){this.enableUpdateNodeLikeHierarchy=!1,t(),this.enableUpdateNodeLikeHierarchy=!0;}updateData(t){let{nodes:e,edges:n,combos:i}=t;this.batch(()=>{this.updateNodeData(e),this.updateComboData(i),this.updateEdgeData(n);}),this.computeZIndex(t,"update");}updateNodeData(t=[]){if(!t.length)return;let{model:e}=this;this.batch(()=>{let n=[];t.forEach(t=>{let i=(0,C.idOf)(t),r=ta(e.getNode(i));if(tt(r,t))return;let a=Q(r,t);this.pushChange({value:a,original:r,type:E.ChangeType.NodeUpdated}),e.mergeNodeData(i,a),n.push(a);}),this.updateNodeLikeHierarchy(n);}),this.computeZIndex({nodes:t},"update");}refreshData(){let{nodes:t,edges:e,combos:n}=this.getData();t.forEach(t=>{this.pushChange({value:t,original:t,type:E.ChangeType.NodeUpdated});}),e.forEach(t=>{this.pushChange({value:t,original:t,type:E.ChangeType.EdgeUpdated});}),n.forEach(t=>{this.pushChange({value:t,original:t,type:E.ChangeType.ComboUpdated});});}syncNodeLikeDatum(t){let{model:e}=this,n=(0,C.idOf)(t);if(!e.hasNode(n))return;let i=Q(ta(e.getNode(n)),t);e.mergeNodeData(n,i);}syncEdgeDatum(t){let{model:e}=this,n=(0,C.idOf)(t);if(!e.hasEdge(n))return;let i=Q(ta(e.getEdge(n)),t);e.mergeEdgeData(n,i);}updateEdgeData(t=[]){if(!t.length)return;let{model:e}=this;this.batch(()=>{t.forEach(t=>{let n=(0,C.idOf)(t),i=ta(e.getEdge(n));if(tt(i,t))return;t.source&&i.source!==t.source&&e.updateEdgeSource(n,t.source),t.target&&i.target!==t.target&&e.updateEdgeTarget(n,t.target);let r=Q(i,t);this.pushChange({value:r,original:i,type:E.ChangeType.EdgeUpdated}),e.mergeEdgeData(n,r);});}),this.computeZIndex({edges:t},"update");}updateComboData(t=[]){if(!t.length)return;let{model:e}=this;e.batch(()=>{let n=[];t.forEach(t=>{let i=(0,C.idOf)(t),r=ta(e.getNode(i));if(tt(r,t))return;let a=Q(r,t);this.pushChange({value:a,original:r,type:E.ChangeType.ComboUpdated}),e.mergeNodeData(i,a),n.push(a);}),this.updateNodeLikeHierarchy(n);}),this.computeZIndex({combos:t},"update");}setParent(t,e,n,i=!0){if(t===e)return;let r=this.getNodeLikeDatum(t),a=(0,C.parentIdOf)(r);a!==e&&n===E.COMBO_KEY&&(this.isCombo(t),this.syncNodeLikeDatum({id:t,combo:e})),this.model.setParent(t,e,n),i&&n===E.COMBO_KEY&&(0,Z.default)([a,e]).forEach(t=>{void 0!==t&&this.refreshComboData(t);});}refreshComboData(t){let e=this.getComboData([t])[0],n=this.getAncestorsData(t,E.COMBO_KEY);e&&this.pushChange({value:e,original:e,type:E.ChangeType.ComboUpdated}),n.forEach(t=>{this.pushChange({value:t,original:t,type:E.ChangeType.ComboUpdated});});}getElementPosition(t){let e=this.getElementDataById(t);return(0,ts.positionOf)(e);}translateNodeLikeBy(t,e){this.isCombo(t)?this.translateComboBy(t,e):this.translateNodeBy(t,e);}translateNodeLikeTo(t,e){this.isCombo(t)?this.translateComboTo(t,e):this.translateNodeTo(t,e);}translateNodeBy(t,e){let n=this.getElementPosition(t),i=(0,A.add)(n,[...e,0].slice(0,3));this.translateNodeTo(t,i);}translateNodeTo(t,e){let[n=0,i=0,r=0]=e;this.preventUpdateNodeLikeHierarchy(()=>{this.updateNodeData([{id:t,style:{x:n,y:i,z:r}}]);});}translateComboBy(t,e){let[n=0,i=0,r=0]=e;if([n,i,r].some(isNaN)||[n,i,r].every(t=>0===t))return;let a=this.getComboData([t])[0];if(!a)return;let s=new Set;(0,to.dfs)(a,t=>{let e=(0,C.idOf)(t);if(s.has(e))return;s.add(e);let[a,o,l]=(0,ts.positionOf)(t),d=Q(t,{style:{x:a+n,y:o+i,z:l+r}});this.pushChange({value:d,original:t,type:this.isCombo(e)?E.ChangeType.ComboUpdated:E.ChangeType.NodeUpdated}),this.model.mergeNodeData(e,d);},t=>this.getChildrenData((0,C.idOf)(t)),"BT");}translateComboTo(t,e){var n;if(e.some(isNaN))return;let[i=0,r=0,a=0]=e,s=null===(n=this.getComboData([t]))||void 0===n?void 0:n[0];if(!s)return;let[o,l,d]=(0,ts.positionOf)(s),u=i-o,c=r-l,h=a-d;(0,to.dfs)(s,t=>{let e=(0,C.idOf)(t),[n,i,r]=(0,ts.positionOf)(t),a=Q(t,{style:{x:n+u,y:i+c,z:r+h}});this.pushChange({value:a,original:t,type:this.isCombo(e)?E.ChangeType.ComboUpdated:E.ChangeType.NodeUpdated}),this.model.mergeNodeData(e,a);},t=>this.getChildrenData((0,C.idOf)(t)),"BT");}removeData(t){let{nodes:e,edges:n,combos:i}=t;this.batch(()=>{this.removeEdgeData(n),this.removeNodeData(e),this.removeComboData(i),this.latestRemovedComboIds=new Set(i);});}removeNodeData(t=[]){t.length&&this.batch(()=>{t.forEach(t=>{this.removeEdgeData(this.getRelatedEdgesData(t).map(C.idOf)),this.pushChange({value:this.getNodeData([t])[0],type:E.ChangeType.NodeRemoved}),this.removeNodeLikeHierarchy(t);}),this.model.removeNodes(t);});}removeEdgeData(t=[]){t.length&&(t.forEach(t=>this.pushChange({value:this.getEdgeData([t])[0],type:E.ChangeType.EdgeRemoved})),this.model.removeEdges(t));}removeComboData(t=[]){t.length&&this.batch(()=>{t.forEach(t=>{this.pushChange({value:this.getComboData([t])[0],type:E.ChangeType.ComboRemoved}),this.removeNodeLikeHierarchy(t),this.comboIds.delete(t);}),this.model.removeNodes(t);});}removeNodeLikeHierarchy(t){if(this.model.hasTreeStructure(E.COMBO_KEY)){let e=(0,C.parentIdOf)(this.getNodeLikeDatum(t));this.setParent(t,void 0,E.COMBO_KEY,!1),this.model.getChildren(t,E.COMBO_KEY).forEach(t=>{let n=ta(t),i=(0,C.idOf)(n);this.setParent((0,C.idOf)(n),e,E.COMBO_KEY,!1);let r=Q(n,{id:(0,C.idOf)(n),combo:e});this.pushChange({value:r,original:n,type:this.isCombo(i)?E.ChangeType.ComboUpdated:E.ChangeType.NodeUpdated}),this.model.mergeNodeData((0,C.idOf)(n),r);}),(0,U.default)(e)||this.refreshComboData(e);}}getElementType(t){if(this.model.hasNode(t))return this.isCombo(t)?"combo":"node";if(this.model.hasEdge(t))return"edge";throw Error((0,M.format)(`Unknown element type of id: ${t}`));}destroy(){let{model:t}=this,e=t.getAllNodes(),n=t.getAllEdges();t.removeEdges(n.map(t=>t.id)),t.removeNodes(e.map(t=>t.id)),this.context={};}}var td=n("a0f386cf"),tu=n("26cd548e"),tc=i._(tu),th=n("6ed5e4e8"),tp=n("e8f8b56e"),tf=n("4c1b528d"),tg=n("37005793"),ty=n("1165dca0"),tm=n("8911aa19"),tb=n("a0877623"),tv=this&&this.__awaiter||function(t,e,n,i){return new(n||(n=Promise))(function(r,a){function s(t){try{l(i.next(t));}catch(t){a(t);}}function o(t){try{l(i.throw(t));}catch(t){a(t);}}function l(t){var e;t.done?r(t.value):((e=t.value)instanceof n?e:new n(function(t){t(e);})).then(s,o);}l((i=i.apply(t,e||[])).next());});};class tE{constructor(t){this.elementMap={},this.shapeTypeMap={},this.paletteStyle={},this.defaultStyle={},this.stateStyle={},this.visibilityCache=new WeakMap,this.context=t;}init(){this.initContainer();}initContainer(){if(!this.container||this.container.destroyed){let{canvas:t}=this.context;this.container=t.appendChild(new td.Group({className:"elements"}));}}emit(t,e){e.silence||(0,P.emit)(this.context.graph,t);}forEachElementData(t){th.ELEMENT_TYPES.forEach(e=>{let n=this.context.model.getElementsDataByType(e);t(e,n);});}getElementType(t,e){var n;let{options:i,graph:r}=this.context,a=(null===(n=i[t])||void 0===n?void 0:n.type)||e.type;return a?"string"==typeof a?a:a.call(r,e):"edge"===t?"line":"circle";}getTheme(t){return(0,tm.themeOf)(this.context.options)[t]||{};}getThemeStyle(t){return this.getTheme(t).style||{};}getThemeStateStyle(t,e){let{state:n={}}=this.getTheme(t);return Object.assign({},...e.map(t=>n[t]||{}));}computePaletteStyle(){let{options:t}=this.context;this.paletteStyle={},this.forEachElementData((e,n)=>{var i,r;let a=Object.assign({},(0,tg.parsePalette)(null===(i=this.getTheme(e))||void 0===i?void 0:i.palette),(0,tg.parsePalette)(null===(r=t[e])||void 0===r?void 0:r.palette));(null==a?void 0:a.field)&&Object.assign(this.paletteStyle,(0,tg.assignColorByPalette)(n,a));});}getPaletteStyle(t,e){let n=this.paletteStyle[e];return n?"edge"===t?{stroke:n}:{fill:n}:{};}computeElementDefaultStyle(t,e){var n;let{options:i}=this.context,r=(null===(n=i[t])||void 0===n?void 0:n.style)||{};"transform"in r&&Array.isArray(r.transform)&&(r.transform=[...r.transform]),this.defaultStyle[(0,C.idOf)(e.datum)]=(0,ty.computeElementCallbackStyle)(r,e);}computeElementsDefaultStyle(t){let{graph:e}=this.context;this.forEachElementData((n,i)=>{let r=i.length;for(let a=0;a<r;a++){let r=i[a];(void 0===t||t.includes((0,C.idOf)(r)))&&this.computeElementDefaultStyle(n,{datum:r,graph:e});}});}getDefaultStyle(t){return this.defaultStyle[t]||{};}getElementState(t){try{let{model:e}=this.context;return e.getElementState(t);}catch(t){return[];}}getElementStateStyle(t,e,n){var i,r;let{options:a}=this.context,s=(null===(r=null===(i=a[t])||void 0===i?void 0:i.state)||void 0===r?void 0:r[e])||{};return(0,ty.computeElementCallbackStyle)(s,n);}computeElementStatesStyle(t,e,n){this.stateStyle[(0,C.idOf)(n.datum)]=Object.assign({},...e.map(e=>this.getElementStateStyle(t,e,n)));}computeElementsStatesStyle(t){let{graph:e}=this.context;this.forEachElementData((n,i)=>{let r=i.length;for(let a=0;a<r;a++){let r=i[a];if(void 0===t||t.includes((0,C.idOf)(r))){let t=this.getElementState((0,C.idOf)(r));this.computeElementStatesStyle(n,t,{datum:r,graph:e});}}});}getStateStyle(t){return this.stateStyle[t]||{};}computeStyle(t,e){t&&["translate","zIndex"].includes(t)||(this.computePaletteStyle(),this.computeElementsDefaultStyle(e),this.computeElementsStatesStyle(e));}getElement(t){return this.elementMap[t];}getNodes(){return this.context.model.getNodeData().map(({id:t})=>this.elementMap[t]);}getEdges(){return this.context.model.getEdgeData().map(t=>this.elementMap[(0,C.idOf)(t)]);}getCombos(){return this.context.model.getComboData().map(({id:t})=>this.elementMap[t]);}getElementComputedStyle(t,e){let n=(0,C.idOf)(e),i=this.getThemeStyle(t),r=this.getPaletteStyle(t,n),a=e.style||{},s=Object.assign({},i,r,a,this.getDefaultStyle(n),this.getThemeStateStyle(t,this.getElementState(n)),this.getStateStyle(n));if("combo"===t){let t=this.context.model.getChildrenData(n),e=s.collapsed?[]:t.map(C.idOf).filter(t=>this.getElement(t));Object.assign(s,{childrenNode:e,childrenData:t});}return s;}getDrawData(t){this.init();let e=this.computeChangesAndDrawData(t);if(!e)return null;let{type:n="draw",stage:i=n}=t;return this.markDestroyElement(e.drawData),this.computeStyle(i),{type:n,stage:i,data:e};}draw(t={animation:!0}){let e=this.getDrawData(t);if(!e)return;let{data:{drawData:{add:n,update:i,remove:r}}}=e;return this.destroyElements(r,t),this.createElements(n,t),this.updateElements(i,t),this.setAnimationTask(t,e);}preLayoutDraw(){return tv(this,arguments,void 0,function*(t={animation:!0}){var e,n;let i=this.getDrawData(t);if(!i)return;let{data:{drawData:r}}=i;yield null===(n=null===(e=this.context.layout)||void 0===e?void 0:e.preLayout)||void 0===n?void 0:n.call(e,r);let{add:a,update:s,remove:o}=r;return this.destroyElements(o,t),this.createElements(a,t),this.updateElements(s,t),this.setAnimationTask(t,i);});}setAnimationTask(t,e){let{animation:n,silence:i}=t,{data:{dataChanges:r,drawData:a},stage:s,type:o}=e;return this.context.animation.animate(n,i?{}:{before:()=>this.emit(new P.GraphLifeCycleEvent(E.GraphEvent.BEFORE_DRAW,{dataChanges:r,animation:n,stage:s,render:"render"===o}),t),beforeAnimate:e=>this.emit(new P.AnimateEvent(E.GraphEvent.BEFORE_ANIMATE,E.AnimationType.DRAW,e,a),t),afterAnimate:e=>this.emit(new P.AnimateEvent(E.GraphEvent.AFTER_ANIMATE,E.AnimationType.DRAW,e,a),t),after:()=>this.emit(new P.GraphLifeCycleEvent(E.GraphEvent.AFTER_DRAW,{dataChanges:r,animation:n,stage:s,render:"render"===o,firstRender:!1===this.context.graph.rendered}),t)});}computeChangesAndDrawData(t){let{model:e}=this.context,n=e.getChanges(),i=(0,tf.reduceDataChanges)(n);if(0===i.length)return null;let{NodeAdded:r=[],NodeUpdated:a=[],NodeRemoved:s=[],EdgeAdded:o=[],EdgeUpdated:l=[],EdgeRemoved:d=[],ComboAdded:u=[],ComboUpdated:c=[],ComboRemoved:h=[]}=(0,tc.default)(i,t=>t.type),p=t=>new Map(t.map(t=>{let e=t.value;return[(0,C.idOf)(e),e];})),f={add:{nodes:p(r),edges:p(o),combos:p(u)},update:{nodes:p(a),edges:p(l),combos:p(c)},remove:{nodes:p(s),edges:p(d),combos:p(h)}},g=this.transformData(f,t);return e.clearChanges(),{dataChanges:n,drawData:g};}transformData(t,e){return Object.values(this.context.transform.getTransformInstance()).reduce((t,n)=>n.beforeDraw(t,e),t);}createElement(t,e,n){var i;let r=(0,C.idOf)(e);if(this.getElement(r))return;let a=this.getElementType(t,e),s=this.getElementComputedStyle(t,e),o=(0,tp.getExtension)(t,a);if(!o)return M.print.warn(`The element ${a} of ${t} is not registered.`);this.emit(new P.ElementLifeCycleEvent(E.GraphEvent.BEFORE_ELEMENT_CREATE,t,e),n);let l=this.container.appendChild(new o({id:r,context:this.context,style:s}));this.shapeTypeMap[r]=a,this.elementMap[r]=l;let{stage:d="enter"}=n;null===(i=this.context.animation)||void 0===i||i.add({element:l,elementType:t,stage:d,originalStyle:Object.assign({},l.attributes),updatedStyle:s},{after:()=>{var i;this.emit(new P.ElementLifeCycleEvent(E.GraphEvent.AFTER_ELEMENT_CREATE,t,e),n),null===(i=l.onCreate)||void 0===i||i.call(l);}});}createElements(t,e){let{nodes:n,edges:i,combos:r}=t;[["node",n],["combo",r],["edge",i]].forEach(([t,n])=>{n.forEach(n=>this.createElement(t,n,e));});}getUpdateStageStyle(t,e,n){let{stage:i="update"}=n;if("translate"===i){if("node"!==t&&"combo"!==t)return{};{let{style:{x:t=0,y:n=0,z:i=0}={}}=e;return{x:t,y:n,z:i};}}return this.getElementComputedStyle(t,e);}updateElement(t,e,n){var i;let r=(0,C.idOf)(e),{stage:a="update"}=n,s=this.getElement(r);if(!s)return()=>null;this.emit(new P.ElementLifeCycleEvent(E.GraphEvent.BEFORE_ELEMENT_UPDATE,t,e),n);let o=this.getElementType(t,e),l=this.getUpdateStageStyle(t,e,n);this.shapeTypeMap[r]!==o&&(s.destroy(),delete this.shapeTypeMap[r],delete this.elementMap[r],this.createElement(t,e,{animation:!1,silence:!0}));let d="visibility"!==a?a:"hidden"===l.visibility?"hide":"show";"hide"===d&&delete l.visibility,null===(i=this.context.animation)||void 0===i||i.add({element:s,elementType:t,stage:d,originalStyle:Object.assign({},s.attributes),updatedStyle:l},{before:()=>{let t=this.elementMap[r];"collapse"!==a&&(0,W.updateStyle)(t,l),"visibility"===a&&(j("opacity") in((0,N.default)(t,k)||{})||function(t,e){let n=Array.isArray(e)?e:[e];(0,N.default)(t,k)||(0,I.default)(t,k,{}),n.forEach(e=>{(0,I.default)((0,N.default)(t,k),j(e),t.attributes[e]);});}(t,"opacity"),this.visibilityCache.set(t,"show"===d?"visible":"hidden"),"show"===d&&(0,tb.setVisibility)(t,"visible"));},after:()=>{var i;let s=this.elementMap[r];"collapse"===a&&(0,W.updateStyle)(s,l),"hide"===d&&(0,tb.setVisibility)(s,this.visibilityCache.get(s)),this.emit(new P.ElementLifeCycleEvent(E.GraphEvent.AFTER_ELEMENT_UPDATE,t,e),n),null===(i=s.onUpdate)||void 0===i||i.call(s);}});}updateElements(t,e){let{nodes:n,edges:i,combos:r}=t;[["node",n],["combo",r],["edge",i]].forEach(([t,n])=>{n.forEach(n=>this.updateElement(t,n,e));});}markDestroyElement(t){Object.values(t.remove).forEach(t=>{t.forEach(t=>{let e=(0,C.idOf)(t),n=this.getElement(e);n&&(0,W.markToBeDestroyed)(n);});});}destroyElement(t,e,n){var i;let{stage:r="exit"}=n,a=(0,C.idOf)(e),s=this.elementMap[a];if(!s)return()=>null;this.emit(new P.ElementLifeCycleEvent(E.GraphEvent.BEFORE_ELEMENT_DESTROY,t,e),n),null===(i=this.context.animation)||void 0===i||i.add({element:s,elementType:t,stage:r,originalStyle:Object.assign({},s.attributes),updatedStyle:{}},{after:()=>{var i;this.clearElement(a),s.destroy(),null===(i=s.onDestroy)||void 0===i||i.call(s),this.emit(new P.ElementLifeCycleEvent(E.GraphEvent.AFTER_ELEMENT_DESTROY,t,e),n);}});}destroyElements(t,e){let{nodes:n,edges:i,combos:r}=t;[["combo",r],["edge",i],["node",n]].forEach(([t,n])=>{n.forEach(n=>this.destroyElement(t,n,e));});}clearElement(t){delete this.paletteStyle[t],delete this.defaultStyle[t],delete this.stateStyle[t],delete this.elementMap[t],delete this.shapeTypeMap[t];}alignLayoutResultToElement(t,e){var n,i;let r=null===(n=t.nodes)||void 0===n?void 0:n.find(t=>(0,C.idOf)(t)===e);if(r){let n=(0,ts.positionOf)(this.context.model.getNodeLikeDatum(e)),a=(0,ts.positionOf)(r),s=(0,A.subtract)(n,a);null===(i=t.nodes)||void 0===i||i.forEach(t=>{var e,n,i;(null===(e=t.style)||void 0===e?void 0:e.x)&&(t.style.x+=s[0]),(null===(n=t.style)||void 0===n?void 0:n.y)&&(t.style.y+=s[1]),(null===(i=t.style)||void 0===i?void 0:i.z)&&(t.style.z+=s[2]||0);});}}collapseNode(t,e){return tv(this,void 0,void 0,function*(){var n;let{animation:i,align:r}=e,{model:a,layout:s}=this.context,o=this.computeChangesAndDrawData({stage:"collapse",animation:i});if(!o)return;this.markDestroyElement(o.drawData);let l=yield s.simulate();r&&this.alignLayoutResultToElement(l,t),a.updateData(l);let d=this.computeChangesAndDrawData({stage:"collapse",animation:i});if(!d)return;let{drawData:u}=d,{add:c,remove:h,update:p}=u;this.markDestroyElement(u);let f={animation:i,stage:"collapse",data:u};this.destroyElements(h,f),this.createElements(c,f),this.updateElements(p,f),yield null===(n=this.context.animation.animate(i,{beforeAnimate:t=>this.emit(new P.AnimateEvent(E.GraphEvent.BEFORE_ANIMATE,E.AnimationType.COLLAPSE,t,u),f),afterAnimate:t=>this.emit(new P.AnimateEvent(E.GraphEvent.AFTER_ANIMATE,E.AnimationType.COLLAPSE,t,u),f)},{collapse:{target:t,descendants:Array.from(h.nodes).map(([,t])=>(0,C.idOf)(t)),position:(0,ts.positionOf)(p.nodes.get(t))}}))||void 0===n?void 0:n.finished;});}expandNode(t,e){return tv(this,void 0,void 0,function*(){var n;let{model:i,layout:r}=this.context,{animation:a,align:s}=e,o=(0,ts.positionOf)(i.getNodeData([t])[0]),l=this.computeChangesAndDrawData({stage:"expand",animation:a});if(!l)return;let{drawData:{add:d}}=l;this.createElements(d,{animation:!1,stage:"expand",target:t}),this.context.animation.clear();let u=yield r.simulate();s&&this.alignLayoutResultToElement(u,t),i.updateData(u),this.computeStyle("expand");let c=this.computeChangesAndDrawData({stage:"collapse",animation:a});if(!c)return;let{drawData:h}=c,{update:p}=h,f={animation:a,stage:"expand",data:h};d.edges.forEach(t=>p.edges.set((0,C.idOf)(t),t)),d.nodes.forEach(t=>p.nodes.set((0,C.idOf)(t),t)),this.updateElements(p,f),yield null===(n=this.context.animation.animate(a,{beforeAnimate:t=>this.emit(new P.AnimateEvent(E.GraphEvent.BEFORE_ANIMATE,E.AnimationType.EXPAND,t,h),f),afterAnimate:t=>this.emit(new P.AnimateEvent(E.GraphEvent.AFTER_ANIMATE,E.AnimationType.EXPAND,t,h),f)},{expand:{target:t,descendants:Array.from(d.nodes).map(([,t])=>(0,C.idOf)(t)),position:o}}))||void 0===n?void 0:n.finished;});}collapseCombo(t,e){return tv(this,void 0,void 0,function*(){var n;let{model:i,element:r}=this.context;if(i.getAncestorsData(t,E.COMBO_KEY).some(t=>(0,x.isCollapsed)(t)))return;let a=r.getElement(t),s=a.getComboPosition(Object.assign(Object.assign({},a.attributes),{collapsed:!0})),o=this.computeChangesAndDrawData({stage:"collapse",animation:e});if(!o)return;let{dataChanges:l,drawData:d}=o;this.markDestroyElement(d);let{update:u,remove:c}=d,h={animation:e,stage:"collapse",data:d};this.destroyElements(c,h),this.updateElements(u,h);let p=t=>Array.from(t).map(([,t])=>(0,C.idOf)(t));yield null===(n=this.context.animation.animate(e,{before:()=>this.emit(new P.GraphLifeCycleEvent(E.GraphEvent.BEFORE_DRAW,{dataChanges:l,animation:e}),h),beforeAnimate:t=>this.emit(new P.AnimateEvent(E.GraphEvent.BEFORE_ANIMATE,E.AnimationType.COLLAPSE,t,d),h),afterAnimate:t=>this.emit(new P.AnimateEvent(E.GraphEvent.AFTER_ANIMATE,E.AnimationType.COLLAPSE,t,d),h),after:()=>this.emit(new P.GraphLifeCycleEvent(E.GraphEvent.AFTER_DRAW,{dataChanges:l,animation:e}),h)},{collapse:{target:t,descendants:[...p(c.nodes),...p(c.combos)],position:s}}))||void 0===n?void 0:n.finished;});}expandCombo(t,e){return tv(this,void 0,void 0,function*(){var n;let{model:i}=this.context,r=(0,ts.positionOf)(i.getComboData([t])[0]);this.computeStyle("expand");let a=this.computeChangesAndDrawData({stage:"expand",animation:e});if(!a)return;let{dataChanges:s,drawData:o}=a,{add:l,update:d}=o,u={animation:e,stage:"expand",data:o,target:t};this.createElements(l,u),this.updateElements(d,u);let c=t=>Array.from(t).map(([,t])=>(0,C.idOf)(t));yield null===(n=this.context.animation.animate(e,{before:()=>this.emit(new P.GraphLifeCycleEvent(E.GraphEvent.BEFORE_DRAW,{dataChanges:s,animation:e}),u),beforeAnimate:t=>this.emit(new P.AnimateEvent(E.GraphEvent.BEFORE_ANIMATE,E.AnimationType.EXPAND,t,o),u),afterAnimate:t=>this.emit(new P.AnimateEvent(E.GraphEvent.AFTER_ANIMATE,E.AnimationType.EXPAND,t,o),u),after:()=>this.emit(new P.GraphLifeCycleEvent(E.GraphEvent.AFTER_DRAW,{dataChanges:s,animation:e}),u)},{expand:{target:t,descendants:[...c(l.nodes),...c(l.combos)],position:r}}))||void 0===n?void 0:n.finished;});}clear(){this.container.destroy(),this.initContainer(),this.elementMap={},this.shapeTypeMap={},this.defaultStyle={},this.stateStyle={},this.paletteStyle={};}destroy(){this.clear(),this.container.destroy(),this.context={};}}var tx=n("9a26274f"),tO=n("b10b6bef"),tS=n("bf8f013f"),t_=i._(tS),tP=n("89ac127e"),tC=this&&this.__awaiter||function(t,e,n,i){return new(n||(n=Promise))(function(r,a){function s(t){try{l(i.next(t));}catch(t){a(t);}}function o(t){try{l(i.throw(t));}catch(t){a(t);}}function l(t){var e;t.done?r(t.value):((e=t.value)instanceof n?e:new n(function(t){t(e);})).then(s,o);}l((i=i.apply(t,e||[])).next());});},tw=this&&this.__rest||function(t,e){var n={};for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&0>e.indexOf(i)&&(n[i]=t[i]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols)for(var r=0,i=Object.getOwnPropertySymbols(t);r<i.length;r++)0>e.indexOf(i[r])&&Object.prototype.propertyIsEnumerable.call(t,i[r])&&(n[i[r]]=t[i[r]]);return n;};class tM{get presetOptions(){return{animation:!!(0,D.getAnimationOptions)(this.context.options,!0)};}get options(){let{options:t}=this.context;return t.layout;}constructor(t){this.instances=[],this.context=t;}getLayoutInstance(){return this.instances;}preLayout(t){return tC(this,void 0,void 0,function*(){var e,n,i,r;let{graph:a,model:s}=this.context,{add:o}=t;(0,P.emit)(a,new P.GraphLifeCycleEvent(E.GraphEvent.BEFORE_LAYOUT,{type:"pre"}));let l=yield null===(e=this.context.layout)||void 0===e?void 0:e.simulate();null===(n=null==l?void 0:l.nodes)||void 0===n||n.forEach(t=>{let e=(0,C.idOf)(t),n=o.nodes.get(e);s.syncNodeLikeDatum(t),n&&Object.assign(n.style,t.style);}),null===(i=null==l?void 0:l.edges)||void 0===i||i.forEach(t=>{let e=(0,C.idOf)(t),n=o.edges.get(e);s.syncEdgeDatum(t),n&&Object.assign(n.style,t.style);}),null===(r=null==l?void 0:l.combos)||void 0===r||r.forEach(t=>{let e=(0,C.idOf)(t),n=o.combos.get(e);s.syncNodeLikeDatum(t),n&&Object.assign(n.style,t.style);}),(0,P.emit)(a,new P.GraphLifeCycleEvent(E.GraphEvent.AFTER_LAYOUT,{type:"pre"})),this.transformDataAfterLayout("pre",t);});}postLayout(){return tC(this,arguments,void 0,function*(t=this.options){if(!t)return;let e=Array.isArray(t)?t:[t],{graph:n}=this.context;(0,P.emit)(n,new P.GraphLifeCycleEvent(E.GraphEvent.BEFORE_LAYOUT,{type:"post"}));for(let t=0;t<e.length;t++){let i=e[t],r=this.getLayoutData(i),a=Object.assign(Object.assign({},this.presetOptions),i);(0,P.emit)(n,new P.GraphLifeCycleEvent(E.GraphEvent.BEFORE_STAGE_LAYOUT,{options:a,index:t}));let s=yield this.stepLayout(r,a,t);(0,P.emit)(n,new P.GraphLifeCycleEvent(E.GraphEvent.AFTER_STAGE_LAYOUT,{options:a,index:t})),i.animation||this.updateElementPosition(s,!1);}(0,P.emit)(n,new P.GraphLifeCycleEvent(E.GraphEvent.AFTER_LAYOUT,{type:"post"})),this.transformDataAfterLayout("post");});}transformDataAfterLayout(t,e){Object.values(this.context.transform.getTransformInstance()).forEach(n=>n.afterLayout(t,e));}simulate(){return tC(this,void 0,void 0,function*(){if(!this.options)return{};let t=Array.isArray(this.options)?this.options:[this.options],e={};for(let n=0;n<t.length;n++){let i=t[n],r=this.getLayoutData(i);e=yield this.stepLayout(r,Object.assign(Object.assign(Object.assign({},this.presetOptions),i),{animation:!1}),n);}return e;});}stepLayout(t,e,n){return tC(this,void 0,void 0,function*(){return(0,w.isTreeLayout)(e)?yield this.treeLayout(t,e,n):yield this.graphLayout(t,e,n);});}graphLayout(t,e,n){return tC(this,void 0,void 0,function*(){let{animation:i,enableWorker:r,iterations:a=300}=e,s=this.initGraphLayout(e);if(!s)return{};if(this.instances[n]=s,this.instance=s,r)return this.supervisor=new tx.Supervisor(s.graphData2LayoutModel(t),s.instance,{iterations:a}),(0,w.layoutMapping2GraphData)((yield this.supervisor.execute()));if((0,tO.isLayoutWithIterations)(s))return i?yield s.execute(t,{onTick:t=>{this.updateElementPosition(t,!1);}}):(s.execute(t),s.stop(),s.tick(a));let o=yield s.execute(t);if(i){let t=this.updateElementPosition(o,i);yield null==t?void 0:t.finished;}return o;});}treeLayout(t,e,n){return tC(this,void 0,void 0,function*(){let{type:n,animation:i}=e,r=(0,tp.getExtension)("layout",n);if(!r)return{};let{nodes:a=[],edges:s=[]}=t,o=new Y.Graph({nodes:a.map(t=>({id:(0,C.idOf)(t),data:t.data||{}})),edges:s.map(t=>({id:(0,C.idOf)(t),source:t.source,target:t.target,data:t.data||{}}))});!function(t){if(!t.hasTreeStructure(E.TREE_KEY))for(let e of(t.attachTreeStructure(E.TREE_KEY),t.getAllEdges())){let{source:n,target:i}=e;t.setParent(i,n,E.TREE_KEY);}}(o);let l={nodes:[],edges:[]},d={nodes:[],edges:[]};o.getRoots(E.TREE_KEY).forEach(t=>{(0,to.dfs)(t,t=>{t.children=o.getSuccessors(t.id);},t=>o.getSuccessors(t.id),"TB");let n=r(t,e),{x:i,y:a,z:s=0}=n;(0,to.dfs)(n,t=>{let{id:e,x:n,y:r,z:o=0}=t;l.nodes.push({id:e,style:{x:i,y:a,z:s}}),d.nodes.push({id:e,style:{x:n,y:r,z:o}});},t=>t.children,"TB");});let u=this.inferTreeLayoutOffset(d);if(tA(d,u),i){tA(l,u),this.updateElementPosition(l,!1);let t=this.updateElementPosition(d,i);yield null==t?void 0:t.finished;}return d;});}inferTreeLayoutOffset(t){var e;let[n,i]=[1/0,-1/0],[r,a]=[1/0,-1/0];null===(e=t.nodes)||void 0===e||e.forEach(t=>{let{x:e=0,y:s=0}=t.style||{};n=Math.min(n,e),i=Math.max(i,e),r=Math.min(r,s),a=Math.max(a,s);});let{canvas:s}=this.context,o=s.getSize(),[l,d]=s.getCanvasByViewport([0,0]),[u,c]=s.getCanvasByViewport(o);return n>=l&&i<=u&&r>=d&&a<=c?[0,0]:[(l+u)/2-(n+i)/2,(d+c)/2-(r+a)/2];}stopLayout(){this.instance&&(0,tO.isLayoutWithIterations)(this.instance)&&(this.instance.stop(),this.instance=void 0),this.supervisor&&(this.supervisor.stop(),this.supervisor=void 0),this.animationResult&&(this.animationResult.finish(),this.animationResult=void 0);}getLayoutData(t){let{nodeFilter:e=()=>!0,preLayout:n=!1,isLayoutInvisibleNodes:i=!1}=t,{nodes:r,edges:a,combos:s}=this.context.model.getData(),{element:o,model:l}=this.context,d=t=>o.getElement(t),u=n?t=>{var n;return!(!i&&((null===(n=t.style)||void 0===n?void 0:n.visibility)==="hidden"||l.getAncestorsData(t.id,E.TREE_KEY).some(x.isCollapsed)||l.getAncestorsData(t.id,E.COMBO_KEY).some(x.isCollapsed)))&&e(t);}:t=>{let n=d((0,C.idOf)(t));return!(!n||(0,W.isToBeDestroyed)(n))&&e(t);},c=r.filter(u),h=new Map(c.map(t=>[(0,C.idOf)(t),t]));return s.forEach(t=>h.set((0,C.idOf)(t),t)),{nodes:c,edges:a.filter(({source:t,target:e})=>h.has(t)&&h.has(e)),combos:s};}initGraphLayout(t){var e;let{element:n,viewport:i}=this.context,{type:r,enableWorker:a,animation:s,iterations:o}=t,l=tw(t,["type","enableWorker","animation","iterations"]),[d,u]=i.getCanvasSize(),c=null!==(e=null==t?void 0:t.nodeSize)&&void 0!==e?e:t=>{let e=null==n?void 0:n.getElement(t.id);return e?e.attributes.size:null==n?void 0:n.getElementComputedStyle("node",t).size;},h=(0,tp.getExtension)("layout",r);if(!h)return M.print.warn(`The layout of ${r} is not registered.`);let p=new(Object.getPrototypeOf(h.prototype)===tP.BaseLayout.prototype?h:(0,w.layoutAdapter)(h,this.context))(this.context),f={nodeSize:c,width:d,height:u,center:[d/2,u/2]};switch(p.id){case"d3-force":case"d3-force-3d":Object.assign(f,{center:{x:d/2,y:u/2,z:0}});}return(0,t_.default)(p.options,f,l),p;}updateElementPosition(t,e){let{model:n,element:i}=this.context;return i?(n.updateData(t),i.draw({animation:e,silence:!0})):null;}destroy(){var t;this.stopLayout(),this.context={},null===(t=this.supervisor)||void 0===t||t.kill(),this.supervisor=void 0,this.instance=void 0,this.instances=[],this.animationResult=void 0;}}let tA=(t,e)=>{var n;let[i,r]=e;null===(n=t.nodes)||void 0===n||n.forEach(t=>{if(t.style){let{x:e=0,y:n=0}=t.style;t.style.x=e+i,t.style.y=n+r;}else t.style={x:i,y:r};});};function tT(t){return!t.layout||Array.isArray(t.layout)||"preLayout"in t.layout||["antv-dagre","combo-combined","compact-box","circular","concentric","dagre","fishbone","grid","indented","mds","radial","random","snake","dendrogram","mindmap"].includes(t.layout.type)&&(t.layout.preLayout=!0),t;}class tB extends V.ExtensionController{constructor(t){super(t),this.category="plugin",this.setPlugins(this.context.options.plugins||[]);}setPlugins(t){this.setExtensions(t);}getPluginInstance(t){let e=this.extensionMap[t];if(e)return e;M.print.warn(`Cannot find the plugin ${t}, will try to find it by type.`);let n=this.extensions.find(e=>e.type===t);if(n)return this.extensionMap[n.key];}}let tD=["update-related-edges","collapse-expand-node","collapse-expand-combo","get-edge-actual-ends","arrange-draw-order"];class tL extends V.ExtensionController{constructor(t){super(t),this.category="transform",this.setTransforms(this.context.options.transforms||[]);}getTransforms(){}setTransforms(t){this.setExtensions([...tD.slice(0,tD.length-1),...t,tD[tD.length-1]]);}getTransformInstance(t){return t?this.extensionMap[t]:this.extensionMap;}}var tN=n("b7e3e58a"),tR=i._(tN),tI=n("0c915bb9"),tk=i._(tI),tj=n("bf55e093"),tz=n("50905a3a"),tF=this&&this.__awaiter||function(t,e,n,i){return new(n||(n=Promise))(function(r,a){function s(t){try{l(i.next(t));}catch(t){a(t);}}function o(t){try{l(i.throw(t));}catch(t){a(t);}}function l(t){var e;t.done?r(t.value):((e=t.value)instanceof n?e:new n(function(t){t(e);})).then(s,o);}l((i=i.apply(t,e||[])).next());});};class tG{get padding(){return(0,tz.parsePadding)(this.context.options.padding);}get paddingOffset(){let[t,e,n,i]=this.padding,[r,a,s]=[(i-e)/2,(t-n)/2,0];return[r,a,s];}constructor(t){this.landmarkCounter=0,this.context=t;let[e,n]=this.paddingOffset,{zoom:i,rotation:r,x:a=e,y:s=n}=t.options;this.transform({mode:"absolute",scale:i,translate:[a,s],rotate:r},!1);}get camera(){let{canvas:t}=this.context;return new Proxy(t.getCamera(),{get:(e,n)=>{let i=Object.entries(t.getLayers()).filter(([t])=>!["main"].includes(t)).map(([,t])=>t.getCamera()),r=e[n];if("function"==typeof r)return(...t)=>{let a=r.apply(e,t);return i.forEach(e=>{e[n].apply(e,t);}),a;};}});}createLandmark(t){return this.camera.createLandmark(`landmark-${this.landmarkCounter++}`,t);}getAnimation(t){let e=(0,D.getAnimationOptions)(this.context.options,t);return!!e&&(0,tk.default)(Object.assign({},e),["easing","duration"]);}getCanvasSize(){let{canvas:t}=this.context,{width:e=0,height:n=0}=t.getConfig();return[e,n];}getCanvasCenter(){let{canvas:t}=this.context,{width:e=0,height:n=0}=t.getConfig();return[e/2,n/2,0];}getViewportCenter(){let[t,e]=this.camera.getPosition();return[t,e,0];}getGraphCenter(){return this.context.graph.getViewportByCanvas(this.getCanvasCenter());}getZoom(){return this.camera.getZoom();}getRotation(){return this.camera.getRoll();}getTranslateOptions(t){let{camera:e}=this,{mode:n,translate:i=[]}=t,r=this.getZoom(),a=e.getPosition(),s=e.getFocalPoint(),[o,l]=this.getCanvasCenter(),[d=0,u=0,c=0]=i,h=(0,A.divide)([-d,-u,-c],r);return"relative"===n?{position:(0,A.add)(a,h),focalPoint:(0,A.add)(s,h)}:{position:(0,A.add)([o,l,a[2]],h),focalPoint:(0,A.add)([o,l,s[2]],h)};}getRotateOptions(t){let{mode:e,rotate:n=0}=t;return{roll:"relative"===e?this.camera.getRoll()+n:n};}getZoomOptions(t){let{zoomRange:e}=this.context.options,n=this.camera.getZoom(),{mode:i,scale:r=1}=t;return(0,tR.default)("relative"===i?n*r:r,...e);}transform(t,e){return tF(this,void 0,void 0,function*(){let{graph:n}=this.context,{translate:i,rotate:r,scale:a,origin:s}=t;this.cancelAnimation();let o=this.getAnimation(e);if((0,P.emit)(n,new P.ViewportEvent(E.GraphEvent.BEFORE_TRANSFORM,t)),!r&&a&&!i&&s&&!o){this.camera.setZoomByViewportPoint(this.getZoomOptions(t),s),(0,P.emit)(n,new P.ViewportEvent(E.GraphEvent.AFTER_TRANSFORM,t));return;}let l={};if(i&&Object.assign(l,this.getTranslateOptions(t)),(0,p.default)(r)&&Object.assign(l,this.getRotateOptions(t)),(0,p.default)(a)&&Object.assign(l,{zoom:this.getZoomOptions(t)}),o)return(0,P.emit)(n,new P.AnimateEvent(E.GraphEvent.BEFORE_ANIMATE,E.AnimationType.TRANSFORM,null,t)),new Promise(e=>{this.transformResolver=e,this.camera.gotoLandmark(this.createLandmark(l),Object.assign(Object.assign({},o),{onfinish:()=>{(0,P.emit)(n,new P.AnimateEvent(E.GraphEvent.AFTER_ANIMATE,E.AnimationType.TRANSFORM,null,t)),(0,P.emit)(n,new P.ViewportEvent(E.GraphEvent.AFTER_TRANSFORM,t)),this.transformResolver=void 0,e();}}));});this.camera.gotoLandmark(this.createLandmark(l),{duration:0}),(0,P.emit)(n,new P.ViewportEvent(E.GraphEvent.AFTER_TRANSFORM,t));});}fitView(t,e){return tF(this,void 0,void 0,function*(){let[n,i,r,a]=this.padding,{when:s="always",direction:o="both"}=t||{},[l,d]=this.context.canvas.getSize(),u=l-a-i,c=d-n-r,h=this.context.canvas.getBounds(),p=this.getBBoxInViewport(h),[f,g]=(0,tj.getBBoxSize)(p);if("overflow"===s&&!("x"===o&&f>=u||"y"===o&&g>=c||"both"===o&&f>=u&&g>=c))return yield this.fitCenter({animation:e});let y=u/f,m=c/g,b="x"===o?y:"y"===o?m:Math.min(y,m),v=this.getAnimation(e);yield this.transform({mode:"relative",scale:b,translate:(0,A.add)((0,A.subtract)(this.getCanvasCenter(),this.getBBoxInViewport(h).center),(0,A.divide)(this.paddingOffset,b))},v);});}fitCenter(t){return tF(this,void 0,void 0,function*(){let e=this.context.canvas.getBounds();yield this.focus(e,t);});}focusElements(t){return tF(this,arguments,void 0,function*(t,e={}){let{element:n}=this.context;if(!n)return;let i=t=>e.shapes?t.getShape(e.shapes).getRenderBounds():t.getRenderBounds(),r=(0,tj.getCombinedBBox)(t.map(t=>i(n.getElement(t))));yield this.focus(r,e);});}focus(t,e){return tF(this,void 0,void 0,function*(){let n=this.context.graph.getViewportByCanvas(t.center),i=e.position||this.getCanvasCenter(),r=(0,A.subtract)(i,n);yield this.transform({mode:"relative",translate:(0,A.add)(r,this.paddingOffset)},e.animation);});}getBBoxInViewport(t){let{min:e,max:n}=t,{graph:i}=this.context,[r,a]=i.getViewportByCanvas(e),[s,o]=i.getViewportByCanvas(n),l=new td.AABB;return l.setMinMax([r,a,0],[s,o,0]),l;}isInViewport(t,e=!1,n=0){let{graph:i}=this.context,r=this.getCanvasSize(),[a,s]=i.getCanvasByViewport([0,0]),[o,l]=i.getCanvasByViewport(r),d=new td.AABB;return d.setMinMax([a,s,0],[o,l,0]),n&&(d=(0,tj.getExpandedBBox)(d,n)),(0,tn.isPoint)(t)?(0,tj.isPointInBBox)(t,d):e?(0,tj.isBBoxInside)(t,d):d.intersects(t);}cancelAnimation(){var t,e;(null===(t=this.camera.landmarks)||void 0===t?void 0:t.length)&&this.camera.cancelLandmarkAnimation(),null===(e=this.transformResolver)||void 0===e||e.call(this);}}var tV=this&&this.__awaiter||function(t,e,n,i){return new(n||(n=Promise))(function(r,a){function s(t){try{l(i.next(t));}catch(t){a(t);}}function o(t){try{l(i.throw(t));}catch(t){a(t);}}function l(t){var e;t.done?r(t.value):((e=t.value)instanceof n?e:new n(function(t){t(e);})).then(s,o);}l((i=i.apply(t,e||[])).next());});};class tW extends a.default{constructor(t){var e;super(),this.options={},this.rendered=!1,this.destroyed=!1,this.context={model:new tl},this.isCollapsingExpanding=!1,this.onResize=(0,o.default)(()=>{this.resize();},300),this._setOptions(Object.assign({},tW.defaultOptions,t),!0),this.context.graph=this,this.options.autoResize&&(null===(e=globalThis.addEventListener)||void 0===e||e.call(globalThis,"resize",this.onResize));}getOptions(){return this.options;}setOptions(t){this._setOptions(t,!1);}_setOptions(t,e){if(this.updateCanvas(t),Object.assign(this.options,[tT].reduce((t,e)=>e(t),t)),e){let{data:e}=t;e&&this.addData(e);return;}let{behaviors:n,combo:i,data:r,edge:a,layout:s,node:o,plugins:l,theme:d,transforms:u}=t;n&&this.setBehaviors(n),r&&this.setData(r),o&&this.setNode(o),a&&this.setEdge(a),i&&this.setCombo(i),s&&this.setLayout(s),d&&this.setTheme(d),l&&this.setPlugins(l),u&&this.setTransforms(u);}getSize(){return this.context.canvas?this.context.canvas.getSize():[this.options.width||0,this.options.height||0];}setSize(t,e){t&&(this.options.width=t),e&&(this.options.height=e),this.resize(t,e);}setZoomRange(t){this.options.zoomRange=t;}getZoomRange(){return this.options.zoomRange;}setNode(t){this.options.node=t,this.context.model.refreshData();}setEdge(t){this.options.edge=t,this.context.model.refreshData();}setCombo(t){this.options.combo=t,this.context.model.refreshData();}getTheme(){return this.options.theme;}setTheme(t){this.options.theme=(0,c.default)(t)?t(this.getTheme()):t;}setLayout(t){this.options.layout=(0,c.default)(t)?t(this.getLayout()):t;}getLayout(){return this.options.layout;}setBehaviors(t){var e;this.options.behaviors=(0,c.default)(t)?t(this.getBehaviors()):t,null===(e=this.context.behavior)||void 0===e||e.setBehaviors(this.options.behaviors);}updateBehavior(t){this.setBehaviors(e=>e.map(e=>"object"==typeof e&&e.key===t.key?Object.assign(Object.assign({},e),t):e));}getBehaviors(){return this.options.behaviors||[];}setPlugins(t){var e;this.options.plugins=(0,c.default)(t)?t(this.getPlugins()):t,null===(e=this.context.plugin)||void 0===e||e.setPlugins(this.options.plugins);}updatePlugin(t){this.setPlugins(e=>e.map(e=>"object"==typeof e&&e.key===t.key?Object.assign(Object.assign({},e),t):e));}getPlugins(){return this.options.plugins||[];}getPluginInstance(t){return this.context.plugin.getPluginInstance(t);}setTransforms(t){var e;this.options.transforms=(0,c.default)(t)?t(this.getTransforms()):t,null===(e=this.context.transform)||void 0===e||e.setTransforms(this.options.transforms);}updateTransform(t){this.setTransforms(e=>e.map(e=>"object"==typeof e&&e.key===t.key?Object.assign(Object.assign({},e),t):e)),this.context.model.refreshData();}getTransforms(){return this.options.transforms||[];}getData(){return this.context.model.getData();}getElementData(t){return Array.isArray(t)?t.map(t=>this.context.model.getElementDataById(t)):this.context.model.getElementDataById(t);}getNodeData(t){return void 0===t?this.context.model.getNodeData():Array.isArray(t)?this.context.model.getNodeData(t):this.context.model.getNodeLikeDatum(t);}getEdgeData(t){return void 0===t?this.context.model.getEdgeData():Array.isArray(t)?this.context.model.getEdgeData(t):this.context.model.getEdgeDatum(t);}getComboData(t){return void 0===t?this.context.model.getComboData():Array.isArray(t)?this.context.model.getComboData(t):this.context.model.getNodeLikeDatum(t);}setData(t){this.context.model.setData((0,c.default)(t)?t(this.getData()):t);}addData(t){this.context.model.addData((0,c.default)(t)?t(this.getData()):t);}addNodeData(t){this.context.model.addNodeData((0,c.default)(t)?t(this.getNodeData()):t);}addEdgeData(t){this.context.model.addEdgeData((0,c.default)(t)?t(this.getEdgeData()):t);}addComboData(t){this.context.model.addComboData((0,c.default)(t)?t(this.getComboData()):t);}addChildrenData(t,e){this.context.model.addChildrenData(t,e);}updateData(t){this.context.model.updateData((0,c.default)(t)?t(this.getData()):t);}updateNodeData(t){this.context.model.updateNodeData((0,c.default)(t)?t(this.getNodeData()):t);}updateEdgeData(t){this.context.model.updateEdgeData((0,c.default)(t)?t(this.getEdgeData()):t);}updateComboData(t){this.context.model.updateComboData((0,c.default)(t)?t(this.getComboData()):t);}removeData(t){this.context.model.removeData((0,c.default)(t)?t(this.getData()):t);}removeNodeData(t){this.context.model.removeNodeData((0,c.default)(t)?t(this.getNodeData()):t);}removeEdgeData(t){this.context.model.removeEdgeData((0,c.default)(t)?t(this.getEdgeData()):t);}removeComboData(t){this.context.model.removeComboData((0,c.default)(t)?t(this.getComboData()):t);}getElementType(t){return this.context.model.getElementType(t);}getRelatedEdgesData(t,e="both"){return this.context.model.getRelatedEdgesData(t,e);}getNeighborNodesData(t){return this.context.model.getNeighborNodesData(t);}getAncestorsData(t,e){return this.context.model.getAncestorsData(t,e);}getParentData(t,e){return this.context.model.getParentData(t,e);}getChildrenData(t){return this.context.model.getChildrenData(t);}getDescendantsData(t){return this.context.model.getDescendantsData(t);}getElementDataByState(t,e){return this.context.model.getElementDataByState(t,e);}initCanvas(){return tV(this,void 0,void 0,function*(){var t;if(this.context.canvas)return yield this.context.canvas.ready;let{container:e="container",width:n,height:i,renderer:r,cursor:a,background:s,canvas:o,devicePixelRatio:l=null!==(t=globalThis.devicePixelRatio)&&void 0!==t?t:1}=this.options;if(e instanceof K.Canvas)this.context.canvas=e,a&&e.setCursor(a),r&&e.setRenderer(r),yield e.ready;else{let t=(0,m.default)(e)?document.getElementById(e):e,d=S(t);this.emit(E.GraphEvent.BEFORE_CANVAS_INIT,{container:t,width:n,height:i});let u=Object.assign(Object.assign({},o),{container:t,width:n||d[0],height:i||d[1],background:s,renderer:r,cursor:a,devicePixelRatio:l}),c=new K.Canvas(u);this.context.canvas=c,yield c.ready,this.emit(E.GraphEvent.AFTER_CANVAS_INIT,{canvas:c});}});}updateCanvas(t){var e,n;let{renderer:i,cursor:r,height:a,width:s}=t,o=this.context.canvas;o&&(i&&(this.emit(E.GraphEvent.BEFORE_RENDERER_CHANGE,{renderer:this.options.renderer}),o.setRenderer(i),this.emit(E.GraphEvent.AFTER_RENDERER_CHANGE,{renderer:i})),r&&o.setCursor(r),((0,p.default)(s)||(0,p.default)(a))&&this.setSize(null!==(e=null!=s?s:this.options.width)&&void 0!==e?e:0,null!==(n=null!=a?a:this.options.height)&&void 0!==n?n:0));}initRuntime(){this.context.options=this.options,this.context.batch||(this.context.batch=new G(this.context)),this.context.plugin||(this.context.plugin=new tB(this.context)),this.context.viewport||(this.context.viewport=new tG(this.context)),this.context.transform||(this.context.transform=new tL(this.context)),this.context.element||(this.context.element=new tE(this.context)),this.context.animation||(this.context.animation=new F(this.context)),this.context.layout||(this.context.layout=new tM(this.context)),this.context.behavior||(this.context.behavior=new H(this.context));}prepare(){return tV(this,void 0,void 0,function*(){if(yield Promise.resolve(),this.destroyed)throw Error((0,M.format)("The graph instance has been destroyed"));yield this.initCanvas(),this.initRuntime();});}render(){return tV(this,void 0,void 0,function*(){if(yield this.prepare(),(0,P.emit)(this,new P.GraphLifeCycleEvent(E.GraphEvent.BEFORE_RENDER)),this.options.layout){if(!this.rendered&&(0,w.isPreLayout)(this.options.layout)){let t=yield this.context.element.preLayoutDraw({type:"render"});yield Promise.all([null==t?void 0:t.finished,this.autoFit()]);}else{let t=this.context.element.draw({type:"render"});yield Promise.all([null==t?void 0:t.finished,this.context.layout.postLayout()]),yield this.autoFit();}}else{let t=this.context.element.draw({type:"render"});yield Promise.all([null==t?void 0:t.finished,this.autoFit()]);}this.rendered=!0,(0,P.emit)(this,new P.GraphLifeCycleEvent(E.GraphEvent.AFTER_RENDER));});}draw(){return tV(this,void 0,void 0,function*(){var t;yield this.prepare(),yield null===(t=this.context.element.draw())||void 0===t?void 0:t.finished;});}layout(t){return tV(this,void 0,void 0,function*(){yield this.context.layout.postLayout(t);});}stopLayout(){this.context.layout.stopLayout();}clear(){return tV(this,void 0,void 0,function*(){let{model:t,element:e}=this.context;t.setData({}),t.clearChanges(),null==e||e.clear();});}destroy(){var t;(0,P.emit)(this,new P.GraphLifeCycleEvent(E.GraphEvent.BEFORE_DESTROY));let{layout:e,animation:n,element:i,model:r,canvas:a,behavior:s,plugin:o}=this.context;null==o||o.destroy(),null==s||s.destroy(),null==e||e.destroy(),null==n||n.destroy(),null==i||i.destroy(),r.destroy(),null==a||a.destroy(),this.options={},this.context={},this.off(),null===(t=globalThis.removeEventListener)||void 0===t||t.call(globalThis,"resize",this.onResize),this.destroyed=!0,(0,P.emit)(this,new P.GraphLifeCycleEvent(E.GraphEvent.AFTER_DESTROY));}getCanvas(){return this.context.canvas;}resize(t,e){var n;let i=S(null===(n=this.context.canvas)||void 0===n?void 0:n.getContainer()),r=[t||i[0],e||i[1]];if(!this.context.canvas)return;let a=this.context.canvas.getSize();(0,d.default)(r,a)||((0,P.emit)(this,new P.GraphLifeCycleEvent(E.GraphEvent.BEFORE_SIZE_CHANGE,{size:r})),this.context.canvas.resize(...r),(0,P.emit)(this,new P.GraphLifeCycleEvent(E.GraphEvent.AFTER_SIZE_CHANGE,{size:r})));}fitView(t,e){return tV(this,void 0,void 0,function*(){var n;yield null===(n=this.context.viewport)||void 0===n?void 0:n.fitView(t,e);});}fitCenter(t){return tV(this,void 0,void 0,function*(){var e;yield null===(e=this.context.viewport)||void 0===e?void 0:e.fitCenter({animation:t});});}autoFit(){return tV(this,void 0,void 0,function*(){let{autoFit:t}=this.context.options;if(t){if((0,m.default)(t))"view"===t?yield this.fitView():"center"===t&&(yield this.fitCenter());else{let{type:e,animation:n}=t;"view"===e?yield this.fitView(t.options,n):"center"===e&&(yield this.fitCenter(n));}}});}focusElement(t,e){return tV(this,void 0,void 0,function*(){var n;yield null===(n=this.context.viewport)||void 0===n?void 0:n.focusElements(Array.isArray(t)?t:[t],{animation:e});});}zoomBy(t,e,n){return tV(this,void 0,void 0,function*(){yield this.context.viewport.transform({mode:"relative",scale:t,origin:n},e);});}zoomTo(t,e,n){return tV(this,void 0,void 0,function*(){yield this.context.viewport.transform({mode:"absolute",scale:t,origin:n},e);});}getZoom(){return this.context.viewport.getZoom();}rotateBy(t,e,n){return tV(this,void 0,void 0,function*(){yield this.context.viewport.transform({mode:"relative",rotate:t,origin:n},e);});}rotateTo(t,e,n){return tV(this,void 0,void 0,function*(){yield this.context.viewport.transform({mode:"absolute",rotate:t,origin:n},e);});}getRotation(){return this.context.viewport.getRotation();}translateBy(t,e){return tV(this,void 0,void 0,function*(){yield this.context.viewport.transform({mode:"relative",translate:t},e);});}translateTo(t,e){return tV(this,void 0,void 0,function*(){yield this.context.viewport.transform({mode:"absolute",translate:t},e);});}getPosition(){return(0,A.subtract)([0,0],this.getCanvasByViewport([0,0]));}translateElementBy(t,e){return tV(this,arguments,void 0,function*(t,e,n=!0){var i;let[r,a]=(0,g.default)(t)?[t,null==e||e]:[{[t]:e},n];Object.entries(r).forEach(([t,e])=>this.context.model.translateNodeLikeBy(t,e)),yield null===(i=this.context.element.draw({animation:a,stage:"translate"}))||void 0===i?void 0:i.finished;});}translateElementTo(t,e){return tV(this,arguments,void 0,function*(t,e,n=!0){var i;let[r,a]=(0,g.default)(t)?[t,null==e||e]:[{[t]:e},n];Object.entries(r).forEach(([t,e])=>this.context.model.translateNodeLikeTo(t,e)),yield null===(i=this.context.element.draw({animation:a,stage:"translate"}))||void 0===i?void 0:i.finished;});}getElementPosition(t){return this.context.model.getElementPosition(t);}getElementRenderStyle(t){return(0,v.default)(this.context.element.getElement(t).attributes,["context"]);}setElementVisibility(t,e){return tV(this,arguments,void 0,function*(t,e,n=!0){var i;let[r,a]=(0,g.default)(t)?[t,null==e||e]:[{[t]:e},n],s={nodes:[],edges:[],combos:[]};Object.entries(r).forEach(([t,e])=>{let n=this.getElementType(t);s[`${n}s`].push({id:t,style:{visibility:e}});});let{model:o,element:l}=this.context;o.preventUpdateNodeLikeHierarchy(()=>{o.updateData(s);}),yield null===(i=l.draw({animation:a,stage:"visibility"}))||void 0===i?void 0:i.finished;});}showElement(t,e){return tV(this,void 0,void 0,function*(){let n=Array.isArray(t)?t:[t];yield this.setElementVisibility(Object.fromEntries(n.map(t=>[t,"visible"])),e);});}hideElement(t,e){return tV(this,void 0,void 0,function*(){let n=Array.isArray(t)?t:[t];yield this.setElementVisibility(Object.fromEntries(n.map(t=>[t,"hidden"])),e);});}getElementVisibility(t){var e,n;let i=this.context.element.getElement(t);return null!==(n=null===(e=null==i?void 0:i.style)||void 0===e?void 0:e.visibility)&&void 0!==n?n:"visible";}setElementZIndex(t,e){return tV(this,void 0,void 0,function*(){var n;let i={nodes:[],edges:[],combos:[]};Object.entries((0,g.default)(t)?t:{[t]:e}).forEach(([t,e])=>{let n=this.getElementType(t);i[`${n}s`].push({id:t,style:{zIndex:e}});});let{model:r,element:a}=this.context;r.preventUpdateNodeLikeHierarchy(()=>r.updateData(i)),yield null===(n=a.draw({animation:!1,stage:"zIndex"}))||void 0===n?void 0:n.finished;});}frontElement(t){return tV(this,void 0,void 0,function*(){let e=Array.isArray(t)?t:[t],{model:n}=this.context,i={};e.map(t=>{let e=n.getFrontZIndex(t);if("combo"===n.getElementType(t)){let r=n.getAncestorsData(t,E.COMBO_KEY).at(-1)||this.getComboData(t),a=[r,...n.getDescendantsData((0,C.idOf)(r))],s=e-T(r);a.forEach(t=>{i[(0,C.idOf)(t)]=this.getElementZIndex((0,C.idOf)(t))+s;});let{internal:o}=(0,_.getSubgraphRelatedEdges)(a.map(C.idOf),t=>n.getRelatedEdgesData(t));o.forEach(t=>{let e=(0,C.idOf)(t);i[e]=this.getElementZIndex(e)+s;});}else i[t]=e;}),yield this.setElementZIndex(i);});}getElementZIndex(t){return T(this.context.model.getElementDataById(t));}setElementState(t,e){return tV(this,arguments,void 0,function*(t,e,n=!0){var i;let[r,a]=(0,g.default)(t)?[t,null==e||e]:[{[t]:e},n],s=t=>t?Array.isArray(t)?t:[t]:[],o={nodes:[],edges:[],combos:[]};Object.entries(r).forEach(([t,e])=>{let n=this.getElementType(t);o[`${n}s`].push({id:t,states:s(e)});}),this.updateData(o),yield null===(i=this.context.element.draw({animation:a,stage:"state"}))||void 0===i?void 0:i.finished;});}getElementState(t){return this.context.model.getElementState(t);}getElementRenderBounds(t){return this.context.element.getElement(t).getRenderBounds();}collapseElement(t){return tV(this,arguments,void 0,function*(t,e=!0){let{model:n,element:i}=this.context;if((0,x.isCollapsed)(n.getNodeLikeData([t])[0])||this.isCollapsingExpanding)return;"boolean"==typeof e&&(e={animation:e,align:!0});let r=n.getElementType(t);yield this.frontElement(t),this.isCollapsingExpanding=!0,this.setElementCollapsibility(t,!0),"node"===r?yield i.collapseNode(t,e):"combo"===r&&(yield i.collapseCombo(t,!!e.animation)),this.isCollapsingExpanding=!1;});}expandElement(t){return tV(this,arguments,void 0,function*(t,e=!0){let{model:n,element:i}=this.context;if(!(0,x.isCollapsed)(n.getNodeLikeData([t])[0])||this.isCollapsingExpanding)return;"boolean"==typeof e&&(e={animation:e,align:!0});let r=n.getElementType(t);this.isCollapsingExpanding=!0,this.setElementCollapsibility(t,!1),"node"===r?yield i.expandNode(t,e):"combo"===r&&(yield i.expandCombo(t,!!e.animation)),this.isCollapsingExpanding=!1;});}setElementCollapsibility(t,e){let n=this.getElementType(t);"node"===n?this.updateNodeData([{id:t,style:{collapsed:e}}]):"combo"===n&&this.updateComboData([{id:t,style:{collapsed:e}}]);}toDataURL(){return tV(this,arguments,void 0,function*(t={}){return this.context.canvas.toDataURL(t);});}getCanvasByViewport(t){return this.context.canvas.getCanvasByViewport(t);}getViewportByCanvas(t){return this.context.canvas.getViewportByCanvas(t);}getClientByCanvas(t){return this.context.canvas.getClientByCanvas(t);}getCanvasByClient(t){return this.context.canvas.getCanvasByClient(t);}getViewportCenter(){return this.context.viewport.getViewportCenter();}getCanvasCenter(){return this.context.viewport.getCanvasCenter();}on(t,e,n){return super.on(t,e,n);}once(t,e){return super.once(t,e);}off(t,e){return super.off(t,e);}}tW.defaultOptions={autoResize:!1,theme:"light",rotation:0,zoom:1,zoomRange:[.01,10]};},d7b73d26:function(t,e,n){"use strict";function i(t,e=!0,n){let r=document.createElement("div");return r.setAttribute("class",`g6-${t}`),Object.assign(r.style,{position:"absolute",display:"block"}),e&&Object.assign(r.style,{position:"unset",gridArea:"1 / 1 / 2 / 2",inset:"0px",height:"100%",width:"100%",overflow:"hidden",pointerEvents:"none"}),n&&Object.assign(r.style,n),r;}function r(t,e="div",n={},i="",a=document.body){let s=document.getElementById(t);s&&s.remove();let o=document.createElement(e);return o.innerHTML=i,o.id=t,Object.assign(o.style,n),a.appendChild(o),o;}n.d(e,"__esModule",{value:!0}),n.e(e,{createPluginContainer:function(){return i;},insertDOM:function(){return r;}});},d9033aa4:function(t,e,n){var i,r,a,s,o,l,d,u,c,h,p,f,g,y,m,b,v,E,x,O;n.d(e,"__esModule",{value:!0}),n.e(e,{AnimationType:function(){return r;},COMBO_KEY:function(){return P;},CanvasEvent:function(){return a;},ChangeType:function(){return i;},ComboEvent:function(){return s;},CommonEvent:function(){return o;},ContainerEvent:function(){return l;},DEFAULT_ANIMATION_OPTIONS:function(){return S;},DEFAULT_ELEMENTS_ANIMATION_OPTIONS:function(){return _;},EdgeEvent:function(){return d;},ExtensionCategory:function(){return h;},GraphEvent:function(){return u;},NodeEvent:function(){return c;},TREE_KEY:function(){return C;}});let S={duration:500},_={duration:1e3,easing:"cubic-bezier(0.250, 0.460, 0.450, 0.940)",iterations:1,fill:"both"};(p=i||(i={})).NodeAdded="NodeAdded",p.NodeUpdated="NodeUpdated",p.NodeRemoved="NodeRemoved",p.EdgeAdded="EdgeAdded",p.EdgeUpdated="EdgeUpdated",p.EdgeRemoved="EdgeRemoved",p.ComboAdded="ComboAdded",p.ComboUpdated="ComboUpdated",p.ComboRemoved="ComboRemoved",(f=r||(r={})).DRAW="draw",f.COLLAPSE="collapse",f.EXPAND="expand",f.TRANSFORM="transform",(g=a||(a={})).CLICK="canvas:click",g.DBLCLICK="canvas:dblclick",g.POINTER_OVER="canvas:pointerover",g.POINTER_LEAVE="canvas:pointerleave",g.POINTER_ENTER="canvas:pointerenter",g.POINTER_MOVE="canvas:pointermove",g.POINTER_OUT="canvas:pointerout",g.POINTER_DOWN="canvas:pointerdown",g.POINTER_UP="canvas:pointerup",g.CONTEXT_MENU="canvas:contextmenu",g.DRAG_START="canvas:dragstart",g.DRAG="canvas:drag",g.DRAG_END="canvas:dragend",g.DRAG_ENTER="canvas:dragenter",g.DRAG_OVER="canvas:dragover",g.DRAG_LEAVE="canvas:dragleave",g.DROP="canvas:drop",g.WHEEL="canvas:wheel",(y=s||(s={})).CLICK="combo:click",y.DBLCLICK="combo:dblclick",y.POINTER_OVER="combo:pointerover",y.POINTER_LEAVE="combo:pointerleave",y.POINTER_ENTER="combo:pointerenter",y.POINTER_MOVE="combo:pointermove",y.POINTER_OUT="combo:pointerout",y.POINTER_DOWN="combo:pointerdown",y.POINTER_UP="combo:pointerup",y.CONTEXT_MENU="combo:contextmenu",y.DRAG_START="combo:dragstart",y.DRAG="combo:drag",y.DRAG_END="combo:dragend",y.DRAG_ENTER="combo:dragenter",y.DRAG_OVER="combo:dragover",y.DRAG_LEAVE="combo:dragleave",y.DROP="combo:drop",(m=o||(o={})).CLICK="click",m.DBLCLICK="dblclick",m.POINTER_OVER="pointerover",m.POINTER_LEAVE="pointerleave",m.POINTER_ENTER="pointerenter",m.POINTER_MOVE="pointermove",m.POINTER_OUT="pointerout",m.POINTER_DOWN="pointerdown",m.POINTER_UP="pointerup",m.CONTEXT_MENU="contextmenu",m.DRAG_START="dragstart",m.DRAG="drag",m.DRAG_END="dragend",m.DRAG_ENTER="dragenter",m.DRAG_OVER="dragover",m.DRAG_LEAVE="dragleave",m.DROP="drop",m.KEY_DOWN="keydown",m.KEY_UP="keyup",m.WHEEL="wheel",m.PINCH="pinch",(b=l||(l={})).KEY_DOWN="keydown",b.KEY_UP="keyup",(v=d||(d={})).CLICK="edge:click",v.DBLCLICK="edge:dblclick",v.POINTER_OVER="edge:pointerover",v.POINTER_LEAVE="edge:pointerleave",v.POINTER_ENTER="edge:pointerenter",v.POINTER_MOVE="edge:pointermove",v.POINTER_OUT="edge:pointerout",v.POINTER_DOWN="edge:pointerdown",v.POINTER_UP="edge:pointerup",v.CONTEXT_MENU="edge:contextmenu",v.DRAG_ENTER="edge:dragenter",v.DRAG_OVER="edge:dragover",v.DRAG_LEAVE="edge:dragleave",v.DROP="edge:drop",(E=u||(u={})).BEFORE_CANVAS_INIT="beforecanvasinit",E.AFTER_CANVAS_INIT="aftercanvasinit",E.BEFORE_SIZE_CHANGE="beforesizechange",E.AFTER_SIZE_CHANGE="aftersizechange",E.BEFORE_ELEMENT_CREATE="beforeelementcreate",E.AFTER_ELEMENT_CREATE="afterelementcreate",E.BEFORE_ELEMENT_UPDATE="beforeelementupdate",E.AFTER_ELEMENT_UPDATE="afterelementupdate",E.BEFORE_ELEMENT_DESTROY="beforeelementdestroy",E.AFTER_ELEMENT_DESTROY="afterelementdestroy",E.BEFORE_ELEMENT_TRANSLATE="beforeelementtranslate",E.AFTER_ELEMENT_TRANSLATE="afterelementtranslate",E.BEFORE_DRAW="beforedraw",E.AFTER_DRAW="afterdraw",E.BEFORE_RENDER="beforerender",E.AFTER_RENDER="afterrender",E.BEFORE_ANIMATE="beforeanimate",E.AFTER_ANIMATE="afteranimate",E.BEFORE_LAYOUT="beforelayout",E.AFTER_LAYOUT="afterlayout",E.BEFORE_STAGE_LAYOUT="beforestagelayout",E.AFTER_STAGE_LAYOUT="afterstagelayout",E.BEFORE_TRANSFORM="beforetransform",E.AFTER_TRANSFORM="aftertransform",E.BATCH_START="batchstart",E.BATCH_END="batchend",E.BEFORE_DESTROY="beforedestroy",E.AFTER_DESTROY="afterdestroy",E.BEFORE_RENDERER_CHANGE="beforerendererchange",E.AFTER_RENDERER_CHANGE="afterrendererchange",n("bd8433ec"),(x=c||(c={})).CLICK="node:click",x.DBLCLICK="node:dblclick",x.POINTER_OVER="node:pointerover",x.POINTER_LEAVE="node:pointerleave",x.POINTER_ENTER="node:pointerenter",x.POINTER_MOVE="node:pointermove",x.POINTER_OUT="node:pointerout",x.POINTER_DOWN="node:pointerdown",x.POINTER_UP="node:pointerup",x.CONTEXT_MENU="node:contextmenu",x.DRAG_START="node:dragstart",x.DRAG="node:drag",x.DRAG_END="node:dragend",x.DRAG_ENTER="node:dragenter",x.DRAG_OVER="node:dragover",x.DRAG_LEAVE="node:dragleave",x.DROP="node:drop";let P="combo",C="tree";(O=h||(h={})).NODE="node",O.EDGE="edge",O.COMBO="combo",O.THEME="theme",O.PALETTE="palette",O.LAYOUT="layout",O.BEHAVIOR="behavior",O.PLUGIN="plugin",O.ANIMATION="animation",O.TRANSFORM="transform",O.SHAPE="shape";},d9bf10cb:function(t,e,n){"use strict";n.d(e,"__esModule",{value:!0}),e.inferIconStyle=function(t,e){let n=(0,i.parseSize)(t),r={};return e.text&&!e.fontSize&&(r={fontSize:.5*Math.min(...n)}),!e.src||e.width&&e.height||(r={width:.5*n[0],height:.5*n[1]}),r;};let i=n("e0ffb410");},dd9e7004:function(t,e,n){"use strict";n.d(e,"__esModule",{value:!0}),n.d(e,"Contour",{enumerable:!0,get:function(){return c;}});var i=n("a0f386cf"),r=n("5a60cfec"),a=n("21954d01"),s=n("1165dca0"),o=n("82395519"),l=n("20ac0f24"),d=n("6220e010"),u=this&&this.__rest||function(t,e){var n={};for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&0>e.indexOf(i)&&(n[i]=t[i]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols)for(var r=0,i=Object.getOwnPropertySymbols(t);r<i.length;r++)0>e.indexOf(i[r])&&Object.prototype.propertyIsEnumerable.call(t,i[r])&&(n[i[r]]=t[i[r]]);return n;};class c extends l.BaseShape{constructor(t){super((0,s.mergeOptions)({style:c.defaultStyleProps},t));}getLabelStyle(t){if(!t.label||!t.d||0===t.d.length)return!1;let e=(0,a.subStyleProps)(this.getGraphicStyle(t),"label"),{maxWidth:n,offsetX:i,offsetY:s,autoRotate:l,placement:d,closeToPath:c}=e,h=u(e,["maxWidth","offsetX","offsetY","autoRotate","placement","closeToPath"]),p=this.shapeMap.key,f=null==p?void 0:p.getRenderBounds();return Object.assign((0,r.getPolygonTextStyleByPlacement)(f,d,i,s,c,t.d,l),{wordWrapWidth:(0,o.getWordWrapWidthByBox)(f,n)},h);}getKeyStyle(t){return this.getGraphicStyle(t);}render(t,e){this.upsert("key",i.Path,this.getKeyStyle(t),e),this.upsert("label",d.Label,this.getLabelStyle(t),e);}}c.defaultStyleProps={label:!0,labelPlacement:"bottom",labelCloseToPath:!0,labelAutoRotate:!0,labelOffsetX:0,labelOffsetY:0};},dde3aa6f:function(t,e,n){"use strict";n.d(e,"__esModule",{value:!0}),n.d(e,"UpdateRelatedEdge",{enumerable:!0,get:function(){return a;}});var i=n("8a2f2f0b"),r=n("a7082564");class a extends r.BaseTransform{beforeDraw(t,e){let{stage:n}=e;if("visibility"===n)return t;let{model:r}=this.context,{update:{nodes:a,edges:s,combos:o}}=t,l=(t,e)=>{r.getRelatedEdgesData(e).forEach(t=>!s.has((0,i.idOf)(t))&&s.set((0,i.idOf)(t),t));};return a.forEach(l),o.forEach(l),t;}}},df866aac:function(t,e,n){"use strict";n.d(e,"__esModule",{value:!0}),n.d(e,"Quadratic",{enumerable:!0,get:function(){return s;}});var i=n("b5f0d953"),r=n("1165dca0"),a=n("8f51b603");class s extends a.BaseEdge{constructor(t){super((0,r.mergeOptions)({style:s.defaultStyleProps},t));}getKeyPath(t){let{curvePosition:e,curveOffset:n}=t,[r,a]=this.getEndpoints(t),s=t.controlPoint||(0,i.getCurveControlPoint)(r,a,e,n);return(0,i.getQuadraticPath)(r,a,s);}}s.defaultStyleProps={curvePosition:.5,curveOffset:30};},e0ffb410:function(t,e,n){"use strict";n.d(e,"__esModule",{value:!0}),e.parseSize=function(t=0){if("number"==typeof t)return[t,t,t];let[e,n=e,i=e]=t;return[e,n,i];};},e1c279a0:function(t,e,n){"use strict";function i(t){var e;return!!(null===(e=t.style)||void 0===e?void 0:e.collapsed);}n.d(e,"__esModule",{value:!0}),n.d(e,"isCollapsed",{enumerable:!0,get:function(){return i;}});},e492a2d3:function(t,e,n){"use strict";n.d(e,"__esModule",{value:!0}),n.e(e,{centerOf:function(){return P;},findNearestLine:function(){return O;},findNearestPointOnLine:function(){return _;},findNearestPoints:function(){return x;},getBoundingPoints:function(){return w;},getDistanceToLine:function(){return S;},getEllipseIntersectPoint:function(){return E;},getPolygonIntersectPoint:function(){return m;},getRectIntersectPoint:function(){return v;},getSymmetricPoint:function(){return y;},isCollinear:function(){return g;},isHorizontal:function(){return h;},isOrthogonal:function(){return f;},isPointInPolygon:function(){return b;},isVertical:function(){return p;},moveTo:function(){return c;},parsePoint:function(){return l;},round:function(){return u;},sortByClockwise:function(){return C;},toPointObject:function(){return d;}});var i=n("777fffbe")._(n("e602108f")),r=n("bf55e093"),a=n("d2a5c9ab"),s=n("2be3380d"),o=n("6d5a1ab5");function l(t){var e;return[t.x,t.y,null!==(e=t.z)&&void 0!==e?e:0];}function d(t){var e;return{x:t[0],y:t[1],z:null!==(e=t[2])&&void 0!==e?e:0};}function u(t,e=0){return t.map(t=>parseFloat(t.toFixed(e)));}function c(t,e,n,r=!1){if((0,i.default)(t,e))return t;let a=r?(0,o.subtract)(t,e):(0,o.subtract)(e,t),s=(0,o.normalize)(a),l=[s[0]*n,s[1]*n];return(0,o.add)((0,o.toVector2)(t),l);}function h(t,e){return t[1]===e[1];}function p(t,e){return t[0]===e[0];}function f(t,e){return h(t,e)||p(t,e);}function g(t,e,n){return(0,a.isLinesParallel)([t,e],[e,n]);}function y(t,e){return[2*e[0]-t[0],2*e[1]-t[1]];}function m(t,e,n,i=!0,r=!1){for(let s=0;s<n.length;s++){let l=n[s],d=n[(s+1)%n.length];i&&(l=(0,o.add)(e,l),d=(0,o.add)(e,d));let u=r?y(t,e):t,c=(0,a.getLinesIntersection)([e,u],[l,d]);if(c)return{point:c,line:[l,d]};}return{point:e,line:void 0};}function b(t,e,n,i){let r=t[0],a=t[1],s=!1;void 0===n&&(n=0),void 0===i&&(i=e.length);let o=i-n;for(let t=0,i=o-1;t<o;i=t++){let o=e[t+n][0],l=e[t+n][1],d=e[i+n][0],u=e[i+n][1];l>a!=u>a&&r<(d-o)*(a-l)/(u-l)+o&&(s=!s);}return s;}function v(t,e,n=!1){return m(t,(0,s.getXYByPlacement)(e,"center"),[(0,s.getXYByPlacement)(e,"left-top"),(0,s.getXYByPlacement)(e,"right-top"),(0,s.getXYByPlacement)(e,"right-bottom"),(0,s.getXYByPlacement)(e,"left-bottom")],!1,n).point;}function E(t,e,n=!1){let i=e.center,a=n?y(t,i):t,s=(0,o.subtract)(a,e.center),l=Math.atan2(s[1],s[0]);if(isNaN(l))return i;let d=(0,r.getBBoxWidth)(e)/2,u=(0,r.getBBoxHeight)(e)/2;return[i[0]+d*Math.cos(l),i[1]+u*Math.sin(l)];}function x(t,e){let n=1/0,i=[t[0],e[0]];return t.forEach(t=>{e.forEach(e=>{let r=(0,o.distance)(t,e);r<n&&(n=r,i=[t,e]);});}),i;}function O(t,e){let n=1/0,i=[[0,0],[0,0]];return e.forEach(e=>{let r=S(t,e);r<n&&(n=r,i=e);}),i;}function S(t,e){let n=_(t,e);return(0,o.distance)(t,n);}function _(t,e){let[n,i]=e[0],[r,a]=e[1],[s,o]=t,l=r-n,d=a-i;if(0===l&&0===d)return[n,i];let u=((s-n)*l+(o-i)*d)/(l*l+d*d);return u>1?u=1:u<0&&(u=0),[n+u*l,i+u*d];}function P(t){let e=t.reduce((t,e)=>(0,o.add)(t,e),[0,0]);return(0,o.divide)(e,t.length);}function C(t,e=!0){let n=P(t);return t.sort(([t,i],[r,a])=>{let s=Math.atan2(i-n[1],t-n[0]),o=Math.atan2(a-n[1],r-n[0]);return e?o-s:s-o;});}function w(t,e){return[t,[t[0],e[1]],e,[e[0],t[1]]];}},e6443357:function(t,e,n){"use strict";n.d(e,"__esModule",{value:!0}),e.Ellipse=void 0;let i=n("6824c090"),r=n("757ae0a3"),a=n("b3456123"),s=n("76595ff2"),o=n("6d16dfc1");class l extends o.BaseNode{constructor(t){super((0,s.mergeOptions)({style:l.defaultStyleProps},t));}drawKeyShape(t,e){return this.upsert("key",i.Ellipse,this.getKeyStyle(t),e);}getKeyStyle(t){let e=super.getKeyStyle(t),[n,i]=this.getSize(t);return Object.assign(Object.assign({},e),{rx:n/2,ry:i/2});}getIconStyle(t){let e=super.getIconStyle(t),{rx:n,ry:i}=this.getShape("key").attributes,a=2*Math.min(+n,+i)*r.ICON_SIZE_RATIO;return!!e&&Object.assign({width:a,height:a},e);}getIntersectPoint(t,e=!1){let n=this.getShape("key").getBounds();return(0,a.getEllipseIntersectPoint)(t,n,e);}}e.Ellipse=l,l.defaultStyleProps={size:[45,35]};},e82833b9:function(t,e,n){"use strict";n.d(e,"__esModule",{value:!0}),n.e(e,{GetEdgeActualEnds:function(){return o;},getEdgeEndsContext:function(){return l;}});var i=n("d9033aa4"),r=n("ff2f2802"),a=n("b5f0d953"),s=n("a7082564");class o extends s.BaseTransform{beforeDraw(t){let{add:e,update:n}=t,{model:i}=this.context;return[...e.edges.entries(),...n.edges.entries()].forEach(([,t])=>{l(i,t);}),t;}}let l=(t,e)=>{let{source:n,target:s}=e,o=t.getElementDataById(n),l=t.getElementDataById(s),d=(0,a.findActualConnectNodeData)(o,e=>t.getParentData(e,i.COMBO_KEY)),u=(0,a.findActualConnectNodeData)(l,e=>t.getParentData(e,i.COMBO_KEY)),c={sourceNode:(0,r.idOf)(d),targetNode:(0,r.idOf)(u)};return e.style?Object.assign(e.style,c):e.style=c,e;};},e8f8b56e:function(t,e,n){"use strict";n.d(e,"__esModule",{value:!0}),n.d(e,"getExtension",{enumerable:!0,get:function(){return r;}});var i=n("875ed127");function r(t,e){var n;let r=null===(n=i.EXTENSION_REGISTRY[t])||void 0===n?void 0:n[e];if(r)return r;}},e938b423:function(t,e,n){"use strict";n.d(e,"__esModule",{value:!0}),e.Circle=void 0;let i=n("6824c090"),r=n("757ae0a3"),a=n("b3456123"),s=n("76595ff2"),o=n("6d16dfc1");class l extends o.BaseNode{constructor(t){super((0,s.mergeOptions)({style:l.defaultStyleProps},t));}drawKeyShape(t,e){return this.upsert("key",i.Circle,this.getKeyStyle(t),e);}getKeyStyle(t){return Object.assign(Object.assign({},super.getKeyStyle(t)),{r:Math.min(...this.getSize(t))/2});}getIconStyle(t){let e=super.getIconStyle(t),{r:n}=this.getShape("key").attributes,i=2*n*r.ICON_SIZE_RATIO;return!!e&&Object.assign({width:i,height:i},e);}getIntersectPoint(t,e=!1){let n=this.getShape("key").getBounds();return(0,a.getEllipseIntersectPoint)(t,n,e);}}e.Circle=l,l.defaultStyleProps={size:32};},e96ae902:function(t,e,n){"use strict";n.d(e,"__esModule",{value:!0}),e.themeOf=function(t){let{theme:e}=t;return e?(0,r.getExtension)(i.ExtensionCategory.THEME,e)||(a.print.warn(`The theme of ${e} is not registered.`),{}):{};};let i=n("d0a8fc0a"),r=n("b83e3ebb"),a=n("22189803");},eb7ae39a:function(t,e,n){"use strict";n.d(e,"__esModule",{value:!0}),e.parsePlacement=function(t){if(Array.isArray(t))return(0,i.isBetween)(t[0],0,1)&&(0,i.isBetween)(t[1],0,1)?t:[.5,.5];let e=t.split("-");return[e.includes("left")?0:e.includes("right")?1:.5,e.includes("top")?0:e.includes("bottom")?1:.5];};let i=n("9d4ee1c4");},ecd36f8f:function(t,e,n){"use strict";n.d(e,"__esModule",{value:!0}),n.d(e,"parsePlacement",{enumerable:!0,get:function(){return r;}});var i=n("870fd70e");function r(t){if(Array.isArray(t))return(0,i.isBetween)(t[0],0,1)&&(0,i.isBetween)(t[1],0,1)?t:[.5,.5];let e=t.split("-");return[e.includes("left")?0:e.includes("right")?1:.5,e.includes("top")?0:e.includes("bottom")?1:.5];}},ecd954f4:function(t,e,n){"use strict";n.d(e,"__esModule",{value:!0}),e.Rect=void 0;let i=n("6824c090"),r=n("757ae0a3"),a=n("6d16dfc1");class s extends a.BaseNode{constructor(t){super(t);}getKeyStyle(t){let[e,n]=this.getSize(t);return Object.assign(Object.assign({},super.getKeyStyle(t)),{width:e,height:n,x:-e/2,y:-n/2});}getIconStyle(t){let e=super.getIconStyle(t),{width:n,height:i}=this.getShape("key").attributes;return!!e&&Object.assign({width:n*r.ICON_SIZE_RATIO,height:i*r.ICON_SIZE_RATIO},e);}drawKeyShape(t,e){return this.upsert("key",i.Rect,this.getKeyStyle(t),e);}}e.Rect=s;},ee303ea5:function(t,e,n){"use strict";n.d(e,"__esModule",{value:!0}),n.e(e,{BaseCombo:function(){return i.BaseCombo;},CircleCombo:function(){return r.CircleCombo;},RectCombo:function(){return a.RectCombo;}});var i=n("56a67307"),r=n("85d3dffa"),a=n("032436c0");},eea70c0e:function(t,e,n){"use strict";var i,r;n.d(e,"__esModule",{value:!0}),e.CanvasEvent=void 0,(r=i||(e.CanvasEvent=i={})).CLICK="canvas:click",r.DBLCLICK="canvas:dblclick",r.POINTER_OVER="canvas:pointerover",r.POINTER_LEAVE="canvas:pointerleave",r.POINTER_ENTER="canvas:pointerenter",r.POINTER_MOVE="canvas:pointermove",r.POINTER_OUT="canvas:pointerout",r.POINTER_DOWN="canvas:pointerdown",r.POINTER_UP="canvas:pointerup",r.CONTEXT_MENU="canvas:contextmenu",r.DRAG_START="canvas:dragstart",r.DRAG="canvas:drag",r.DRAG_END="canvas:dragend",r.DRAG_ENTER="canvas:dragenter",r.DRAG_OVER="canvas:dragover",r.DRAG_LEAVE="canvas:dragleave",r.DROP="canvas:drop",r.WHEEL="canvas:wheel";},eeff6888:function(t,e,n){"use strict";n.d(e,"__esModule",{value:!0}),n.d(e,"BaseNode",{enumerable:!0,get:function(){return m;}});var i=n("a0f386cf"),r=n("19365c34"),a=n("a742fdc2"),s=n("37005793"),o=n("e492a2d3"),l=n("21954d01"),d=n("4c372554"),u=n("1165dca0"),c=n("82395519"),h=n("a0877623"),p=n("8bee604c"),f=n("94ae1aef"),g=n("9a8606f2"),y=this&&this.__rest||function(t,e){var n={};for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&0>e.indexOf(i)&&(n[i]=t[i]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols)for(var r=0,i=Object.getOwnPropertySymbols(t);r<i.length;r++)0>e.indexOf(i[r])&&Object.prototype.propertyIsEnumerable.call(t,i[r])&&(n[i[r]]=t[i[r]]);return n;};class m extends p.BaseElement{constructor(t){super((0,u.mergeOptions)({style:m.defaultStyleProps},t)),this.type="node";}getSize(t=this.attributes){let{size:e}=t;return(0,d.parseSize)(e);}getKeyStyle(t){let e=this.getGraphicStyle(t);return Object.assign((0,l.omitStyleProps)(e,["label","halo","icon","badge","port"]));}getLabelStyle(t){if(!1===t.label||!t.labelText)return!1;let e=(0,l.subStyleProps)(this.getGraphicStyle(t),"label"),{placement:n,maxWidth:i,offsetX:a,offsetY:s}=e,o=y(e,["placement","maxWidth","offsetX","offsetY"]),d=this.getShape("key").getLocalBounds();return Object.assign((0,r.getTextStyleByPlacement)(d,n,a,s),{wordWrapWidth:(0,c.getWordWrapWidthByBox)(d,i)},o);}getHaloStyle(t){if(!1===t.halo)return!1;let e=this.getKeyStyle(t),{fill:n}=e,i=y(e,["fill"]),r=(0,l.subStyleProps)(this.getGraphicStyle(t),"halo");return Object.assign(Object.assign(Object.assign({},i),{stroke:n}),r);}getIconStyle(t){if(!1===t.icon||!t.iconText&&!t.iconSrc)return!1;let e=(0,l.subStyleProps)(this.getGraphicStyle(t),"icon");return Object.assign((0,a.inferIconStyle)(t.size,e),e);}getBadgesStyle(t){var e;let n=(0,l.subObject)(this.shapeMap,"badge-"),i={};if(Object.keys(n).forEach(t=>{i[t]=!1;}),!1===t.badge||!(null===(e=t.badges)||void 0===e?void 0:e.length))return i;let{badges:r=[],badgePalette:a,opacity:o=1}=t,d=y(t,["badges","badgePalette","opacity"]),u=(0,s.getPaletteColors)(a),c=(0,l.subStyleProps)(this.getGraphicStyle(d),"badge");return r.forEach((t,e)=>{i[e]=Object.assign(Object.assign({backgroundFill:u?u[e%(null==u?void 0:u.length)]:void 0,opacity:o},c),this.getBadgeStyle(t));}),i;}getBadgeStyle(t){let e=this.getShape("key"),{placement:n="top",offsetX:i,offsetY:a}=t,s=y(t,["placement","offsetX","offsetY"]);return Object.assign(Object.assign({},(0,r.getTextStyleByPlacement)(e.getLocalBounds(),n,i,a,!0)),s);}getPortsStyle(t){var e;let n=this.getPorts(),i={};if(Object.keys(n).forEach(t=>{i[t]=!1;}),!1===t.port||!(null===(e=t.ports)||void 0===e?void 0:e.length))return i;let a=(0,l.subStyleProps)(this.getGraphicStyle(t),"port"),{ports:s=[]}=t;return s.forEach((e,n)=>{let s=e.key||n,o=Object.assign(Object.assign({},a),e);if((0,r.isSimplePort)(o))i[s]=!1;else{let[n,r]=this.getPortXY(t,e);i[s]=Object.assign({transform:[["translate",n,r]]},o);}}),i;}getPortXY(t,e){let{placement:n="left"}=e,i=this.getShape("key");return(0,r.getPortXYByPlacement)(function(t,e){if(!t)return e.getLocalBounds();let n=t.canvas.getLayer(),i=e.cloneNode();(0,h.setVisibility)(i,"hidden"),n.appendChild(i);let r=i.getLocalBounds();return i.destroy(),r;}(this.context,i),n);}getPorts(){return(0,l.subObject)(this.shapeMap,"port-");}getCenter(){return this.getShape("key").getBounds().center;}getIntersectPoint(t,e=!1){let n=this.getShape("key").getBounds();return(0,o.getRectIntersectPoint)(t,n,e);}drawHaloShape(t,e){let n=this.getHaloStyle(t),i=this.getShape("key");this.upsert("halo",i.constructor,n,e);}drawIconShape(t,e){let n=this.getIconStyle(t);this.upsert("icon",f.Icon,n,e),(0,g.connectImage)(this);}drawBadgeShapes(t,e){let n=this.getBadgesStyle(t);Object.keys(n).forEach(t=>{let i=n[t];this.upsert(`badge-${t}`,f.Badge,i,e);});}drawPortShapes(t,e){let n=this.getPortsStyle(t);Object.keys(n).forEach(t=>{let r=n[t],a=`port-${t}`;this.upsert(a,i.Circle,r,e);});}drawLabelShape(t,e){let n=this.getLabelStyle(t);this.upsert("label",f.Label,n,e);}_drawKeyShape(t,e){return this.drawKeyShape(t,e);}render(t=this.parsedAttributes,e=this){this._drawKeyShape(t,e),this.getShape("key")&&(this.drawHaloShape(t,e),this.drawIconShape(t,e),this.drawBadgeShapes(t,e),this.drawLabelShape(t,e),this.drawPortShapes(t,e));}update(t){super.update(t),t&&("x"in t||"y"in t||"z"in t)&&(0,g.dispatchPositionChange)(this);}onframe(){this.drawBadgeShapes(this.parsedAttributes,this),this.drawLabelShape(this.parsedAttributes,this);}}m.defaultStyleProps={x:0,y:0,size:32,droppable:!0,draggable:!0,port:!0,ports:[],portZIndex:2,portLinkToCenter:!1,badge:!0,badges:[],badgeZIndex:3,halo:!1,haloDroppable:!1,haloLineDash:0,haloLineWidth:12,haloStrokeOpacity:.25,haloPointerEvents:"none",haloZIndex:-1,icon:!0,iconZIndex:1,label:!0,labelIsBillboard:!0,labelMaxWidth:"200%",labelPlacement:"bottom",labelWordWrap:!1,labelZIndex:0};},f44472e8:function(t,e,n){"use strict";n.d(e,"__esModule",{value:!0}),e.Icon=void 0;let i=n("6824c090"),r=n("565fda94"),a=n("14586b74");class s extends r.BaseShape{constructor(t){super(t);}isImage(){let{src:t}=this.attributes;return!!t;}getIconStyle(t=this.attributes){let{width:e=0,height:n=0}=t,i=this.getGraphicStyle(t);return this.isImage()?Object.assign({x:-e/2,y:-n/2},i):Object.assign({textBaseline:"middle",textAlign:"center"},i);}render(t=this.attributes,e=this){this.upsert("icon",this.isImage()?a.Image:i.Text,this.getIconStyle(t),e);}}e.Icon=s;},f7ced0c5:function(t,e,n){"use strict";n.d(e,"__esModule",{value:!0}),e.getRadians=void 0,e.getLabelPositionStyle=c,e.getBadgePositionStyle=function(t,e,n,i,r){var a,s;let o=(null===(a=t.badge)||void 0===a?void 0:a.getGeometryBounds().halfExtents[0])*2||0,l=(null===(s=t.label)||void 0===s?void 0:s.getGeometryBounds().halfExtents[0])*2||0;return c(t.key,n,!0,(l?(l/2+o/2)*("suffix"===e?1:-1):0)+i,r);},e.getCurveControlPoint=function(t,e,n,r){if((0,i.isEqual)(t,e))return t;let a=(0,u.subtract)(e,t),s=[t[0]+n*a[0],t[1]+n*a[1]],o=(0,u.normalize)((0,u.perpendicular)(a,!1));return s[0]+=r*o[0],s[1]+=r*o[1],s;},e.parseCurveOffset=function(t){return(0,i.isNumber)(t)?[t,-t]:t;},e.parseCurvePosition=function(t){return(0,i.isNumber)(t)?[t,1-t]:t;},e.getQuadraticPath=function(t,e,n){return[["M",t[0],t[1]],["Q",n[0],n[1],e[0],e[1]]];},e.getCubicPath=p,e.getPolylinePath=f,e.getBorderRadiusPoints=g,e.getLoopEndpoints=y,e.getCubicLoopPath=function(t,e,n,i,r,a){let o=t.getPorts()[r||a],l=t.getPorts()[a||r],[d,u]=y(t,e,n,o,l),c=m(t,d,u,i);return o&&(d=(0,s.getPortConnectionPoint)(o,c[0])),l&&(u=(0,s.getPortConnectionPoint)(l,c.at(-1))),p(d,u,c);},e.getCubicLoopControlPoints=m,e.getPolylineLoopPath=function(t,e,n,i,r,a,o){let l=(0,s.getAllPorts)(t),d=l[a||o],u=l[o||a],[c,h]=y(t,n,i,d,u),p=b(t,c,h,r);return d&&(c=(0,s.getPortConnectionPoint)(d,p[0])),u&&(h=(0,s.getPortConnectionPoint)(u,p.at(-1))),f([c,...p,h],e);},e.getPolylineLoopControlPoints=b,e.getSubgraphRelatedEdges=function(t,e){let n=new Set,i=new Set,r=new Set;return t.forEach(a=>{e(a).forEach(e=>{n.add(e),t.includes(e.source)&&t.includes(e.target)?i.add(e):r.add(e);});}),{edges:Array.from(n),internal:Array.from(i),external:Array.from(r)};},e.findActualConnectNodeData=function(t,e){let n=[],i=t;for(;i;){n.push(i);let t=e((0,o.idOf)(i));if(t)i=t;else break;}if(n.some(t=>{var e;return null===(e=t.style)||void 0===e?void 0:e.collapsed;})){let t=n.reverse().findIndex(a.isCollapsed);return n[t]||n.at(-1);}return t;},e.getArrowSize=function(t,e){return e||(t<4?10:4===t?12:2.5*t);};let i=n("5a6910cd"),r=n("b51680dc"),a=n("26b35d1c"),s=n("734c52ec"),o=n("0e886f4f"),l=n("b3456123"),d=n("45c7872a"),u=n("41446765");function c(t,e,n,i,r){let a="number"==typeof e?e:.5;"start"===e&&(a=0),"end"===e&&(a=.99);let s=(0,l.parsePoint)(t.getPoint(a)),o=(0,l.parsePoint)(t.getPoint(a+.01)),d="start"===e?"left":"end"===e?"right":"center";if((0,l.isHorizontal)(s,o)||!n){let[e,n]=h(t,a,i,r);return{transform:[["translate",e,n]],textAlign:d};}let u=Math.atan2(o[1]-s[1],o[0]-s[0]);o[0]<s[0]&&(d="center"===d?d:"left"===d?"right":"left",i*=-1,u+=Math.PI);let[c,p]=h(t,a,i,r,u);return{textAlign:d,transform:[["translate",c,p],["rotate",u/Math.PI*180]]};}function h(t,e,n,i,r){let[a,s]=(0,l.parsePoint)(t.getPoint(e)),o=n,d=i;return r&&(o=n*Math.cos(r)-i*Math.sin(r),d=n*Math.sin(r)+i*Math.cos(r)),[a+o,s+d];}function p(t,e,n){return[["M",t[0],t[1]],["C",n[0][0],n[0][1],n[1][0],n[1][1],e[0],e[1]]];}function f(t,e=0,n=!1){let i=t.length-1,r=t[0],a=t[i],s=t.slice(1,i),o=[["M",r[0],r[1]]];return s.forEach((t,n)=>{let i=s[n-1]||r,d=s[n+1]||a;if(!(0,l.isCollinear)(i,t,d)&&e){let[n,r]=g(i,t,d,e);o.push(["L",n[0],n[1]],["Q",t[0],t[1],r[0],r[1]],["L",r[0],r[1]]);}else o.push(["L",t[0],t[1]]);}),o.push(["L",a[0],a[1]]),n&&o.push(["Z"]),o;}function g(t,e,n,i){let r=(0,u.manhattanDistance)(t,e),a=(0,u.manhattanDistance)(n,e),s=Math.min(i,Math.min(r,a)/2);return[[e[0]-s/r*(e[0]-t[0]),e[1]-s/r*(e[1]-t[1])],[e[0]-s/a*(e[0]-n[0]),e[1]-s/a*(e[1]-n[1])]];}function y(t,n,i,a,o){let l=(0,r.getNodeBBox)(t),d=t.getCenter(),c=a&&(0,s.getPortPosition)(a),h=o&&(0,s.getPortPosition)(o);if(!c||!h){let a=(0,e.getRadians)(l),o=a[n][0],p=a[n][1],[f,g]=(0,r.getBBoxSize)(l),y=Math.max(f,g),m=(0,u.add)(d,[y*Math.cos(o),y*Math.sin(o),0]),b=(0,u.add)(d,[y*Math.cos(p),y*Math.sin(p),0]);c=(0,s.getNodeConnectionPoint)(t,m),h=(0,s.getNodeConnectionPoint)(t,b),i||([c,h]=[h,c]);}return[c,h];}function m(t,e,n,r){let a=t.getCenter();if((0,i.isEqual)(e,n)){let t=(0,u.subtract)(e,a),i=[r*Math.sign(t[0])||r/2,r*Math.sign(t[1])||-r/2,0];return[(0,u.add)(e,i),(0,u.add)(n,(0,u.multiply)(i,[1,-1,1]))];}return[(0,l.moveTo)(a,e,(0,u.distance)(a,e)+r),(0,l.moveTo)(a,n,(0,u.distance)(a,n)+r)];}function b(t,e,n,a){let s=[],o=(0,r.getNodeBBox)(t);if((0,i.isEqual)(e,n))switch((0,r.getNearestBoundarySide)(e,o)){case"left":s.push([e[0]-a,e[1]]),s.push([e[0]-a,e[1]+a]),s.push([e[0],e[1]+a]);break;case"right":s.push([e[0]+a,e[1]]),s.push([e[0]+a,e[1]+a]),s.push([e[0],e[1]+a]);break;case"top":s.push([e[0],e[1]-a]),s.push([e[0]+a,e[1]-a]),s.push([e[0]+a,e[1]]);break;case"bottom":s.push([e[0],e[1]+a]),s.push([e[0]+a,e[1]+a]),s.push([e[0]+a,e[1]]);}else{let t=(0,r.getNearestBoundarySide)(e,o),i=(0,r.getNearestBoundarySide)(n,o);if(t===i){let i,r;switch(t){case"left":i=Math.min(e[0],n[0])-a,s.push([i,e[1]]),s.push([i,n[1]]);break;case"right":i=Math.max(e[0],n[0])+a,s.push([i,e[1]]),s.push([i,n[1]]);break;case"top":r=Math.min(e[1],n[1])-a,s.push([e[0],r]),s.push([n[0],r]);break;case"bottom":r=Math.max(e[1],n[1])+a,s.push([e[0],r]),s.push([n[0],r]);}}else{let r=(t,e)=>({left:[e[0]-a,e[1]],right:[e[0]+a,e[1]],top:[e[0],e[1]-a],bottom:[e[0],e[1]+a]})[t],l=r(t,e),u=r(i,n),c=(0,d.freeJoin)(l,u,o);s.push(l,c,u);}}return s;}e.getRadians=t=>{let e=Math.PI/2,n=(0,r.getBBoxHeight)(t)/2,i=(0,r.getBBoxWidth)(t)/2,a=Math.atan2(n,i)/2,s=Math.atan2(i,n)/2;return{top:[-e-s,-e+s],"top-right":[-e+s,-a],"right-top":[-e+s,-a],right:[-a,a],"bottom-right":[a,e-s],"right-bottom":[a,e-s],bottom:[e-s,e+s],"bottom-left":[e+s,Math.PI-a],"left-bottom":[e+s,Math.PI-a],left:[Math.PI-a,Math.PI+a],"top-left":[Math.PI+a,-e-s],"left-top":[Math.PI+a,-e-s]};};},f9f7922b:function(t,e,n){n.d(e,"__esModule",{value:!0}),n.e(e,{AnimateEvent:function(){return o;},BaseEvent:function(){return a;},ElementLifeCycleEvent:function(){return l;},GraphLifeCycleEvent:function(){return s;},ViewportEvent:function(){return d;},emit:function(){return u;},eventTargetOf:function(){return c;}});var i=n("a0f386cf"),r=n("19365c34");class a{constructor(t){this.type=t;}}class s extends a{constructor(t,e){super(t),this.data=e;}}class o extends a{constructor(t,e,n,i){super(t),this.animationType=e,this.animation=n,this.data=i;}}class l extends a{constructor(t,e,n){super(t),this.elementType=e,this.data=n;}}class d extends a{constructor(t,e){super(t),this.data=e;}}function u(t,e){t.emit(e.type,e);}function c(t){if(!t)return null;if(t instanceof i.Document)return{type:"canvas",element:t};let e=t;for(;e;){if((0,r.isNode)(e))return{type:"node",element:e};if((0,r.isEdge)(e))return{type:"edge",element:e};if((0,r.isCombo)(e))return{type:"combo",element:e};e=e.parentElement;}return null;}},fd188c8a:function(t,e,n){"use strict";n.d(e,"__esModule",{value:!0}),e.Star=void 0;let i=n("757ae0a3"),r=n("734c52ec"),a=n("aaa87daa");class s extends a.Polygon{constructor(t){super(t);}getInnerR(t){return t.innerR||3*this.getOuterR(t)/8;}getOuterR(t){return Math.min(...this.getSize(t))/2;}getPoints(t){return(0,r.getStarPoints)(this.getOuterR(t),this.getInnerR(t));}getIconStyle(t){let e=super.getIconStyle(t),n=2*this.getInnerR(t)*i.ICON_SIZE_RATIO;return!!e&&Object.assign({width:n,height:n},e);}getPortXY(t,e){let{placement:n="top"}=e,i=this.getShape("key").getLocalBounds(),a=(0,r.getStarPorts)(this.getOuterR(t),this.getInnerR(t));return(0,r.getPortXYByPlacement)(i,n,a,!1);}}e.Star=s;},ff2f2802:function(t,e,n){"use strict";n.d(e,"__esModule",{value:!0}),n.e(e,{Badge:function(){return o.Badge;},BaseBehavior:function(){return i.BaseBehavior;},BaseEdge:function(){return a.BaseEdge;},BaseLayout:function(){return l.BaseLayout;},BaseNode:function(){return s.BaseNode;},CanvasEvent:function(){return r.CanvasEvent;},CommonEvent:function(){return r.CommonEvent;},ConcentricLayout:function(){return l.ConcentricLayout;},DragElement:function(){return i.DragElement;},EdgeEvent:function(){return r.EdgeEvent;},ExtensionCategory:function(){return r.ExtensionCategory;},Graph:function(){return u.Graph;},GraphEvent:function(){return r.GraphEvent;},Icon:function(){return o.Icon;},Label:function(){return o.Label;},NodeEvent:function(){return r.NodeEvent;},Polyline:function(){return a.Polyline;},idOf:function(){return h.idOf;},isCollapsed:function(){return c.isCollapsed;},omitStyleProps:function(){return p.omitStyleProps;},parseSize:function(){return f.parseSize;},register:function(){return d.register;},subStyleProps:function(){return p.subStyleProps;},treeToGraphData:function(){return g.treeToGraphData;}});var i=n("4e152f1d"),r=n("d9033aa4");n("ee303ea5");var a=n("8691a1cd");n("6219eb03");var s=n("91a7def3"),o=n("94ae1aef"),l=n("89ac127e");n("35fa4d01");var d=n("c2d5d9cb");n("be1f153d");var u=n("d65e9677");n("2177267d");var c=n("e1c279a0"),h=n("8a2f2f0b");n("4557e62d");var p=n("21954d01");n("ae02b67c");var f=n("4c372554"),g=n("0ecd492e");},ffe4817e:function(t,e,n){"use strict";function i(t){return"source"in t&&"target"in t;}function r(t){return 2===t.length;}function a(t){return t instanceof Float32Array||!!Array.isArray(t)&&(2===t.length||3===t.length)&&t.every(t=>"number"==typeof t);}n.d(e,"__esModule",{value:!0}),n.e(e,{isEdgeData:function(){return i;},isPoint:function(){return a;},isVector2:function(){return r;}});}}]);
