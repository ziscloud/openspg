(("undefined"!=typeof globalThis?globalThis:self)["makoChunk_open-semantic-graph"]=("undefined"!=typeof globalThis?globalThis:self)["makoChunk_open-semantic-graph"]||[]).push([["3120779b"],{"0a75b646":function(e,t,l){"use strict";l.d(t,"__esModule",{value:!0}),l.d(t,"default",{enumerable:!0,get:function(){return d;}});var o=l("777fffbe"),a=l("32b7a2cf"),r=o._(l("d5b565e0")),n=o._(l("0c8a2b89")),d=o._(l("4d0e37ae")).default.memo(e=>{let{tip:t,tooltipProps:l,children:o,...d}=e;return(0,a.jsx)(n.default,{...l,title:t,children:(0,a.jsx)(r.default,{...d,children:o})});});},"24c8531b":function(e,t,l){l.d(t,"__esModule",{value:!0}),l.e(t,{default:function(){return w;}});var o=l("777fffbe"),a=l("852bbaa9"),r=l("32b7a2cf"),n=l("5b5ed4a9"),d=l("5661e780"),i=o._(d),s=l("4d0e37ae"),u=a._(s),c=l("c5f39a1b"),f=o._(c),m=l("f02131d0"),g=o._(m),p=l("3fe68e88"),v=o._(p),h=l("fd7ca954"),b=l("4c1838f3"),j=o._(b);let{Item:C}=v.default,x=n.styled.div`
  .ant-breadcrumb {
    position: relative;
    left: -8px;
    ol > li {
      .ant-breadcrumb-separator {
        margin: 0;
      }
      .ant-breadcrumb-link {
        .link-breadcrumb-item {
          border-radius: 4px;
          padding: 4px 4px;
          margin-inline: 4px;
          color: var(--deep-blue-47);
          &:hover {
            color: var(--deep-blue-68);
            background-color: var(--hover-color);
          }
        }
      }
      .span-breadcrumb-item {
        color: var(--deep-blue-65);
        padding: 4px var(--padding-mini);
      }
    }
  }
`;var P=l("5e00c259");let _=(0,n.styled)(e=>{let{items:t,wrapperStyle:l,...o}=e,a=(0,n.useSelectedRoutes)(),d=(0,n.useNavigate)(),[i]=(0,n.useSearchParams)(),s=(0,u.useMemo)(()=>{if(t)return t;let e=[];return null==a||a.forEach((t,l)=>{var o,r,n,d,i,s,u,c;(null==t?void 0:null===(o=t.route)||void 0===o?void 0:o.name)&&((0,j.default)(null==t?void 0:null===(r=t.route)||void 0===r?void 0:r.name)?e.push({key:t.pathnameBase,title:g.default.get(null==t?void 0:null===(n=t.route)||void 0===n?void 0:n.name),href:l+1!==a.length?(null==t?void 0:null===(d=t.route)||void 0===d?void 0:d.navPath)||(null==t?void 0:null===(i=t.route)||void 0===i?void 0:i.path):void 0}):e.push({key:t.pathnameBase,title:null==t?void 0:null===(s=t.route)||void 0===s?void 0:s.name,href:l+1!==a.length?(null==t?void 0:null===(u=t.route)||void 0===u?void 0:u.navPath)||(null==t?void 0:null===(c=t.route)||void 0===c?void 0:c.path):void 0}));}),e;},[a]),c=e=>{d((0,h.urlPathWithQuery)(e,[],i));};return(0,r.jsx)(x,{style:{...l},children:(0,r.jsx)(v.default,{...o,children:s.map(e=>(0,r.jsx)(C,{children:e.href?(0,r.jsx)("a",{className:"link-breadcrumb-item",onClick:()=>c(e.href),children:e.title}):(0,r.jsx)("span",{className:"span-breadcrumb-item",children:e.title})},e.key))})});})`
  &.breadcrumb {
    margin-bottom: 10px;
  }
`,y=n.styled.div`
  position: relative;
  padding: 0 var(--padding-lg) var(--padding-lg);
  &.layout-with-breadcrumb {
    padding-top: 12px;
  }
  &.layout-without-breadcrumb {
    padding-top: 24px;
  }
`,w=({children:e,breadcrumb:t=!1,loading:l,title:o,goBack:a,showBack:n,titleProps:d,className:s,...u})=>{if(l)return(0,r.jsx)(i.default,{active:!0});let c=!!t;return(0,r.jsxs)(y,{...u,className:(0,f.default)([{"layout-without-breadcrumb":!c},{"layout-with-breadcrumb":c},s]),children:[!1!==t&&(0,r.jsx)(_,{className:"breadcrumb",...t}),(o||(null==d?void 0:d.title))&&(0,r.jsx)(P.Title,{level:"page",title:o,goBackCb:a,showBack:n,...d}),e]});};},"26682a25":function(e,t,l){"use strict";l.d(t,"__esModule",{value:!0}),l.d(t,"default",{enumerable:!0,get:function(){return b;}});var o=l("777fffbe"),a=l("32b7a2cf"),r=o._(l("24c8531b")),n=l("df7e9d64"),d=o._(l("f02131d0")),i=o._(l("fe0a4152")),s=l("4c4535f5"),u=l("5b5ed4a9"),c=o._(l("d5b565e0")),f=o._(l("2b798761")),m=o._(l("c60e02e5")),g=o._(l("1e70bad6")),p=l("4d0e37ae"),v=l("3834a44f"),h=l("e636800f"),b=()=>{var e;let t=(0,u.useNavigate)(),l=(0,p.useRef)(null),o=(0,v.getProjectId)(),{userInfo:b}=(0,n.useUserInfo)({resourceTag:"PROJECT",resourceId:Number(o)}),j=null==b?void 0:null===(e=b.permissionList)||void 0===e?void 0:e.some(e=>{var t;return(null===(t=e.accountRoleInfo)||void 0===t?void 0:t.roleName)&&["SUPER","OWNER"].includes(e.accountRoleInfo.roleName);}),{data:C,isFetching:x,refetch:P}=(0,h.useProjectInfo)(),{run:_,loading:y}=(0,u.useRequest)(s.update,{manual:!0,formatResult:e=>(e.success&&(f.default.success(d.default.get({id:"spg.ProjectConfig.Config.Project.UpdateSucceeded",dm:"\u66F4\u65B0\u6210\u529F"})),P()),e)}),{run:w,loading:N}=(0,u.useRequest)(s.deleteUsingDELETE,{manual:!0,formatResult:e=>(e.success&&(f.default.success(d.default.get({id:"spg.ProjectConfig.Config.Project.DeletedSuccessfully",dm:"\u5220\u9664\u6210\u529F"})),t("/home")),e)});return(0,a.jsx)(r.default,{titleProps:{title:d.default.get({id:"spg.ProjectConfig.Config.Project.KnowledgeBaseConfiguration",dm:"\u77E5\u8BC6\u5E93\u914D\u7F6E"}),titleExtra:(0,a.jsx)(a.Fragment,{children:(0,a.jsx)(c.default,{type:"primary",danger:!0,onClick:()=>{m.default.confirm({title:d.default.get({id:"spg.ProjectConfig.Config.Project.AreYouSureYouWant",dm:"\u786E\u8BA4\u5220\u9664\u9879\u76EE\u5417\uFF1F"}),content:d.default.get({id:"spg.ProjectConfig.Config.Project.AllKnowledgeInTheProject",dm:"\u5220\u9664\u540E\u9879\u76EE\u4E2D\u5168\u90E8\u77E5\u8BC6\u5C06\u4E00\u5E76\u6E05\u7A7A"}),okText:d.default.get({id:"spg.ProjectConfig.Config.Project.Ok",dm:"\u786E\u5B9A"}),cancelText:d.default.get({id:"spg.ProjectConfig.Config.Project.Cancel",dm:"\u53D6\u6D88"}),okButtonProps:{danger:!0},onOk(){w({projectId:Number(o)});}});},children:d.default.get({id:"spg.ProjectConfig.Config.Project.DeleteItem",dm:"\u5220\u9664\u9879\u76EE"})})})},children:x?(0,a.jsx)(g.default,{style:{width:"100%"}}):(0,a.jsx)(g.default,{spinning:y||N,children:(0,a.jsx)(i.default,{ableEdit:j,disabledTip:d.default.get({id:"spg.ProjectConfig.Config.Project.OwnerOrSuperTubeOnly",dm:"\u4EC5Owner\u6216\u8D85\u7BA1\u53EF\u64CD\u4F5C"}),ref:l,onSubmit:()=>{var e;null===(e=l.current)||void 0===e||e.form.validateFields().then(e=>{let t={id:C.id,name:e.name,namespace:e.namespace,description:e.description,config:"{}"},l=JSON.stringify({graph_store:e.graph_store,vectorizer:e.vectorizer,prompt:e.prompt,llm_select:C.config.llm_select||[],llm:C.config.llm});t.config=l,_({id:C.id},t);});},initConfig:{...C,...C.config}})})});};},"3f9cbbdf":function(e,t,l){"use strict";l.d(t,"__esModule",{value:!0}),l.e(t,{useGlobalConfig:function(){return u;},useGlobalConfigTitle:function(){return s;}});var o=l("852bbaa9"),a=l("5ef61bc1"),r=l("240ff6a0"),n=l("5b5ed4a9"),d=l("4d0e37ae");let{json2Object:i}=o._(l("073a1148")),s=()=>{let{isFetching:e,data:t}=(0,n.useQuery)({queryFn:async()=>{let e=await (0,r.getConfigListByCondition)({configId:"KAG_ENV",version:"1"});return e.success&&e.result?i(e.result.config||"{}").configTitle:{};},queryKey:["KAG_GlobalConfigTitle"]});return{isFetching:e,data:t||{}};},u=()=>{let e=a.globalConfigId,{isFetching:t,data:l={id:0,configName:"",configId:e,config:{},showProfilePicture:!1,showUserConfig:!1},refetch:o}=(0,n.useQuery)({queryFn:async()=>{let t=await (0,r.getConfigListByCondition)({configId:e,version:"1"});if(t.success&&t.result){var l,o,a,n;return{config:i(t.result.config||"{}"),id:null===(l=t.result)||void 0===l?void 0:l.id,configName:null===(o=t.result)||void 0===o?void 0:o.configName,showProfilePicture:!!(null===(a=t.result)||void 0===a?void 0:a.showProfilePicture),showUserConfig:!!(null===(n=t.result)||void 0===n?void 0:n.showUserConfig)};}},queryKey:["KAG_GlobalConfig"],enabled:!1,retry:!1});return(0,d.useEffect)(()=>{o();},[]),{isFetching:t,refetch:o,data:l,config:l.config,configId:e,version:"1"};};},"5e00c259":function(e,t,l){"use strict";l.d(t,"__esModule",{value:!0}),l.d(t,"Title",{enumerable:!0,get:function(){return d;}});var o=l("32b7a2cf"),a=l("5b5ed4a9");l("4d0e37ae");var r=l("fc1f4356");let n=a.styled.div`
  .header {
    color: var(--dark-shade-85);
    font-weight: var(--font-medium);
    font-size: ${({$level:e})=>"page"===e?"var(--h1-font-size)":"var(--h3-font-size)"};
    line-height: ${({$level:e})=>"page"===e?"28px":"24px"};
  }
`,d=({className:e,style:t,level:l="page",title:d,titleExtra:i,showBack:s=!1,goBackCb:u,children:c})=>{let f=(0,a.useNavigate)();return(0,o.jsxs)(n,{$level:l,className:e,style:t,children:[(0,o.jsxs)("div",{className:"flex-row mb16",children:[(0,o.jsxs)("div",{className:"header",children:[s&&(0,o.jsx)(a.Icon,{className:"icon mr8 pointer",icon:"ant-design:arrow-left-outlined",onClick:()=>(0,r.isFunction)(u)?u():f(-1)}),d]}),(0,o.jsx)("div",{children:i})]}),(0,o.jsx)("div",{children:c})]});};},c5f39a1b:function(e,t,l){"use strict";l.d(t,"__esModule",{value:!0}),l.d(t,"default",{enumerable:!0,get:function(){return o;}});var o=l("777fffbe")._(l("85d9e535")).default;},e636800f:function(e,t,l){"use strict";l.d(t,"__esModule",{value:!0}),l.d(t,"useProjectInfo",{enumerable:!0,get:function(){return i;}});var o=l("852bbaa9"),a=l("4c4535f5"),r=l("5b5ed4a9"),n=l("3834a44f");let{json2Object:d}=o._(l("073a1148")),i=()=>{let e=Number((0,n.getProjectId)()),{isFetching:t,data:l={config:{}},refetch:o}=(0,r.useQuery)({queryFn:async()=>{let t=await (0,a.getProjectInfo)({projectId:e});if(t.success&&t.result){let e=d(t.result.config||"{}");return{...t.result,config:e};}},queryKey:["getProjectInfo",e]});return{data:l,isFetching:t,refetch:o};};},fe0a4152:function(e,t,l){l.d(t,"__esModule",{value:!0}),l.e(t,{default:function(){return k;}});var o=l("777fffbe"),a=l("852bbaa9"),r=l("32b7a2cf"),n=l("0a75b646"),d=o._(n),i=l("f02131d0"),s=o._(i),u=l("3f9cbbdf"),c=l("d5b565e0"),f=o._(c),m=l("8f891262"),g=o._(m),p=l("673e678e"),v=o._(p),h=l("097087ae"),b=o._(h),j=l("1e70bad6"),C=o._(j),x=l("4d0e37ae"),P=a._(x),_=l("5b5ed4a9"),y=l("80411155"),w=o._(y);let N=_.styled.div`
  width: 632px;
  margin-left: 50%;
  transform: translate(-50%);

  .bottom-btns {
    position: sticky;
    bottom: 0;
    background: #fff;
    margin: 0;
    padding: 24px 0;

    .submit-btn {
      margin-right: 12px;
    }
  }
`,I=(0,_.styled)(w.default)`
  height: calc(100vh - 164px);
  overflow: auto;

  .ant-card-body {
    padding-bottom: 0;
  }
`;var k=(0,P.forwardRef)((e,t)=>{let{ableEdit:l,disabledTip:o="",initConfig:a,globalConfig:n,onSubmit:i,onCancel:c}=e,{data:m,isFetching:p}=(0,u.useGlobalConfigTitle)(),[h]=g.default.useForm(),j={namespace:(null==a?void 0:a.namespace)||"",name:(null==a?void 0:a.name)||"",description:(null==a?void 0:a.description)||"",graph_store:{source_type:"default",...(null==n?void 0:n.graph_store)||{},...(null==a?void 0:a.graph_store)||{}},vectorizer:{source_type:"default",...(null==n?void 0:n.vectorizer)||{},...(null==a?void 0:a.vectorizer)||{}},prompt:{source_type:"default",...(null==n?void 0:n.prompt)||{},...(null==a?void 0:a.prompt)||{}},llm_select:(null==a?void 0:a.llm_select)||(null==n?void 0:n.llm_select)||[]};(0,P.useImperativeHandle)(t,()=>({form:h}));let x=(e,t)=>{let l=a||n;"default"===e.target.value&&(null==l?void 0:l[t])&&h.setFieldsValue({[t]:{...l[t],source_type:"default"}}),"custom"===e.target.value&&(null==a?void 0:a[t])&&h.setFieldsValue({[t]:{...a[t],source_type:"custom"}});};return(0,r.jsx)(C.default,{spinning:p,children:(0,r.jsx)(I,{children:(0,r.jsx)(N,{children:(0,r.jsxs)(g.default,{disabled:!l,layout:"vertical",initialValues:j,form:h,scrollToFirstError:{behavior:e=>{e.forEach(({el:e,top:t,left:l})=>{e.scrollTop=t,t>0&&(e.scrollTop=t+150),e.scrollLeft=l;});}},children:[(0,r.jsx)(g.default.Item,{label:s.default.get({id:"spg.Home.components.CreateNewProject.ChineseNameOfKnowledgeBase",dm:"\u77E5\u8BC6\u5E93\u4E2D\u6587\u540D\u79F0"}),name:"name",rules:[{required:!0,message:s.default.get({id:"spg.Home.components.CreateNewProject.PleaseEnter",dm:"\u8BF7\u8F93\u5165"})}],children:(0,r.jsx)(v.default,{placeholder:s.default.get({id:"spg.Home.components.CreateNewProject.PleaseEnter",dm:"\u8BF7\u8F93\u5165"})})}),(0,r.jsx)(g.default.Item,{label:s.default.get({id:"spg.Home.components.CreateNewProject.EnglishNameOfKnowledgeBase",dm:"\u77E5\u8BC6\u5E93\u82F1\u6587\u540D\u79F0"}),name:"namespace",rules:[{required:!0,message:s.default.get({id:"spg.Home.components.CreateNewProject.PleaseEnter",dm:"\u8BF7\u8F93\u5165"})},{pattern:/^[A-Z][A-Za-z0-9]{2,}$/,message:s.default.get({id:"spg.Home.components.CreateNewProject.MustStartWithAnUppercase",dm:"\u5FC5\u987B\u4EE5\u5927\u5199\u5B57\u6BCD\u5F00\u5934\uFF0C\u4E14\u4EC5\u652F\u6301\u5B57\u6BCD\u548C\u6570\u5B57\u7EC4\u5408\uFF0C\u81F3\u5C11\u4E09\u4E2A\u5B57\u7B26"})}],children:(0,r.jsx)(v.default,{disabled:!!(null==a?void 0:a.namespace),placeholder:s.default.get({id:"spg.Home.components.CreateNewProject.PleaseEnter",dm:"\u8BF7\u8F93\u5165"})})}),(0,r.jsx)(g.default.Item,{label:s.default.get({id:"spg.components.ProjectConfigComp.KnowledgeBaseDescription",dm:"\u77E5\u8BC6\u5E93\u63CF\u8FF0"}),name:"description",children:(0,r.jsx)(v.default.TextArea,{placeholder:s.default.get({id:"spg.components.ProjectConfigComp.PleaseEnterADescriptionOf",dm:"\u8BF7\u8F93\u5165\u77E5\u8BC6\u5E93\u63CF\u8FF0\uFF0C\u5728\u77E5\u8BC6\u62BD\u53D6\u548C\u77E5\u8BC6\u95EE\u7B54\u65F6\u4F5C\u4E3Aprompt\uFF1B\u4F8B\uFF1A\u8FD9\u662F\u4E00\u4E2A\u6CD5\u5B66\u77E5\u8BC6\u5E93\uFF0C \u4E3B\u8981\u63CF\u8FF0\u6CD5 \u5F8B\u76F8\u5173\u7684\u77E5\u8BC6"}),rows:5})}),(0,r.jsxs)(g.default.Item,{label:s.default.get({id:"spg.Home.components.CreateNewProject.FigureStorageConfiguration",dm:"\u56FE\u50A8\u5B58\u914D\u7F6E"}),name:"graph_store",children:[(0,r.jsx)(g.default.Item,{name:["graph_store","source_type"],children:(0,r.jsxs)(b.default.Group,{onChange:e=>x(e,"graph_store"),children:[(0,r.jsx)(b.default,{value:"default",children:s.default.get({id:"spg.components.ProjectConfigComp.DefaultConfiguration",dm:"\u9ED8\u8BA4\u914D\u7F6E"})}),(0,r.jsx)(b.default,{value:"custom",children:s.default.get({id:"spg.components.ProjectConfigComp.CustomConfiguration",dm:"\u81EA\u5B9A\u4E49\u914D\u7F6E"})})]})}),(0,r.jsx)(g.default.Item,{noStyle:!0,shouldUpdate:!0,children:()=>{var e;let t="default"===h.getFieldValue(["graph_store","source_type"]);return((null==m?void 0:null===(e=m.graph_store)||void 0===e?void 0:e.title)||[]).map(({cname:e,ename:l,defaultValue:o,required:a,formProps:n})=>(0,r.jsx)(g.default.Item,{label:e,initialValue:o,rules:[{required:a,message:s.default.get({id:"spg.Home.components.CreateNewProject.PleaseEnter",dm:"\u8BF7\u8F93\u5165"})}],name:["graph_store",l],children:(0,r.jsx)(v.default,{disabled:t,placeholder:s.default.get({id:"spg.Home.components.CreateNewProject.PleaseEnter",dm:"\u8BF7\u8F93\u5165"}),...n})},l));}})]}),(0,r.jsxs)(g.default.Item,{label:s.default.get({id:"spg.Home.components.CreateNewProject.VectorConfiguration",dm:"\u5411\u91CF\u914D\u7F6E"}),name:"vectorizer",children:[(0,r.jsx)(g.default.Item,{name:["vectorizer","source_type"],children:(0,r.jsxs)(b.default.Group,{onChange:e=>x(e,"vectorizer"),children:[(0,r.jsx)(b.default,{value:"default",children:s.default.get({id:"spg.components.ProjectConfigComp.DefaultConfiguration",dm:"\u9ED8\u8BA4\u914D\u7F6E"})}),(0,r.jsx)(b.default,{value:"custom",children:s.default.get({id:"spg.components.ProjectConfigComp.CustomConfiguration",dm:"\u81EA\u5B9A\u4E49\u914D\u7F6E"})})]})}),(0,r.jsx)(g.default.Item,{noStyle:!0,shouldUpdate:!0,children:()=>{var e;let t="default"===h.getFieldValue(["vectorizer","source_type"]);return((null==m?void 0:null===(e=m.vectorizer)||void 0===e?void 0:e.title)||[]).map(({cname:e,ename:l,defaultValue:o,required:a,formProps:n})=>(0,r.jsx)(g.default.Item,{label:e,initialValue:o,rules:[{required:a,message:s.default.get({id:"spg.Home.components.CreateNewProject.PleaseEnter",dm:"\u8BF7\u8F93\u5165"})}],name:["vectorizer",l],children:(0,r.jsx)(v.default,{disabled:t,placeholder:s.default.get({id:"spg.Home.components.CreateNewProject.PleaseEnter",dm:"\u8BF7\u8F93\u5165"}),...n})},l));}})]}),(0,r.jsxs)(g.default.Item,{label:s.default.get({id:"spg.Home.components.CreateNewProject.PromptWordsInChineseAnd",dm:"\u63D0\u793A\u8BCD\u4E2D\u82F1\u6587\u914D\u7F6E"}),name:"prompt",children:[(0,r.jsx)(g.default.Item,{name:["prompt","source_type"],children:(0,r.jsxs)(b.default.Group,{onChange:e=>x(e,"prompt"),children:[(0,r.jsx)(b.default,{value:"default",children:s.default.get({id:"spg.components.ProjectConfigComp.DefaultConfiguration",dm:"\u9ED8\u8BA4\u914D\u7F6E"})}),(0,r.jsx)(b.default,{value:"custom",children:s.default.get({id:"spg.components.ProjectConfigComp.CustomConfiguration",dm:"\u81EA\u5B9A\u4E49\u914D\u7F6E"})})]})}),(0,r.jsx)(g.default.Item,{noStyle:!0,shouldUpdate:!0,children:()=>{var e;let t="default"===h.getFieldValue(["prompt","source_type"]);return((null==m?void 0:null===(e=m.prompt)||void 0===e?void 0:e.title)||[]).map(({cname:e,ename:l,defaultValue:o,required:a,formProps:n})=>(0,r.jsx)(g.default.Item,{label:e,initialValue:o,rules:[{required:a,message:s.default.get({id:"spg.components.ProjectConfigComp.PleaseEnterCname",dm:"\u8BF7\u8F93\u5165 {cname}"},{cname:e})}],name:["prompt",l],children:(0,r.jsx)(v.default,{disabled:t,placeholder:s.default.get({id:"spg.Home.components.CreateNewProject.PleaseEnter",dm:"\u8BF7\u8F93\u5165"}),...n})},l));}})]}),(0,r.jsxs)(g.default.Item,{className:"bottom-btns",children:[(0,r.jsx)(d.default,{disabled:!l,tip:l?"":o,className:"submit-btn",type:"primary",htmlType:"submit",onClick:i,children:s.default.get({id:"spg.components.ProjectConfigComp.Save",dm:"\u4FDD\u5B58"})}),c&&(0,r.jsx)(f.default,{onClick:c,children:s.default.get({id:"spg.components.ProjectConfigComp.Cancel",dm:"\u53D6\u6D88"})})]})]})})})});});}}]);
