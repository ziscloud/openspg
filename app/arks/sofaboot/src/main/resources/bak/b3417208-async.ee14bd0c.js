(("undefined"!=typeof globalThis?globalThis:self)["makoChunk_open-semantic-graph"]=("undefined"!=typeof globalThis?globalThis:self)["makoChunk_open-semantic-graph"]||[]).push([["b3417208"],{b3417208:function(e,t,i){"use strict";i.d(t,"__esModule",{value:!0}),i.d(t,"UnicodeTextModelHighlighter",{enumerable:!0,get:function(){return u;}});var s=i("852bbaa9"),o=i("e7e5ddb3"),n=i("64b17507"),a=s._(i("246b9c8c")),r=i("cac3a6eb"),l=i("4af8c435");class u{static computeUnicodeHighlights(e,t,i){var s;let u,h;let g=i?i.startLineNumber:1,d=i?i.endLineNumber:e.getLineCount(),C=new c(t),b=C.getCandidateCodePoints();u="allNonBasicAscii"===b?RegExp("[^\\t\\n\\r\\x20-\\x7E]","g"):RegExp(`${(s=Array.from(b),`[${a.escapeRegExpCharacters(s.map(e=>String.fromCodePoint(e)).join(""))}]`)}`,"g");let f=new n.Searcher(null,u),m=[],p=!1,A=0,I=0,w=0;e:for(let t=g;t<=d;t++){let i=e.getLineContent(t),s=i.length;f.reset(0);do if(h=f.next(i)){let e=h.index,n=h.index+h[0].length;if(e>0){let t=i.charCodeAt(e-1);a.isHighSurrogate(t)&&e--;}if(n+1<s){let e=i.charCodeAt(n-1);a.isHighSurrogate(e)&&n++;}let u=i.substring(e,n),c=(0,l.getWordAtText)(e+1,l.DEFAULT_WORD_REGEXP,i,0);c&&c.endColumn<=e+1&&(c=null);let g=C.shouldHighlightNonBasicASCII(u,c?c.word:null);if(0!==g){if(3===g?A++:2===g?I++:1===g?w++:(0,r.assertNever)(g),m.length>=1e3){p=!0;break e;}m.push(new o.Range(t,e+1,t,n+1));}}while(h)}return{ranges:m,hasMore:p,ambiguousCharacterCount:A,invisibleCharacterCount:I,nonBasicAsciiCharacterCount:w};}static computeUnicodeHighlightReason(e,t){let i=new c(t);switch(i.shouldHighlightNonBasicASCII(e,null)){case 0:return null;case 2:return{kind:1};case 3:{let s=e.codePointAt(0),o=i.ambiguousCharacters.getPrimaryConfusable(s),n=a.AmbiguousCharacters.getLocales().filter(e=>!a.AmbiguousCharacters.getInstance(new Set([...t.allowedLocales,e])).isAmbiguous(s));return{kind:0,confusableWith:String.fromCodePoint(o),notAmbiguousInLocales:n};}case 1:return{kind:2};}}}class c{constructor(e){this.options=e,this.allowedCodePoints=new Set(e.allowedCodePoints),this.ambiguousCharacters=a.AmbiguousCharacters.getInstance(new Set(e.allowedLocales));}getCandidateCodePoints(){if(this.options.nonBasicASCII)return"allNonBasicAscii";let e=new Set;if(this.options.invisibleCharacters)for(let t of a.InvisibleCharacters.codePoints)h(String.fromCodePoint(t))||e.add(t);if(this.options.ambiguousCharacters)for(let t of this.ambiguousCharacters.getConfusableCodePoints())e.add(t);for(let t of this.allowedCodePoints)e.delete(t);return e;}shouldHighlightNonBasicASCII(e,t){let i=e.codePointAt(0);if(this.allowedCodePoints.has(i))return 0;if(this.options.nonBasicASCII)return 1;let s=!1,o=!1;if(t)for(let e of t){let t=e.codePointAt(0),i=a.isBasicASCII(e);s=s||i,i||this.ambiguousCharacters.isAmbiguous(t)||a.InvisibleCharacters.isInvisibleCharacter(t)||(o=!0);}return!s&&o?0:this.options.invisibleCharacters&&!h(e)&&a.InvisibleCharacters.isInvisibleCharacter(i)?2:this.options.ambiguousCharacters&&this.ambiguousCharacters.isAmbiguous(i)?3:0;}}function h(e){return" "===e||"\n"===e||"	"===e;}}}]);
