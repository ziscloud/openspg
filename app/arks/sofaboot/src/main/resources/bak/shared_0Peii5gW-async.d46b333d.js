(("undefined"!=typeof globalThis?globalThis:self)["makoChunk_open-semantic-graph"]=("undefined"!=typeof globalThis?globalThis:self)["makoChunk_open-semantic-graph"]||[]).push([["shared_0Peii5gW"],{"1542703d":function(e,t,n){n.d(t,"__esModule",{value:!0}),n.e(t,{getConceptRelationDetailMock:function(){return a;}});var r=n("777fffbe"),i=n("f02131d0"),o=r._(i);let a=()=>({errCode:"",errMessage:"",success:!0,value:{dslRule:"",endEntity:{description:"",descriptionZh:"",id:"-1657183593570377904",label:"RpgSys.ArmorClass",metaConcept:!1,metaConceptTypeEnum:"attr",name:"__ROOT__",nameZh:"",parentProps:null,primaryKey:"__ROOT__",properties:{name:"__ROOT__",conceptParentType:"RpgSys.ArmorClass",conceptCategory:"CONCEPT",id:"__ROOT__"},taxonomicConcept:!1},id:"3e7fc233ce300cce3a4fc80b00ebf24a",name:"isA",nameZh:"",properties:null,startEntity:{description:"",descriptionZh:"",id:"-4988027161528127924",label:"RpgSys.ArmorClass",metaConcept:!1,metaConceptTypeEnum:"attr",name:"abc",nameZh:"",parentProps:null,primaryKey:"abc",properties:{parent:"",aliasZh:o.default.get({id:"spg.akg.mock.getConceptRelationDetail.Alias",dm:"\u522B\u540D"}),parentZh:o.default.get({id:"spg.akg.mock.getConceptRelationDetail.ParentAttribute",dm:"\u7236\u5C5E\u6027"}),nameZh:o.default.get({id:"spg.akg.mock.getConceptRelationDetail.Name",dm:"\u540D\u79F0"}),conceptParentType:"RpgSys.ArmorClass",name:"abc",conceptTypeZh:"",alias:"def",conceptCategory:"CONCEPT",id:"abc",t1:"123",t1Zh:o.default.get({id:"spg.akg.mock.getConceptRelationDetail.Test",dm:"\u6D4B1"})},taxonomicConcept:!1}},warning:""});},"48fdd872":function(e,t,n){"use strict";n.d(t,"__esModule",{value:!0}),n.e(t,{getSchemaAndRelation:function(){return i;},getSchemaEntityProperties:function(){return o;},getSchemaNameMap:function(){return a;},getSchemaRelationProperties:function(){return c;},getSchemaTreeWithProject:function(){return l;}});var r=n("05ecbb5b");async function i(e,t){let{projectId:n}=e;return(0,r.request)(`/v1/schemas/graph/${n}`,{method:"GET",params:{...e},...t||{}});}async function o(e,t){let{id:n}=e;return(0,r.request)(`/v1/schemas/entity/${n}`,{method:"GET",params:{...e},...t||{}});}async function a(e,t){return(0,r.request)("/v1/schemas/getSchemaNameMap",{method:"GET",params:{...e},...t||{}});}async function c(e,t){let{id:n}=e;return(0,r.request)(`/v1/schemas/relation/${n}`,{method:"GET",params:{...e},...t||{}});}async function l(e,t){let{projectId:n}=e;return(0,r.request)(`/v1/schemas/tree/${n}`,{method:"GET",params:{...e},...t||{}});}},"55734e13":function(e,t,n){"use strict";var r,i,o,a,c,l,d,u,s,m,p,E,T,h,g,y;n.d(t,"__esModule",{value:!0}),n.e(t,{AlgorithmOperatorTypeEnum:function(){return l;},ENTITY_CATEGORY:function(){return u;},GraphMode:function(){return r;},NET_GRAPH_TYPE:function(){return i;},PropertyCategory:function(){return c;},PropertyGroupName:function(){return a;},RELATION_CATEGORY:function(){return d;}}),(s=r||(r={})).normal="normal",s.tree="tree",(m=i||(i={})).COMBO_GRAPH="combo-graph",m.GRAPH="graph",(p=o||(o={})).node="node",p.edge="edge",p.combo="combo",(E=a||(a={})).PROPERTY_GROUP_DEFAULT_NAME="1_\u57FA\u7840\u5C5E\u6027",E.PROPERTY_GROUP_TIME_NAME="2_\u65F6\u95F4\u5C5E\u6027",E.PROPERTY_GROUP_SUBJECT_NAME="3_\u4E3B\u4F53\u5C5E\u6027",E.PROPERTY_GROUP_OBJECT_NAME="4_\u5BA2\u4F53\u5C5E\u6027",E.PROPERTY_GROUP_PLACE_NAME="5_\u7A7A\u95F4\u5C5E\u6027",(T=c||(c={})).BASIC="BASIC_TYPE",T.ENTITY="ENTITY_TYPE",T.CONCEPT="CONCEPT_TYPE",T.STANDARD="STANDARD_TYPE",T.EVENT="EVENT_TYPE",(h=l||(l={})).ENTITY_NORMALIZE="ENTITY_NORMALIZE",h.ENTITY_LINK="ENTITY_LINK",h.KNOWLEDGE_EXTRACT="KNOWLEDGE_EXTRACT",h.PROPERTY_NORMALIZE="PROPERTY_NORMALIZE",(g=d||(d={})).BASIC="BASIC",g.CONCEPT="CONCEPT",g.PROPERTY="PROPERTY",g.ENTITY="ENTITY",g.STANDARD="STANDARD",g.ONE_LEVEL="ONE_LEVEL",(y=u||(u={})).ENTITY="ADVANCED",y.META_CONCEPT="CONCEPT";},d2704ec9:function(e,t,n){"use strict";n.d(t,"__esModule",{value:!0}),n.e(t,{addExtraInfoToTree:function(){return s;},concatConceptTree:function(){return v;},flat:function(){return m;},getTreeRelativeProjects:function(){return p;},rootKey:function(){return d;},rootNode:function(){return c;},transformConceptTreeData:function(){return C;},transformRelationGraphData:function(){return g;},traverseTree:function(){return f;},virtualConcept:function(){return l;}});var r=n("fc1f4356"),i=n("3834a44f"),o=n("9f12178c"),a=n("4c70c3ed");let c={id:"1",nameZh:"\u4E8B\u7269",name:"Thing"},l={id:"virtualConcept_-1",name:"virtualConcept",nameZh:"\u6982\u5FF5"},d="__ROOT__",u=e=>{var t;return(null==e?void 0:e.schemaType)||(null==e?void 0:e.children)&&(null==e?void 0:null===(t=e.children)||void 0===t?void 0:t.length)?e:{};},s=(e,t)=>{let n=(0,r.cloneDeep)(e),o=[],a=(e,n)=>{e.schemaType||(e.schemaType=e.entityTypeDTO||{});let r="";if(e.schemaType){var c;r=String(e.schemaType.id||"");let{belongToProject:a=0}=e.schemaType,l=r;t&&(e.isInclude=!0),e.belongProjectId=String(a),e.belongToProject=a;let d=String((0,i.getProjectId)())!==String(a);e.isImport=d,n!==r&&0>o.findIndex(e=>e.id===l)&&(o.push({...e.schemaType,id:l,parentId:n,isInclude:!0}),e.id=l),e.schemaType.subTypeCount=(null===(c=e.children)||void 0===c?void 0:c.length)||0,e.schemaType=E(e.schemaType);}e.children&&e.children.forEach(e=>{a(e,r);});};return a(n,"0"),{data:u(n),list:o};};function m(e,t="children"){return e.reduce((e,n)=>{var r;return e.concat((null===(r=n[t])||void 0===r?void 0:r.length)?[...m(n[t],t),n]:n);},[]);}let p=e=>(0,r.isEmpty)(e)?[]:m([e]).reduce((e,{schemaType:t={}})=>{let n=[...e],{belongToProject:r=0,belongToProjectName:i=""}=t;return e.some(e=>e.id===String(r))||n.push({id:String(r),name:i}),n;},[]),E=e=>{let t=e.entityCategory||o.SchemaEntityCategoryEnum.ADVANCED;if("string"==typeof t){let[e]=t.split("_");t="ENTITY"===e?o.SchemaEntityCategoryEnum.ADVANCED:e;}return{...e,id:String(e.id||e.name),schemaEntityCategoryEnum:t};},T=e=>{var t,n,r,i,o,a,c,l;if(!e)return{};let d=(null===(t=e.startEntity)||void 0===t?void 0:t.id)||(null===(n=e.startEntity)||void 0===n?void 0:n.name),u=(null===(r=e.endEntity)||void 0===r?void 0:r.id)||(null===(i=e.endEntity)||void 0===i?void 0:i.name);return{...e,belongToProject:e.originBelongToProject,id:`${d}_${null==e?void 0:e.name}_${u}`,originId:(null==e?void 0:e.id)||(null==e?void 0:e.name),direction:"SINGLE",logicRelation:!!e.logicRuleDTO,relationCategory:"BASIC",source:String(d),sourceName:null===(o=e.startEntity)||void 0===o?void 0:o.name,sourceNameZh:null===(a=e.startEntity)||void 0===a?void 0:a.nameZh,type:null==e?void 0:e.name,typeZh:null==e?void 0:e.nameZh,target:String(u),targetName:null===(c=e.endEntity)||void 0===c?void 0:c.name,targetNameZh:null===(l=e.endEntity)||void 0===l?void 0:l.nameZh};},h={[o.SchemaEntityCategoryEnum.ADVANCED]:"BaseNode",[o.SchemaEntityCategoryEnum.CONCEPT]:"SquareNode",[o.SchemaEntityCategoryEnum.EVENT]:"HexagonNode",[o.SchemaEntityCategoryEnum.STANDARD]:"IconNode"},g=({nodes:e,edges:t})=>{let n=e.map(E),i=t.map(T).filter(e=>!(0,r.isEmpty)(e)),o=e=>({...e,isCoreKnowledge:y(e)});return{nodes:n.map(o).map(e=>({...e,shape:h[e.schemaEntityCategoryEnum]})),edges:i.map(o)};},y=e=>null==e?void 0:e.fromCoreKg,_=(e,t)=>{if(!1===t(e))return!1;if(e&&e.children){for(let n=e.children.length-1;n>=0;n--)if(!_(e.children[n],t))return!1;}return!0;},f=(e,t)=>"function"==typeof t&&_(e,t),C=e=>{let t=(0,r.cloneDeep)(e),n=[],i=(e,t)=>{var r;if(e.conceptRes=e.conceptDTO,!(null==e?void 0:e.conceptRes))return;let{conceptRes:o}=e;e.schemaType={...o,subTypeCount:(null===(r=e.children)||void 0===r?void 0:r.length)||0},e.label=(0,a.getMixedLocaleFieldValue)(o),e.isInclude=!0,e.parentId=t,e.id=`${o.primaryKey||o.name||""}_${o.label}`,e.originId=o.id||"",o.id=e.id,o.originId=e.originId,n.push(e.id),Array.isArray(e.children)&&e.children.forEach(t=>i(t,e.id));};return i(t,""),t;},v=(e,t,n)=>{let r;let i=[],o=[];null==e||e.forEach(e=>{i.find(t=>t.id===e.id)||(i.push(e),o.push(e.id||""));});let a=[],c=[];return f(t,e=>{let t=o.indexOf(e.id||"");if(t>-1){var l,d;a=a.concat(o.splice(t,1));let e=i.splice(t,1);c.push((null===(d=e[0])||void 0===d?void 0:null===(l=d.conceptRes)||void 0===l?void 0:l.name)||"");}return e.id!==n||(r=e,i.length||(r.noExpandData=!0)),!0;}),r&&(r.children=i),{duplicatedNodeArr:c};};},fc5eb767:function(e,t,n){"use strict";n.d(t,"__esModule",{value:!0});var r=n("d1751d7c");r._(n("55734e13"),t),r._(n("1542703d"),t),r._(n("d2704ec9"),t);}}]);
